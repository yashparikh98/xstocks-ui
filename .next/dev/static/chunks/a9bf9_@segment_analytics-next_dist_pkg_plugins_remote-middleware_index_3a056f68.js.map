{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/remote-middleware/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/remote-middleware/index.ts"],"sourcesContent":["import { CDNSettings } from '../../browser'\nimport { Context } from '../../core/context'\nimport { isServer } from '../../core/environment'\nimport { loadScript } from '../../lib/load-script'\nimport { getNextIntegrationsURL } from '../../lib/parse-cdn'\nimport { MiddlewareFunction } from '../middleware'\n\nexport async function remoteMiddlewares(\n  ctx: Context,\n  settings: CDNSettings,\n  obfuscate?: boolean\n): Promise<MiddlewareFunction[]> {\n  if (isServer()) {\n    return []\n  }\n  const path = getNextIntegrationsURL()\n  const remoteMiddleware = settings.enabledMiddleware ?? {}\n  const names = Object.entries(remoteMiddleware)\n    .filter(([_, enabled]) => enabled)\n    .map(([name]) => name)\n\n  const scripts = names.map(async (name) => {\n    const nonNamespaced = name.replace('@segment/', '')\n    let bundleName = nonNamespaced\n    if (obfuscate) {\n      bundleName = btoa(nonNamespaced).replace(/=/g, '')\n    }\n    const fullPath = `${path}/middleware/${bundleName}/latest/${bundleName}.js.gz`\n\n    try {\n      await loadScript(fullPath)\n      // @ts-ignore\n      return window[`${nonNamespaced}Middleware`] as MiddlewareFunction\n    } catch (error: any) {\n      ctx.log('error', error)\n      ctx.stats.increment('failed_remote_middleware')\n    }\n  })\n\n  let middleware = await Promise.all(scripts)\n  middleware = middleware.filter(Boolean)\n\n  return middleware as MiddlewareFunction[]\n}\n"],"names":[],"mappings":";;;;;AAEA,OAAO,EAAE,QAAQ,EAAE,MAAM,wBAAwB,CAAA;AACjD,OAAO,EAAE,UAAU,EAAE,MAAM,uBAAuB,CAAA;AAClD,OAAO,EAAE,sBAAsB,EAAE,MAAM,qBAAqB,CAAA;;;;;AAGtD,SAAgB,iBAAiB,CACrC,GAAY,EACZ,QAAqB,EACrB,SAAmB;;;;;;;;oBAEnB,QAAI,4MAAQ,EAAE,GAAE;wBACd,OAAA;4BAAA,EAAA,QAAA;4BAAO,EAAE;yBAAA,CAAA;qBACV;oBACK,IAAI,OAAG,iNAAsB,EAAE,CAAA;oBAC/B,gBAAgB,GAAG,CAAA,KAAA,QAAQ,CAAC,iBAAiB,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,CAAA,CAAE,CAAA;oBACnD,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAC3C,MAAM,CAAC,SAAC,EAAY;4BAAX,CAAC,GAAA,EAAA,CAAA,EAAA,EAAE,OAAO,GAAA,EAAA,CAAA,EAAA;wBAAM,OAAA,OAAO;oBAAP,CAAO,CAAC,CACjC,GAAG,CAAC,SAAC,EAAM;4BAAL,IAAI,GAAA,EAAA,CAAA,EAAA;wBAAM,OAAA,IAAI;oBAAJ,CAAI,CAAC,CAAA;oBAElB,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC,SAAO,IAAI;wBAAA,OAAA,IAAA,sJAAA,EAAA,OAAA,KAAA,GAAA,KAAA,GAAA;;;;;wCAC7B,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAA;wCAC/C,UAAU,GAAG,aAAa,CAAA;wCAC9B,IAAI,SAAS,EAAE;4CACb,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;yCACnD;wCACK,QAAQ,GAAG,GAAA,MAAA,CAAG,IAAI,EAAA,gBAAA,MAAA,CAAe,UAAU,EAAA,YAAA,MAAA,CAAW,UAAU,EAAA,SAAQ,CAAA;;;;;;;;;wCAG5E,OAAA;4CAAA,EAAA,OAAA;gDAAM,uMAAU,EAAC,QAAQ,CAAC;0CAAA;;wCAA1B,GAAA,IAAA,EAA0B,CAAA;wCAC1B,aAAa;wCACb,OAAA;4CAAA,EAAA,QAAA;4CAAO,MAAM,CAAC,GAAA,MAAA,CAAG,aAAa,EAAA,aAAY,CAAuB;yCAAA,CAAA;;;wCAEjE,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,OAAK,CAAC,CAAA;wCACvB,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,0BAA0B,CAAC,CAAA;;;;;;;;;;;;qBAElD,CAAC,CAAA;oBAEe,OAAA;wBAAA,EAAA,OAAA;wBAAM,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;qBAAA,CAAA;;oBAAvC,UAAU,GAAG,GAAA,IAAA,EAA0B;oBAC3C,UAAU,GAAG,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;oBAEvC,OAAA;wBAAA,EAAA,QAAA;wBAAO,UAAkC;qBAAA,CAAA;;;;CAC1C"}}]
}