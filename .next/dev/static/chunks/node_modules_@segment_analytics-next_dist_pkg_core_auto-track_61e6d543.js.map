{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/auto-track.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/auto-track.ts"],"sourcesContent":["import { Analytics } from './analytics'\nimport { EventProperties, Options } from './events'\nimport { pTimeout } from './callback'\n\n// Check if a user is opening the link in a new tab\nfunction userNewTab(event: Event): boolean {\n  const typedEvent = event as Event & {\n    ctrlKey: boolean\n    shiftKey: boolean\n    metaKey: boolean\n    button: number\n  }\n  if (\n    typedEvent.ctrlKey ||\n    typedEvent.shiftKey ||\n    typedEvent.metaKey ||\n    (typedEvent.button && typedEvent.button == 1)\n  ) {\n    return true\n  }\n  return false\n}\n\n// Check if the link opens in new tab\nfunction linkNewTab(element: HTMLAnchorElement, href: string | null): boolean {\n  if (element.target === '_blank' && href) {\n    return true\n  }\n  return false\n}\n\nexport interface JQueryShim<TElement = HTMLElement> {\n  toArray(): TElement[]\n}\n\nexport function link(\n  this: Analytics,\n  links: Element | Array<Element> | JQueryShim | null,\n  event: string | Function,\n  properties?: EventProperties | Function,\n  options?: Options\n): Analytics {\n  let elements: Array<Element> = []\n  // always arrays, handles jquery\n  if (!links) {\n    return this\n  }\n  if (links instanceof Element) {\n    elements = [links]\n  } else if ('toArray' in links) {\n    elements = links.toArray()\n  } else {\n    elements = links\n  }\n\n  elements.forEach((el: Element) => {\n    el.addEventListener(\n      'click',\n      (elementEvent: Event) => {\n        const ev = event instanceof Function ? event(el) : event\n        const props =\n          properties instanceof Function ? properties(el) : properties\n        const href =\n          el.getAttribute('href') ||\n          el.getAttributeNS('http://www.w3.org/1999/xlink', 'href') ||\n          el.getAttribute('xlink:href') ||\n          el.getElementsByTagName('a')[0]?.getAttribute('href')\n\n        const trackEvent = pTimeout(\n          this.track(ev, props, options ?? {}),\n          this.settings.timeout ?? 500\n        )\n\n        if (\n          !linkNewTab(el as HTMLAnchorElement, href) &&\n          !userNewTab(elementEvent)\n        ) {\n          if (href) {\n            elementEvent.preventDefault\n              ? elementEvent.preventDefault()\n              : (elementEvent.returnValue = false)\n            trackEvent\n              .catch(console.error)\n              .then(() => {\n                window.location.href = href\n              })\n              .catch(console.error)\n          }\n        }\n      },\n      false\n    )\n  })\n\n  return this\n}\n\nexport type LinkArgs = Parameters<typeof link>\n\nexport function form(\n  this: Analytics,\n  forms: HTMLFormElement | Array<HTMLFormElement> | null,\n  event: string | Function,\n  properties?: EventProperties | Function,\n  options?: Options\n): Analytics {\n  // always arrays, handles jquery\n  if (!forms) return this\n  if (forms instanceof HTMLFormElement) forms = [forms]\n\n  const elements = forms\n\n  elements.forEach((el) => {\n    if (!(el instanceof Element))\n      throw new TypeError('Must pass HTMLElement to trackForm/trackSubmit.')\n    const handler = (elementEvent: Event): void => {\n      elementEvent.preventDefault\n        ? elementEvent.preventDefault()\n        : (elementEvent.returnValue = false)\n\n      const ev = event instanceof Function ? event(el) : event\n      const props = properties instanceof Function ? properties(el) : properties\n\n      const trackEvent = pTimeout(\n        this.track(ev, props, options ?? {}),\n        this.settings.timeout ?? 500\n      )\n\n      trackEvent\n        .catch(console.error)\n        .then(() => {\n          el.submit()\n        })\n        .catch(console.error)\n    }\n\n    // Support the events happening through jQuery or Zepto instead of through\n    // the normal DOM API, because `el.submit` doesn't bubble up events...\n\n    const $ = (window as any).jQuery || (window as any).Zepto\n    if ($) {\n      $(el).submit(handler)\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-misused-promises\n      el.addEventListener('submit', handler, false)\n    }\n  })\n\n  return this\n}\n\nexport type FormArgs = Parameters<typeof form>\n"],"names":[],"mappings":"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"}}]
}