{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/get-process-env.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/get-process-env.ts"],"sourcesContent":["/**\n * Returns `process.env` if it is available in the environment.\n * Always returns an object make it similarly easy to use as `process.env`.\n */\nexport function getProcessEnv(): { [key: string]: string | undefined } {\n  if (typeof process === 'undefined' || !process.env) {\n    return {}\n  }\n\n  return process.env\n}\n"],"names":[],"mappings":"AAAA;;;GAGG;;;;;AACG,SAAU,aAAa;IAC3B,IAAI,OAAO,2KAAO,KAAK,WAAW,IAAI,CAAC,2KAAO,CAAC,GAAG,EAAE;QAClD,OAAO,CAAA,CAAE,CAAA;KACV;IAED,OAAO,2KAAO,CAAC,GAAG,CAAA;AACpB,CAAC"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/global-analytics-helper.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/global-analytics-helper.ts"],"sourcesContent":["import { AnalyticsSnippet } from '../browser/standalone-interface'\n\n/**\n * Stores the global window analytics key\n */\nlet _globalAnalyticsKey = 'analytics'\n\n/**\n * Gets the global analytics/buffer\n * @param key name of the window property where the buffer is stored (default: analytics)\n * @returns AnalyticsSnippet\n */\nexport function getGlobalAnalytics(): AnalyticsSnippet | undefined {\n  return (window as any)[_globalAnalyticsKey]\n}\n\n/**\n * Replaces the global window key for the analytics/buffer object\n * @param key key name\n */\nexport function setGlobalAnalyticsKey(key: string) {\n  _globalAnalyticsKey = key\n}\n\n/**\n * Sets the global analytics object\n * @param analytics analytics snippet\n */\nexport function setGlobalAnalytics(analytics: AnalyticsSnippet): void {\n  ;(window as any)[_globalAnalyticsKey] = analytics\n}\n"],"names":[],"mappings":";;;;;;;;AAEA;;GAEG,CACH,IAAI,mBAAmB,GAAG,WAAW,CAAA;AAO/B,SAAU,kBAAkB;IAChC,OAAQ,MAAc,CAAC,mBAAmB,CAAC,CAAA;AAC7C,CAAC;AAMK,SAAU,qBAAqB,CAAC,GAAW;IAC/C,mBAAmB,GAAG,GAAG,CAAA;AAC3B,CAAC;AAMK,SAAU,kBAAkB,CAAC,SAA2B;;IAC1D,MAAc,CAAC,mBAAmB,CAAC,GAAG,SAAS,CAAA;AACnD,CAAC"}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/embedded-write-key.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/embedded-write-key.ts"],"sourcesContent":["declare global {\n  interface Window {\n    analyticsWriteKey?: string\n  }\n}\n\n// This variable is used as an optional fallback for when customers\n// host or proxy their own analytics.js.\ntry {\n  window.analyticsWriteKey = '__WRITE_KEY__'\n} catch (_) {\n  // @ eslint-disable-next-line\n}\n\nexport function embeddedWriteKey(): string | undefined {\n  if (window.analyticsWriteKey === undefined) {\n    return undefined\n  }\n\n  // this is done so that we don't accidentally override every reference to __write_key__\n  return window.analyticsWriteKey !== ['__', 'WRITE', '_', 'KEY', '__'].join('')\n    ? window.analyticsWriteKey\n    : undefined\n}\n"],"names":[],"mappings":";;;;AAMA,mEAAmE;AACnE,wCAAwC;AACxC,IAAI;IACF,MAAM,CAAC,iBAAiB,GAAG,eAAe,CAAA;CAC3C,CAAC,OAAO,CAAC,EAAE;AACV,6BAA6B;CAC9B;AAEK,SAAU,gBAAgB;IAC9B,IAAI,MAAM,CAAC,iBAAiB,KAAK,SAAS,EAAE;QAC1C,OAAO,SAAS,CAAA;KACjB;IAED,uFAAuF;IACvF,OAAO,MAAM,CAAC,iBAAiB,KAAK;QAAC,IAAI;QAAE,OAAO;QAAE,GAAG;QAAE,KAAK;QAAE,IAAI;KAAC,CAAC,IAAI,CAAC,EAAE,CAAC,GAC1E,MAAM,CAAC,iBAAiB,GACxB,SAAS,CAAA;AACf,CAAC"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/parse-cdn.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/parse-cdn.ts"],"sourcesContent":["import { getGlobalAnalytics } from './global-analytics-helper'\nimport { embeddedWriteKey } from './embedded-write-key'\n\nconst analyticsScriptRegex =\n  /(https:\\/\\/.*)\\/analytics\\.js\\/v1\\/(?:.*?)\\/(?:platform|analytics.*)?/\nconst getCDNUrlFromScriptTag = (): string | undefined => {\n  let cdn: string | undefined\n  const scripts = Array.prototype.slice.call(\n    document.querySelectorAll('script')\n  )\n  scripts.forEach((s) => {\n    const src = s.getAttribute('src') ?? ''\n    const result = analyticsScriptRegex.exec(src)\n\n    if (result && result[1]) {\n      cdn = result[1]\n    }\n  })\n  return cdn\n}\n\nlet _globalCDN: string | undefined // set globalCDN as in-memory singleton\nconst getGlobalCDNUrl = (): string | undefined => {\n  const result = _globalCDN ?? getGlobalAnalytics()?._cdn\n  return result\n}\n\nexport const setGlobalCDNUrl = (cdn: string) => {\n  const globalAnalytics = getGlobalAnalytics()\n  if (globalAnalytics) {\n    globalAnalytics._cdn = cdn\n  }\n  _globalCDN = cdn\n}\n\nexport const getCDN = (): string => {\n  const globalCdnUrl = getGlobalCDNUrl()\n\n  if (globalCdnUrl) return globalCdnUrl\n\n  const cdnFromScriptTag = getCDNUrlFromScriptTag()\n\n  if (cdnFromScriptTag) {\n    return cdnFromScriptTag\n  } else {\n    // it's possible that the CDN is not found in the page because:\n    // - the script is loaded through a proxy\n    // - the script is removed after execution\n    // in this case, we fall back to the default Segment CDN\n    return `https://cdn.segment.com`\n  }\n}\n\nexport const getNextIntegrationsURL = () => {\n  const cdn = getCDN()\n  return `${cdn}/next-integrations`\n}\n\n/**\n * Replaces the CDN URL in the script tag with the one from Analytics.js 1.0\n *\n * @returns the path to Analytics JS 1.0\n **/\nexport function getLegacyAJSPath(): string {\n  const writeKey = embeddedWriteKey() ?? getGlobalAnalytics()?._writeKey\n\n  const scripts = Array.prototype.slice.call(\n    document.querySelectorAll('script')\n  )\n  let path: string | undefined = undefined\n\n  for (const s of scripts) {\n    const src = s.getAttribute('src') ?? ''\n    const result = analyticsScriptRegex.exec(src)\n\n    if (result && result[1]) {\n      path = src\n      break\n    }\n  }\n\n  if (path) {\n    return path.replace('analytics.min.js', 'analytics.classic.js')\n  }\n\n  return `https://cdn.segment.com/analytics.js/v1/${writeKey}/analytics.classic.js`\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/arguments-resolver/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/arguments-resolver/index.ts"],"sourcesContent":["import {\n  isFunction,\n  isPlainObject,\n  isString,\n  isNumber,\n} from '@segment/analytics-core'\nimport { Context } from '../context'\nimport {\n  Callback,\n  Options,\n  EventProperties,\n  SegmentEvent,\n  Traits,\n  GroupTraits,\n  UserTraits,\n} from '../events'\nimport { ID, WithId } from '../user'\n\n/**\n * Helper for the track method\n */\nexport function resolveArguments(\n  eventName: string | SegmentEvent,\n  properties?: EventProperties | Callback,\n  options?: Options | Callback,\n  callback?: Callback\n): [string, EventProperties | Callback, Options, Callback | undefined] {\n  const args = [eventName, properties, options, callback]\n\n  const name = isPlainObject(eventName) ? eventName.event : eventName\n  if (!name || !isString(name)) {\n    throw new Error('Event missing')\n  }\n\n  const data = isPlainObject(eventName)\n    ? eventName.properties ?? {}\n    : isPlainObject(properties)\n    ? properties\n    : {}\n\n  let opts: Options = {}\n  if (!isFunction(options)) {\n    opts = options ?? {}\n  }\n\n  if (isPlainObject(eventName) && !isFunction(properties)) {\n    opts = properties ?? {}\n  }\n\n  const cb = args.find(isFunction) as Callback | undefined\n  return [name, data, opts, cb]\n}\n\n/**\n * Helper for page, screen methods\n */\nexport function resolvePageArguments(\n  category?: string | object | null,\n  name?: string | object | Callback | null,\n  properties?: EventProperties | Options | Callback | null,\n  options?: Options | Callback,\n  callback?: Callback\n): [\n  string | null,\n  string | null,\n  EventProperties,\n  Options,\n  Callback | undefined\n] {\n  let resolvedProperties: EventProperties\n  let resolvedOptions: Options\n  let resolvedCategory: string | undefined | null = null\n  let resolvedName: string | undefined | null = null\n  const args = [category, name, properties, options, callback]\n\n  // The legacy logic is basically:\n  // - If there is a string, it's the name\n  // - If there are two strings, it's category and name\n  const strings = args.filter(isString)\n  if (strings.length === 1) {\n    if (isString(args[1])) {\n      resolvedName = args[1]\n      resolvedCategory = null\n    } else {\n      resolvedName = strings[0]\n      resolvedCategory = null\n    }\n  } else if (strings.length === 2) {\n    if (typeof args[0] === 'string') {\n      resolvedCategory = args[0]\n    }\n    if (typeof args[1] === 'string') {\n      resolvedName = args[1]\n    }\n  }\n\n  // handle: analytics.page('category', 'name', properties, options, callback)\n  const resolvedCallback = args.find(isFunction) as Callback | undefined\n\n  // handle:\n  // - analytics.page('name')\n  // - analytics.page('category', 'name')\n  // - analytics.page(properties)\n  // - analytics.page(properties, options)\n  // - analytics.page('name', properties)\n  // - analytics.page('name', properties, options)\n  // - analytics.page('category', 'name', properties, options)\n  // - analytics.page('category', 'name', properties, options, callback)\n  // - analytics.page('category', 'name', callback)\n  // - analytics.page(callback), etc\n\n  // The legacy logic is basically:\n  // - If there is a plain object, it's the properties\n  // - If there are two plain objects, it's properties and options\n  const objects = args.filter(isPlainObject)\n  if (objects.length === 1) {\n    if (isPlainObject(args[2])) {\n      resolvedOptions = {}\n      resolvedProperties = args[2]\n    } else if (isPlainObject(args[3])) {\n      resolvedProperties = {}\n      resolvedOptions = args[3]\n    } else {\n      resolvedProperties = objects[0]\n      resolvedOptions = {}\n    }\n  } else if (objects.length === 2) {\n    resolvedProperties = objects[0]\n    resolvedOptions = objects[1]\n  }\n\n  return [\n    resolvedCategory,\n    resolvedName,\n    (resolvedProperties ??= {}),\n    (resolvedOptions ??= {}),\n    resolvedCallback,\n  ]\n}\n\n/**\n * Helper for group, identify methods\n */\nexport const resolveUserArguments = <T extends Traits, U extends WithId>(\n  user: U\n): ResolveUser<T> => {\n  return (...args): ReturnType<ResolveUser<T>> => {\n    const values: {\n      id?: ID\n      traits?: T | null\n      options?: Options\n      callback?: Callback\n    } = {}\n    // It's a stack so it's reversed so that we go through each of the expected arguments\n    const orderStack: Array<keyof typeof values> = [\n      'callback',\n      'options',\n      'traits',\n      'id',\n    ]\n\n    // Read each argument and eval the possible values here\n    for (const arg of args) {\n      let current = orderStack.pop()\n      if (current === 'id') {\n        if (isString(arg) || isNumber(arg)) {\n          values.id = arg.toString()\n          continue\n        }\n        if (arg === null || arg === undefined) {\n          continue\n        }\n        // First argument should always be the id, if it is not a valid value we can skip it\n        current = orderStack.pop()\n      }\n\n      // Traits and Options\n      if (\n        (current === 'traits' || current === 'options') &&\n        (arg === null || arg === undefined || isPlainObject(arg))\n      ) {\n        values[current] = arg as T\n      }\n\n      // Callback\n      if (isFunction(arg)) {\n        values.callback = arg as Callback\n        break // This is always the last argument\n      }\n    }\n\n    return [\n      values.id ?? user.id(),\n      (values.traits ?? {}) as T,\n      values.options ?? {},\n      values.callback,\n    ]\n  }\n}\n\n/**\n * Helper for alias method\n */\nexport function resolveAliasArguments(\n  to: string | number,\n  from?: string | number | Options,\n  options?: Options | Callback,\n  callback?: Callback\n): [string, string | null, Options, Callback | undefined] {\n  if (isNumber(to)) to = to.toString() // Legacy behaviour - allow integers for alias calls\n  if (isNumber(from)) from = from.toString()\n  const args = [to, from, options, callback]\n\n  const [aliasTo = to, aliasFrom = null] = args.filter(isString)\n  const [opts = {}] = args.filter(isPlainObject)\n  const resolvedCallback = args.find(isFunction) as Callback | undefined\n\n  return [aliasTo, aliasFrom, opts, resolvedCallback]\n}\n\ntype ResolveUser<T extends Traits> = (\n  id?: ID | object,\n  traits?: T | Callback | null,\n  options?: Options | Callback,\n  callback?: Callback\n) => [ID, T, Options, Callback | undefined]\n\nexport type IdentifyParams = Parameters<ResolveUser<UserTraits>>\nexport type GroupParams = Parameters<ResolveUser<GroupTraits>>\nexport type EventParams = Parameters<typeof resolveArguments>\nexport type PageParams = Parameters<typeof resolvePageArguments>\nexport type AliasParams = Parameters<typeof resolveAliasArguments>\n\nexport type DispatchedEvent = Context\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/environment/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/environment/index.ts"],"sourcesContent":["export function isBrowser(): boolean {\n  return typeof window !== 'undefined'\n}\n\nexport function isServer(): boolean {\n  return !isBrowser()\n}\n"],"names":[],"mappings":";;;;;;AAAM,SAAU,SAAS;IACvB,OAAO,OAAO,MAAM,KAAK,WAAW,CAAA;AACtC,CAAC;AAEK,SAAU,QAAQ;IACtB,OAAO,CAAC,SAAS,EAAE,CAAA;AACrB,CAAC"}},
    {"offset": {"line": 356, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/connection/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/connection/index.ts"],"sourcesContent":["import { isBrowser } from '../environment'\n\nexport function isOnline(): boolean {\n  if (isBrowser()) {\n    return window.navigator.onLine\n  }\n\n  return true\n}\n\nexport function isOffline(): boolean {\n  return !isOnline()\n}\n"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,gBAAgB,CAAA;;AAEpC,SAAU,QAAQ;IACtB,QAAI,6MAAS,EAAE,GAAE;QACf,OAAO,MAAM,CAAC,SAAS,CAAC,MAAM,CAAA;KAC/B;IAED,OAAO,IAAI,CAAA;AACb,CAAC;AAEK,SAAU,SAAS;IACvB,OAAO,CAAC,QAAQ,EAAE,CAAA;AACpB,CAAC"}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/get-global.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/get-global.ts"],"sourcesContent":["// This an imperfect polyfill for globalThis\nexport const getGlobal = () => {\n  if (typeof globalThis !== 'undefined') {\n    return globalThis\n  }\n  if (typeof self !== 'undefined') {\n    return self\n  }\n  if (typeof window !== 'undefined') {\n    return window\n  }\n  if (typeof global !== 'undefined') {\n    return global\n  }\n  return null\n}\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AACrC,IAAM,SAAS,GAAG;IACvB,IAAI,OAAO,UAAU,KAAK,WAAW,EAAE;QACrC,OAAO,UAAU,CAAA;KAClB;IACD,IAAI,OAAO,IAAI,KAAK,WAAW,EAAE;QAC/B,OAAO,IAAI,CAAA;KACZ;IACD,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;QACjC,OAAO,MAAM,CAAA;KACd;IACD,IAAI,OAAO,MAAM,KAAK,WAAW,OAAE;QACjC,OAAO,MAAM,CAAA;KACd;;;AAEH,CAAC,CAAA"}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/fetch.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/fetch.ts"],"sourcesContent":["import unfetch from 'unfetch'\nimport { getGlobal } from './get-global'\n\n/**\n * Wrapper around native `fetch` containing `unfetch` fallback.\n */\nexport const fetch: typeof global.fetch = (...args) => {\n  const global = getGlobal()\n  return ((global && global.fetch) || unfetch)(...args)\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,OAAO,MAAM,SAAS,CAAA;AAC7B,OAAO,EAAE,SAAS,EAAE,MAAM,cAAc,CAAA;;;AAKjC,IAAM,KAAK,GAAwB;IAAC,IAAA,OAAA,EAAA,CAAO;QAAP,IAAA,KAAA,CAAO,EAAP,KAAA,UAAA,MAAO,EAAP,IAAO,CAAA;QAAP,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAO;;IAChD,IAAM,MAAM,OAAG,qMAAS,EAAE,CAAA;IAC1B,OAAO,CAAC,AAAC,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC,GAAI,kLAAO,CAAC,CAAA,KAAA,CAAA,KAAA,GAAI,IAAI,EAAC;AACvD,CAAC,CAAA"}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/generated/version.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/generated/version.ts"],"sourcesContent":["// This file is generated.\nexport const version = '1.81.1'\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;AACnB,IAAM,OAAO,GAAG,QAAQ,CAAA"}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/version-type.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/version-type.ts"],"sourcesContent":["// Default value will be updated to 'web' in `bundle-umd.ts` for web build.\nlet _version: 'web' | 'npm' = 'npm'\n\nexport function setVersionType(version: typeof _version) {\n  _version = version\n}\n\nexport function getVersionType(): typeof _version {\n  return _version\n}\n"],"names":[],"mappings":";;;;;;AAAA,2EAA2E;AAC3E,IAAI,QAAQ,GAAkB,KAAK,CAAA;AAE7B,SAAU,cAAc,CAAC,OAAwB;IACrD,QAAQ,GAAG,OAAO,CAAA;AACpB,CAAC;AAEK,SAAU,cAAc;IAC5B,OAAO,QAAQ,CAAA;AACjB,CAAC"}},
    {"offset": {"line": 450, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/constants/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/constants/index.ts"],"sourcesContent":["export const SEGMENT_API_HOST = 'api.segment.io/v1'\n"],"names":[],"mappings":";;;;AAAO,IAAM,gBAAgB,GAAG,mBAAmB,CAAA"}},
    {"offset": {"line": 459, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/stats/remote-metrics.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/stats/remote-metrics.ts"],"sourcesContent":["import { fetch } from '../../lib/fetch'\nimport { version } from '../../generated/version'\nimport { getVersionType } from '../../lib/version-type'\nimport { SEGMENT_API_HOST } from '../constants'\n\nexport interface MetricsOptions {\n  host?: string\n  sampleRate?: number\n  flushTimer?: number\n  maxQueueSize?: number\n  protocol?: 'http' | 'https'\n}\n\n/**\n * Type expected by the segment metrics API endpoint\n */\ntype RemoteMetric = {\n  type: 'Counter'\n  metric: string\n  value: 1\n  tags: {\n    library: string\n    library_version: string\n    [key: string]: string\n  }\n}\n\nconst createRemoteMetric = (\n  metric: string,\n  tags: string[],\n  versionType: 'web' | 'npm'\n): RemoteMetric => {\n  const formattedTags = tags.reduce((acc, t) => {\n    const [k, v] = t.split(':')\n    acc[k] = v\n    return acc\n  }, {} as Record<string, string>)\n\n  return {\n    type: 'Counter',\n    metric,\n    value: 1,\n    tags: {\n      ...formattedTags,\n      library: 'analytics.js',\n      library_version:\n        versionType === 'web' ? `next-${version}` : `npm:next-${version}`,\n    },\n  }\n}\n\nfunction logError(err: unknown): void {\n  console.error('Error sending segment performance metrics', err)\n}\n\nexport class RemoteMetrics {\n  private host: string\n  private flushTimer: number\n  private maxQueueSize: number\n  private protocol: string\n\n  sampleRate: number\n  queue: RemoteMetric[]\n\n  constructor(options?: MetricsOptions) {\n    this.host = options?.host ?? SEGMENT_API_HOST\n    this.sampleRate = options?.sampleRate ?? 1\n    this.flushTimer = options?.flushTimer ?? 30 * 1000 /* 30s */\n    this.maxQueueSize = options?.maxQueueSize ?? 20\n    this.protocol = options?.protocol ?? 'https'\n\n    this.queue = []\n\n    if (this.sampleRate > 0) {\n      let flushing = false\n\n      const run = (): void => {\n        if (flushing) {\n          return\n        }\n\n        flushing = true\n        this.flush().catch(logError)\n\n        flushing = false\n\n        setTimeout(run, this.flushTimer)\n      }\n      run()\n    }\n  }\n\n  increment(metric: string, tags: string[]): void {\n    // All metrics are part of an allow list in Tracking API\n    if (!metric.includes('analytics_js.')) {\n      return\n    }\n\n    // /m doesn't like empty tags\n    if (tags.length === 0) {\n      return\n    }\n\n    if (Math.random() > this.sampleRate) {\n      return\n    }\n\n    if (this.queue.length >= this.maxQueueSize) {\n      return\n    }\n\n    const remoteMetric = createRemoteMetric(metric, tags, getVersionType())\n    this.queue.push(remoteMetric)\n\n    if (metric.includes('error')) {\n      this.flush().catch(logError)\n    }\n  }\n\n  async flush(): Promise<void> {\n    if (this.queue.length <= 0) {\n      return\n    }\n\n    await this.send().catch((error) => {\n      logError(error)\n      this.sampleRate = 0\n    })\n  }\n\n  private async send(): Promise<Response> {\n    const payload = { series: this.queue }\n    this.queue = []\n\n    const headers = { 'Content-Type': 'text/plain' }\n    const url = `${this.protocol}://${this.host}/m`\n\n    return fetch(url, {\n      headers,\n      body: JSON.stringify(payload),\n      method: 'POST',\n    })\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 595, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/stats/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/stats/index.ts"],"sourcesContent":["import { CoreStats } from '@segment/analytics-core'\nimport { MetricsOptions, RemoteMetrics } from './remote-metrics'\n\nlet remoteMetrics: RemoteMetrics | undefined\n\nexport class Stats extends CoreStats {\n  static initRemoteMetrics(options?: MetricsOptions) {\n    remoteMetrics = new RemoteMetrics(options)\n  }\n\n  override increment(metric: string, by?: number, tags?: string[]): void {\n    super.increment(metric, by, tags)\n    remoteMetrics?.increment(metric, tags ?? [])\n  }\n}\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,yBAAyB,CAAA;AACnD,OAAO,EAAkB,aAAa,EAAE,MAAM,kBAAkB,CAAA;;;;AAEhE,IAAI,aAAwC,CAAA;AAE5C,IAAA,QAAA,SAAA,MAAA;QAA2B,sJAAA,EAAA,OAAA,QAAS;IAApC,SAAA;;IASA,CAAC;IARQ,MAAA,iBAAiB,GAAxB,SAAyB,OAAwB;QAC/C,aAAa,GAAG,IAAI,uNAAa,CAAC,OAAO,CAAC,CAAA;IAC5C,CAAC;IAEQ,MAAA,SAAA,CAAA,SAAS,GAAlB,SAAmB,MAAc,EAAE,EAAW,EAAE,IAAe;QAC7D,OAAA,SAAA,CAAM,SAAS,CAAA,IAAA,CAAA,IAAA,EAAC,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC,CAAA;QACjC,aAAa,KAAA,QAAb,aAAa,KAAA,KAAA,IAAA,KAAA,IAAb,aAAa,CAAE,SAAS,CAAC,MAAM,EAAE,IAAI,KAAA,QAAJ,IAAI,KAAA,KAAA,IAAJ,IAAI,GAAI,EAAE,CAAC,CAAA;IAC9C,CAAC;IACH,OAAA,KAAC;AAAD,CAAC,AATD,CAA2B,+LAAS,GASnC"}},
    {"offset": {"line": 626, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/context/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/context/index.ts"],"sourcesContent":["import {\n  CoreContext,\n  ContextCancelation,\n  ContextFailedDelivery,\n  SerializedContext,\n  CancelationOptions,\n} from '@segment/analytics-core'\nimport { SegmentEvent } from '../events/interfaces'\nimport { Stats } from '../stats'\n\nexport class Context extends CoreContext<SegmentEvent> {\n  static override system() {\n    return new this({ type: 'track', event: 'system' })\n  }\n  constructor(event: SegmentEvent, id?: string) {\n    super(event, id, new Stats())\n  }\n}\n\nexport { ContextCancelation }\nexport type { ContextFailedDelivery, SerializedContext, CancelationOptions }\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EACL,WAAW,EACX,kBAAkB,GAInB,MAAM,yBAAyB,CAAA;AAEhC,OAAO,EAAE,KAAK,EAAE,MAAM,UAAU,CAAA;;;;AAEhC,IAAA,UAAA,SAAA,MAAA;QAA6B,sJAAA,EAAA,SAAA,QAAyB;IAIpD,SAAA,QAAY,KAAmB,EAAE,EAAW;eAC1C,OAAA,IAAA,CAAA,IAAA,EAAM,KAAK,EAAE,EAAE,EAAE,IAAI,mMAAK,EAAE,CAAC,IAAA,IAAA;IAC/B,CAAC;IALe,QAAA,MAAM,GAAtB;QACE,OAAO,IAAI,IAAI,CAAC;YAAE,IAAI,EAAE,OAAO;YAAE,KAAK,EAAE,QAAQ;QAAA,CAAE,CAAC,CAAA;IACrD,CAAC;IAIH,OAAA,OAAC;AAAD,CAAC,AAPD,CAA6B,mMAAW,GAOvC"}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/pick.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/pick.ts"],"sourcesContent":["export function pick<T extends Record<string, any>, K extends keyof T>(\n  object: T,\n  keys: readonly K[]\n): Pick<T, K>\n\nexport function pick<T extends Record<string, any>>(\n  object: T,\n  keys: string[]\n): Partial<T>\n\n/**\n * @example\n * pick({ 'a': 1, 'b': '2', 'c': 3 }, ['a', 'c'])\n * => { 'a': 1, 'c': 3 }\n */\nexport function pick<T extends Record<string, any>, K extends keyof T>(\n  object: T,\n  keys: string[] | K[] | readonly K[]\n) {\n  return Object.assign(\n    {},\n    ...keys.map((key) => {\n      if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n        return { [key]: object[key] }\n      }\n    })\n  )\n}\n"],"names":[],"mappings":";;;;;;AAeM,SAAU,IAAI,CAClB,MAAS,EACT,IAAmC;IAEnC,OAAO,MAAM,CAAC,MAAM,CAAA,KAAA,CAAb,MAAM,EAAA,IAAA,0JAAA,EAAA;QACX,CAAA,CAAE;KAAA,EACC,IAAI,CAAC,GAAG,CAAC,SAAC,GAAG;;QACd,IAAI,MAAM,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;YAC/D,OAAA,KAAA,CAAA,GAAS,EAAA,CAAC,GAAG,CAAA,GAAG,MAAM,CAAC,GAAG,CAAC,EAAA,GAAE;SAC9B;IACH,CAAC,CAAC,EAAA,QACH;AACH,CAAC"}},
    {"offset": {"line": 676, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/page/add-page-context.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/page/add-page-context.ts"],"sourcesContent":["import { pick } from '../../lib/pick'\nimport { EventProperties, SegmentEvent } from '../events'\nimport { getDefaultPageContext } from '@segment/analytics-page-tools'\n\n/**\n * Augments a segment event with information about the current page.\n * Page information like URL changes frequently, so this is meant to be captured as close to the event call as possible.\n * Things like `userAgent` do not change, so they can be added later in the flow.\n * We prefer not to add this information to this function, as it increases the main bundle size.\n */\nexport const addPageContext = (\n  event: SegmentEvent,\n  pageCtx = getDefaultPageContext()\n): void => {\n  const evtCtx = event.context! // Context should be set earlier in the flow\n  let pageContextFromEventProps: Pick<EventProperties, string> | undefined\n  if (event.type === 'page') {\n    pageContextFromEventProps =\n      event.properties && pick(event.properties, Object.keys(pageCtx))\n\n    event.properties = {\n      ...pageCtx,\n      ...event.properties,\n      ...(event.name ? { name: event.name } : {}),\n    }\n  }\n\n  evtCtx.page = {\n    ...pageCtx,\n    ...pageContextFromEventProps,\n    ...evtCtx.page,\n  }\n}\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,gBAAgB,CAAA;AAErC,OAAO,EAAE,qBAAqB,EAAE,MAAM,+BAA+B,CAAA;;;;AAQ9D,IAAM,cAAc,GAAG,SAC5B,KAAmB,EACnB,OAAiC;IAAjC,IAAA,YAAA,KAAA,GAAA;QAAA,cAAU,4MAAqB,EAAE;IAAA;IAEjC,IAAM,MAAM,GAAG,KAAK,CAAC,OAAQ,CAAA,CAAC,4CAA4C;IAC1E,IAAI,yBAAoE,CAAA;IACxE,IAAI,KAAK,CAAC,IAAI,KAAK,MAAM,EAAE;QACzB,yBAAyB,GACvB,KAAK,CAAC,UAAU,QAAI,uLAAI,EAAC,KAAK,CAAC,UAAU,EAAE,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAA;QAElE,KAAK,CAAC,UAAU,GAAA,IAAA,qJAAA,EAAA,IAAA,qJAAA,EAAA,IAAA,qJAAA,EAAA,CAAA,GACX,OAAO,GACP,KAAK,CAAC,UAAU,GAChB,AAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;YAAE,IAAI,EAAE,KAAK,CAAC,IAAI;QAAA,CAAE,CAAC,CAAC,CAAC,CAAA,CAAE,CAAC,CAC5C,CAAA;KACF;IAED,MAAM,CAAC,IAAI,GAAA,IAAA,qJAAA,EAAA,IAAA,qJAAA,EAAA,IAAA,qJAAA,EAAA,CAAA,GACN,OAAO,GACP,yBAAyB,GACzB,MAAM,CAAC,IAAI,CACf,CAAA;AACH,CAAC,CAAA"}},
    {"offset": {"line": 704, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/events/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/events/index.ts"],"sourcesContent":["import { v4 as uuid } from '@lukeed/uuid'\nimport { ID, User } from '../user'\nimport { Options, EventProperties, Traits, SegmentEvent } from './interfaces'\nimport { addPageContext, PageContext } from '../page'\nimport { CoreEventFactory, IntegrationsOptions } from '@segment/analytics-core'\n\nexport * from './interfaces'\n\nexport class EventFactory extends CoreEventFactory {\n  user: User\n  constructor(user: User) {\n    super({\n      createMessageId: () => `ajs-next-${Date.now()}-${uuid()}`,\n      onEventMethodCall: ({ options }) => {\n        this.maybeUpdateAnonId(options)\n      },\n      onFinishedEvent: (event) => {\n        this.addIdentity(event)\n        return event\n      },\n    })\n    this.user = user\n  }\n\n  /**\n   * Updates the anonymousId *globally* if it's provided in the options.\n   * This should generally be done in the identify method, but some customers rely on this.\n   */\n  private maybeUpdateAnonId(options: Options | undefined): void {\n    options?.anonymousId && this.user.anonymousId(options.anonymousId)\n  }\n\n  /**\n   * add user id / anonymous id to the event\n   */\n  private addIdentity(event: SegmentEvent) {\n    if (this.user.id()) {\n      event.userId = this.user.id()\n    }\n\n    if (this.user.anonymousId()) {\n      event.anonymousId = this.user.anonymousId()\n    }\n  }\n\n  override track(\n    event: string,\n    properties?: EventProperties,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.track(event, properties, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override page(\n    category: string | null,\n    page: string | null,\n    properties?: EventProperties,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.page(\n      category,\n      page,\n      properties,\n      options,\n      integrationsOptions\n    )\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override screen(\n    category: string | null,\n    screen: string | null,\n    properties?: EventProperties,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.screen(\n      category,\n      screen,\n      properties,\n      options,\n      integrationsOptions\n    )\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override identify(\n    userId: ID,\n    traits?: Traits,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.identify(userId, traits, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override group(\n    groupId: ID,\n    traits?: Traits,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.group(groupId, traits, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override alias(\n    to: string,\n    from: string | null,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.alias(to, from, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 790, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/plugin/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/plugin/index.ts"],"sourcesContent":["import type { CorePlugin } from '@segment/analytics-core'\nimport type { DestinationMiddlewareFunction } from '../../plugins/middleware'\nimport type { Analytics } from '../analytics'\nimport type { Context } from '../context'\n\nexport interface Plugin extends CorePlugin<Context, Analytics> {}\n\nexport interface InternalPluginWithAddMiddleware extends Plugin {\n  addMiddleware: (...fns: DestinationMiddlewareFunction[]) => void\n}\n\nexport interface InternalDestinationPluginWithAddMiddleware\n  extends InternalPluginWithAddMiddleware {\n  type: 'destination'\n}\n\nexport const isDestinationPluginWithAddMiddleware = (\n  plugin: Plugin\n): plugin is InternalDestinationPluginWithAddMiddleware => {\n  // FYI: segment's plugin does not currently have an 'addMiddleware' method\n  return 'addMiddleware' in plugin && plugin.type === 'destination'\n}\n"],"names":[],"mappings":";;;;AAgBO,IAAM,oCAAoC,GAAG,SAClD,MAAc;IAEd,0EAA0E;IAC1E,OAAO,eAAe,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,aAAa,CAAA;AACnE,CAAC,CAAA"}},
    {"offset": {"line": 802, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/priority-queue/persisted.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/priority-queue/persisted.ts"],"sourcesContent":["import { PriorityQueue } from '.'\nimport { Context, SerializedContext } from '../../core/context'\nimport { isBrowser } from '../../core/environment'\n\nlet loc:\n  | Storage\n  | { getItem: () => void; setItem: () => void; removeItem: () => void } = {\n  getItem() {},\n  setItem() {},\n  removeItem() {},\n}\n\ntry {\n  loc = isBrowser() && window.localStorage ? window.localStorage : loc\n} catch (err) {\n  console.warn('Unable to access localStorage', err)\n}\n\nfunction persisted(key: string): Context[] {\n  const items = loc.getItem(key)\n  return (items ? JSON.parse(items) : []).map(\n    (p: SerializedContext) => new Context(p.event, p.id)\n  )\n}\n\nfunction persistItems(key: string, items: Context[]): void {\n  const existing = persisted(key)\n  const all = [...items, ...existing]\n\n  const merged = all.reduce((acc, item) => {\n    return {\n      ...acc,\n      [item.id]: item,\n    }\n  }, {} as Record<string, Context>)\n\n  loc.setItem(key, JSON.stringify(Object.values(merged)))\n}\n\nfunction seen(key: string): Record<string, number> {\n  const stored = loc.getItem(key)\n  return stored ? JSON.parse(stored) : {}\n}\n\nfunction persistSeen(key: string, memory: Record<string, number>): void {\n  const stored = seen(key)\n\n  loc.setItem(\n    key,\n    JSON.stringify({\n      ...stored,\n      ...memory,\n    })\n  )\n}\n\nfunction remove(key: string): void {\n  loc.removeItem(key)\n}\n\nconst now = (): number => new Date().getTime()\n\nfunction mutex(key: string, onUnlock: Function, attempt = 0): void {\n  const lockTimeout = 50\n  const lockKey = `persisted-queue:v1:${key}:lock`\n\n  const expired = (lock: number): boolean => new Date().getTime() > lock\n  const rawLock = loc.getItem(lockKey)\n  const lock = rawLock ? (JSON.parse(rawLock) as number) : null\n\n  const allowed = lock === null || expired(lock)\n  if (allowed) {\n    loc.setItem(lockKey, JSON.stringify(now() + lockTimeout))\n    onUnlock()\n    loc.removeItem(lockKey)\n    return\n  }\n\n  if (!allowed && attempt < 3) {\n    setTimeout(() => {\n      mutex(key, onUnlock, attempt + 1)\n    }, lockTimeout)\n  } else {\n    console.error('Unable to retrieve lock')\n  }\n}\n\nexport class PersistedPriorityQueue extends PriorityQueue<Context> {\n  constructor(maxAttempts: number, key: string) {\n    super(maxAttempts, [])\n\n    const itemsKey = `persisted-queue:v1:${key}:items`\n    const seenKey = `persisted-queue:v1:${key}:seen`\n\n    let saved: Context[] = []\n    let lastSeen: Record<string, number> = {}\n\n    mutex(key, () => {\n      try {\n        saved = persisted(itemsKey)\n        lastSeen = seen(seenKey)\n        remove(itemsKey)\n        remove(seenKey)\n\n        this.queue = [...saved, ...this.queue]\n        this.seen = { ...lastSeen, ...this.seen }\n      } catch (err) {\n        console.error(err)\n      }\n    })\n\n    window.addEventListener('pagehide', () => {\n      // we deliberately want to use the less powerful 'pagehide' API to only persist on events where the analytics instance gets destroyed, and not on tab away.\n      if (this.todo > 0) {\n        const items = [...this.queue, ...this.future]\n        try {\n          mutex(key, () => {\n            persistItems(itemsKey, items)\n            persistSeen(seenKey, this.seen)\n          })\n        } catch (err) {\n          console.error(err)\n        }\n      }\n    })\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 923, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/queue/event-queue.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/queue/event-queue.ts"],"sourcesContent":["import { PriorityQueue } from '../../lib/priority-queue'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport { Context } from '../context'\nimport { Plugin } from '../plugin'\nimport { CoreEventQueue } from '@segment/analytics-core'\nimport { isOffline } from '../connection'\n\nexport class EventQueue extends CoreEventQueue<Context, Plugin> {\n  constructor(name: string)\n  constructor(priorityQueue: PriorityQueue<Context>)\n  constructor(nameOrQueue: string | PriorityQueue<Context>) {\n    super(\n      typeof nameOrQueue === 'string'\n        ? new PersistedPriorityQueue(4, nameOrQueue)\n        : nameOrQueue\n    )\n  }\n  async flush(): Promise<Context[]> {\n    if (isOffline()) return []\n    return super.flush()\n  }\n}\n"],"names":[],"mappings":";;;;;AACA,OAAO,EAAE,sBAAsB,EAAE,MAAM,oCAAoC,CAAA;AAG3E,OAAO,EAAE,cAAc,EAAE,MAAM,yBAAyB,CAAA;AACxD,OAAO,EAAE,SAAS,EAAE,MAAM,eAAe,CAAA;;;;;AAEzC,IAAA,aAAA,SAAA,MAAA;QAAgC,sJAAA,EAAA,YAAA,QAA+B;IAG7D,SAAA,WAAY,WAA4C;eACtD,OAAA,IAAA,CAAA,IAAA,EACE,OAAO,WAAW,KAAK,QAAQ,GAC3B,IAAI,mOAAsB,CAAC,CAAC,EAAE,WAAW,CAAC,GAC1C,WAAW,CAChB,IAAA,IAAA;IACH,CAAC;IACK,WAAA,SAAA,CAAA,KAAK,GAAX;;;gBACE,QAAI,4MAAS,EAAE,GAAE,OAAA;oBAAA,EAAA,QAAA;oBAAO,EAAE;iBAAA,CAAA;gBAC1B,OAAA;oBAAA,EAAA,QAAA;oBAAO,OAAA,SAAA,CAAM,KAAK,CAAA,IAAA,CAAA,IAAA,CAAE;iBAAA,CAAA;;;KACrB;IACH,OAAA,UAAC;AAAD,CAAC,AAdD,CAAgC,6MAAc,GAc7C"}},
    {"offset": {"line": 962, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/bind-all.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/bind-all.ts"],"sourcesContent":["export default function bindAll<\n  ObjType extends { [key: string]: any },\n  KeyType extends keyof ObjType\n>(obj: ObjType): ObjType {\n  const proto = obj.constructor.prototype\n  for (const key of Object.getOwnPropertyNames(proto)) {\n    if (key !== 'constructor') {\n      const desc = Object.getOwnPropertyDescriptor(\n        obj.constructor.prototype,\n        key\n      )\n      if (!!desc && typeof desc.value === 'function') {\n        obj[key as KeyType] = obj[key].bind(obj)\n      }\n    }\n  }\n\n  return obj\n}\n"],"names":[],"mappings":";;;;AAAc,SAAU,OAAO,CAG7B,GAAY;IACZ,IAAM,KAAK,GAAG,GAAG,CAAC,WAAW,CAAC,SAAS,CAAA;IACvC,IAAkB,IAAA,KAAA,CAAiC,EAAjC,KAAA,MAAM,CAAC,mBAAmB,CAAC,KAAK,CAAC,EAAjC,KAAA,GAAA,MAAiC,EAAjC,IAAiC,CAAE;QAAhD,IAAM,GAAG,GAAA,EAAA,CAAA,GAAA;QACZ,IAAI,GAAG,KAAK,aAAa,EAAE;YACzB,IAAM,IAAI,GAAG,MAAM,CAAC,wBAAwB,CAC1C,GAAG,CAAC,WAAW,CAAC,SAAS,EACzB,GAAG,CACJ,CAAA;YACD,IAAI,CAAC,CAAC,IAAI,IAAI,OAAO,IAAI,CAAC,KAAK,KAAK,UAAU,EAAE;gBAC9C,GAAG,CAAC,GAAc,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;aACzC;SACF;KACF;IAED,OAAO,GAAG,CAAA;AACZ,CAAC"}},
    {"offset": {"line": 983, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/storage/universalStorage.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/storage/universalStorage.ts"],"sourcesContent":["import { Store, StorageObject } from './types'\n\n// not adding to private method because those method names do not get minified atm, and does not use 'this'\nconst _logStoreKeyError = (\n  store: Store,\n  action: 'set' | 'get' | 'remove',\n  key: string,\n  err: unknown\n) => {\n  console.warn(\n    `${store.constructor.name}: Can't ${action} key \"${key}\" | Err: ${err}`\n  )\n}\n\n/**\n * Uses multiple storages in a priority list to get/set values in the order they are specified.\n */\nexport class UniversalStorage<Data extends StorageObject = StorageObject> {\n  private stores: Store[]\n\n  constructor(stores: Store[]) {\n    this.stores = stores\n  }\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    let val: Data[K] | null = null\n\n    for (const store of this.stores) {\n      try {\n        val = store.get(key) as Data[K] | null\n        if (val !== undefined && val !== null) {\n          return val\n        }\n      } catch (e) {\n        _logStoreKeyError(store, 'get', key, e)\n      }\n    }\n    return null\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    this.stores.forEach((store) => {\n      try {\n        store.set(key, value)\n      } catch (e) {\n        _logStoreKeyError(store, 'set', key, e)\n      }\n    })\n  }\n\n  clear<K extends keyof Data>(key: K): void {\n    this.stores.forEach((store) => {\n      try {\n        store.remove(key)\n      } catch (e) {\n        _logStoreKeyError(store, 'remove', key, e)\n      }\n    })\n  }\n\n  /*\n    This is to support few scenarios where:\n    - value exist in one of the stores ( as a result of other stores being cleared from browser ) and we want to resync them\n    - read values in AJS 1.0 format ( for customers after 1.0 --> 2.0 migration ) and then re-write them in AJS 2.0 format\n  */\n  getAndSync<K extends keyof Data>(key: K): Data[K] | null {\n    const val = this.get(key)\n\n    // legacy behavior, getAndSync can change the type of a value from number to string (AJS 1.0 stores numerical values as a number)\n    const coercedValue = (typeof val === 'number' ? val.toString() : val) as\n      | Data[K]\n      | null\n\n    this.set(key, coercedValue)\n\n    return coercedValue\n  }\n}\n"],"names":[],"mappings":";;;;AAEA,2GAA2G;AAC3G,IAAM,iBAAiB,GAAG,SACxB,KAAY,EACZ,MAAgC,EAChC,GAAW,EACX,GAAY;IAEZ,OAAO,CAAC,IAAI,CACV,GAAA,MAAA,CAAG,KAAK,CAAC,WAAW,CAAC,IAAI,EAAA,YAAA,MAAA,CAAW,MAAM,EAAA,WAAA,MAAA,CAAS,GAAG,EAAA,cAAA,MAAA,CAAY,GAAG,CAAE,CACxE,CAAA;AACH,CAAC,CAAA;AAED;;GAEG,CACH,IAAA,mBAAA;IAGE,SAAA,iBAAY,MAAe;QACzB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;IACtB,CAAC;IAED,iBAAA,SAAA,CAAA,GAAG,GAAH,SAA0B,GAAM;QAC9B,IAAI,GAAG,GAAmB,IAAI,CAAA;QAE9B,IAAoB,IAAA,KAAA,CAAW,EAAX,KAAA,IAAI,CAAC,MAAM,EAAX,KAAA,GAAA,MAAW,EAAX,IAAW,CAAE;YAA5B,IAAM,KAAK,GAAA,EAAA,CAAA,GAAA;YACd,IAAI;gBACF,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAmB,CAAA;gBACtC,IAAI,GAAG,KAAK,SAAS,IAAI,GAAG,KAAK,IAAI,EAAE;oBACrC,OAAO,GAAG,CAAA;iBACX;aACF,CAAC,OAAO,CAAC,EAAE;gBACV,iBAAiB,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC,CAAA;aACxC;SACF;QACD,OAAO,IAAI,CAAA;IACb,CAAC;IAED,iBAAA,SAAA,CAAA,GAAG,GAAH,SAA0B,GAAM,EAAE,KAAqB;QACrD,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAC,KAAK;YACxB,IAAI;gBACF,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAA;aACtB,CAAC,OAAO,CAAC,EAAE;gBACV,iBAAiB,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC,CAAA;aACxC;QACH,CAAC,CAAC,CAAA;IACJ,CAAC;IAED,iBAAA,SAAA,CAAA,KAAK,GAAL,SAA4B,GAAM;QAChC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAC,KAAK;YACxB,IAAI;gBACF,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;aAClB,CAAC,OAAO,CAAC,EAAE;gBACV,iBAAiB,CAAC,KAAK,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAC,CAAA;aAC3C;QACH,CAAC,CAAC,CAAA;IACJ,CAAC;IAED;;;;MAIE,CACF,iBAAA,SAAA,CAAA,UAAU,GAAV,SAAiC,GAAM;QACrC,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;QAEzB,iIAAiI;QACjI,IAAM,YAAY,GAAG,AAAC,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,GAAG,CAE5D,CAAA;QAER,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,YAAY,CAAC,CAAA;QAE3B,OAAO,YAAY,CAAA;IACrB,CAAC;IACH,OAAA,gBAAC;AAAD,CAAC,AA5DD,IA4DC"}},
    {"offset": {"line": 1049, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/storage/memoryStorage.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/storage/memoryStorage.ts"],"sourcesContent":["import { Store, StorageObject } from './types'\n\n/**\n * Data Storage using in memory object\n */\nexport class MemoryStorage<Data extends StorageObject = StorageObject>\n  implements Store<Data>\n{\n  private cache: Record<string, unknown> = {}\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    return (this.cache[key] ?? null) as Data[K] | null\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    this.cache[key] = value\n  }\n\n  remove<K extends keyof Data>(key: K): void {\n    delete this.cache[key]\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;;GAEG,CACH,IAAA,gBAAA;IAAA,SAAA;QAGU,IAAA,CAAA,KAAK,GAA4B,CAAA,CAAE,CAAA;IAa7C,CAAC;IAXC,cAAA,SAAA,CAAA,GAAG,GAAH,SAA0B,GAAM;;QAC9B,OAAO,AAAC,CAAA,KAAA,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,IAAI,CAAmB,CAAA;IACpD,CAAC;IAED,cAAA,SAAA,CAAA,GAAG,GAAH,SAA0B,GAAM,EAAE,KAAqB;QACrD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,KAAK,CAAA;IACzB,CAAC;IAED,cAAA,SAAA,CAAA,MAAM,GAAN,SAA6B,GAAM;QACjC,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;IACxB,CAAC;IACH,OAAA,aAAC;AAAD,CAAC,AAhBD,IAgBC"}},
    {"offset": {"line": 1077, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/storage/types.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/storage/types.ts"],"sourcesContent":["import { CookieOptions } from './cookieStorage'\n\nexport const StoreType = {\n  Cookie: 'cookie',\n  LocalStorage: 'localStorage',\n  Memory: 'memory',\n} as const\n\n/**\n * Known Storage Types\n *\n * Convenience settings for storage systems that AJS includes support for\n */\nexport type StoreType = typeof StoreType[keyof typeof StoreType]\n\nexport type StorageObject = Record<string, unknown>\n\n/**\n * Defines a Storage object for use in AJS Client.\n */\nexport interface Store<Data extends StorageObject = StorageObject> {\n  /**\n   * get value for the key from the stores. it will return the first value found in the stores\n   * @param key key for the value to be retrieved\n   * @returns value for the key or null if not found\n   */\n  get<K extends keyof Data>(key: K): Data[K] | null\n\n  /**\n   * it will set the value for the key in all the stores\n   * @param key key for the value to be stored\n   * @param value value to be stored\n   * @returns value that was stored\n   */\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void\n  /**\n   * remove the value for the key from all the stores\n   * @param key key for the value to be removed\n   * @param storeTypes optional array of store types to be used for removing the value\n   */\n  remove<K extends keyof Data>(key: K): void\n}\n\nexport interface StoreTypeWithSettings<T extends StoreType = StoreType> {\n  name: T\n  settings?: T extends 'cookie' ? CookieOptions : never\n}\n\nexport type InitializeStorageArgs = (StoreTypeWithSettings | StoreType)[]\n"],"names":[],"mappings":";;;;AAEO,IAAM,SAAS,GAAG;IACvB,MAAM,EAAE,QAAQ;IAChB,YAAY,EAAE,cAAc;IAC5B,MAAM,EAAE,QAAQ;CACR,CAAA"}},
    {"offset": {"line": 1090, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/user/tld.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/user/tld.ts"],"sourcesContent":["import cookie from 'js-cookie'\n\n/**\n * Levels returns all levels of the given url.\n *\n * @param {string} url\n * @return {Array}\n * @api public\n */\nfunction levels(url: URL): string[] {\n  const host = url.hostname\n  const parts = host.split('.')\n  const last = parts[parts.length - 1]\n  const levels: string[] = []\n\n  // Ip address.\n  if (parts.length === 4 && parseInt(last, 10) > 0) {\n    return levels\n  }\n\n  // Localhost.\n  if (parts.length <= 1) {\n    return levels\n  }\n\n  // Create levels.\n  for (let i = parts.length - 2; i >= 0; --i) {\n    levels.push(parts.slice(i).join('.'))\n  }\n\n  return levels\n}\n\nfunction parseUrl(url: string): URL | undefined {\n  try {\n    return new URL(url)\n  } catch {\n    return\n  }\n}\n\nexport function tld(url: string): string | undefined {\n  const parsedUrl = parseUrl(url)\n  if (!parsedUrl) return\n\n  const lvls = levels(parsedUrl)\n\n  // Lookup the real top level one.\n  for (let i = 0; i < lvls.length; ++i) {\n    const cname = '__tld__'\n    const domain = lvls[i]\n    const opts = { domain: '.' + domain }\n\n    try {\n      // cookie access throw an error if the library is ran inside a sandboxed environment (e.g. sandboxed iframe)\n      cookie.set(cname, '1', opts)\n      if (cookie.get(cname)) {\n        cookie.remove(cname, opts)\n        return domain\n      }\n    } catch (_) {\n      return\n    }\n  }\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,MAAM,MAAM,WAAW,CAAA;;AAE9B;;;;;;GAMG,CACH,SAAS,MAAM,CAAC,GAAQ;IACtB,IAAM,IAAI,GAAG,GAAG,CAAC,QAAQ,CAAA;IACzB,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;IAC7B,IAAM,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;IACpC,IAAM,MAAM,GAAa,EAAE,CAAA;IAE3B,cAAc;IACd,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,QAAQ,CAAC,IAAI,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE;QAChD,OAAO,MAAM,CAAA;KACd;IAED,aAAa;IACb,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;QACrB,OAAO,MAAM,CAAA;KACd;IAED,iBAAiB;IACjB,IAAK,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAE;QAC1C,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAA;KACtC;IAED,OAAO,MAAM,CAAA;AACf,CAAC;AAED,SAAS,QAAQ,CAAC,GAAW;IAC3B,IAAI;QACF,OAAO,IAAI,GAAG,CAAC,GAAG,CAAC,CAAA;KACpB,CAAC,OAAA,IAAM;QACN,OAAM;KACP;AACH,CAAC;AAEK,SAAU,GAAG,CAAC,GAAW;IAC7B,IAAM,SAAS,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;IAC/B,IAAI,CAAC,SAAS,EAAE,OAAM;IAEtB,IAAM,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,CAAA;IAE9B,iCAAiC;IACjC,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,CAAE;QACpC,IAAM,KAAK,GAAG,SAAS,CAAA;QACvB,IAAM,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,CAAA;QACtB,IAAM,IAAI,GAAG;YAAE,MAAM,EAAE,GAAG,GAAG,MAAM;QAAA,CAAE,CAAA;QAErC,IAAI;YACF,4GAA4G;YAC5G,mKAAM,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,CAAA;YAC5B,IAAI,mKAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;gBACrB,mKAAM,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAA;gBAC1B,OAAO,MAAM,CAAA;aACd;SACF,CAAC,OAAO,CAAC,EAAE;YACV,OAAM;SACP;KACF;AACH,CAAC"}},
    {"offset": {"line": 1155, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/storage/cookieStorage.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/storage/cookieStorage.ts"],"sourcesContent":["import { Store, StorageObject } from './types'\nimport jar from 'js-cookie'\nimport { tld } from '../user/tld'\n\nconst ONE_YEAR = 365\n\nexport interface CookieOptions {\n  maxage?: number\n  domain?: string\n  path?: string\n  secure?: boolean\n  sameSite?: string\n}\n\n/**\n * Data storage using browser cookies\n */\nexport class CookieStorage<Data extends StorageObject = StorageObject>\n  implements Store<Data>\n{\n  static get defaults(): CookieOptions {\n    return {\n      maxage: ONE_YEAR,\n      domain: tld(window.location.href),\n      path: '/',\n      sameSite: 'Lax',\n    }\n  }\n\n  private options: Required<CookieOptions>\n\n  constructor(options: CookieOptions = CookieStorage.defaults) {\n    this.options = {\n      ...CookieStorage.defaults,\n      ...options,\n    } as Required<CookieOptions>\n  }\n\n  private opts(): jar.CookieAttributes {\n    return {\n      sameSite: this.options.sameSite as jar.CookieAttributes['sameSite'],\n      expires: this.options.maxage,\n      domain: this.options.domain,\n      path: this.options.path,\n      secure: this.options.secure,\n    }\n  }\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    try {\n      const value = jar.get(key)\n\n      if (value === undefined || value === null) {\n        return null\n      }\n\n      try {\n        return JSON.parse(value) ?? null\n      } catch (e) {\n        return (value ?? null) as unknown as Data[K] | null\n      }\n    } catch (e) {\n      return null\n    }\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    if (typeof value === 'string') {\n      jar.set(key, value, this.opts())\n    } else if (value === null) {\n      jar.remove(key, this.opts())\n    } else {\n      jar.set(key, JSON.stringify(value), this.opts())\n    }\n  }\n\n  remove<K extends keyof Data>(key: K): void {\n    return jar.remove(key, this.opts())\n  }\n}\n"],"names":[],"mappings":";;;;;AACA,OAAO,GAAG,MAAM,WAAW,CAAA;AAC3B,OAAO,EAAE,GAAG,EAAE,MAAM,aAAa,CAAA;;;;AAEjC,IAAM,QAAQ,GAAG,GAAG,CAAA;AAUpB;;GAEG,CACH,IAAA,gBAAA;IAcE,SAAA,cAAY,OAA+C;QAA/C,IAAA,YAAA,KAAA,GAAA;YAAA,UAAyB,aAAa,CAAC,QAAQ;QAAA;QACzD,IAAI,CAAC,OAAO,OAAG,qJAAA,EAAA,IAAA,qJAAA,EAAA,CAAA,GACV,aAAa,CAAC,QAAQ,GACtB,OAAO,CACgB,CAAA;IAC9B,CAAC;IAhBD,OAAA,cAAA,CAAW,eAAA,UAAQ,EAAA;aAAnB;YACE,OAAO;gBACL,MAAM,EAAE,QAAQ;gBAChB,MAAM,MAAE,8LAAG,EAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;gBACjC,IAAI,EAAE,GAAG;gBACT,QAAQ,EAAE,KAAK;aAChB,CAAA;QACH,CAAC;;;OAAA;IAWO,cAAA,SAAA,CAAA,IAAI,GAAZ;QACE,OAAO;YACL,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,QAA4C;YACnE,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;YAC5B,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;YAC3B,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI;YACvB,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;SAC5B,CAAA;IACH,CAAC;IAED,cAAA,SAAA,CAAA,GAAG,GAAH,SAA0B,GAAM;;QAC9B,IAAI;YACF,IAAM,KAAK,GAAG,mKAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;YAE1B,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,EAAE;gBACzC,OAAO,IAAI,CAAA;aACZ;YAED,IAAI;gBACF,OAAO,CAAA,KAAA,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,IAAI,CAAA;aACjC,CAAC,OAAO,CAAC,EAAE;gBACV,OAAO,AAAC,KAAK,KAAA,QAAL,KAAK,KAAA,KAAA,IAAL,KAAK,GAAI,IAAI,CAA8B,CAAA;aACpD;SACF,CAAC,OAAO,CAAC,EAAE;YACV,OAAO,IAAI,CAAA;SACZ;IACH,CAAC;IAED,cAAA,SAAA,CAAA,GAAG,GAAH,SAA0B,GAAM,EAAE,KAAqB;QACrD,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;YAC7B,mKAAG,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAA;SACjC,MAAM,IAAI,KAAK,KAAK,IAAI,EAAE;YACzB,mKAAG,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAA;SAC7B,MAAM;YACL,mKAAG,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAA;SACjD;IACH,CAAC;IAED,cAAA,SAAA,CAAA,MAAM,GAAN,SAA6B,GAAM;QACjC,OAAO,mKAAG,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAA;IACrC,CAAC;IACH,OAAA,aAAC;AAAD,CAAC,AA9DD,IA8DC"}},
    {"offset": {"line": 1232, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/storage/localStorage.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/storage/localStorage.ts"],"sourcesContent":["import { StorageObject, Store } from './types'\n\n/**\n * Data storage using browser's localStorage\n */\nexport class LocalStorage<Data extends StorageObject = StorageObject>\n  implements Store<Data>\n{\n  private localStorageWarning(key: keyof Data, state: 'full' | 'unavailable') {\n    console.warn(`Unable to access ${key}, localStorage may be ${state}`)\n  }\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    try {\n      const val = localStorage.getItem(key)\n      if (val === null) {\n        return null\n      }\n      try {\n        return JSON.parse(val) ?? null\n      } catch (e) {\n        return (val ?? null) as unknown as Data[K] | null\n      }\n    } catch (err) {\n      this.localStorageWarning(key, 'unavailable')\n      return null\n    }\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    try {\n      localStorage.setItem(key, JSON.stringify(value))\n    } catch {\n      this.localStorageWarning(key, 'full')\n    }\n  }\n\n  remove<K extends keyof Data>(key: K): void {\n    try {\n      return localStorage.removeItem(key)\n    } catch (err) {\n      this.localStorageWarning(key, 'unavailable')\n    }\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;;GAEG,CACH,IAAA,eAAA;IAAA,SAAA,gBAuCA,CAAC;IApCS,aAAA,SAAA,CAAA,mBAAmB,GAA3B,SAA4B,GAAe,EAAE,KAA6B;QACxE,OAAO,CAAC,IAAI,CAAC,oBAAA,MAAA,CAAoB,GAAG,EAAA,0BAAA,MAAA,CAAyB,KAAK,CAAE,CAAC,CAAA;IACvE,CAAC;IAED,aAAA,SAAA,CAAA,GAAG,GAAH,SAA0B,GAAM;;QAC9B,IAAI;YACF,IAAM,GAAG,GAAG,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;YACrC,IAAI,GAAG,KAAK,IAAI,EAAE;gBAChB,OAAO,IAAI,CAAA;aACZ;YACD,IAAI;gBACF,OAAO,CAAA,KAAA,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,IAAI,CAAA;aAC/B,CAAC,OAAO,CAAC,EAAE;gBACV,OAAO,AAAC,GAAG,KAAA,QAAH,GAAG,KAAA,KAAA,IAAH,GAAG,GAAI,IAAI,CAA8B,CAAA;aAClD;SACF,CAAC,OAAO,GAAG,EAAE;YACZ,IAAI,CAAC,mBAAmB,CAAC,GAAG,EAAE,aAAa,CAAC,CAAA;YAC5C,OAAO,IAAI,CAAA;SACZ;IACH,CAAC;IAED,aAAA,SAAA,CAAA,GAAG,GAAH,SAA0B,GAAM,EAAE,KAAqB;QACrD,IAAI;YACF,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAA;SACjD,CAAC,OAAA,IAAM;YACN,IAAI,CAAC,mBAAmB,CAAC,GAAG,EAAE,MAAM,CAAC,CAAA;SACtC;IACH,CAAC;IAED,aAAA,SAAA,CAAA,MAAM,GAAN,SAA6B,GAAM;QACjC,IAAI;YACF,OAAO,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,CAAA;SACpC,CAAC,OAAO,GAAG,EAAE;YACZ,IAAI,CAAC,mBAAmB,CAAC,GAAG,EAAE,aAAa,CAAC,CAAA;SAC7C;IACH,CAAC;IACH,OAAA,YAAC;AAAD,CAAC,AAvCD,IAuCC"}},
    {"offset": {"line": 1282, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/storage/settings.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/storage/settings.ts"],"sourcesContent":["import { StoreType, StoreTypeWithSettings } from './types'\n\nexport type UniversalStorageSettings = { stores: StoreType[] }\n\n// This is setup this way to permit eventually a different set of settings for custom storage\nexport type StorageSettings = UniversalStorageSettings\n\nexport function isArrayOfStoreType(\n  s: StorageSettings\n): s is UniversalStorageSettings {\n  return (\n    s &&\n    s.stores &&\n    Array.isArray(s.stores) &&\n    s.stores.every((e) => Object.values(StoreType).includes(e))\n  )\n}\n\nexport function isStoreTypeWithSettings(\n  s: StoreTypeWithSettings | StoreType\n): s is StoreTypeWithSettings {\n  return typeof s === 'object' && s.name !== undefined\n}\n"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,SAAS,EAAyB,MAAM,SAAS,CAAA;;AAOpD,SAAU,kBAAkB,CAChC,CAAkB;IAElB,OAAO,AACL,CAAC,IACD,CAAC,CAAC,MAAM,IACR,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,IACvB,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,SAAC,CAAC;QAAK,OAAA,MAAM,CAAC,MAAM,CAAC,yMAAS,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;IAApC,CAAoC,CAAC,CAC5D,CAAA;AACH,CAAC;AAEK,SAAU,uBAAuB,CACrC,CAAoC;IAEpC,OAAO,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,CAAC,IAAI,KAAK,SAAS,CAAA;AACtD,CAAC"}},
    {"offset": {"line": 1302, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/storage/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/storage/index.ts"],"sourcesContent":["import { CookieOptions, CookieStorage } from './cookieStorage'\nimport { LocalStorage } from './localStorage'\nimport { MemoryStorage } from './memoryStorage'\nimport { isStoreTypeWithSettings } from './settings'\nimport { StoreType, Store, InitializeStorageArgs } from './types'\n\nexport * from './types'\nexport * from './localStorage'\nexport * from './cookieStorage'\nexport * from './memoryStorage'\nexport * from './universalStorage'\nexport * from './settings'\n\n/**\n * Creates multiple storage systems from an array of StoreType and options\n * @param args StoreType and options\n * @returns Storage array\n */\nexport function initializeStorages(args: InitializeStorageArgs): Store[] {\n  const storages = args.map((s) => {\n    let type: StoreType\n    let settings\n\n    if (isStoreTypeWithSettings(s)) {\n      type = s.name\n      settings = s.settings\n    } else {\n      type = s\n    }\n\n    switch (type) {\n      case StoreType.Cookie:\n        return new CookieStorage(settings)\n      case StoreType.LocalStorage:\n        return new LocalStorage()\n      case StoreType.Memory:\n        return new MemoryStorage()\n      default:\n        throw new Error(`Unknown Store Type: ${s}`)\n    }\n  })\n  return storages\n}\n\n/**\n * Injects the CookieOptions into a the arguments for initializeStorage\n * @param storeTypes list of storeType\n * @param cookieOptions cookie Options\n * @returns arguments for initializeStorage\n */\nexport function applyCookieOptions(\n  storeTypes: StoreType[],\n  cookieOptions?: CookieOptions\n): InitializeStorageArgs {\n  return storeTypes.map((s) => {\n    if (cookieOptions && s === StoreType.Cookie) {\n      return {\n        name: s,\n        settings: cookieOptions,\n      }\n    }\n    return s\n  })\n}\n"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAiB,aAAa,EAAE,MAAM,iBAAiB,CAAA;AAC9D,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAA;AAC7C,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAA;AAC/C,OAAO,EAAE,uBAAuB,EAAE,MAAM,YAAY,CAAA;AACpD,OAAO,EAAE,SAAS,EAAgC,MAAM,SAAS,CAAA;;;;;;;;;;;;AAc3D,SAAU,kBAAkB,CAAC,IAA2B;IAC5D,IAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,SAAC,CAAC;QAC1B,IAAI,IAAe,CAAA;QACnB,IAAI,QAAQ,CAAA;QAEZ,QAAI,0NAAuB,EAAC,CAAC,CAAC,EAAE;YAC9B,IAAI,GAAG,CAAC,CAAC,IAAI,CAAA;YACb,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAA;SACtB,MAAM;YACL,IAAI,GAAG,CAAC,CAAA;SACT;QAED,OAAQ,IAAI,EAAE;YACZ,KAAK,yMAAS,CAAC,MAAM;gBACnB,OAAO,IAAI,qNAAa,CAAC,QAAQ,CAAC,CAAA;YACpC,KAAK,yMAAS,CAAC,YAAY;gBACzB,OAAO,IAAI,mNAAY,EAAE,CAAA;YAC3B,KAAK,yMAAS,CAAC,MAAM;gBACnB,OAAO,IAAI,qNAAa,EAAE,CAAA;YAC5B;gBACE,MAAM,IAAI,KAAK,CAAC,uBAAA,MAAA,CAAuB,CAAC,CAAE,CAAC,CAAA;SAC9C;IACH,CAAC,CAAC,CAAA;IACF,OAAO,QAAQ,CAAA;AACjB,CAAC;AAQK,SAAU,kBAAkB,CAChC,UAAuB,EACvB,aAA6B;IAE7B,OAAO,UAAU,CAAC,GAAG,CAAC,SAAC,CAAC;QACtB,IAAI,aAAa,IAAI,CAAC,KAAK,yMAAS,CAAC,MAAM,EAAE;YAC3C,OAAO;gBACL,IAAI,EAAE,CAAC;gBACP,QAAQ,EAAE,aAAa;aACxB,CAAA;SACF;QACD,OAAO,CAAC,CAAA;IACV,CAAC,CAAC,CAAA;AACJ,CAAC"}},
    {"offset": {"line": 1362, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/user/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/user/index.ts"],"sourcesContent":["import { v4 as uuid } from '@lukeed/uuid'\nimport autoBind from '../../lib/bind-all'\nimport { Traits } from '../events'\nimport {\n  CookieOptions,\n  UniversalStorage,\n  MemoryStorage,\n  StorageObject,\n  StorageSettings,\n  StoreType,\n  applyCookieOptions,\n  initializeStorages,\n  isArrayOfStoreType,\n} from '../storage'\n\nexport type ID = string | null | undefined\n\nexport interface UserOptions {\n  /**\n   * Disables storing any data about the user.\n   */\n  disable?: boolean\n  localStorageFallbackDisabled?: boolean\n  persist?: boolean\n\n  cookie?: {\n    key?: string\n    oldKey?: string\n  }\n\n  localStorage?: {\n    key: string\n  }\n\n  /**\n   * Store priority\n   * @example stores: [StoreType.Cookie, StoreType.Memory]\n   */\n  storage?: StorageSettings\n}\n\nconst defaults = {\n  persist: true,\n  cookie: {\n    key: 'ajs_user_id',\n    oldKey: 'ajs_user',\n  },\n  localStorage: {\n    key: 'ajs_user_traits',\n  },\n}\n\nexport interface WithId {\n  id(id?: ID): ID\n}\n\nexport class User implements WithId {\n  static defaults = defaults\n\n  private idKey: string\n  private traitsKey: string\n  private anonKey: string\n  private cookieOptions?: CookieOptions\n\n  private legacyUserStore: UniversalStorage<{\n    [k: string]:\n      | {\n          id?: string\n          traits?: Traits\n        }\n      | string\n  }>\n  private traitsStore: UniversalStorage<{\n    [k: string]: Traits\n  }>\n\n  private identityStore: UniversalStorage<{\n    [k: string]: string\n  }>\n\n  options: UserOptions = {}\n\n  constructor(options: UserOptions = defaults, cookieOptions?: CookieOptions) {\n    this.options = { ...defaults, ...options }\n    this.cookieOptions = cookieOptions\n\n    this.idKey = options.cookie?.key ?? defaults.cookie.key\n    this.traitsKey = options.localStorage?.key ?? defaults.localStorage.key\n    this.anonKey = 'ajs_anonymous_id'\n\n    this.identityStore = this.createStorage(this.options, cookieOptions)\n\n    // using only cookies for legacy user store\n    this.legacyUserStore = this.createStorage(\n      this.options,\n      cookieOptions,\n      (s) => s === StoreType.Cookie\n    )\n\n    // using only localStorage / memory for traits store\n    this.traitsStore = this.createStorage(\n      this.options,\n      cookieOptions,\n      (s) => s !== StoreType.Cookie\n    )\n\n    const legacyUser = this.legacyUserStore.get(defaults.cookie.oldKey)\n    if (legacyUser && typeof legacyUser === 'object') {\n      legacyUser.id && this.id(legacyUser.id)\n      legacyUser.traits && this.traits(legacyUser.traits)\n    }\n    autoBind(this)\n  }\n\n  id = (id?: ID): ID => {\n    if (this.options.disable) {\n      return null\n    }\n\n    const prevId = this.identityStore.getAndSync(this.idKey)\n\n    if (id !== undefined) {\n      this.identityStore.set(this.idKey, id)\n\n      const changingIdentity = id !== prevId && prevId !== null && id !== null\n      if (changingIdentity) {\n        this.anonymousId(null)\n      }\n    }\n\n    const retId = this.identityStore.getAndSync(this.idKey)\n    if (retId) return retId\n\n    const retLeg = this.legacyUserStore.get(defaults.cookie.oldKey)\n    return retLeg ? (typeof retLeg === 'object' ? retLeg.id : retLeg) : null\n  }\n\n  private legacySIO(): [string, string] | null {\n    const val = this.legacyUserStore.get('_sio') as string\n    if (!val) {\n      return null\n    }\n    const [anon, user] = val.split('----')\n    return [anon, user]\n  }\n\n  anonymousId = (id?: ID): ID => {\n    if (this.options.disable) {\n      return null\n    }\n\n    if (id === undefined) {\n      const val =\n        this.identityStore.getAndSync(this.anonKey) ?? this.legacySIO()?.[0]\n\n      if (val) {\n        return val\n      }\n    }\n\n    if (id === null) {\n      this.identityStore.set(this.anonKey, null)\n      return this.identityStore.getAndSync(this.anonKey)\n    }\n\n    this.identityStore.set(this.anonKey, id ?? uuid())\n    return this.identityStore.getAndSync(this.anonKey)\n  }\n\n  traits = (traits?: Traits | null): Traits | undefined => {\n    if (this.options.disable) {\n      return\n    }\n\n    if (traits === null) {\n      traits = {}\n    }\n\n    if (traits) {\n      this.traitsStore.set(this.traitsKey, traits ?? {})\n    }\n\n    return this.traitsStore.get(this.traitsKey) ?? {}\n  }\n\n  identify(id?: ID, traits?: Traits): void {\n    if (this.options.disable) {\n      return\n    }\n\n    traits = traits ?? {}\n    const currentId = this.id()\n\n    if (currentId === null || currentId === id) {\n      traits = {\n        ...this.traits(),\n        ...traits,\n      }\n    }\n\n    if (id) {\n      this.id(id)\n    }\n\n    this.traits(traits)\n  }\n\n  logout(): void {\n    this.anonymousId(null)\n    this.id(null)\n    this.traits({})\n  }\n\n  reset(): void {\n    this.logout()\n    this.identityStore.clear(this.idKey)\n    this.identityStore.clear(this.anonKey)\n    this.traitsStore.clear(this.traitsKey)\n  }\n\n  load(): User {\n    return new User(this.options, this.cookieOptions)\n  }\n\n  save(): boolean {\n    return true\n  }\n\n  /**\n   * Creates the right storage system applying all the user options, cookie options and particular filters\n   * @param options UserOptions\n   * @param cookieOpts CookieOptions\n   * @param filterStores filter function to apply to any StoreTypes (skipped if options specify using a custom storage)\n   * @returns a Storage object\n   */\n  private createStorage<T extends StorageObject = StorageObject>(\n    options: UserOptions,\n    cookieOpts?: CookieOptions,\n    filterStores?: (value: StoreType) => boolean\n  ): UniversalStorage<T> {\n    let stores: StoreType[] = [\n      StoreType.LocalStorage,\n      StoreType.Cookie,\n      StoreType.Memory,\n    ]\n\n    // If disabled we won't have any storage functionality\n    if (options.disable) {\n      return new UniversalStorage<T>([])\n    }\n\n    // If persistance is disabled we will always fallback to Memory Storage\n    if (!options.persist) {\n      return new UniversalStorage<T>([new MemoryStorage<T>()])\n    }\n\n    if (options.storage !== undefined && options.storage !== null) {\n      if (isArrayOfStoreType(options.storage)) {\n        // If the user only specified order of stores we will still apply filters and transformations e.g. not using localStorage if localStorageFallbackDisabled\n        stores = options.storage.stores\n      }\n    }\n\n    // Disable LocalStorage\n    if (options.localStorageFallbackDisabled) {\n      stores = stores.filter((s) => s !== StoreType.LocalStorage)\n    }\n\n    // Apply Additional filters\n    if (filterStores) {\n      stores = stores.filter(filterStores)\n    }\n\n    return new UniversalStorage(\n      initializeStorages(applyCookieOptions(stores, cookieOpts))\n    )\n  }\n}\n\nconst groupDefaults: UserOptions = {\n  persist: true,\n  cookie: {\n    key: 'ajs_group_id',\n  },\n  localStorage: {\n    key: 'ajs_group_properties',\n  },\n}\n\nexport class Group extends User {\n  constructor(options: UserOptions = groupDefaults, cookie?: CookieOptions) {\n    super({ ...groupDefaults, ...options }, cookie)\n    autoBind(this)\n  }\n\n  anonymousId = (_id?: ID): ID => {\n    return undefined\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1583, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/is-thenable.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/is-thenable.ts"],"sourcesContent":["/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nexport const isThenable = (value: unknown): boolean =>\n  typeof value === 'object' &&\n  value !== null &&\n  'then' in value &&\n  typeof (value as any).then === 'function'\n"],"names":[],"mappings":"AAAA;;;GAGG;;;;AACI,IAAM,UAAU,GAAG,SAAC,KAAc;IACvC,OAAA,OAAO,KAAK,KAAK,QAAQ,IACzB,KAAK,KAAK,IAAI,IACd,MAAM,IAAI,KAAK,IACf,OAAQ,KAAa,CAAC,IAAI,KAAK,UAAU;AAHzC,CAGyC,CAAA"}},
    {"offset": {"line": 1597, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/buffer/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/buffer/index.ts"],"sourcesContent":["import { Analytics } from '../analytics'\nimport { Context } from '../context'\nimport { isThenable } from '../../lib/is-thenable'\nimport { AnalyticsBrowserCore } from '../analytics/interfaces'\nimport { version } from '../../generated/version'\nimport { getGlobalAnalytics } from '../../lib/global-analytics-helper'\nimport {\n  isBufferedPageContext,\n  getDefaultBufferedPageContext,\n  createPageContext,\n  BufferedPageContext,\n  PageContext,\n} from '../page'\nimport { getVersionType } from '../../lib/version-type'\n\n/**\n * The names of any AnalyticsBrowser methods that also exist on Analytics\n */\nexport type PreInitMethodName =\n  | 'screen'\n  | 'register'\n  | 'deregister'\n  | 'user'\n  | 'trackSubmit'\n  | 'trackClick'\n  | 'trackLink'\n  | 'trackForm'\n  | 'pageview'\n  | 'identify'\n  | 'reset'\n  | 'group'\n  | 'track'\n  | 'ready'\n  | 'alias'\n  | 'debug'\n  | 'page'\n  | 'once'\n  | 'off'\n  | 'on'\n  | 'addSourceMiddleware'\n  | 'setAnonymousId'\n  | 'addDestinationMiddleware'\n\n// Union of all analytics methods that _do not_ return a Promise\ntype SyncPreInitMethodName = {\n  [MethodName in PreInitMethodName]: ReturnType<\n    Analytics[MethodName]\n  > extends Promise<any>\n    ? never\n    : MethodName\n}[PreInitMethodName]\n\nconst flushSyncAnalyticsCalls = (\n  name: SyncPreInitMethodName,\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n): void => {\n  buffer.getAndRemove(name).forEach((c) => {\n    // While the underlying methods are synchronous, the callAnalyticsMethod returns a promise,\n    // which normalizes success and error states between async and non-async methods, with no perf penalty.\n    callAnalyticsMethod(analytics, c).catch(console.error)\n  })\n}\n\nexport const flushAddSourceMiddleware = async (\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n) => {\n  for (const c of buffer.getAndRemove('addSourceMiddleware')) {\n    await callAnalyticsMethod(analytics, c).catch(console.error)\n  }\n}\n\n/**\n *  Flush register plugin\n */\nexport const flushRegister = async (\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n) => {\n  for (const c of buffer.getAndRemove('register')) {\n    await callAnalyticsMethod(analytics, c).catch(console.error)\n  }\n}\n\nexport const flushOn = flushSyncAnalyticsCalls.bind(this, 'on')\n\nexport const flushSetAnonymousID = flushSyncAnalyticsCalls.bind(\n  this,\n  'setAnonymousId'\n)\n\nexport const flushAnalyticsCallsInNewTask = (\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n): void => {\n  ;(Object.keys(buffer.calls) as (keyof typeof buffer.calls)[]).forEach((m) => {\n    buffer.getAndRemove(m).forEach((c) => {\n      // No one remembers why this event loop optimization is/was neccessary. Lost to history.\n      setTimeout(() => {\n        callAnalyticsMethod(analytics, c).catch(console.error)\n      }, 0)\n    })\n  })\n}\n\nexport const popPageContext = (args: unknown[]): PageContext | undefined => {\n  if (hasBufferedPageContextAsLastArg(args)) {\n    const ctx = args.pop() as BufferedPageContext\n    return createPageContext(ctx)\n  }\n}\n\nexport const hasBufferedPageContextAsLastArg = (\n  args: unknown[]\n): args is [...unknown[], BufferedPageContext] | [BufferedPageContext] => {\n  const lastArg = args[args.length - 1]\n  return isBufferedPageContext(lastArg)\n}\n\n/**\n *  Represents a buffered method call that occurred before initialization.\n */\nexport class PreInitMethodCall<\n  MethodName extends PreInitMethodName = PreInitMethodName\n> {\n  method: MethodName\n  args: PreInitMethodParams<MethodName>\n  called: boolean\n  resolve: (v: ReturnType<Analytics[MethodName]>) => void\n  reject: (reason: any) => void\n  constructor(\n    method: PreInitMethodCall<MethodName>['method'],\n    args: PreInitMethodParams<MethodName>,\n    resolve: PreInitMethodCall<MethodName>['resolve'] = () => {},\n    reject: PreInitMethodCall<MethodName>['reject'] = console.error\n  ) {\n    this.method = method\n    this.resolve = resolve\n    this.reject = reject\n    this.called = false\n    this.args = args\n  }\n}\n\nexport type PreInitMethodParams<MethodName extends PreInitMethodName> =\n  | [...Parameters<Analytics[MethodName]>, BufferedPageContext]\n  | Parameters<Analytics[MethodName]>\n\n/**\n * Infer return type; if return type is promise, unwrap it.\n */\ntype ReturnTypeUnwrap<Fn> = Fn extends (...args: any[]) => infer ReturnT\n  ? ReturnT extends PromiseLike<infer Unwrapped>\n    ? Unwrapped\n    : ReturnT\n  : never\n\ntype MethodCallMap = Partial<Record<PreInitMethodName, PreInitMethodCall[]>>\n\ntype SnippetWindowBufferedMethodCall<\n  MethodName extends PreInitMethodName = PreInitMethodName\n> = [MethodName, ...PreInitMethodParams<MethodName>]\n\n/**\n * A list of the method calls before initialization for snippet users\n * For example, [[\"track\", \"foo\", {bar: 123}], [\"page\"], [\"on\", \"ready\", function(){..}]\n */\ntype SnippetBuffer = SnippetWindowBufferedMethodCall[]\n\n/**\n *  Represents any and all the buffered method calls that occurred before initialization.\n */\nexport class PreInitMethodCallBuffer {\n  private _callMap: MethodCallMap = {}\n\n  constructor(...calls: PreInitMethodCall[]) {\n    this.add(...calls)\n  }\n\n  /**\n   * Pull any buffered method calls from the window object, and use them to hydrate the instance buffer.\n   */\n  public get calls() {\n    this._pushSnippetWindowBuffer()\n    return this._callMap\n  }\n\n  private set calls(calls: MethodCallMap) {\n    this._callMap = calls\n  }\n\n  get<T extends PreInitMethodName>(methodName: T): PreInitMethodCall<T>[] {\n    return (this.calls[methodName] ?? []) as PreInitMethodCall<T>[]\n  }\n\n  /**\n   * Get all buffered method calls for a given method name, and clear them from the buffer.\n   */\n  getAndRemove<T extends PreInitMethodName>(\n    methodName: T\n  ): PreInitMethodCall<T>[] {\n    const calls = this.get(methodName)\n    this.calls[methodName] = []\n    return calls\n  }\n\n  add(...calls: PreInitMethodCall[]): void {\n    calls.forEach((call) => {\n      const eventsExpectingPageContext: PreInitMethodName[] = [\n        'track',\n        'screen',\n        'alias',\n        'group',\n        'page',\n        'identify',\n      ]\n      if (\n        eventsExpectingPageContext.includes(call.method) &&\n        !hasBufferedPageContextAsLastArg(call.args)\n      ) {\n        call.args = [...call.args, getDefaultBufferedPageContext()]\n      }\n\n      if (this.calls[call.method]) {\n        this.calls[call.method]!.push(call)\n      } else {\n        this.calls[call.method] = [call]\n      }\n    })\n  }\n\n  clear(): void {\n    // clear calls in the global snippet buffered array.\n    this._pushSnippetWindowBuffer()\n    // clear calls in this instance\n    this.calls = {}\n  }\n\n  toArray(): PreInitMethodCall[] {\n    return ([] as PreInitMethodCall[]).concat(...Object.values(this.calls))\n  }\n\n  /**\n   * Fetch the buffered method calls from the window object,\n   * normalize them, and use them to hydrate the buffer.\n   * This removes existing buffered calls from the window object.\n   */\n  private _pushSnippetWindowBuffer(): void {\n    // if this is the npm version, we don't want to read from the window object.\n    // This avoids namespace conflicts if there is a seperate analytics library on the page.\n    if (getVersionType() === 'npm') {\n      return undefined\n    }\n    const wa = getGlobalAnalytics()\n    if (!Array.isArray(wa)) return undefined\n    const buffered: SnippetBuffer = wa.splice(0, wa.length)\n    const calls = buffered.map(\n      ([methodName, ...args]) => new PreInitMethodCall(methodName, args)\n    )\n    this.add(...calls)\n  }\n}\n\n/**\n *  Call method and mark as \"called\"\n *  This function should never throw an error\n */\nexport async function callAnalyticsMethod<T extends PreInitMethodName>(\n  analytics: Analytics,\n  call: PreInitMethodCall<T>\n): Promise<void> {\n  try {\n    if (call.called) {\n      return undefined\n    }\n    call.called = true\n\n    const result: ReturnType<Analytics[T]> = (\n      analytics[call.method] as Function\n    )(...call.args)\n\n    if (isThenable(result)) {\n      // do not defer for non-async methods\n      await result\n    }\n\n    call.resolve(result)\n  } catch (err) {\n    call.reject(err)\n  }\n}\n\nexport type AnalyticsLoader = (\n  preInitBuffer: PreInitMethodCallBuffer\n) => Promise<[Analytics, Context]>\n\nexport class AnalyticsBuffered\n  implements PromiseLike<[Analytics, Context]>, AnalyticsBrowserCore\n{\n  instance?: Analytics\n  ctx?: Context\n  private _preInitBuffer: PreInitMethodCallBuffer\n  private _promise: Promise<[Analytics, Context]>\n  constructor(loader: AnalyticsLoader) {\n    this._preInitBuffer = new PreInitMethodCallBuffer()\n    this._promise = loader(this._preInitBuffer)\n    this._promise\n      .then(([ajs, ctx]) => {\n        this.instance = ajs\n        this.ctx = ctx\n      })\n      .catch(() => {\n        // intentionally do nothing...\n        // this result of this promise will be caught by the 'catch' block on this class.\n      })\n  }\n\n  then<T1, T2 = never>(\n    ...args: [\n      onfulfilled:\n        | ((instance: [Analytics, Context]) => T1 | PromiseLike<T1>)\n        | null\n        | undefined,\n      onrejected?: (reason: unknown) => T2 | PromiseLike<T2>\n    ]\n  ) {\n    return this._promise.then(...args)\n  }\n\n  catch<TResult = never>(\n    ...args: [\n      onrejected?:\n        | ((reason: any) => TResult | PromiseLike<TResult>)\n        | undefined\n        | null\n    ]\n  ) {\n    return this._promise.catch(...args)\n  }\n\n  finally(...args: [onfinally?: (() => void) | undefined | null]) {\n    return this._promise.finally(...args)\n  }\n\n  trackSubmit = this._createMethod('trackSubmit')\n  trackClick = this._createMethod('trackClick')\n  trackLink = this._createMethod('trackLink')\n  pageView = this._createMethod('pageview')\n  identify = this._createMethod('identify')\n  reset = this._createMethod('reset')\n  group = this._createMethod('group') as AnalyticsBrowserCore['group']\n  track = this._createMethod('track')\n  ready = this._createMethod('ready')\n  alias = this._createMethod('alias')\n  debug = this._createChainableMethod('debug')\n  page = this._createMethod('page')\n  once = this._createChainableMethod('once')\n  off = this._createChainableMethod('off')\n  on = this._createChainableMethod('on')\n  addSourceMiddleware = this._createMethod('addSourceMiddleware')\n  setAnonymousId = this._createMethod('setAnonymousId')\n  addDestinationMiddleware = this._createMethod('addDestinationMiddleware')\n\n  screen = this._createMethod('screen')\n  register = this._createMethod('register')\n  deregister = this._createMethod('deregister')\n  user = this._createMethod('user')\n  readonly VERSION = version\n\n  private _createMethod<T extends PreInitMethodName>(methodName: T) {\n    return (\n      ...args: Parameters<Analytics[T]>\n    ): Promise<ReturnTypeUnwrap<Analytics[T]>> => {\n      if (this.instance) {\n        const result = (this.instance[methodName] as Function)(...args)\n        return Promise.resolve(result)\n      }\n      return new Promise((resolve, reject) => {\n        this._preInitBuffer.add(\n          new PreInitMethodCall(methodName, args, resolve as any, reject)\n        )\n      })\n    }\n  }\n\n  /**\n   *  These are for methods that where determining when the method gets \"flushed\" is not important.\n   *  These methods will resolve when analytics is fully initialized, and return type (other than Analytics)will not be available.\n   */\n  private _createChainableMethod<T extends PreInitMethodName>(methodName: T) {\n    return (...args: Parameters<Analytics[T]>): AnalyticsBuffered => {\n      if (this.instance) {\n        void (this.instance[methodName] as Function)(...args)\n        return this\n      } else {\n        this._preInitBuffer.add(new PreInitMethodCall(methodName, args))\n      }\n\n      return this\n    }\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2008, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/to-facade.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/to-facade.ts"],"sourcesContent":["import {\n  Alias,\n  Facade,\n  Group,\n  Identify,\n  Options,\n  Page,\n  Screen,\n  Track,\n} from '@segment/facade'\nimport { SegmentEvent } from '../core/events'\n\nexport type SegmentFacade = Facade<SegmentEvent> & {\n  obj: SegmentEvent\n}\n\nexport function toFacade(evt: SegmentEvent, options?: Options): SegmentFacade {\n  let fcd = new Facade(evt, options)\n\n  if (evt.type === 'track') {\n    fcd = new Track(evt, options)\n  }\n\n  if (evt.type === 'identify') {\n    fcd = new Identify(evt, options)\n  }\n\n  if (evt.type === 'page') {\n    fcd = new Page(evt, options)\n  }\n\n  if (evt.type === 'alias') {\n    fcd = new Alias(evt, options)\n  }\n\n  if (evt.type === 'group') {\n    fcd = new Group(evt, options)\n  }\n\n  if (evt.type === 'screen') {\n    fcd = new Screen(evt, options)\n  }\n\n  Object.defineProperty(fcd, 'obj', {\n    value: evt,\n    writable: true,\n  })\n\n  return fcd as SegmentFacade\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EACL,KAAK,EACL,MAAM,EACN,KAAK,EACL,QAAQ,EAER,IAAI,EACJ,MAAM,EACN,KAAK,GACN,MAAM,iBAAiB,CAAA;;AAOlB,SAAU,QAAQ,CAAC,GAAiB,EAAE,OAAiB;IAC3D,IAAI,GAAG,GAAG,IAAI,iKAAM,CAAC,GAAG,EAAE,OAAO,CAAC,CAAA;IAElC,IAAI,GAAG,CAAC,IAAI,KAAK,OAAO,EAAE;QACxB,GAAG,GAAG,IAAI,gKAAK,CAAC,GAAG,EAAE,OAAO,CAAC,CAAA;KAC9B;IAED,IAAI,GAAG,CAAC,IAAI,KAAK,UAAU,EAAE;QAC3B,GAAG,GAAG,IAAI,mKAAQ,CAAC,GAAG,EAAE,OAAO,CAAC,CAAA;KACjC;IAED,IAAI,GAAG,CAAC,IAAI,KAAK,MAAM,EAAE;QACvB,GAAG,GAAG,IAAI,+JAAI,CAAC,GAAG,EAAE,OAAO,CAAC,CAAA;KAC7B;IAED,IAAI,GAAG,CAAC,IAAI,KAAK,OAAO,EAAE;QACxB,GAAG,GAAG,IAAI,gKAAK,CAAC,GAAG,EAAE,OAAO,CAAC,CAAA;KAC9B;IAED,IAAI,GAAG,CAAC,IAAI,KAAK,OAAO,EAAE;QACxB,GAAG,GAAG,IAAI,gKAAK,CAAC,GAAG,EAAE,OAAO,CAAC,CAAA;KAC9B;IAED,IAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE;QACzB,GAAG,GAAG,IAAI,iKAAM,CAAC,GAAG,EAAE,OAAO,CAAC,CAAA;KAC/B;IAED,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,KAAK,EAAE;QAChC,KAAK,EAAE,GAAG;QACV,QAAQ,EAAE,IAAI;KACf,CAAC,CAAA;IAEF,OAAO,GAAoB,CAAA;AAC7B,CAAC"}},
    {"offset": {"line": 2044, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/on-page-change.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/on-page-change.ts"],"sourcesContent":["/**\n * Register event listener on document that fires when:\n * * tab change or tab close (in mobile or desktop)\n * * click back / forward button\n * * click any link or perform any other navigation action\n * * soft refresh / hard refresh\n *\n * adapted from https://stackoverflow.com/questions/3239834/window-onbeforeunload-not-working-on-the-ipad/52864508#52864508,\n */\nexport const onPageChange = (cb: (unloaded: boolean) => void) => {\n  let unloaded = false // prevents double firing if both are supported\n\n  window.addEventListener('pagehide', () => {\n    if (unloaded) return\n    unloaded = true\n    cb(unloaded)\n  })\n\n  // using document instead of window because of bug affecting browsers before safari 14 (detail in footnotes https://caniuse.com/?search=visibilitychange)\n  document.addEventListener('visibilitychange', () => {\n    if (document.visibilityState == 'hidden') {\n      if (unloaded) return\n      unloaded = true\n    } else {\n      unloaded = false\n    }\n    cb(unloaded)\n  })\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;GAQG;;;;AACI,IAAM,YAAY,GAAG,SAAC,EAA+B;IAC1D,IAAI,QAAQ,GAAG,KAAK,CAAA,CAAC,+CAA+C;IAEpE,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE;QAClC,IAAI,QAAQ,EAAE,OAAM;QACpB,QAAQ,GAAG,IAAI,CAAA;QACf,EAAE,CAAC,QAAQ,CAAC,CAAA;IACd,CAAC,CAAC,CAAA;IAEF,yJAAyJ;IACzJ,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE;QAC5C,IAAI,QAAQ,CAAC,eAAe,IAAI,QAAQ,EAAE;YACxC,IAAI,QAAQ,EAAE,OAAM;YACpB,QAAQ,GAAG,IAAI,CAAA;SAChB,MAAM;YACL,QAAQ,GAAG,KAAK,CAAA;SACjB;QACD,EAAE,CAAC,QAAQ,CAAC,CAAA;IACd,CAAC,CAAC,CAAA;AACJ,CAAC,CAAA"}},
    {"offset": {"line": 2078, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/ratelimit-error.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/segmentio/ratelimit-error.ts"],"sourcesContent":["export class RateLimitError extends Error {\n  retryTimeout: number\n\n  constructor(message: string, retryTimeout: number) {\n    super(message)\n    this.retryTimeout = retryTimeout\n    this.name = 'RateLimitError'\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA,IAAA,iBAAA,SAAA,MAAA;QAAoC,sJAAA,EAAA,gBAAA,QAAK;IAGvC,SAAA,eAAY,OAAe,EAAE,YAAoB;QAAjD,IAAA,QACE,OAAA,IAAA,CAAA,IAAA,EAAM,OAAO,CAAC,IAAA,IAAA,CAGf;QAFC,KAAI,CAAC,YAAY,GAAG,YAAY,CAAA;QAChC,KAAI,CAAC,IAAI,GAAG,gBAAgB,CAAA;;IAC9B,CAAC;IACH,OAAA,cAAC;AAAD,CAAC,AARD,CAAoC,KAAK,GAQxC"}},
    {"offset": {"line": 2100, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/shared-dispatcher.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/segmentio/shared-dispatcher.ts"],"sourcesContent":["export const createHeaders = (\n  headerSettings: AdditionalHeaders | undefined\n): Record<string, string> => {\n  return {\n    'Content-Type': 'text/plain',\n    ...(typeof headerSettings === 'function'\n      ? headerSettings()\n      : headerSettings),\n  }\n}\n\n/**\n * Additional headers to be sent with the request.\n * Default is `Content-Type: text/plain`. This can be overridden.\n * If a function is provided, it will be called before each request.\n */\nexport type AdditionalHeaders =\n  | Record<string, string>\n  | (() => Record<string, string>)\n\nexport type RequestPriority = 'high' | 'low' | 'auto'\nexport type RequestCredentials = 'include' | 'same-origin' | 'omit'\n\n/**\n * These are the options that can be passed to the fetch dispatcher.\n * They more/less map to the Fetch RequestInit type.\n */\ninterface DispatchFetchConfig {\n  /**\n   * Request credentials configuration\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials\n   */\n  credentials?: RequestCredentials\n  /**\n   * This is useful for ensuring that an event is sent even if the user navigates away from the page.\n   * However, it may increase the likelihood of events being lost, as there is a 64kb limit for *all* fetch requests (not just ones to segment) with keepalive (which is why it's disabled by default). So, if you're sending a lot of data, this will likely cause events to be dropped.\n\n   * @default false\n   */\n  keepalive?: boolean\n  /**\n   * Additional headers to be sent with the request.\n   * Default is `Content-Type: text/plain`. This can be overridden.\n   * If a function is provided, it will be called before each request.\n   * @example { 'Content-Type': 'application/json' } or () => { 'Content-Type': 'application/json' }\n   */\n  headers?: AdditionalHeaders\n  /**\n   * 'Request Priority' of the request\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/RequestInit#priority\n   */\n  priority?: RequestPriority\n}\n\nexport interface BatchingDispatchConfig extends DispatchFetchConfig {\n  /**\n   * If strategy = 'batching', the maximum number of events to send in a single request. If the batch reaches this size, a request will automatically be sent.\n   *\n   * @default 10\n   */\n  size?: number\n  /**\n   * If strategy = 'batching', the maximum time, in milliseconds, to wait before sending a request.\n   * This won't alaways be relevant, as the request will be sent when the size is reached.\n   * However, if the size is never reached, the request will be sent after this time.\n   * When it comes to retries, if there is a rate limit timeout header, that will be respected over the value here.\n   *\n   * @default 5000\n   */\n  timeout?: number\n  /**\n   * If strategy = 'batching', the maximum number of retries to attempt before giving up.\n   * @default 10\n   */\n  maxRetries?: number\n}\n\nexport interface StandardDispatcherConfig extends DispatchFetchConfig {}\n\nexport type DeliveryStrategy =\n  | {\n      strategy?: 'standard'\n      config: StandardDispatcherConfig\n    }\n  | {\n      strategy: 'batching'\n      config?: BatchingDispatchConfig\n    }\n"],"names":[],"mappings":";;;;;;AAAO,IAAM,aAAa,GAAG,SAC3B,cAA6C;IAE7C,OAAA,IAAA,qJAAA,EAAA;QACE,cAAc,EAAE,YAAY;IAAA,GACzB,AAAC,OAAO,cAAc,KAAK,UAAU,GACpC,cAAc,EAAE,GAChB,cAAc,CAAC,EACpB;AACH,CAAC,CAAA"}},
    {"offset": {"line": 2115, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/batched-dispatcher.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/segmentio/batched-dispatcher.ts"],"sourcesContent":["import { SegmentEvent } from '../../core/events'\nimport { fetch } from '../../lib/fetch'\nimport { onPageChange } from '../../lib/on-page-change'\nimport { SegmentFacade } from '../../lib/to-facade'\nimport { RateLimitError } from './ratelimit-error'\nimport { Context } from '../../core/context'\nimport { BatchingDispatchConfig, createHeaders } from './shared-dispatcher'\n\nconst MAX_PAYLOAD_SIZE = 500\nconst MAX_KEEPALIVE_SIZE = 64\n\nfunction kilobytes(buffer: unknown): number {\n  const size = encodeURI(JSON.stringify(buffer)).split(/%..|./).length - 1\n  return size / 1024\n}\n\n/**\n * Checks if the payload is over or close to\n * the maximum payload size allowed by tracking\n * API.\n */\nfunction approachingTrackingAPILimit(buffer: unknown): boolean {\n  return kilobytes(buffer) >= MAX_PAYLOAD_SIZE - 50\n}\n\n/**\n * Checks if payload is over or approaching the limit for keepalive\n * requests. If keepalive is enabled we want to avoid\n * going over this to prevent data loss.\n */\nfunction passedKeepaliveLimit(buffer: unknown): boolean {\n  return kilobytes(buffer) >= MAX_KEEPALIVE_SIZE - 10\n}\n\nfunction chunks(batch: object[]): Array<object[]> {\n  const result: object[][] = []\n  let index = 0\n\n  batch.forEach((item) => {\n    const size = kilobytes(result[index])\n    if (size >= 64) {\n      index++\n    }\n\n    if (result[index]) {\n      result[index].push(item)\n    } else {\n      result[index] = [item]\n    }\n  })\n\n  return result\n}\n\nexport default function batch(\n  apiHost: string,\n  config?: BatchingDispatchConfig\n) {\n  let buffer: object[] = []\n  let pageUnloaded = false\n\n  const limit = config?.size ?? 10\n  const timeout = config?.timeout ?? 5000\n  let rateLimitTimeout = 0\n\n  function sendBatch(batch: object[]) {\n    if (batch.length === 0) {\n      return\n    }\n\n    const writeKey = (batch[0] as SegmentEvent)?.writeKey\n\n    // Remove sentAt from every event as batching only needs a single timestamp\n    const updatedBatch = batch.map((event) => {\n      const { sentAt, ...newEvent } = event as SegmentEvent\n      return newEvent\n    })\n\n    return fetch(`https://${apiHost}/b`, {\n      credentials: config?.credentials,\n      keepalive: config?.keepalive || pageUnloaded,\n      headers: createHeaders(config?.headers),\n      method: 'post',\n      body: JSON.stringify({\n        writeKey,\n        batch: updatedBatch,\n        sentAt: new Date().toISOString(),\n      }),\n      // @ts-ignore - not in the ts lib yet\n      priority: config?.priority,\n    }).then((res) => {\n      if (res.status >= 500) {\n        throw new Error(`Bad response from server: ${res.status}`)\n      }\n      if (res.status === 429) {\n        const retryTimeoutStringSecs = res.headers?.get('x-ratelimit-reset')\n        const retryTimeoutMS =\n          typeof retryTimeoutStringSecs == 'string'\n            ? parseInt(retryTimeoutStringSecs) * 1000\n            : timeout\n        throw new RateLimitError(\n          `Rate limit exceeded: ${res.status}`,\n          retryTimeoutMS\n        )\n      }\n    })\n  }\n\n  async function flush(attempt = 1): Promise<unknown> {\n    if (buffer.length) {\n      const batch = buffer\n      buffer = []\n      return sendBatch(batch)?.catch((error) => {\n        const ctx = Context.system()\n        ctx.log('error', 'Error sending batch', error)\n        if (attempt <= (config?.maxRetries ?? 10)) {\n          if (error.name === 'RateLimitError') {\n            rateLimitTimeout = error.retryTimeout\n          }\n          buffer.push(...batch)\n          buffer.map((event) => {\n            if ('_metadata' in event) {\n              const segmentEvent = event as ReturnType<SegmentFacade['json']>\n              segmentEvent._metadata = {\n                ...segmentEvent._metadata,\n                retryCount: attempt,\n              }\n            }\n          })\n          scheduleFlush(attempt + 1)\n        }\n      })\n    }\n  }\n\n  let schedule: NodeJS.Timeout | undefined\n\n  function scheduleFlush(attempt = 1): void {\n    if (schedule) {\n      return\n    }\n\n    schedule = setTimeout(\n      () => {\n        schedule = undefined\n        flush(attempt).catch(console.error)\n      },\n      rateLimitTimeout ? rateLimitTimeout : timeout\n    )\n    rateLimitTimeout = 0\n  }\n\n  onPageChange((unloaded) => {\n    pageUnloaded = unloaded\n\n    if (pageUnloaded && buffer.length) {\n      const reqs = chunks(buffer).map(sendBatch)\n      Promise.all(reqs).catch(console.error)\n    }\n  })\n\n  async function dispatch(_url: string, body: object): Promise<unknown> {\n    buffer.push(body)\n\n    const bufferOverflow =\n      buffer.length >= limit ||\n      approachingTrackingAPILimit(buffer) ||\n      (config?.keepalive && passedKeepaliveLimit(buffer))\n\n    return bufferOverflow || pageUnloaded ? flush() : scheduleFlush()\n  }\n\n  return {\n    dispatch,\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2296, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/fetch-dispatcher.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/segmentio/fetch-dispatcher.ts"],"sourcesContent":["import { fetch } from '../../lib/fetch'\nimport { RateLimitError } from './ratelimit-error'\nimport { createHeaders, StandardDispatcherConfig } from './shared-dispatcher'\nexport type Dispatcher = (url: string, body: object) => Promise<unknown>\n\nexport default function (config?: StandardDispatcherConfig): {\n  dispatch: Dispatcher\n} {\n  function dispatch(url: string, body: object): Promise<unknown> {\n    return fetch(url, {\n      credentials: config?.credentials,\n      keepalive: config?.keepalive,\n      headers: createHeaders(config?.headers),\n      method: 'post',\n      body: JSON.stringify(body),\n      // @ts-ignore - not in the ts lib yet\n      priority: config?.priority,\n    }).then((res) => {\n      if (res.status >= 500) {\n        throw new Error(`Bad response from server: ${res.status}`)\n      }\n      if (res.status === 429) {\n        const retryTimeoutStringSecs = res.headers?.get('x-ratelimit-reset')\n        const retryTimeoutMS = retryTimeoutStringSecs\n          ? parseInt(retryTimeoutStringSecs) * 1000\n          : 5000\n        throw new RateLimitError(\n          `Rate limit exceeded: ${res.status}`,\n          retryTimeoutMS\n        )\n      }\n    })\n  }\n\n  return {\n    dispatch,\n  }\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,iBAAiB,CAAA;AACvC,OAAO,EAAE,cAAc,EAAE,MAAM,mBAAmB,CAAA;AAClD,OAAO,EAAE,aAAa,EAA4B,MAAM,qBAAqB,CAAA;;;;AAG/D,wCAAW,MAAiC;IAGxD,SAAS,QAAQ,CAAC,GAAW,EAAE,IAAY;QACzC,WAAO,yLAAK,EAAC,GAAG,EAAE;YAChB,WAAW,EAAE,MAAM,KAAA,QAAN,MAAM,KAAA,KAAA,IAAA,KAAA,IAAN,MAAM,CAAE,WAAW;YAChC,SAAS,EAAE,MAAM,KAAA,QAAN,MAAM,KAAA,KAAA,IAAA,KAAA,IAAN,MAAM,CAAE,SAAS;YAC5B,OAAO,MAAE,iOAAa,EAAC,MAAM,KAAA,QAAN,MAAM,KAAA,KAAA,IAAA,KAAA,IAAN,MAAM,CAAE,OAAO,CAAC;YACvC,MAAM,EAAE,MAAM;YACd,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;YAC1B,qCAAqC;YACrC,QAAQ,EAAE,MAAM,KAAA,QAAN,MAAM,KAAA,KAAA,IAAA,KAAA,IAAN,MAAM,CAAE,QAAQ;SAC3B,CAAC,CAAC,IAAI,CAAC,SAAC,GAAG;;YACV,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,EAAE;gBACrB,MAAM,IAAI,KAAK,CAAC,6BAAA,MAAA,CAA6B,GAAG,CAAC,MAAM,CAAE,CAAC,CAAA;aAC3D;YACD,IAAI,GAAG,CAAC,MAAM,KAAK,GAAG,EAAE;gBACtB,IAAM,sBAAsB,GAAG,CAAA,KAAA,GAAG,CAAC,OAAO,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,GAAG,CAAC,mBAAmB,CAAC,CAAA;gBACpE,IAAM,cAAc,GAAG,sBAAsB,GACzC,QAAQ,CAAC,sBAAsB,CAAC,GAAG,IAAI,GACvC,IAAI,CAAA;gBACR,MAAM,IAAI,gOAAc,CACtB,wBAAA,MAAA,CAAwB,GAAG,CAAC,MAAM,CAAE,EACpC,cAAc,CACf,CAAA;aACF;QACH,CAAC,CAAC,CAAA;IACJ,CAAC;IAED,OAAO;QACL,QAAQ,EAAA,QAAA;KACT,CAAA;AACH,CAAC"}},
    {"offset": {"line": 2336, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/normalize.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/segmentio/normalize.ts"],"sourcesContent":["import { Analytics } from '../../core/analytics'\nimport { CDNSettings } from '../../browser'\nimport { SegmentFacade } from '../../lib/to-facade'\nimport { SegmentioSettings } from './index'\nimport { Context } from '../../core/context'\n\nexport function normalize(\n  analytics: Analytics,\n  json: ReturnType<SegmentFacade['json']>,\n  settings?: SegmentioSettings,\n  integrations?: CDNSettings['integrations'],\n  ctx?: Context\n): object {\n  const user = analytics.user()\n\n  delete json.options\n\n  json.writeKey = settings?.apiKey\n\n  json.userId = json.userId || user.id()\n  json.anonymousId = json.anonymousId || user.anonymousId()\n\n  json.sentAt = new Date()\n\n  const failed = analytics.queue.failedInitializations || []\n  if (failed.length > 0) {\n    json._metadata = { failedInitializations: failed }\n  }\n\n  if (ctx != null) {\n    if (ctx.attempts > 1) {\n      json._metadata = {\n        ...json._metadata,\n        retryCount: ctx.attempts,\n      }\n    }\n    ctx.attempts++\n  }\n\n  const bundled: string[] = []\n  const unbundled: string[] = []\n\n  for (const key in integrations) {\n    const integration = integrations[key]\n    if (key === 'Segment.io') {\n      bundled.push(key)\n    }\n    if (integration.bundlingStatus === 'bundled') {\n      bundled.push(key)\n    }\n    if (integration.bundlingStatus === 'unbundled') {\n      unbundled.push(key)\n    }\n  }\n\n  // This will make sure that the disabled cloud mode destinations will be\n  // included in the unbundled list.\n  for (const settingsUnbundled of settings?.unbundledIntegrations || []) {\n    if (!unbundled.includes(settingsUnbundled)) {\n      unbundled.push(settingsUnbundled)\n    }\n  }\n\n  const configIds = settings?.maybeBundledConfigIds ?? {}\n  const bundledConfigIds: string[] = []\n\n  bundled.sort().forEach((name) => {\n    ;(configIds[name] ?? []).forEach((id) => {\n      bundledConfigIds.push(id)\n    })\n  })\n\n  if (settings?.addBundledMetadata !== false) {\n    json._metadata = {\n      ...json._metadata,\n      bundled: bundled.sort(),\n      unbundled: unbundled.sort(),\n      bundledIds: bundledConfigIds,\n    }\n  }\n\n  return json\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2408, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/p-while.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/p-while.ts"],"sourcesContent":["export const pWhile = async <T>(\n  condition: (value: T | undefined) => boolean,\n  action: () => T | PromiseLike<T>\n): Promise<void> => {\n  const loop = async (actionResult: T | undefined): Promise<void> => {\n    if (condition(actionResult)) {\n      return loop(await action())\n    }\n  }\n\n  return loop(undefined)\n}\n"],"names":[],"mappings":";;;;;;AAAO,IAAM,MAAM,GAAG,SACpB,SAA4C,EAC5C,MAAgC;IAAA,OAAA,IAAA,sJAAA,EAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;;;YAE1B,IAAI,GAAG,SAAO,YAA2B;gBAAA,OAAA,IAAA,sJAAA,EAAA,KAAA,GAAA,KAAA,GAAA,KAAA,GAAA;;;;;qCACzC,SAAS,CAAC,YAAY,CAAC,EAAvB,OAAA;oCAAA,EAAA,OAAA;oCAAA;iCAAA,CAAuB;gCAClB,KAAA,IAAI,CAAA;gCAAC,OAAA;oCAAA,EAAA,OAAA;oCAAM,MAAM,EAAE;iCAAA,CAAA;;gCAA1B,OAAA;oCAAA,EAAA,QAAA;oCAAO,GAAA,KAAA,CAAA,KAAA,GAAA;wCAAK,GAAA,IAAA,EAAc;qCAAA,CAAC;iCAAA,CAAA;;;;;;;;aAE9B,CAAA;YAED,OAAA;gBAAA,EAAA,QAAA;gBAAO,IAAI,CAAC,SAAS,CAAC;aAAA,CAAA;;;CACvB,CAAA"}},
    {"offset": {"line": 2459, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/schedule-flush.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/segmentio/schedule-flush.ts"],"sourcesContent":["import { isOffline } from '../../core/connection'\nimport { Context } from '../../core/context'\nimport { Plugin } from '../../core/plugin'\nimport { attempt } from '@segment/analytics-core'\nimport { pWhile } from '../../lib/p-while'\nimport { PriorityQueue } from '../../lib/priority-queue'\n\nasync function flushQueue(\n  xt: Plugin,\n  queue: PriorityQueue<Context>\n): Promise<PriorityQueue<Context>> {\n  const failedQueue: Context[] = []\n  if (isOffline()) {\n    return queue\n  }\n\n  await pWhile(\n    () => queue.length > 0 && !isOffline(),\n    async () => {\n      const ctx = queue.pop()\n      if (!ctx) {\n        return\n      }\n\n      const result = await attempt(ctx, xt)\n      const success = result instanceof Context\n      if (!success) {\n        failedQueue.push(ctx)\n      }\n    }\n  )\n  // re-add failed tasks\n  failedQueue.map((failed) => queue.pushWithBackoff(failed))\n  return queue\n}\n\nexport function scheduleFlush(\n  flushing: boolean,\n  buffer: PriorityQueue<Context>,\n  xt: Plugin,\n  scheduleFlush: Function\n): void {\n  if (flushing) {\n    return\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-misused-promises\n  setTimeout(async () => {\n    let isFlushing = true\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    const newBuffer = await flushQueue(xt, buffer)\n    isFlushing = false\n\n    if (buffer.todo > 0) {\n      scheduleFlush(isFlushing, newBuffer, xt, scheduleFlush)\n    }\n  }, Math.random() * 5000)\n}\n"],"names":[],"mappings":";;;;;AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,uBAAuB,CAAA;AACjD,OAAO,EAAE,OAAO,EAAE,MAAM,oBAAoB,CAAA;AAE5C,OAAO,EAAE,OAAO,EAAE,MAAM,yBAAyB,CAAA;AACjD,OAAO,EAAE,MAAM,EAAE,MAAM,mBAAmB,CAAA;;;;;;AAG1C,SAAe,UAAU,CACvB,EAAU,EACV,KAA6B;;;;;;;oBAEvB,WAAW,GAAc,EAAE,CAAA;oBACjC,QAAI,4MAAS,EAAE,GAAE;wBACf,OAAA;4BAAA,EAAA,QAAA;4BAAO,KAAK;yBAAA,CAAA;qBACb;oBAED,OAAA;wBAAA,EAAA,OAAA;4BAAM,+LAAM,EACV;4BAAM,OAAA,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,KAAC,4MAAS,EAAE;wBAAhC,CAAgC,EACtC;4BAAA,OAAA,IAAA,sJAAA,EAAA,OAAA,KAAA,GAAA,KAAA,GAAA;;;;;4CACQ,GAAG,GAAG,KAAK,CAAC,GAAG,EAAE,CAAA;4CACvB,IAAI,CAAC,GAAG,EAAE;gDACR,OAAA;oDAAA,EAAA,QAAA;iDAAA,CAAM;6CACP;4CAEc,OAAA;gDAAA,EAAA,OAAA;oDAAM,gMAAO,EAAC,GAAG,EAAE,EAAE,CAAC;6CAAA,CAAA;;4CAA/B,MAAM,GAAG,GAAA,IAAA,EAAsB;4CAC/B,OAAO,GAAG,MAAM,YAAY,uNAAO,CAAA;4CACzC,IAAI,CAAC,OAAO,EAAE;gDACZ,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;6CACtB;;;;;;;yBACF,CACF;sBAAA;;oBAdD,GAAA,IAAA,EAcC,CAAA;oBACD,sBAAsB;oBACtB,WAAW,CAAC,GAAG,CAAC,SAAC,MAAM;wBAAK,OAAA,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC;oBAA7B,CAA6B,CAAC,CAAA;oBAC1D,OAAA;wBAAA,EAAA,QAAA;wBAAO,KAAK;qBAAA,CAAA;;;;CACb;AAEK,SAAU,aAAa,CAC3B,QAAiB,EACjB,MAA8B,EAC9B,EAAU,EACV,aAAuB;IAJzB,IAAA,QAAA,IAAA,CAqBC;IAfC,IAAI,QAAQ,EAAE;QACZ,OAAM;KACP;IAED,kEAAkE;IAClE,UAAU,CAAC;QAAA,OAAA,IAAA,sJAAA,EAAA,OAAA,KAAA,GAAA,KAAA,GAAA;;;;;wBACL,UAAU,GAAG,IAAI,CAAA;wBAEH,OAAA;4BAAA,EAAA,OAAA;4BAAM,UAAU,CAAC,EAAE,EAAE,MAAM,CAAC;yBAAA,CAAA;;wBAAxC,SAAS,GAAG,GAAA,IAAA,EAA4B;wBAC9C,UAAU,GAAG,KAAK,CAAA;wBAElB,IAAI,MAAM,CAAC,IAAI,GAAG,CAAC,EAAE;4BACnB,aAAa,CAAC,UAAU,EAAE,SAAS,EAAE,EAAE,EAAE,aAAa,CAAC,CAAA;yBACxD;;;;;;;KACF,EAAE,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,CAAA;AAC1B,CAAC"}},
    {"offset": {"line": 2570, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/segmentio/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/segmentio/index.ts"],"sourcesContent":["import { Facade } from '@segment/facade'\nimport { Analytics } from '../../core/analytics'\nimport { CDNSettings } from '../../browser'\nimport { isOffline } from '../../core/connection'\nimport { Context } from '../../core/context'\nimport { Plugin } from '../../core/plugin'\nimport { PriorityQueue } from '../../lib/priority-queue'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport { toFacade } from '../../lib/to-facade'\nimport batch from './batched-dispatcher'\nimport standard from './fetch-dispatcher'\nimport { normalize } from './normalize'\nimport { scheduleFlush } from './schedule-flush'\nimport { SEGMENT_API_HOST } from '../../core/constants'\nimport { DeliveryStrategy } from './shared-dispatcher'\n\nexport type SegmentioSettings = {\n  apiKey: string\n  apiHost?: string\n  protocol?: 'http' | 'https'\n\n  addBundledMetadata?: boolean\n  unbundledIntegrations?: string[]\n  bundledConfigIds?: string[]\n  unbundledConfigIds?: string[]\n\n  maybeBundledConfigIds?: Record<string, string[]>\n\n  deliveryStrategy?: DeliveryStrategy\n}\n\ntype JSON = ReturnType<Facade['json']>\n\nfunction onAlias(analytics: Analytics, json: JSON): JSON {\n  const user = analytics.user()\n  json.previousId =\n    json.previousId ?? json.from ?? user.id() ?? user.anonymousId()\n  json.userId = json.userId ?? json.to\n  delete json.from\n  delete json.to\n  return json\n}\n\nexport type SegmentIOPluginMetadata = {\n  writeKey: string\n  apiHost: string\n  protocol: string\n}\nexport interface SegmentIOPlugin extends Plugin {\n  metadata: SegmentIOPluginMetadata\n}\n\nexport const isSegmentPlugin = (plugin: Plugin): plugin is SegmentIOPlugin => {\n  return plugin.name === 'Segment.io'\n}\n\nexport function segmentio(\n  analytics: Analytics,\n  settings?: SegmentioSettings,\n  integrations?: CDNSettings['integrations']\n): Plugin {\n  // Attach `pagehide` before buffer is created so that inflight events are added\n  // to the buffer before the buffer persists events in its own `pagehide` handler.\n  window.addEventListener('pagehide', () => {\n    buffer.push(...Array.from(inflightEvents))\n    inflightEvents.clear()\n  })\n\n  const writeKey = settings?.apiKey ?? ''\n\n  const buffer = analytics.options.disableClientPersistence\n    ? new PriorityQueue<Context>(analytics.queue.queue.maxAttempts, [])\n    : new PersistedPriorityQueue(\n        analytics.queue.queue.maxAttempts,\n        `${writeKey}:dest-Segment.io`\n      )\n\n  const inflightEvents = new Set<Context>()\n  const flushing = false\n\n  const apiHost = settings?.apiHost ?? SEGMENT_API_HOST\n  const protocol = settings?.protocol ?? 'https'\n  const remote = `${protocol}://${apiHost}`\n\n  const deliveryStrategy = settings?.deliveryStrategy\n  const client =\n    deliveryStrategy &&\n    'strategy' in deliveryStrategy &&\n    deliveryStrategy.strategy === 'batching'\n      ? batch(apiHost, deliveryStrategy.config)\n      : standard(deliveryStrategy?.config)\n\n  async function send(ctx: Context): Promise<Context> {\n    if (isOffline()) {\n      buffer.push(ctx)\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      scheduleFlush(flushing, buffer, segmentio, scheduleFlush)\n      return ctx\n    }\n\n    inflightEvents.add(ctx)\n\n    const path = ctx.event.type.charAt(0)\n\n    let json = toFacade(ctx.event).json()\n\n    if (ctx.event.type === 'track') {\n      delete json.traits\n    }\n\n    if (ctx.event.type === 'alias') {\n      json = onAlias(analytics, json)\n    }\n\n    if (buffer.getAttempts(ctx) >= buffer.maxAttempts) {\n      inflightEvents.delete(ctx)\n      return ctx\n    }\n\n    return client\n      .dispatch(\n        `${remote}/${path}`,\n        normalize(analytics, json, settings, integrations, ctx)\n      )\n      .then(() => ctx)\n      .catch((error) => {\n        ctx.log('error', 'Error sending event', error)\n        if (error.name === 'RateLimitError') {\n          const timeout = error.retryTimeout\n          buffer.pushWithBackoff(ctx, timeout)\n        } else {\n          buffer.pushWithBackoff(ctx)\n        }\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        scheduleFlush(flushing, buffer, segmentio, scheduleFlush)\n        return ctx\n      })\n      .finally(() => {\n        inflightEvents.delete(ctx)\n      })\n  }\n\n  const segmentio: SegmentIOPlugin = {\n    metadata: {\n      writeKey,\n      apiHost,\n      protocol,\n    },\n    name: 'Segment.io',\n    type: 'destination',\n    version: '0.1.0',\n    isLoaded: (): boolean => true,\n    load: (): Promise<void> => Promise.resolve(),\n    track: send,\n    identify: send,\n    page: send,\n    alias: send,\n    group: send,\n    screen: send,\n  }\n\n  // Buffer may already have items if they were previously stored in localStorage.\n  // Start flushing them immediately.\n  if (buffer.todo) {\n    scheduleFlush(flushing, buffer, segmentio, scheduleFlush)\n  }\n\n  return segmentio\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2709, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/analytics/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/analytics/index.ts"],"sourcesContent":["import {\n  AliasParams,\n  DispatchedEvent,\n  EventParams,\n  GroupParams,\n  PageParams,\n  resolveAliasArguments,\n  resolveArguments,\n  resolvePageArguments,\n  resolveUserArguments,\n  IdentifyParams,\n} from '../arguments-resolver'\nimport type { FormArgs, LinkArgs } from '../auto-track'\nimport { isOffline } from '../connection'\nimport { Context } from '../context'\nimport { dispatch } from '@segment/analytics-core'\nimport { Emitter } from '@segment/analytics-generic-utils'\nimport {\n  Callback,\n  EventFactory,\n  EventProperties,\n  SegmentEvent,\n} from '../events'\nimport { isDestinationPluginWithAddMiddleware, Plugin } from '../plugin'\nimport { EventQueue } from '../queue/event-queue'\nimport { Group, ID, User } from '../user'\nimport autoBind from '../../lib/bind-all'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport type { LegacyIntegration } from '../../plugins/ajs-destination/types'\nimport type {\n  DestinationMiddlewareFunction,\n  MiddlewareFunction,\n} from '../../plugins/middleware'\nimport { version } from '../../generated/version'\nimport { PriorityQueue } from '../../lib/priority-queue'\nimport { getGlobal } from '../../lib/get-global'\nimport { AnalyticsClassic, AnalyticsCore } from './interfaces'\nimport type { CDNSettings } from '../../browser'\nimport {\n  CookieOptions,\n  MemoryStorage,\n  UniversalStorage,\n  StoreType,\n  applyCookieOptions,\n  initializeStorages,\n  isArrayOfStoreType,\n} from '../storage'\nimport { setGlobalAnalytics } from '../../lib/global-analytics-helper'\nimport { popPageContext } from '../buffer'\nimport {\n  isSegmentPlugin,\n  SegmentIOPluginMetadata,\n} from '../../plugins/segmentio'\nimport {\n  AnalyticsSettings,\n  IntegrationsInitOptions,\n  InitOptions,\n} from '../../browser/settings'\n\nexport type { InitOptions, AnalyticsSettings }\n\nconst deprecationWarning =\n  'This is being deprecated and will be not be available in future releases of Analytics JS'\n\n// reference any pre-existing \"analytics\" object so a user can restore the reference\nconst global: any = getGlobal()\nconst _analytics = global?.analytics\n\nfunction createDefaultQueue(\n  name: string,\n  retryQueue = false,\n  disablePersistance = false\n) {\n  const maxAttempts = retryQueue ? 10 : 1\n  const priorityQueue = disablePersistance\n    ? new PriorityQueue(maxAttempts, [])\n    : new PersistedPriorityQueue(maxAttempts, name)\n  return new EventQueue(priorityQueue)\n}\n\n/**\n * The public settings that are set on the analytics instance\n */\nexport class AnalyticsInstanceSettings {\n  readonly writeKey: string\n  /**\n   * This is an unstable API, it may change in the future without warning.\n   */\n  readonly cdnSettings: CDNSettings\n  readonly cdnURL?: string\n  get apiHost(): string | undefined {\n    return this._getSegmentPluginMetadata?.()?.apiHost\n  }\n  private _getSegmentPluginMetadata?: () => SegmentIOPluginMetadata | undefined\n\n  /**\n   * Auto-track specific timeout setting for legacy purposes.\n   */\n  timeout = 300\n\n  constructor(settings: AnalyticsSettings, queue: EventQueue) {\n    this._getSegmentPluginMetadata = () =>\n      queue.plugins.find(isSegmentPlugin)?.metadata\n    this.writeKey = settings.writeKey\n\n    // this is basically just to satisfy typescript / so we don't need to change the function sig of every test.\n    // when loadAnalytics is called, cdnSettings will always be available.\n    const emptyCDNSettings: CDNSettings = {\n      integrations: {\n        'Segment.io': {\n          apiKey: '',\n        },\n      },\n    }\n    this.cdnSettings = settings.cdnSettings ?? emptyCDNSettings\n    this.cdnURL = settings.cdnURL\n  }\n}\n\n/* analytics-classic stubs */\nfunction _stub(this: never) {\n  console.warn(deprecationWarning)\n}\n\nexport class Analytics\n  extends Emitter\n  implements AnalyticsCore, AnalyticsClassic\n{\n  settings: AnalyticsInstanceSettings\n  private _user: User\n  private _group: Group\n  private eventFactory: EventFactory\n  private _debug = false\n  private _universalStorage: UniversalStorage\n\n  initialized = false\n  integrations: IntegrationsInitOptions\n  options: InitOptions\n  queue: EventQueue\n\n  constructor(\n    settings: AnalyticsSettings,\n    options?: InitOptions,\n    queue?: EventQueue,\n    user?: User,\n    group?: Group\n  ) {\n    super()\n    const cookieOptions = options?.cookie\n    const disablePersistance = options?.disableClientPersistence ?? false\n\n    this.queue =\n      queue ??\n      createDefaultQueue(\n        `${settings.writeKey}:event-queue`,\n        options?.retryQueue,\n        disablePersistance\n      )\n    this.settings = new AnalyticsInstanceSettings(settings, this.queue)\n\n    const storageSetting = options?.storage\n    this._universalStorage = this.createStore(\n      disablePersistance,\n      storageSetting,\n      cookieOptions\n    )\n\n    this._user =\n      user ??\n      new User(\n        {\n          persist: !disablePersistance,\n          storage: options?.storage,\n          // Any User specific options override everything else\n          ...options?.user,\n        },\n        cookieOptions\n      ).load()\n    this._group =\n      group ??\n      new Group(\n        {\n          persist: !disablePersistance,\n          storage: options?.storage,\n          // Any group specific options override everything else\n          ...options?.group,\n        },\n        cookieOptions\n      ).load()\n    this.eventFactory = new EventFactory(this._user)\n    this.integrations = options?.integrations ?? {}\n    this.options = options ?? {}\n    autoBind(this)\n  }\n\n  user = (): User => {\n    return this._user\n  }\n\n  /**\n   * Creates the storage system based on the settings received\n   * @returns Storage\n   */\n  private createStore(\n    disablePersistance: boolean,\n    storageSetting: InitOptions['storage'],\n    cookieOptions?: CookieOptions | undefined\n  ): UniversalStorage {\n    // DisablePersistance option overrides all, no storage will be used outside of memory even if specified\n    if (disablePersistance) {\n      return new UniversalStorage([new MemoryStorage()])\n    } else {\n      if (storageSetting) {\n        if (isArrayOfStoreType(storageSetting)) {\n          // We will create the store with the priority for customer settings\n          return new UniversalStorage(\n            initializeStorages(\n              applyCookieOptions(storageSetting.stores, cookieOptions)\n            )\n          )\n        }\n      }\n    }\n    // We default to our multi storage with priority\n    return new UniversalStorage(\n      initializeStorages([\n        StoreType.LocalStorage,\n        {\n          name: StoreType.Cookie,\n          settings: cookieOptions,\n        },\n        StoreType.Memory,\n      ])\n    )\n  }\n\n  get storage(): UniversalStorage {\n    return this._universalStorage\n  }\n\n  async track(...args: EventParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [name, data, opts, cb] = resolveArguments(...args)\n\n    const segmentEvent = this.eventFactory.track(\n      name,\n      data as EventProperties,\n      opts,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, cb).then((ctx) => {\n      this.emit('track', name, ctx.event.properties, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async page(...args: PageParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [category, page, properties, options, callback] =\n      resolvePageArguments(...args)\n\n    const segmentEvent = this.eventFactory.page(\n      category,\n      page,\n      properties,\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('page', category, page, ctx.event.properties, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async identify(...args: IdentifyParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [id, _traits, options, callback] = resolveUserArguments(this._user)(\n      ...args\n    )\n\n    this._user.identify(id, _traits)\n    const segmentEvent = this.eventFactory.identify(\n      this._user.id(),\n      this._user.traits(),\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit(\n        'identify',\n        ctx.event.userId,\n        ctx.event.traits,\n        ctx.event.options\n      )\n      return ctx\n    })\n  }\n\n  group(): Group\n  group(...args: GroupParams): Promise<DispatchedEvent>\n  group(...args: GroupParams): Promise<DispatchedEvent> | Group {\n    const pageCtx = popPageContext(args)\n    if (args.length === 0) {\n      return this._group\n    }\n\n    const [id, _traits, options, callback] = resolveUserArguments(this._group)(\n      ...args\n    )\n\n    this._group.identify(id, _traits)\n    const groupId = this._group.id()\n    const groupTraits = this._group.traits()\n\n    const segmentEvent = this.eventFactory.group(\n      groupId,\n      groupTraits,\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('group', ctx.event.groupId, ctx.event.traits, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async alias(...args: AliasParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [to, from, options, callback] = resolveAliasArguments(...args)\n    const segmentEvent = this.eventFactory.alias(\n      to,\n      from,\n      options,\n      this.integrations,\n      pageCtx\n    )\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('alias', to, from, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async screen(...args: PageParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [category, page, properties, options, callback] =\n      resolvePageArguments(...args)\n\n    const segmentEvent = this.eventFactory.screen(\n      category,\n      page,\n      properties,\n      options,\n      this.integrations,\n      pageCtx\n    )\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit(\n        'screen',\n        category,\n        page,\n        ctx.event.properties,\n        ctx.event.options\n      )\n      return ctx\n    })\n  }\n\n  async trackClick(...args: LinkArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.link.call(this, ...args)\n  }\n\n  async trackLink(...args: LinkArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.link.call(this, ...args)\n  }\n\n  async trackSubmit(...args: FormArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.form.call(this, ...args)\n  }\n\n  async trackForm(...args: FormArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.form.call(this, ...args)\n  }\n\n  async register(...plugins: Plugin[]): Promise<Context> {\n    const ctx = Context.system()\n\n    const registrations = plugins.map((xt) =>\n      this.queue.register(ctx, xt, this)\n    )\n    await Promise.all(registrations)\n\n    return ctx\n  }\n\n  async deregister(...plugins: string[]): Promise<Context> {\n    const ctx = Context.system()\n\n    const deregistrations = plugins.map((pl) => {\n      const plugin = this.queue.plugins.find((p) => p.name === pl)\n      if (plugin) {\n        return this.queue.deregister(ctx, plugin, this)\n      } else {\n        ctx.log('warn', `plugin ${pl} not found`)\n      }\n    })\n\n    await Promise.all(deregistrations)\n\n    return ctx\n  }\n\n  debug(toggle: boolean): Analytics {\n    // Make sure legacy ajs debug gets turned off if it was enabled before upgrading.\n    if (toggle === false && localStorage.getItem('debug')) {\n      localStorage.removeItem('debug')\n    }\n    this._debug = toggle\n    return this\n  }\n\n  reset(): void {\n    this._user.reset()\n    this._group.reset()\n    this.emit('reset')\n  }\n\n  timeout(timeout: number): void {\n    this.settings.timeout = timeout\n  }\n\n  private async _dispatch(\n    event: SegmentEvent,\n    callback?: Callback\n  ): Promise<DispatchedEvent> {\n    const ctx = new Context(event)\n    ctx.stats.increment('analytics_js.invoke', 1, [event.type])\n    if (isOffline() && !this.options.retryQueue) {\n      return ctx\n    }\n    return dispatch(ctx, this.queue, this, {\n      callback,\n      debug: this._debug,\n      timeout: this.settings.timeout,\n    })\n  }\n\n  async addSourceMiddleware(fn: MiddlewareFunction): Promise<Analytics> {\n    await this.queue.criticalTasks.run(async () => {\n      const { sourceMiddlewarePlugin } = await import(\n        /* webpackChunkName: \"middleware\" */ '../../plugins/middleware'\n      )\n\n      const integrations: Record<string, boolean> = {}\n      this.queue.plugins.forEach((plugin) => {\n        if (plugin.type === 'destination') {\n          return (integrations[plugin.name] = true)\n        }\n      })\n\n      const plugin = sourceMiddlewarePlugin(fn, integrations)\n      await this.register(plugin)\n    })\n\n    return this\n  }\n\n  /* TODO: This does not have to return a promise? */\n  addDestinationMiddleware(\n    integrationName: string,\n    ...middlewares: DestinationMiddlewareFunction[]\n  ): Promise<Analytics> {\n    this.queue.plugins\n      .filter(isDestinationPluginWithAddMiddleware)\n      .forEach((p) => {\n        if (\n          integrationName === '*' ||\n          p.name.toLowerCase() === integrationName.toLowerCase()\n        ) {\n          p.addMiddleware(...middlewares)\n        }\n      })\n\n    return Promise.resolve(this)\n  }\n\n  setAnonymousId(id?: string): ID {\n    return this._user.anonymousId(id)\n  }\n\n  async queryString(query: string): Promise<Context[]> {\n    if (this.options.useQueryString === false) {\n      return []\n    }\n\n    const { queryString } = await import(\n      /* webpackChunkName: \"queryString\" */ '../query-string'\n    )\n    return queryString(this, query)\n  }\n\n  /**\n   * @deprecated This function does not register a destination plugin.\n   *\n   * Instantiates a legacy Analytics.js destination.\n   *\n   * This function does not register the destination as an Analytics.JS plugin,\n   * all the it does it to invoke the factory function back.\n   */\n  use(legacyPluginFactory: (analytics: Analytics) => void): Analytics {\n    legacyPluginFactory(this)\n    return this\n  }\n\n  async ready(\n    callback: Function = (res: Promise<unknown>[]): Promise<unknown>[] => res\n  ): Promise<unknown> {\n    return Promise.all(\n      this.queue.plugins.map((i) => (i.ready ? i.ready() : Promise.resolve()))\n    ).then((res) => {\n      callback(res)\n      return res\n    })\n  }\n\n  // analytics-classic api\n\n  noConflict(): Analytics {\n    console.warn(deprecationWarning)\n    setGlobalAnalytics(_analytics ?? this)\n    return this\n  }\n\n  normalize(msg: SegmentEvent): SegmentEvent {\n    console.warn(deprecationWarning)\n    return this.eventFactory['normalize'](msg)\n  }\n\n  get failedInitializations(): string[] {\n    console.warn(deprecationWarning)\n    return this.queue.failedInitializations\n  }\n\n  get VERSION(): string {\n    return version\n  }\n\n  /* @deprecated - noop */\n  async initialize(\n    _settings?: AnalyticsSettings,\n    _options?: InitOptions\n  ): Promise<Analytics> {\n    console.warn(deprecationWarning)\n    return Promise.resolve(this)\n  }\n\n  init = this.initialize.bind(this)\n\n  async pageview(url: string): Promise<Analytics> {\n    console.warn(deprecationWarning)\n    await this.page({ path: url })\n    return this\n  }\n\n  get plugins() {\n    console.warn(deprecationWarning)\n    // @ts-expect-error\n    return this._plugins ?? {}\n  }\n\n  get Integrations() {\n    console.warn(deprecationWarning)\n    const integrations = this.queue.plugins\n      .filter((plugin) => plugin.type === 'destination')\n      .reduce((acc, plugin) => {\n        const name = `${plugin.name\n          .toLowerCase()\n          .replace('.', '')\n          .split(' ')\n          .join('-')}Integration`\n\n        // @ts-expect-error\n        const integration = window[name] as\n          | (LegacyIntegration & { Integration?: LegacyIntegration })\n          | undefined\n\n        if (!integration) {\n          return acc\n        }\n\n        const nested = integration.Integration // hack - Google Analytics function resides in the \"Integration\" field\n        if (nested) {\n          acc[plugin.name] = nested\n          return acc\n        }\n\n        acc[plugin.name] = integration as LegacyIntegration\n        return acc\n      }, {} as Record<string, LegacyIntegration>)\n\n    return integrations\n  }\n\n  log = _stub\n  addIntegrationMiddleware = _stub\n  listeners = _stub\n  addEventListener = _stub\n  removeAllListeners = _stub\n  removeListener = _stub\n  removeEventListener = _stub\n  hasListeners = _stub\n  add = _stub\n  addIntegration = _stub\n\n  // snippet function\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  push(args: any[]) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const an = this as any\n    const method = args.shift()\n    if (method) {\n      if (!an[method]) return\n    }\n    an[method].apply(this, args)\n  }\n}\n\n/**\n * @returns a no-op analytics instance that does not create cookies or localstorage, or send any events to segment.\n */\nexport class NullAnalytics extends Analytics {\n  constructor() {\n    super({ writeKey: '' }, { disableClientPersistence: true })\n    this.initialized = true\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAML,qBAAqB,EACrB,gBAAgB,EAChB,oBAAoB,EACpB,oBAAoB,GAErB,MAAM,uBAAuB,CAAA;AAE9B,OAAO,EAAE,SAAS,EAAE,MAAM,eAAe,CAAA;AACzC,OAAO,EAAE,OAAO,EAAE,MAAM,YAAY,CAAA;AACpC,OAAO,EAAE,QAAQ,EAAE,MAAM,yBAAyB,CAAA;AAClD,OAAO,EAAE,OAAO,EAAE,MAAM,kCAAkC,CAAA;AAC1D,OAAO,EAEL,YAAY,GAGb,MAAM,WAAW,CAAA;AAClB,OAAO,EAAE,oCAAoC,EAAU,MAAM,WAAW,CAAA;AACxE,OAAO,EAAE,UAAU,EAAE,MAAM,sBAAsB,CAAA;AACjD,OAAO,EAAE,KAAK,EAAM,IAAI,EAAE,MAAM,SAAS,CAAA;AACzC,OAAO,QAAQ,MAAM,oBAAoB,CAAA;AACzC,OAAO,EAAE,sBAAsB,EAAE,MAAM,oCAAoC,CAAA;AAM3E,OAAO,EAAE,OAAO,EAAE,MAAM,yBAAyB,CAAA;AACjD,OAAO,EAAE,aAAa,EAAE,MAAM,0BAA0B,CAAA;AACxD,OAAO,EAAE,SAAS,EAAE,MAAM,sBAAsB,CAAA;;;;;AAGhD,OAAO,EAEL,aAAa,EACb,gBAAgB,EAChB,SAAS,EACT,kBAAkB,EAClB,kBAAkB,EAClB,kBAAkB,GACnB,MAAM,YAAY,CAAA;AACnB,OAAO,EAAE,kBAAkB,EAAE,MAAM,mCAAmC,CAAA;AACtE,OAAO,EAAE,cAAc,EAAE,MAAM,WAAW,CAAA;AAC1C,OAAO,EACL,eAAe,GAEhB,MAAM,yBAAyB,CAAA;;;;;;;;;;;;;;;;;;;;AAShC,IAAM,kBAAkB,GACtB,0FAA0F,CAAA;AAE5F,oFAAoF;AACpF,IAAM,MAAM,OAAQ,qMAAS,EAAE,CAAA;AAC/B,IAAM,UAAU,GAAG,MAAM,KAAA,QAAN,MAAM,KAAA,KAAA,IAAA,KAAA,IAAN,MAAM,CAAE,SAAS,CAAA;AAEpC,SAAS,kBAAkB,CACzB,IAAY,EACZ,UAAkB,EAClB,kBAA0B;IAD1B,IAAA,eAAA,KAAA,GAAA;QAAA,aAAA,KAAkB;IAAA;IAClB,IAAA,uBAAA,KAAA,GAAA;QAAA,qBAAA,KAA0B;IAAA;IAE1B,IAAM,WAAW,GAAG,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;IACvC,IAAM,aAAa,GAAG,kBAAkB,GACpC,IAAI,+MAAa,CAAC,WAAW,EAAE,EAAE,CAAC,GAClC,IAAI,mOAAsB,CAAC,WAAW,EAAE,IAAI,CAAC,CAAA;IACjD,OAAO,IAAI,iNAAU,CAAC,aAAa,CAAC,CAAA;AACtC,CAAC;AAED;;GAEG,CACH,IAAA,4BAAA;IAiBE,SAAA,0BAAY,QAA2B,EAAE,KAAiB;;QAL1D;;WAEG,CACH,IAAA,CAAA,OAAO,GAAG,GAAG,CAAA;QAGX,IAAI,CAAC,yBAAyB,GAAG;YAAA,IAAA;YAC/B,OAAA,CAAA,KAAA,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,oNAAe,CAAC,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,QAAQ,CAAA;QAAA,CAAA,CAAA;QAC/C,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAA;QAEjC,4GAA4G;QAC5G,sEAAsE;QACtE,IAAM,gBAAgB,GAAgB;YACpC,YAAY,EAAE;gBACZ,YAAY,EAAE;oBACZ,MAAM,EAAE,EAAE;iBACX;aACF;SACF,CAAA;QACD,IAAI,CAAC,WAAW,GAAG,CAAA,KAAA,QAAQ,CAAC,WAAW,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,gBAAgB,CAAA;QAC3D,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAA;IAC/B,CAAC;IA1BD,OAAA,cAAA,CAAI,0BAAA,SAAA,EAAA,SAAO,EAAA;aAAX;;YACE,OAAO,CAAA,KAAA,CAAA,KAAA,IAAI,CAAC,yBAAyB,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAA,IAAA,CAAA,IAAA,CAAI,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,OAAO,CAAA;QACpD,CAAC;;;OAAA;IAyBH,OAAA,yBAAC;AAAD,CAAC,AAlCD,IAkCC;;AAED,2BAAA,EAA6B,CAC7B,SAAS,KAAK;IACZ,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;AAClC,CAAC;AAED,IAAA,YAAA,SAAA,MAAA;QACU,sJAAA,EAAA,WAAA,QAAO;IAef,SAAA,UACE,QAA2B,EAC3B,OAAqB,EACrB,KAAkB,EAClB,IAAW,EACX,KAAa;QALf,IAAA,QAAA,IAAA,CAqDC;;gBA9CC,OAAA,IAAA,CAAA,IAAA,CAAO,IAAA,IAAA;QAfD,MAAA,MAAM,GAAG,KAAK,CAAA;QAGtB,MAAA,WAAW,GAAG,KAAK,CAAA;QA4DnB,MAAA,IAAI,GAAG;YACL,OAAO,KAAI,CAAC,KAAK,CAAA;QACnB,CAAC,CAAA;QA0XD,MAAA,IAAI,GAAG,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAI,CAAC,CAAA;QA+CjC,MAAA,GAAG,GAAG,KAAK,CAAA;QACX,MAAA,wBAAwB,GAAG,KAAK,CAAA;QAChC,MAAA,SAAS,GAAG,KAAK,CAAA;QACjB,MAAA,gBAAgB,GAAG,KAAK,CAAA;QACxB,MAAA,kBAAkB,GAAG,KAAK,CAAA;QAC1B,MAAA,cAAc,GAAG,KAAK,CAAA;QACtB,MAAA,mBAAmB,GAAG,KAAK,CAAA;QAC3B,MAAA,YAAY,GAAG,KAAK,CAAA;QACpB,MAAA,GAAG,GAAG,KAAK,CAAA;QACX,MAAA,cAAc,GAAG,KAAK,CAAA;QAnepB,IAAM,aAAa,GAAG,OAAO,KAAA,QAAP,OAAO,KAAA,KAAA,IAAA,KAAA,IAAP,OAAO,CAAE,MAAM,CAAA;QACrC,IAAM,kBAAkB,GAAG,CAAA,KAAA,OAAO,KAAA,QAAP,OAAO,KAAA,KAAA,IAAA,KAAA,IAAP,OAAO,CAAE,wBAAwB,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,KAAK,CAAA;QAErE,KAAI,CAAC,KAAK,GACR,KAAK,KAAA,QAAL,KAAK,KAAA,KAAA,IAAL,KAAK,GACL,kBAAkB,CAChB,GAAA,MAAA,CAAG,QAAQ,CAAC,QAAQ,EAAA,eAAc,EAClC,OAAO,KAAA,QAAP,OAAO,KAAA,KAAA,IAAA,KAAA,IAAP,OAAO,CAAE,UAAU,EACnB,kBAAkB,CACnB,CAAA;QACH,KAAI,CAAC,QAAQ,GAAG,IAAI,yBAAyB,CAAC,QAAQ,EAAE,KAAI,CAAC,KAAK,CAAC,CAAA;QAEnE,IAAM,cAAc,GAAG,OAAO,KAAA,QAAP,OAAO,KAAA,KAAA,IAAA,KAAA,IAAP,OAAO,CAAE,OAAO,CAAA;QACvC,KAAI,CAAC,iBAAiB,GAAG,KAAI,CAAC,WAAW,CACvC,kBAAkB,EAClB,cAAc,EACd,aAAa,CACd,CAAA;QAED,KAAI,CAAC,KAAK,GACR,IAAI,KAAA,QAAJ,IAAI,KAAA,KAAA,IAAJ,IAAI,GACJ,IAAI,iMAAI,CAAA,IAAA,qJAAA,EAAA;YAEJ,OAAO,EAAE,CAAC,kBAAkB;YAC5B,OAAO,EAAE,OAAO,KAAA,QAAP,OAAO,KAAA,KAAA,IAAA,KAAA,IAAP,OAAO,CAAE,OAAO;QAAA,GAEtB,OAAO,KAAA,QAAP,OAAO,KAAA,KAAA,IAAA,KAAA,IAAP,OAAO,CAAE,IAAI,GAElB,aAAa,CACd,CAAC,IAAI,EAAE,CAAA;QACV,KAAI,CAAC,MAAM,GACT,KAAK,KAAA,QAAL,KAAK,KAAA,KAAA,IAAL,KAAK,GACL,IAAI,kMAAK,CAAA,IAAA,qJAAA,EAAA;YAEL,OAAO,EAAE,CAAC,kBAAkB;YAC5B,OAAO,EAAE,OAAO,KAAA,QAAP,OAAO,KAAA,KAAA,IAAA,KAAA,IAAP,OAAO,CAAE,OAAO;QAAA,GAEtB,OAAO,KAAA,QAAP,OAAO,KAAA,KAAA,IAAA,KAAA,IAAP,OAAO,CAAE,KAAK,GAEnB,aAAa,CACd,CAAC,IAAI,EAAE,CAAA;QACV,KAAI,CAAC,YAAY,GAAG,IAAI,2NAAY,CAAC,KAAI,CAAC,KAAK,CAAC,CAAA;QAChD,KAAI,CAAC,YAAY,GAAG,CAAA,KAAA,OAAO,KAAA,QAAP,OAAO,KAAA,KAAA,IAAA,KAAA,IAAP,OAAO,CAAE,YAAY,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,CAAA,CAAE,CAAA;QAC/C,KAAI,CAAC,OAAO,GAAG,OAAO,KAAA,QAAP,OAAO,KAAA,KAAA,IAAP,OAAO,GAAI,CAAA,CAAE,CAAA;YAC5B,iMAAQ,EAAC,KAAI,CAAC,CAAA;;IAChB,CAAC;IAMD;;;OAGG,CACK,UAAA,SAAA,CAAA,WAAW,GAAnB,SACE,kBAA2B,EAC3B,cAAsC,EACtC,aAAyC;QAEzC,uGAAuG;QACvG,IAAI,kBAAkB,EAAE;YACtB,OAAO,IAAI,2NAAgB,CAAC;gBAAC,IAAI,qNAAa,EAAE;aAAC,CAAC,CAAA;SACnD,MAAM;YACL,IAAI,cAAc,EAAE;gBAClB,QAAI,qNAAkB,EAAC,cAAc,CAAC,EAAE;oBACtC,mEAAmE;oBACnE,OAAO,IAAI,2NAAgB,KACzB,kOAAkB,MAChB,kOAAkB,EAAC,cAAc,CAAC,MAAM,EAAE,aAAa,CAAC,CACzD,CACF,CAAA;iBACF;aACF;SACF;QACD,gDAAgD;QAChD,OAAO,IAAI,2NAAgB,KACzB,kOAAkB,EAAC;YACjB,yMAAS,CAAC,YAAY;YACtB;gBACE,IAAI,EAAE,yMAAS,CAAC,MAAM;gBACtB,QAAQ,EAAE,aAAa;aACxB;YACD,yMAAS,CAAC,MAAM;SACjB,CAAC,CACH,CAAA;IACH,CAAC;IAED,OAAA,cAAA,CAAI,UAAA,SAAA,EAAA,SAAO,EAAA;aAAX;YACE,OAAO,IAAI,CAAC,iBAAiB,CAAA;QAC/B,CAAC;;;OAAA;IAEK,UAAA,SAAA,CAAA,KAAK,GAAX;QAAY,IAAA,OAAA,EAAA,CAAoB;YAApB,IAAA,KAAA,CAAoB,EAApB,KAAA,UAAA,MAAoB,EAApB,IAAoB,CAAA;YAApB,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAoB;;;;;;gBACxB,OAAO,OAAG,6MAAc,EAAC,IAAI,CAAC,CAAA;gBAC9B,KAAyB,8NAAgB,CAAA,KAAA,CAAA,KAAA,GAAI,IAAI,CAAC,EAAjD,IAAI,GAAA,EAAA,CAAA,EAAA,EAAE,IAAI,GAAA,EAAA,CAAA,EAAA,EAAE,IAAI,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAA,CAA6B;gBAElD,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAC1C,IAAI,EACJ,IAAuB,EACvB,IAAI,EACJ,IAAI,CAAC,YAAY,EACjB,OAAO,CACR,CAAA;gBAED,OAAA;oBAAA,EAAA,QAAA;oBAAO,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,SAAC,GAAG;wBAC/C,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,CAAC,KAAK,CAAC,UAAU,EAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;wBACjE,OAAO,GAAG,CAAA;oBACZ,CAAC,CAAC;iBAAA,CAAA;;;KACH;IAEK,UAAA,SAAA,CAAA,IAAI,GAAV;QAAW,IAAA,OAAA,EAAA,CAAmB;YAAnB,IAAA,KAAA,CAAmB,EAAnB,KAAA,UAAA,MAAmB,EAAnB,IAAmB,CAAA;YAAnB,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAmB;;;;;;gBACtB,OAAO,OAAG,6MAAc,EAAC,IAAI,CAAC,CAAA;gBAC9B,KACJ,kOAAoB,CAAA,KAAA,CAAA,KAAA,GAAI,IAAI,CAAC,EADxB,QAAQ,GAAA,EAAA,CAAA,EAAA,EAAE,IAAI,GAAA,EAAA,CAAA,EAAA,EAAE,UAAU,GAAA,EAAA,CAAA,EAAA,EAAE,OAAO,GAAA,EAAA,CAAA,EAAA,EAAE,QAAQ,GAAA,EAAA,CAAA,EAAA,CACrB;gBAEzB,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CACzC,QAAQ,EACR,IAAI,EACJ,UAAU,EACV,OAAO,EACP,IAAI,CAAC,YAAY,EACjB,OAAO,CACR,CAAA;gBAED,OAAA;oBAAA,EAAA,QAAA;oBAAO,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,SAAC,GAAG;wBACrD,KAAI,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,CAAC,KAAK,CAAC,UAAU,EAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;wBAC1E,OAAO,GAAG,CAAA;oBACZ,CAAC,CAAC;iBAAA,CAAA;;;KACH;IAEK,UAAA,SAAA,CAAA,QAAQ,GAAd;QAAe,IAAA,OAAA,EAAA,CAAuB;YAAvB,IAAA,KAAA,CAAuB,EAAvB,KAAA,UAAA,MAAuB,EAAvB,IAAuB,CAAA;YAAvB,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAuB;;;;;;gBAC9B,OAAO,OAAG,6MAAc,EAAC,IAAI,CAAC,CAAA;gBAC9B,SAAmC,kOAAoB,EAAC,IAAI,CAAC,KAAK,CAAC,CAAA,KAAA,CAAA,KAAA,GACpE,IAAI,CACR,EAFM,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,OAAO,GAAA,EAAA,CAAA,EAAA,EAAE,OAAO,GAAA,EAAA,CAAA,EAAA,EAAE,QAAQ,GAAA,EAAA,CAAA,EAAA,CAEpC;gBAED,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,EAAE,OAAO,CAAC,CAAA;gBAC1B,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAC7C,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,EACf,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,EACnB,OAAO,EACP,IAAI,CAAC,YAAY,EACjB,OAAO,CACR,CAAA;gBAED,OAAA;oBAAA,EAAA,QAAA;oBAAO,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,SAAC,GAAG;wBACrD,KAAI,CAAC,IAAI,CACP,UAAU,EACV,GAAG,CAAC,KAAK,CAAC,MAAM,EAChB,GAAG,CAAC,KAAK,CAAC,MAAM,EAChB,GAAG,CAAC,KAAK,CAAC,OAAO,CAClB,CAAA;wBACD,OAAO,GAAG,CAAA;oBACZ,CAAC,CAAC;iBAAA,CAAA;;;KACH;IAID,UAAA,SAAA,CAAA,KAAK,GAAL;QAAA,IAAA,QAAA,IAAA,CA0BC;QA1BK,IAAA,OAAA,EAAA,CAAoB;YAApB,IAAA,KAAA,CAAoB,EAApB,KAAA,UAAA,MAAoB,EAApB,IAAoB,CAAA;YAApB,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAoB;;QACxB,IAAM,OAAO,OAAG,6MAAc,EAAC,IAAI,CAAC,CAAA;QACpC,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;YACrB,OAAO,IAAI,CAAC,MAAM,CAAA;SACnB;QAEK,IAAA,SAAmC,kOAAoB,EAAC,IAAI,CAAC,MAAM,CAAC,CAAA,KAAA,CAAA,KAAA,GACrE,IAAI,CACR,EAFM,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,OAAO,GAAA,EAAA,CAAA,EAAA,EAAE,OAAO,GAAA,EAAA,CAAA,EAAA,EAAE,QAAQ,GAAA,EAAA,CAAA,EAEpC,CAAA;QAED,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE,OAAO,CAAC,CAAA;QACjC,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,CAAA;QAChC,IAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAA;QAExC,IAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAC1C,OAAO,EACP,WAAW,EACX,OAAO,EACP,IAAI,CAAC,YAAY,EACjB,OAAO,CACR,CAAA;QAED,OAAO,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,SAAC,GAAG;YACrD,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;YAC1E,OAAO,GAAG,CAAA;QACZ,CAAC,CAAC,CAAA;IACJ,CAAC;IAEK,UAAA,SAAA,CAAA,KAAK,GAAX;QAAY,IAAA,OAAA,EAAA,CAAoB;YAApB,IAAA,KAAA,CAAoB,EAApB,KAAA,UAAA,MAAoB,EAApB,IAAoB,CAAA;YAApB,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAoB;;;;;;gBACxB,OAAO,OAAG,6MAAc,EAAC,IAAI,CAAC,CAAA;gBAC9B,KAAgC,mOAAqB,CAAA,KAAA,CAAA,KAAA,GAAI,IAAI,CAAC,EAA7D,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,IAAI,GAAA,EAAA,CAAA,EAAA,EAAE,OAAO,GAAA,EAAA,CAAA,EAAA,EAAE,QAAQ,GAAA,EAAA,CAAA,EAAA,CAAkC;gBAC9D,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAC1C,EAAE,EACF,IAAI,EACJ,OAAO,EACP,IAAI,CAAC,YAAY,EACjB,OAAO,CACR,CAAA;gBACD,OAAA;oBAAA,EAAA,QAAA;oBAAO,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,SAAC,GAAG;wBACrD,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;wBAC/C,OAAO,GAAG,CAAA;oBACZ,CAAC,CAAC;iBAAA,CAAA;;;KACH;IAEK,UAAA,SAAA,CAAA,MAAM,GAAZ;QAAa,IAAA,OAAA,EAAA,CAAmB;YAAnB,IAAA,KAAA,CAAmB,EAAnB,KAAA,UAAA,MAAmB,EAAnB,IAAmB,CAAA;YAAnB,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAmB;;;;;;gBACxB,OAAO,OAAG,6MAAc,EAAC,IAAI,CAAC,CAAA;gBAC9B,KACJ,kOAAoB,CAAA,KAAA,CAAA,KAAA,GAAI,IAAI,CAAC,EADxB,QAAQ,GAAA,EAAA,CAAA,EAAA,EAAE,IAAI,GAAA,EAAA,CAAA,EAAA,EAAE,UAAU,GAAA,EAAA,CAAA,EAAA,EAAE,OAAO,GAAA,EAAA,CAAA,EAAA,EAAE,QAAQ,GAAA,EAAA,CAAA,EAAA,CACrB;gBAEzB,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAC3C,QAAQ,EACR,IAAI,EACJ,UAAU,EACV,OAAO,EACP,IAAI,CAAC,YAAY,EACjB,OAAO,CACR,CAAA;gBACD,OAAA;oBAAA,EAAA,QAAA;oBAAO,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,SAAC,GAAG;wBACrD,KAAI,CAAC,IAAI,CACP,QAAQ,EACR,QAAQ,EACR,IAAI,EACJ,GAAG,CAAC,KAAK,CAAC,UAAU,EACpB,GAAG,CAAC,KAAK,CAAC,OAAO,CAClB,CAAA;wBACD,OAAO,GAAG,CAAA;oBACZ,CAAC,CAAC;iBAAA,CAAA;;;KACH;IAEK,UAAA,SAAA,CAAA,UAAU,GAAhB;QAAiB,IAAA,OAAA,EAAA,CAAiB;YAAjB,IAAA,KAAA,CAAiB,EAAjB,KAAA,UAAA,MAAiB,EAAjB,IAAiB,CAAA;YAAjB,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAiB;;;;;;;;wBACd,OAAA;4BAAA,EAAA,OAAA,IAAM,MAAM;;yBAE7B,CAAA;;wBAFK,SAAS,GAAG,GAAA,IAAA,EAEjB;wBACD,OAAA;4BAAA,EAAA,QAAA;4BAAO,CAAA,KAAA,SAAS,CAAC,IAAI,CAAA,CAAC,IAAI,CAAA,KAAA,CAAA,IAAA,IAAA,0JAAA,EAAA;gCAAC,IAAI;6BAAA,EAAK,IAAI,EAAA;yBAAA,CAAC;;;;KAC1C;IAEK,UAAA,SAAA,CAAA,SAAS,GAAf;QAAgB,IAAA,OAAA,EAAA,CAAiB;YAAjB,IAAA,KAAA,CAAiB,EAAjB,KAAA,UAAA,MAAiB,EAAjB,IAAiB,CAAA;YAAjB,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAiB;;;;;;;;wBACb,OAAA;4BAAA,EAAA,OAAA,IAAM,MAAM;;yBAE7B,CAAA;;wBAFK,SAAS,GAAG,GAAA,IAAA,EAEjB;wBACD,OAAA;4BAAA,EAAA,QAAA;4BAAO,CAAA,KAAA,SAAS,CAAC,IAAI,CAAA,CAAC,IAAI,CAAA,KAAA,CAAA,IAAA,IAAA,0JAAA,EAAA;gCAAC,IAAI;6BAAA,EAAK,IAAI,EAAA;yBAAA,CAAC;;;;KAC1C;IAEK,UAAA,SAAA,CAAA,WAAW,GAAjB;QAAkB,IAAA,OAAA,EAAA,CAAiB;YAAjB,IAAA,KAAA,CAAiB,EAAjB,KAAA,UAAA,MAAiB,EAAjB,IAAiB,CAAA;YAAjB,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAiB;;;;;;;;wBACf,OAAA;4BAAA,EAAA,OAAA,IAAM,MAAM;;yBAE7B,CAAA;;wBAFK,SAAS,GAAG,GAAA,IAAA,EAEjB;wBACD,OAAA;4BAAA,EAAA,QAAA;4BAAO,CAAA,KAAA,SAAS,CAAC,IAAI,CAAA,CAAC,IAAI,CAAA,KAAA,CAAA,IAAA,IAAA,0JAAA,EAAA;gCAAC,IAAI;6BAAA,EAAK,IAAI,EAAA;yBAAA,CAAC;;;;KAC1C;IAEK,UAAA,SAAA,CAAA,SAAS,GAAf;QAAgB,IAAA,OAAA,EAAA,CAAiB;YAAjB,IAAA,KAAA,CAAiB,EAAjB,KAAA,UAAA,MAAiB,EAAjB,IAAiB,CAAA;YAAjB,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAiB;;;;;;;;wBACb,OAAA;4BAAA,EAAA,OAAA,IAAM,MAAM;;yBAE7B,CAAA;;wBAFK,SAAS,GAAG,GAAA,IAAA,EAEjB;wBACD,OAAA;4BAAA,EAAA,QAAA;4BAAO,CAAA,KAAA,SAAS,CAAC,IAAI,CAAA,CAAC,IAAI,CAAA,KAAA,CAAA,IAAA,IAAA,0JAAA,EAAA;gCAAC,IAAI;6BAAA,EAAK,IAAI,EAAA;yBAAA,CAAC;;;;KAC1C;IAEK,UAAA,SAAA,CAAA,QAAQ,GAAd;QAAe,IAAA,UAAA,EAAA,CAAoB;YAApB,IAAA,KAAA,CAAoB,EAApB,KAAA,UAAA,MAAoB,EAApB,IAAoB,CAAA;YAApB,OAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAoB;;;;;;;;wBAC3B,GAAG,GAAG,uNAAO,CAAC,MAAM,EAAE,CAAA;wBAEtB,aAAa,GAAG,OAAO,CAAC,GAAG,CAAC,SAAC,EAAE;4BACnC,OAAA,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,EAAE,KAAI,CAAC;wBAAlC,CAAkC,CACnC,CAAA;wBACD,OAAA;4BAAA,EAAA,OAAA;4BAAM,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC;yBAAA,CAAA;;wBAAhC,GAAA,IAAA,EAAgC,CAAA;wBAEhC,OAAA;4BAAA,EAAA,QAAA;4BAAO,GAAG;yBAAA,CAAA;;;;KACX;IAEK,UAAA,SAAA,CAAA,UAAU,GAAhB;QAAiB,IAAA,UAAA,EAAA,CAAoB;YAApB,IAAA,KAAA,CAAoB,EAApB,KAAA,UAAA,MAAoB,EAApB,IAAoB,CAAA;YAApB,OAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAoB;;;;;;;;wBAC7B,GAAG,GAAG,uNAAO,CAAC,MAAM,EAAE,CAAA;wBAEtB,eAAe,GAAG,OAAO,CAAC,GAAG,CAAC,SAAC,EAAE;4BACrC,IAAM,MAAM,GAAG,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,SAAC,CAAC;gCAAK,OAAA,CAAC,CAAC,IAAI,KAAK,EAAE;4BAAb,CAAa,CAAC,CAAA;4BAC5D,IAAI,MAAM,EAAE;gCACV,OAAO,KAAI,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,EAAE,MAAM,EAAE,KAAI,CAAC,CAAA;6BAChD,MAAM;gCACL,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,UAAA,MAAA,CAAU,EAAE,EAAA,aAAY,CAAC,CAAA;6BAC1C;wBACH,CAAC,CAAC,CAAA;wBAEF,OAAA;4BAAA,EAAA,OAAA;4BAAM,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC;yBAAA,CAAA;;wBAAlC,GAAA,IAAA,EAAkC,CAAA;wBAElC,OAAA;4BAAA,EAAA,QAAA;4BAAO,GAAG;yBAAA,CAAA;;;;KACX;IAED,UAAA,SAAA,CAAA,KAAK,GAAL,SAAM,MAAe;QACnB,iFAAiF;QACjF,IAAI,MAAM,KAAK,KAAK,IAAI,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YACrD,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,CAAA;SACjC;QACD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QACpB,OAAO,IAAI,CAAA;IACb,CAAC;IAED,UAAA,SAAA,CAAA,KAAK,GAAL;QACE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAA;QAClB,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAA;QACnB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;IACpB,CAAC;IAED,UAAA,SAAA,CAAA,OAAO,GAAP,SAAQ,OAAe;QACrB,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,OAAO,CAAA;IACjC,CAAC;IAEa,UAAA,SAAA,CAAA,SAAS,GAAvB,SACE,KAAmB,EACnB,QAAmB;;;;gBAEb,GAAG,GAAG,IAAI,uNAAO,CAAC,KAAK,CAAC,CAAA;gBAC9B,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,qBAAqB,EAAE,CAAC,EAAE;oBAAC,KAAK,CAAC,IAAI;iBAAC,CAAC,CAAA;gBAC3D,QAAI,4MAAS,EAAE,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;oBAC3C,OAAA;wBAAA,EAAA,QAAA;wBAAO,GAAG;qBAAA,CAAA;iBACX;gBACD,OAAA;oBAAA,EAAA,QAAA;wBAAO,qMAAQ,EAAC,GAAG,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE;wBACrC,QAAQ,EAAA,QAAA;wBACR,KAAK,EAAE,IAAI,CAAC,MAAM;wBAClB,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO;qBAC/B,CAAC;iBAAA,CAAA;;;KACH;IAEK,UAAA,SAAA,CAAA,mBAAmB,GAAzB,SAA0B,EAAsB;;;;;;wBAC9C,OAAA;4BAAA,EAAA,OAAA;4BAAM,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,GAAG,CAAC;gCAAA,OAAA,IAAA,sJAAA,EAAA,OAAA,KAAA,GAAA,KAAA,GAAA;;;;;gDACE,OAAA;oDAAA,EAAA,OAAA,IAAM,MAAM;;iDAE9C,CAAA;;gDAFO,sBAAsB,GAAK,GAAA,IAAA,EAElC,CAAA,sBAF6B;gDAIxB,YAAY,GAA4B,CAAA,CAAE,CAAA;gDAChD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,SAAC,MAAM;oDAChC,IAAI,MAAM,CAAC,IAAI,KAAK,aAAa,EAAE;wDACjC,OAAO,AAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAA;qDAC1C;gDACH,CAAC,CAAC,CAAA;gDAEI,MAAM,GAAG,sBAAsB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAA;gDACvD,OAAA;oDAAA,EAAA,OAAA;oDAAM,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;iDAAA,CAAA;;gDAA3B,GAAA,IAAA,EAA2B,CAAA;;;;;;;6BAC5B,CAAC;yBAAA,CAAA;;wBAdF,GAAA,IAAA,EAcE,CAAA;wBAEF,OAAA;4BAAA,EAAA,QAAA;4BAAO,IAAI;yBAAA,CAAA;;;;KACZ;IAED,iDAAA,EAAmD,CACnD,UAAA,SAAA,CAAA,wBAAwB,GAAxB,SACE,eAAuB;QACvB,IAAA,cAAA,EAAA,CAA+C;YAA/C,IAAA,KAAA,CAA+C,EAA/C,KAAA,UAAA,MAA+C,EAA/C,IAA+C,CAAA;YAA/C,WAAA,CAAA,KAAA,EAAA,GAAA,SAAA,CAAA,GAAA,CAA+C;;QAE/C,IAAI,CAAC,KAAK,CAAC,OAAO,CACf,MAAM,CAAC,mOAAoC,CAAC,CAC5C,OAAO,CAAC,SAAC,CAAC;YACT,IACE,eAAe,KAAK,GAAG,IACvB,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,eAAe,CAAC,WAAW,EAAE,EACtD;gBACA,CAAC,CAAC,aAAa,CAAA,KAAA,CAAf,CAAC,EAAkB,WAAW,EAAC;aAChC;QACH,CAAC,CAAC,CAAA;QAEJ,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;IAC9B,CAAC;IAED,UAAA,SAAA,CAAA,cAAc,GAAd,SAAe,EAAW;QACxB,OAAO,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,EAAE,CAAC,CAAA;IACnC,CAAC;IAEK,UAAA,SAAA,CAAA,WAAW,GAAjB,SAAkB,KAAa;;;;;;wBAC7B,IAAI,IAAI,CAAC,OAAO,CAAC,cAAc,KAAK,KAAK,EAAE;4BACzC,OAAA;gCAAA,EAAA,QAAA;gCAAO,EAAE;6BAAA,CAAA;yBACV;wBAEuB,OAAA;4BAAA,EAAA,OAAA,IAAM,MAAM;;yBAEnC,CAAA;;wBAFO,WAAW,GAAK,GAAA,IAAA,EAEvB,CAAA,WAFkB;wBAGnB,OAAA;4BAAA,EAAA,QAAA;4BAAO,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC;yBAAA,CAAA;;;;KAChC;IAED;;;;;;;OAOG,CACH,UAAA,SAAA,CAAA,GAAG,GAAH,SAAI,mBAAmD;QACrD,mBAAmB,CAAC,IAAI,CAAC,CAAA;QACzB,OAAO,IAAI,CAAA;IACb,CAAC;IAEK,UAAA,SAAA,CAAA,KAAK,GAAX,SACE,QAAyE;QAAzE,IAAA,aAAA,KAAA,GAAA;YAAA,WAAA,SAAsB,GAAuB;gBAAyB,OAAA,GAAG;YAAH,CAAG;QAAA;;;gBAEzE,OAAA;oBAAA,EAAA,QAAA;oBAAO,OAAO,CAAC,GAAG,CAChB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,SAAC,CAAC;wBAAK,OAAA,AAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;oBAAzC,CAAyC,CAAC,CACzE,CAAC,IAAI,CAAC,SAAC,GAAG;wBACT,QAAQ,CAAC,GAAG,CAAC,CAAA;wBACb,OAAO,GAAG,CAAA;oBACZ,CAAC,CAAC;iBAAA,CAAA;;;KACH;IAED,wBAAwB;IAExB,UAAA,SAAA,CAAA,UAAU,GAAV;QACE,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;YAChC,8NAAkB,EAAC,UAAU,KAAA,QAAV,UAAU,KAAA,KAAA,IAAV,UAAU,GAAI,IAAI,CAAC,CAAA;QACtC,OAAO,IAAI,CAAA;IACb,CAAC;IAED,UAAA,SAAA,CAAA,SAAS,GAAT,SAAU,GAAiB;QACzB,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;QAChC,OAAO,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,CAAA;IAC5C,CAAC;IAED,OAAA,cAAA,CAAI,UAAA,SAAA,EAAA,uBAAqB,EAAA;aAAzB;YACE,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;YAChC,OAAO,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAA;QACzC,CAAC;;;OAAA;IAED,OAAA,cAAA,CAAI,UAAA,SAAA,EAAA,SAAO,EAAA;aAAX;YACE,OAAO,mMAAO,CAAA;QAChB,CAAC;;;OAAA;IAED,sBAAA,EAAwB,CAClB,UAAA,SAAA,CAAA,UAAU,GAAhB,SACE,SAA6B,EAC7B,QAAsB;;;gBAEtB,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;gBAChC,OAAA;oBAAA,EAAA,QAAA;oBAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC;iBAAA,CAAA;;;KAC7B;IAIK,UAAA,SAAA,CAAA,QAAQ,GAAd,SAAe,GAAW;;;;;wBACxB,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;wBAChC,OAAA;4BAAA,EAAA,OAAA;4BAAM,IAAI,CAAC,IAAI,CAAC;gCAAE,IAAI,EAAE,GAAG;4BAAA,CAAE,CAAC;yBAAA,CAAA;;wBAA9B,GAAA,IAAA,EAA8B,CAAA;wBAC9B,OAAA;4BAAA,EAAA,QAAA;4BAAO,IAAI;yBAAA,CAAA;;;;KACZ;IAED,OAAA,cAAA,CAAI,UAAA,SAAA,EAAA,SAAO,EAAA;aAAX;;YACE,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;YAChC,mBAAmB;YACnB,OAAO,CAAA,KAAA,IAAI,CAAC,QAAQ,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,CAAA,CAAE,CAAA;QAC5B,CAAC;;;OAAA;IAED,OAAA,cAAA,CAAI,UAAA,SAAA,EAAA,cAAY,EAAA;aAAhB;YACE,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAA;YAChC,IAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CACpC,MAAM,CAAC,SAAC,MAAM;gBAAK,OAAA,MAAM,CAAC,IAAI,KAAK,aAAa;YAA7B,CAA6B,CAAC,CACjD,MAAM,CAAC,SAAC,GAAG,EAAE,MAAM;gBAClB,IAAM,IAAI,GAAG,GAAA,MAAA,CAAG,MAAM,CAAC,IAAI,CACxB,WAAW,EAAE,CACb,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAChB,KAAK,CAAC,GAAG,CAAC,CACV,IAAI,CAAC,GAAG,CAAC,EAAA,cAAa,CAAA;gBAEzB,mBAAmB;gBACnB,IAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAElB,CAAA;gBAEb,IAAI,CAAC,WAAW,EAAE;oBAChB,OAAO,GAAG,CAAA;iBACX;gBAED,IAAM,MAAM,GAAG,WAAW,CAAC,WAAW,CAAA,CAAC,sEAAsE;gBAC7G,IAAI,MAAM,EAAE;oBACV,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAA;oBACzB,OAAO,GAAG,CAAA;iBACX;gBAED,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,WAAgC,CAAA;gBACnD,OAAO,GAAG,CAAA;YACZ,CAAC,EAAE,CAAA,CAAuC,CAAC,CAAA;YAE7C,OAAO,YAAY,CAAA;QACrB,CAAC;;;OAAA;IAaD,mBAAmB;IACnB,8DAA8D;IAC9D,UAAA,SAAA,CAAA,IAAI,GAAJ,SAAK,IAAW;QACd,8DAA8D;QAC9D,IAAM,EAAE,GAAG,IAAW,CAAA;QACtB,IAAM,MAAM,GAAG,IAAI,CAAC,KAAK,EAAE,CAAA;QAC3B,IAAI,MAAM,EAAE;YACV,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,OAAM;SACxB;QACD,EAAE,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;IAC9B,CAAC;IACH,OAAA,SAAC;AAAD,CAAC,AAxgBD,CACU,6MAAO,GAugBhB;;AAED;;GAEG,CACH,IAAA,gBAAA,SAAA,MAAA;QAAmC,sJAAA,EAAA,eAAA,QAAS;IAC1C,SAAA;QAAA,IAAA,QACE,OAAA,IAAA,CAAA,IAAA,EAAM;YAAE,QAAQ,EAAE,EAAE;QAAA,CAAE,EAAE;YAAE,wBAAwB,EAAE,IAAI;QAAA,CAAE,CAAC,IAAA,IAAA,CAE5D;QADC,KAAI,CAAC,WAAW,GAAG,IAAI,CAAA;;IACzB,CAAC;IACH,OAAA,aAAC;AAAD,CAAC,AALD,CAAmC,SAAS,GAK3C"}},
    {"offset": {"line": 3485, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/merged-options.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/merged-options.ts"],"sourcesContent":["import { Options } from '../core/events/interfaces'\nimport { CDNSettings } from '../browser'\n\n/**\n * Merge legacy settings and initialized Integration option overrides.\n *\n * This will merge any options that were passed from initialization into\n * overrides for settings that are returned by the Segment CDN.\n *\n * i.e. this allows for passing options directly into destinations from\n * the Analytics constructor.\n */\nexport function mergedOptions(\n  cdnSettings: CDNSettings,\n  options: Options\n): Record<string, any> {\n  const optionOverrides = Object.entries(options.integrations ?? {}).reduce(\n    (overrides, [integration, options]) => {\n      if (typeof options === 'object') {\n        return {\n          ...overrides,\n          [integration]: options,\n        }\n      }\n\n      return {\n        ...overrides,\n        [integration]: {},\n      }\n    },\n    {} as Record<string, any>\n  )\n\n  return Object.entries(cdnSettings.integrations).reduce(\n    (integrationSettings, [integration, settings]) => {\n      return {\n        ...integrationSettings,\n        [integration]: {\n          ...settings,\n          ...optionOverrides[integration],\n        },\n      }\n    },\n    {} as Record<string, any>\n  )\n}\n"],"names":[],"mappings":";;;;;;AAYM,SAAU,aAAa,CAC3B,WAAwB,EACxB,OAAgB;;IAEhB,IAAM,eAAe,GAAG,MAAM,CAAC,OAAO,CAAC,CAAA,KAAA,OAAO,CAAC,YAAY,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,CAAA,CAAE,CAAC,CAAC,MAAM,CACvE,SAAC,SAAS,EAAE,EAAsB;;YAArB,WAAW,GAAA,EAAA,CAAA,EAAA,EAAE,OAAO,GAAA,EAAA,CAAA,EAAA;QAC/B,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;YAC/B,OAAA,IAAA,qJAAA,EAAA,IAAA,qJAAA,EAAA,CAAA,GACK,SAAS,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CACX,WAAW,CAAA,GAAG,OAAO,EAAA,EAAA,GACvB;SACF;QAED,OAAA,IAAA,qJAAA,EAAA,IAAA,qJAAA,EAAA,CAAA,GACK,SAAS,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CACX,WAAW,CAAA,GAAG,CAAA,CAAE,EAAA,EAAA,GAClB;IACH,CAAC,EACD,CAAA,CAAyB,CAC1B,CAAA;IAED,OAAO,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,MAAM,CACpD,SAAC,mBAAmB,EAAE,EAAuB;;YAAtB,WAAW,GAAA,EAAA,CAAA,EAAA,EAAE,QAAQ,GAAA,EAAA,CAAA,EAAA;QAC1C,OAAA,IAAA,qJAAA,EAAA,IAAA,qJAAA,EAAA,CAAA,GACK,mBAAmB,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CACrB,WAAW,CAAA,GAAA,IAAA,qJAAA,EAAA,IAAA,qJAAA,EAAA,CAAA,GACP,QAAQ,GACR,eAAe,CAAC,WAAW,CAAC,GAAA,EAAA,GAElC;IACH,CAAC,EACD,CAAA,CAAyB,CAC1B,CAAA;AACH,CAAC"}},
    {"offset": {"line": 3511, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/query-string/gracefulDecodeURIComponent.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/query-string/gracefulDecodeURIComponent.ts"],"sourcesContent":["/**\n * Tries to gets the unencoded version of an encoded component of a\n * Uniform Resource Identifier (URI). If input string is malformed,\n * returns it back as-is.\n *\n * Note: All occurences of the `+` character become ` ` (spaces).\n **/\nexport function gracefulDecodeURIComponent(\n  encodedURIComponent: string\n): string {\n  try {\n    return decodeURIComponent(encodedURIComponent.replace(/\\+/g, ' '))\n  } catch {\n    return encodedURIComponent\n  }\n}\n"],"names":[],"mappings":"AAAA;;;;;;IAMI;;;;AACE,SAAU,0BAA0B,CACxC,mBAA2B;IAE3B,IAAI;QACF,OAAO,kBAAkB,CAAC,mBAAmB,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAA;KACnE,CAAC,OAAA,IAAM;QACN,OAAO,mBAAmB,CAAA;KAC3B;AACH,CAAC"}},
    {"offset": {"line": 3532, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/client-hints/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/client-hints/index.ts"],"sourcesContent":["import { HighEntropyHint, NavigatorUAData, UADataValues } from './interfaces'\n\nexport async function clientHints(\n  hints?: HighEntropyHint[]\n): Promise<UADataValues | undefined> {\n  const userAgentData = (navigator as any).userAgentData as\n    | NavigatorUAData\n    | undefined\n\n  if (!userAgentData) return undefined\n\n  if (!hints) return userAgentData.toJSON()\n  return userAgentData\n    .getHighEntropyValues(hints)\n    .catch(() => userAgentData.toJSON())\n}\n"],"names":[],"mappings":";;;;;;AAEM,SAAgB,WAAW,CAC/B,KAAyB;;;;YAEnB,aAAa,GAAI,SAAiB,CAAC,aAE5B,CAAA;YAEb,IAAI,CAAC,aAAa,EAAE,OAAA;gBAAA,EAAA,QAAA;gBAAO,SAAS;aAAA,CAAA;YAEpC,IAAI,CAAC,KAAK,EAAE,OAAA;gBAAA,EAAA,QAAA;gBAAO,aAAa,CAAC,MAAM,EAAE;aAAA,CAAA;YACzC,OAAA;gBAAA,EAAA,QAAA;gBAAO,aAAa,CACjB,oBAAoB,CAAC,KAAK,CAAC,CAC3B,KAAK,CAAC;oBAAM,OAAA,aAAa,CAAC,MAAM,EAAE;gBAAtB,CAAsB,CAAC;aAAA,CAAA;;;CACvC"}},
    {"offset": {"line": 3564, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/env-enrichment/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/env-enrichment/index.ts"],"sourcesContent":["import jar from 'js-cookie'\nimport type { Context } from '../../core/context'\nimport type { Plugin } from '../../core/plugin'\nimport { version } from '../../generated/version'\nimport { SegmentEvent } from '../../core/events'\nimport { Campaign, PluginType } from '@segment/analytics-core'\nimport { getVersionType } from '../../lib/version-type'\nimport { tld } from '../../core/user/tld'\nimport { gracefulDecodeURIComponent } from '../../core/query-string/gracefulDecodeURIComponent'\nimport { CookieStorage, UniversalStorage } from '../../core/storage'\nimport { Analytics } from '../../core/analytics'\nimport { clientHints } from '../../lib/client-hints'\nimport { UADataValues } from '../../lib/client-hints/interfaces'\n\nlet cookieOptions: jar.CookieAttributes | undefined\nfunction getCookieOptions(): jar.CookieAttributes {\n  if (cookieOptions) {\n    return cookieOptions\n  }\n\n  const domain = tld(window.location.href)\n  cookieOptions = {\n    expires: 31536000000, // 1 year\n    secure: false,\n    path: '/',\n  }\n  if (domain) {\n    cookieOptions.domain = domain\n  }\n\n  return cookieOptions\n}\n\ntype Ad = { id: string; type: string }\n\nfunction ads(query: string): Ad | undefined {\n  const queryIds: Record<string, string> = {\n    btid: 'dataxu',\n    urid: 'millennial-media',\n  }\n\n  if (query.startsWith('?')) {\n    query = query.substring(1)\n  }\n  query = query.replace(/\\?/g, '&')\n  const parts = query.split('&')\n\n  for (const part of parts) {\n    const [k, v] = part.split('=')\n    if (queryIds[k]) {\n      return {\n        id: v,\n        type: queryIds[k],\n      }\n    }\n  }\n}\n\nexport function utm(query: string): Campaign {\n  if (query.startsWith('?')) {\n    query = query.substring(1)\n  }\n  query = query.replace(/\\?/g, '&')\n\n  return query.split('&').reduce((acc, str) => {\n    const [k, v = ''] = str.split('=')\n    if (k.includes('utm_') && k.length > 4) {\n      let utmParam = k.slice(4) as keyof Campaign\n      if (utmParam === 'campaign') {\n        utmParam = 'name'\n      }\n      acc[utmParam] = gracefulDecodeURIComponent(v)\n    }\n    return acc\n  }, {} as Campaign)\n}\n\nexport function ampId(): string | undefined {\n  const ampId = jar.get('_ga')\n  if (ampId && ampId.startsWith('amp')) {\n    return ampId\n  }\n}\n\nfunction referrerId(\n  query: string,\n  ctx: SegmentEvent['context'],\n  disablePersistance: boolean\n): void {\n  const storage = new UniversalStorage<{\n    's:context.referrer': Ad\n  }>(disablePersistance ? [] : [new CookieStorage(getCookieOptions())])\n\n  const stored = storage.get('s:context.referrer')\n\n  const ad = ads(query) ?? stored\n\n  if (!ad) {\n    return\n  }\n\n  if (ctx) {\n    ctx.referrer = { ...ctx.referrer, ...ad }\n  }\n\n  storage.set('s:context.referrer', ad)\n}\n\n/**\n *\n * @param obj e.g. { foo: 'b', bar: 'd', baz: ['123', '456']}\n * @returns e.g. 'foo=b&bar=d&baz=123&baz=456'\n */\nconst objectToQueryString = (\n  obj: Record<string, string | string[]>\n): string => {\n  try {\n    const searchParams = new URLSearchParams()\n    Object.entries(obj).forEach(([k, v]) => {\n      if (Array.isArray(v)) {\n        v.forEach((value) => searchParams.append(k, value))\n      } else {\n        searchParams.append(k, v)\n      }\n    })\n    return searchParams.toString()\n  } catch {\n    return ''\n  }\n}\n\nclass EnvironmentEnrichmentPlugin implements Plugin {\n  private instance!: Analytics\n  private userAgentData: UADataValues | undefined\n\n  name = 'Page Enrichment'\n  type: PluginType = 'before'\n  version = '0.1.0'\n  isLoaded = () => true\n  load = async (_ctx: Context, instance: Analytics) => {\n    this.instance = instance\n    try {\n      this.userAgentData = await clientHints(\n        this.instance.options.highEntropyValuesClientHints\n      )\n    } catch (_) {\n      // if client hints API doesn't return anything leave undefined\n    }\n    return Promise.resolve()\n  }\n\n  private enrich = (ctx: Context): Context => {\n    // Note: Types are off - context should never be undefined here, since it is set as part of event creation.\n    const evtCtx = ctx.event.context!\n\n    const search = evtCtx.page!.search || ''\n\n    const query =\n      typeof search === 'object' ? objectToQueryString(search) : search\n\n    evtCtx.userAgent = navigator.userAgent\n    evtCtx.userAgentData = this.userAgentData\n\n    // @ts-ignore\n    const locale = navigator.userLanguage || navigator.language\n\n    if (typeof evtCtx.locale === 'undefined' && typeof locale !== 'undefined') {\n      evtCtx.locale = locale\n    }\n\n    evtCtx.library ??= {\n      name: 'analytics.js',\n      version: `${getVersionType() === 'web' ? 'next' : 'npm:next'}-${version}`,\n    }\n\n    if (query && !evtCtx.campaign) {\n      evtCtx.campaign = utm(query)\n    }\n\n    const amp = ampId()\n    if (amp) {\n      evtCtx.amp = { id: amp }\n    }\n\n    referrerId(\n      query,\n      evtCtx,\n      this.instance.options.disableClientPersistence ?? false\n    )\n\n    try {\n      evtCtx.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone\n    } catch (_) {\n      // If browser doesn't have support leave timezone undefined\n    }\n\n    return ctx\n  }\n\n  track = this.enrich\n  identify = this.enrich\n  page = this.enrich\n  group = this.enrich\n  alias = this.enrich\n  screen = this.enrich\n}\n\nexport const envEnrichment = new EnvironmentEnrichmentPlugin()\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3784, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/load-script.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/load-script.ts"],"sourcesContent":["function findScript(src: string): HTMLScriptElement | undefined {\n  const scripts = Array.prototype.slice.call(\n    window.document.querySelectorAll('script')\n  )\n  return scripts.find((s) => s.src === src)\n}\n\n/**\n * Load a script from a URL and append it to the document.\n */\nexport function loadScript(\n  src: string,\n  attributes?: Record<string, string>\n): Promise<HTMLScriptElement> {\n  const found = findScript(src)\n\n  if (found !== undefined) {\n    const status = found?.getAttribute('status')\n\n    if (status === 'loaded') {\n      return Promise.resolve(found)\n    }\n\n    if (status === 'loading') {\n      return new Promise((resolve, reject) => {\n        found.addEventListener('load', () => resolve(found))\n        found.addEventListener('error', (err) => reject(err))\n      })\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    const script = window.document.createElement('script')\n\n    script.type = 'text/javascript'\n    script.src = src\n    script.async = true\n\n    script.setAttribute('status', 'loading')\n    for (const [k, v] of Object.entries(attributes ?? {})) {\n      script.setAttribute(k, v)\n    }\n\n    script.onload = (): void => {\n      script.onerror = script.onload = null\n      script.setAttribute('status', 'loaded')\n      resolve(script)\n    }\n\n    script.onerror = (): void => {\n      script.onerror = script.onload = null\n      script.setAttribute('status', 'error')\n      reject(new Error(`Failed to load ${src}`))\n    }\n\n    const firstExistingScript = window.document.querySelector('script')\n    if (!firstExistingScript) {\n      window.document.head.appendChild(script)\n    } else {\n      firstExistingScript.parentElement?.insertBefore(\n        script,\n        firstExistingScript\n      )\n    }\n  })\n}\n\nexport function unloadScript(src: string): Promise<void> {\n  const found = findScript(src)\n\n  if (found !== undefined) {\n    found.remove()\n  }\n\n  return Promise.resolve()\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3854, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/middleware/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/middleware/index.ts"],"sourcesContent":["import { Context, ContextCancelation } from '../../core/context'\nimport { SegmentEvent } from '../../core/events'\nimport { Plugin } from '../../core/plugin'\nimport { SegmentFacade, toFacade } from '../../lib/to-facade'\n\nexport interface MiddlewareParams {\n  payload: SegmentFacade\n\n  integrations?: SegmentEvent['integrations']\n  next: (payload: MiddlewareParams['payload'] | null) => void\n}\n\nexport interface DestinationMiddlewareParams {\n  payload: SegmentFacade\n  integration: string\n  next: (payload: MiddlewareParams['payload'] | null) => void\n}\n\nexport type MiddlewareFunction = (\n  middleware: MiddlewareParams\n) => void | Promise<void>\n\nexport type DestinationMiddlewareFunction = (\n  middleware: DestinationMiddlewareParams\n) => void | Promise<void>\n\nexport async function applyDestinationMiddleware(\n  destination: string,\n  evt: SegmentEvent,\n  middleware: DestinationMiddlewareFunction[]\n): Promise<SegmentEvent | null> {\n  // Clone the event so mutations are localized to a single destination.\n  let modifiedEvent = toFacade(evt, {\n    clone: true,\n    traverse: false,\n  }).rawEvent() as SegmentEvent\n  async function applyMiddleware(\n    event: SegmentEvent,\n    fn: DestinationMiddlewareFunction\n  ): Promise<SegmentEvent | null> {\n    let nextCalled = false\n    let returnedEvent: SegmentEvent | null = null\n\n    await fn({\n      payload: toFacade(event, {\n        clone: true,\n        traverse: false,\n      }),\n      integration: destination,\n      next(evt) {\n        nextCalled = true\n\n        if (evt === null) {\n          returnedEvent = null\n        }\n\n        if (evt) {\n          returnedEvent = evt.obj\n        }\n      },\n    })\n\n    if (!nextCalled && returnedEvent !== null) {\n      returnedEvent = returnedEvent as SegmentEvent\n      returnedEvent.integrations = {\n        ...event.integrations,\n        [destination]: false,\n      }\n    }\n\n    return returnedEvent\n  }\n\n  for (const md of middleware) {\n    const result = await applyMiddleware(modifiedEvent, md)\n    if (result === null) {\n      return null\n    }\n    modifiedEvent = result\n  }\n\n  return modifiedEvent\n}\n\nexport function sourceMiddlewarePlugin(\n  fn: MiddlewareFunction,\n  integrations: SegmentEvent['integrations']\n): Plugin {\n  async function apply(ctx: Context): Promise<Context> {\n    let nextCalled = false\n\n    await fn({\n      payload: toFacade(ctx.event, {\n        clone: true,\n        traverse: false,\n      }),\n      integrations: integrations ?? {},\n      next(evt) {\n        nextCalled = true\n        if (evt) {\n          ctx.event = evt.obj\n        }\n      },\n    })\n\n    if (!nextCalled) {\n      throw new ContextCancelation({\n        retry: false,\n        type: 'middleware_cancellation',\n        reason: 'Middleware `next` function skipped',\n      })\n    }\n\n    return ctx\n  }\n\n  return {\n    name: `Source Middleware ${fn.name}`,\n    type: 'before',\n    version: '0.1.0',\n\n    isLoaded: (): boolean => true,\n    load: (ctx): Promise<Context> => Promise.resolve(ctx),\n\n    track: apply,\n    page: apply,\n    screen: apply,\n    identify: apply,\n    alias: apply,\n    group: apply,\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4018, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/stats/metric-helpers.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/stats/metric-helpers.ts"],"sourcesContent":["import { Context } from '../context'\n\nexport interface RecordIntegrationMetricProps {\n  integrationName: string\n  methodName: string\n  didError?: boolean\n  type: 'classic' | 'action'\n}\n\nexport function recordIntegrationMetric(\n  ctx: Context,\n  {\n    methodName,\n    integrationName,\n    type,\n    didError = false,\n  }: RecordIntegrationMetricProps\n): void {\n  ctx.stats.increment(\n    `analytics_js.integration.invoke${didError ? '.error' : ''}`,\n    1,\n    [\n      `method:${methodName}`,\n      `integration_name:${integrationName}`,\n      `type:${type}`,\n    ]\n  )\n}\n"],"names":[],"mappings":";;;;AASM,SAAU,uBAAuB,CACrC,GAAY,EACZ,EAK+B;QAJ7B,UAAU,GAAA,GAAA,UAAA,EACV,eAAe,GAAA,GAAA,eAAA,EACf,IAAI,GAAA,GAAA,IAAA,EACJ,KAAA,GAAA,QAAgB,EAAhB,QAAQ,GAAA,OAAA,KAAA,IAAG,KAAK,GAAA,EAAA;IAGlB,GAAG,CAAC,KAAK,CAAC,SAAS,CACjB,kCAAA,MAAA,CAAkC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAE,EAC5D,CAAC,EACD;QACE,UAAA,MAAA,CAAU,UAAU,CAAE;QACtB,oBAAA,MAAA,CAAoB,eAAe,CAAE;QACrC,QAAA,MAAA,CAAQ,IAAI,CAAE;KACf,CACF,CAAA;AACH,CAAC"}},
    {"offset": {"line": 4034, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/remote-loader/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/remote-loader/index.ts"],"sourcesContent":["import { CDNSettings } from '../../browser'\nimport { JSONObject, JSONValue } from '../../core/events'\nimport { Plugin, InternalPluginWithAddMiddleware } from '../../core/plugin'\nimport { loadScript } from '../../lib/load-script'\nimport { getCDN } from '../../lib/parse-cdn'\nimport {\n  applyDestinationMiddleware,\n  DestinationMiddlewareFunction,\n} from '../middleware'\nimport { Context, ContextCancelation } from '../../core/context'\nimport { recordIntegrationMetric } from '../../core/stats/metric-helpers'\nimport { Analytics, InitOptions } from '../../core/analytics'\nimport { createDeferred } from '@segment/analytics-generic-utils'\nimport { IntegrationsInitOptions } from '../../browser/settings'\n\nexport interface RemotePlugin {\n  /** The name of the remote plugin */\n  name: string\n  /** The creation name of the remote plugin */\n  creationName: string\n  /** The url of the javascript file to load */\n  url: string\n  /** The UMD/global name the plugin uses. Plugins are expected to exist here with the `PluginFactory` method signature */\n  libraryName: string\n  /** The settings related to this plugin. */\n  settings: JSONObject\n}\n\nexport class ActionDestination implements InternalPluginWithAddMiddleware {\n  name: string // destination name\n  version = '1.0.0'\n  /**\n   * The lifecycle name of the wrapped plugin.\n   * This does not need to be 'destination', and can be 'enrichment', etc.\n   */\n  type: Plugin['type']\n\n  alternativeNames: string[] = []\n\n  private loadPromise = createDeferred<unknown>()\n\n  middleware: DestinationMiddlewareFunction[] = []\n\n  action: Plugin\n\n  constructor(name: string, action: Plugin) {\n    this.action = action\n    this.name = name\n    this.type = action.type\n    this.alternativeNames.push(action.name)\n  }\n\n  addMiddleware(...fn: DestinationMiddlewareFunction[]): void {\n    /** Make sure we only apply destination filters to actions of the \"destination\" type to avoid causing issues for hybrid destinations */\n    if (this.type === 'destination') {\n      this.middleware.push(...fn)\n    }\n  }\n\n  private async transform(ctx: Context): Promise<Context> {\n    const modifiedEvent = await applyDestinationMiddleware(\n      this.name,\n      ctx.event,\n      this.middleware\n    )\n\n    if (modifiedEvent === null) {\n      ctx.cancel(\n        new ContextCancelation({\n          retry: false,\n          reason: 'dropped by destination middleware',\n        })\n      )\n    }\n\n    return new Context(modifiedEvent!)\n  }\n\n  private _createMethod(\n    methodName: 'track' | 'page' | 'identify' | 'alias' | 'group' | 'screen'\n  ) {\n    return async (ctx: Context): Promise<Context> => {\n      if (!this.action[methodName]) return ctx\n\n      let transformedContext: Context = ctx\n      // Transformations only allowed for destination plugins. Other plugin types support mutating events.\n      if (this.type === 'destination') {\n        transformedContext = await this.transform(ctx)\n      }\n\n      try {\n        if (!(await this.ready())) {\n          throw new Error(\n            'Something prevented the destination from getting ready'\n          )\n        }\n\n        recordIntegrationMetric(ctx, {\n          integrationName: this.action.name,\n          methodName,\n          type: 'action',\n        })\n\n        await this.action[methodName]!(transformedContext)\n      } catch (error) {\n        recordIntegrationMetric(ctx, {\n          integrationName: this.action.name,\n          methodName,\n          type: 'action',\n          didError: true,\n        })\n        throw error\n      }\n\n      return ctx\n    }\n  }\n\n  alias = this._createMethod('alias')\n  group = this._createMethod('group')\n  identify = this._createMethod('identify')\n  page = this._createMethod('page')\n  screen = this._createMethod('screen')\n  track = this._createMethod('track')\n\n  /* --- PASSTHROUGH METHODS --- */\n  isLoaded(): boolean {\n    return this.action.isLoaded()\n  }\n\n  async ready(): Promise<boolean> {\n    try {\n      await this.loadPromise.promise\n      return true\n    } catch {\n      return false\n    }\n  }\n\n  async load(ctx: Context, analytics: Analytics): Promise<unknown> {\n    if (this.loadPromise.isSettled()) {\n      return this.loadPromise.promise\n    }\n\n    try {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.action.name,\n        methodName: 'load',\n        type: 'action',\n      })\n\n      const loadP = this.action.load(ctx, analytics)\n\n      this.loadPromise.resolve(await loadP)\n      return loadP\n    } catch (error) {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.action.name,\n        methodName: 'load',\n        type: 'action',\n        didError: true,\n      })\n\n      this.loadPromise.reject(error)\n      throw error\n    }\n  }\n\n  unload(ctx: Context, analytics: Analytics): Promise<unknown> | unknown {\n    return this.action.unload?.(ctx, analytics)\n  }\n}\n\nexport type PluginFactory = {\n  (settings: JSONValue): Plugin | Plugin[] | Promise<Plugin | Plugin[]>\n  pluginName: string\n}\n\nfunction validate(pluginLike: unknown): pluginLike is Plugin[] {\n  if (!Array.isArray(pluginLike)) {\n    throw new Error('Not a valid list of plugins')\n  }\n\n  const required = ['load', 'isLoaded', 'name', 'version', 'type']\n  pluginLike.forEach((plugin) => {\n    required.forEach((method) => {\n      if (plugin[method] === undefined) {\n        throw new Error(\n          `Plugin: ${\n            plugin.name ?? 'unknown'\n          } missing required function ${method}`\n        )\n      }\n    })\n  })\n\n  return true\n}\n\nfunction isPluginDisabled(\n  userIntegrations: IntegrationsInitOptions,\n  remotePlugin: RemotePlugin\n) {\n  const creationNameEnabled = userIntegrations[remotePlugin.creationName]\n  const currentNameEnabled = userIntegrations[remotePlugin.name]\n\n  // Check that the plugin isn't explicitly enabled when All: false\n  if (\n    userIntegrations.All === false &&\n    !creationNameEnabled &&\n    !currentNameEnabled\n  ) {\n    return true\n  }\n\n  // Check that the plugin isn't explicitly disabled\n  if (creationNameEnabled === false || currentNameEnabled === false) {\n    return true\n  }\n\n  return false\n}\n\nasync function loadPluginFactory(\n  remotePlugin: RemotePlugin,\n  obfuscate?: boolean\n): Promise<void | PluginFactory> {\n  try {\n    const defaultCdn = new RegExp('https://cdn.segment.(com|build)')\n    const cdn = getCDN()\n\n    if (obfuscate) {\n      const urlSplit = remotePlugin.url.split('/')\n      const name = urlSplit[urlSplit.length - 2]\n      const obfuscatedURL = remotePlugin.url.replace(\n        name,\n        btoa(name).replace(/=/g, '')\n      )\n      try {\n        await loadScript(obfuscatedURL.replace(defaultCdn, cdn))\n      } catch (error) {\n        // Due to syncing concerns it is possible that the obfuscated action destination (or requested version) might not exist.\n        // We should use the unobfuscated version as a fallback.\n        await loadScript(remotePlugin.url.replace(defaultCdn, cdn))\n      }\n    } else {\n      await loadScript(remotePlugin.url.replace(defaultCdn, cdn))\n    }\n\n    // @ts-expect-error\n    if (typeof window[remotePlugin.libraryName] === 'function') {\n      // @ts-expect-error\n      return window[remotePlugin.libraryName] as PluginFactory\n    }\n  } catch (err) {\n    console.error('Failed to create PluginFactory', remotePlugin)\n    throw err\n  }\n}\n\nexport async function remoteLoader(\n  settings: CDNSettings,\n  integrations: IntegrationsInitOptions,\n  mergedIntegrations: Record<string, JSONObject>,\n  options?: InitOptions,\n  routingMiddleware?: DestinationMiddlewareFunction,\n  pluginSources?: PluginFactory[]\n): Promise<Plugin[]> {\n  const allPlugins: Plugin[] = []\n\n  const routingRules = settings.middlewareSettings?.routingRules ?? []\n\n  const pluginPromises = (settings.remotePlugins ?? []).map(\n    async (remotePlugin) => {\n      if (isPluginDisabled(integrations, remotePlugin)) return\n\n      try {\n        const pluginFactory =\n          pluginSources?.find(\n            ({ pluginName }) => pluginName === remotePlugin.name\n          ) || (await loadPluginFactory(remotePlugin, options?.obfuscate))\n\n        if (pluginFactory) {\n          const intg = mergedIntegrations[remotePlugin.name]\n          const plugin = await pluginFactory({\n            ...remotePlugin.settings,\n            ...intg,\n          })\n          const plugins = Array.isArray(plugin) ? plugin : [plugin]\n\n          validate(plugins)\n\n          const routing = routingRules.filter(\n            (rule) => rule.destinationName === remotePlugin.creationName\n          )\n\n          plugins.forEach((plugin) => {\n            const wrapper = new ActionDestination(\n              remotePlugin.creationName,\n              plugin\n            )\n\n            if (routing.length && routingMiddleware) {\n              wrapper.addMiddleware(routingMiddleware)\n            }\n\n            allPlugins.push(wrapper)\n          })\n        }\n      } catch (error) {\n        console.warn('Failed to load Remote Plugin', error)\n      }\n    }\n  )\n\n  await Promise.all(pluginPromises)\n  return allPlugins.filter(Boolean)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4519, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/inspector/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/inspector/index.ts"],"sourcesContent":["import { getGlobal } from '../../lib/get-global'\nimport type { Analytics } from '../analytics'\n\nconst env = getGlobal()\n\n// The code below assumes the inspector extension will use Object.assign\n// to add the inspect interface on to this object reference (unless the\n// extension code ran first and has already set up the variable)\nconst inspectorHost: {\n  attach: (analytics: Analytics) => void\n} = ((env as any)['__SEGMENT_INSPECTOR__'] ??= {})\n\nexport const attachInspector = (analytics: Analytics) =>\n  inspectorHost.attach?.(analytics as any)\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,sBAAsB,CAAA;;;;AAGhD,IAAM,GAAG,OAAG,qMAAS,EAAE,CAAA;AAEvB,wEAAwE;AACxE,uEAAuE;AACvE,gEAAgE;AAChE,IAAM,aAAa,GAEf,CAAA,KAAA,CAAA,KAAE,GAAW,CAAA,CAAC,uBAAuB,CAAA,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,EAAA,CAAvB,uBAAuB,CAAA,GAAM,CAAA,CAAE,EAAC,CAAA;AAE3C,IAAM,eAAe,GAAG,SAAC,SAAoB;IAAA,IAAA;IAClD,OAAA,CAAA,KAAA,aAAa,CAAC,MAAM,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAA,IAAA,CAAA,eAAG,SAAgB,CAAC,CAAA;AAAA,CAAA,CAAA"}},
    {"offset": {"line": 4540, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/browser/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/browser/index.ts"],"sourcesContent":["import { getProcessEnv } from '../lib/get-process-env'\nimport { getCDN, setGlobalCDNUrl } from '../lib/parse-cdn'\nimport { Analytics, NullAnalytics } from '../core/analytics'\nimport { Context } from '../core/context'\nimport { Plugin } from '../core/plugin'\nimport { mergedOptions } from '../lib/merged-options'\nimport { createDeferred } from '@segment/analytics-generic-utils'\nimport { envEnrichment } from '../plugins/env-enrichment'\nimport { PluginFactory, remoteLoader } from '../plugins/remote-loader'\nimport { segmentio, SegmentioSettings } from '../plugins/segmentio'\nimport {\n  AnalyticsBuffered,\n  PreInitMethodCallBuffer,\n  flushAnalyticsCallsInNewTask,\n  flushAddSourceMiddleware,\n  flushSetAnonymousID,\n  flushOn,\n  PreInitMethodCall,\n  flushRegister,\n} from '../core/buffer'\nimport { ClassicIntegrationSource } from '../plugins/ajs-destination/types'\nimport { attachInspector } from '../core/inspector'\nimport { Stats } from '../core/stats'\nimport { setGlobalAnalyticsKey } from '../lib/global-analytics-helper'\nimport { CDNSettings, AnalyticsBrowserSettings, InitOptions } from './settings'\nimport { fetch } from '../lib/fetch'\n\nexport type { CDNSettings, AnalyticsBrowserSettings }\n\nexport function loadCDNSettings(\n  writeKey: string,\n  baseUrl: string\n): Promise<CDNSettings> {\n  return fetch(`${baseUrl}/v1/projects/${writeKey}/settings`)\n    .then((res) => {\n      if (!res.ok) {\n        return res.text().then((errorResponseMessage) => {\n          throw new Error(errorResponseMessage)\n        })\n      }\n      return res.json()\n    })\n    .catch((err) => {\n      console.error(err.message)\n      throw err\n    })\n}\n\nfunction hasLegacyDestinations(settings: CDNSettings): boolean {\n  return (\n    getProcessEnv().NODE_ENV !== 'test' &&\n    // just one integration means segmentio\n    Object.keys(settings.integrations).length > 1\n  )\n}\n\nfunction hasTsubMiddleware(settings: CDNSettings): boolean {\n  return (\n    getProcessEnv().NODE_ENV !== 'test' &&\n    (settings.middlewareSettings?.routingRules?.length ?? 0) > 0\n  )\n}\n\n/**\n * With AJS classic, we allow users to call setAnonymousId before the library initialization.\n * This is important because some of the destinations will use the anonymousId during the initialization,\n * and if we set anonId afterwards, that wouldnt impact the destination.\n *\n * Also Ensures events can be registered before library initialization.\n * This is important so users can register to 'initialize' and any events that may fire early during setup.\n */\nfunction flushPreBuffer(\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n): void {\n  flushSetAnonymousID(analytics, buffer)\n  flushOn(analytics, buffer)\n}\n\n/**\n * Finish flushing buffer and cleanup.\n */\nasync function flushFinalBuffer(\n  analytics: Analytics,\n  queryString: string,\n  buffer: PreInitMethodCallBuffer\n): Promise<void> {\n  await flushQueryString(analytics, queryString)\n  flushAnalyticsCallsInNewTask(analytics, buffer)\n}\n\nconst getQueryString = (): string => {\n  const hash = window.location.hash ?? ''\n  const search = window.location.search ?? ''\n  const term = search.length ? search : hash.replace(/(?=#).*(?=\\?)/, '')\n  return term\n}\n\nconst flushQueryString = async (\n  analytics: Analytics,\n  queryString: string\n): Promise<void> => {\n  if (queryString.includes('ajs_')) {\n    await analytics.queryString(queryString).catch(console.error)\n  }\n}\n\nasync function registerPlugins(\n  writeKey: string,\n  cdnSettings: CDNSettings,\n  analytics: Analytics,\n  options: InitOptions,\n  pluginLikes: (Plugin | PluginFactory)[] = [],\n  legacyIntegrationSources: ClassicIntegrationSource[],\n  preInitBuffer: PreInitMethodCallBuffer\n): Promise<Context> {\n  flushPreBuffer(analytics, preInitBuffer)\n  const pluginsFromSettings = pluginLikes?.filter(\n    (pluginLike) => typeof pluginLike === 'object'\n  ) as Plugin[]\n\n  const pluginSources = pluginLikes?.filter(\n    (pluginLike) =>\n      typeof pluginLike === 'function' &&\n      typeof pluginLike.pluginName === 'string'\n  ) as PluginFactory[]\n\n  const tsubMiddleware = hasTsubMiddleware(cdnSettings)\n    ? await import(\n        /* webpackChunkName: \"tsub-middleware\" */ '../plugins/routing-middleware'\n      ).then((mod) => {\n        return mod.tsubMiddleware(cdnSettings.middlewareSettings!.routingRules)\n      })\n    : undefined\n\n  const legacyDestinations =\n    hasLegacyDestinations(cdnSettings) || legacyIntegrationSources.length > 0\n      ? await import(\n          /* webpackChunkName: \"ajs-destination\" */ '../plugins/ajs-destination'\n        ).then((mod) => {\n          return mod.ajsDestinations(\n            writeKey,\n            cdnSettings,\n            analytics.integrations,\n            options,\n            tsubMiddleware,\n            legacyIntegrationSources\n          )\n        })\n      : []\n\n  if (cdnSettings.legacyVideoPluginsEnabled) {\n    await import(\n      /* webpackChunkName: \"legacyVideos\" */ '../plugins/legacy-video-plugins'\n    ).then((mod) => {\n      return mod.loadLegacyVideoPlugins(analytics)\n    })\n  }\n\n  const schemaFilter = options.plan?.track\n    ? await import(\n        /* webpackChunkName: \"schemaFilter\" */ '../plugins/schema-filter'\n      ).then((mod) => {\n        return mod.schemaFilter(options.plan?.track, cdnSettings)\n      })\n    : undefined\n\n  const mergedSettings = mergedOptions(cdnSettings, options)\n  const remotePlugins = await remoteLoader(\n    cdnSettings,\n    analytics.integrations,\n    mergedSettings,\n    options,\n    tsubMiddleware,\n    pluginSources\n  ).catch(() => [])\n\n  const basePlugins = [envEnrichment, ...legacyDestinations, ...remotePlugins]\n\n  if (schemaFilter) {\n    basePlugins.push(schemaFilter)\n  }\n\n  const shouldIgnoreSegmentio =\n    (options.integrations?.All === false &&\n      !options.integrations['Segment.io']) ||\n    (options.integrations && options.integrations['Segment.io'] === false)\n\n  if (!shouldIgnoreSegmentio) {\n    basePlugins.push(\n      await segmentio(\n        analytics,\n        mergedSettings['Segment.io'],\n        cdnSettings.integrations\n      )\n    )\n  }\n\n  // order is important here, (for example, if there are multiple enrichment plugins, the last registered plugin will have access to the last context.)\n  const ctx = await analytics.register(\n    // register 'core' plugins and those via destinations\n    ...basePlugins,\n    // register user-defined plugins passed into AnalyticsBrowser.load({ plugins: [plugin1, plugin2] }) -- relevant to npm-only\n    ...pluginsFromSettings\n  )\n  // register user-defined plugins registered via analytics.register()\n  await flushRegister(analytics, preInitBuffer)\n\n  if (\n    Object.entries(cdnSettings.enabledMiddleware ?? {}).some(\n      ([, enabled]) => enabled\n    )\n  ) {\n    await import(\n      /* webpackChunkName: \"remoteMiddleware\" */ '../plugins/remote-middleware'\n    ).then(async ({ remoteMiddlewares }) => {\n      const middleware = await remoteMiddlewares(\n        ctx,\n        cdnSettings,\n        options.obfuscate\n      )\n      const promises = middleware.map((mdw) =>\n        analytics.addSourceMiddleware(mdw)\n      )\n      return Promise.all(promises)\n    })\n  }\n\n  // register any user-defined plugins added via analytics.addSourceMiddleware()\n  await flushAddSourceMiddleware(analytics, preInitBuffer)\n\n  return ctx\n}\n\nasync function loadAnalytics(\n  settings: AnalyticsBrowserSettings,\n  options: InitOptions = {},\n  preInitBuffer: PreInitMethodCallBuffer\n): Promise<[Analytics, Context]> {\n  // return no-op analytics instance if disabled\n  if (options.disable === true) {\n    return [new NullAnalytics(), Context.system()]\n  }\n\n  if (options.globalAnalyticsKey)\n    setGlobalAnalyticsKey(options.globalAnalyticsKey)\n  // this is an ugly side-effect, but it's for the benefits of the plugins that get their cdn via getCDN()\n  if (settings.cdnURL) setGlobalCDNUrl(settings.cdnURL)\n\n  if (options.initialPageview) {\n    // capture the page context early, so it's always up-to-date\n    preInitBuffer.add(new PreInitMethodCall('page', []))\n  }\n\n  // reading the query string as early as possible in case the URL changes\n  const queryString = getQueryString()\n\n  const cdnURL = settings.cdnURL ?? getCDN()\n  let cdnSettings =\n    settings.cdnSettings ?? (await loadCDNSettings(settings.writeKey, cdnURL))\n\n  if (options.updateCDNSettings) {\n    cdnSettings = options.updateCDNSettings(cdnSettings)\n  }\n\n  // if options.disable is a function, we allow user to disable analytics based on CDN Settings\n  if (typeof options.disable === 'function') {\n    const disabled = await options.disable(cdnSettings)\n    if (disabled) {\n      return [new NullAnalytics(), Context.system()]\n    }\n  }\n\n  const retryQueue: boolean =\n    cdnSettings.integrations['Segment.io']?.retryQueue ?? true\n\n  options = {\n    retryQueue,\n    ...options,\n  }\n\n  const analytics = new Analytics({ ...settings, cdnSettings, cdnURL }, options)\n\n  attachInspector(analytics)\n\n  const plugins = settings.plugins ?? []\n\n  const classicIntegrations = settings.classicIntegrations ?? []\n\n  const segmentLoadOptions = options.integrations?.['Segment.io'] as\n    | SegmentioSettings\n    | undefined\n\n  Stats.initRemoteMetrics({\n    ...cdnSettings.metrics,\n    host: segmentLoadOptions?.apiHost ?? cdnSettings.metrics?.host,\n    protocol: segmentLoadOptions?.protocol,\n  })\n\n  const ctx = await registerPlugins(\n    settings.writeKey,\n    cdnSettings,\n    analytics,\n    options,\n    plugins,\n    classicIntegrations,\n    preInitBuffer\n  )\n\n  analytics.initialized = true\n  analytics.emit('initialize', settings, options)\n  await flushFinalBuffer(analytics, queryString, preInitBuffer)\n\n  return [analytics, ctx]\n}\n\n/**\n * The public browser interface for Segment Analytics\n *\n * @example\n * ```ts\n *  export const analytics = new AnalyticsBrowser()\n *  analytics.load({ writeKey: 'foo' })\n * ```\n * @link https://github.com/segmentio/analytics-next/#readme\n */\nexport class AnalyticsBrowser extends AnalyticsBuffered {\n  private _resolveLoadStart: (\n    settings: AnalyticsBrowserSettings,\n    options: InitOptions\n  ) => void\n\n  constructor() {\n    const { promise: loadStart, resolve: resolveLoadStart } =\n      createDeferred<Parameters<AnalyticsBrowser['load']>>()\n\n    super((buffer) =>\n      loadStart.then(([settings, options]) =>\n        loadAnalytics(settings, options, buffer)\n      )\n    )\n\n    this._resolveLoadStart = (settings, options) =>\n      resolveLoadStart([settings, options])\n  }\n\n  /**\n   * Fully initialize an analytics instance, including:\n   *\n   * * Fetching settings from the segment CDN (by default).\n   * * Fetching all remote destinations configured by the user (if applicable).\n   * * Flushing buffered analytics events.\n   * * Loading all middleware.\n   *\n   * Note:  This method should only be called *once* in your application.\n   *\n   * @example\n   * ```ts\n   * export const analytics = new AnalyticsBrowser()\n   * analytics.load({ writeKey: 'foo' })\n   * ```\n   */\n  load(\n    settings: AnalyticsBrowserSettings,\n    options: InitOptions = {}\n  ): AnalyticsBrowser {\n    this._resolveLoadStart(settings, options)\n    return this\n  }\n\n  /**\n   * Instantiates an object exposing Analytics methods.\n   *\n   * @example\n   * ```ts\n   * const ajs = AnalyticsBrowser.load({ writeKey: '<YOUR_WRITE_KEY>' })\n   *\n   * ajs.track(\"foo\")\n   * ...\n   * ```\n   */\n  static load(\n    settings: AnalyticsBrowserSettings,\n    options: InitOptions = {}\n  ): AnalyticsBrowser {\n    return new AnalyticsBrowser().load(settings, options)\n  }\n\n  static standalone(\n    writeKey: string,\n    options?: InitOptions\n  ): Promise<Analytics> {\n    return AnalyticsBrowser.load({ writeKey }, options).then((res) => res[0])\n  }\n}\n"],"names":[],"mappings":"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"}}]
}