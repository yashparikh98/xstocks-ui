{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/is-plan-event-enabled.ts"],"sourcesContent":["import { PlanEvent, TrackPlan } from '../core/events/interfaces'\n\n/**\n * Determines whether a track event is allowed to be sent based on the\n * user's tracking plan.\n * If the user does not have a tracking plan or the event is allowed based\n * on the tracking plan configuration, returns true.\n */\nexport function isPlanEventEnabled(\n  plan: TrackPlan | undefined,\n  planEvent: PlanEvent | undefined\n): boolean {\n  // Always prioritize the event's `enabled` status\n  if (typeof planEvent?.enabled === 'boolean') {\n    return planEvent.enabled\n  }\n\n  // Assume absence of a tracking plan means events are enabled\n  return plan?.__default?.enabled ?? true\n}\n"],"names":[],"mappings":"AAEA;;;;;GAKG;;;;AACG,SAAU,kBAAkB,CAChC,IAA2B,EAC3B,SAAgC;;IAEhC,iDAAiD;IACjD,IAAI,OAAO,CAAA,SAAS,KAAA,QAAT,SAAS,KAAA,KAAA,IAAA,KAAA,IAAT,SAAS,CAAE,OAAO,CAAA,KAAK,SAAS,EAAE;QAC3C,OAAO,SAAS,CAAC,OAAO,CAAA;KACzB;IAED,6DAA6D;IAC7D,OAAO,CAAA,KAAA,CAAA,KAAA,IAAI,KAAA,QAAJ,IAAI,KAAA,KAAA,IAAA,KAAA,IAAJ,IAAI,CAAE,SAAS,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,OAAO,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,IAAI,CAAA;AACzC,CAAC"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/schema-filter/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/schema-filter/index.ts"],"sourcesContent":["import { CDNSettings } from '../../browser'\nimport { Context } from '../../core/context'\nimport { PlanEvent, TrackPlan } from '../../core/events/interfaces'\nimport { Plugin } from '../../core/plugin'\nimport { isPlanEventEnabled } from '../../lib/is-plan-event-enabled'\nimport { RemotePlugin } from '../remote-loader'\n\nfunction disabledActionDestinations(\n  plan: PlanEvent | undefined,\n  settings: CDNSettings\n): { [destination: string]: string[] } {\n  if (!plan || !Object.keys(plan)) {\n    return {}\n  }\n\n  const disabledIntegrations = plan.integrations\n    ? Object.keys(plan.integrations).filter(\n        (i) => plan.integrations![i] === false\n      )\n    : []\n\n  // This accounts for cases like Fullstory, where the settings.integrations\n  // contains a \"Fullstory\" object but settings.remotePlugins contains \"Fullstory (Actions)\"\n  const disabledRemotePlugins: string[] = []\n  ;(settings.remotePlugins ?? []).forEach((p: RemotePlugin) => {\n    disabledIntegrations.forEach((int) => {\n      if (p.creationName == int) {\n        disabledRemotePlugins.push(p.name)\n      }\n    })\n  })\n\n  return (settings.remotePlugins ?? []).reduce((acc, p) => {\n    if (p.settings['subscriptions']) {\n      if (disabledRemotePlugins.includes(p.name)) {\n        // @ts-expect-error element implicitly has an 'any' type because p.settings is a JSONObject\n        p.settings['subscriptions'].forEach(\n          // @ts-expect-error parameter 'sub' implicitly has an 'any' type\n          (sub) => (acc[`${p.name} ${sub.partnerAction}`] = false)\n        )\n      }\n    }\n    return acc\n  }, {})\n}\n\nexport function schemaFilter(\n  track: TrackPlan | undefined,\n  settings: CDNSettings\n): Plugin {\n  function filter(ctx: Context): Context {\n    const plan = track\n    const ev = ctx.event.event\n\n    if (plan && ev) {\n      const planEvent = plan[ev]\n      if (!isPlanEventEnabled(plan, planEvent)) {\n        ctx.updateEvent('integrations', {\n          ...ctx.event.integrations,\n          All: false,\n          'Segment.io': true,\n        })\n        return ctx\n      } else {\n        const disabledActions = disabledActionDestinations(planEvent, settings)\n\n        ctx.updateEvent('integrations', {\n          ...ctx.event.integrations,\n          ...planEvent?.integrations,\n          ...disabledActions,\n        })\n      }\n    }\n\n    return ctx\n  }\n\n  return {\n    name: 'Schema Filter',\n    version: '0.1.0',\n    isLoaded: () => true,\n    load: () => Promise.resolve(),\n    type: 'before',\n    page: filter,\n    alias: filter,\n    track: filter,\n    identify: filter,\n    group: filter,\n  }\n}\n"],"names":[],"mappings":"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"}}]
}