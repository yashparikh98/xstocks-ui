{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/query-string/pickPrefix.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/query-string/pickPrefix.ts"],"sourcesContent":["import { QueryStringParams } from '.'\n\n/**\n * Returns an object containing only the properties prefixed by the input\n * string.\n * Ex: prefix('ajs_traits_', { ajs_traits_address: '123 St' })\n * will return { address: '123 St' }\n **/\nexport function pickPrefix(\n  prefix: string,\n  object: QueryStringParams\n): QueryStringParams {\n  return Object.keys(object).reduce((acc: QueryStringParams, key: string) => {\n    if (key.startsWith(prefix)) {\n      const field = key.substr(prefix.length)\n      acc[field] = object[key]!\n    }\n    return acc\n  }, {})\n}\n"],"names":[],"mappings":"AAEA;;;;;IAKI;;;;AACE,SAAU,UAAU,CACxB,MAAc,EACd,MAAyB;IAEzB,OAAO,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,SAAC,GAAsB,EAAE,GAAW;QACpE,IAAI,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;YAC1B,IAAM,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;YACvC,GAAG,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,GAAG,CAAE,CAAA;SAC1B;QACD,OAAO,GAAG,CAAA;IACZ,CAAC,EAAE,CAAA,CAAE,CAAC,CAAA;AACR,CAAC"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/core/query-string/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/core/query-string/index.ts"],"sourcesContent":["import { pickPrefix } from './pickPrefix'\nimport { gracefulDecodeURIComponent } from './gracefulDecodeURIComponent'\nimport { Analytics } from '../analytics'\nimport { Context } from '../context'\nimport { isPlainObject } from '@segment/analytics-core'\n\nexport interface QueryStringParams {\n  [key: string]: string | null\n}\n\nexport function queryString(\n  analytics: Analytics,\n  query: string\n): Promise<Context[]> {\n  const a = document.createElement('a')\n  a.href = query\n  const parsed = a.search.slice(1)\n  const params = parsed.split('&').reduce((acc: QueryStringParams, str) => {\n    const [k, v] = str.split('=')\n    acc[k] = gracefulDecodeURIComponent(v)\n    return acc\n  }, {})\n\n  const calls = []\n\n  const { ajs_uid, ajs_event, ajs_aid } = params\n  const { aid: aidPattern = /.+/, uid: uidPattern = /.+/ } = isPlainObject(\n    analytics.options.useQueryString\n  )\n    ? analytics.options.useQueryString\n    : {}\n\n  if (ajs_aid) {\n    const anonId = Array.isArray(params.ajs_aid)\n      ? params.ajs_aid[0]\n      : params.ajs_aid\n\n    if (aidPattern.test(anonId)) {\n      analytics.setAnonymousId(anonId)\n    }\n  }\n\n  if (ajs_uid) {\n    const uid = Array.isArray(params.ajs_uid)\n      ? params.ajs_uid[0]\n      : params.ajs_uid\n\n    if (uidPattern.test(uid)) {\n      const traits = pickPrefix('ajs_trait_', params)\n\n      calls.push(analytics.identify(uid, traits))\n    }\n  }\n\n  if (ajs_event) {\n    const event = Array.isArray(params.ajs_event)\n      ? params.ajs_event[0]\n      : params.ajs_event\n    const props = pickPrefix('ajs_prop_', params)\n    calls.push(analytics.track(event, props))\n  }\n\n  return Promise.all(calls)\n}\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,cAAc,CAAA;AACzC,OAAO,EAAE,0BAA0B,EAAE,MAAM,8BAA8B,CAAA;AAGzE,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAA;;;;AAMjD,SAAU,WAAW,CACzB,SAAoB,EACpB,KAAa;IAEb,IAAM,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAA;IACrC,CAAC,CAAC,IAAI,GAAG,KAAK,CAAA;IACd,IAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;IAChC,IAAM,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,SAAC,GAAsB,EAAE,GAAG;QAC5D,IAAA,KAAS,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,EAAtB,CAAC,GAAA,EAAA,CAAA,EAAA,EAAE,CAAC,GAAA,EAAA,CAAA,EAAkB,CAAA;QAC7B,GAAG,CAAC,CAAC,CAAC,OAAG,oPAA0B,EAAC,CAAC,CAAC,CAAA;QACtC,OAAO,GAAG,CAAA;IACZ,CAAC,EAAE,CAAA,CAAE,CAAC,CAAA;IAEN,IAAM,KAAK,GAAG,EAAE,CAAA;IAER,IAAA,OAAO,GAAyB,MAAM,CAAA,OAA/B,EAAE,SAAS,GAAc,MAAM,CAAA,SAApB,EAAE,OAAO,GAAK,MAAM,CAAA,OAAX,CAAW;IACxC,IAAA,SAAqD,uMAAa,EACtE,SAAS,CAAC,OAAO,CAAC,cAAc,CACjC,GACG,SAAS,CAAC,OAAO,CAAC,cAAc,GAChC,CAAA,CAAE,EAJE,KAAA,GAAA,GAAsB,EAAjB,UAAU,GAAA,OAAA,KAAA,IAAG,IAAI,GAAA,EAAA,EAAE,KAAA,GAAA,GAAsB,EAAjB,UAAU,GAAA,OAAA,KAAA,IAAG,IAAI,GAAA,EAIhD,CAAA;IAEN,IAAI,OAAO,EAAE;QACX,IAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,GACxC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,GACjB,MAAM,CAAC,OAAO,CAAA;QAElB,IAAI,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;YAC3B,SAAS,CAAC,cAAc,CAAC,MAAM,CAAC,CAAA;SACjC;KACF;IAED,IAAI,OAAO,EAAE;QACX,IAAM,GAAG,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,GACrC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,GACjB,MAAM,CAAC,OAAO,CAAA;QAElB,IAAI,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACxB,IAAM,MAAM,OAAG,oNAAU,EAAC,YAAY,EAAE,MAAM,CAAC,CAAA;YAE/C,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC,CAAA;SAC5C;KACF;IAED,IAAI,SAAS,EAAE;QACb,IAAM,OAAK,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,GACzC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,GACnB,MAAM,CAAC,SAAS,CAAA;QACpB,IAAM,KAAK,OAAG,oNAAU,EAAC,WAAW,EAAE,MAAM,CAAC,CAAA;QAC7C,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAK,EAAE,KAAK,CAAC,CAAC,CAAA;KAC1C;IAED,OAAO,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;AAC3B,CAAC"}}]
}