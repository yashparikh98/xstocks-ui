{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/lib/is-plan-event-enabled.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/lib/is-plan-event-enabled.ts"],"sourcesContent":["import { PlanEvent, TrackPlan } from '../core/events/interfaces'\n\n/**\n * Determines whether a track event is allowed to be sent based on the\n * user's tracking plan.\n * If the user does not have a tracking plan or the event is allowed based\n * on the tracking plan configuration, returns true.\n */\nexport function isPlanEventEnabled(\n  plan: TrackPlan | undefined,\n  planEvent: PlanEvent | undefined\n): boolean {\n  // Always prioritize the event's `enabled` status\n  if (typeof planEvent?.enabled === 'boolean') {\n    return planEvent.enabled\n  }\n\n  // Assume absence of a tracking plan means events are enabled\n  return plan?.__default?.enabled ?? true\n}\n"],"names":[],"mappings":"AAEA;;;;;GAKG;;;;AACG,SAAU,kBAAkB,CAChC,IAA2B,EAC3B,SAAgC;;IAEhC,iDAAiD;IACjD,IAAI,OAAO,CAAA,SAAS,KAAA,QAAT,SAAS,KAAA,KAAA,IAAA,KAAA,IAAT,SAAS,CAAE,OAAO,CAAA,KAAK,SAAS,EAAE;QAC3C,OAAO,SAAS,CAAC,OAAO,CAAA;KACzB;IAED,6DAA6D;IAC7D,OAAO,CAAA,KAAA,CAAA,KAAA,IAAI,KAAA,QAAJ,IAAI,KAAA,KAAA,IAAA,KAAA,IAAJ,IAAI,CAAE,SAAS,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,OAAO,MAAA,QAAA,OAAA,KAAA,IAAA,KAAI,IAAI,CAAA;AACzC,CAAC"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/loader.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/ajs-destination/loader.ts"],"sourcesContent":["import { Analytics } from '../../core/analytics'\nimport { getNextIntegrationsURL } from '../../lib/parse-cdn'\nimport { Context } from '../../core/context'\nimport { User } from '../../core/user'\nimport { loadScript, unloadScript } from '../../lib/load-script'\nimport {\n  LegacyIntegration,\n  ClassicIntegrationBuilder,\n  ClassicIntegrationSource,\n} from './types'\nimport { RemoteIntegrationSettings } from '../../browser/settings'\n\nfunction normalizeName(name: string): string {\n  return name.toLowerCase().replace('.', '').replace(/\\s+/g, '-')\n}\n\nfunction obfuscatePathName(pathName: string, obfuscate = false): string | void {\n  return obfuscate ? btoa(pathName).replace(/=/g, '') : undefined\n}\n\nexport function resolveIntegrationNameFromSource(\n  integrationSource: ClassicIntegrationSource\n) {\n  return (\n    'Integration' in integrationSource\n      ? integrationSource.Integration\n      : integrationSource\n  ).prototype.name\n}\n\nfunction recordLoadMetrics(fullPath: string, ctx: Context, name: string): void {\n  try {\n    const [metric] =\n      window?.performance?.getEntriesByName(fullPath, 'resource') ?? []\n    // we assume everything that took under 100ms is cached\n    metric &&\n      ctx.stats.gauge('legacy_destination_time', Math.round(metric.duration), [\n        name,\n        ...(metric.duration < 100 ? ['cached'] : []),\n      ])\n  } catch (_) {\n    // not available\n  }\n}\n\nexport function buildIntegration(\n  integrationSource: ClassicIntegrationSource,\n  integrationSettings: { [key: string]: any },\n  analyticsInstance: Analytics\n): LegacyIntegration {\n  let integrationCtr: ClassicIntegrationBuilder\n  // GA and Appcues use a different interface to instantiating integrations\n  if ('Integration' in integrationSource) {\n    const analyticsStub = {\n      user: (): User => analyticsInstance.user(),\n      addIntegration: (): void => {},\n    }\n\n    integrationSource(analyticsStub)\n    integrationCtr = integrationSource.Integration\n  } else {\n    integrationCtr = integrationSource\n  }\n\n  const integration = new integrationCtr(integrationSettings)\n  integration.analytics = analyticsInstance\n  return integration\n}\n\nexport async function loadIntegration(\n  ctx: Context,\n  name: string,\n  version: string,\n  obfuscate?: boolean\n): Promise<ClassicIntegrationSource> {\n  const pathName = normalizeName(name)\n  const obfuscatedPathName = obfuscatePathName(pathName, obfuscate)\n  const path = getNextIntegrationsURL()\n\n  const fullPath = `${path}/integrations/${\n    obfuscatedPathName ?? pathName\n  }/${version}/${obfuscatedPathName ?? pathName}.dynamic.js.gz`\n\n  try {\n    await loadScript(fullPath)\n    recordLoadMetrics(fullPath, ctx, name)\n  } catch (err) {\n    ctx.stats.gauge('legacy_destination_time', -1, [`plugin:${name}`, `failed`])\n    throw err\n  }\n\n  // @ts-ignore\n  const deps: string[] = window[`${pathName}Deps`]\n  await Promise.all(deps.map((dep) => loadScript(path + dep + '.gz')))\n\n  // @ts-ignore\n  window[`${pathName}Loader`]()\n\n  return window[\n    // @ts-ignore\n    `${pathName}Integration`\n  ] as ClassicIntegrationSource\n}\n\nexport async function unloadIntegration(\n  name: string,\n  version: string,\n  obfuscate?: boolean\n): Promise<void> {\n  const path = getNextIntegrationsURL()\n  const pathName = normalizeName(name)\n  const obfuscatedPathName = obfuscatePathName(name, obfuscate)\n\n  const fullPath = `${path}/integrations/${\n    obfuscatedPathName ?? pathName\n  }/${version}/${obfuscatedPathName ?? pathName}.dynamic.js.gz`\n\n  return unloadScript(fullPath)\n}\n\nexport function resolveVersion(\n  integrationConfig?: RemoteIntegrationSettings\n): string {\n  return (\n    integrationConfig?.versionSettings?.override ??\n    integrationConfig?.versionSettings?.version ??\n    'latest'\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/utils.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/ajs-destination/utils.ts"],"sourcesContent":["import { RemoteIntegrationSettings } from '../..'\nimport { IntegrationsInitOptions } from '../../browser/settings'\n\nexport const isInstallableIntegration = (\n  name: string,\n  integrationSettings: RemoteIntegrationSettings\n) => {\n  const { type, bundlingStatus, versionSettings } = integrationSettings\n  // We use `!== 'unbundled'` (versus `=== 'bundled'`) to be inclusive of\n  // destinations without a defined value for `bundlingStatus`\n  const deviceMode =\n    bundlingStatus !== 'unbundled' &&\n    (type === 'browser' || versionSettings?.componentTypes?.includes('browser'))\n\n  // checking for iterable is a quick fix we need in place to prevent\n  // errors showing Iterable as a failed destiantion. Ideally, we should\n  // fix the Iterable metadata instead, but that's a longer process.\n  return !name.startsWith('Segment') && name !== 'Iterable' && deviceMode\n}\n\nexport const isDisabledIntegration = (\n  integrationName: string,\n  integrations: IntegrationsInitOptions\n) => {\n  const allDisableAndNotDefined =\n    integrations.All === false && integrations[integrationName] === undefined\n\n  return integrations[integrationName] === false || allDisableAndNotDefined\n}\n"],"names":[],"mappings":";;;;;;AAGO,IAAM,wBAAwB,GAAG,SACtC,IAAY,EACZ,mBAA8C;;IAEtC,IAAA,IAAI,GAAsC,mBAAmB,CAAA,IAAzD,EAAE,cAAc,GAAsB,mBAAmB,CAAA,cAAzC,EAAE,eAAe,GAAK,mBAAmB,CAAA,eAAxB,CAAwB;IACrE,uEAAuE;IACvE,4DAA4D;IAC5D,IAAM,UAAU,GACd,cAAc,KAAK,WAAW,IAC9B,CAAC,IAAI,KAAK,SAAS,IAAA,CAAI,CAAA,KAAA,eAAe,KAAA,QAAf,eAAe,KAAA,KAAA,IAAA,KAAA,IAAf,eAAe,CAAE,cAAc,MAAA,QAAA,OAAA,KAAA,IAAA,KAAA,IAAA,GAAE,QAAQ,CAAC,SAAS,CAAC,CAAA,CAAC,CAAA;IAE9E,mEAAmE;IACnE,sEAAsE;IACtE,kEAAkE;IAClE,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,IAAI,KAAK,UAAU,IAAI,UAAU,CAAA;AACzE,CAAC,CAAA;AAEM,IAAM,qBAAqB,GAAG,SACnC,eAAuB,EACvB,YAAqC;IAErC,IAAM,uBAAuB,GAC3B,YAAY,CAAC,GAAG,KAAK,KAAK,IAAI,YAAY,CAAC,eAAe,CAAC,KAAK,SAAS,CAAA;IAE3E,OAAO,YAAY,CAAC,eAAe,CAAC,KAAK,KAAK,IAAI,uBAAuB,CAAA;AAC3E,CAAC,CAAA"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/@segment/analytics-next/dist/pkg/plugins/ajs-destination/index.js","sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40segment/analytics-next/src/plugins/ajs-destination/index.ts"],"sourcesContent":["import { JSONObject } from '../../core/events'\nimport { Alias, Facade, Group, Identify, Page, Track } from '@segment/facade'\nimport { Analytics, InitOptions } from '../../core/analytics'\nimport { CDNSettings } from '../../browser'\nimport { isOffline, isOnline } from '../../core/connection'\nimport { Context, ContextCancelation } from '../../core/context'\nimport { isServer } from '../../core/environment'\nimport { InternalPluginWithAddMiddleware, Plugin } from '../../core/plugin'\nimport { attempt } from '@segment/analytics-core'\nimport { isPlanEventEnabled } from '../../lib/is-plan-event-enabled'\nimport { mergedOptions } from '../../lib/merged-options'\nimport { pWhile } from '../../lib/p-while'\nimport { PriorityQueue } from '../../lib/priority-queue'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport {\n  applyDestinationMiddleware,\n  DestinationMiddlewareFunction,\n} from '../middleware'\nimport {\n  buildIntegration,\n  loadIntegration,\n  resolveIntegrationNameFromSource,\n  resolveVersion,\n  unloadIntegration,\n} from './loader'\nimport { LegacyIntegration, ClassicIntegrationSource } from './types'\nimport { isPlainObject } from '@segment/analytics-core'\nimport {\n  isDisabledIntegration as shouldSkipIntegration,\n  isInstallableIntegration,\n} from './utils'\nimport { recordIntegrationMetric } from '../../core/stats/metric-helpers'\nimport { createDeferred } from '@segment/analytics-generic-utils'\nimport { IntegrationsInitOptions } from '../../browser/settings'\n\nexport type ClassType<T> = new (...args: unknown[]) => T\n\nasync function flushQueue(\n  xt: Plugin,\n  queue: PriorityQueue<Context>\n): Promise<PriorityQueue<Context>> {\n  const failedQueue: Context[] = []\n\n  if (isOffline()) {\n    return queue\n  }\n\n  await pWhile(\n    () => queue.length > 0 && isOnline(),\n    async () => {\n      const ctx = queue.pop()\n      if (!ctx) {\n        return\n      }\n\n      const result = await attempt(ctx, xt)\n      const success = result instanceof Context\n      if (!success) {\n        failedQueue.push(ctx)\n      }\n    }\n  )\n\n  // re-add failed tasks\n  failedQueue.map((failed) => queue.pushWithBackoff(failed))\n  return queue\n}\n\nexport class LegacyDestination implements InternalPluginWithAddMiddleware {\n  name: string\n  version: string\n  settings: JSONObject\n  options: InitOptions = {}\n  readonly type = 'destination'\n  middleware: DestinationMiddlewareFunction[] = []\n\n  private _ready: boolean | undefined\n  private _initialized: boolean | undefined\n  private onReady: Promise<unknown> | undefined\n  private initializePromise = createDeferred<boolean>()\n  private disableAutoISOConversion: boolean\n\n  integrationSource?: ClassicIntegrationSource\n  integration: LegacyIntegration | undefined\n\n  buffer: PriorityQueue<Context>\n  flushing = false\n\n  constructor(\n    name: string,\n    version: string,\n    writeKey: string,\n    settings: JSONObject = {},\n    options: InitOptions,\n    integrationSource?: ClassicIntegrationSource\n  ) {\n    this.name = name\n    this.version = version\n    this.settings = { ...settings }\n    this.disableAutoISOConversion = options.disableAutoISOConversion || false\n    this.integrationSource = integrationSource\n\n    // AJS-Renderer sets an extraneous `type` setting that clobbers\n    // existing type defaults. We need to remove it if it's present\n    if (this.settings['type'] && this.settings['type'] === 'browser') {\n      delete this.settings['type']\n    }\n\n    this.initializePromise.promise.then(\n      (isInitialized) => (this._initialized = isInitialized),\n      () => {}\n    )\n\n    this.options = options\n    this.buffer = options.disableClientPersistence\n      ? new PriorityQueue(4, [])\n      : new PersistedPriorityQueue(4, `${writeKey}:dest-${name}`)\n\n    this.scheduleFlush()\n  }\n\n  isLoaded(): boolean {\n    return !!this._ready\n  }\n\n  ready(): Promise<unknown> {\n    return this.initializePromise.promise.then(\n      () => this.onReady ?? Promise.resolve()\n    )\n  }\n\n  async load(ctx: Context, analyticsInstance: Analytics): Promise<void> {\n    if (this._ready || this.onReady !== undefined) {\n      return\n    }\n\n    const integrationSource =\n      this.integrationSource ??\n      (await loadIntegration(\n        ctx,\n        this.name,\n        this.version,\n        this.options.obfuscate\n      ))\n\n    this.integration = buildIntegration(\n      integrationSource,\n      this.settings,\n      analyticsInstance\n    )\n\n    this.onReady = new Promise((resolve) => {\n      const onReadyFn = (): void => {\n        this._ready = true\n        resolve(true)\n      }\n\n      this.integration!.once('ready', onReadyFn)\n    })\n\n    this.integration!.on('initialize', () => {\n      this.initializePromise.resolve(true)\n    })\n\n    try {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.name,\n        methodName: 'initialize',\n        type: 'classic',\n      })\n      this.integration.initialize()\n    } catch (error) {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.name,\n        methodName: 'initialize',\n        type: 'classic',\n        didError: true,\n      })\n      this.initializePromise.resolve(false)\n      throw error\n    }\n  }\n\n  unload(_ctx: Context, _analyticsInstance: Analytics): Promise<void> {\n    return unloadIntegration(this.name, this.version, this.options.obfuscate)\n  }\n\n  addMiddleware(...fn: DestinationMiddlewareFunction[]): void {\n    this.middleware = this.middleware.concat(...fn)\n  }\n\n  shouldBuffer(ctx: Context): boolean {\n    return (\n      // page events can't be buffered because of destinations that automatically add page views\n      ctx.event.type !== 'page' &&\n      (isOffline() || this._ready !== true || this._initialized !== true)\n    )\n  }\n\n  private async send<T extends Facade>(\n    ctx: Context,\n    clz: ClassType<T>,\n    eventType: 'track' | 'identify' | 'page' | 'alias' | 'group'\n  ): Promise<Context> {\n    if (this.shouldBuffer(ctx)) {\n      this.buffer.push(ctx)\n      this.scheduleFlush()\n      return ctx\n    }\n\n    const plan = this.options?.plan?.track\n    const ev = ctx.event.event\n\n    if (plan && ev && this.name !== 'Segment.io') {\n      // events are always sent to segment (legacy behavior)\n      const planEvent = plan[ev]\n      if (!isPlanEventEnabled(plan, planEvent)) {\n        ctx.updateEvent('integrations', {\n          ...ctx.event.integrations,\n          All: false,\n          'Segment.io': true,\n        })\n        ctx.cancel(\n          new ContextCancelation({\n            retry: false,\n            reason: `Event ${ev} disabled for integration ${this.name} in tracking plan`,\n            type: 'Dropped by plan',\n          })\n        )\n      } else {\n        ctx.updateEvent('integrations', {\n          ...ctx.event.integrations,\n          ...planEvent?.integrations,\n        })\n      }\n\n      if (planEvent?.enabled && planEvent?.integrations![this.name] === false) {\n        ctx.cancel(\n          new ContextCancelation({\n            retry: false,\n            reason: `Event ${ev} disabled for integration ${this.name} in tracking plan`,\n            type: 'Dropped by plan',\n          })\n        )\n      }\n    }\n\n    const afterMiddleware = await applyDestinationMiddleware(\n      this.name,\n      ctx.event,\n      this.middleware\n    )\n\n    if (afterMiddleware === null) {\n      return ctx\n    }\n\n    const event = new clz(afterMiddleware, {\n      traverse: !this.disableAutoISOConversion,\n    })\n\n    recordIntegrationMetric(ctx, {\n      integrationName: this.name,\n      methodName: eventType,\n      type: 'classic',\n    })\n\n    try {\n      if (this.integration) {\n        await this.integration!.invoke.call(this.integration, eventType, event)\n      }\n    } catch (err) {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.name,\n        methodName: eventType,\n        type: 'classic',\n        didError: true,\n      })\n      throw err\n    }\n\n    return ctx\n  }\n\n  async track(ctx: Context): Promise<Context> {\n    return this.send(ctx, Track as ClassType<Track>, 'track')\n  }\n\n  async page(ctx: Context): Promise<Context> {\n    if (this.integration?._assumesPageview && !this._initialized) {\n      this.integration.initialize()\n    }\n\n    await this.initializePromise.promise\n    return this.send(ctx, Page as ClassType<Page>, 'page')\n  }\n\n  async identify(ctx: Context): Promise<Context> {\n    return this.send(ctx, Identify as ClassType<Identify>, 'identify')\n  }\n\n  async alias(ctx: Context): Promise<Context> {\n    return this.send(ctx, Alias as ClassType<Alias>, 'alias')\n  }\n\n  async group(ctx: Context): Promise<Context> {\n    return this.send(ctx, Group as ClassType<Group>, 'group')\n  }\n\n  private scheduleFlush(): void {\n    if (this.flushing) {\n      return\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    setTimeout(async () => {\n      if (isOffline() || this._ready !== true || this._initialized !== true) {\n        this.scheduleFlush()\n        return\n      }\n\n      this.flushing = true\n      this.buffer = await flushQueue(this, this.buffer)\n      this.flushing = false\n\n      if (this.buffer.todo > 0) {\n        this.scheduleFlush()\n      }\n    }, Math.random() * 5000)\n  }\n}\n\nexport function ajsDestinations(\n  writeKey: string,\n  settings: CDNSettings,\n  integrations: IntegrationsInitOptions = {},\n  options: InitOptions = {},\n  routingMiddleware?: DestinationMiddlewareFunction,\n  legacyIntegrationSources?: ClassicIntegrationSource[]\n): LegacyDestination[] {\n  if (isServer()) {\n    return []\n  }\n\n  if (settings.plan) {\n    options = options ?? {}\n    options.plan = settings.plan\n  }\n\n  const routingRules = settings.middlewareSettings?.routingRules ?? []\n  const remoteIntegrationsConfig = settings.integrations\n  const localIntegrationsConfig = options.integrations\n  // merged remote CDN settings with user provided options\n  const integrationOptions = mergedOptions(settings, options ?? {}) as Record<\n    string,\n    JSONObject\n  >\n\n  const adhocIntegrationSources = legacyIntegrationSources?.reduce(\n    (acc, integrationSource) => ({\n      ...acc,\n      [resolveIntegrationNameFromSource(integrationSource)]: integrationSource,\n    }),\n    {} as Record<string, ClassicIntegrationSource>\n  )\n\n  const installableIntegrations = new Set([\n    // Remotely configured installable integrations\n    ...Object.keys(remoteIntegrationsConfig).filter((name) =>\n      isInstallableIntegration(name, remoteIntegrationsConfig[name])\n    ),\n\n    // Directly provided integration sources are only installable if settings for them are available\n    ...Object.keys(adhocIntegrationSources || {}).filter(\n      (name) =>\n        isPlainObject(remoteIntegrationsConfig[name]) ||\n        isPlainObject(localIntegrationsConfig?.[name])\n    ),\n  ])\n\n  return Array.from(installableIntegrations)\n    .filter((name) => !shouldSkipIntegration(name, integrations))\n    .map((name) => {\n      const integrationSettings = remoteIntegrationsConfig[name]\n      const version = resolveVersion(integrationSettings)\n      const destination = new LegacyDestination(\n        name,\n        version,\n        writeKey,\n        integrationOptions[name],\n        options,\n        adhocIntegrationSources?.[name]\n      )\n\n      const routing = routingRules.filter(\n        (rule) => rule.destinationName === name\n      )\n      if (routing.length > 0 && routingMiddleware) {\n        destination.addMiddleware(routingMiddleware)\n      }\n\n      return destination\n    })\n}\n"],"names":[],"mappings":"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"}}]
}