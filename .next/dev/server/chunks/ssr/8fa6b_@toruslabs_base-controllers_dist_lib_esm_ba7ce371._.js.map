{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/BaseController.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { SafeEventEmitter } from '@web3auth/auth';\n\n/**\n * Controller class that provides configuration, state management, and subscriptions\n */\nclass BaseController extends SafeEventEmitter {\n  /**\n   * Creates a BaseController instance. Both initial state and initial\n   * configuration options are merged with defaults upon initialization.\n   *\n   * @param config - Initial options used to configure this controller\n   * @param state - Initial state to set on this controller\n   */\n  constructor({\n    config = {},\n    state = {}\n  }) {\n    super();\n    // Use assign since generics can't be spread: https://git.io/vpRhY\n    /**\n     * Default options used to configure this controller\n     */\n    _defineProperty(this, \"defaultConfig\", {});\n    /**\n     * Default state set on this controller\n     */\n    _defineProperty(this, \"defaultState\", {});\n    /**\n     * Determines if listeners are notified of state changes\n     */\n    _defineProperty(this, \"disabled\", false);\n    /**\n     * Name of this controller used during composition\n     */\n    _defineProperty(this, \"name\", \"BaseController\");\n    _defineProperty(this, \"initialConfig\", void 0);\n    _defineProperty(this, \"initialState\", void 0);\n    _defineProperty(this, \"internalConfig\", this.defaultConfig);\n    _defineProperty(this, \"internalState\", this.defaultState);\n    this.initialState = state;\n    this.initialConfig = config;\n  }\n\n  /**\n   * Retrieves current controller configuration options\n   *\n   * @returns - Current configuration\n   */\n  get config() {\n    return this.internalConfig;\n  }\n\n  /**\n   * Retrieves current controller state\n   *\n   * @returns - Current state\n   */\n  get state() {\n    return this.internalState;\n  }\n\n  /**\n   * Updates controller configuration\n   *\n   * @param config - New configuration options\n   * @param overwrite - Overwrite config instead of merging\n   * @param fullUpdate - Boolean that defines if the update is partial or not\n   */\n  configure(config, overwrite = false, fullUpdate = true) {\n    if (fullUpdate) {\n      this.internalConfig = overwrite ? config : Object.assign(this.internalConfig, config);\n      for (const key in this.internalConfig) {\n        if (typeof this.internalConfig[key] !== \"undefined\") {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this[key] = this.internalConfig[key];\n        }\n      }\n    } else {\n      for (const key in config) {\n        /* istanbul ignore else */\n        if (typeof this.internalConfig[key] !== \"undefined\") {\n          this.internalConfig[key] = config[key];\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this[key] = config[key];\n        }\n      }\n    }\n  }\n\n  /**\n   * Updates controller state\n   *\n   * @param state - New state\n   * @param overwrite - Overwrite state instead of merging\n   */\n  update(state, overwrite = false) {\n    this.internalState = overwrite ? _objectSpread({}, state) : _objectSpread(_objectSpread({}, this.internalState), state);\n    this.emit(\"store\", this.internalState);\n  }\n\n  /**\n   * Enables the controller. This sets each config option as a member\n   * variable on this instance and triggers any defined setters. This\n   * also sets initial state and triggers any listeners.\n   *\n   * @returns - This controller instance\n   */\n  initialize() {\n    this.internalState = this.defaultState;\n    this.internalConfig = this.defaultConfig;\n    this.configure(this.initialConfig);\n    this.update(this.initialState);\n    return this;\n  }\n}\n\nexport { BaseController };\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA;;CAEC,GACD,MAAM,uBAAuB,kQAAgB;IAC3C;;;;;;GAMC,GACD,YAAY,EACV,SAAS,CAAC,CAAC,EACX,QAAQ,CAAC,CAAC,EACX,CAAE;QACD,KAAK;QACL,kEAAkE;QAClE;;KAEC,GACD,IAAA,0KAAe,EAAC,IAAI,EAAE,iBAAiB,CAAC;QACxC;;KAEC,GACD,IAAA,0KAAe,EAAC,IAAI,EAAE,gBAAgB,CAAC;QACvC;;KAEC,GACD,IAAA,0KAAe,EAAC,IAAI,EAAE,YAAY;QAClC;;KAEC,GACD,IAAA,0KAAe,EAAC,IAAI,EAAE,QAAQ;QAC9B,IAAA,0KAAe,EAAC,IAAI,EAAE,iBAAiB,KAAK;QAC5C,IAAA,0KAAe,EAAC,IAAI,EAAE,gBAAgB,KAAK;QAC3C,IAAA,0KAAe,EAAC,IAAI,EAAE,kBAAkB,IAAI,CAAC,aAAa;QAC1D,IAAA,0KAAe,EAAC,IAAI,EAAE,iBAAiB,IAAI,CAAC,YAAY;QACxD,IAAI,CAAC,YAAY,GAAG;QACpB,IAAI,CAAC,aAAa,GAAG;IACvB;IAEA;;;;GAIC,GACD,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,cAAc;IAC5B;IAEA;;;;GAIC,GACD,IAAI,QAAQ;QACV,OAAO,IAAI,CAAC,aAAa;IAC3B;IAEA;;;;;;GAMC,GACD,UAAU,MAAM,EAAE,YAAY,KAAK,EAAE,aAAa,IAAI,EAAE;QACtD,IAAI,YAAY;YACd,IAAI,CAAC,cAAc,GAAG,YAAY,SAAS,OAAO,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE;YAC9E,IAAK,MAAM,OAAO,IAAI,CAAC,cAAc,CAAE;gBACrC,IAAI,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,KAAK,aAAa;oBACnD,8DAA8D;oBAC9D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI;gBACtC;YACF;QACF,OAAO;YACL,IAAK,MAAM,OAAO,OAAQ;gBACxB,wBAAwB,GACxB,IAAI,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,KAAK,aAAa;oBACnD,IAAI,CAAC,cAAc,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI;oBACtC,8DAA8D;oBAC9D,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI;gBACzB;YACF;QACF;IACF;IAEA;;;;;GAKC,GACD,OAAO,KAAK,EAAE,YAAY,KAAK,EAAE;QAC/B,IAAI,CAAC,aAAa,GAAG,YAAY,IAAA,yKAAa,EAAC,CAAC,GAAG,SAAS,IAAA,yKAAa,EAAC,IAAA,yKAAa,EAAC,CAAC,GAAG,IAAI,CAAC,aAAa,GAAG;QACjH,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,aAAa;IACvC;IAEA;;;;;;GAMC,GACD,aAAa;QACX,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY;QACtC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa;QACxC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa;QACjC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY;QAC7B,OAAO,IAAI;IACb;AACF","ignoreList":[0]}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Network/INetworkController.js"],"sourcesContent":["const createRandomId = () => Math.random().toString(36).substring(2);\nconst CHAIN_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  CASPER: \"casper\",\n  XRPL: \"xrpl\",\n  OTHER: \"other\"\n};\n// eip155 for all evm chains\n\n/**\n * Custom network properties\n * @example isEIP1559Compatible: true etc.\n */\n\n/**\n *\n */\n\nexport { CHAIN_NAMESPACES, createRandomId };\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,iBAAiB,IAAM,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;AAClE,MAAM,mBAAmB;IACvB,QAAQ;IACR,QAAQ;IACR,QAAQ;IACR,MAAM;IACN,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Network/constants.js"],"sourcesContent":["// Methods that are tracked for JRPC requests that are handled internally and not through network fetch\nconst ANALYTICS_TRACKED_INTERNAL_JPRC_METHODS = {\n  // Ethereum methods\n  ETH_TRANSACTION: \"eth_sendTransaction\",\n  ETH_SIGN_TRANSACTION: \"eth_signTransaction\",\n  ETH_SIGN: \"eth_sign\",\n  PERSONAL_SIGN: \"personal_sign\",\n  ETH_SIGN_TYPED_DATA_V4: \"eth_signTypedData_v4\",\n  // Solana methods\n  SIGN_TRANSACTION: \"solana_signTransaction\",\n  SIGN_ALL_TRANSACTIONS: \"solana_signAllTransactions\",\n  SIGN_MESSAGE: \"solana_signMessage\"\n};\n\n// Methods that are tracked for network fetch requests\nconst ANALYTICS_TRACKED_NETWORK_JPRC_METHODS = {\n  // Ethereum methods\n  ETH_SEND_RAW_TRANSACTION: \"eth_sendRawTransaction\",\n  ETH_SEND_USER_OPERATION: \"eth_sendUserOperation\",\n  ETH_SPONSOR_USER_OPERATION: \"pm_sponsorUserOperation\",\n  // Solana methods\n  SEND_TRANSACTION: \"solana_sendTransaction\"\n};\nconst ANALYTICS_EVENTS = {\n  JRPC_REQUEST_COMPLETED: \"JRPC Request Completed\",\n  JRPC_REQUEST_FAILED: \"JRPC Request Failed\"\n};\nconst ANALYTICS_JRPC_REQUEST_TYPES = {\n  INTERNAL: \"internal\",\n  NETWORK: \"network\"\n};\nconst SOLANA_CAIP_CHAIN_MAP = {\n  \"0x65\": \"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp\",\n  \"0x66\": \"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z\",\n  \"0x67\": \"EtWTRABZaYq6iMfeYKouRu166VU2xqa1\"\n};\n\nexport { ANALYTICS_EVENTS, ANALYTICS_JRPC_REQUEST_TYPES, ANALYTICS_TRACKED_INTERNAL_JPRC_METHODS, ANALYTICS_TRACKED_NETWORK_JPRC_METHODS, SOLANA_CAIP_CHAIN_MAP };\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA,uGAAuG;AACvG,MAAM,0CAA0C;IAC9C,mBAAmB;IACnB,iBAAiB;IACjB,sBAAsB;IACtB,UAAU;IACV,eAAe;IACf,wBAAwB;IACxB,iBAAiB;IACjB,kBAAkB;IAClB,uBAAuB;IACvB,cAAc;AAChB;AAEA,sDAAsD;AACtD,MAAM,yCAAyC;IAC7C,mBAAmB;IACnB,0BAA0B;IAC1B,yBAAyB;IACzB,4BAA4B;IAC5B,iBAAiB;IACjB,kBAAkB;AACpB;AACA,MAAM,mBAAmB;IACvB,wBAAwB;IACxB,qBAAqB;AACvB;AACA,MAAM,+BAA+B;IACnC,UAAU;IACV,SAAS;AACX;AACA,MAAM,wBAAwB;IAC5B,QAAQ;IACR,QAAQ;IACR,QAAQ;AACV","ignoreList":[0]}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/utils/utils.js"],"sourcesContent":["import { fromSigned, bytesToBigInt, toUnsigned, stripHexPrefix, bigIntToHex, addHexPrefix, hashPersonalMessage, bigIntToBytes } from '@ethereumjs/util';\nimport { safeatob } from '@web3auth/auth';\nimport BigNumber from 'bignumber.js';\nimport { secp256k1 } from 'ethereum-cryptography/secp256k1';\nimport { SOLANA_CAIP_CHAIN_MAP } from '../Network/constants.js';\nimport { CHAIN_NAMESPACES } from '../Network/INetworkController.js';\n\n/**\n * General utility functions\n */\n\nfunction intToHex(i) {\n  const hex = i.toString(16);\n  return `0x${hex}`;\n}\n\n/**\n * Returns a random number. Don't use for cryptographic purposes.\n * @returns a random number\n */\nconst randomId = () => Math.random().toString(36).slice(2);\n\n/**\n * Pads the front of the given hex string with zeroes until it reaches the\n * target length. If the input string is already longer than or equal to the\n * target length, it is returned unmodified.\n *\n * If the input string is \"0x\"-prefixed or not a hex string, an error will be\n * thrown.\n *\n * @param hexString - The hexadecimal string to pad with zeroes.\n * @param targetLength - The target length of the hexadecimal string.\n * @returns The input string front-padded with zeroes, or the original string\n * if it was already greater than or equal to to the target length.\n */\nfunction padWithZeroes(hexString, targetLength) {\n  if (hexString !== \"\" && !/^[a-f0-9]+$/iu.test(hexString)) {\n    throw new Error(`Expected an unprefixed hex string. Received: ${hexString}`);\n  }\n  if (targetLength < 0) {\n    throw new Error(`Expected a non-negative integer target length. Received: ${targetLength}`);\n  }\n  return String.prototype.padStart.call(hexString, targetLength, \"0\");\n}\n/**\n * Concatenate an extended ECDSA signature into a hex string.\n *\n * @param v - The 'v' portion of the signature.\n * @param r - The 'r' portion of the signature.\n * @param s - The 's' portion of the signature.\n * @returns The concatenated ECDSA signature.\n */\nfunction concatSig(v, r, s) {\n  const rSig = fromSigned(r);\n  const sSig = fromSigned(s);\n  const vSig = bytesToBigInt(v);\n  const rStr = padWithZeroes(Buffer.from(toUnsigned(rSig)).toString(\"hex\"), 64);\n  const sStr = padWithZeroes(Buffer.from(toUnsigned(sSig)).toString(\"hex\"), 64);\n  const vStr = stripHexPrefix(bigIntToHex(vSig));\n  return addHexPrefix(rStr.concat(sStr, vStr));\n}\nfunction timeout(duration) {\n  return new Promise(resolve => {\n    const timeoutRef = window.setTimeout(() => {\n      resolve();\n      window.clearTimeout(timeoutRef);\n    }, duration);\n  });\n}\nconst getHeaders = (jwt, publicAddress) => {\n  return {\n    headers: {\n      Authorization: `Bearer ${jwt}`,\n      \"Content-Type\": \"application/json; charset=utf-8\",\n      \"public-address\": publicAddress\n    }\n  };\n};\n\n/**\n * Text/number formatting utilities\n */\nconst formatSmallNumbers = (number, currency = \"usd\", noTilde = false) => {\n  const finalNumber = BigNumber.isBigNumber(number) ? number.toNumber() : number;\n  if (!Number.isFinite(finalNumber)) return \"\";\n  const value = currency.toLowerCase() === \"usd\" ? parseFloat(Number(finalNumber).toFixed(2)) : parseFloat(Number(finalNumber).toFixed(5));\n  const tilde = value > 0 ? \"~ \" : \"\";\n  return `${currency.toLowerCase() === \"usd\" || noTilde ? \"\" : tilde}${Number(value)} ${currency.toUpperCase()}`;\n};\nconst addressSlicer = (address, sliceLength = 5) => {\n  if (!address) return \"\";\n  if (address.length < 11) {\n    return address;\n  }\n  if (typeof address !== \"string\") return \"\";\n  return `${address.slice(0, sliceLength)}...${address.slice(-sliceLength)}`;\n};\nconst significantDigits = (number, perc = false, length_ = 2) => {\n  let input = !BigNumber.isBigNumber(number) ? new BigNumber(number) : number;\n  if (input.isZero()) return input;\n  if (perc) {\n    input = input.times(new BigNumber(100));\n  }\n  let depth;\n  if (input.gte(new BigNumber(1))) {\n    depth = length_;\n  } else {\n    depth = length_ - 1 + Math.ceil(Math.log10(new BigNumber(\"1\").div(input).toNumber()));\n  }\n  const shift = new BigNumber(10).pow(new BigNumber(depth));\n  const roundedNumber = Math.round(shift.times(input).toNumber()) / shift.toNumber();\n  return roundedNumber;\n};\nconst formatDate = inputDate => {\n  const monthList = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n  const date = new Date(inputDate);\n  const day = date.getDate();\n  const month = monthList[date.getMonth()];\n  const year = date.getFullYear();\n  return `${day} ${month} ${year}`;\n};\nconst formatTime = time => {\n  return new Date(time).toTimeString().slice(0, 8);\n};\n\n/**\n * Network utilities\n */\nconst transactionMatchesNetwork = (transaction, chainId) => {\n  if (typeof transaction.chainId !== \"undefined\") {\n    return transaction.chainId === chainId;\n  }\n  return false;\n};\n\n/**\n * Signing utils\n */\nconst hashMessage = message => {\n  const bufferedMessage = Buffer.from(message, \"utf8\");\n  const el = hashPersonalMessage(bufferedMessage);\n  return Buffer.from(el);\n};\nfunction ecsignature(msgHash, privateKey, chainId) {\n  const sig = secp256k1.sign(msgHash, privateKey);\n  const buf = sig.toCompactRawBytes();\n  const r = buf.slice(0, 32);\n  const s = buf.slice(32, 64);\n  const v = chainId === undefined ? BigInt(sig.recovery + 27) : BigInt(sig.recovery + 35) + BigInt(chainId) * BigInt(2);\n  return {\n    r,\n    s,\n    v\n  };\n}\nconst signMessage = async (privateKey, data) => {\n  const privKey = Buffer.from(privateKey, \"hex\");\n  const message = stripHexPrefix(data);\n  const msgSig = ecsignature(Buffer.from(message, \"hex\"), privKey);\n  const rawMsgSig = concatSig(Buffer.from(bigIntToBytes(msgSig.v)), Buffer.from(msgSig.r), Buffer.from(msgSig.s));\n  return rawMsgSig;\n};\n\n/**\n * popup handler utils\n */\nfunction getPopupFeatures({\n  width: w,\n  height: h\n}) {\n  // Fixes dual-screen position                             Most browsers      Firefox\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n  const width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;\n  const height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;\n  const systemZoom = 1; // No reliable estimate\n\n  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  const features = `titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${h / systemZoom},width=${w / systemZoom},top=${top},left=${left}`;\n  return features;\n}\nconst broadcastChannelOptions = {\n  type: \"server\",\n  // type: 'localstorage', // (optional) enforce a type, oneOf['native', 'idb', 'localstorage', 'node']\n  webWorkerSupport: false // (optional) set this to false if you know that your channel will never be used in a WebWorker (increases performance)\n};\nfunction getCustomDeviceInfo() {\n  var _navigator;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  if ((_navigator = navigator) !== null && _navigator !== void 0 && _navigator.brave) {\n    return {\n      browser: \"Brave\"\n    };\n  }\n}\nclass UserError extends Error {}\nconst handleRedirectParameters = (hash, queryParameters) => {\n  const hashParameters = {};\n  const hashUrl = new URL(`${window.location.origin}/?${hash.slice(1)}`);\n  hashUrl.searchParams.forEach((value, key) => {\n    hashParameters[key] = value;\n  });\n  let instanceParameters = {};\n  let error = \"\";\n  if (!queryParameters.windowId) {\n    if (Object.keys(hashParameters).length > 0 && hashParameters.state) {\n      instanceParameters = JSON.parse(safeatob(decodeURIComponent(decodeURIComponent(hashParameters.state)))) || {};\n      error = hashParameters.error_description || hashParameters.error || error;\n    } else if (Object.keys(queryParameters).length > 0 && queryParameters.state) {\n      instanceParameters = JSON.parse(safeatob(decodeURIComponent(decodeURIComponent(queryParameters.state)))) || {};\n      if (queryParameters.error) error = queryParameters.error;\n    }\n  }\n  return {\n    error,\n    instanceParameters,\n    hashParameters\n  };\n};\nfunction sleep(ms) {\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\nconst isUnauthorizedError = error => {\n  return error instanceof Response && error.status === 401;\n};\nconst getErrorAnalyticsProperties = error => {\n  try {\n    const code = error === null || error === void 0 ? void 0 : error.code;\n    const message = error instanceof Error ? error.message : (error === null || error === void 0 ? void 0 : error.message) || (error === null || error === void 0 ? void 0 : error.toString());\n    return {\n      error_message: message,\n      error_code: code\n    };\n  } catch {\n    return {\n      error_message: \"Unknown error\",\n      error_code: undefined\n    };\n  }\n};\nconst getHostname = url => {\n  try {\n    return new URL(url).hostname;\n  } catch {\n    return \"\";\n  }\n};\nconst getCaipChainId = chain => {\n  if (!chain) return undefined;\n  if (chain.chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return `${chain.chainNamespace}:${parseInt(chain.chainId, 16)}`;\n  }\n  if (chain.chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return `${chain.chainNamespace}:${SOLANA_CAIP_CHAIN_MAP[chain.chainId]}`;\n  }\n  // for other chain namespaces, we just return the chainId as is\n  return `${chain.chainNamespace}:${chain.chainId}`;\n};\nconst getEnvVariable = variable => {\n  var _import$meta$env, _process$env;\n  // Check for Vite/browser environment (import.meta.env)\n  if (typeof import.meta !== \"undefined\" && (_import$meta$env = import.meta.env) !== null && _import$meta$env !== void 0 && _import$meta$env[variable]) {\n    var _import$meta$env2;\n    return (_import$meta$env2 = import.meta.env) === null || _import$meta$env2 === void 0 ? void 0 : _import$meta$env2[variable];\n  }\n  // Check for Node.js environment (process.env)\n  if (typeof process !== \"undefined\" && (_process$env = process.env) !== null && _process$env !== void 0 && _process$env[variable]) {\n    var _process$env2;\n    return (_process$env2 = process.env) === null || _process$env2 === void 0 ? void 0 : _process$env2[variable];\n  }\n  return undefined;\n};\n\nexport { UserError, addressSlicer, broadcastChannelOptions, concatSig, ecsignature, formatDate, formatSmallNumbers, formatTime, getCaipChainId, getCustomDeviceInfo, getEnvVariable, getErrorAnalyticsProperties, getHeaders, getHostname, getPopupFeatures, handleRedirectParameters, hashMessage, intToHex, isUnauthorizedError, padWithZeroes, randomId, signMessage, significantDigits, sleep, timeout, transactionMatchesNetwork };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 526, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Transaction/ITransactionController.js"],"sourcesContent":["/**\n * The status of the transaction. Each status represents the state of the transaction internally\n * in the wallet. Some of these correspond with the state of the transaction on the network, but\n * some are wallet-specific.\n */\n\nlet TransactionStatus = /*#__PURE__*/function (TransactionStatus) {\n  TransactionStatus[\"approved\"] = \"approved\";\n  TransactionStatus[\"cancelled\"] = \"cancelled\";\n  TransactionStatus[\"cancelling\"] = \"cancelling\";\n  TransactionStatus[\"confirmed\"] = \"confirmed\";\n  TransactionStatus[\"failed\"] = \"failed\";\n  TransactionStatus[\"finalized\"] = \"finalized\";\n  TransactionStatus[\"processed\"] = \"processed\";\n  TransactionStatus[\"rejected\"] = \"rejected\";\n  TransactionStatus[\"signed\"] = \"signed\";\n  TransactionStatus[\"submitted\"] = \"submitted\";\n  TransactionStatus[\"unapproved\"] = \"unapproved\";\n  TransactionStatus[\"dropped\"] = \"dropped\";\n  TransactionStatus[\"expired\"] = \"expired\";\n  TransactionStatus[\"pending\"] = \"pending\";\n  return TransactionStatus;\n}({});\nconst TRANSACTION_TYPES = {\n  CANCEL: \"cancel\",\n  RETRY: \"retry\",\n  CONTRACT_INTERACTION: \"contractInteraction\",\n  DEPLOY_CONTRACT: \"contractDeployment\",\n  WASM_BASED_DEPLOY: \"wasmBasedDeploy\",\n  STANDARD_TRANSACTION: \"transaction\",\n  STANDARD_PAYMENT_TRANSACTION: \"payment_transaction\",\n  // specific to chains like solana and casper\n  SENT_ETHER: \"sentEther\",\n  SENT_SOL: \"sentSol\",\n  TOKEN_METHOD_TRANSFER: \"transfer\",\n  TOKEN_METHOD_TRANSFER_FROM: \"transferFrom\",\n  TOKEN_METHOD_APPROVE: \"approve\",\n  TOKEN_BURN: \"burn\",\n  COLLECTIBLE_METHOD_SAFE_TRANSFER_FROM: \"safeTransferFrom\",\n  SET_APPROVAL_FOR_ALL: \"setApprovalForAll\"\n};\nconst TX_EVENTS = {\n  TX_WARNING: \"tx:warning\",\n  TX_ERROR: \"tx:error\",\n  TX_FAILED: \"tx:failed\",\n  TX_CONFIRMED: \"tx:confirmed\",\n  TX_DROPPED: \"tx:dropped\",\n  TX_EXPIRED: \"tx:expired\",\n  TX_STATUS_UPDATE: \"tx:status_update\",\n  TX_UNAPPROVED: \"tx:unapproved\",\n  TX_RETRY: \"tx:retry\",\n  TX_BLOCK_UPDATE: \"tx:block_update\"\n};\n\n/**\n * Transaction controller configuration\n */\n\n/**\n * Transaction controller state\n */\n\n/**\n * Result\n *\n * result - Promise resolving to a new transaction hash\n * transactionMeta - Meta information about this new transaction\n */\n\nexport { TRANSACTION_TYPES, TX_EVENTS, TransactionStatus };\n"],"names":[],"mappings":";;;;;;;;AAAA;;;;CAIC,GAED,IAAI,oBAAoB,WAAW,GAAE,SAAU,iBAAiB;IAC9D,iBAAiB,CAAC,WAAW,GAAG;IAChC,iBAAiB,CAAC,YAAY,GAAG;IACjC,iBAAiB,CAAC,aAAa,GAAG;IAClC,iBAAiB,CAAC,YAAY,GAAG;IACjC,iBAAiB,CAAC,SAAS,GAAG;IAC9B,iBAAiB,CAAC,YAAY,GAAG;IACjC,iBAAiB,CAAC,YAAY,GAAG;IACjC,iBAAiB,CAAC,WAAW,GAAG;IAChC,iBAAiB,CAAC,SAAS,GAAG;IAC9B,iBAAiB,CAAC,YAAY,GAAG;IACjC,iBAAiB,CAAC,aAAa,GAAG;IAClC,iBAAiB,CAAC,UAAU,GAAG;IAC/B,iBAAiB,CAAC,UAAU,GAAG;IAC/B,iBAAiB,CAAC,UAAU,GAAG;IAC/B,OAAO;AACT,EAAE,CAAC;AACH,MAAM,oBAAoB;IACxB,QAAQ;IACR,OAAO;IACP,sBAAsB;IACtB,iBAAiB;IACjB,mBAAmB;IACnB,sBAAsB;IACtB,8BAA8B;IAC9B,4CAA4C;IAC5C,YAAY;IACZ,UAAU;IACV,uBAAuB;IACvB,4BAA4B;IAC5B,sBAAsB;IACtB,YAAY;IACZ,uCAAuC;IACvC,sBAAsB;AACxB;AACA,MAAM,YAAY;IAChB,YAAY;IACZ,UAAU;IACV,WAAW;IACX,cAAc;IACd,YAAY;IACZ,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,UAAU;IACV,iBAAiB;AACnB","ignoreList":[0]}},
    {"offset": {"line": 590, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Block/BaseBlockTracker.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { BaseController } from '../BaseController.js';\n\nconst sec = 1000;\nconst calculateSum = (accumulator, currentValue) => accumulator + currentValue;\nclass BaseBlockTracker extends BaseController {\n  constructor({\n    config = {},\n    state = {}\n  }) {\n    super({\n      config,\n      state\n    });\n\n    // config\n    _defineProperty(this, \"name\", \"BaseBlockTracker\");\n    _defineProperty(this, \"_blockResetTimeout\", void 0);\n    this.defaultState = {\n      _currentBlock: {\n        idempotencyKey: \"\"\n      },\n      _isRunning: false\n    };\n    this.defaultConfig = {\n      blockResetDuration: 20 * sec\n    };\n    this.initialize();\n\n    // bind functions for internal use\n    this._onNewListener = this._onNewListener.bind(this);\n    this._onRemoveListener = this._onRemoveListener.bind(this);\n    this._resetCurrentBlock = this._resetCurrentBlock.bind(this);\n\n    // listen for handler changes\n    this._setupInternalEvents();\n  }\n  isRunning() {\n    return this.state._isRunning;\n  }\n  getCurrentBlock() {\n    return this.state._currentBlock;\n  }\n  async getLatestBlock() {\n    // return if available\n    if (this.state._currentBlock.idempotencyKey) {\n      return this.state._currentBlock;\n    }\n    // wait for a new latest block\n    const latestBlock = await new Promise(resolve => {\n      this.once(\"latest\", block => {\n        if (block) {\n          resolve(block);\n        }\n      });\n    });\n    // return newly set current block\n    return latestBlock;\n  }\n\n  // dont allow module consumer to remove our internal event listeners\n  removeAllListeners(eventName) {\n    if (eventName) {\n      super.removeAllListeners(eventName);\n    } else {\n      super.removeAllListeners();\n    }\n    // re-add internal events\n    this._setupInternalEvents();\n    // trigger stop check just in case\n    this._onRemoveListener();\n    return this;\n  }\n\n  /**\n   * To be implemented in subclass.\n   */\n  _start() {\n    // default behavior is noop\n  }\n\n  /**\n   * To be implemented in subclass.\n   */\n  _end() {\n    // default behavior is noop\n  }\n  _newPotentialLatest(newBlock) {\n    const currentBlock = this.state._currentBlock;\n    // only update if block number is higher\n    if (currentBlock && newBlock.idempotencyKey === currentBlock.idempotencyKey) {\n      return;\n    }\n    this._setCurrentBlock(newBlock);\n  }\n  _setupInternalEvents() {\n    // first remove listeners for idempotency\n    this.removeListener(\"newListener\", this._onNewListener);\n    this.removeListener(\"removeListener\", this._onRemoveListener);\n    // then add them\n    this.on(\"removeListener\", this._onRemoveListener);\n    this.on(\"newListener\", this._onNewListener);\n  }\n  _onNewListener() {\n    this._maybeStart();\n  }\n  _onRemoveListener() {\n    // `removeListener` is called *after* the listener is removed\n    if (this._getBlockTrackerEventCount() > 0) {\n      return;\n    }\n    this._maybeEnd();\n  }\n  _maybeStart() {\n    if (this.state._isRunning) {\n      return;\n    }\n    this.state._isRunning = true;\n    // cancel setting latest block to stale\n    this._cancelBlockResetTimeout();\n    this._start();\n  }\n  _maybeEnd() {\n    if (!this.state._isRunning) {\n      return;\n    }\n    this.state._isRunning = false;\n    this._setupBlockResetTimeout();\n    this._end();\n  }\n  _getBlockTrackerEventCount() {\n    const blockTrackerEvents = [\"latest\", \"sync\"];\n    return blockTrackerEvents.map(eventName => this.listenerCount(eventName)).reduce(calculateSum);\n  }\n  _setCurrentBlock(newBlock) {\n    const oldBlock = this.state._currentBlock;\n    this.update({\n      _currentBlock: newBlock\n    });\n    this.emit(\"latest\", newBlock);\n    this.emit(\"sync\", {\n      oldBlock,\n      newBlock\n    });\n  }\n  _setupBlockResetTimeout() {\n    // clear any existing timeout\n    this._cancelBlockResetTimeout();\n    // clear latest block when stale\n    this._blockResetTimeout = setTimeout(this._resetCurrentBlock, this.config.blockResetDuration);\n\n    // nodejs - dont hold process open\n    if (this._blockResetTimeout.unref) {\n      this._blockResetTimeout.unref();\n    }\n  }\n  _cancelBlockResetTimeout() {\n    if (this._blockResetTimeout) {\n      clearTimeout(this._blockResetTimeout);\n    }\n  }\n  _resetCurrentBlock() {\n    this.update({\n      _currentBlock: {\n        idempotencyKey: \"\"\n      }\n    });\n  }\n}\n\nexport { BaseBlockTracker };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 760, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/utils/PollingManager.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport log from 'loglevel';\nimport { timeout } from './utils.js';\n\nclass PollingManager {\n  constructor(idleTimeTracker, pollingInterval) {\n    _defineProperty(this, \"idleTimeTracker\", void 0);\n    _defineProperty(this, \"pollingInterval\", void 0);\n    _defineProperty(this, \"isPolling\", false);\n    this.pollingInterval = pollingInterval;\n    this.idleTimeTracker = idleTimeTracker;\n  }\n  start(action) {\n    this.idleTimeTracker.on(\"active\", this.poll.bind(this, action));\n    this.idleTimeTracker.on(\"idle\", this.stop.bind(this));\n    this.poll(action);\n  }\n  stop() {\n    this.isPolling = false;\n  }\n  async poll(action) {\n    if (this.isPolling) return;\n    this.isPolling = true;\n    while (this.isPolling) {\n      if (this.idleTimeTracker.checkIfIdle()) {\n        this.isPolling = false;\n        return;\n      }\n      try {\n        await action();\n      } catch (error) {\n        log.error(error);\n      }\n      await timeout(this.pollingInterval);\n    }\n  }\n}\n\nexport { PollingManager };\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM;IACJ,YAAY,eAAe,EAAE,eAAe,CAAE;QAC5C,IAAA,0KAAe,EAAC,IAAI,EAAE,mBAAmB,KAAK;QAC9C,IAAA,0KAAe,EAAC,IAAI,EAAE,mBAAmB,KAAK;QAC9C,IAAA,0KAAe,EAAC,IAAI,EAAE,aAAa;QACnC,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,eAAe,GAAG;IACzB;IACA,MAAM,MAAM,EAAE;QACZ,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;QACvD,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI;QACnD,IAAI,CAAC,IAAI,CAAC;IACZ;IACA,OAAO;QACL,IAAI,CAAC,SAAS,GAAG;IACnB;IACA,MAAM,KAAK,MAAM,EAAE;QACjB,IAAI,IAAI,CAAC,SAAS,EAAE;QACpB,IAAI,CAAC,SAAS,GAAG;QACjB,MAAO,IAAI,CAAC,SAAS,CAAE;YACrB,IAAI,IAAI,CAAC,eAAe,CAAC,WAAW,IAAI;gBACtC,IAAI,CAAC,SAAS,GAAG;gBACjB;YACF;YACA,IAAI;gBACF,MAAM;YACR,EAAE,OAAO,OAAO;gBACd,sJAAG,CAAC,KAAK,CAAC;YACZ;YACA,MAAM,IAAA,+PAAO,EAAC,IAAI,CAAC,eAAe;QACpC;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Currency/BaseCurrencyController.js"],"sourcesContent":["import { BaseController } from '../BaseController.js';\n\n// every ten minutes\nconst POLLING_INTERVAL = 600000;\nclass BaseCurrencyController extends BaseController {\n  constructor({\n    config = {},\n    state\n  }) {\n    super({\n      config,\n      state\n    });\n    this.defaultState = {\n      currentCurrency: \"usd\",\n      conversionRate: 0,\n      conversionDate: \"N/A\",\n      nativeCurrency: \"ETH\"\n    };\n    this.defaultConfig = {\n      pollInterval: POLLING_INTERVAL\n    };\n    this.initialize();\n  }\n\n  //\n  // PUBLIC METHODS\n  //\n\n  getNativeCurrency() {\n    return this.state.nativeCurrency;\n  }\n  setNativeCurrency(nativeCurrency) {\n    this.update({\n      nativeCurrency,\n      ticker: nativeCurrency\n    });\n  }\n  getCurrentCurrency() {\n    return this.state.currentCurrency;\n  }\n  setCurrentCurrency(currentCurrency) {\n    this.update({\n      currentCurrency\n    });\n  }\n\n  /**\n   * A getter for the conversionRate property\n   *\n   * @returns The conversion rate from ETH to the selected currency.\n   *\n   */\n  getConversionRate() {\n    return this.state.conversionRate;\n  }\n  setConversionRate(conversionRate) {\n    this.update({\n      conversionRate\n    });\n  }\n\n  /**\n   * A getter for the conversionDate property\n   *\n   * @returns The date at which the conversion rate was set. Expressed in milliseconds since midnight of\n   * January 1, 1970\n   *\n   */\n  getConversionDate() {\n    return this.state.conversionDate;\n  }\n  setConversionDate(conversionDate) {\n    this.update({\n      conversionDate\n    });\n  }\n}\n\nexport { BaseCurrencyController };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,oBAAoB;AACpB,MAAM,mBAAmB;AACzB,MAAM,+BAA+B,sQAAc;IACjD,YAAY,EACV,SAAS,CAAC,CAAC,EACX,KAAK,EACN,CAAE;QACD,KAAK,CAAC;YACJ;YACA;QACF;QACA,IAAI,CAAC,YAAY,GAAG;YAClB,iBAAiB;YACjB,gBAAgB;YAChB,gBAAgB;YAChB,gBAAgB;QAClB;QACA,IAAI,CAAC,aAAa,GAAG;YACnB,cAAc;QAChB;QACA,IAAI,CAAC,UAAU;IACjB;IAEA,EAAE;IACF,iBAAiB;IACjB,EAAE;IAEF,oBAAoB;QAClB,OAAO,IAAI,CAAC,KAAK,CAAC,cAAc;IAClC;IACA,kBAAkB,cAAc,EAAE;QAChC,IAAI,CAAC,MAAM,CAAC;YACV;YACA,QAAQ;QACV;IACF;IACA,qBAAqB;QACnB,OAAO,IAAI,CAAC,KAAK,CAAC,eAAe;IACnC;IACA,mBAAmB,eAAe,EAAE;QAClC,IAAI,CAAC,MAAM,CAAC;YACV;QACF;IACF;IAEA;;;;;GAKC,GACD,oBAAoB;QAClB,OAAO,IAAI,CAAC,KAAK,CAAC,cAAc;IAClC;IACA,kBAAkB,cAAc,EAAE;QAChC,IAAI,CAAC,MAAM,CAAC;YACV;QACF;IACF;IAEA;;;;;;GAMC,GACD,oBAAoB;QAClB,OAAO,IAAI,CAAC,KAAK,CAAC,cAAc;IAClC;IACA,kBAAkB,cAAc,EAAE;QAChC,IAAI,CAAC,MAAM,CAAC;YACV;QACF;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 886, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/utils/lodashUtils.js"],"sourcesContent":["function omitBy(object, predicate) {\n  // Create a new object to store the results\n  const result = {};\n\n  // Iterate over all own properties of the object\n  for (const [key, value] of Object.entries(object)) {\n    if (!predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\nfunction pickBy(object, predicate) {\n  // Create a new object to store the results\n  const result = {};\n  for (const [key, value] of Object.entries(object)) {\n    if (predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\nfunction cloneDeep(object) {\n  try {\n    return structuredClone(object);\n  } catch {\n    return JSON.parse(JSON.stringify(object, (_, v) => typeof v === \"bigint\" ? v.toString() : v));\n  }\n}\nfunction sortBy(arr, key) {\n  return arr.slice().sort((a, b) => {\n    if (a[key] < b[key]) return -1;\n    if (a[key] > b[key]) return 1;\n    return 0;\n  });\n}\nfunction keyBy(arr, key) {\n  return arr.reduce((acc, item) => {\n    const keyValue = item[key];\n    if (typeof keyValue === \"string\" || typeof keyValue === \"number\") {\n      acc[keyValue.toString()] = item;\n    }\n    return acc;\n  }, {});\n}\nfunction mapValues(obj, iteratee) {\n  return Object.fromEntries(Object.entries(obj).map(([key, value]) => [key, iteratee(value, key)]));\n}\n\nexport { cloneDeep, keyBy, mapValues, omitBy, pickBy, sortBy };\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,SAAS,OAAO,MAAM,EAAE,SAAS;IAC/B,2CAA2C;IAC3C,MAAM,SAAS,CAAC;IAEhB,gDAAgD;IAChD,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,QAAS;QACjD,IAAI,CAAC,UAAU,OAAO,MAAM;YAC1B,MAAM,CAAC,IAAI,GAAG;QAChB;IACF;IACA,OAAO;AACT;AACA,SAAS,OAAO,MAAM,EAAE,SAAS;IAC/B,2CAA2C;IAC3C,MAAM,SAAS,CAAC;IAChB,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,QAAS;QACjD,IAAI,UAAU,OAAO,MAAM;YACzB,MAAM,CAAC,IAAI,GAAG;QAChB;IACF;IACA,OAAO;AACT;AACA,SAAS,UAAU,MAAM;IACvB,IAAI;QACF,OAAO,gBAAgB;IACzB,EAAE,OAAM;QACN,OAAO,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC,QAAQ,CAAC,GAAG,IAAM,OAAO,MAAM,WAAW,EAAE,QAAQ,KAAK;IAC5F;AACF;AACA,SAAS,OAAO,GAAG,EAAE,GAAG;IACtB,OAAO,IAAI,KAAK,GAAG,IAAI,CAAC,CAAC,GAAG;QAC1B,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC;QAC7B,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,EAAE,OAAO;QAC5B,OAAO;IACT;AACF;AACA,SAAS,MAAM,GAAG,EAAE,GAAG;IACrB,OAAO,IAAI,MAAM,CAAC,CAAC,KAAK;QACtB,MAAM,WAAW,IAAI,CAAC,IAAI;QAC1B,IAAI,OAAO,aAAa,YAAY,OAAO,aAAa,UAAU;YAChE,GAAG,CAAC,SAAS,QAAQ,GAAG,GAAG;QAC7B;QACA,OAAO;IACT,GAAG,CAAC;AACN;AACA,SAAS,UAAU,GAAG,EAAE,QAAQ;IAC9B,OAAO,OAAO,WAAW,CAAC,OAAO,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,GAAK;YAAC;YAAK,SAAS,OAAO;SAAK;AACjG","ignoreList":[0]}},
    {"offset": {"line": 955, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Keyring/BaseKeyringController.js"],"sourcesContent":["import { BaseController } from '../BaseController.js';\nimport { hashMessage, signMessage } from '../utils/utils.js';\n\nclass BaseKeyringController extends BaseController {\n  constructor({\n    config = {},\n    state\n  }) {\n    var _state$wallets;\n    super({\n      config,\n      state\n    });\n    this.defaultState = {\n      wallets: (_state$wallets = state.wallets) !== null && _state$wallets !== void 0 ? _state$wallets : []\n    };\n    this.initialize();\n  }\n\n  // for signing auth message\n  async signAuthMessage(address, message) {\n    const keyring = this.state.wallets.find(x => x.address === address);\n    if (!keyring) {\n      throw new Error(\"key does not exist\");\n    }\n    const hashedMessage = hashMessage(message).toString(\"hex\");\n    const rawMessageSig = await signMessage(keyring.privateKey, hashedMessage);\n    return rawMessageSig;\n  }\n}\n\nexport { BaseKeyringController };\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,8BAA8B,sQAAc;IAChD,YAAY,EACV,SAAS,CAAC,CAAC,EACX,KAAK,EACN,CAAE;QACD,IAAI;QACJ,KAAK,CAAC;YACJ;YACA;QACF;QACA,IAAI,CAAC,YAAY,GAAG;YAClB,SAAS,CAAC,iBAAiB,MAAM,OAAO,MAAM,QAAQ,mBAAmB,KAAK,IAAI,iBAAiB,EAAE;QACvG;QACA,IAAI,CAAC,UAAU;IACjB;IAEA,2BAA2B;IAC3B,MAAM,gBAAgB,OAAO,EAAE,OAAO,EAAE;QACtC,MAAM,UAAU,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,OAAO,KAAK;QAC3D,IAAI,CAAC,SAAS;YACZ,MAAM,IAAI,MAAM;QAClB;QACA,MAAM,gBAAgB,IAAA,mQAAW,EAAC,SAAS,QAAQ,CAAC;QACpD,MAAM,gBAAgB,MAAM,IAAA,mQAAW,EAAC,QAAQ,UAAU,EAAE;QAC5D,OAAO;IACT;AACF","ignoreList":[0]}},
    {"offset": {"line": 991, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Message/constants.js"],"sourcesContent":["const MessageStatus = {\n  UNAPPROVED: \"unapproved\",\n  SIGNED: \"signed\",\n  PENDING: \"pending\",\n  APPROVED: \"approved\",\n  REJECTED: \"rejected\",\n  FAILED: \"failed\"\n};\nconst MESSAGE_EVENTS = {\n  UNAPPROVED_MESSAGE: \"unapprovedMessage\"\n};\n\nexport { MESSAGE_EVENTS, MessageStatus };\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,gBAAgB;IACpB,YAAY;IACZ,QAAQ;IACR,SAAS;IACT,UAAU;IACV,UAAU;IACV,QAAQ;AACV;AACA,MAAM,iBAAiB;IACrB,oBAAoB;AACtB","ignoreList":[0]}},
    {"offset": {"line": 1013, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Message/AbstractMessagecontroller.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { providerErrors, rpcErrors } from '@web3auth/auth';\nimport { BaseController } from '../BaseController.js';\nimport { MessageStatus } from './constants.js';\n\nclass AbstractMessageController extends BaseController {\n  /**\n   * Controller in charge of managing - storing, adding, removing, updating - Messages.\n   *\n   */\n  constructor({\n    config,\n    state\n  }) {\n    super({\n      config,\n      state\n    });\n    _defineProperty(this, \"messages\", void 0);\n    this.defaultState = {\n      unapprovedMessages: {},\n      unapprovedMessagesCount: 0\n    };\n    this.messages = [];\n    this.defaultConfig = {};\n    super.initialize();\n  }\n  getMessage(messageId) {\n    return this.messages.find(message => message.id === messageId);\n  }\n  getAllMessages() {\n    return this.messages;\n  }\n  setMetadata(messageId, metadata) {\n    const message = this.getMessage(messageId);\n    if (!message) {\n      throw new Error(`${this.name}: Message not found for id: ${messageId}.`);\n    }\n    message.metadata = metadata;\n    this.updateMessage(message);\n  }\n  getUnapprovedMessages() {\n    return this.messages.filter(message => message.status === MessageStatus.UNAPPROVED).reduce((result, message) => {\n      result[message.id] = message;\n      return result;\n    }, {});\n  }\n  async addMessage(message) {\n    this.messages.push(message);\n    this.saveMessageList();\n  }\n  approveMessage(messageId, messageParams) {\n    this.setMessageStatus(messageId, MessageStatus.APPROVED);\n    return this.prepMessageForSigning(messageParams);\n  }\n  setMessageStatus(messageId, status) {\n    const message = this.getMessage(messageId);\n    if (!message) {\n      throw new Error(`${this.name}: Message not found for id: ${messageId}.`);\n    }\n    message.status = status;\n    this.updateMessage(message);\n    this.emit(`${messageId}:${status}`, message);\n    if (status === MessageStatus.REJECTED || status === MessageStatus.SIGNED || status === MessageStatus.FAILED) {\n      this.emit(`${messageId}:finished`, message);\n    }\n  }\n  async waitForFinishStatus(msgParams, messageName) {\n    return new Promise((resolve, reject) => {\n      const handleFinished = msg => {\n        if (msg.status === MessageStatus.REJECTED) {\n          return reject(providerErrors.userRejectedRequest(`${messageName} Signature: User denied message signature`));\n        }\n        if (msg.status === MessageStatus.FAILED) {\n          return reject(rpcErrors.internal(`${messageName} Signature: failed to sign message ${msg.error}`));\n        }\n        if (msg.status === MessageStatus.SIGNED) {\n          return resolve(msg.rawSig);\n        }\n        return reject(rpcErrors.internal(`${messageName} Signature: Unknown problem: ${JSON.stringify(msgParams)}`));\n      };\n      this.once(`${msgParams.id}:finished`, handleFinished);\n    });\n  }\n  updateMessage(message) {\n    const index = this.messages.findIndex(msg => message.id === msg.id);\n    if (index !== -1) {\n      this.messages[index] = message;\n    }\n    this.saveMessageList();\n  }\n  saveMessageList() {\n    const unapprovedMessages = this.getUnapprovedMessages();\n    const unapprovedMessagesCount = Object.keys(unapprovedMessages).length;\n    this.update({\n      unapprovedMessages,\n      unapprovedMessagesCount\n    });\n  }\n}\n\nexport { AbstractMessageController };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1121, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/enums.js"],"sourcesContent":["const FEATURES_PROVIDER_CHANGE_WINDOW = {\n  height: 660,\n  width: 375\n};\nconst FEATURES_DEFAULT_WALLET_WINDOW = {\n  height: 740,\n  width: 1315\n};\nconst FEATURES_DEFAULT_POPUP_WINDOW = {\n  height: 700,\n  width: 1200\n};\nconst FEATURES_CONFIRM_WINDOW = {\n  height: 700,\n  width: 450\n};\nconst POPUP_LOADED = \"popup_loaded\";\nconst POPUP_RESULT = \"popup_result\";\nconst SETUP_COMPLETE = \"setup_complete\";\nconst ACTIVITY_ACTION_ALL = \"walletActivity.allTransactions\";\nconst ACTIVITY_ACTION_SEND = \"walletActivity.send\";\nconst ACTIVITY_ACTION_BURN = \"walletActivity.burn\";\nconst ACTIVITY_ACTION_RECEIVE = \"walletActivity.receive\";\nconst ACTIVITY_ACTION_TOPUP = \"walletActivity.topup\";\nconst ACTIVITY_ACTION_CREATE_TRUSTLINE = \"walletActivity.createTrustline\";\nconst ACTIVITY_ACTION_REMOVE_TRUSTLINE = \"walletActivity.removeTrustline\";\nconst ACTIVITY_ACTION_CREATE_NFT_OFFER = \"walletActivity.createNftOffer\";\nconst ACTIVITY_ACTION_ACCEPT_NFT_OFFER = \"walletActivity.acceptNftOffer\";\nconst ACTIVITY_ACTION_CANCEL_NFT_OFFER = \"walletActivity.cancelNftOffer\";\nconst ACTIVITY_PERIOD_ALL = \"walletActivity.all\";\nconst ACTIVITY_PERIOD_WEEK_ONE = \"walletActivity.lastOneWeek\";\nconst ACTIVITY_PERIOD_MONTH_ONE = \"walletActivity.lastOneMonth\";\nconst ACTIVITY_PERIOD_MONTH_SIX = \"walletActivity.lastSixMonts\";\nconst ACTIVITY_STATUS_SUCCESSFUL = \"walletActivity.successful\";\nconst ACTIVITY_STATUS_UNSUCCESSFUL = \"walletActivity.unsuccessful\";\nconst ACTIVITY_STATUS_PENDING = \"walletActivity.pending\";\nconst ACTIVITY_STATUS_CANCELLED = \"walletActivity.cancelled\";\nconst ACTIVITY_STATUS_CANCELLING = \"walletActivity.cancelling\";\nconst COMMUNICATION_NOTIFICATIONS = {\n  IFRAME_STATUS: \"iframe_status\",\n  // Tell embed to close the window\n  CLOSE_WINDOW: \"close_window\",\n  USER_LOGGED_IN: \"user_logged_in\",\n  USER_LOGGED_OUT: \"user_logged_out\",\n  // toggle widget button based on gating and config\n  TOGGLE_WIDGET_BUTTON: \"toggle_widget_button\",\n  // allow wallet service based on gating\n  ALLOW_WALLET_SERVICE: \"allow_wallet_service\"\n};\nconst COMMUNICATION_JRPC_METHODS = {\n  LOGOUT: \"logout\",\n  WALLET_INSTANCE_ID: \"wallet_instance_id\",\n  USER_INFO: \"user_info\",\n  SET_PROVIDER: \"set_provider\",\n  TOPUP: \"topup\",\n  IFRAME_STATUS: \"iframe_status\",\n  // user has closed the window from embed's side\n  CLOSED_WINDOW: \"closed_window\",\n  WINDOW_BLOCKED: \"window_blocked\",\n  GET_PROVIDER_STATE: \"get_provider_state\",\n  LOGIN_WITH_PRIVATE_KEY: \"login_with_private_key\",\n  SHOW_WALLET_CONNECT: \"show_wallet_connect\",\n  SHOW_FUNDING: \"show_funding\",\n  SHOW_CHECKOUT: \"show_checkout\",\n  SHOW_RECEIVE: \"show_receive\",\n  SHOW_TRANSFER: \"show_transfer\",\n  SHOW_WALLET_UI: \"show_wallet_ui\",\n  SHOW_SWAP: \"show_swap\",\n  LOGIN_WITH_SESSION_ID: \"login_with_session_id\"\n};\nconst PROVIDER_JRPC_METHODS = {\n  GET_PROVIDER_STATE: \"wallet_get_provider_state\",\n  WALLET_SWITCH_CHAIN: \"wallet_switchChain\"\n};\nconst PROVIDER_NOTIFICATIONS = {\n  ACCOUNTS_CHANGED: \"wallet_accounts_changed\",\n  CHAIN_CHANGED: \"wallet_chain_changed\",\n  UNLOCK_STATE_CHANGED: \"wallet_unlock_state_changed\"\n};\nconst BROADCAST_CHANNELS = {\n  REDIRECT_CHANNEL: \"redirect_channel\",\n  PROVIDER_CHANGE_CHANNEL: \"torus_provider_change_channel\",\n  TRANSACTION_CHANNEL: \"torus_channel\",\n  MESSAGE_CHANNEL: \"torus_message_channel\",\n  WALLET_LOGOUT_CHANNEL: \"wallet_logout_channel\",\n  WALLET_SELECTED_ADDRESS_CHANNEL: \"wallet_selected_address_channel\",\n  WALLET_NETWORK_CHANGE_CHANNEL: \"wallet_network_change_channel\",\n  WALLET_ACCOUNT_IMPORT_CHANNEL: \"wallet_account_import_channel\",\n  THEME_CHANGE: \"theme_change_channel\",\n  TOP_UP_CHANNEL: \"top_up_channel\"\n};\nconst BROADCAST_CHANNELS_MSGS = {\n  LOGOUT: \"logout\",\n  ACCOUNT_IMPORTED: \"account_imported\",\n  SELECTED_ADDRESS_CHANGE: \"selected_address_change\",\n  NETWORK_CHANGE: \"network_change\",\n  SET_THEME: \"set_theme\"\n};\nlet ControllerEvents = /*#__PURE__*/function (ControllerEvents) {\n  ControllerEvents[\"UserUnauthorized\"] = \"user.unauthorized\";\n  return ControllerEvents;\n}({});\n\nexport { ACTIVITY_ACTION_ACCEPT_NFT_OFFER, ACTIVITY_ACTION_ALL, ACTIVITY_ACTION_BURN, ACTIVITY_ACTION_CANCEL_NFT_OFFER, ACTIVITY_ACTION_CREATE_NFT_OFFER, ACTIVITY_ACTION_CREATE_TRUSTLINE, ACTIVITY_ACTION_RECEIVE, ACTIVITY_ACTION_REMOVE_TRUSTLINE, ACTIVITY_ACTION_SEND, ACTIVITY_ACTION_TOPUP, ACTIVITY_PERIOD_ALL, ACTIVITY_PERIOD_MONTH_ONE, ACTIVITY_PERIOD_MONTH_SIX, ACTIVITY_PERIOD_WEEK_ONE, ACTIVITY_STATUS_CANCELLED, ACTIVITY_STATUS_CANCELLING, ACTIVITY_STATUS_PENDING, ACTIVITY_STATUS_SUCCESSFUL, ACTIVITY_STATUS_UNSUCCESSFUL, BROADCAST_CHANNELS, BROADCAST_CHANNELS_MSGS, COMMUNICATION_JRPC_METHODS, COMMUNICATION_NOTIFICATIONS, ControllerEvents, FEATURES_CONFIRM_WINDOW, FEATURES_DEFAULT_POPUP_WINDOW, FEATURES_DEFAULT_WALLET_WINDOW, FEATURES_PROVIDER_CHANGE_WINDOW, POPUP_LOADED, POPUP_RESULT, PROVIDER_JRPC_METHODS, PROVIDER_NOTIFICATIONS, SETUP_COMPLETE };\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,kCAAkC;IACtC,QAAQ;IACR,OAAO;AACT;AACA,MAAM,iCAAiC;IACrC,QAAQ;IACR,OAAO;AACT;AACA,MAAM,gCAAgC;IACpC,QAAQ;IACR,OAAO;AACT;AACA,MAAM,0BAA0B;IAC9B,QAAQ;IACR,OAAO;AACT;AACA,MAAM,eAAe;AACrB,MAAM,eAAe;AACrB,MAAM,iBAAiB;AACvB,MAAM,sBAAsB;AAC5B,MAAM,uBAAuB;AAC7B,MAAM,uBAAuB;AAC7B,MAAM,0BAA0B;AAChC,MAAM,wBAAwB;AAC9B,MAAM,mCAAmC;AACzC,MAAM,mCAAmC;AACzC,MAAM,mCAAmC;AACzC,MAAM,mCAAmC;AACzC,MAAM,mCAAmC;AACzC,MAAM,sBAAsB;AAC5B,MAAM,2BAA2B;AACjC,MAAM,4BAA4B;AAClC,MAAM,4BAA4B;AAClC,MAAM,6BAA6B;AACnC,MAAM,+BAA+B;AACrC,MAAM,0BAA0B;AAChC,MAAM,4BAA4B;AAClC,MAAM,6BAA6B;AACnC,MAAM,8BAA8B;IAClC,eAAe;IACf,iCAAiC;IACjC,cAAc;IACd,gBAAgB;IAChB,iBAAiB;IACjB,kDAAkD;IAClD,sBAAsB;IACtB,uCAAuC;IACvC,sBAAsB;AACxB;AACA,MAAM,6BAA6B;IACjC,QAAQ;IACR,oBAAoB;IACpB,WAAW;IACX,cAAc;IACd,OAAO;IACP,eAAe;IACf,+CAA+C;IAC/C,eAAe;IACf,gBAAgB;IAChB,oBAAoB;IACpB,wBAAwB;IACxB,qBAAqB;IACrB,cAAc;IACd,eAAe;IACf,cAAc;IACd,eAAe;IACf,gBAAgB;IAChB,WAAW;IACX,uBAAuB;AACzB;AACA,MAAM,wBAAwB;IAC5B,oBAAoB;IACpB,qBAAqB;AACvB;AACA,MAAM,yBAAyB;IAC7B,kBAAkB;IAClB,eAAe;IACf,sBAAsB;AACxB;AACA,MAAM,qBAAqB;IACzB,kBAAkB;IAClB,yBAAyB;IACzB,qBAAqB;IACrB,iBAAiB;IACjB,uBAAuB;IACvB,iCAAiC;IACjC,+BAA+B;IAC/B,+BAA+B;IAC/B,cAAc;IACd,gBAAgB;AAClB;AACA,MAAM,0BAA0B;IAC9B,QAAQ;IACR,kBAAkB;IAClB,yBAAyB;IACzB,gBAAgB;IAChB,WAAW;AACb;AACA,IAAI,mBAAmB,WAAW,GAAE,SAAU,gBAAgB;IAC5D,gBAAgB,CAAC,mBAAmB,GAAG;IACvC,OAAO;AACT,EAAE,CAAC","ignoreList":[0]}},
    {"offset": {"line": 1296, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Network/createFetchMiddleware.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport { createAsyncMiddleware, serializeError, rpcErrors } from '@web3auth/auth';\nimport { ANALYTICS_TRACKED_NETWORK_JPRC_METHODS, ANALYTICS_EVENTS, ANALYTICS_JRPC_REQUEST_TYPES } from './constants.js';\nimport { getHostname, getCaipChainId } from '../utils/utils.js';\n\nconst RETRIABLE_ERRORS = [\n// ignore server overload errors\n\"Gateway timeout\", \"ETIMEDOUT\",\n// ignore server sent html error pages\n// or truncated json responses\n\"failed to parse response body\",\n// ignore errors where http req failed to establish\n\"Failed to fetch\"];\nfunction checkForHttpErrors(fetchRes) {\n  // check for errors\n  switch (fetchRes.status) {\n    case 405:\n      throw rpcErrors.methodNotFound();\n    case 418:\n      throw rpcErrors.internal({\n        message: `Request is being rate limited.`,\n        data: {\n          cause: fetchRes\n        }\n      });\n    case 503:\n    case 504:\n      throw rpcErrors.internal({\n        message: `Gateway timeout. The request took too long to process.` + `This can happen when querying over too wide a block range.`,\n        data: {\n          cause: fetchRes\n        }\n      });\n  }\n}\nfunction timeout(duration) {\n  return new Promise(resolve => {\n    setTimeout(resolve, duration);\n  });\n}\nfunction parseResponse(fetchRes, body) {\n  // check for error code\n  if (fetchRes.status !== 200) {\n    throw rpcErrors.internal({\n      message: `Non-200 status code: '${fetchRes.status}'`,\n      data: body\n    });\n  }\n  // check for rpc error\n  if (body.error) {\n    var _body$error;\n    throw rpcErrors.internal({\n      data: body.error,\n      message: (_body$error = body.error) === null || _body$error === void 0 ? void 0 : _body$error.message\n    });\n  }\n  // return successful result\n  return body.result;\n}\nfunction createFetchConfigFromReq({\n  req,\n  rpcTarget,\n  originHttpHeaderKey\n}) {\n  const parsedUrl = new URL(rpcTarget);\n\n  // prepare payload\n  // copy only canonical json rpc properties\n  const payload = {\n    id: req.id,\n    jsonrpc: req.jsonrpc,\n    method: req.method,\n    params: req.params\n  };\n\n  // extract 'origin' parameter from request\n  const originDomain = req.origin;\n\n  // serialize request body\n  const serializedPayload = JSON.stringify(payload);\n\n  // configure fetch params\n  const fetchParams = {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: serializedPayload\n  };\n\n  // optional: add request origin as header\n  if (originHttpHeaderKey && originDomain) {\n    fetchParams.headers[originHttpHeaderKey] = originDomain;\n  }\n  return {\n    fetchUrl: parsedUrl.href,\n    fetchParams\n  };\n}\nfunction createFetchMiddleware({\n  rpcTarget,\n  originHttpHeaderKey,\n  analytics,\n  providerConfig\n}) {\n  return createAsyncMiddleware(async (req, res, _next) => {\n    const {\n      fetchUrl,\n      fetchParams\n    } = createFetchConfigFromReq({\n      req,\n      rpcTarget,\n      originHttpHeaderKey\n    });\n\n    // attempt request multiple times\n    const maxAttempts = 5;\n    const retryInterval = 1000;\n    const startTime = Date.now();\n    const isSkippedAnalytics = !Object.values(ANALYTICS_TRACKED_NETWORK_JPRC_METHODS).includes(req.method);\n    const trackData = {\n      chain_id: getCaipChainId(providerConfig),\n      chain_rpc_target: getHostname(fetchUrl),\n      method: req.method\n    };\n    for (let attempt = 0; attempt < maxAttempts; attempt++) {\n      try {\n        const fetchRes = await fetch(fetchUrl, fetchParams);\n        // check for http errors\n        checkForHttpErrors(fetchRes);\n        // parse response body\n        const fetchBody = await fetchRes.json();\n        const result = parseResponse(fetchRes, fetchBody);\n        // set result and exit retry loop\n        res.result = result;\n        if (!isSkippedAnalytics) {\n          analytics === null || analytics === void 0 || analytics.track(ANALYTICS_EVENTS.JRPC_REQUEST_COMPLETED, _objectSpread(_objectSpread({\n            request_type: ANALYTICS_JRPC_REQUEST_TYPES.NETWORK\n          }, trackData), {}, {\n            duration: Date.now() - startTime\n          }));\n        }\n        return;\n      } catch (err) {\n        const errMsg = (err.message || err).toString();\n        const isRetriable = RETRIABLE_ERRORS.some(phrase => errMsg.includes(phrase));\n        // re-throw error if not retriable\n        if (!isRetriable) {\n          if (!isSkippedAnalytics) {\n            analytics === null || analytics === void 0 || analytics.track(ANALYTICS_EVENTS.JRPC_REQUEST_FAILED, _objectSpread(_objectSpread({\n              request_type: ANALYTICS_JRPC_REQUEST_TYPES.NETWORK\n            }, trackData), {}, {\n              error_code: err === null || err === void 0 ? void 0 : err.code,\n              error_message: errMsg,\n              duration: Date.now() - startTime\n            }));\n          }\n          const error = await serializeError(err);\n          throw error;\n        }\n      }\n      // delay before retrying\n      await timeout(retryInterval);\n    }\n  });\n}\n\nexport { createFetchConfigFromReq, createFetchMiddleware };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1463, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Embed/CommunicationMethodMiddleware.js"],"sourcesContent":["import { createAsyncMiddleware, mergeMiddleware, createScaffoldMiddleware } from '@web3auth/auth';\nimport { COMMUNICATION_JRPC_METHODS } from '../enums.js';\n\nfunction createChangeProviderMiddlewareMiddleware({\n  changeProvider\n}) {\n  return createAsyncMiddleware(async (request, response, next) => {\n    const {\n      method\n    } = request;\n    if (method !== COMMUNICATION_JRPC_METHODS.SET_PROVIDER) return next();\n    if (!changeProvider) throw new Error(\"CommunicationMiddleware - opts.changeProvider not provided\");\n    response.result = await changeProvider(request);\n  });\n}\nfunction createTopupMiddleware({\n  topup\n}) {\n  return createAsyncMiddleware(async (request, response, next) => {\n    const {\n      method\n    } = request;\n    if (method !== COMMUNICATION_JRPC_METHODS.TOPUP) return next();\n    if (!topup) throw new Error(\"CommunicationMiddleware - opts.topup not provided\");\n    response.result = await topup(request);\n  });\n}\nfunction createGenericJRPCMiddleware(targetMethod, handler) {\n  return createAsyncMiddleware(async (request, response, next) => {\n    const {\n      method\n    } = request;\n    if (method !== targetMethod) return next();\n    if (!handler) throw new Error(`CommunicationMiddleware - ${targetMethod} not provided`);\n    const result = await handler(request);\n    if (!result) {\n      return next();\n    }\n    response.result = result;\n    return undefined;\n  });\n}\nfunction createCommunicationMiddleware(providerHandlers) {\n  const {\n    getUserInfo,\n    getWalletInstanceId,\n    topup,\n    logout,\n    changeProvider,\n    setIFrameStatus,\n    handleWindowRpc,\n    getProviderState,\n    loginWithPrivateKey,\n    showWalletConnect,\n    showFunding,\n    showCheckout,\n    showReceive,\n    showTransfer,\n    showWalletUi,\n    showSwap,\n    showWindowBlockAlert,\n    loginWithSessionId\n  } = providerHandlers;\n  return mergeMiddleware([createChangeProviderMiddlewareMiddleware({\n    changeProvider\n  }), createTopupMiddleware({\n    topup\n  }), createScaffoldMiddleware({\n    [COMMUNICATION_JRPC_METHODS.LOGOUT]: logout,\n    [COMMUNICATION_JRPC_METHODS.WALLET_INSTANCE_ID]: getWalletInstanceId,\n    [COMMUNICATION_JRPC_METHODS.USER_INFO]: getUserInfo,\n    [COMMUNICATION_JRPC_METHODS.IFRAME_STATUS]: setIFrameStatus,\n    // Do this in the orchestrator because communicationWindowManager needs to be passed into PopupHandlers\n    [COMMUNICATION_JRPC_METHODS.CLOSED_WINDOW]: handleWindowRpc,\n    [COMMUNICATION_JRPC_METHODS.GET_PROVIDER_STATE]: getProviderState,\n    [COMMUNICATION_JRPC_METHODS.SHOW_WALLET_CONNECT]: showWalletConnect,\n    [COMMUNICATION_JRPC_METHODS.SHOW_FUNDING]: showFunding,\n    [COMMUNICATION_JRPC_METHODS.SHOW_CHECKOUT]: showCheckout,\n    [COMMUNICATION_JRPC_METHODS.SHOW_RECEIVE]: showReceive,\n    [COMMUNICATION_JRPC_METHODS.SHOW_TRANSFER]: showTransfer,\n    [COMMUNICATION_JRPC_METHODS.SHOW_WALLET_UI]: showWalletUi,\n    [COMMUNICATION_JRPC_METHODS.SHOW_SWAP]: showSwap,\n    [COMMUNICATION_JRPC_METHODS.WINDOW_BLOCKED]: showWindowBlockAlert\n  }), createGenericJRPCMiddleware(COMMUNICATION_JRPC_METHODS.LOGIN_WITH_PRIVATE_KEY, loginWithPrivateKey), createGenericJRPCMiddleware(COMMUNICATION_JRPC_METHODS.LOGIN_WITH_SESSION_ID, loginWithSessionId)]);\n}\n\nexport { createChangeProviderMiddlewareMiddleware, createCommunicationMiddleware, createGenericJRPCMiddleware, createTopupMiddleware };\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AACA;;;AAEA,SAAS,yCAAyC,EAChD,cAAc,EACf;IACC,OAAO,IAAA,2PAAqB,EAAC,OAAO,SAAS,UAAU;QACrD,MAAM,EACJ,MAAM,EACP,GAAG;QACJ,IAAI,WAAW,yQAA0B,CAAC,YAAY,EAAE,OAAO;QAC/D,IAAI,CAAC,gBAAgB,MAAM,IAAI,MAAM;QACrC,SAAS,MAAM,GAAG,MAAM,eAAe;IACzC;AACF;AACA,SAAS,sBAAsB,EAC7B,KAAK,EACN;IACC,OAAO,IAAA,2PAAqB,EAAC,OAAO,SAAS,UAAU;QACrD,MAAM,EACJ,MAAM,EACP,GAAG;QACJ,IAAI,WAAW,yQAA0B,CAAC,KAAK,EAAE,OAAO;QACxD,IAAI,CAAC,OAAO,MAAM,IAAI,MAAM;QAC5B,SAAS,MAAM,GAAG,MAAM,MAAM;IAChC;AACF;AACA,SAAS,4BAA4B,YAAY,EAAE,OAAO;IACxD,OAAO,IAAA,2PAAqB,EAAC,OAAO,SAAS,UAAU;QACrD,MAAM,EACJ,MAAM,EACP,GAAG;QACJ,IAAI,WAAW,cAAc,OAAO;QACpC,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,aAAa,aAAa,CAAC;QACtF,MAAM,SAAS,MAAM,QAAQ;QAC7B,IAAI,CAAC,QAAQ;YACX,OAAO;QACT;QACA,SAAS,MAAM,GAAG;QAClB,OAAO;IACT;AACF;AACA,SAAS,8BAA8B,gBAAgB;IACrD,MAAM,EACJ,WAAW,EACX,mBAAmB,EACnB,KAAK,EACL,MAAM,EACN,cAAc,EACd,eAAe,EACf,eAAe,EACf,gBAAgB,EAChB,mBAAmB,EACnB,iBAAiB,EACjB,WAAW,EACX,YAAY,EACZ,WAAW,EACX,YAAY,EACZ,YAAY,EACZ,QAAQ,EACR,oBAAoB,EACpB,kBAAkB,EACnB,GAAG;IACJ,OAAO,IAAA,2PAAe,EAAC;QAAC,yCAAyC;YAC/D;QACF;QAAI,sBAAsB;YACxB;QACF;QAAI,IAAA,8PAAwB,EAAC;YAC3B,CAAC,yQAA0B,CAAC,MAAM,CAAC,EAAE;YACrC,CAAC,yQAA0B,CAAC,kBAAkB,CAAC,EAAE;YACjD,CAAC,yQAA0B,CAAC,SAAS,CAAC,EAAE;YACxC,CAAC,yQAA0B,CAAC,aAAa,CAAC,EAAE;YAC5C,uGAAuG;YACvG,CAAC,yQAA0B,CAAC,aAAa,CAAC,EAAE;YAC5C,CAAC,yQAA0B,CAAC,kBAAkB,CAAC,EAAE;YACjD,CAAC,yQAA0B,CAAC,mBAAmB,CAAC,EAAE;YAClD,CAAC,yQAA0B,CAAC,YAAY,CAAC,EAAE;YAC3C,CAAC,yQAA0B,CAAC,aAAa,CAAC,EAAE;YAC5C,CAAC,yQAA0B,CAAC,YAAY,CAAC,EAAE;YAC3C,CAAC,yQAA0B,CAAC,aAAa,CAAC,EAAE;YAC5C,CAAC,yQAA0B,CAAC,cAAc,CAAC,EAAE;YAC7C,CAAC,yQAA0B,CAAC,SAAS,CAAC,EAAE;YACxC,CAAC,yQAA0B,CAAC,cAAc,CAAC,EAAE;QAC/C;QAAI,4BAA4B,yQAA0B,CAAC,sBAAsB,EAAE;QAAsB,4BAA4B,yQAA0B,CAAC,qBAAqB,EAAE;KAAoB;AAC7M","ignoreList":[0]}},
    {"offset": {"line": 1542, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Network/createInflightCacheMiddleware.js"],"sourcesContent":["import { createAsyncMiddleware } from '@web3auth/auth';\nimport log from 'loglevel';\nimport { cloneDeep } from '../utils/lodashUtils.js';\n\nfunction deferredPromise() {\n  let resolve;\n  const promise = new Promise(_resolve => {\n    resolve = _resolve;\n  });\n  return {\n    resolve,\n    promise\n  };\n}\nfunction createInflightCacheMiddleware({\n  cacheIdentifierForRequest\n}) {\n  const inflightRequests = {};\n  async function createActiveRequestHandler(res, activeRequestHandlers) {\n    const {\n      resolve,\n      promise\n    } = deferredPromise();\n    activeRequestHandlers.push(handledRes => {\n      // append a copy of the result and error to the response\n      res.result = cloneDeep(handledRes.result);\n      res.error = cloneDeep(handledRes.error);\n      resolve();\n    });\n    return promise;\n  }\n  function handleActiveRequest(res, activeRequestHandlers) {\n    // use setTimeout so we can resolve our original request first\n    setTimeout(() => {\n      activeRequestHandlers.forEach(handler => {\n        try {\n          handler(res);\n        } catch (err) {\n          // catch error so all requests are handled correctly\n          log.error(err);\n        }\n      });\n    });\n  }\n  return createAsyncMiddleware(async (req, res, next) => {\n    // allow cach to be skipped if so specified\n    if (req.skipCache) {\n      return next();\n    }\n    // get cacheId, if cacheable\n    const cacheId = cacheIdentifierForRequest(req);\n    // if not cacheable, skip\n    if (!cacheId) {\n      log.info(\"Request is not cacheable, proceeding. req = %o\", req);\n      return next();\n    }\n    // check for matching requests\n    let activeRequestHandlers = inflightRequests[cacheId];\n    // if found, wait for the active request to be handled\n    if (activeRequestHandlers) {\n      // setup the response listener and wait for it to be called\n      // it will handle copying the result and request fields\n      log.info(\"Running %i handler(s) for request %o\", activeRequestHandlers.length, req);\n      await createActiveRequestHandler(res, activeRequestHandlers);\n      return undefined;\n    }\n    // setup response handler array for subsequent requests\n    activeRequestHandlers = [];\n    inflightRequests[cacheId] = activeRequestHandlers;\n    // allow request to be handled normally\n    log.info(\"Carrying original request forward %o\", req);\n    await next();\n    // clear inflight requests\n    delete inflightRequests[cacheId];\n    // schedule activeRequestHandlers to be handled\n    log.info(\"Running %i collected handler(s) for request %o\", activeRequestHandlers.length, req);\n    handleActiveRequest(res, activeRequestHandlers);\n    // complete\n    return undefined;\n  });\n}\n\nexport { createInflightCacheMiddleware };\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,SAAS;IACP,IAAI;IACJ,MAAM,UAAU,IAAI,QAAQ,CAAA;QAC1B,UAAU;IACZ;IACA,OAAO;QACL;QACA;IACF;AACF;AACA,SAAS,8BAA8B,EACrC,yBAAyB,EAC1B;IACC,MAAM,mBAAmB,CAAC;IAC1B,eAAe,2BAA2B,GAAG,EAAE,qBAAqB;QAClE,MAAM,EACJ,OAAO,EACP,OAAO,EACR,GAAG;QACJ,sBAAsB,IAAI,CAAC,CAAA;YACzB,wDAAwD;YACxD,IAAI,MAAM,GAAG,IAAA,uQAAS,EAAC,WAAW,MAAM;YACxC,IAAI,KAAK,GAAG,IAAA,uQAAS,EAAC,WAAW,KAAK;YACtC;QACF;QACA,OAAO;IACT;IACA,SAAS,oBAAoB,GAAG,EAAE,qBAAqB;QACrD,8DAA8D;QAC9D,WAAW;YACT,sBAAsB,OAAO,CAAC,CAAA;gBAC5B,IAAI;oBACF,QAAQ;gBACV,EAAE,OAAO,KAAK;oBACZ,oDAAoD;oBACpD,sJAAG,CAAC,KAAK,CAAC;gBACZ;YACF;QACF;IACF;IACA,OAAO,IAAA,2PAAqB,EAAC,OAAO,KAAK,KAAK;QAC5C,2CAA2C;QAC3C,IAAI,IAAI,SAAS,EAAE;YACjB,OAAO;QACT;QACA,4BAA4B;QAC5B,MAAM,UAAU,0BAA0B;QAC1C,yBAAyB;QACzB,IAAI,CAAC,SAAS;YACZ,sJAAG,CAAC,IAAI,CAAC,kDAAkD;YAC3D,OAAO;QACT;QACA,8BAA8B;QAC9B,IAAI,wBAAwB,gBAAgB,CAAC,QAAQ;QACrD,sDAAsD;QACtD,IAAI,uBAAuB;YACzB,2DAA2D;YAC3D,uDAAuD;YACvD,sJAAG,CAAC,IAAI,CAAC,wCAAwC,sBAAsB,MAAM,EAAE;YAC/E,MAAM,2BAA2B,KAAK;YACtC,OAAO;QACT;QACA,uDAAuD;QACvD,wBAAwB,EAAE;QAC1B,gBAAgB,CAAC,QAAQ,GAAG;QAC5B,uCAAuC;QACvC,sJAAG,CAAC,IAAI,CAAC,wCAAwC;QACjD,MAAM;QACN,0BAA0B;QAC1B,OAAO,gBAAgB,CAAC,QAAQ;QAChC,+CAA+C;QAC/C,sJAAG,CAAC,IAAI,CAAC,kDAAkD,sBAAsB,MAAM,EAAE;QACzF,oBAAoB,KAAK;QACzB,WAAW;QACX,OAAO;IACT;AACF","ignoreList":[0]}},
    {"offset": {"line": 1629, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Network/createAnalyticsMiddleware.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport { ANALYTICS_TRACKED_INTERNAL_JPRC_METHODS, ANALYTICS_EVENTS, ANALYTICS_JRPC_REQUEST_TYPES } from './constants.js';\nimport { getHostname, getCaipChainId, getErrorAnalyticsProperties } from '../utils/utils.js';\n\nfunction createAnalyticsMiddleware({\n  analytics,\n  providerConfig\n}) {\n  return (request, response, next) => {\n    // skip if the request method is not in the ANALYTICS_TRACKED_JPRC_METHODS\n    if (!Object.values(ANALYTICS_TRACKED_INTERNAL_JPRC_METHODS).includes(request.method)) {\n      return next();\n    }\n    const startTime = Date.now();\n    next(callback => {\n      const trackData = {\n        method: request.method,\n        chain_id: getCaipChainId(providerConfig),\n        chain_rpc_target: getHostname(providerConfig.rpcTarget),\n        is_aa_provider_request: request.isAAProviderRequest\n      };\n      if (response.error) {\n        analytics === null || analytics === void 0 || analytics.track(ANALYTICS_EVENTS.JRPC_REQUEST_FAILED, _objectSpread(_objectSpread(_objectSpread({\n          request_type: ANALYTICS_JRPC_REQUEST_TYPES.INTERNAL\n        }, trackData), getErrorAnalyticsProperties(response.error)), {}, {\n          duration: Date.now() - startTime\n        }));\n      } else {\n        analytics === null || analytics === void 0 || analytics.track(ANALYTICS_EVENTS.JRPC_REQUEST_COMPLETED, _objectSpread(_objectSpread({\n          request_type: ANALYTICS_JRPC_REQUEST_TYPES.INTERNAL\n        }, trackData), {}, {\n          duration: Date.now() - startTime\n        }));\n      }\n      callback();\n    });\n  };\n}\n\nexport { createAnalyticsMiddleware };\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,SAAS,0BAA0B,EACjC,SAAS,EACT,cAAc,EACf;IACC,OAAO,CAAC,SAAS,UAAU;QACzB,0EAA0E;QAC1E,IAAI,CAAC,OAAO,MAAM,CAAC,qSAAuC,EAAE,QAAQ,CAAC,QAAQ,MAAM,GAAG;YACpF,OAAO;QACT;QACA,MAAM,YAAY,KAAK,GAAG;QAC1B,KAAK,CAAA;YACH,MAAM,YAAY;gBAChB,QAAQ,QAAQ,MAAM;gBACtB,UAAU,IAAA,sQAAc,EAAC;gBACzB,kBAAkB,IAAA,mQAAW,EAAC,eAAe,SAAS;gBACtD,wBAAwB,QAAQ,mBAAmB;YACrD;YACA,IAAI,SAAS,KAAK,EAAE;gBAClB,cAAc,QAAQ,cAAc,KAAK,KAAK,UAAU,KAAK,CAAC,8QAAgB,CAAC,mBAAmB,EAAE,IAAA,yKAAa,EAAC,IAAA,yKAAa,EAAC,IAAA,yKAAa,EAAC;oBAC5I,cAAc,0RAA4B,CAAC,QAAQ;gBACrD,GAAG,YAAY,IAAA,mRAA2B,EAAC,SAAS,KAAK,IAAI,CAAC,GAAG;oBAC/D,UAAU,KAAK,GAAG,KAAK;gBACzB;YACF,OAAO;gBACL,cAAc,QAAQ,cAAc,KAAK,KAAK,UAAU,KAAK,CAAC,8QAAgB,CAAC,sBAAsB,EAAE,IAAA,yKAAa,EAAC,IAAA,yKAAa,EAAC;oBACjI,cAAc,0RAA4B,CAAC,QAAQ;gBACrD,GAAG,YAAY,CAAC,GAAG;oBACjB,UAAU,KAAK,GAAG,KAAK;gBACzB;YACF;YACA;QACF;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 1675, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/createSwappableProxy.js"],"sourcesContent":["function createSwappableProxy(initialTarget) {\n  let target = initialTarget;\n  let setTarget = newTarget => {\n    target = newTarget;\n  };\n  const proxy = new Proxy({}, {\n    get: (_, name) => {\n      // override `setTarget` access\n      if (name === \"setTarget\") return setTarget;\n      return target[name];\n    },\n    set: (_, name, value) => {\n      // allow `setTarget` overrides\n      if (name === \"setTarget\") {\n        setTarget = value;\n        return true;\n      }\n      target[name] = value;\n      return true;\n    },\n    has: (_, key) => {\n      if (key[0] === \"_\") {\n        return false;\n      }\n      return key in target;\n    }\n  });\n  return proxy;\n}\n\nexport { createSwappableProxy };\n"],"names":[],"mappings":";;;;AAAA,SAAS,qBAAqB,aAAa;IACzC,IAAI,SAAS;IACb,IAAI,YAAY,CAAA;QACd,SAAS;IACX;IACA,MAAM,QAAQ,IAAI,MAAM,CAAC,GAAG;QAC1B,KAAK,CAAC,GAAG;YACP,8BAA8B;YAC9B,IAAI,SAAS,aAAa,OAAO;YACjC,OAAO,MAAM,CAAC,KAAK;QACrB;QACA,KAAK,CAAC,GAAG,MAAM;YACb,8BAA8B;YAC9B,IAAI,SAAS,aAAa;gBACxB,YAAY;gBACZ,OAAO;YACT;YACA,MAAM,CAAC,KAAK,GAAG;YACf,OAAO;QACT;QACA,KAAK,CAAC,GAAG;YACP,IAAI,GAAG,CAAC,EAAE,KAAK,KAAK;gBAClB,OAAO;YACT;YACA,OAAO,OAAO;QAChB;IACF;IACA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 1713, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/createEventEmitterProxy.js"],"sourcesContent":["const filterNoop = () => true;\nconst internalEvents = [\"newListener\", \"removeListener\"];\nconst externalEventFilter = name => !internalEvents.includes(name);\nfunction getRawListeners(eventEmitter, name) {\n  // prefer native\n  return typeof eventEmitter.rawListeners !== \"undefined\" ? eventEmitter.rawListeners(name) : eventEmitter.listeners(name);\n}\nfunction createEventEmitterProxy(initialTarget, opts) {\n  // parse options\n  const finalOpts = opts || {};\n  let eventFilter = finalOpts.eventFilter || filterNoop;\n  if (typeof eventFilter === \"string\" && eventFilter === \"skipInternal\") eventFilter = externalEventFilter;\n  if (typeof eventFilter !== \"function\") throw new Error(\"createEventEmitterProxy - Invalid eventFilter\");\n  let target = initialTarget;\n  let setTarget = newTarget => {\n    if (target === newTarget) return;\n    const oldTarget = target;\n    target = newTarget;\n    const eventNames = oldTarget.eventNames();\n    eventNames.filter(eventFilter).forEach(name => {\n      getRawListeners(oldTarget, name).forEach(handler => {\n        newTarget.on(name, handler);\n      });\n    });\n\n    // remove old listeners\n    oldTarget.removeAllListeners();\n  };\n  const proxy = new Proxy({}, {\n    get: (_, name) => {\n      // override `setTarget` access\n      if (name === \"setTarget\") return setTarget;\n      return target[name];\n    },\n    set: (_, name, value) => {\n      // allow `setTarget` overrides\n      if (name === \"setTarget\") {\n        setTarget = value;\n        return true;\n      }\n      target[name] = value;\n      return true;\n    },\n    has: (_, key) => {\n      if (key[0] === \"_\") {\n        return false;\n      }\n      return key in target;\n    }\n  });\n  return proxy;\n}\n\nexport { createEventEmitterProxy };\n"],"names":[],"mappings":";;;;AAAA,MAAM,aAAa,IAAM;AACzB,MAAM,iBAAiB;IAAC;IAAe;CAAiB;AACxD,MAAM,sBAAsB,CAAA,OAAQ,CAAC,eAAe,QAAQ,CAAC;AAC7D,SAAS,gBAAgB,YAAY,EAAE,IAAI;IACzC,gBAAgB;IAChB,OAAO,OAAO,aAAa,YAAY,KAAK,cAAc,aAAa,YAAY,CAAC,QAAQ,aAAa,SAAS,CAAC;AACrH;AACA,SAAS,wBAAwB,aAAa,EAAE,IAAI;IAClD,gBAAgB;IAChB,MAAM,YAAY,QAAQ,CAAC;IAC3B,IAAI,cAAc,UAAU,WAAW,IAAI;IAC3C,IAAI,OAAO,gBAAgB,YAAY,gBAAgB,gBAAgB,cAAc;IACrF,IAAI,OAAO,gBAAgB,YAAY,MAAM,IAAI,MAAM;IACvD,IAAI,SAAS;IACb,IAAI,YAAY,CAAA;QACd,IAAI,WAAW,WAAW;QAC1B,MAAM,YAAY;QAClB,SAAS;QACT,MAAM,aAAa,UAAU,UAAU;QACvC,WAAW,MAAM,CAAC,aAAa,OAAO,CAAC,CAAA;YACrC,gBAAgB,WAAW,MAAM,OAAO,CAAC,CAAA;gBACvC,UAAU,EAAE,CAAC,MAAM;YACrB;QACF;QAEA,uBAAuB;QACvB,UAAU,kBAAkB;IAC9B;IACA,MAAM,QAAQ,IAAI,MAAM,CAAC,GAAG;QAC1B,KAAK,CAAC,GAAG;YACP,8BAA8B;YAC9B,IAAI,SAAS,aAAa,OAAO;YACjC,OAAO,MAAM,CAAC,KAAK;QACrB;QACA,KAAK,CAAC,GAAG,MAAM;YACb,8BAA8B;YAC9B,IAAI,SAAS,aAAa;gBACxB,YAAY;gBACZ,OAAO;YACT;YACA,MAAM,CAAC,KAAK,GAAG;YACf,OAAO;QACT;QACA,KAAK,CAAC,GAAG;YACP,IAAI,GAAG,CAAC,EAAE,KAAK,KAAK;gBAClB,OAAO;YACT;YACA,OAAO,OAAO;QAChB;IACF;IACA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 1776, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/WSApiClient.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport { get, post, put, patch, remove } from '@toruslabs/http-helpers';\nimport { jwtDecode } from 'jwt-decode';\nimport { ControllerEvents } from './enums.js';\nimport { isUnauthorizedError } from './utils/utils.js';\n\nvar HTTP_METHOD = /*#__PURE__*/function (HTTP_METHOD) {\n  HTTP_METHOD[HTTP_METHOD[\"GET\"] = 0] = \"GET\";\n  HTTP_METHOD[HTTP_METHOD[\"POST\"] = 1] = \"POST\";\n  HTTP_METHOD[HTTP_METHOD[\"PUT\"] = 2] = \"PUT\";\n  HTTP_METHOD[HTTP_METHOD[\"PATCH\"] = 3] = \"PATCH\";\n  HTTP_METHOD[HTTP_METHOD[\"DELETE\"] = 4] = \"DELETE\";\n  return HTTP_METHOD;\n}(HTTP_METHOD || {});\nconst constructAuthHeaders = ({\n  jwtToken,\n  publicAddress,\n  eoaAddress,\n  chainNamespace\n}) => {\n  const headers = {\n    Authorization: `Bearer ${jwtToken}`,\n    \"public-address\": publicAddress,\n    \"chain-namespace\": chainNamespace\n  };\n  if (eoaAddress) {\n    headers[\"eoa-address\"] = eoaAddress;\n  }\n  return {\n    headers\n  };\n};\nconst withUnauthorizedHandler = async (fn, emitter) => {\n  try {\n    const response = await fn();\n    return response;\n  } catch (e) {\n    if (isUnauthorizedError(e)) {\n      emitter.emit(ControllerEvents.UserUnauthorized);\n    }\n    throw e;\n  }\n};\nconst jwtTokenExpired = jwt => {\n  const decoded = jwtDecode(jwt);\n  const jwtExpiry = decoded.exp * 1000;\n  const currentTime = new Date().getTime();\n  return currentTime >= jwtExpiry;\n};\nconst WSApiClient = (baseApiUrl, emitter) => {\n  const authRequest = (method, url, data, authCredentials, customOptions) => {\n    if (jwtTokenExpired(authCredentials.jwtToken)) {\n      emitter.emit(ControllerEvents.UserUnauthorized);\n      throw new Response(null, {\n        status: 401,\n        statusText: \"Unauthorized\"\n      });\n    }\n    const headers = _objectSpread({\n      \"Content-Type\": \"application/json; charset=utf-8\"\n    }, constructAuthHeaders(authCredentials));\n    if (method === HTTP_METHOD.GET) {\n      return withUnauthorizedHandler(() => get(url, headers, customOptions), emitter);\n    }\n    if (method === HTTP_METHOD.POST) {\n      return withUnauthorizedHandler(() => post(url, data, headers, customOptions), emitter);\n    }\n    if (method === HTTP_METHOD.PUT) {\n      return withUnauthorizedHandler(() => put(url, data, headers, customOptions), emitter);\n    }\n    if (method === HTTP_METHOD.PATCH) {\n      return withUnauthorizedHandler(() => patch(url, data, headers, customOptions), emitter);\n    }\n    if (method === HTTP_METHOD.DELETE) {\n      return withUnauthorizedHandler(() => remove(url, data, headers, customOptions), emitter);\n    }\n  };\n  return {\n    authGet: (url, authCredentials, customOptions) => authRequest(HTTP_METHOD.GET, `${baseApiUrl}/${url}`, {}, authCredentials, customOptions),\n    authPost: (url, data, authCredentials, customOptions) => authRequest(HTTP_METHOD.POST, `${baseApiUrl}/${url}`, data, authCredentials, customOptions),\n    authPut: (url, data, authCredentials, customOptions) => authRequest(HTTP_METHOD.PUT, `${baseApiUrl}/${url}`, data, authCredentials, customOptions),\n    authPatch: (url, data, authCredentials, customOptions) => authRequest(HTTP_METHOD.PATCH, `${baseApiUrl}/${url}`, data, authCredentials, customOptions),\n    authRemove: (url, data, authCredentials, customOptions) => authRequest(HTTP_METHOD.DELETE, `${baseApiUrl}/${url}`, data, authCredentials, customOptions)\n  };\n};\n\nexport { WSApiClient, constructAuthHeaders };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1871, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Preferences/IPreferencesController.js"],"sourcesContent":["const ACTIVITY_ACTION = {\n  ACTIVITY_ACTION_ALL: \"walletActivity.allTransactions\",\n  ACTIVITY_ACTION_SEND: \"walletActivity.send\",\n  ACTIVITY_ACTION_RECEIVE: \"walletActivity.receive\",\n  ACTIVITY_ACTION_TOPUP: \"walletActivity.topup\"\n};\nconst ACCOUNT_CATEGORY = {\n  NORMAL: \"normal\",\n  THRESHOLD: \"threshold\",\n  IMPORTED: \"imported\",\n  // we have private key here\n  APP_SCOPED: \"app_scoped\",\n  ACCOUNT_ABSTRACTION: \"account_abstraction\",\n  EXTERNAL: \"external\",\n  // like metamask, wallet connect\n  MPC: \"mpc\",\n  SFA: \"sfa\",\n  SFA_ACCOUNT_ABSTRACTION: \"sfa_account_abstraction\",\n  APP_SCOPED_DERIVED: \"app_scoped_derived\"\n};\n\n/**\n * Preferences controller state\n */\n\n/**\n * @param address - address of the user\n * @param jwtToken - if jwt token already exists, it will be used instead of fetching from backend\n * @param calledFromEmbed - if called from embed\n * @param userInfo - optional user info\n * @param rehydrate - Rehydrate the preferences from the local storage\n */\n\nexport { ACCOUNT_CATEGORY, ACTIVITY_ACTION };\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,kBAAkB;IACtB,qBAAqB;IACrB,sBAAsB;IACtB,yBAAyB;IACzB,uBAAuB;AACzB;AACA,MAAM,mBAAmB;IACvB,QAAQ;IACR,WAAW;IACX,UAAU;IACV,2BAA2B;IAC3B,YAAY;IACZ,qBAAqB;IACrB,UAAU;IACV,gCAAgC;IAChC,KAAK;IACL,KAAK;IACL,yBAAyB;IACzB,oBAAoB;AACtB","ignoreList":[0]}},
    {"offset": {"line": 1902, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Preferences/BasePreferencesController.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { post } from '@toruslabs/http-helpers';\nimport { AUTH_CONNECTION } from '@web3auth/auth';\nimport bowser from 'bowser';\nimport log from 'loglevel';\nimport { BaseController } from '../BaseController.js';\nimport { cloneDeep } from '../utils/lodashUtils.js';\nimport { WSApiClient } from '../WSApiClient.js';\nimport { ACCOUNT_CATEGORY } from './IPreferencesController.js';\nimport { getCustomDeviceInfo, getHeaders } from '../utils/utils.js';\n\n// By default, poll every 3 minutes\nconst DEFAULT_INTERVAL = 180 * 1000;\nconst DEFAULT_PREFERENCES = {\n  selectedCurrency: \"USD\",\n  theme: \"dark\",\n  locale: \"en\",\n  accountType: ACCOUNT_CATEGORY.NORMAL,\n  contacts: [],\n  jwtToken: \"\",\n  fetchedPastTx: [],\n  pastTransactions: [],\n  paymentTx: [],\n  defaultPublicAddress: \"\",\n  customTokens: [],\n  customNfts: [],\n  crashReport: true,\n  userInfo: {\n    email: \"\",\n    name: \"\",\n    profileImage: \"\",\n    authConnectionId: \"\",\n    userId: \"\",\n    authConnection: AUTH_CONNECTION.GOOGLE,\n    groupedAuthConnectionId: \"\"\n  }\n};\n\n/**\n * Controller that stores shared settings and exposes convenience methods\n */\nclass BasePreferencesController extends BaseController {\n  /**\n   * Creates a PreferencesController instance\n   *\n   * @param config - Initial options used to configure this controller\n   * @param state - Initial state to set on this controller\n   */\n  constructor({\n    config,\n    state,\n    defaultPreferences,\n    signAuthMessage,\n    validateSignMessage\n  }) {\n    super({\n      config,\n      state\n    });\n    /**\n     * Name of this controller used during composition\n     */\n    _defineProperty(this, \"name\", \"PreferencesController\");\n    _defineProperty(this, \"iframeOrigin\", void 0);\n    _defineProperty(this, \"wsApiClient\", void 0);\n    _defineProperty(this, \"chainNamespace\", void 0);\n    _defineProperty(this, \"signAuthMessage\", void 0);\n    _defineProperty(this, \"validateSignMessage\", void 0);\n    _defineProperty(this, \"defaultPreferences\", void 0);\n    if (!config.api) {\n      throw new Error(\"PreferencesController - no api specified in config.\");\n    }\n    this.defaultState = {\n      identities: {},\n      selectedAddress: \"\",\n      lastErrorMessage: \"\",\n      lastSuccessMessage: \"\"\n    };\n    this.defaultConfig = {\n      api: config.api,\n      pollInterval: DEFAULT_INTERVAL\n    };\n    this.initialize();\n    this.defaultPreferences = _objectSpread(_objectSpread({}, DEFAULT_PREFERENCES), defaultPreferences);\n    this.signAuthMessage = signAuthMessage;\n    this.validateSignMessage = validateSignMessage;\n    this.wsApiClient = WSApiClient(this.config.api, this);\n  }\n  setIframeOrigin(origin) {\n    this.iframeOrigin = origin;\n  }\n  getAddressState(address) {\n    const selectedAddress = address || this.state.selectedAddress;\n    return this.state.identities[selectedAddress];\n  }\n\n  /**\n   * Sets selected address\n   *\n   * @param selectedAddress - casper account hash\n   */\n  setSelectedAddress(selectedAddress) {\n    this.update({\n      selectedAddress\n    });\n  }\n  async getUser(address) {\n    const user = await this.wsApiClient.authGet(\"user?fetchTx=false\", this.authCredentials(address), {\n      useAPIKey: true\n    });\n    return user.data;\n  }\n  async createUser(params) {\n    const {\n      selectedCurrency,\n      theme,\n      authConnectionId,\n      groupedAuthConnectionId,\n      userId,\n      locale,\n      address,\n      idToken,\n      type,\n      web3AuthNetwork,\n      metadata\n    } = params;\n    const userPayload = _objectSpread({\n      default_currency: selectedCurrency,\n      theme,\n      verifier: groupedAuthConnectionId || authConnectionId,\n      verifier_id: userId,\n      locale,\n      idToken,\n      account_type: type,\n      web3auth_network: web3AuthNetwork\n    }, metadata);\n    await this.wsApiClient.authPost(\"user\", userPayload, this.authCredentials(address), {\n      useAPIKey: true\n    });\n    this.updateState({\n      theme,\n      defaultPublicAddress: address,\n      selectedCurrency,\n      locale,\n      accountType: type\n    }, address);\n  }\n  async storeUserLogin(params) {\n    const {\n      authConnectionId,\n      groupedAuthConnectionId,\n      userId,\n      options,\n      address,\n      idToken,\n      web3AuthClientId,\n      web3AuthNetwork,\n      sessionPubKey,\n      loginMode\n    } = params;\n    if (!options.rehydrate) {\n      const browser = bowser.getParser(window.navigator.userAgent);\n      const specialBrowser = getCustomDeviceInfo();\n      const recordLoginPayload = {\n        os: browser.getOSName(),\n        os_version: browser.getOSVersion() || \"unidentified\",\n        browser: (specialBrowser === null || specialBrowser === void 0 ? void 0 : specialBrowser.browser) || browser.getBrowserName() || \"unidentified\",\n        browser_version: browser.getBrowserVersion() || \"unidentified\",\n        platform: browser.getPlatform().type || \"desktop\",\n        hostname: this.iframeOrigin,\n        verifier: groupedAuthConnectionId || authConnectionId,\n        verifier_id: userId,\n        idToken,\n        web3auth_client_id: web3AuthClientId,\n        web3auth_network: web3AuthNetwork,\n        session_pub_key: sessionPubKey,\n        login_mode: loginMode\n      };\n      await this.wsApiClient.authPost(\"user/recordLogin\", recordLoginPayload, this.authCredentials(address), {\n        useAPIKey: true\n      });\n    }\n  }\n  async setCrashReport(isEnabled) {\n    var _this$getAddressState;\n    if (isEnabled === ((_this$getAddressState = this.getAddressState()) === null || _this$getAddressState === void 0 ? void 0 : _this$getAddressState.crashReport)) return true;\n    try {\n      await this.wsApiClient.authPatch(\"user\", {\n        enable_crash_reporter: isEnabled\n      }, this.authCredentials(), {\n        useAPIKey: true\n      });\n      this.updateState({\n        crashReport: isEnabled\n      });\n      return true;\n    } catch (error) {\n      log.error(error);\n      return false;\n    }\n  }\n  async setUserTheme(theme) {\n    var _this$getAddressState2;\n    if (theme === ((_this$getAddressState2 = this.getAddressState()) === null || _this$getAddressState2 === void 0 ? void 0 : _this$getAddressState2.theme)) return true;\n    try {\n      await this.wsApiClient.authPatch(\"user\", {\n        theme\n      }, this.authCredentials(), {\n        useAPIKey: true\n      });\n      this.updateState({\n        theme\n      });\n      return true;\n    } catch (error) {\n      log.error(error);\n      return false;\n    }\n  }\n  async setUserLocale(locale) {\n    var _this$getAddressState3;\n    if (locale === ((_this$getAddressState3 = this.getAddressState()) === null || _this$getAddressState3 === void 0 ? void 0 : _this$getAddressState3.locale)) return;\n    try {\n      await this.wsApiClient.authPatch(\"user\", {\n        locale\n      }, this.authCredentials(), {\n        useAPIKey: true\n      });\n      this.updateState({\n        locale\n      });\n      return true;\n    } catch (error) {\n      log.error(\"unable to set locale\", error);\n      return false;\n    }\n  }\n  async setSelectedCurrency(payload) {\n    var _this$getAddressState4;\n    if (payload.selectedCurrency === ((_this$getAddressState4 = this.getAddressState()) === null || _this$getAddressState4 === void 0 ? void 0 : _this$getAddressState4.selectedCurrency)) return true;\n    try {\n      await this.wsApiClient.authPatch(\"user\", {\n        default_currency: payload.selectedCurrency\n      }, this.authCredentials(), {\n        useAPIKey: true\n      });\n      this.updateState({\n        selectedCurrency: payload.selectedCurrency\n      });\n      return true;\n    } catch (error) {\n      log.error(error);\n      return false;\n    }\n  }\n  async addContact(contact) {\n    try {\n      var _this$getAddressState5;\n      const response = await this.wsApiClient.authPost(\"contact\", contact, this.authCredentials(), {\n        useAPIKey: true\n      });\n      this.updateState({\n        contacts: [...(((_this$getAddressState5 = this.getAddressState()) === null || _this$getAddressState5 === void 0 ? void 0 : _this$getAddressState5.contacts) || []), response.data]\n      });\n      return true;\n    } catch (error) {\n      log.error(\"unable to add contact\", error);\n      return false;\n    }\n  }\n  async deleteContact(contactId) {\n    try {\n      var _this$getAddressState6;\n      const response = await this.wsApiClient.authRemove(`contact/${contactId}`, {}, this.authCredentials(), {\n        useAPIKey: true\n      });\n      const finalContacts = (_this$getAddressState6 = this.getAddressState()) === null || _this$getAddressState6 === void 0 ? void 0 : _this$getAddressState6.contacts.filter(contact => contact.id !== response.data.id);\n      if (finalContacts) this.updateState({\n        contacts: [...finalContacts]\n      });\n      return true;\n    } catch (error) {\n      log.error(\"unable to delete contact\", error);\n      return false;\n    }\n  }\n  async revokeDiscord(idToken) {\n    try {\n      const resp = await this.wsApiClient.authPost(\"revoke/discord\", {\n        token: idToken\n      }, this.authCredentials(), {\n        useAPIKey: true\n      });\n      log.info(resp);\n    } catch (error) {\n      log.error(error);\n    }\n  }\n  async patchPastTx(body, address) {\n    try {\n      const response = await this.wsApiClient.authPatch(\"transaction\", body, this.authCredentials(address), {\n        useAPIKey: true\n      });\n      log.info(\"successfully patched\", response);\n    } catch (error) {\n      log.error(\"unable to patch tx\", error);\n    }\n  }\n  async postPastTx(tx, address) {\n    try {\n      const response = await this.wsApiClient.authPost(\"transaction\", tx, this.authCredentials(address), {\n        useAPIKey: true\n      });\n      log.info(\"successfully posted tx\", response);\n      return response;\n    } catch (error) {\n      log.error(error, \"unable to insert transaction\");\n    }\n  }\n  async getWalletOrders(address) {\n    try {\n      const response = await this.wsApiClient.authGet(\"transaction\", this.authCredentials(address), {\n        useAPIKey: true\n      });\n      return response.success ? response.data ? response.data : [] : [];\n    } catch (error) {\n      log.error(\"unable to get wallet orders tx\", error);\n      return [];\n    }\n  }\n  async getTopUpOrders(address) {\n    try {\n      const response = await this.wsApiClient.authGet(\"transaction\", this.authCredentials(address), {\n        useAPIKey: true\n      });\n      return response.data || [];\n    } catch (error) {\n      log.error(\"unable to fetch past Top up orders\", error);\n    }\n  }\n  async getBillBoardData() {\n    try {\n      const response = await this.wsApiClient.authGet(\"billboard\", this.authCredentials(), {\n        useAPIKey: true\n      });\n      return response.success ? response.data : [];\n    } catch (error) {\n      log.error(\"unable to get billboard data\", error);\n      return [];\n    }\n  }\n  async getMessageForSigning(publicAddress, web3AuthIdToken) {\n    const response = await post(`${this.config.api}/auth/message`, {\n      public_address: publicAddress,\n      id_token: web3AuthIdToken,\n      chain_namespace: this.chainNamespace\n    }, {}, {\n      useAPIKey: true\n    });\n    return response.message;\n  }\n  async getTwitterId(payload) {\n    const res = await this.wsApiClient.authGet(`twitter?screen_name=${payload.nick}`, this.authCredentials(), {\n      useAPIKey: true\n    });\n    return `${payload.typeOfLogin.toLowerCase()}|${res.data.toString()}`;\n  }\n  async sendEmail(payload) {\n    return this.wsApiClient.authPost(\"transaction/sendemail\", payload.emailObject, this.authCredentials(), {\n      useAPIKey: true\n    });\n  }\n  async refreshJwt() {\n    const address = this.state.selectedAddress;\n    const messageToSign = await this.getMessageForSigning(address);\n    await this.validateSignMessage(messageToSign);\n    const signedMessage = await this.signAuthMessage(address, messageToSign);\n    const response = await post(`${this.config.api}/auth/verify`, {\n      challenge: messageToSign,\n      public_address: address,\n      signed_message: signedMessage,\n      chain_namespace: this.chainNamespace\n    }, {}, {\n      useAPIKey: true\n    });\n    this.updateState({\n      jwtToken: response.token\n    }, address);\n  }\n  async getDappList() {\n    try {\n      const response = await this.wsApiClient.authGet(\"dapps\", this.authCredentials(), {\n        useAPIKey: true\n      });\n      return response.success ? response.data : [];\n    } catch (error) {\n      log.error(\"unable to get dapps list\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Strategy\n   * For account type: threshold, normal (web3auth login)\n   * idToken from web3auth login must be present. We use it directly\n   *\n   * For account type: app_scoped, IMPORTED\n   * idToken from web3auth login must be present. We request a message for signing using the idToken\n   * and sign it using the private key of the account. We then send the signed message to the backend\n   * to verify the signature and return a new jwtToken that includes the app_scoped address\n   *\n   * For account type: Account abstraction\n   * idToken from web3auth login must be present. We use it to exchange for a new jwtToken.\n   * Because backend can derive AA address from public address and issue this token easily.\n   *\n   * For account type: external\n   * idToken from web3auth `authenticateUser` (siww) login must be present. We use it directly\n   */\n  async init(params) {\n    const {\n      address,\n      userInfo,\n      idToken,\n      metadata = {},\n      type\n    } = params;\n    if (this.getAddressState(address)) return;\n    let jwtToken;\n    switch (type) {\n      case ACCOUNT_CATEGORY.EXTERNAL:\n        {\n          if (!idToken) throw new Error(\"SIWW idToken must be present\");\n          const response = await post(`${this.config.api}/auth/verify`, _objectSpread({\n            account_type: type,\n            public_address: address,\n            id_token: idToken,\n            verifier: userInfo.groupedAuthConnectionId || userInfo.authConnectionId,\n            verifier_id: userInfo.userId,\n            chain_namespace: this.chainNamespace\n          }, metadata), {}, {\n            useAPIKey: true\n          });\n          jwtToken = response.token;\n          break;\n        }\n      case ACCOUNT_CATEGORY.IMPORTED:\n      case ACCOUNT_CATEGORY.APP_SCOPED_DERIVED:\n      case ACCOUNT_CATEGORY.ACCOUNT_ABSTRACTION:\n        {\n          if (!idToken) throw new Error(\"Web3Auth idToken must be present\");\n          const response = await post(`${this.config.api}/auth/verify`, _objectSpread({\n            public_address: address,\n            id_token: idToken,\n            verifier: userInfo.groupedAuthConnectionId || userInfo.authConnectionId,\n            verifier_id: userInfo.userId,\n            account_type: type,\n            chain_namespace: this.chainNamespace\n          }, metadata), {}, {\n            useAPIKey: true\n          });\n          jwtToken = response.token;\n          break;\n        }\n      case ACCOUNT_CATEGORY.MPC:\n      case ACCOUNT_CATEGORY.SFA:\n      case ACCOUNT_CATEGORY.SFA_ACCOUNT_ABSTRACTION:\n        {\n          if (!metadata.signatures) throw new Error(\"web3auth signatures must be present\");\n          const response = await post(`${this.config.api}/auth/verify`, _objectSpread({\n            public_address: address,\n            verifier: userInfo.groupedAuthConnectionId || userInfo.authConnectionId,\n            verifier_id: userInfo.userId,\n            account_type: type,\n            chain_namespace: this.chainNamespace\n          }, metadata), {}, {\n            useAPIKey: true\n          });\n          jwtToken = response.token;\n          break;\n        }\n      case ACCOUNT_CATEGORY.NORMAL:\n      case ACCOUNT_CATEGORY.THRESHOLD:\n      case ACCOUNT_CATEGORY.APP_SCOPED:\n      default:\n        if (!idToken) throw new Error(\"Web3Auth idToken must be present\");\n        jwtToken = idToken;\n        break;\n    }\n    this.updateState({\n      jwtToken,\n      userInfo,\n      accountType: type !== null && type !== void 0 ? type : this.defaultPreferences.accountType\n    }, address);\n  }\n  updateState(preferences, address) {\n    const selectedAddress = address || this.state.selectedAddress;\n    const currentState = this.getAddressState(selectedAddress) || cloneDeep(this.defaultPreferences);\n    const mergedState = _objectSpread(_objectSpread({}, currentState), preferences);\n    this.update({\n      identities: _objectSpread(_objectSpread({}, this.state.identities), {}, {\n        [selectedAddress]: mergedState\n      })\n    });\n    return mergedState;\n  }\n  authCredentials(address) {\n    var _this$getAddressState7;\n    const selectedAddress = address || this.state.selectedAddress;\n    const jwtToken = ((_this$getAddressState7 = this.getAddressState(selectedAddress)) === null || _this$getAddressState7 === void 0 ? void 0 : _this$getAddressState7.jwtToken) || \"\";\n    return {\n      jwtToken,\n      publicAddress: selectedAddress,\n      chainNamespace: this.chainNamespace\n    };\n  }\n  headers(address) {\n    var _this$getAddressState8;\n    const selectedAddress = address || this.state.selectedAddress;\n    return getHeaders(((_this$getAddressState8 = this.getAddressState(selectedAddress)) === null || _this$getAddressState8 === void 0 ? void 0 : _this$getAddressState8.jwtToken) || \"\", selectedAddress);\n  }\n}\n\nexport { BasePreferencesController, DEFAULT_PREFERENCES };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2407, "column": 0}, "map": {"version":3,"sources":["file:///Users/yashparikh/projects/xstocks-ui/node_modules/%40toruslabs/ethereum-controllers/node_modules/%40toruslabs/base-controllers/dist/lib.esm/Transaction/BaseTransactionStateController.js"],"sourcesContent":["import _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { BaseController } from '../BaseController.js';\nimport { pickBy, omitBy } from '../utils/lodashUtils.js';\nimport { TransactionStatus, TX_EVENTS } from './ITransactionController.js';\nimport { transactionMatchesNetwork } from '../utils/utils.js';\n\nclass BaseTransactionStateManager extends BaseController {\n  constructor({\n    config,\n    state,\n    getCurrentChainId\n  }) {\n    super({\n      config,\n      state\n    });\n    _defineProperty(this, \"getCurrentChainId\", void 0);\n    this.defaultConfig = {\n      txHistoryLimit: 40\n    };\n    this.defaultState = {\n      transactions: {},\n      unapprovedTxs: {},\n      currentNetworkTxsList: []\n    };\n    this.initialize();\n    this.getCurrentChainId = getCurrentChainId;\n  }\n  getUnapprovedTxList() {\n    const chainId = this.getCurrentChainId();\n    return pickBy(this.state.transactions, transaction => transaction.status === TransactionStatus.unapproved && transactionMatchesNetwork(transaction, chainId));\n  }\n  getTransaction(txId) {\n    const {\n      transactions\n    } = this.state;\n    return transactions[txId];\n  }\n  updateTransaction(txMeta) {\n    // commit txMeta to state\n    const txId = txMeta.id;\n    txMeta.updated_at = new Date().toISOString();\n    this.update({\n      transactions: _objectSpread(_objectSpread({}, this.state.transactions), {}, {\n        [txId]: txMeta\n      })\n    });\n  }\n  setTxStatusRejected(txId) {\n    this._setTransactionStatus(txId, TransactionStatus.rejected);\n    this._deleteTransaction(txId);\n  }\n\n  /**\n   * The implementing controller can override this functionality and add custom logic + call super.()\n   */\n  setTxStatusUnapproved(txId) {\n    this._setTransactionStatus(txId, TransactionStatus.unapproved);\n  }\n  setTxStatusApproved(txId) {\n    this._setTransactionStatus(txId, TransactionStatus.approved);\n  }\n  setTxStatusSigned(txId, isFinalStep) {\n    this._setTransactionStatus(txId, TransactionStatus.signed, isFinalStep);\n  }\n  setTxStatusSubmitted(txId) {\n    this._setTransactionStatus(txId, TransactionStatus.submitted);\n  }\n  setTxStatusDropped(txId) {\n    this._setTransactionStatus(txId, TransactionStatus.dropped);\n  }\n  setTxStatusExpired(txId) {\n    this._setTransactionStatus(txId, TransactionStatus.expired);\n  }\n  setTxStatusConfirmed(txId) {\n    this._setTransactionStatus(txId, TransactionStatus.confirmed);\n  }\n  setTxStatusFailed(txId, error_) {\n    const error = !error_ ? new Error(\"Internal torus failure\") : error_;\n    const txMeta = this.getTransaction(txId);\n    txMeta.error = error;\n    this.updateTransaction(txMeta);\n    this._setTransactionStatus(txId, TransactionStatus.failed);\n  }\n\n  /**\n   * Method to determine if the transaction is in a final state\n   * @param status - Transaction status\n   * @returns boolean if the transaction is in a final state\n   */\n  isFinalState(status) {\n    return status === TransactionStatus.rejected || status === TransactionStatus.submitted || status === TransactionStatus.confirmed || status === TransactionStatus.failed || status === TransactionStatus.cancelled || status === TransactionStatus.expired;\n  }\n\n  /**\n   * Filters out the unapproved transactions from state\n   */\n  clearUnapprovedTxs() {\n    this.update({\n      transactions: omitBy(this.state.transactions, transaction => transaction.status === TransactionStatus.unapproved)\n    });\n  }\n\n  /**\n   * will append new transactions to old txns.\n   */\n  _addTransactionsToState(transactions) {\n    this.update({\n      transactions: transactions.reduce((result, newTx) => {\n        result[newTx.id] = newTx;\n        return result;\n      }, this.state.transactions)\n    });\n  }\n\n  /**\n   * will set new txns, override existing if any in state.\n   */\n  _setTransactionsToState(transactions) {\n    this.update({\n      transactions: transactions.reduce((result, newTx) => {\n        result[newTx.id] = newTx;\n        return result;\n      }, {})\n    });\n  }\n  _deleteTransaction(targetTransactionId) {\n    const {\n      transactions\n    } = this.state;\n    delete transactions[targetTransactionId];\n    this.update({\n      transactions\n    });\n  }\n  _deleteTransactions(targetTransactionIds) {\n    const {\n      transactions\n    } = this.state;\n    targetTransactionIds.forEach(transactionId => {\n      delete transactions[transactionId];\n    });\n    this.update({\n      transactions\n    });\n  }\n  _setTransactionStatus(txId, status, isFinalStep) {\n    const txMeta = this.getTransaction(txId);\n    if (!txMeta) {\n      return;\n    }\n    txMeta.status = status;\n    // only updating status so no validation required on txn.\n    this.updateTransaction(txMeta);\n    this.emit(TX_EVENTS.TX_STATUS_UPDATE, {\n      txId,\n      status\n    });\n    if (this.isFinalState(status) || isFinalStep) {\n      this.emit(`${txMeta.id}:finished`, txMeta);\n    } else {\n      this.emit(`${txMeta.id}:${status}`, txId);\n    }\n  }\n}\n\nexport { BaseTransactionStateManager };\n"],"names":[],"mappings":"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","ignoreList":[0]}}]
}