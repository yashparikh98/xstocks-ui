(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13227,(e,t,r)=>{"use strict";var n=e.r(42524).Buffer;t.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw TypeError(s+" is ambiguous");t[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,s=0;e[r]===c;)i++,r++;for(var o=(e.length-r)*u+1>>>0,l=new Uint8Array(o);r<e.length;){var d=e.charCodeAt(r);if(d>255)return;var f=t[d];if(255===f)return;for(var h=0,p=o-1;(0!==f||h<s)&&-1!==p;p--,h++)f+=a*l[p]>>>0,l[p]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");s=h,r++}for(var g=o-s;g!==o&&0===l[g];)g++;var y=n.allocUnsafe(i+(o-g));y.fill(0,0,i);for(var m=i;g!==o;)y[m++]=l[g++];return y}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var u=(o-s)*l+1>>>0,d=new Uint8Array(u);s!==o;){for(var f=t[s],h=0,p=u-1;(0!==f||h<i)&&-1!==p;p--,h++)f+=256*d[p]>>>0,d[p]=f%a>>>0,f=f/a>>>0;if(0!==f)throw Error("Non-zero carry");i=h,s++}for(var g=u-i;g!==u&&0===d[g];)g++;for(var y=c.repeat(r);g<u;++g)y+=e.charAt(d[g]);return y},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw Error("Non-base"+a+" character")}}}},35030,(e,t,r)=>{t.exports=e.r(13227)("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},17944,(e,t,r)=>{"use strict";var n=e.r(42524).Buffer;t.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw TypeError(s+" is ambiguous");t[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,s=0;e[r]===c;)i++,r++;for(var o=(e.length-r)*u+1>>>0,l=new Uint8Array(o);r<e.length;){var d=e.charCodeAt(r);if(d>255)return;var f=t[d];if(255===f)return;for(var h=0,p=o-1;(0!==f||h<s)&&-1!==p;p--,h++)f+=a*l[p]>>>0,l[p]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");s=h,r++}for(var g=o-s;g!==o&&0===l[g];)g++;var y=n.allocUnsafe(i+(o-g));y.fill(0,0,i);for(var m=i;g!==o;)y[m++]=l[g++];return y}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var u=(o-s)*l+1>>>0,d=new Uint8Array(u);s!==o;){for(var f=t[s],h=0,p=u-1;(0!==f||h<i)&&-1!==p;p--,h++)f+=256*d[p]>>>0,d[p]=f%a>>>0,f=f/a>>>0;if(0!==f)throw Error("Non-zero carry");i=h,s++}for(var g=u-i;g!==u&&0===d[g];)g++;for(var y=c.repeat(r);g<u;++g)y+=e.charAt(d[g]);return y},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw Error("Non-base"+a+" character")}}}},1262,(e,t,r)=>{t.exports=e.r(17944)("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},72766,(e,t,r)=>{"use strict";function n(e,t,r){return t<=e&&e<=r}function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function s(e){this.tokens=[].slice.call(e)}function o(e,t){if(e)throw TypeError("Decoder error");return t||65533}s.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.push(e.shift());else this.tokens.push(e)}};var a="utf-8";function c(e,t){if(!(this instanceof c))return new c(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function u(e,t){if(!(this instanceof u))return new u(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function l(e){var t=e.fatal,r=0,i=0,s=0,a=128,c=191;this.handler=function(e,u){if(-1===u&&0!==s)return s=0,o(t);if(-1===u)return -1;if(0===s){if(n(u,0,127))return u;if(n(u,194,223))s=1,r=u-192;else if(n(u,224,239))224===u&&(a=160),237===u&&(c=159),s=2,r=u-224;else{if(!n(u,240,244))return o(t);240===u&&(a=144),244===u&&(c=143),s=3,r=u-240}return r<<=6*s,null}if(!n(u,a,c))return r=s=i=0,a=128,c=191,e.prepend(u),o(t);if(a=128,c=191,i+=1,r+=u-128<<6*(s-i),i!==s)return null;var l=r;return r=s=i=0,l}}function d(e){e.fatal,this.handler=function(e,t){if(-1===t)return -1;if(n(t,0,127))return t;n(t,128,2047)?(r=1,i=192):n(t,2048,65535)?(r=2,i=224):n(t,65536,1114111)&&(r=3,i=240);for(var r,i,s=[(t>>6*r)+i];r>0;){var o=t>>6*(r-1);s.push(128|63&o),r-=1}return s}}c.prototype={decode:function(e,t){r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=i(t),this._streaming||(this._decoder=new l({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var r,n,o=new s(r),a=[];!o.endOfStream()&&-1!==(n=this._decoder.handler(o,o.read()));)null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n));if(!this._streaming){do{if(-1===(n=this._decoder.handler(o,o.read())))break;if(null===n)continue;Array.isArray(n)?a.push.apply(a,n):a.push(n)}while(!o.endOfStream())this._decoder=null}!a.length||-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===a[0]?(this._BOMseen=!0,a.shift()):this._BOMseen=!0);for(var c="",u=0;u<a.length;++u){var d=a[u];d<=65535?c+=String.fromCharCode(d):(d-=65536,c+=String.fromCharCode((d>>10)+55296,(1023&d)+56320))}return c}},u.prototype={encode:function(e,t){e=e?String(e):"",t=i(t),this._streaming||(this._encoder=new d(this._options)),this._streaming=!!t.stream;for(var r,n=[],o=new s(function(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var s=t.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)i.push(65533);else{var o=e.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=1023&s,c=1023&o;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}(e));!o.endOfStream()&&-1!==(r=this._encoder.handler(o,o.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(o,o.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}},r.TextEncoder=u,r.TextDecoder=c},54119,(e,t,r)=>{"use strict";var n=e.i(67034),i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},a=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},c=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeUnchecked=r.deserialize=r.serialize=r.BinaryReader=r.BinaryWriter=r.BorshError=r.baseDecode=r.baseEncode=void 0;let u=c(e.r(59341)),l=c(e.r(1262)),d=a(e.r(72766)),f=new("function"!=typeof TextDecoder?d.TextDecoder:TextDecoder)("utf-8",{fatal:!0});r.baseEncode=function(e){return"string"==typeof e&&(e=n.Buffer.from(e,"utf8")),l.default.encode(n.Buffer.from(e))},r.baseDecode=function(e){return n.Buffer.from(l.default.decode(e))};class h extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}r.BorshError=h;class p{constructor(){this.buf=n.Buffer.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=n.Buffer.concat([this.buf,n.Buffer.alloc(1024)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(n.Buffer.from(new u.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(n.Buffer.from(new u.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(n.Buffer.from(new u.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(n.Buffer.from(new u.default(e).toArray("le",64)))}writeBuffer(e){this.buf=n.Buffer.concat([n.Buffer.from(this.buf.subarray(0,this.length)),e,n.Buffer.alloc(1024)]),this.length+=e.length}writeString(e){this.maybeResize();let t=n.Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(n.Buffer.from(e))}writeArray(e,t){for(let r of(this.maybeResize(),this.writeU32(e.length),e))this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function g(e,t,r){let n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(e){if(e instanceof RangeError&&["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e.code)>=0)throw new h("Reached the end of buffer when deserializing");throw e}}}r.BinaryWriter=p;class y{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new u.default(e,"le")}readU128(){let e=this.readBuffer(16);return new u.default(e,"le")}readU256(){let e=this.readBuffer(32);return new u.default(e,"le")}readU512(){let e=this.readBuffer(64);return new u.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new h(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return f.decode(t)}catch(e){throw new h(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),r=[];for(let n=0;n<t;++n)r.push(e());return r}}function m(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(e,t,r,n,i){try{if("string"==typeof n)i[`write${m(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new h(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new h(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)b(e,null,r[t],n[0],i)}else i.writeArray(r,r=>{b(e,t,r,n[0],i)});else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),b(e,t,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach((r,s)=>{b(e,t,s,n.key,i),b(e,t,r,n.value,i)});break;default:throw new h(`FieldType ${n} unrecognized`)}else w(e,r,i)}catch(e){throw e instanceof h&&e.addToFieldPath(t),e}}function w(e,t,r){if("function"==typeof t.borshSerialize)return void t.borshSerialize(r);let n=e.get(t.constructor);if(!n)throw new h(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map(([n,i])=>{b(e,n,t[n],i,r)});else if("enum"===n.kind){let i=t[n.field];for(let s=0;s<n.values.length;++s){let[o,a]=n.values[s];if(o===i){r.writeU8(s),b(e,o,t[o],a,r);break}}}else throw new h(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function v(e,t,r,n){try{if("string"==typeof r)return n[`read${m(r)}`]();if(r instanceof Array)if("number"==typeof r[0])return n.readFixedArray(r[0]);else{if("number"!=typeof r[1])return n.readArray(()=>v(e,t,r[0],n));let i=[];for(let t=0;t<r[1];t++)i.push(v(e,null,r[0],n));return i}if("option"===r.kind){if(n.readU8())return v(e,t,r.type,n);return}if("map"===r.kind){let i=new Map,s=n.readU32();for(let o=0;o<s;o++){let s=v(e,t,r.key,n),o=v(e,t,r.value,n);i.set(s,o)}return i}return S(e,r,n)}catch(e){throw e instanceof h&&e.addToFieldPath(t),e}}function S(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);let n=e.get(t);if(!n)throw new h(`Class ${t.name} is missing in schema`);if("struct"===n.kind){let n={};for(let[i,s]of e.get(t).fields)n[i]=v(e,i,s,r);return new t(n)}if("enum"===n.kind){let i=r.readU8();if(i>=n.values.length)throw new h(`Enum index: ${i} is out of range`);let[s,o]=n.values[i],a=v(e,s,o,r);return new t({[s]:a})}throw new h(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}o([g],y.prototype,"readU8",null),o([g],y.prototype,"readU16",null),o([g],y.prototype,"readU32",null),o([g],y.prototype,"readU64",null),o([g],y.prototype,"readU128",null),o([g],y.prototype,"readU256",null),o([g],y.prototype,"readU512",null),o([g],y.prototype,"readString",null),o([g],y.prototype,"readFixedArray",null),o([g],y.prototype,"readArray",null),r.BinaryReader=y,r.serialize=function(e,t,r=p){let n=new r;return w(e,t,n),n.toArray()},r.deserialize=function(e,t,r,n=y){let i=new n(r),s=S(e,t,i);if(i.offset<r.length)throw new h(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return s},r.deserializeUnchecked=function(e,t,r,n=y){return S(e,t,new n(r))}},44610,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.s16=r.s8=r.nu64be=r.u48be=r.u40be=r.u32be=r.u24be=r.u16be=r.nu64=r.u48=r.u40=r.u32=r.u24=r.u16=r.u8=r.offset=r.greedy=r.Constant=r.UTF8=r.CString=r.Blob=r.Boolean=r.BitField=r.BitStructure=r.VariantLayout=r.Union=r.UnionLayoutDiscriminator=r.UnionDiscriminator=r.Structure=r.Sequence=r.DoubleBE=r.Double=r.FloatBE=r.Float=r.NearInt64BE=r.NearInt64=r.NearUInt64BE=r.NearUInt64=r.IntBE=r.Int=r.UIntBE=r.UInt=r.OffsetLayout=r.GreedyCount=r.ExternalLayout=r.bindConstructorLayout=r.nameWithProperty=r.Layout=r.uint8ArrayToBuffer=r.checkUint8Array=void 0,r.constant=r.utf8=r.cstr=r.blob=r.unionLayoutDiscriminator=r.union=r.seq=r.bits=r.struct=r.f64be=r.f64=r.f32be=r.f32=r.ns64be=r.s48be=r.s40be=r.s32be=r.s24be=r.s16be=r.ns64=r.s48=r.s40=r.s32=r.s24=void 0;let n=e.r(43943);function i(e){if(!(e instanceof Uint8Array))throw TypeError("b must be a Uint8Array")}function s(e){return i(e),n.Buffer.from(e.buffer,e.byteOffset,e.length)}r.checkUint8Array=i,r.uint8ArrayToBuffer=s;class o{constructor(e,t){if(!Number.isInteger(e))throw TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function a(e,t){return t.property?e+"["+t.property+"]":e}r.Layout=o,r.nameWithProperty=a,r.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw Error("Class is already bound to a layout");if(!(t&&t instanceof o))throw TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,r)=>t.decode(e,r),writable:!0})};class c extends o{isCount(){throw Error("ExternalLayout is abstract")}}r.ExternalLayout=c;class u extends c{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){return i(e),Math.floor((e.length-t)/this.elementSpan)}encode(e,t,r){return 0}}r.GreedyCount=u;class l extends c{constructor(e,t=0,r){if(!(e instanceof o))throw TypeError("layout must be a Layout");if(!Number.isInteger(t))throw TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof d||this.layout instanceof f}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}r.OffsetLayout=l;class d extends o{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntLE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntLE(e,r,this.span),this.span}}r.UInt=d;class f extends o{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntBE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntBE(e,r,this.span),this.span}}r.UIntBE=f;class h extends o{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readIntLE(t,this.span)}encode(e,t,r=0){return s(t).writeIntLE(e,r,this.span),this.span}}r.Int=h;class p extends o{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readIntBE(t,this.span)}encode(e,t,r=0){return s(t).writeIntBE(e,r,this.span),this.span}}function g(e){let t=Math.floor(e/0x100000000);return{hi32:t,lo32:e-0x100000000*t}}function y(e,t){return 0x100000000*e+t}r.IntBE=p;class m extends o{constructor(e){super(8,e)}decode(e,t=0){let r=s(e),n=r.readUInt32LE(t);return y(r.readUInt32LE(t+4),n)}encode(e,t,r=0){let n=g(e),i=s(t);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}r.NearUInt64=m;class b extends o{constructor(e){super(8,e)}decode(e,t=0){let r=s(e);return y(r.readUInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){let n=g(e),i=s(t);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}r.NearUInt64BE=b;class w extends o{constructor(e){super(8,e)}decode(e,t=0){let r=s(e),n=r.readUInt32LE(t);return y(r.readInt32LE(t+4),n)}encode(e,t,r=0){let n=g(e),i=s(t);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}r.NearInt64=w;class v extends o{constructor(e){super(8,e)}decode(e,t=0){let r=s(e);return y(r.readInt32BE(t),r.readUInt32BE(t+4))}encode(e,t,r=0){let n=g(e),i=s(t);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}r.NearInt64BE=v;class S extends o{constructor(e){super(4,e)}decode(e,t=0){return s(e).readFloatLE(t)}encode(e,t,r=0){return s(t).writeFloatLE(e,r),4}}r.Float=S;class k extends o{constructor(e){super(4,e)}decode(e,t=0){return s(e).readFloatBE(t)}encode(e,t,r=0){return s(t).writeFloatBE(e,r),4}}r.FloatBE=k;class B extends o{constructor(e){super(8,e)}decode(e,t=0){return s(e).readDoubleLE(t)}encode(e,t,r=0){return s(t).writeDoubleLE(e,r),8}}r.Double=B;class E extends o{constructor(e){super(8,e)}decode(e,t=0){return s(e).readDoubleBE(t)}encode(e,t,r=0){return s(t).writeDoubleBE(e,r),8}}r.DoubleBE=E;class x extends o{constructor(e,t,r){if(!(e instanceof o))throw TypeError("elementLayout must be a Layout");if(!(t instanceof c&&t.isCount()||Number.isInteger(t)&&0<=t))throw TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;t instanceof c||!(0<e.span)||(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof c&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t=0){let r=[],n=0,i=this.count;for(i instanceof c&&(i=i.decode(e,t));n<i;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){let n=this.elementLayout,i=e.reduce((e,i)=>e+n.encode(i,t,r+e),0);return this.count instanceof c&&this.count.encode(e.length,t,r),i}}r.Sequence=x;class I extends o{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((e,t)=>e&&t instanceof o,!0)))throw TypeError("fields must be array of Layout instances");for(const n of("boolean"==typeof t&&void 0===r&&(r=t,t=void 0),e))if(0>n.span&&void 0===n.property)throw Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce((e,t)=>e+t.getSpan(),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,n)=>{let i=n.getSpan(e,t);return t+=i,r+i},0)}catch(e){throw RangeError("indeterminate span")}return r}decode(e,t=0){i(e);let r=this.makeDestinationObject();for(let n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){let n=r,i=0,s=0;for(let n of this.fields){let o=n.span;if(s=0<o?o:0,void 0!==n.property){let i=e[n.property];void 0!==i&&(s=n.encode(i,t,r),0>o&&(o=n.getSpan(t,r)))}i=r,r+=o}return i+s-n}fromArray(e){let t=this.makeDestinationObject();for(let r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw TypeError("property must be string");let t=0;for(let r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}r.Structure=I;class A{constructor(e){this.property=e}decode(e,t){throw Error("UnionDiscriminator is abstract")}encode(e,t,r){throw Error("UnionDiscriminator is abstract")}}r.UnionDiscriminator=A;class _ extends A{constructor(e,t){if(!(e instanceof c&&e.isCount()))throw TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}r.UnionLayoutDiscriminator=_;class T extends o{constructor(e,t,r){let n;if(e instanceof d||e instanceof f)n=new _(new l(e));else if(e instanceof c&&e.isCount())n=new _(e);else if(e instanceof A)n=e;else throw TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof o))throw TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&0<=(i=t.span)&&(e instanceof d||e instanceof f)&&(i+=n.layout.span),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof d||e instanceof f,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return s(e)},this.configGetSourceVariant=function(e){s=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let r=this.getVariant(e,t);if(!r)throw Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw Error("unable to infer src variant")}decode(e,t=0){let r,n=this.discriminator,i=n.decode(e,t),s=this.registry[i];if(void 0===s){let s=this.defaultLayout,o=0;this.usesPrefixDiscriminator&&(o=n.layout.span),(r=this.makeDestinationObject())[n.property]=i,r[s.property]=s.decode(e,t+o)}else r=s.decode(e,t);return r}encode(e,t,r=0){let n=this.getSourceVariant(e);if(void 0===n){let n=this.discriminator,i=this.defaultLayout,s=0;return this.usesPrefixDiscriminator&&(s=n.layout.span),n.encode(e[n.property],t,r),s+i.encode(e[i.property],t,r+s)}return n.encode(e,t,r)}addVariant(e,t,r){let n=new O(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t=0){let r;return r=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[r]}}r.Union=T;class O extends o{constructor(e,t,r,n){if(!(e instanceof T))throw TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof o))throw TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw Error("variant span exceeds span of containing union");if("string"!=typeof n)throw TypeError("variant must have a String property")}let i=e.span;0>e.span&&0<=(i=r?r.span:0)&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e,t=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function P(e){return 0>e&&(e+=0x100000000),e}r.VariantLayout=O;class R extends o{constructor(e,t,r){if(!(e instanceof d||e instanceof f))throw TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=P(e),this},this._packedGetValue=function(){return n}}decode(e,t=0){let r=this.makeDestinationObject(),n=this.word.decode(e,t);for(let t of(this._packedSetValue(n),this.fields))void 0!==t.property&&(r[t.property]=t.decode(e));return r}encode(e,t,r=0){let n=this.word.decode(t,r);for(let t of(this._packedSetValue(n),this.fields))if(void 0!==t.property){let r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){let r=new C(this,e,t);return this.fields.push(r),r}addBoolean(e){let t=new L(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}}r.BitStructure=R;class C{constructor(e,t,r){if(!(e instanceof R))throw TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw TypeError("bits must be positive integer");const n=8*e.span,i=e.fields.reduce((e,t)=>e+t.bits,0);if(t+i>n)throw Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=0xffffffff),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=P(this.valueMask<<this.start),this.property=r}decode(e,t){return P(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==P(e&this.valueMask))throw TypeError(a("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),r=P(e<<this.start);this.container._packedSetValue(P(t&~this.wordMask)|r)}}r.BitField=C;class L extends C{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e*=1),super.encode(e)}}r.Boolean=L;class U extends o{constructor(e,t){if(!(e instanceof c&&e.isCount()||Number.isInteger(e)&&0<=e))throw TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof c||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),s(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof c&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw TypeError(a("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw RangeError("encoding overruns Uint8Array");let i=s(e);return s(t).write(i.toString("hex"),r,n,"hex"),this.length instanceof c&&this.length.encode(n,t,r),n}}r.Blob=U;class q extends o{constructor(e){super(-1,e)}getSpan(e,t=0){i(e);let r=t;for(;r<e.length&&0!==e[r];)r+=1;return 1+r-t}decode(e,t=0){let r=this.getSpan(e,t);return s(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));let i=n.Buffer.from(e,"utf8"),o=i.length;if(r+o>t.length)throw RangeError("encoding overruns Buffer");let a=s(t);return i.copy(a,r),a[r+o]=0,o+1}}r.CString=q;class z extends o{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return i(e),e.length-t}decode(e,t=0){let r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw RangeError("text length exceeds maxSpan");return s(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){"string"!=typeof e&&(e=String(e));let i=n.Buffer.from(e,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw RangeError("text length exceeds maxSpan");if(r+o>t.length)throw RangeError("encoding overruns Buffer");return i.copy(s(t),r),o}}r.UTF8=z;class N extends o{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}r.Constant=N,r.greedy=(e,t)=>new u(e,t),r.offset=(e,t,r)=>new l(e,t,r),r.u8=e=>new d(1,e),r.u16=e=>new d(2,e),r.u24=e=>new d(3,e),r.u32=e=>new d(4,e),r.u40=e=>new d(5,e),r.u48=e=>new d(6,e),r.nu64=e=>new m(e),r.u16be=e=>new f(2,e),r.u24be=e=>new f(3,e),r.u32be=e=>new f(4,e),r.u40be=e=>new f(5,e),r.u48be=e=>new f(6,e),r.nu64be=e=>new b(e),r.s8=e=>new h(1,e),r.s16=e=>new h(2,e),r.s24=e=>new h(3,e),r.s32=e=>new h(4,e),r.s40=e=>new h(5,e),r.s48=e=>new h(6,e),r.ns64=e=>new w(e),r.s16be=e=>new p(2,e),r.s24be=e=>new p(3,e),r.s32be=e=>new p(4,e),r.s40be=e=>new p(5,e),r.s48be=e=>new p(6,e),r.ns64be=e=>new v(e),r.f32=e=>new S(e),r.f32be=e=>new k(e),r.f64=e=>new B(e),r.f64be=e=>new E(e),r.struct=(e,t,r)=>new I(e,t,r),r.bits=(e,t,r)=>new R(e,t,r),r.seq=(e,t,r)=>new x(e,t,r),r.union=(e,t,r)=>new T(e,t,r),r.unionLayoutDiscriminator=(e,t)=>new _(e,t),r.blob=(e,t)=>new U(e,t),r.cstr=e=>new q(e),r.utf8=(e,t)=>new z(e,t),r.constant=(e,t)=>new N(e,t)},65274,63110,65704,35825,e=>{"use strict";var t,r=new Uint8Array(16);function n(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(r)}e.s(["default",()=>n],65274);let i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&i.test(e)};e.s(["default",0,s],63110);for(var o=[],a=0;a<256;++a)o.push((a+256).toString(16).substr(1));let c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r};e.s(["default",0,c],65704),e.s(["default",0,function(e,t,r){var i=(e=e||{}).random||(e.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=i[s];return t}return c(i)}],35825)},37342,e=>{"use strict";e.s([],48636),e.i(48636);var t,r,n=e.i(65274),i=e.i(65704),s=0,o=0,a=e.i(63110);let c=function(e){if(!(0,a.default)(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/0x10000000000&255,r[11]=t/0x100000000&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function u(e,t,r){function n(e,n,s,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=c(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,s){o=o||0;for(var u=0;u<16;++u)s[o+u]=a[u];return s}return(0,i.default)(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function l(e){return(e+64>>>9<<4)+14+1}function d(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function f(e,t,r,n,i,s){var o;return d((o=d(d(t,e),d(n,s)))<<i|o>>>32-i,r)}function h(e,t,r,n,i,s,o){return f(t&r|~t&n,e,t,i,s,o)}function p(e,t,r,n,i,s,o){return f(t&n|r&~n,e,t,i,s,o)}function g(e,t,r,n,i,s,o){return f(t^r^n,e,t,i,s,o)}function y(e,t,r,n,i,s,o){return f(r^(t|~n),e,t,i,s,o)}var m=u("v3",48,function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",i=0;i<r;i+=8){var s=e[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(15&s),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[l(t)-1]=t;for(var r=0x67452301,n=-0x10325477,i=-0x67452302,s=0x10325476,o=0;o<e.length;o+=16){var a=r,c=n,u=i,f=s;r=h(r,n,i,s,e[o],7,-0x28955b88),s=h(s,r,n,i,e[o+1],12,-0x173848aa),i=h(i,s,r,n,e[o+2],17,0x242070db),n=h(n,i,s,r,e[o+3],22,-0x3e423112),r=h(r,n,i,s,e[o+4],7,-0xa83f051),s=h(s,r,n,i,e[o+5],12,0x4787c62a),i=h(i,s,r,n,e[o+6],17,-0x57cfb9ed),n=h(n,i,s,r,e[o+7],22,-0x2b96aff),r=h(r,n,i,s,e[o+8],7,0x698098d8),s=h(s,r,n,i,e[o+9],12,-0x74bb0851),i=h(i,s,r,n,e[o+10],17,-42063),n=h(n,i,s,r,e[o+11],22,-0x76a32842),r=h(r,n,i,s,e[o+12],7,0x6b901122),s=h(s,r,n,i,e[o+13],12,-0x2678e6d),i=h(i,s,r,n,e[o+14],17,-0x5986bc72),n=h(n,i,s,r,e[o+15],22,0x49b40821),r=p(r,n,i,s,e[o+1],5,-0x9e1da9e),s=p(s,r,n,i,e[o+6],9,-0x3fbf4cc0),i=p(i,s,r,n,e[o+11],14,0x265e5a51),n=p(n,i,s,r,e[o],20,-0x16493856),r=p(r,n,i,s,e[o+5],5,-0x29d0efa3),s=p(s,r,n,i,e[o+10],9,0x2441453),i=p(i,s,r,n,e[o+15],14,-0x275e197f),n=p(n,i,s,r,e[o+4],20,-0x182c0438),r=p(r,n,i,s,e[o+9],5,0x21e1cde6),s=p(s,r,n,i,e[o+14],9,-0x3cc8f82a),i=p(i,s,r,n,e[o+3],14,-0xb2af279),n=p(n,i,s,r,e[o+8],20,0x455a14ed),r=p(r,n,i,s,e[o+13],5,-0x561c16fb),s=p(s,r,n,i,e[o+2],9,-0x3105c08),i=p(i,s,r,n,e[o+7],14,0x676f02d9),n=p(n,i,s,r,e[o+12],20,-0x72d5b376),r=g(r,n,i,s,e[o+5],4,-378558),s=g(s,r,n,i,e[o+8],11,-0x788e097f),i=g(i,s,r,n,e[o+11],16,0x6d9d6122),n=g(n,i,s,r,e[o+14],23,-0x21ac7f4),r=g(r,n,i,s,e[o+1],4,-0x5b4115bc),s=g(s,r,n,i,e[o+4],11,0x4bdecfa9),i=g(i,s,r,n,e[o+7],16,-0x944b4a0),n=g(n,i,s,r,e[o+10],23,-0x41404390),r=g(r,n,i,s,e[o+13],4,0x289b7ec6),s=g(s,r,n,i,e[o],11,-0x155ed806),i=g(i,s,r,n,e[o+3],16,-0x2b10cf7b),n=g(n,i,s,r,e[o+6],23,0x4881d05),r=g(r,n,i,s,e[o+9],4,-0x262b2fc7),s=g(s,r,n,i,e[o+12],11,-0x1924661b),i=g(i,s,r,n,e[o+15],16,0x1fa27cf8),n=g(n,i,s,r,e[o+2],23,-0x3b53a99b),r=y(r,n,i,s,e[o],6,-0xbd6ddbc),s=y(s,r,n,i,e[o+7],10,0x432aff97),i=y(i,s,r,n,e[o+14],15,-0x546bdc59),n=y(n,i,s,r,e[o+5],21,-0x36c5fc7),r=y(r,n,i,s,e[o+12],6,0x655b59c3),s=y(s,r,n,i,e[o+3],10,-0x70f3336e),i=y(i,s,r,n,e[o+10],15,-1051523),n=y(n,i,s,r,e[o+1],21,-0x7a7ba22f),r=y(r,n,i,s,e[o+8],6,0x6fa87e4f),s=y(s,r,n,i,e[o+15],10,-0x1d31920),i=y(i,s,r,n,e[o+6],15,-0x5cfebcec),n=y(n,i,s,r,e[o+13],21,0x4e0811a1),r=y(r,n,i,s,e[o+4],6,-0x8ac817e),s=y(s,r,n,i,e[o+11],10,-0x42c50dcb),i=y(i,s,r,n,e[o+2],15,0x2ad7d2bb),n=y(n,i,s,r,e[o+9],21,-0x14792c6f),r=d(r,a),n=d(n,c),i=d(i,u),s=d(s,f)}return[r,n,i,s]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(l(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}),b=e.i(35825);function w(e,t){return e<<t|e>>>32-t}var v=u("v5",80,function(e){var t=[0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xca62c1d6],r=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=Math.ceil((e.length/4+2)/16),o=Array(s),a=0;a<s;++a){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=e[64*a+4*u]<<24|e[64*a+4*u+1]<<16|e[64*a+4*u+2]<<8|e[64*a+4*u+3];o[a]=c}o[s-1][14]=(e.length-1)*8/0x100000000,o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=(e.length-1)*8|0;for(var l=0;l<s;++l){for(var d=new Uint32Array(80),f=0;f<16;++f)d[f]=o[l][f];for(var h=16;h<80;++h)d[h]=w(d[h-3]^d[h-8]^d[h-14]^d[h-16],1);for(var p=r[0],g=r[1],y=r[2],m=r[3],b=r[4],v=0;v<80;++v){var S=Math.floor(v/20),k=w(p,5)+function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}(S,g,y,m)+b+t[S]+d[v]>>>0;b=m,m=y,y=w(g,30)>>>0,g=p,p=k}r[0]=r[0]+p>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+m>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]});e.s(["NIL",0,"00000000-0000-0000-0000-000000000000","parse",0,c,"stringify",()=>i.default,"v1",0,function(e,a,c){var u=a&&c||0,l=a||Array(16),d=(e=e||{}).node||t,f=void 0!==e.clockseq?e.clockseq:r;if(null==d||null==f){var h=e.random||(e.rng||n.default)();null==d&&(d=t=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=r=(h[6]<<8|h[7])&16383)}var p=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:o+1,y=p-s+(g-o)/1e4;if(y<0&&void 0===e.clockseq&&(f=f+1&16383),(y<0||p>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,o=g,r=f;var m=((0xfffffff&(p+=122192928e5))*1e4+g)%0x100000000;l[u++]=m>>>24&255,l[u++]=m>>>16&255,l[u++]=m>>>8&255,l[u++]=255&m;var b=p/0x100000000*1e4&0xfffffff;l[u++]=b>>>8&255,l[u++]=255&b,l[u++]=b>>>24&15|16,l[u++]=b>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var w=0;w<6;++w)l[u+w]=d[w];return a||(0,i.default)(l)},"v3",0,m,"v4",()=>b.default,"v5",0,v,"validate",()=>a.default,"version",0,function(e){if(!(0,a.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}],37342)},58109,(e,t,r)=>{"use strict";let n=e.r(37342).v4;t.exports=function(e,t,r,i){if("string"!=typeof e)throw TypeError(e+" must be a string");let s="number"==typeof(i=i||{}).version?i.version:2;if(1!==s&&2!==s)throw TypeError(s+" must be 1 or 2");let o={method:e};if(2===s&&(o.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw TypeError(t+" must be an object, array or omitted");o.params=t}return void 0===r?o.id=("function"==typeof i.generator?i.generator:function(){return n()})(o,i):2===s&&null===r?i.notificationIdNull&&(o.id=null):o.id=r,o}},78217,(e,t,r)=>{"use strict";let n=e.r(37342).v4,i=e.r(58109),s=function(e,t){if(!(this instanceof s))return new s(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return n()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};t.exports=s,s.prototype.request=function(e,t,r,n){let s,o=this,a=null,c=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&c)throw TypeError("JSON-RPC 1.0 does not support batching");let u=!c&&e&&"object"==typeof e&&"function"==typeof t;if(c||u)n=t,a=e;else{"function"==typeof r&&(n=r,r=void 0);let s="function"==typeof n;try{a=i(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(s)return void n(e);throw e}if(!s)return a}try{s=JSON.stringify(a,this.options.replacer)}catch(e){n(e);return}return this.callServer(s,function(e,t){o._parseResponse(e,t,n)}),a},s.prototype._parseResponse=function(e,t,r){let n;if(e)return void r(e);if(!t)return void r();try{n=JSON.parse(t,this.options.reviver)}catch(e){r(e);return}if(3===r.length)if(!Array.isArray(n))return void r(null,n.error,n.result);else{let e=function(e){return void 0!==e.error};r(null,n.filter(e),n.filter(function(t){return!e(t)}));return}r(null,n)}},27261,e=>{"use strict";let t,r;var n,i,s,o,a,c,u,l=e.i(43943),d=e.i(44314),f=e.i(70525);let h=BigInt(0),p=BigInt(1);function g(e,t=""){if("boolean"!=typeof e)throw Error((t&&`"${t}"`)+"expected boolean, got type="+typeof e);return e}function y(e,t,r=""){let n=(0,f.isBytes)(e),i=e?.length,s=void 0!==t;if(!n||s&&i!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(s?` of length ${t}`:"")+", got "+(n?`length=${i}`:`type=${typeof e}`));return e}function m(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function b(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?h:BigInt("0x"+e)}function w(e){return b((0,f.bytesToHex)(e))}function v(e){return(0,f.abytes)(e),b((0,f.bytesToHex)(Uint8Array.from(e).reverse()))}function S(e,t){return(0,f.hexToBytes)(e.toString(16).padStart(2*t,"0"))}function k(e,t){return S(e,t).reverse()}function B(e,t,r){let n;if("string"==typeof t)try{n=(0,f.hexToBytes)(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if((0,f.isBytes)(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}function E(e){return Uint8Array.from(e)}let x=e=>"bigint"==typeof e&&h<=e;function I(e,t,r,n){var i,s,o;if(i=t,s=r,o=n,!(x(i)&&x(s)&&x(o))||!(s<=i)||!(i<o))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function A(e){let t;for(t=0;e>h;e>>=p,t+=1);return t}let _=e=>(p<<BigInt(e))-p;function T(e,t,r={}){if(!e||"object"!=typeof e)throw Error("expected valid options object");function n(t,r,n){let i=e[t];if(n&&void 0===i)return;let s=typeof i;if(s!==r||null===i)throw Error(`param "${t}" is invalid: expected ${r}, got ${s}`)}Object.entries(t).forEach(([e,t])=>n(e,t,!1)),Object.entries(r).forEach(([e,t])=>n(e,t,!0))}let O=()=>{throw Error("not implemented")};function P(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let s=e(r,...n);return t.set(r,s),s}}let R=BigInt(0),C=BigInt(1),L=BigInt(2),U=BigInt(3),q=BigInt(4),z=BigInt(5),N=BigInt(7),W=BigInt(8),K=BigInt(9),F=BigInt(16);function M(e,t){let r=e%t;return r>=R?r:t+r}function D(e,t,r){let n=e;for(;t-- >R;)n*=n,n%=r;return n}function j(e,t){if(e===R)throw Error("invert: expected non-zero number");if(t<=R)throw Error("invert: expected positive modulus, got "+t);let r=M(e,t),n=t,i=R,s=C,o=C,a=R;for(;r!==R;){let e=n/r,t=n%r,c=i-o*e,u=s-a*e;n=r,r=t,i=o,s=a,o=c,a=u}if(n!==C)throw Error("invert: does not exist");return M(i,t)}function $(e,t,r){if(!e.eql(e.sqr(t),r))throw Error("Cannot find square root")}function V(e,t){let r=(e.ORDER+C)/q,n=e.pow(t,r);return $(e,n,t),n}function H(e,t){let r=(e.ORDER-z)/W,n=e.mul(t,L),i=e.pow(n,r),s=e.mul(t,i),o=e.mul(e.mul(s,L),i),a=e.mul(s,e.sub(o,e.ONE));return $(e,a,t),a}function Z(e){if(e<U)throw Error("sqrt is not defined for small field");let t=e-C,r=0;for(;t%L===R;)t/=L,r++;let n=L,i=et(e);for(;1===Q(i,n);)if(n++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return V;let s=i.pow(n,t),o=(t+C)/L;return function(e,n){if(e.is0(n))return n;if(1!==Q(e,n))throw Error("Cannot find square root");let i=r,a=e.mul(e.ONE,s),c=e.pow(n,t),u=e.pow(n,o);for(;!e.eql(c,e.ONE);){if(e.is0(c))return e.ZERO;let t=1,r=e.sqr(c);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===i)throw Error("Cannot find square root");let n=C<<BigInt(i-t-1),s=e.pow(a,n);i=t,a=e.sqr(s),c=e.mul(c,a),u=e.mul(u,s)}return u}}let G=(e,t)=>(M(e,t)&C)===C,Y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function J(e){return T(e,Y.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),e}function X(e,t,r=!1){let n=Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),s=e.inv(i);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),s),n}function Q(e,t){let r=(e.ORDER-C)/L,n=e.pow(t,r),i=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),o=e.eql(n,e.neg(e.ONE));if(!i&&!s&&!o)throw Error("invalid Legendre symbol result");return i?1:s?0:-1}function ee(e,t){void 0!==t&&(0,f.anumber)(t);let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function et(e,t,r=!1,n={}){let i,s,o,a;if(e<=R)throw Error("invalid field: expected ORDER > 0, got "+e);let c=!1;if("object"==typeof t&&null!=t){if(n.sqrt||r)throw Error("cannot specify opts in two arguments");t.BITS&&(s=t.BITS),t.sqrt&&(o=t.sqrt),"boolean"==typeof t.isLE&&(r=t.isLE),"boolean"==typeof t.modFromBytes&&(c=t.modFromBytes),a=t.allowedLengths}else"number"==typeof t&&(s=t),n.sqrt&&(o=n.sqrt);let{nBitLength:u,nByteLength:l}=ee(e,s);if(l>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let d=Object.freeze({ORDER:e,isLE:r,BITS:u,BYTES:l,MASK:_(u),ZERO:R,ONE:C,allowedLengths:a,create:t=>M(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return R<=t&&t<e},is0:e=>e===R,isValidNot0:e=>!d.is0(e)&&d.isValid(e),isOdd:e=>(e&C)===C,neg:t=>M(-t,e),eql:(e,t)=>e===t,sqr:t=>M(t*t,e),add:(t,r)=>M(t+r,e),sub:(t,r)=>M(t-r,e),mul:(t,r)=>M(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<R)throw Error("invalid exponent, negatives unsupported");if(r===R)return e.ONE;if(r===C)return t;let n=e.ONE,i=t;for(;r>R;)r&C&&(n=e.mul(n,i)),i=e.sqr(i),r>>=C;return n})(d,e,t),div:(t,r)=>M(t*j(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>j(t,e),sqrt:o||(t=>(i||(i=function(e){if(e%q===U)return V;if(e%W===z)return H;if(e%F===K){let t,r,n,i,s,o;return t=et(e),n=(r=Z(e))(t,t.neg(t.ONE)),i=r(t,n),s=r(t,t.neg(n)),o=(e+N)/F,(e,t)=>{let r=e.pow(t,o),a=e.mul(r,n),c=e.mul(r,i),u=e.mul(r,s),l=e.eql(e.sqr(a),t),d=e.eql(e.sqr(c),t);r=e.cmov(r,a,l),a=e.cmov(u,c,d);let f=e.eql(e.sqr(a),t),h=e.cmov(r,a,f);return $(e,h,t),h}}return Z(e)}(e)),i(d,t))),toBytes:e=>r?k(e,l):S(e,l),fromBytes:(t,n=!0)=>{if(a){if(!a.includes(t.length)||t.length>l)throw Error("Field.fromBytes: expected "+a+" bytes, got "+t.length);let e=new Uint8Array(l);e.set(t,r?0:e.length-t.length),t=e}if(t.length!==l)throw Error("Field.fromBytes: expected "+l+" bytes, got "+t.length);let i=r?v(t):w(t);if(c&&(i=M(i,e)),!n&&!d.isValid(i))throw Error("invalid field element: outside of range 0..ORDER");return i},invertBatch:e=>X(d,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(d)}function er(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function en(e){let t=er(e);return t+Math.ceil(t/2)}let ei=BigInt(0),es=BigInt(1);function eo(e,t){let r=t.negate();return e?r:t}function ea(e,t){let r=X(e.Fp,t.map(e=>e.Z));return t.map((t,n)=>e.fromAffine(t.toAffine(r[n])))}function ec(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function eu(e,t){ec(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e;return{windows:r,windowSize:n,mask:_(e),maxNumber:i,shiftBy:BigInt(e)}}function el(e,t,r){let{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r,a=Number(e&i),c=e>>o;a>n&&(a-=s,c+=es);let u=t*n,l=u+Math.abs(a)-1,d=0===a;return{nextN:c,offset:l,isZero:d,isNeg:a<0,isNegF:t%2!=0,offsetF:u}}let ed=new WeakMap,ef=new WeakMap;function eh(e){return ef.get(e)||1}function ep(e){if(e!==ei)throw Error("invalid wNAF")}class eg{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let n=e;for(;t>ei;)t&es&&(r=r.add(n)),n=n.double(),t>>=es;return r}precomputeWindow(e,t){let{windows:r,windowSize:n}=eu(t,this.bits),i=[],s=e,o=s;for(let e=0;e<r;e++){o=s,i.push(o);for(let e=1;e<n;e++)o=o.add(s),i.push(o);s=o.double()}return i}wNAF(e,t,r){if(!this.Fn.isValid(r))throw Error("invalid scalar");let n=this.ZERO,i=this.BASE,s=eu(e,this.bits);for(let e=0;e<s.windows;e++){let{nextN:o,offset:a,isZero:c,isNeg:u,isNegF:l,offsetF:d}=el(r,e,s);r=o,c?i=i.add(eo(l,t[d])):n=n.add(eo(u,t[a]))}return ep(r),{p:n,f:i}}wNAFUnsafe(e,t,r,n=this.ZERO){let i=eu(e,this.bits);for(let e=0;e<i.windows&&r!==ei;e++){let{nextN:s,offset:o,isZero:a,isNeg:c}=el(r,e,i);if(r=s,!a){let e=t[o];n=n.add(c?e.negate():e)}}return ep(r),n}getPrecomputes(e,t,r){let n=ed.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(n=r(n)),ed.set(t,n))),n}cached(e,t,r){let n=eh(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)}unsafe(e,t,r,n){let i=eh(e);return 1===i?this._unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)}createCache(e,t){ec(t,this.bits),ef.set(e,t),ed.delete(e)}hasCache(e){return 1!==eh(e)}}function ey(e,t,r,n){if(!Array.isArray(r))throw Error("array expected");r.forEach((t,r)=>{if(!(t instanceof e))throw Error("invalid point at index "+r)});if(!Array.isArray(n))throw Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)});let i=r.length,s=n.length;if(i!==s)throw Error("arrays of points and scalars must have equal length");let o=e.ZERO,a=A(BigInt(i)),c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);let u=_(c),l=Array(Number(u)+1).fill(o),d=Math.floor((t.BITS-1)/c)*c,f=o;for(let e=d;e>=0;e-=c){l.fill(o);for(let t=0;t<s;t++){let i=Number(n[t]>>BigInt(e)&u);l[i]=l[i].add(r[t])}let t=o;for(let e=l.length-1,r=o;e>0;e--)r=r.add(l[e]),t=t.add(r);if(f=f.add(t),0!==e)for(let e=0;e<c;e++)f=f.double()}return f}function em(e,t,r){if(!t)return et(e,{isLE:r});if(t.ORDER!==e)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return J(t),t}function eb(e,t,r={},n){if(void 0===n&&(n="edwards"===e),!t||"object"!=typeof t)throw Error(`expected valid ${e} CURVE object`);for(let e of["p","n","h"]){let r=t[e];if(!("bigint"==typeof r&&r>ei))throw Error(`CURVE.${e} must be positive bigint`)}let i=em(t.p,r.Fp,n),s=em(t.n,r.Fn,n);for(let r of["Gx","Gy","a","weierstrass"===e?"b":"d"])if(!i.isValid(t[r]))throw Error(`CURVE.${r} must be valid field element of CURVE.Fp`);return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:i,Fn:s}}let ew=BigInt(0),ev=BigInt(1),eS=BigInt(2),ek=BigInt(8);class eB{constructor(e){this.ep=e}static fromBytes(e){O()}static fromHex(e){O()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(e){return this.ep.toAffine(e)}toHex(){return(0,f.bytesToHex)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(e){return this.assertSame(e),this.init(this.ep.add(e.ep))}subtract(e){return this.assertSame(e),this.init(this.ep.subtract(e.ep))}multiply(e){return this.init(this.ep.multiply(e))}multiplyUnsafe(e){return this.init(this.ep.multiplyUnsafe(e))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(e,t){return this.init(this.ep.precompute(e,t))}toRawBytes(){return this.toBytes()}}function eE(e,t){if(ex(e),ex(t),e<0||e>=1<<8*t)throw Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function ex(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function eI(e){if(!(0,f.isBytes)(e)&&"string"!=typeof e)throw Error("DST must be Uint8Array or string");return"string"==typeof e?(0,f.utf8ToBytes)(e):e}function eA(e,t,r){var n;let i;T(r,{p:"bigint",m:"number",k:"number",hash:"function"});let{p:s,k:o,m:a,hash:c,expand:u,DST:l}=r;if(!("function"==typeof(n=r.hash)&&Number.isSafeInteger(n.outputLen)))throw Error("expected valid hash");(0,f.abytes)(e),ex(t);let d=Math.ceil((s.toString(2).length+o)/8),h=t*a*d;if("xmd"===u)i=function(e,t,r,n){(0,f.abytes)(e),ex(r),(t=eI(t)).length>255&&(t=n((0,f.concatBytes)((0,f.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:i,blockLen:s}=n,o=Math.ceil(r/i);if(r>65535||o>255)throw Error("expand_message_xmd: invalid lenInBytes");let a=(0,f.concatBytes)(t,eE(t.length,1)),c=eE(0,s),u=eE(r,2),l=Array(o),d=n((0,f.concatBytes)(c,e,u,eE(0,1),a));l[0]=n((0,f.concatBytes)(d,eE(1,1),a));for(let e=1;e<=o;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}(d,l[e-1]),eE(e+1,1),a];l[e]=n((0,f.concatBytes)(...t))}return(0,f.concatBytes)(...l).slice(0,r)}(e,l,h,c);else if("xof"===u)i=function(e,t,r,n,i){if((0,f.abytes)(e),ex(r),(t=eI(t)).length>255){let e=Math.ceil(2*n/8);t=i.create({dkLen:e}).update((0,f.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(eE(r,2)).update(t).update(eE(t.length,1)).digest()}(e,l,h,o,c);else if("_internal_pass"===u)i=e;else throw Error('expand must be "xmd" or "xof"');let p=Array(t);for(let e=0;e<t;e++){let t=Array(a);for(let r=0;r<a;r++){let n=d*(r+e*a),o=i.subarray(n,n+d);t[r]=M(w(o),s)}p[e]=t}return p}let e_=(0,f.utf8ToBytes)("HashToScalar-");function eT(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");function n(r){return e.fromAffine(t(r))}function i(t){let r=t.clearCofactor();return r.equals(e.ZERO)?e.ZERO:(r.assertValidity(),r)}return{defaults:r,hashToCurve(e,t){let s=eA(e,2,Object.assign({},r,t)),o=n(s[0]),a=n(s[1]);return i(o.add(a))},encodeToCurve(e,t){let s=r.encodeDST?{DST:r.encodeDST}:{};return i(n(eA(e,1,Object.assign({},r,s,t))[0]))},mapToCurve(e){if(!Array.isArray(e))throw Error("expected array of bigints");for(let t of e)if("bigint"!=typeof t)throw Error("expected array of bigints");return i(n(e))},hashToScalar:(t,n)=>eA(t,1,Object.assign({},r,{p:e.Fn.ORDER,m:1,DST:e_},n))[0][0]}}BigInt(0),BigInt(1),BigInt(2);let eO=BigInt(0),eP=BigInt(1),eR=BigInt(2),eC=BigInt(3),eL=BigInt(5),eU=BigInt(8),eq=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),ez={p:eq,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:eU,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")},eN=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function eW(e,t){var r;let n,i,s,o,a,c,u,l,d,f,h,p,g,y,m=M(t*t*t,eq),b=(r=e*M(m*m*t,eq),n=BigInt(10),i=BigInt(20),s=BigInt(40),o=BigInt(80),c=D(a=r*r%eq*r%eq,eR,eq)*a%eq,u=D(c,eP,eq)*r%eq,l=D(u,eL,eq)*u%eq,d=D(l,n,eq)*l%eq,f=D(d,i,eq)*d%eq,h=D(f,s,eq)*f%eq,p=D(h,o,eq)*h%eq,g=D(p,o,eq)*h%eq,y=D(g,n,eq)*l%eq,{pow_p_5_8:D(y,eR,eq)*r%eq,b2:a}).pow_p_5_8,w=M(e*m*b,eq),v=M(t*w*w,eq),S=w,k=M(w*eN,eq),B=v===e,E=v===M(-e,eq),x=v===M(-e*eN,eq);return B&&(w=S),(E||x)&&(w=k),G(w,eq)&&(w=M(-w,eq)),{isValid:B||E,value:w}}let eK=et(ez.p,{isLE:!0}),eF=et(ez.n,{isLE:!0}),eM=function(e){let t,r,n,i,{CURVE:s,curveOpts:o,hash:a,eddsaOpts:c}=(t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r={Fp:e.Fp,Fn:et(t.n,e.nBitLength,!0),uvRatio:e.uvRatio},n={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve},{CURVE:t,curveOpts:r,hash:e.hash,eddsaOpts:n}),u=function(e,t,r={}){if("function"!=typeof t)throw Error('"hash" function param is required');T(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=r,{BASE:i,Fp:s,Fn:o}=e,a=r.randomBytes||f.randomBytes,c=r.adjustScalarBytes||(e=>e),u=r.domain||((e,t,r)=>{if(g(r,"phflag"),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function l(e){return o.create(v(e))}function d(e){var r;let n,s,o,a,u,{head:d,prefix:f,scalar:h}=(r=B("private key",r=e,n=w.secretKey),o=c((s=B("hashed private key",t(r),2*n)).slice(0,n)),a=s.slice(n,2*n),u=l(o),{head:o,prefix:a,scalar:u}),p=i.multiply(h),g=p.toBytes();return{head:d,prefix:f,scalar:h,point:p,pointBytes:g}}function h(e){return d(e).pointBytes}function p(e=Uint8Array.of(),...r){return l(t(u((0,f.concatBytes)(...r),B("context",e),!!n)))}let m={zip215:!0},b=s.BYTES,w={secretKey:b,publicKey:b,signature:2*b,seed:b};function S(e=a(w.seed)){return y(e,w.seed,"seed")}let k={getExtendedPublicKey:d,randomSecretKey:S,isValidSecretKey:function(e){return(0,f.isBytes)(e)&&e.length===o.BYTES},isValidPublicKey:function(t,r){try{return!!e.fromBytes(t,r)}catch(e){return!1}},toMontgomery(t){let{y:r}=e.fromBytes(t),n=w.publicKey,i=32===n;if(!i&&57!==n)throw Error("only defined for 25519 and 448");let o=i?s.div(ev+r,ev-r):s.div(r-ev,r+ev);return s.toBytes(o)},toMontgomerySecret(e){let r=w.secretKey;return y(e,r),c(t(e.subarray(0,r))).subarray(0,r)},randomPrivateKey:S,precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)};return Object.freeze({keygen:function(e){let t=k.randomSecretKey(e);return{secretKey:t,publicKey:h(t)}},getPublicKey:h,sign:function(e,t,r={}){e=B("message",e),n&&(e=n(e));let{prefix:s,scalar:a,pointBytes:c}=d(t),u=p(r.context,s,e),l=i.multiply(u).toBytes(),h=p(r.context,l,c,e),g=o.create(u+h*a);if(!o.isValid(g))throw Error("sign failed: invalid s");return y((0,f.concatBytes)(l,o.toBytes(g)),w.signature,"result")},verify:function(t,r,s,o=m){let a,c,u,{context:l,zip215:d}=o,f=w.signature;t=B("signature",t,f),r=B("message",r),s=B("publicKey",s,w.publicKey),void 0!==d&&g(d,"zip215"),n&&(r=n(r));let h=f/2,y=t.subarray(0,h),b=v(t.subarray(h,f));try{a=e.fromBytes(s,d),c=e.fromBytes(y,d),u=i.multiplyUnsafe(b)}catch(e){return!1}if(!d&&a.isSmallOrder())return!1;let S=p(l,c.toBytes(),a.toBytes(),r);return c.add(a.multiplyUnsafe(S)).subtract(u).clearCofactor().is0()},utils:k,Point:e,lengths:w})}(function(e,t={}){var r,n;let i,s,o,a,c,u=eb("edwards",e,t,t.FpFnLE),{Fp:l,Fn:d}=u,h=u.CURVE,{h:p}=h;T(t,{},{uvRatio:"function"});let m=eS<<BigInt(8*d.BYTES)-ev,b=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:l.sqrt(l.div(e,t))}}catch(e){return{isValid:!1,value:ew}}});if(r=h.Gx,n=h.Gy,i=l.sqr(r),s=l.sqr(n),o=l.add(l.mul(h.a,i),s),a=l.add(l.ONE,l.mul(h.d,l.mul(i,s))),!l.eql(o,a))throw Error("bad curve params: generator point");function w(e,t,r=!1){return I("coordinate "+e,t,r?ev:ew,m),t}function S(e){if(!(e instanceof A))throw Error("ExtendedPoint expected")}let k=P((e,t)=>{let r,n,{X:i,Y:s,Z:o}=e,a=e.is0();null==t&&(t=a?ek:l.inv(o));let c=(r=i*t,l.create(r)),u=(n=s*t,l.create(n)),d=l.mul(o,t);if(a)return{x:ew,y:ev};if(d!==ev)throw Error("invZ was invalid");return{x:c,y:u}}),x=P(e=>{let t,r,n,i,s,o,a,c,u,d,f,p,{a:g,d:y}=h;if(e.is0())throw Error("bad point: ZERO");let{X:m,Y:b,Z:w,T:v}=e,S=(t=m*m,l.create(t)),k=(r=b*b,l.create(r)),B=(n=w*w,l.create(n)),E=(i=B*B,l.create(i));if(a=B*(s=S*g,o=l.create(s)+k,l.create(o)),l.create(a)!==(d=E+(u=y*(c=S*k,l.create(c)),l.create(u)),l.create(d)))throw Error("bad point: equation left != right (1)");if(f=m*b,l.create(f)!==(p=w*v,l.create(p)))throw Error("bad point: equation left != right (2)");return!0});class A{constructor(e,t,r,n){this.X=w("x",e),this.Y=w("y",t),this.Z=w("z",r,!0),this.T=w("t",n),Object.freeze(this)}static CURVE(){return h}static fromAffine(e){let t;if(e instanceof A)throw Error("extended point not allowed");let{x:r,y:n}=e||{};return w("x",r),w("y",n),new A(r,n,ev,(t=r*n,l.create(t)))}static fromBytes(e,t=!1){let r,n,i,s,o=l.BYTES,{a,d:c}=h;e=E(y(e,o,"point")),g(t,"zip215");let u=E(e),d=e[o-1];u[o-1]=-129&d;let f=v(u);I("point.y",f,ew,t?m:l.ORDER);let p=(r=f*f,l.create(r)),{isValid:w,value:S}=b((n=p-ev,l.create(n)),(i=c*p-a,l.create(i)));if(!w)throw Error("bad point: invalid y coordinate");let k=(S&ev)===ev,B=(128&d)!=0;if(!t&&S===ew&&B)throw Error("bad point: x=0 and x_0=1");return B!==k&&(s=-S,S=l.create(s)),A.fromAffine({x:S,y:f})}static fromHex(e,t=!1){return A.fromBytes(B("point",e),t)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return _.createCache(this,e),t||this.multiply(eS),this}assertValidity(){x(this)}equals(e){let t,r,n,i;S(e);let{X:s,Y:o,Z:a}=this,{X:c,Y:u,Z:d}=e,f=(t=s*d,l.create(t)),h=(r=c*a,l.create(r)),p=(n=o*d,l.create(n)),g=(i=u*a,l.create(i));return f===h&&p===g}is0(){return this.equals(A.ZERO)}negate(){let e,t;return new A((e=-this.X,l.create(e)),this.Y,this.Z,(t=-this.T,l.create(t)))}double(){let e,t,r,n,i,s,o,a,c,u,d,{a:f}=h,{X:p,Y:g,Z:y}=this,m=(e=p*p,l.create(e)),b=(t=g*g,l.create(t)),w=(n=eS*(r=y*y,l.create(r)),l.create(n)),v=(i=f*m,l.create(i)),S=p+g,k=(s=S*S,o=l.create(s)-m-b,l.create(o)),B=v+b,E=B-w,x=v-b,I=(a=k*E,l.create(a)),_=(c=B*x,l.create(c)),T=(u=k*x,l.create(u));return new A(I,_,(d=E*B,l.create(d)),T)}add(e){let t,r,n,i,s,o,a,c,u,d;S(e);let{a:f,d:p}=h,{X:g,Y:y,Z:m,T:b}=this,{X:w,Y:v,Z:k,T:B}=e,E=(t=g*w,l.create(t)),x=(r=y*v,l.create(r)),I=(n=b*p*B,l.create(n)),_=(i=m*k,l.create(i)),T=(s=(g+y)*(w+v)-E-x,l.create(s)),O=_-I,P=_+I,R=(o=x-f*E,l.create(o)),C=(a=T*O,l.create(a)),L=(c=P*R,l.create(c)),U=(u=T*R,l.create(u));return new A(C,L,(d=O*P,l.create(d)),U)}subtract(e){return this.add(e.negate())}multiply(e){if(!d.isValidNot0(e))throw Error("invalid scalar: expected 1 <= sc < curve.n");let{p:t,f:r}=_.cached(this,e,e=>ea(A,e));return ea(A,[t,r])[0]}multiplyUnsafe(e,t=A.ZERO){if(!d.isValid(e))throw Error("invalid scalar: expected 0 <= sc < curve.n");return e===ew?A.ZERO:this.is0()||e===ev?this:_.unsafe(this,e,e=>ea(A,e),t)}isSmallOrder(){return this.multiplyUnsafe(p).is0()}isTorsionFree(){return _.unsafe(this,h.n).is0()}toAffine(e){return k(this,e)}clearCofactor(){return p===ev?this:this.multiplyUnsafe(p)}toBytes(){let{x:e,y:t}=this.toAffine(),r=l.toBytes(t);return r[r.length-1]|=e&ev?128:0,r}toHex(){return(0,f.bytesToHex)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(e){return ea(A,e)}static msm(e,t){return ey(A,d,e,t)}_setWindowSize(e){this.precompute(e)}toRawBytes(){return this.toBytes()}}A.BASE=new A(h.Gx,h.Gy,ev,(c=h.Gx*h.Gy,l.create(c))),A.ZERO=new A(ew,ev,ev,ew),A.Fp=l,A.Fn=d;let _=new eg(A,d.BITS);return A.BASE.precompute(8),A}(s,o),a,c);return i=u.Point,Object.assign({},u,{ExtendedPoint:i,CURVE:e,nBitLength:i.Fn.BITS,nByteLength:i.Fn.BYTES})}({...ez,Fp:eK,hash:d.sha512,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:eW}),eD=(eq+eC)/eU,ej=eK.pow(eR,eD),e$=eK.sqrt(eK.neg(eK.ONE)),eV=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}(eK,eK.neg(BigInt(486664)));eT(eM.Point,e=>(function(e){let t,r,n,i,s,o,a,c,u,l,d,f,h,p,g,y,m,b,w,v,S,k,B,{xMn:E,xMd:x,yMn:I,yMd:A}=(t=(eq-eL)/eU,r=BigInt(486662),n=eK.sqr(e),n=eK.mul(n,eR),i=eK.add(n,eK.ONE),s=eK.neg(r),o=eK.sqr(i),a=eK.mul(o,i),c=eK.mul(n,r),c=eK.mul(c,s),c=eK.add(c,o),c=eK.mul(c,s),u=eK.sqr(a),o=eK.sqr(u),u=eK.mul(u,a),u=eK.mul(u,c),o=eK.mul(o,u),l=eK.pow(o,t),l=eK.mul(l,u),d=eK.mul(l,e$),o=eK.sqr(l),o=eK.mul(o,a),f=eK.eql(o,c),h=eK.cmov(d,l,f),p=eK.mul(s,n),g=eK.mul(l,e),g=eK.mul(g,ej),y=eK.mul(g,e$),m=eK.mul(c,n),o=eK.sqr(g),o=eK.mul(o,a),b=eK.eql(o,m),w=eK.cmov(y,g,b),o=eK.sqr(h),o=eK.mul(o,a),v=eK.eql(o,c),S=eK.cmov(p,s,v),k=eK.cmov(w,h,v),B=eK.isOdd(k),{xMn:S,xMd:i,yMn:k=eK.cmov(k,eK.neg(k),v!==B),yMd:eP}),_=eK.mul(E,A);_=eK.mul(_,eV);let T=eK.mul(x,I),O=eK.sub(E,x),P=eK.add(E,x),R=eK.mul(T,P),C=eK.eql(R,eK.ZERO);_=eK.cmov(_,eK.ZERO,C),T=eK.cmov(T,eK.ONE,C),O=eK.cmov(O,eK.ONE,C),P=eK.cmov(P,eK.ONE,C);let[L,U]=X(eK,[T,P],!0);return{x:eK.mul(_,L),y:eK.mul(O,U)}})(e[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:eq,m:1,k:128,expand:"xmd",hash:d.sha512});let eH=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),eZ=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),eG=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),eY=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),eJ=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),eX=e=>eM.Point.Fp.create(v(e)&eJ);function eQ(e){let t,r,n,i,s,o,a,c,u,l,d,f,h,p,g,{d:y}=ez,m=(t=eN*e*e,eK.create(t)),b=(r=(m+eP)*eG,eK.create(r)),w=BigInt(-1),v=(i=(w-y*m)*(n=m+y,eK.create(n)),eK.create(i)),{isValid:S,value:k}=eW(b,v),B=(s=k*e,eK.create(s));G(B,eq)||(o=-B,B=eK.create(o)),S||(k=B),S||(w=m);let E=(a=w*(m-eP)*eY-v,eK.create(a)),x=k*k,I=(c=(k+k)*v,eK.create(c)),A=(u=E*eH,eK.create(u)),_=(l=eP-x,eK.create(l)),T=(d=eP+x,eK.create(d));return new eM.Point((f=I*T,eK.create(f)),(h=_*A,eK.create(h)),(p=A*T,eK.create(p)),(g=I*_,eK.create(g)))}class e0 extends eB{constructor(e){super(e)}static fromAffine(e){return new e0(eM.Point.fromAffine(e))}assertSame(e){if(!(e instanceof e0))throw Error("RistrettoPoint expected")}init(e){return new e0(e)}static hashToCurve(e){var t;let r,n;return t=B("ristrettoHash",e,64),(0,f.abytes)(t,64),r=eQ(eX(t.subarray(0,32))),n=eQ(eX(t.subarray(32,64))),new e0(r.add(n))}static fromBytes(e){let t,r,n,i,s,o,a,c,u,l,d,h,p;(0,f.abytes)(e,32);let{a:g,d:y}=ez,m=eX(e);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(eK.toBytes(m),e)||G(m,eq))throw Error("invalid ristretto255 encoding 1");let b=(t=m*m,eK.create(t)),w=(r=eP+g*b,eK.create(r)),v=(n=eP-g*b,eK.create(n)),S=(i=w*w,eK.create(i)),k=(s=v*v,eK.create(s)),B=(o=g*y*S-k,eK.create(o)),{isValid:E,value:x}=(a=B*k,eW(eP,eK.create(a))),I=(c=x*v,eK.create(c)),A=(u=x*I*B,eK.create(u)),_=(l=(m+m)*I,eK.create(l));G(_,eq)&&(d=-_,_=eK.create(d));let T=(h=w*A,eK.create(h)),O=(p=_*T,eK.create(p));if(!E||G(O,eq)||T===eO)throw Error("invalid ristretto255 encoding 2");return new e0(new eM.Point(_,T,eP,O))}static fromHex(e){return e0.fromBytes(B("ristrettoHex",e,32))}static msm(e,t){return ey(e0,eM.Point.Fn,e,t)}toBytes(){let e,t,r,n,i,s,o,a,c,u,l,d,f,{X:h,Y:p,Z:g,T:y}=this.ep,m=(e=g+p,r=eK.create(e)*(t=g-p,eK.create(t)),eK.create(r)),b=(n=h*p,eK.create(n)),{value:w}=(s=m*(i=b*b,eK.create(i)),eW(eP,eK.create(s))),v=(o=w*m,eK.create(o)),S=(a=w*b,eK.create(a)),k=(c=v*S*y,eK.create(c));if(G(y*k,eq)){let e,t,r=(e=p*eN,eK.create(e)),n=(t=h*eN,eK.create(t));h=r,p=n,f=eK.create(v*eZ)}else f=S;G(h*k,eq)&&(u=-p,p=eK.create(u));let B=(l=(g-p)*f,eK.create(l));return G(B,eq)&&(d=-B,B=eK.create(d)),eK.toBytes(B)}equals(e){let t,r,n,i;this.assertSame(e);let{X:s,Y:o}=this.ep,{X:a,Y:c}=e.ep,u=(t=s*c,eK.create(t)===(r=o*a,eK.create(r))),l=(n=o*c,eK.create(n)===(i=s*a,eK.create(i)));return u||l}is0(){return this.equals(e0.ZERO)}}e0.BASE=new e0(eM.Point.BASE),e0.ZERO=new e0(eM.Point.ZERO),e0.Fp=eK,e0.Fn=eF;var e1=e.i(59341),e2=e.i(35030),e8=e.i(80355),e6=e.i(54119),e5=e.i(44610);function e4([e,t]){return`${e}=${function e(t){return Array.isArray(t)?"%5B"+t.map(e).join("%2C%20")+"%5D":"bigint"==typeof t?`${t}n`:encodeURIComponent(String(null!=t&&null===Object.getPrototypeOf(t)?{...t}:t))}(t)}`}e.i(47167);var e3=class extends Error{cause=this.cause;context;constructor(...[e,t]){let r,n;if(t){const{cause:e,...i}=t;e&&(n={cause:e}),Object.keys(i).length>0&&(r=i)}super(function(e,t={}){{let r=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(t).length&&(r+=` '${btoa(Object.entries(t).map(e4).join("&"))}'`),`${r}\``}}(e,r),n),this.context={__code:e,...r},this.name="SolanaError"}};function e7(e){return"fixedSize"in e&&"number"==typeof e.fixedSize}var e9=((n=e9||{})[n.Little=0]="Little",n[n.Big=1]="Big",n);function te(e){return e?.endian!==1}class tt extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...s}=e,{path:o}=e,a=0===o.length?n:`At path: ${o.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function tr(e){return"object"==typeof e&&null!=e}function tn(e){return tr(e)&&!Array.isArray(e)}function ti(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function*ts(e,t,r,n){var i;for(let s of(tr(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]),e)){let e=function(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:i,branch:s}=t,{type:o}=r,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${ti(n)}\``}=e;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...e,message:c}}(s,t,r,n);e&&(yield e)}}function*to(e,t,r={}){let{path:n=[],branch:i=[e],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i,mask:o};s&&(e=t.coercer(e,a));let c="valid";for(let n of t.validator(e,a))n.explanation=r.message,c="not_valid",yield[n,void 0];for(let[u,l,d]of t.entries(e,a))for(let t of to(l,d,{path:void 0===u?n:[...n,u],branch:void 0===u?i:[...i,l],coerce:s,mask:o,message:r.message}))t[0]?(c=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):s&&(l=t[1],void 0===u?e=l:e instanceof Map?e.set(u,l):e instanceof Set?e.add(l):tr(e)&&(void 0!==l||u in e)&&(e[u]=l));if("not_valid"!==c)for(let n of t.refiner(e,a))n.explanation=r.message,c="not_refined",yield[n,void 0];"valid"===c&&(yield[void 0,e])}class ta{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:s=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,n?this.validator=(e,t)=>ts(n(e,t),t,this,e):this.validator=()=>[],i?this.refiner=(e,t)=>ts(i(e,t),t,this,e):this.refiner=()=>[]}assert(e,t){var r=e,n=this,i=t;let s=tu(r,n,{message:i});if(s[0])throw s[0]}create(e,t){return tc(e,this,t)}is(e){var t,r;return t=e,r=this,!tu(t,r)[0]}mask(e,t){var r=e,n=this,i=t;let s=tu(r,n,{coerce:!0,mask:!0,message:i});if(!s[0])return s[1];throw s[0]}validate(e,t={}){return tu(e,this,t)}}function tc(e,t,r){let n=tu(e,t,{coerce:!0,message:r});if(!n[0])return n[1];throw n[0]}function tu(e,t,r={}){let n=to(e,t,r),i=function(e){let{done:t,value:r}=e.next();return t?void 0:r}(n);return i[0]?[new tt(i[0],function*(){for(let e of n)e[0]&&(yield e[0])}),void 0]:[void 0,i[1]]}function tl(e,t){return new ta({type:e,schema:null,validator:t})}function td(e){return new ta({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${ti(e)}`})}function tf(){return tl("boolean",e=>"boolean"==typeof e)}function th(e){return tl("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${ti(t)}`)}function tp(e){let t=ti(e),r=typeof e;return new ta({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${ti(r)}`})}function tg(e){return new ta({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function ty(){return tl("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${ti(e)}`)}function tm(e){return new ta({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function tb(e,t){return new ta({type:"record",schema:null,*entries(r){if(tr(r))for(let n in r){let i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>tn(e)||`Expected an object, but received: ${ti(e)}`,coercer:e=>tn(e)?{...e}:e})}function tw(){return tl("string",e=>"string"==typeof e||`Expected a string, but received: ${ti(e)}`)}function tv(e){let t=tl("never",()=>!1);return new ta({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${ti(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function tS(e){let t=Object.keys(e);return new ta({type:"type",schema:e,*entries(r){if(tr(r))for(let n of t)yield[n,r[n],e[n]]},validator:e=>tn(e)||`Expected an object, but received: ${ti(e)}`,coercer:e=>tn(e)?{...e}:e})}function tk(e){let t=e.map(e=>e.type).join(" | ");return new ta({type:"union",schema:null,coercer(t,r){for(let n of e){let[e,i]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return i}return t},validator(r,n){let i=[];for(let t of e){let[...e]=to(r,t,n),[s]=e;if(!s[0])return[];for(let[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ti(r)}`,...i]}})}function tB(){return tl("unknown",()=>!0)}function tE(e,t,r){return new ta({...e,coercer:(n,i)=>tu(n,t)[0]?e.coercer(n,i):e.coercer(r(n,i),i)})}var tx=e.i(78217);e.i(95932);var tI=e.i(78492),tI=tI,tA=class extends tI.default{socket;constructor(e,t){super(),this.socket=new window.WebSocket(e,t.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){let n=r||t;try{this.socket.send(e),n()}catch(e){n(e)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}},t_=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},tT=class extends tI.default{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:s=5,...o}={},a,c){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=s,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new t_,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,n){return n||"object"!=typeof r||(n=r,r=null),new Promise((i,s)=>{if(!this.ready)return s(Error("socket not ready"));let o=this.generate_request_id(e,t);this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t||void 0,id:o}),n,e=>{if(e)return s(e);this.queue[o]={promise:[i,s]},r&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],s(Error("reply timeout"))},r))})})}async login(e){let t=await this.call("rpc.login",e);if(!t)throw Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,n)=>{if(!this.ready)return n(Error("socket not ready"));this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t}),e=>{if(e)return n(e);r()})})}async subscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket&&this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return void 0!==this.reconnect_timer_id}willReconnect(){return this.reconnect&&(0===this.max_reconnects||this.current_reconnects<this.max_reconnects)}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=l.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch(e){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);let t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then(()=>{this.emit.apply(this,t)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:r,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",r,n),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,n),1))})}},tO=e.i(45535),tP=e.i(40965);let tR=(e,t)=>(e+(e>=0?t:-t)/tN)/t;function tC(e){if(!["compact","recovered","der"].includes(e))throw Error('Signature format must be "compact", "recovered", or "der"');return e}function tL(e,t){let r={};for(let n of Object.keys(t))r[n]=void 0===e[n]?t[n]:e[n];return g(r.lowS,"lowS"),g(r.prehash,"prehash"),void 0!==r.format&&tC(r.format),r}let tU={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:r}=tU;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,i=m(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?m(i.length/2|128):"";return m(e)+s+i+t},decode(e,t){let{Err:r}=tU,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let i=t[n++],s=0;if(128&i){let e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let o=t.subarray(n,n+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of o)s=s<<8|e;if(n+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;let o=t.subarray(n,n+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(n+s)}}},_int:{encode(e){let{Err:t}=tU;if(e<tq)throw new t("integer: negative integers are not allowed");let r=m(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=tU;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return w(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=tU,i=B("signature",e),{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:c}=n.decode(2,s),{v:u,l:l}=n.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){let{_tlv:t,_int:r}=tU,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s));return t.encode(48,n+i)}},tq=BigInt(0),tz=BigInt(1),tN=BigInt(2),tW=BigInt(3),tK=BigInt(4);function tF(e,t){let r,{BYTES:n}=e;if("bigint"==typeof t)r=t;else{let i=B("private key",t);try{r=e.fromBytes(i)}catch(e){throw Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw Error("invalid private key: out of range [1..N-1]");return r}function tM(e){return Uint8Array.of(e?2:3)}function tD(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}let tj={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},t$={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},tV=BigInt(0),tH=BigInt(2),tZ=et(tj.p,{sqrt:function(e){let t=tj.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=D(l,r,t)*l%t,f=D(d,r,t)*l%t,h=D(f,tH,t)*u%t,p=D(h,i,t)*h%t,g=D(p,s,t)*p%t,y=D(g,a,t)*g%t,m=D(y,c,t)*y%t,b=D(m,a,t)*g%t,w=D(b,r,t)*l%t,v=D(w,o,t)*p%t,S=D(v,n,t)*u%t,k=D(S,tH,t);if(!tZ.eql(tZ.sqr(k),e))throw Error("Cannot find square root");return k}}),tG=(i={...tj,Fp:tZ,lowS:!0,endo:t$},s=d.sha256,{...(t=e=>(function(e){let t,{CURVE:r,curveOpts:n,hash:i,ecdsaOpts:s}=function(e){let t,r,n,i,{CURVE:s,curveOpts:o}=(t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(e=>Math.ceil(e/2)))):void 0,i={Fp:r,Fn:et(t.n,{BITS:e.nBitLength,allowedLengths:n,modFromBytes:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes},{CURVE:t,curveOpts:i}),a={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:s,curveOpts:o,hash:e.hash,ecdsaOpts:a}}(e),o=function(e,t,r={}){(0,f.ahash)(t),T(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=r.randomBytes||f.randomBytes,i=r.hmac||((e,...r)=>(0,tP.hmac)(t,e,(0,f.concatBytes)(...r))),{Fp:s,Fn:o}=e,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:l,getSharedSecret:d,utils:h,lengths:p}=function(e,t={}){let{Fn:r}=e,n=t.randomBytes||f.randomBytes,i=Object.assign(tD(e.Fp,r),{seed:en(r.ORDER)});function s(e){try{return!!tF(r,e)}catch(e){return!1}}function o(e=n(i.seed)){return function(e,t,r=!1){let n=e.length,i=er(t),s=en(t);if(n<16||n<s||n>1024)throw Error("expected "+s+"-1024 bytes of input, got "+n);let o=M(r?v(e):w(e),t-C)+C;return r?k(o,i):S(o,i)}(y(e,i.seed,"seed"),r.ORDER)}function a(t,n=!0){return e.BASE.multiply(tF(r,t)).toBytes(n)}function c(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;let{secretKey:n,publicKey:s,publicKeyUncompressed:o}=i;if(r.allowedLengths||n===s)return;let a=B("key",t).length;return a===s||a===o}return Object.freeze({getPublicKey:a,getSharedSecret:function(t,n,i=!0){if(!0===c(t))throw Error("first arg must be private key");if(!1===c(n))throw Error("second arg must be public key");let s=tF(r,t);return e.fromHex(n).multiply(s).toBytes(i)},keygen:function(e){let t=o(e);return{secretKey:t,publicKey:a(t)}},Point:e,utils:{isValidSecretKey:s,isValidPublicKey:function(t,r){let{publicKey:n,publicKeyUncompressed:s}=i;try{let i=t.length;if(!0===r&&i!==n||!1===r&&i!==s)return!1;return!!e.fromBytes(t)}catch(e){return!1}},randomSecretKey:o,isValidPrivateKey:s,randomPrivateKey:o,normPrivateKeyToScalar:e=>tF(r,e),precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)},lengths:i})}(e,r),g={prehash:!1,lowS:"boolean"==typeof r.lowS&&r.lowS,format:void 0,extraEntropy:!1},m="compact";function b(e,t){if(!o.isValidNot0(t))throw Error(`invalid signature ${e}: out of range 1..Point.Fn.ORDER`);return t}class E{constructor(e,t,r){this.r=b("r",e),this.s=b("s",t),null!=r&&(this.recovery=r),Object.freeze(this)}static fromBytes(e,t=m){var r,n;let i,s;if(r=e,tC(n=t),s=p.signature,y(r,"compact"===n?s:"recovered"===n?s+1:void 0,`${n} signature`),"der"===t){let{r:t,s:r}=tU.toSig(y(e));return new E(t,r)}"recovered"===t&&(i=e[0],t="compact",e=e.subarray(1));let a=o.BYTES,c=e.subarray(0,a),u=e.subarray(a,2*a);return new E(o.fromBytes(c),o.fromBytes(u),i)}static fromHex(e,t){return this.fromBytes((0,f.hexToBytes)(e),t)}addRecoveryBit(e){return new E(this.r,this.s,e)}recoverPublicKey(t){let r=s.ORDER,{r:n,s:i,recovery:c}=this;if(null==c||![0,1,2,3].includes(c))throw Error("recovery id invalid");if(a*tN<r&&c>1)throw Error("recovery id is ambiguous for h>1 curve");let u=2===c||3===c?n+a:n;if(!s.isValid(u))throw Error("recovery id 2 or 3 invalid");let l=s.toBytes(u),d=e.fromBytes((0,f.concatBytes)(tM((1&c)==0),l)),h=o.inv(u),p=A(B("msgHash",t)),g=o.create(-p*h),y=o.create(i*h),m=e.BASE.multiplyUnsafe(g).add(d.multiplyUnsafe(y));if(m.is0())throw Error("point at infinify");return m.assertValidity(),m}hasHighS(){return this.s>a>>tz}toBytes(e=m){if(tC(e),"der"===e)return(0,f.hexToBytes)(tU.hexFromSig(this));let t=o.toBytes(this.r),r=o.toBytes(this.s);if("recovered"===e){if(null==this.recovery)throw Error("recovery bit must be present");return(0,f.concatBytes)(Uint8Array.of(this.recovery),t,r)}return(0,f.concatBytes)(t,r)}toHex(e){return(0,f.bytesToHex)(this.toBytes(e))}assertValidity(){}static fromCompact(e){return E.fromBytes(B("sig",e),"compact")}static fromDER(e){return E.fromBytes(B("sig",e),"der")}normalizeS(){return this.hasHighS()?new E(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,f.bytesToHex)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,f.bytesToHex)(this.toBytes("compact"))}}let x=r.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=w(e),r=8*e.length-c;return r>0?t>>BigInt(r):t},A=r.bits2int_modN||function(e){return o.create(x(e))},O=_(c);function P(e){return I("num < 2^"+c,e,tq,O),o.toBytes(e)}function R(e,r){return y(e,void 0,"message"),r?y(t(e),void 0,"prehashed message"):e}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:d,utils:h,lengths:p,Point:e,sign:function(r,s,c={}){let{seed:u,k2sig:l}=function(t,r,i){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{lowS:s,prehash:c,extraEntropy:u}=tL(i,g),l=A(t=R(t,c)),d=tF(o,r),h=[P(d),P(l)];if(null!=u&&!1!==u){let e=!0===u?n(p.secretKey):u;h.push(B("extraEntropy",e))}return{seed:(0,f.concatBytes)(...h),k2sig:function(t){let r=x(t);if(!o.isValidNot0(r))return;let n=o.inv(r),i=e.BASE.multiply(r).toAffine(),c=o.create(i.x);if(c===tq)return;let u=o.create(n*o.create(l+c*d));if(u===tq)return;let f=2*(i.x!==c)|Number(i.y&tz),h=u;return s&&u>a>>tz&&(h=o.neg(u),f^=1),new E(c,h,f)}}}(r=B("message",r),s,c);return(function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=e=>new Uint8Array(e),i=n(e),s=n(e),o=0,a=()=>{i.fill(1),s.fill(0),o=0},c=(...e)=>r(s,i,...e),u=(e=n(0))=>{(s=c(Uint8Array.of(0),e),i=c(),0!==e.length)&&(s=c(Uint8Array.of(1),e),i=c())},l=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=c()).slice();r.push(t),e+=i.length}return(0,f.concatBytes)(...r)};return(e,t)=>{let r;for(a(),u(e);!(r=t(l()));)u();return a(),r}})(t.outputLen,o.BYTES,i)(u,l)},verify:function(t,r,n,i={}){let{lowS:s,prehash:a,format:c}=tL(i,g);if(n=B("publicKey",n),r=R(B("message",r),a),"strict"in i)throw Error("options.strict was renamed to lowS");let u=void 0===c?function(e){let t,r="string"==typeof e||(0,f.isBytes)(e),n=!r&&null!==e&&"object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!r&&!n)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(n)t=new E(e.r,e.s);else if(r){try{t=E.fromBytes(B("sig",e),"der")}catch(e){if(!(e instanceof tU.Err))throw e}if(!t)try{t=E.fromBytes(B("sig",e),"compact")}catch(e){return!1}}return!!t&&t}(t):E.fromBytes(B("sig",t),c);if(!1===u)return!1;try{let t=e.fromBytes(n);if(s&&u.hasHighS())return!1;let{r:i,s:a}=u,c=A(r),l=o.inv(a),d=o.create(c*l),f=o.create(i*l),h=e.BASE.multiplyUnsafe(d).add(t.multiplyUnsafe(f));if(h.is0())return!1;return o.create(h.x)===i}catch(e){return!1}},recoverPublicKey:function(e,t,r={}){let{prehash:n}=tL(r,g);return t=R(t,n),E.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:E,hash:t})}(function(e,t={}){let r=eb("weierstrass",e,t),{Fp:n,Fn:i}=r,s=r.CURVE,{h:o,n:a}=s;T(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:c}=t;if(c&&(!n.is0(s.a)||"bigint"!=typeof c.beta||!Array.isArray(c.basises)))throw Error('invalid endo: expected "beta": bigint and "basises": array');let u=tD(n,i);function l(){if(!n.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let d=t.toBytes||function(e,t,r){let{x:i,y:s}=t.toAffine(),o=n.toBytes(i);if(g(r,"isCompressed"),!r)return(0,f.concatBytes)(Uint8Array.of(4),o,n.toBytes(s));{l();let e=!n.isOdd(s);return(0,f.concatBytes)(tM(e),o)}},h=t.fromBytes||function(e){y(e,void 0,"Point");let{publicKey:t,publicKeyUncompressed:r}=u,i=e.length,s=e[0],o=e.subarray(1);if(i===t&&(2===s||3===s)){let e,t=n.fromBytes(o);if(!n.isValid(t))throw Error("bad point: is not on curve, wrong x");let r=p(t);try{e=n.sqrt(r)}catch(e){throw Error("bad point: is not on curve, sqrt error"+(e instanceof Error?": "+e.message:""))}return l(),(1&s)==1!==n.isOdd(e)&&(e=n.neg(e)),{x:t,y:e}}if(i===r&&4===s){let e=n.BYTES,t=n.fromBytes(o.subarray(0,e)),r=n.fromBytes(o.subarray(e,2*e));if(!m(t,r))throw Error("bad point: is not on curve");return{x:t,y:r}}throw Error(`bad point: got length ${i}, expected compressed=${t} or uncompressed=${r}`)};function p(e){let t=n.sqr(e),r=n.mul(t,e);return n.add(n.add(r,n.mul(e,s.a)),s.b)}function m(e,t){let r=n.sqr(t),i=p(e);return n.eql(r,i)}if(!m(s.Gx,s.Gy))throw Error("bad curve params: generator point");let b=n.mul(n.pow(s.a,tW),tK),w=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(b,w)))throw Error("bad curve params: a or b");function v(e,t,r=!1){if(!n.isValid(t)||r&&n.is0(t))throw Error(`bad point coordinate ${e}`);return t}function S(e){if(!(e instanceof O))throw Error("ProjectivePoint expected")}function k(e){if(!c||!c.basises)throw Error("no endo");return function(e,t,r){let[[n,i],[s,o]]=t,a=tR(o*e,r),c=tR(-i*e,r),u=e-a*n-c*s,l=-a*i-c*o,d=u<tq,f=l<tq;d&&(u=-u),f&&(l=-l);let h=_(Math.ceil(A(r)/2))+tz;if(u<tq||u>=h||l<tq||l>=h)throw Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:d,k1:u,k2neg:f,k2:l}}(e,c.basises,i.ORDER)}let E=P((e,t)=>{let{X:r,Y:i,Z:s}=e;if(n.eql(s,n.ONE))return{x:r,y:i};let o=e.is0();null==t&&(t=o?n.ONE:n.inv(s));let a=n.mul(r,t),c=n.mul(i,t),u=n.mul(s,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw Error("invZ was invalid");return{x:a,y:c}}),x=P(e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.Y))return;throw Error("bad point: ZERO")}let{x:r,y:i}=e.toAffine();if(!n.isValid(r)||!n.isValid(i))throw Error("bad point: x or y not field elements");if(!m(r,i))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function I(e,t,r,i,s){return r=new O(n.mul(r.X,e),r.Y,r.Z),t=eo(i,t),r=eo(s,r),t.add(r)}class O{constructor(e,t,r){this.X=v("x",e),this.Y=v("y",t,!0),this.Z=v("z",r),Object.freeze(this)}static CURVE(){return s}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof O)throw Error("projective point not allowed");return n.is0(t)&&n.is0(r)?O.ZERO:new O(t,r,n.ONE)}static fromBytes(e){let t=O.fromAffine(h(y(e,void 0,"point")));return t.assertValidity(),t}static fromHex(e){return O.fromBytes(B("pointHex",e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return C.createCache(this,e),t||this.multiply(tW),this}assertValidity(){x(this)}hasEvenY(){let{y:e}=this.toAffine();if(!n.isOdd)throw Error("Field doesn't support isOdd");return!n.isOdd(e)}equals(e){S(e);let{X:t,Y:r,Z:i}=this,{X:s,Y:o,Z:a}=e,c=n.eql(n.mul(t,a),n.mul(s,i)),u=n.eql(n.mul(r,a),n.mul(o,i));return c&&u}negate(){return new O(this.X,n.neg(this.Y),this.Z)}double(){let{a:e,b:t}=s,r=n.mul(t,tW),{X:i,Y:o,Z:a}=this,c=n.ZERO,u=n.ZERO,l=n.ZERO,d=n.mul(i,i),f=n.mul(o,o),h=n.mul(a,a),p=n.mul(i,o);return p=n.add(p,p),l=n.mul(i,a),l=n.add(l,l),c=n.mul(e,l),u=n.mul(r,h),u=n.add(c,u),c=n.sub(f,u),u=n.add(f,u),u=n.mul(c,u),c=n.mul(p,c),l=n.mul(r,l),h=n.mul(e,h),p=n.sub(d,h),p=n.mul(e,p),p=n.add(p,l),l=n.add(d,d),d=n.add(l,d),d=n.add(d,h),d=n.mul(d,p),u=n.add(u,d),h=n.mul(o,a),h=n.add(h,h),d=n.mul(h,p),c=n.sub(c,d),l=n.mul(h,f),l=n.add(l,l),new O(c,u,l=n.add(l,l))}add(e){S(e);let{X:t,Y:r,Z:i}=this,{X:o,Y:a,Z:c}=e,u=n.ZERO,l=n.ZERO,d=n.ZERO,f=s.a,h=n.mul(s.b,tW),p=n.mul(t,o),g=n.mul(r,a),y=n.mul(i,c),m=n.add(t,r),b=n.add(o,a);m=n.mul(m,b),b=n.add(p,g),m=n.sub(m,b),b=n.add(t,i);let w=n.add(o,c);return b=n.mul(b,w),w=n.add(p,y),b=n.sub(b,w),w=n.add(r,i),u=n.add(a,c),w=n.mul(w,u),u=n.add(g,y),w=n.sub(w,u),d=n.mul(f,b),u=n.mul(h,y),d=n.add(u,d),u=n.sub(g,d),d=n.add(g,d),l=n.mul(u,d),g=n.add(p,p),g=n.add(g,p),y=n.mul(f,y),b=n.mul(h,b),g=n.add(g,y),y=n.sub(p,y),y=n.mul(f,y),b=n.add(b,y),p=n.mul(g,b),l=n.add(l,p),p=n.mul(w,b),u=n.mul(m,u),u=n.sub(u,p),p=n.mul(m,g),d=n.mul(w,d),new O(u,l,d=n.add(d,p))}subtract(e){return this.add(e.negate())}is0(){return this.equals(O.ZERO)}multiply(e){let r,n,{endo:s}=t;if(!i.isValidNot0(e))throw Error("invalid scalar: out of range");let o=e=>C.cached(this,e,e=>ea(O,e));if(s){let{k1neg:t,k1:i,k2neg:a,k2:c}=k(e),{p:u,f:l}=o(i),{p:d,f:f}=o(c);n=l.add(f),r=I(s.beta,u,d,t,a)}else{let{p:t,f:i}=o(e);r=t,n=i}return ea(O,[r,n])[0]}multiplyUnsafe(e){let{endo:r}=t;if(!i.isValid(e))throw Error("invalid scalar: out of range");if(e===tq||this.is0())return O.ZERO;if(e===tz)return this;if(C.hasCache(this))return this.multiply(e);if(!r)return C.unsafe(this,e);{let{k1neg:t,k1:n,k2neg:i,k2:s}=k(e),{p1:o,p2:a}=function(e,t,r,n){let i=t,s=e.ZERO,o=e.ZERO;for(;r>ei||n>ei;)r&es&&(s=s.add(i)),n&es&&(o=o.add(i)),i=i.double(),r>>=es,n>>=es;return{p1:s,p2:o}}(O,this,n,s);return I(r.beta,o,a,t,i)}}multiplyAndAddUnsafe(e,t,r){let n=this.multiplyUnsafe(t).add(e.multiplyUnsafe(r));return n.is0()?void 0:n}toAffine(e){return E(this,e)}isTorsionFree(){let{isTorsionFree:e}=t;return o===tz||(e?e(O,this):C.unsafe(this,a).is0())}clearCofactor(){let{clearCofactor:e}=t;return o===tz?this:e?e(O,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(e=!0){return g(e,"isCompressed"),this.assertValidity(),d(O,this,e)}toHex(e=!0){return(0,f.bytesToHex)(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(e=!0){return this.toBytes(e)}_setWindowSize(e){this.precompute(e)}static normalizeZ(e){return ea(O,e)}static msm(e,t){return ey(O,i,e,t)}static fromPrivateKey(e){return O.BASE.multiply(tF(i,e))}}O.BASE=new O(s.Gx,s.Gy,n.ONE),O.ZERO=new O(n.ZERO,n.ONE,n.ZERO),O.Fp=n,O.Fn=i;let R=i.BITS,C=new eg(O,t.endo?Math.ceil(R/2):R);return O.BASE.precompute(8),O}(r,n),i,s);return t=o.Point,Object.assign({},o,{ProjectivePoint:t,CURVE:Object.assign({},e,ee(t.Fn.ORDER,t.Fn.BITS))})})({...i,hash:e}))(s),create:t});tG.Point;let tY=(r=[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e))).map(e=>Array.from(e).reverse()),(e,t)=>{let[n,i,s,o]=r.map(t=>t.reduce((t,r)=>tZ.add(tZ.mul(t,e),r))),[a,c]=X(tZ,[i,o],!0);return e=tZ.mul(n,a),t=tZ.mul(t,tZ.mul(s,c)),{x:e,y:t}}),tJ=function(e,t){J(e);let{A:r,B:n,Z:i}=t;if(!e.isValid(r)||!e.isValid(n)||!e.isValid(i))throw Error("mapToCurveSimpleSWU: invalid opts");let s=function(e,t){let r=e.ORDER,n=tq;for(let e=r-tz;e%tN===tq;e/=tN)n+=tz;let i=n,s=tN<<i-tz-tz,o=s*tN,a=(r-tz)/o,c=(a-tz)/tN,u=o-tz,l=e.pow(t,a),d=e.pow(t,(a+tz)/tN),f=(t,r)=>{let n=l,o=e.pow(r,u),a=e.sqr(o);a=e.mul(a,r);let f=e.mul(t,a);f=e.pow(f,c),f=e.mul(f,o),o=e.mul(f,r),a=e.mul(f,t);let h=e.mul(a,o);f=e.pow(h,s);let p=e.eql(f,e.ONE);o=e.mul(a,d),f=e.mul(h,n),a=e.cmov(o,a,p),h=e.cmov(f,h,p);for(let t=i;t>tz;t--){let r=t-tN;r=tN<<r-tz;let i=e.pow(h,r),s=e.eql(i,e.ONE);o=e.mul(a,n),n=e.mul(n,n),i=e.mul(h,n),a=e.cmov(o,a,s),h=e.cmov(i,h,s)}return{isValid:p,value:a}};if(e.ORDER%tK===tW){let r=(e.ORDER-tW)/tK,n=e.sqrt(e.neg(t));f=(t,i)=>{let s=e.sqr(i),o=e.mul(t,i);s=e.mul(s,o);let a=e.pow(s,r);a=e.mul(a,o);let c=e.mul(a,n),u=e.mul(e.sqr(a),i),l=e.eql(u,t),d=e.cmov(c,a,l);return{isValid:l,value:d}}}return f}(e,i);if(!e.isOdd)throw Error("Field does not have .isOdd()");return t=>{let o,a,c,u,l,d,f,h;o=e.sqr(t),o=e.mul(o,i),a=e.sqr(o),a=e.add(a,o),c=e.add(a,e.ONE),c=e.mul(c,n),u=e.cmov(i,e.neg(a),!e.eql(a,e.ZERO)),u=e.mul(u,r),a=e.sqr(c),d=e.sqr(u),l=e.mul(d,r),a=e.add(a,l),a=e.mul(a,c),d=e.mul(d,u),l=e.mul(d,n),a=e.add(a,l),f=e.mul(o,c);let{isValid:p,value:g}=s(a,d);h=e.mul(o,t),h=e.mul(h,g),f=e.cmov(f,c,p),h=e.cmov(h,g,p);let y=e.isOdd(t)===e.isOdd(h);h=e.cmov(e.neg(h),h,y);let m=X(e,[u],!0)[0];return{x:f=e.mul(f,m),y:h}}}(tZ,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:tZ.create(BigInt("-11"))});eT(tG.Point,e=>{let{x:t,y:r}=tJ(tZ.create(e[0]));return tY(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:tZ.ORDER,m:1,k:128,expand:"xmd",hash:d.sha256}),eM.utils.randomPrivateKey;let tX=()=>{let e=eM.utils.randomPrivateKey(),t=tQ(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},tQ=eM.getPublicKey;function t0(e){try{return eM.ExtendedPoint.fromHex(e),!0}catch{return!1}}let t1=(e,t)=>eM.sign(e,t.slice(0,32)),t2=eM.verify,t8=e=>l.Buffer.isBuffer(e)?e:e instanceof Uint8Array?l.Buffer.from(e.buffer,e.byteOffset,e.byteLength):l.Buffer.from(e);class t6{constructor(e){Object.assign(this,e)}encode(){return l.Buffer.from((0,e6.serialize)(t5,this))}static decode(e){return(0,e6.deserialize)(t5,this,e)}static decodeUnchecked(e){return(0,e6.deserializeUnchecked)(t5,this,e)}}let t5=new Map,t4=1;class t3 extends t6{constructor(e){if(super({}),this._bn=void 0,void 0!==e._bn)this._bn=e._bn;else{if("string"==typeof e){const t=e2.default.decode(e);if(32!=t.length)throw Error("Invalid public key input");this._bn=new e1.default(t)}else this._bn=new e1.default(e);if(this._bn.byteLength()>32)throw Error("Invalid public key input")}}static unique(){let e=new t3(t4);return t4+=1,new t3(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return e2.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(l.Buffer);if(32===e.length)return e;let t=l.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){let n=l.Buffer.concat([e.toBuffer(),l.Buffer.from(t),r.toBuffer()]);return new t3((0,e8.sha256)(n))}static createProgramAddressSync(e,t){let r=l.Buffer.alloc(0);e.forEach(function(e){if(e.length>32)throw TypeError("Max seed length exceeded");r=l.Buffer.concat([r,t8(e)])}),r=l.Buffer.concat([r,t.toBuffer(),l.Buffer.from("ProgramDerivedAddress")]);let n=(0,e8.sha256)(r);if(t0(n))throw Error("Invalid seeds, address must fall off the curve");return new t3(n)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,n=255;for(;0!=n;){try{let i=e.concat(l.Buffer.from([n]));r=this.createProgramAddressSync(i,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return t0(new t3(e).toBytes())}}t3.default=new t3("11111111111111111111111111111111"),t5.set(t3,{kind:"struct",fields:[["_bn","u256"]]}),new t3("BPFLoader1111111111111111111111111111111111");class t7 extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(t7.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class t9 extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(t9.prototype,"name",{value:"TransactionExpiredTimeoutError"});class re extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(re.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class rt{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments())if(e<t.length)return t[e];else e-=t.length}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw Error("Account index overflow encountered during compilation");let t=new Map;this.keySegments().flat().forEach((e,r)=>{t.set(e.toBase58(),r)});let r=e=>{let r=t.get(e.toBase58());if(void 0===r)throw Error("Encountered an unknown instruction account key during compilation");return r};return e.map(e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map(e=>r(e.pubkey)),data:e.data}))}}let rr=(e="publicKey")=>e5.blob(32,e),rn=(e="string")=>{let t=e5.struct([e5.u32("length"),e5.u32("lengthPadding"),e5.blob(e5.offset(e5.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t);return t.decode=(e,t)=>r(e,t).chars.toString(),t.encode=(e,t,r)=>n({chars:l.Buffer.from(e,"utf8")},t,r),t.alloc=e=>e5.u32().span+e5.u32().span+l.Buffer.from(e,"utf8").length,t};function ri(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,(128&n)==0)break}return t}function rs(e,t){let r=t;for(;;){let t=127&r;if(0==(r>>=7)){e.push(t);break}t|=128,e.push(t)}}function ro(e,t){if(!e)throw Error(t||"Assertion failed")}class ra{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){let r=new Map,n=e=>{let t=e.toBase58(),n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);for(let t of(i.isSigner=!0,i.isWritable=!0,e))for(let e of(n(t.programId).isInvoked=!0,t.keys)){let t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}return new ra(t,r)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];ro(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,e])=>e.isSigner&&e.isWritable),r=e.filter(([,e])=>e.isSigner&&!e.isWritable),n=e.filter(([,e])=>!e.isSigner&&e.isWritable),i=e.filter(([,e])=>!e.isSigner&&!e.isWritable),s={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{ro(t.length>0,"Expected at least one writable signer key");let[e]=t[0];ro(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[s,[...t.map(([e])=>new t3(e)),...r.map(([e])=>new t3(e)),...n.map(([e])=>new t3(e)),...i.map(([e])=>new t3(e))]]}extractTableLookup(e){let[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&e.isWritable),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&!e.isWritable);if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){let r=[],n=[];for(let[i,s]of this.keyMetaMap.entries())if(t(s)){let t=new t3(i),s=e.findIndex(e=>e.equals(t));s>=0&&(ro(s<256,"Max lookup table index exceeded"),r.push(s),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}let rc="Reached end of buffer unexpectedly";function ru(e){if(0===e.length)throw Error(rc);return e.shift()}function rl(e,...t){let[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw Error(rc);return e.splice(...t)}class rd{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(e=>new t3(e)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:e2.default.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new rt(this.staticAccountKeys)}static compile(e){let[t,r]=ra.compile(e.instructions,e.payerKey).getMessageComponents(),n=new rt(r).compileInstructions(e.instructions).map(e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:e2.default.encode(e.data)}));return new rd({header:t,accountKeys:r,recentBlockhash:e.recentBlockhash,instructions:n})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;{let r=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return e-t<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];rs(t,e);let r=this.instructions.map(e=>{let{accounts:t,programIdIndex:r}=e,n=Array.from(e2.default.decode(e.data)),i=[];rs(i,t.length);let s=[];return rs(s,n.length),{programIdIndex:r,keyIndicesCount:l.Buffer.from(i),keyIndices:t,dataLength:l.Buffer.from(s),data:n}}),n=[];rs(n,r.length);let i=l.Buffer.alloc(1232);l.Buffer.from(n).copy(i);let s=n.length;r.forEach(e=>{let t=e5.struct([e5.u8("programIdIndex"),e5.blob(e.keyIndicesCount.length,"keyIndicesCount"),e5.seq(e5.u8("keyIndex"),e.keyIndices.length,"keyIndices"),e5.blob(e.dataLength.length,"dataLength"),e5.seq(e5.u8("userdatum"),e.data.length,"data")]).encode(e,i,s);s+=t}),i=i.slice(0,s);let o=e5.struct([e5.blob(1,"numRequiredSignatures"),e5.blob(1,"numReadonlySignedAccounts"),e5.blob(1,"numReadonlyUnsignedAccounts"),e5.blob(t.length,"keyCount"),e5.seq(rr("key"),e,"keys"),rr("recentBlockhash")]),a={numRequiredSignatures:l.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:l.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:l.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:l.Buffer.from(t),keys:this.accountKeys.map(e=>t8(e.toBytes())),recentBlockhash:e2.default.decode(this.recentBlockhash)},c=l.Buffer.alloc(2048),u=o.encode(a,c);return i.copy(c,u),c.slice(0,u+i.length)}static from(e){let t=[...e],r=ru(t);if(r!==(127&r))throw Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let n=ru(t),i=ru(t),s=ri(t),o=[];for(let e=0;e<s;e++){let e=rl(t,0,32);o.push(new t3(l.Buffer.from(e)))}let a=rl(t,0,32),c=ri(t),u=[];for(let e=0;e<c;e++){let e=ru(t),r=ri(t),n=rl(t,0,r),i=ri(t),s=rl(t,0,i),o=e2.default.encode(l.Buffer.from(s));u.push({programIdIndex:e,accounts:n,data:o})}return new rd({header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:i},recentBlockhash:e2.default.encode(l.Buffer.from(a)),accountKeys:o,instructions:u})}}class rf{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw Error("Failed to get account keys because address table lookups were not resolved");return new rt(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r)return e-r<this.addressTableLookups.reduce((e,t)=>e+t.writableIndexes.length,0);if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;{let n=r-t-this.header.numReadonlyUnsignedAccounts;return e-t<n}}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let r of this.addressTableLookups){let n=e.find(e=>e.key.equals(r.accountKey));if(!n)throw Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let e of r.writableIndexes)if(e<n.state.addresses.length)t.writable.push(n.state.addresses[e]);else throw Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);for(let e of r.readonlyIndexes)if(e<n.state.addresses.length)t.readonly.push(n.state.addresses[e]);else throw Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){let t=ra.compile(e.instructions,e.payerKey),r=[],n={writable:[],readonly:[]};for(let i of e.addressLookupTableAccounts||[]){let e=t.extractTableLookup(i);if(void 0!==e){let[t,{writable:i,readonly:s}]=e;r.push(t),n.writable.push(...i),n.readonly.push(...s)}}let[i,s]=t.getMessageComponents(),o=new rt(s,n).compileInstructions(e.instructions);return new rf({header:i,staticAccountKeys:s,recentBlockhash:e.recentBlockhash,compiledInstructions:o,addressTableLookups:r})}serialize(){let e=[];rs(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),r=[];rs(r,this.compiledInstructions.length);let n=this.serializeAddressTableLookups(),i=[];rs(i,this.addressTableLookups.length);let s=e5.struct([e5.u8("prefix"),e5.struct([e5.u8("numRequiredSignatures"),e5.u8("numReadonlySignedAccounts"),e5.u8("numReadonlyUnsignedAccounts")],"header"),e5.blob(e.length,"staticAccountKeysLength"),e5.seq(rr(),this.staticAccountKeys.length,"staticAccountKeys"),rr("recentBlockhash"),e5.blob(r.length,"instructionsLength"),e5.blob(t.length,"serializedInstructions"),e5.blob(i.length,"addressTableLookupsLength"),e5.blob(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(1232),a=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(e=>e.toBytes()),recentBlockhash:e2.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,a)}serializeInstructions(){let e=0,t=new Uint8Array(1232);for(let r of this.compiledInstructions){let n=[];rs(n,r.accountKeyIndexes.length);let i=[];rs(i,r.data.length);let s=e5.struct([e5.u8("programIdIndex"),e5.blob(n.length,"encodedAccountKeyIndexesLength"),e5.seq(e5.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),e5.blob(i.length,"encodedDataLength"),e5.blob(r.data.length,"data")]);e+=s.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(1232);for(let r of this.addressTableLookups){let n=[];rs(n,r.writableIndexes.length);let i=[];rs(i,r.readonlyIndexes.length);let s=e5.struct([rr("accountKey"),e5.blob(n.length,"encodedWritableIndexesLength"),e5.seq(e5.u8(),r.writableIndexes.length,"writableIndexes"),e5.blob(i.length,"encodedReadonlyIndexesLength"),e5.seq(e5.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=s.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e],r=ru(t),n=127&r;ro(r!==n,"Expected versioned message but received legacy message"),ro(0===n,`Expected versioned message with version 0 but found version ${n}`);let i={numRequiredSignatures:ru(t),numReadonlySignedAccounts:ru(t),numReadonlyUnsignedAccounts:ru(t)},s=[],o=ri(t);for(let e=0;e<o;e++)s.push(new t3(rl(t,0,32)));let a=e2.default.encode(rl(t,0,32)),c=ri(t),u=[];for(let e=0;e<c;e++){let e=ru(t),r=ri(t),n=rl(t,0,r),i=ri(t),s=new Uint8Array(rl(t,0,i));u.push({programIdIndex:e,accountKeyIndexes:n,data:s})}let l=ri(t),d=[];for(let e=0;e<l;e++){let e=new t3(rl(t,0,32)),r=ri(t),n=rl(t,0,r),i=ri(t),s=rl(t,0,i);d.push({accountKey:e,writableIndexes:n,readonlyIndexes:s})}return new rf({header:i,staticAccountKeys:s,recentBlockhash:a,compiledInstructions:u,addressTableLookups:d})}}let rh={deserializeMessageVersion(e){let t=e[0],r=127&t;return r===t?"legacy":r},deserialize:e=>{let t=rh.deserializeMessageVersion(e);if("legacy"===t)return rd.from(e);if(0===t)return rf.deserialize(e);throw Error(`Transaction message version ${t} deserialization is not supported`)}},rp=((o={})[o.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",o[o.PROCESSED=1]="PROCESSED",o[o.TIMED_OUT=2]="TIMED_OUT",o[o.NONCE_INVALID=3]="NONCE_INVALID",o),rg=l.Buffer.alloc(64).fill(0);class ry{constructor(e){this.keys=void 0,this.programId=void 0,this.data=l.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class rm{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!e)return;if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(0===e.length)throw Error("No instructions");return e.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new ry(e))}),this}compileMessage(){let e,t,r;if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw Error("Transaction fee payer required");for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw Error(`Transaction instruction index ${e} has undefined program id`);let n=[],i=[];t.forEach(e=>{e.keys.forEach(e=>{i.push({...e})});let t=e.programId.toString();n.includes(t)||n.push(t)}),n.forEach(e=>{i.push({pubkey:new t3(e),isSigner:!1,isWritable:!1})});let s=[];i.forEach(e=>{let t=e.pubkey.toString(),r=s.findIndex(e=>e.pubkey.toString()===t);r>-1?(s[r].isWritable=s[r].isWritable||e.isWritable,s[r].isSigner=s[r].isSigner||e.isSigner):s.push(e)}),s.sort(function(e,t){return e.isSigner!==t.isSigner?e.isSigner?-1:1:e.isWritable!==t.isWritable?e.isWritable?-1:1:e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});let o=s.findIndex(e=>e.pubkey.equals(r));if(o>-1){let[e]=s.splice(o,1);e.isSigner=!0,e.isWritable=!0,s.unshift(e)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let e of this.signatures){let t=s.findIndex(t=>t.pubkey.equals(e.publicKey));if(t>-1)s[t].isSigner||(s[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw Error(`unknown signer: ${e.publicKey.toString()}`)}let a=0,c=0,u=0,l=[],d=[];s.forEach(({pubkey:e,isSigner:t,isWritable:r})=>{t?(l.push(e.toString()),a+=1,r||(c+=1)):(d.push(e.toString()),r||(u+=1))});let f=l.concat(d),h=t.map(e=>{let{data:t,programId:r}=e;return{programIdIndex:f.indexOf(r.toString()),accounts:e.keys.map(e=>f.indexOf(e.pubkey.toString())),data:e2.default.encode(t)}});return h.forEach(e=>{ro(e.programIdIndex>=0),e.accounts.forEach(e=>ro(e>=0))}),new rd({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:f,recentBlockhash:e,instructions:h})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((e,r)=>t[r].equals(e.publicKey))?e:(this.signatures=t.map(e=>({signature:null,publicKey:e})),e)}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw Error("No signers");let t=new Set;this.signatures=e.filter(e=>{let r=e.toString();return!t.has(r)&&(t.add(r),!0)}).map(e=>({signature:null,publicKey:e}))}sign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let n of e){let e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map(e=>({signature:null,publicKey:e.publicKey}));let n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let n of e){let e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}let n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){let r=e.serialize();t.forEach(e=>{let t=t1(r,e.secretKey);this._addSignature(e.publicKey,t8(t))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){ro(64===t.length);let r=this.signatures.findIndex(t=>e.equals(t.publicKey));if(r<0)throw Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=l.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let r={};for(let{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||=[]).push(i):t2(n,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){let e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`
Invalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map(e=>e.toBase58()).join("`, `")}\`].`),e.missing&&(t+=`
Missing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map(e=>e.toBase58()).join("`, `")}\`].`),Error(t)}}return this._serialize(n)}_serialize(e){let{signatures:t}=this,r=[];rs(r,t.length);let n=r.length+64*t.length+e.length,i=l.Buffer.alloc(n);return ro(t.length<256),l.Buffer.from(r).copy(i,0),t.forEach(({signature:e},t)=>{null!==e&&(ro(64===e.length,"signature has invalid length"),l.Buffer.from(e).copy(i,r.length+64*t))}),e.copy(i,r.length+64*t.length),ro(i.length<=1232,`Transaction too large: ${i.length} > 1232`),i}get keys(){return ro(1===this.instructions.length),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return ro(1===this.instructions.length),this.instructions[0].programId}get data(){return ro(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e],r=ri(t),n=[];for(let e=0;e<r;e++){let e=rl(t,0,64);n.push(e2.default.encode(l.Buffer.from(e)))}return rm.populate(rd.from(t),n)}static populate(e,t=[]){let r=new rm;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((t,n)=>{let i={signature:t==e2.default.encode(rg)?null:e2.default.decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)}),e.instructions.forEach(t=>{let n=t.accounts.map(t=>{let n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some(e=>e.publicKey.toString()===n.toString())||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}});r.instructions.push(new ry({keys:n,programId:e.accountKeys[t.programIdIndex],data:e2.default.decode(t.data)}))}),r._message=e,r._json=r.toJSON(),r}}class rb{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)ro(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(64));this.signatures=t}this.message=e}serialize(){let e=this.message.serialize(),t=[];rs(t,this.signatures.length);let r=e5.struct([e5.blob(t.length,"encodedSignaturesLength"),e5.seq(((e="signature")=>e5.blob(64,e))(),this.signatures.length,"signatures"),e5.blob(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}static deserialize(e){let t=[...e],r=[],n=ri(t);for(let e=0;e<n;e++)r.push(new Uint8Array(rl(t,0,64)));return new rb(rh.deserialize(new Uint8Array(t)),r)}sign(e){let t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let n of e){let e=r.findIndex(e=>e.equals(n.publicKey));ro(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=t1(t,n.secretKey)}}addSignature(e,t){ro(64===t.byteLength,"Signature must be 64 bytes long");let r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(t=>t.equals(e));ro(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}let rw=new t3("SysvarC1ock11111111111111111111111111111111");new t3("SysvarEpochSchedu1e111111111111111111111111"),new t3("Sysvar1nstructions1111111111111111111111111");let rv=new t3("SysvarRecentB1ockHashes11111111111111111111"),rS=new t3("SysvarRent111111111111111111111111111111111");new t3("SysvarRewards111111111111111111111111111111"),new t3("SysvarS1otHashes111111111111111111111111111"),new t3("SysvarS1otHistory11111111111111111111111111");let rk=new t3("SysvarStakeHistory1111111111111111111111111");class rB extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){let i;const s=n?`Logs: 
${JSON.stringify(n.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";switch(e){case"send":i=`Transaction ${t} resulted in an error. 
${r}. `+s+o;break;case"simulate":i=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:i=`Unknown action '${e}'`}super(i),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(e=>{if(e&&e.meta&&e.meta.logMessages){let r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class rE extends Error{constructor({code:e,message:t,data:r},n){super(null!=n?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function rx(e,t,r,n){let i,s=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await e.sendTransaction(t,r,s);if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)i=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){let{nonceInstruction:r}=t.nonceInfo,s=r.keys[0].pubkey;i=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:s,nonceValue:t.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),i=(await e.confirmTransaction(o,n&&n.commitment)).value;if(i.err){if(null!=o)throw new rB({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(i)})`});throw Error(`Transaction ${o} failed (${JSON.stringify(i)})`)}return o}function rI(e){return new Promise(t=>setTimeout(t,e))}function rA(e,t){let r=e.layout.span>=0?e.layout.span:function e(t,r){let n=t=>{if(t.span>=0)return t.span;if("function"==typeof t.alloc)return t.alloc(r[t.property]);if("count"in t&&"elementLayout"in t){let e=r[t.property];if(Array.isArray(e))return e.length*n(t.elementLayout)}else if("fields"in t)return e({layout:t},r[t.property]);return 0},i=0;return t.layout.fields.forEach(e=>{i+=n(e)}),i}(e,t),n=l.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}let r_=e5.nu64("lamportsPerSignature"),rT=e5.struct([e5.u32("version"),e5.u32("state"),rr("authorizedPubkey"),rr("nonce"),e5.struct([r_],"feeCalculator")]),rO=rT.span;class rP{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let t=rT.decode(t8(e),0);return new rP({authorizedPubkey:new t3(t.authorizedPubkey),nonce:new t3(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function rR(e){let t=(0,e5.blob)(8,e),r=t.decode.bind(t),n=t.encode.bind(t),i=((e={})=>(function(e,t){if(e7(e)!==e7(t))throw new e3(8078004);if(e7(e)&&e7(t)&&e.fixedSize!==t.fixedSize)throw new e3(8078005,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!e7(e)&&!e7(t)&&e.maxSize!==t.maxSize)throw new e3(8078006,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}})(((e={})=>{var t,r;return Object.freeze({...r={fixedSize:(t={config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}).size,write(e,r,n){t.range&&function(e,t,r,n){if(n<t||n>r)throw new e3(8078011,{codecDescription:e,max:r,min:t,value:n})}(t.name,t.range[0],t.range[1],e);let i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,te(t.config)),r.set(new Uint8Array(i),n),n+t.size}},encode:e=>{let t=new Uint8Array("fixedSize"in r?r.fixedSize:r.getSizeFromValue(e));return r.write(e,t,0),t}})})(e),((e={})=>{var t,r;return Object.freeze({...r={fixedSize:(t={config:e,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}).size,read(e,r=0){var n,i,s;let o,a;!function(e,t,r=0){if(t.length-r<=0)throw new e3(8078e3,{codecDescription:e})}(t.name,e,r),function(e,t,r,n=0){let i=r.length-n;if(i<t)throw new e3(8078001,{bytesLength:i,codecDescription:e,expected:t})}(t.name,t.size,e,r);let c=new DataView((n=e,i=r,s=t.size,o=n.byteOffset+(i??0),a=s??n.byteLength,n.buffer.slice(o,o+a)));return[t.get(c,te(t.config)),r+t.size]}},decode:(e,t=0)=>r.read(e,t)[0]})})(e)))();return t.decode=(e,t)=>{let n=r(e,t);return i.decode(n)},t.encode=(e,t,r)=>n(i.encode(e),t,r),t}let rC=Object.freeze({Create:{index:0,layout:e5.struct([e5.u32("instruction"),e5.ns64("lamports"),e5.ns64("space"),rr("programId")])},Assign:{index:1,layout:e5.struct([e5.u32("instruction"),rr("programId")])},Transfer:{index:2,layout:e5.struct([e5.u32("instruction"),rR("lamports")])},CreateWithSeed:{index:3,layout:e5.struct([e5.u32("instruction"),rr("base"),rn("seed"),e5.ns64("lamports"),e5.ns64("space"),rr("programId")])},AdvanceNonceAccount:{index:4,layout:e5.struct([e5.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:e5.struct([e5.u32("instruction"),e5.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:e5.struct([e5.u32("instruction"),rr("authorized")])},AuthorizeNonceAccount:{index:7,layout:e5.struct([e5.u32("instruction"),rr("authorized")])},Allocate:{index:8,layout:e5.struct([e5.u32("instruction"),e5.ns64("space")])},AllocateWithSeed:{index:9,layout:e5.struct([e5.u32("instruction"),rr("base"),rn("seed"),e5.ns64("space"),rr("programId")])},AssignWithSeed:{index:10,layout:e5.struct([e5.u32("instruction"),rr("base"),rn("seed"),rr("programId")])},TransferWithSeed:{index:11,layout:e5.struct([e5.u32("instruction"),rR("lamports"),rn("seed"),rr("programId")])},UpgradeNonceAccount:{index:12,layout:e5.struct([e5.u32("instruction")])}});class rL{static createAccount(e){let t=rA(rC.Create,{lamports:e.lamports,space:e.space,programId:t8(e.programId.toBuffer())});return new ry({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;return"basePubkey"in e?(t=rA(rC.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:t8(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=rA(rC.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]),new ry({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;return"basePubkey"in e?(t=rA(rC.AssignWithSeed,{base:t8(e.basePubkey.toBuffer()),seed:e.seed,programId:t8(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=rA(rC.Assign,{programId:t8(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new ry({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=rA(rC.CreateWithSeed,{base:t8(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:t8(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new ry({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){let t=new rm;"basePubkey"in e&&"seed"in e?t.add(rL.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:rO,programId:this.programId})):t.add(rL.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:rO,programId:this.programId}));let r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){let t=rA(rC.InitializeNonceAccount,{authorized:t8(e.authorizedPubkey.toBuffer())});return new ry({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:rv,isSigner:!1,isWritable:!1},{pubkey:rS,isSigner:!1,isWritable:!1}],programId:this.programId,data:t})}static nonceAdvance(e){let t=rA(rC.AdvanceNonceAccount);return new ry({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:rv,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceWithdraw(e){let t=rA(rC.WithdrawNonceAccount,{lamports:e.lamports});return new ry({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:rv,isSigner:!1,isWritable:!1},{pubkey:rS,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){let t=rA(rC.AuthorizeNonceAccount,{authorized:t8(e.newAuthorizedPubkey.toBuffer())});return new ry({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;return"basePubkey"in e?(t=rA(rC.AllocateWithSeed,{base:t8(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:t8(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=rA(rC.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new ry({keys:r,programId:this.programId,data:t})}}rL.programId=new t3("11111111111111111111111111111111");class rU{static getMinNumSignatures(e){return 2*(Math.ceil(e/rU.chunkSize)+1+1)}static async load(e,t,r,n,i){{let s=await e.getMinimumBalanceForRentExemption(i.length),o=await e.getAccountInfo(r.publicKey,"confirmed"),a=null;if(null!==o){if(o.executable)return console.error("Program load failed, account is already executable"),!1;o.data.length!==i.length&&(a=a||new rm).add(rL.allocate({accountPubkey:r.publicKey,space:i.length})),o.owner.equals(n)||(a=a||new rm).add(rL.assign({accountPubkey:r.publicKey,programId:n})),o.lamports<s&&(a=a||new rm).add(rL.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:s-o.lamports}))}else a=new rm().add(rL.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:s>0?s:1,space:i.length,programId:n}));null!==a&&await rx(e,a,[t,r],{commitment:"confirmed"})}let s=e5.struct([e5.u32("instruction"),e5.u32("offset"),e5.u32("bytesLength"),e5.u32("bytesLengthPadding"),e5.seq(e5.u8("byte"),e5.offset(e5.u32(),-8),"bytes")]),o=rU.chunkSize,a=0,c=i,u=[];for(;c.length>0;){let i=c.slice(0,o),d=l.Buffer.alloc(o+16);s.encode({instruction:0,offset:a,bytes:i,bytesLength:0,bytesLengthPadding:0},d);let f=new rm().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:d});u.push(rx(e,f,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await rI(250),a+=o,c=c.slice(o)}await Promise.all(u);{let i=e5.struct([e5.u32("instruction")]),s=l.Buffer.alloc(i.span);i.encode({instruction:1},s);let o=new rm().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:rS,isSigner:!1,isWritable:!1}],programId:n,data:s}),a="processed",c=await e.sendTransaction(o,[t,r],{preflightCommitment:a}),{context:u,value:d}=await e.confirmTransaction({signature:c,lastValidBlockHeight:o.lastValidBlockHeight,blockhash:o.recentBlockhash},a);if(d.err)throw Error(`Transaction ${c} failed (${JSON.stringify(d)})`);for(;;){try{if(await e.getSlot({commitment:a})>u.slot)break}catch{}await new Promise(e=>setTimeout(e,Math.round(200)))}}return!0}}rU.chunkSize=932,new t3("BPFLoader2111111111111111111111111111111111");var rq=(a=function(){if(u)return c;u=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};return c=function(r){var n=function r(n,i){var s,o,a,c,u,l,d;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),i);if("[object Array]"===(d=e.call(n))){for(s=0,a="[",o=n.length-1;s<o;s++)a+=r(n[s],!0)+",";return o>-1&&(a+=r(n[s],!0)),a+"]"}if("[object Object]"!==d)return JSON.stringify(n);for(o=(c=t(n).sort()).length,a="",s=0;s<o;)void 0!==(l=r(n[u=c[s]],!1))&&(a&&(a+=","),a+=JSON.stringify(u)+":"+l),s++;return"{"+a+"}";case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}(r,!1);if(void 0!==n)return""+n}}())&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;function rz(e){let t=0;for(;e>1;)e/=2,t++;return t}class rN{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){var t;let r=rz(0===(t=e+32+1)?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,(t|=t>>32)+1))-rz(32)-1,n=this.getSlotsInEpoch(r);return[r,e-(n-32)]}{let t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*32:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+rz(32)):this.slotsPerEpoch}}var rW=globalThis.fetch;class rK extends tT{constructor(e,t,r){super(e=>{let r=new tA(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in r?this.underlyingSocket=r.socket:this.underlyingSocket=r,r},e,t,r),this.underlyingSocket=void 0}call(...e){let t=this.underlyingSocket?.readyState;return 1===t?super.call(...e):Promise.reject(Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){let t=this.underlyingSocket?.readyState;return 1===t?super.notify(...e):Promise.reject(Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}class rF{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let t=function(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}(rM,e),r=e.length-56;ro(r>=0,"lookup table is invalid"),ro(r%32==0,"lookup table is invalid");let{addresses:n}=e5.struct([e5.seq(rr(),r/32,"addresses")]).decode(e.slice(56));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new t3(t.authority[0]):void 0,addresses:n.map(e=>new t3(e))}}}let rM={index:1,layout:e5.struct([e5.u32("typeIndex"),rR("deactivationSlot"),e5.nu64("lastExtendedSlot"),e5.u8("lastExtendedStartIndex"),e5.u8(),e5.seq(rr(),e5.offset(e5.u8(),-1),"authority")])},rD=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,rj=tE(th(t3),tw(),e=>new t3(e)),r$=tv([tw(),tp("base64")]),rV=tE(th(l.Buffer),r$,e=>l.Buffer.from(e[0],"base64"));function rH(e){let t,r;if("string"==typeof e)t=e;else if(e){let{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function rZ(e){return e.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function rG(e){return tk([tS({jsonrpc:tp("2.0"),id:tw(),result:e}),tS({jsonrpc:tp("2.0"),id:tw(),error:tS({code:tB(),message:tw(),data:tm(tl("any",()=>!0))})})])}let rY=rG(tB());function rJ(e){return tE(rG(e),rY,t=>"error"in t?t:{...t,result:tc(t.result,e)})}function rX(e){return rJ(tS({context:tS({slot:ty()}),value:e}))}function rQ(e){return tS({context:tS({slot:ty()}),value:e})}function r0(e,t){return 0===e?new rf({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new t3(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:e2.default.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new rd(t)}let r1=tS({foundation:ty(),foundationTerm:ty(),initial:ty(),taper:ty(),terminal:ty()}),r2=rJ(td(tg(tS({epoch:ty(),effectiveSlot:ty(),amount:ty(),postBalance:ty(),commission:tm(tg(ty()))})))),r8=td(tS({slot:ty(),prioritizationFee:ty()})),r6=tS({total:ty(),validator:ty(),foundation:ty(),epoch:ty()}),r5=tS({epoch:ty(),slotIndex:ty(),slotsInEpoch:ty(),absoluteSlot:ty(),blockHeight:tm(ty()),transactionCount:tm(ty())}),r4=tS({slotsPerEpoch:ty(),leaderScheduleSlotOffset:ty(),warmup:tf(),firstNormalEpoch:ty(),firstNormalSlot:ty()}),r3=tb(tw(),td(ty())),r7=tg(tk([tS({}),tw()])),r9=tS({err:r7}),ne=tp("receivedSignature"),nt=tS({"solana-core":tw(),"feature-set":tm(ty())}),nr=tS({program:tw(),programId:rj,parsed:tB()}),nn=tS({programId:rj,accounts:td(rj),data:tw()}),ni=rX(tS({err:tg(tk([tS({}),tw()])),logs:tg(td(tw())),accounts:tm(tg(td(tg(tS({executable:tf(),owner:tw(),lamports:ty(),data:td(tw()),rentEpoch:tm(ty())}))))),unitsConsumed:tm(ty()),returnData:tm(tg(tS({programId:tw(),data:tv([tw(),tp("base64")])}))),innerInstructions:tm(tg(td(tS({index:ty(),instructions:td(tk([nr,nn]))}))))})),ns=rX(tS({byIdentity:tb(tw(),td(ty())),range:tS({firstSlot:ty(),lastSlot:ty()})})),no=rJ(r1),na=rJ(r6),nc=rJ(r8),nu=rJ(r5),nl=rJ(r4),nd=rJ(r3),nf=rJ(ty()),nh=rX(tS({total:ty(),circulating:ty(),nonCirculating:ty(),nonCirculatingAccounts:td(rj)})),np=tS({amount:tw(),uiAmount:tg(ty()),decimals:ty(),uiAmountString:tm(tw())}),ng=rX(td(tS({address:rj,amount:tw(),uiAmount:tg(ty()),decimals:ty(),uiAmountString:tm(tw())}))),ny=rX(td(tS({pubkey:rj,account:tS({executable:tf(),owner:rj,lamports:ty(),data:rV,rentEpoch:ty()})}))),nm=tS({program:tw(),parsed:tB(),space:ty()}),nb=rX(td(tS({pubkey:rj,account:tS({executable:tf(),owner:rj,lamports:ty(),data:nm,rentEpoch:ty()})}))),nw=rX(td(tS({lamports:ty(),address:rj}))),nv=tS({executable:tf(),owner:rj,lamports:ty(),data:rV,rentEpoch:ty()}),nS=tS({pubkey:rj,account:nv}),nk=tE(tk([th(l.Buffer),nm]),tk([r$,nm]),e=>Array.isArray(e)?tc(e,rV):e),nB=tS({executable:tf(),owner:rj,lamports:ty(),data:nk,rentEpoch:ty()}),nE=tS({pubkey:rj,account:nB}),nx=tS({state:tk([tp("active"),tp("inactive"),tp("activating"),tp("deactivating")]),active:ty(),inactive:ty()}),nI=rJ(td(tS({signature:tw(),slot:ty(),err:r7,memo:tg(tw()),blockTime:tm(tg(ty()))}))),nA=rJ(td(tS({signature:tw(),slot:ty(),err:r7,memo:tg(tw()),blockTime:tm(tg(ty()))}))),n_=tS({subscription:ty(),result:rQ(nv)}),nT=tS({pubkey:rj,account:nv}),nO=tS({subscription:ty(),result:rQ(nT)}),nP=tS({parent:ty(),slot:ty(),root:ty()}),nR=tS({subscription:ty(),result:nP}),nC=tk([tS({type:tk([tp("firstShredReceived"),tp("completed"),tp("optimisticConfirmation"),tp("root")]),slot:ty(),timestamp:ty()}),tS({type:tp("createdBank"),parent:ty(),slot:ty(),timestamp:ty()}),tS({type:tp("frozen"),slot:ty(),timestamp:ty(),stats:tS({numTransactionEntries:ty(),numSuccessfulTransactions:ty(),numFailedTransactions:ty(),maxTransactionsPerEntry:ty()})}),tS({type:tp("dead"),slot:ty(),timestamp:ty(),err:tw()})]),nL=tS({subscription:ty(),result:nC}),nU=tS({subscription:ty(),result:rQ(tk([r9,ne]))}),nq=tS({subscription:ty(),result:ty()}),nz=tS({pubkey:tw(),gossip:tg(tw()),tpu:tg(tw()),rpc:tg(tw()),version:tg(tw())}),nN=tS({votePubkey:tw(),nodePubkey:tw(),activatedStake:ty(),epochVoteAccount:tf(),epochCredits:td(tv([ty(),ty(),ty()])),commission:ty(),lastVote:ty(),rootSlot:tg(ty())}),nW=rJ(tS({current:td(nN),delinquent:td(nN)})),nK=tk([tp("processed"),tp("confirmed"),tp("finalized")]),nF=tS({slot:ty(),confirmations:tg(ty()),err:r7,confirmationStatus:tm(nK)}),nM=rX(td(tg(nF))),nD=rJ(ty()),nj=tS({accountKey:rj,writableIndexes:td(ty()),readonlyIndexes:td(ty())}),n$=tS({signatures:td(tw()),message:tS({accountKeys:td(tw()),header:tS({numRequiredSignatures:ty(),numReadonlySignedAccounts:ty(),numReadonlyUnsignedAccounts:ty()}),instructions:td(tS({accounts:td(ty()),data:tw(),programIdIndex:ty()})),recentBlockhash:tw(),addressTableLookups:tm(td(nj))})}),nV=tS({pubkey:rj,signer:tf(),writable:tf(),source:tm(tk([tp("transaction"),tp("lookupTable")]))}),nH=tS({accountKeys:td(nV),signatures:td(tw())}),nZ=tS({parsed:tB(),program:tw(),programId:rj}),nG=tS({accounts:td(rj),data:tw(),programId:rj}),nY=tE(tk([nG,nZ]),tk([tS({parsed:tB(),program:tw(),programId:tw()}),tS({accounts:td(tw()),data:tw(),programId:tw()})]),e=>"accounts"in e?tc(e,nG):tc(e,nZ)),nJ=tS({signatures:td(tw()),message:tS({accountKeys:td(nV),instructions:td(nY),recentBlockhash:tw(),addressTableLookups:tm(tg(td(nj)))})}),nX=tS({accountIndex:ty(),mint:tw(),owner:tm(tw()),programId:tm(tw()),uiTokenAmount:np}),nQ=tS({writable:td(rj),readonly:td(rj)}),n0=tS({err:r7,fee:ty(),innerInstructions:tm(tg(td(tS({index:ty(),instructions:td(tS({accounts:td(ty()),data:tw(),programIdIndex:ty()}))})))),preBalances:td(ty()),postBalances:td(ty()),logMessages:tm(tg(td(tw()))),preTokenBalances:tm(tg(td(nX))),postTokenBalances:tm(tg(td(nX))),loadedAddresses:tm(nQ),computeUnitsConsumed:tm(ty()),costUnits:tm(ty())}),n1=tS({err:r7,fee:ty(),innerInstructions:tm(tg(td(tS({index:ty(),instructions:td(nY)})))),preBalances:td(ty()),postBalances:td(ty()),logMessages:tm(tg(td(tw()))),preTokenBalances:tm(tg(td(nX))),postTokenBalances:tm(tg(td(nX))),loadedAddresses:tm(nQ),computeUnitsConsumed:tm(ty()),costUnits:tm(ty())}),n2=tk([tp(0),tp("legacy")]),n8=tS({pubkey:tw(),lamports:ty(),postBalance:tg(ty()),rewardType:tg(tw()),commission:tm(tg(ty()))}),n6=rJ(tg(tS({blockhash:tw(),previousBlockhash:tw(),parentSlot:ty(),transactions:td(tS({transaction:n$,meta:tg(n0),version:tm(n2)})),rewards:tm(td(n8)),blockTime:tg(ty()),blockHeight:tg(ty())}))),n5=rJ(tg(tS({blockhash:tw(),previousBlockhash:tw(),parentSlot:ty(),rewards:tm(td(n8)),blockTime:tg(ty()),blockHeight:tg(ty())}))),n4=rJ(tg(tS({blockhash:tw(),previousBlockhash:tw(),parentSlot:ty(),transactions:td(tS({transaction:nH,meta:tg(n0),version:tm(n2)})),rewards:tm(td(n8)),blockTime:tg(ty()),blockHeight:tg(ty())}))),n3=rJ(tg(tS({blockhash:tw(),previousBlockhash:tw(),parentSlot:ty(),transactions:td(tS({transaction:nJ,meta:tg(n1),version:tm(n2)})),rewards:tm(td(n8)),blockTime:tg(ty()),blockHeight:tg(ty())}))),n7=rJ(tg(tS({blockhash:tw(),previousBlockhash:tw(),parentSlot:ty(),transactions:td(tS({transaction:nH,meta:tg(n1),version:tm(n2)})),rewards:tm(td(n8)),blockTime:tg(ty()),blockHeight:tg(ty())}))),n9=rJ(tg(tS({blockhash:tw(),previousBlockhash:tw(),parentSlot:ty(),rewards:tm(td(n8)),blockTime:tg(ty()),blockHeight:tg(ty())}))),ie=rJ(tg(tS({blockhash:tw(),previousBlockhash:tw(),parentSlot:ty(),transactions:td(tS({transaction:n$,meta:tg(n0)})),rewards:tm(td(n8)),blockTime:tg(ty())}))),it=rJ(tg(tS({blockhash:tw(),previousBlockhash:tw(),parentSlot:ty(),signatures:td(tw()),blockTime:tg(ty())}))),ir=rJ(tg(tS({slot:ty(),meta:tg(n0),blockTime:tm(tg(ty())),transaction:n$,version:tm(n2)}))),ii=rJ(tg(tS({slot:ty(),transaction:nJ,meta:tg(n1),blockTime:tm(tg(ty())),version:tm(n2)}))),is=rX(tS({blockhash:tw(),lastValidBlockHeight:ty()})),io=rX(tf()),ia=rJ(td(tS({slot:ty(),numTransactions:ty(),numSlots:ty(),samplePeriodSecs:ty()}))),ic=rX(tg(tS({feeCalculator:tS({lamportsPerSignature:ty()})}))),iu=rJ(tw()),il=rJ(tw()),id=tS({err:r7,logs:td(tw()),signature:tw()}),ih=tS({result:rQ(id),subscription:ty()}),ip={"solana-client":"js/1.0.0-maintenance"};class ig{constructor(e,t){var r;let n,i,s,o,a,c;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let e={};return async t=>{let{commitment:r,config:n}=rH(t),i=this._buildArgs([],r,void 0,n),s=rq(i);return e[s]=e[s]??(async()=>{try{let e=await this._rpcRequest("getBlockHeight",i),t=tc(e,rJ(ty()));if("error"in t)throw new rE(t.error,"failed to get block height information");return t.result}finally{delete e[s]}})(),await e[s]}})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(e),this._rpcWsEndpoint=n||function(e){let t=e.match(rD);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);let[r,n,i,s]=t,o=e.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10),c=null==a?"":`:${a+1}`;return`${o}//${n}${c}${s}`}(e),this._rpcClient=function(e,t,r,n,i,s){let o,a,c=r||rW;return null!=s&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(a=async(e,t)=>{let r=await new Promise((r,i)=>{try{n(e,t,(e,t)=>r([e,t]))}catch(e){i(e)}});return await c(...r)}),new tx.default(async(r,n)=>{let s={method:"POST",body:r,agent:o,headers:Object.assign({"Content-Type":"application/json"},t||{},ip)};try{let t,r=5,o=500;for(;(t=a?await a(e,s):await c(e,s),429===t.status&&!0!==i)&&(r-=1,0!==r);){;console.error(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${o}ms delay...`),await rI(o),o*=2}let u=await t.text();t.ok?n(null,u):n(Error(`${t.status} ${t.statusText}: ${u}`))}catch(e){e instanceof Error&&n(e)}},{})}(e,i,s,o,a,c),this._rpcRequest=(r=this._rpcClient,(e,t)=>new Promise((n,i)=>{r.request(e,t,(e,t)=>{e?i(e):n(t)})})),this._rpcBatchRequest=function(e){return t=>new Promise((r,n)=>{0===t.length&&r([]);let i=t.map(t=>e.request(t.methodName,t.args));e.request(i,(e,t)=>{e?n(e):r(t)})})}(this._rpcClient),this._rpcWebSocket=new rK(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){let{commitment:r,config:n}=rH(t),i=this._buildArgs([e.toBase58()],r,void 0,n),s=tc(await this._rpcRequest("getBalance",i),rX(ty()));if("error"in s)throw new rE(s.error,`failed to get balance for ${e.toBase58()}`);return s.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(e=>e.value).catch(t=>{throw Error("failed to get balance of account "+e.toBase58()+": "+t)})}async getBlockTime(e){let t=tc(await this._rpcRequest("getBlockTime",[e]),rJ(tg(ty())));if("error"in t)throw new rE(t.error,`failed to get block time for slot ${e}`);return t.result}async getMinimumLedgerSlot(){let e=tc(await this._rpcRequest("minimumLedgerSlot",[]),rJ(ty()));if("error"in e)throw new rE(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){let e=tc(await this._rpcRequest("getFirstAvailableBlock",[]),nf);if("error"in e)throw new rE(e.error,"failed to get first available block");return e.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};let r=tc(await this._rpcRequest("getSupply",[t]),nh);if("error"in r)throw new rE(r.error,"failed to get supply");return r.result}async getTokenSupply(e,t){let r=this._buildArgs([e.toBase58()],t),n=tc(await this._rpcRequest("getTokenSupply",r),rX(np));if("error"in n)throw new rE(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(e,t){let r=this._buildArgs([e.toBase58()],t),n=tc(await this._rpcRequest("getTokenAccountBalance",r),rX(np));if("error"in n)throw new rE(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(e,t,r){let{commitment:n,config:i}=rH(r),s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});let o=this._buildArgs(s,n,"base64",i),a=tc(await this._rpcRequest("getTokenAccountsByOwner",o),ny);if("error"in a)throw new rE(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});let i=this._buildArgs(n,r,"jsonParsed"),s=tc(await this._rpcRequest("getTokenAccountsByOwner",i),nb);if("error"in s)throw new rE(s.error,`failed to get token accounts owned by account ${e.toBase58()}`);return s.result}async getLargestAccounts(e){let t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=tc(await this._rpcRequest("getLargestAccounts",r),nw);if("error"in n)throw new rE(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(e,t){let r=this._buildArgs([e.toBase58()],t),n=tc(await this._rpcRequest("getTokenLargestAccounts",r),ng);if("error"in n)throw new rE(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(e,t){let{commitment:r,config:n}=rH(t),i=this._buildArgs([e.toBase58()],r,"base64",n),s=tc(await this._rpcRequest("getAccountInfo",i),rX(tg(nv)));if("error"in s)throw new rE(s.error,`failed to get info about account ${e.toBase58()}`);return s.result}async getParsedAccountInfo(e,t){let{commitment:r,config:n}=rH(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),s=tc(await this._rpcRequest("getAccountInfo",i),rX(tg(nB)));if("error"in s)throw new rE(s.error,`failed to get info about account ${e.toBase58()}`);return s.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(t){throw Error("failed to get info about account "+e.toBase58()+": "+t)}}async getMultipleParsedAccounts(e,t){let{commitment:r,config:n}=rH(t),i=e.map(e=>e.toBase58()),s=this._buildArgs([i],r,"jsonParsed",n),o=tc(await this._rpcRequest("getMultipleAccounts",s),rX(td(tg(nB))));if("error"in o)throw new rE(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfoAndContext(e,t){let{commitment:r,config:n}=rH(t),i=e.map(e=>e.toBase58()),s=this._buildArgs([i],r,"base64",n),o=tc(await this._rpcRequest("getMultipleAccounts",s),rX(td(tg(nv))));if("error"in o)throw new rE(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){let{commitment:n,config:i}=rH(t),s=this._buildArgs([e.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),o=tc(await this._rpcRequest("getStakeActivation",s),rJ(nx));if("error"in o)throw new rE(o.error,`failed to get Stake Activation ${e.toBase58()}`);return o.result}async getProgramAccounts(e,t){let{commitment:r,config:n}=rH(t),{encoding:i,...s}=n||{},o=this._buildArgs([e.toBase58()],r,i||"base64",{...s,...s.filters?{filters:rZ(s.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",o),c=td(nS),u=!0===s.withContext?tc(a,rX(c)):tc(a,rJ(c));if("error"in u)throw new rE(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,t){let{commitment:r,config:n}=rH(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),s=tc(await this._rpcRequest("getProgramAccounts",i),rJ(td(nE)));if("error"in s)throw new rE(s.error,`failed to get accounts owned by program ${e.toBase58()}`);return s.result}async confirmTransaction(e,t){let r,n;if("string"==typeof e)r=e;else{if(e.abortSignal?.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=e2.default.decode(r)}catch(e){throw Error("signature must be base58 encoded: "+r)}return(ro(64===n.length,"signature has invalid length"),"string"==typeof e)?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,i=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise((s,o)=>{try{r=this.onSignature(t,(e,t)=>{r=void 0,s({__type:rp.PROCESSED,response:{context:t,value:e}})},e);let a=new Promise(e=>{null==r?e():n=this._onSubscriptionStateChange(r,t=>{"subscribed"===t&&e()})});(async()=>{if(await a,i)return;let r=await this.getSignatureStatus(t);if(i||null==r)return;let{context:n,value:c}=r;if(null!=c)if(c?.err)o(c.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return}i=!0,s({__type:rp.PROCESSED,response:{context:n,value:c}})}})()}catch(e){o(e)}})}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let i,s=!1,o=new Promise(t=>{let n=async()=>{try{return await this.getBlockHeight(e)}catch(e){return -1}};(async()=>{let e=await n();if(!s){for(;e<=r;)if(await rI(1e3),s||(e=await n(),s))return;t({__type:rp.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),u=this.getCancellationPromise(t);try{let e=await Promise.race([u,c,o]);if(e.__type===rp.PROCESSED)i=e.response;else throw new t7(n)}finally{s=!0,a()}return i}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o,a=!1,c=new Promise(t=>{let s=i,o=null,c=async()=>{try{let{context:t,value:i}=await this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return o=t.slot,i?.nonce}catch(e){return s}};(async()=>{if(s=await c(),!a)for(;;){if(i!==s)return void t({__type:rp.NONCE_INVALID,slotInWhichNonceDidAdvance:o});if(await rI(2e3),a||(s=await c(),a))return}})()}),{abortConfirmation:u,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),d=this.getCancellationPromise(t);try{let t=await Promise.race([d,l,c]);if(t.__type===rp.PROCESSED)o=t.response;else{let n;for(;;){let e=await this.getSignatureStatus(s);if(null==e)break;if(e.context.slot<(t.slotInWhichNonceDidAdvance??r)){await rI(400);continue}n=e;break}if(n?.value){let t=e||"finalized",{confirmationStatus:r}=n.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new re(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new re(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new re(s)}o={context:n.context,value:{err:n.value.err}}}else throw new re(s)}}finally{a=!0,u()}return o}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r,n,i=new Promise(t=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout(()=>t({__type:rp.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});try{let e=await Promise.race([o,i]);if(e.__type===rp.PROCESSED)n=e.response;else throw new t9(t,e.timeoutMs/1e3)}finally{clearTimeout(r),s()}return n}async getClusterNodes(){let e=tc(await this._rpcRequest("getClusterNodes",[]),rJ(td(nz)));if("error"in e)throw new rE(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(e){let t=this._buildArgs([],e),r=tc(await this._rpcRequest("getVoteAccounts",t),nW);if("error"in r)throw new rE(r.error,"failed to get vote accounts");return r.result}async getSlot(e){let{commitment:t,config:r}=rH(e),n=this._buildArgs([],t,void 0,r),i=tc(await this._rpcRequest("getSlot",n),rJ(ty()));if("error"in i)throw new rE(i.error,"failed to get slot");return i.result}async getSlotLeader(e){let{commitment:t,config:r}=rH(e),n=this._buildArgs([],t,void 0,r),i=tc(await this._rpcRequest("getSlotLeader",n),rJ(tw()));if("error"in i)throw new rE(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(e,t){let r=tc(await this._rpcRequest("getSlotLeaders",[e,t]),rJ(td(rj)));if("error"in r)throw new rE(r.error,"failed to get slot leaders");return r.result}async getSignatureStatus(e,t){let{context:r,value:n}=await this.getSignatureStatuses([e],t);return ro(1===n.length),{context:r,value:n[0]}}async getSignatureStatuses(e,t){let r=[e];t&&r.push(t);let n=tc(await this._rpcRequest("getSignatureStatuses",r),nM);if("error"in n)throw new rE(n.error,"failed to get signature status");return n.result}async getTransactionCount(e){let{commitment:t,config:r}=rH(e),n=this._buildArgs([],t,void 0,r),i=tc(await this._rpcRequest("getTransactionCount",n),rJ(ty()));if("error"in i)throw new rE(i.error,"failed to get transaction count");return i.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){let t=this._buildArgs([],e),r=tc(await this._rpcRequest("getInflationGovernor",t),no);if("error"in r)throw new rE(r.error,"failed to get inflation");return r.result}async getInflationReward(e,t,r){let{commitment:n,config:i}=rH(r),s=this._buildArgs([e.map(e=>e.toBase58())],n,void 0,{...i,epoch:null!=t?t:i?.epoch}),o=tc(await this._rpcRequest("getInflationReward",s),r2);if("error"in o)throw new rE(o.error,"failed to get inflation reward");return o.result}async getInflationRate(){let e=tc(await this._rpcRequest("getInflationRate",[]),na);if("error"in e)throw new rE(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(e){let{commitment:t,config:r}=rH(e),n=this._buildArgs([],t,void 0,r),i=tc(await this._rpcRequest("getEpochInfo",n),nu);if("error"in i)throw new rE(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){let e=tc(await this._rpcRequest("getEpochSchedule",[]),nl);if("error"in e)throw new rE(e.error,"failed to get epoch schedule");let t=e.result;return new rN(t.slotsPerEpoch,t.leaderScheduleSlotOffset,t.warmup,t.firstNormalEpoch,t.firstNormalSlot)}async getLeaderSchedule(){let e=tc(await this._rpcRequest("getLeaderSchedule",[]),nd);if("error"in e)throw new rE(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(e,t){let r=this._buildArgs([e],t),n=tc(await this._rpcRequest("getMinimumBalanceForRentExemption",r),nD);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(e){let{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(e){let t=tc(await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),ia);if("error"in t)throw new rE(t.error,"failed to get recent performance samples");return t.result}async getFeeCalculatorForBlockhash(e,t){let r=this._buildArgs([e],t),n=tc(await this._rpcRequest("getFeeCalculatorForBlockhash",r),ic);if("error"in n)throw new rE(n.error,"failed to get fee calculator");let{context:i,value:s}=n.result;return{context:i,value:null!==s?s.feeCalculator:null}}async getFeeForMessage(e,t){let r=t8(e.serialize()).toString("base64"),n=this._buildArgs([r],t),i=tc(await this._rpcRequest("getFeeForMessage",n),rX(tg(ty())));if("error"in i)throw new rE(i.error,"failed to get fee for message");if(null===i.result)throw Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(e){let t=e?.lockedWritableAccounts?.map(e=>e.toBase58()),r=t?.length?[t]:[],n=tc(await this._rpcRequest("getRecentPrioritizationFees",r),nc);if("error"in n)throw new rE(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(e){throw Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(e){throw Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(e){let{commitment:t,config:r}=rH(e),n=this._buildArgs([],t,void 0,r),i=tc(await this._rpcRequest("getLatestBlockhash",n),is);if("error"in i)throw new rE(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(e,t){let{commitment:r,config:n}=rH(t),i=this._buildArgs([e],r,void 0,n),s=tc(await this._rpcRequest("isBlockhashValid",i),io);if("error"in s)throw new rE(s.error,"failed to determine if the blockhash `"+e+"`is valid");return s.result}async getVersion(){let e=tc(await this._rpcRequest("getVersion",[]),rJ(nt));if("error"in e)throw new rE(e.error,"failed to get version");return e.result}async getGenesisHash(){let e=tc(await this._rpcRequest("getGenesisHash",[]),rJ(tw()));if("error"in e)throw new rE(e.error,"failed to get genesis hash");return e.result}async getBlock(e,t){let{commitment:r,config:n}=rH(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{let e=tc(s,n4);if("error"in e)throw e.error;return e.result}case"none":{let e=tc(s,n5);if("error"in e)throw e.error;return e.result}default:{let e=tc(s,n6);if("error"in e)throw e.error;let{result:t}=e;return t?{...t,transactions:t.transactions.map(({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:r0(r,e.message)},version:r}))}:null}}}catch(e){throw new rE(e,"failed to get confirmed block")}}async getParsedBlock(e,t){let{commitment:r,config:n}=rH(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{let e=tc(s,n7);if("error"in e)throw e.error;return e.result}case"none":{let e=tc(s,n9);if("error"in e)throw e.error;return e.result}default:{let e=tc(s,n3);if("error"in e)throw e.error;return e.result}}}catch(e){throw new rE(e,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){let{commitment:n,...i}=e;r=n,t=i}let n=this._buildArgs([],r,"base64",t),i=tc(await this._rpcRequest("getBlockProduction",n),ns);if("error"in i)throw new rE(i.error,"failed to get block production information");return i.result}async getTransaction(e,t){let{commitment:r,config:n}=rH(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),s=tc(await this._rpcRequest("getTransaction",i),ir);if("error"in s)throw new rE(s.error,"failed to get transaction");let o=s.result;return o?{...o,transaction:{...o.transaction,message:r0(o.version,o.transaction.message)}}:o}async getParsedTransaction(e,t){let{commitment:r,config:n}=rH(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),s=tc(await this._rpcRequest("getTransaction",i),ii);if("error"in s)throw new rE(s.error,"failed to get transaction");return s.result}async getParsedTransactions(e,t){let{commitment:r,config:n}=rH(t),i=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n)}));return(await this._rpcBatchRequest(i)).map(e=>{let t=tc(e,ii);if("error"in t)throw new rE(t.error,"failed to get transactions");return t.result})}async getTransactions(e,t){let{commitment:r,config:n}=rH(t),i=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,void 0,n)}));return(await this._rpcBatchRequest(i)).map(e=>{let t=tc(e,ir);if("error"in t)throw new rE(t.error,"failed to get transactions");let r=t.result;return r?{...r,transaction:{...r.transaction,message:r0(r.version,r.transaction.message)}}:r})}async getConfirmedBlock(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),n=tc(await this._rpcRequest("getBlock",r),ie);if("error"in n)throw new rE(n.error,"failed to get confirmed block");let i=n.result;if(!i)throw Error("Confirmed block "+e+" not found");let s={...i,transactions:i.transactions.map(({transaction:e,meta:t})=>{let r=new rd(e.message);return{meta:t,transaction:{...e,message:r}}})};return{...s,transactions:s.transactions.map(({transaction:e,meta:t})=>({meta:t,transaction:rm.populate(e.message,e.signatures)}))}}async getBlocks(e,t,r){let n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=tc(await this._rpcRequest("getBlocks",n),rJ(td(ty())));if("error"in i)throw new rE(i.error,"failed to get blocks");return i.result}async getBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=tc(await this._rpcRequest("getBlock",r),it);if("error"in n)throw new rE(n.error,"failed to get block");let i=n.result;if(!i)throw Error("Block "+e+" not found");return i}async getConfirmedBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=tc(await this._rpcRequest("getBlock",r),it);if("error"in n)throw new rE(n.error,"failed to get confirmed block");let i=n.result;if(!i)throw Error("Confirmed block "+e+" not found");return i}async getConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),n=tc(await this._rpcRequest("getTransaction",r),ir);if("error"in n)throw new rE(n.error,"failed to get transaction");let i=n.result;if(!i)return i;let s=new rd(i.transaction.message),o=i.transaction.signatures;return{...i,transaction:rm.populate(s,o)}}async getParsedConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=tc(await this._rpcRequest("getTransaction",r),ii);if("error"in n)throw new rE(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(e,t){let r=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(e=>{let t=tc(e,ii);if("error"in t)throw new rE(t.error,"failed to get confirmed transactions");return t.result})}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--t<=0)&&!(t<i);)try{let e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let s=await this.getSlot("finalized");for(;!("before"in n)&&!(++r>s);)try{let e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}return(await this.getConfirmedSignaturesForAddress2(e,n)).map(e=>e.signature)}async getConfirmedSignaturesForAddress2(e,t,r){let n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=tc(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),nI);if("error"in i)throw new rE(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(e,t,r){let n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=tc(await this._rpcRequest("getSignaturesForAddress",n),nA);if("error"in i)throw new rE(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(e,t){let{context:r,value:n}=await this.getAccountInfoAndContext(e,t),i=null;return null!==n&&(i=new rF({key:e,state:rF.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(e,t){let{context:r,value:n}=await this.getAccountInfoAndContext(e,t),i=null;return null!==n&&(i=rP.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(e=>e.value).catch(t=>{throw Error("failed to get nonce for account "+e.toBase58()+": "+t)})}async requestAirdrop(e,t){let r=tc(await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),iu);if("error"in r)throw new rE(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await rI(100);let e=Date.now()-this._blockhashInfo.lastFetch;if(null!==this._blockhashInfo.latestBlockhash&&!(e>=3e4))return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let e=0;e<50;e++){let e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await rI(200)}throw Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){let{commitment:t,config:r}=rH(e),n=this._buildArgs([],t,"base64",r),i=tc(await this._rpcRequest("getStakeMinimumDelegation",n),rX(ty()));if("error"in i)throw new rE(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(e,t,r){let n;if("message"in e){let n=e.serialize(),i=l.Buffer.from(n).toString("base64");if(Array.isArray(t)||void 0!==r)throw Error("Invalid arguments");let s=t||{};s.encoding="base64","commitment"in s||(s.commitment=this.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(s.innerInstructions=t.innerInstructions);let o=[i,s],a=tc(await this._rpcRequest("simulateTransaction",o),ni);if("error"in a)throw Error("failed to simulate transaction: "+a.error.message);return a.result}if(e instanceof rm?((n=new rm).feePayer=e.feePayer,n.instructions=e.instructions,n.nonceInfo=e.nonceInfo,n.signatures=e.signatures):(n=rm.populate(e))._message=n._json=void 0,void 0!==t&&!Array.isArray(t))throw Error("Invalid arguments");if(n.nonceInfo&&t)n.sign(...t);else{let e=this._disableBlockhashCaching;for(;;){let r=await this._blockhashWithExpiryBlockHeight(e);if(n.lastValidBlockHeight=r.lastValidBlockHeight,n.recentBlockhash=r.blockhash,!t)break;if(n.sign(...t),!n.signature)throw Error("!signature");let i=n.signature.toString("base64");if(this._blockhashInfo.simulatedSignatures.includes(i)||this._blockhashInfo.transactionSignatures.includes(i))e=!0;else{this._blockhashInfo.simulatedSignatures.push(i);break}}}let i=n._compile(),s=i.serialize(),o=n._serialize(s).toString("base64"),a={encoding:"base64",commitment:this.commitment};r&&(a.accounts={encoding:"base64",addresses:(Array.isArray(r)?r:i.nonProgramIds()).map(e=>e.toBase58())}),t&&(a.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(a.innerInstructions=t.innerInstructions);let c=[o,a],u=tc(await this._rpcRequest("simulateTransaction",c),ni);if("error"in u){let e;if("data"in u.error&&(e=u.error.data.logs)&&Array.isArray(e)){let t="\n    ",r=t+e.join(t);console.error(u.error.message,r)}throw new rB({action:"simulate",signature:"",transactionMessage:u.error.message,logs:e})}return u.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw Error("Invalid arguments");let r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw Error("Invalid arguments");if(e.nonceInfo)e.sign(...t);else{let r=this._disableBlockhashCaching;for(;;){let n=await this._blockhashWithExpiryBlockHeight(r);if(e.lastValidBlockHeight=n.lastValidBlockHeight,e.recentBlockhash=n.blockhash,e.sign(...t),!e.signature)throw Error("!signature");let i=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(i))r=!0;else{this._blockhashInfo.transactionSignatures.push(i);break}}}let n=e.serialize();return await this.sendRawTransaction(n,r)}async sendRawTransaction(e,t){let r=t8(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){let r={encoding:"base64"},n=t&&t.skipPreflight,i=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);let s=[e,r],o=tc(await this._rpcRequest("sendTransaction",s),il);if("error"in o){let e;throw"data"in o.error&&(e=o.error.data.logs),new rB({action:n?"send":"simulate",signature:"",transactionMessage:o.error.message,logs:e})}return o.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3===e)?this._updateSubscriptions():(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,t])=>{this._setSubscription(e,{...t,state:"pending"})}))}_setSubscription(e,t){let r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){let r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach(e=>{try{e(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){let r=this._subscriptionHashByClientSubscriptionId[e];if(null==r)return()=>{};let n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(t),()=>{n.delete(t),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}},500));return}if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();let e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async e=>{let r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size){delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],await this._updateSubscriptions();return}await (async()=>{let{args:n,method:i}=r;try{this._setSubscription(e,{...r,state:"subscribing"});let t=await this._rpcWebSocket.call(i,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(s){if(console.error(`Received ${s instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:s}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await (async()=>{let{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!t())return;this._setSubscription(e,{...r,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}}))}_handleServerNotification(e,t){let r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach(e=>{try{e(...t)}catch(e){console.error(e)}})}_wsOnAccountNotification(e){let{result:t,subscription:r}=tc(e,n_);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){let r=this._nextClientSubscriptionId++,n=rq([e.method,t]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];let t=this._subscriptionsByHash[n];ro(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){let{commitment:n,config:i}=rH(r),s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){let{result:t,subscription:r}=tc(e,nO);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){let{commitment:i,config:s}=rH(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s||(n?{filters:rZ(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){let n=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){let{result:t,subscription:r}=tc(e,ih);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){let{result:t,subscription:r}=tc(e,nR);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){let{result:t,subscription:r}=tc(e,nL);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){let i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){let i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){let{result:t,subscription:r}=tc(e,nU);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){let n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch(e){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){let{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([e],n,void 0,i),o=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(o)}catch(e){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){let{result:t,subscription:r}=tc(e,nq);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class iy{constructor(e){this._keypair=void 0,this._keypair=e??tX()}static generate(){return new iy(tX())}static fromSecretKey(e,t){if(64!==e.byteLength)throw Error("bad secret key size");let r=e.slice(32,64);if(!t||!t.skipValidation){let t=tQ(e.slice(0,32));for(let e=0;e<32;e++)if(r[e]!==t[e])throw Error("provided secretKey is invalid")}return new iy({publicKey:r,secretKey:e})}static fromSeed(e){let t=tQ(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new iy({publicKey:t,secretKey:r})}get publicKey(){return new t3(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:e5.struct([e5.u32("instruction"),rR("recentSlot"),e5.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:e5.struct([e5.u32("instruction")])},ExtendLookupTable:{index:2,layout:e5.struct([e5.u32("instruction"),rR(),e5.seq(rr(),e5.offset(e5.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:e5.struct([e5.u32("instruction")])},CloseLookupTable:{index:4,layout:e5.struct([e5.u32("instruction")])}}),new t3("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:e5.struct([e5.u8("instruction"),e5.u32("units"),e5.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:e5.struct([e5.u8("instruction"),e5.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:e5.struct([e5.u8("instruction"),e5.u32("units")])},SetComputeUnitPrice:{index:3,layout:e5.struct([e5.u8("instruction"),rR("microLamports")])}}),new t3("ComputeBudget111111111111111111111111111111");let im=e5.struct([e5.u8("numSignatures"),e5.u8("padding"),e5.u16("signatureOffset"),e5.u16("signatureInstructionIndex"),e5.u16("publicKeyOffset"),e5.u16("publicKeyInstructionIndex"),e5.u16("messageDataOffset"),e5.u16("messageDataSize"),e5.u16("messageInstructionIndex")]);class ib{static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:n,instructionIndex:i}=e;ro(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),ro(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);let s=im.span,o=s+t.length,a=o+n.length,c=l.Buffer.alloc(a+r.length),u=null==i?65535:i;return im.encode({numSignatures:1,padding:0,signatureOffset:o,signatureInstructionIndex:u,publicKeyOffset:s,publicKeyInstructionIndex:u,messageDataOffset:a,messageDataSize:r.length,messageInstructionIndex:u},c),c.fill(t,s),c.fill(n,o),c.fill(r,a),new ry({keys:[],programId:ib.programId,data:c})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:n}=e;ro(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{let e=iy.fromSecretKey(t),i=e.publicKey.toBytes(),s=t1(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(e){throw Error(`Error creating instruction; ${e}`)}}}ib.programId=new t3("Ed25519SigVerify111111111111111111111111111"),tG.utils.isValidPrivateKey;let iw=tG.getPublicKey,iv=e5.struct([e5.u8("numSignatures"),e5.u16("signatureOffset"),e5.u8("signatureInstructionIndex"),e5.u16("ethAddressOffset"),e5.u8("ethAddressInstructionIndex"),e5.u16("messageDataOffset"),e5.u16("messageDataSize"),e5.u8("messageInstructionIndex"),e5.blob(20,"ethAddress"),e5.blob(64,"signature"),e5.u8("recoveryId")]);class iS{static publicKeyToEthAddress(e){ro(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return l.Buffer.from((0,tO.keccak_256)(t8(e))).slice(-20)}catch(e){throw Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:s}=e;return iS.createInstructionWithEthAddress({ethAddress:iS.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(e){let t,{ethAddress:r,message:n,signature:i,recoveryId:s,instructionIndex:o=0}=e;ro(20===(t="string"==typeof r?r.startsWith("0x")?l.Buffer.from(r.substr(2),"hex"):l.Buffer.from(r,"hex"):r).length,`Address must be 20 bytes but received ${t.length} bytes`);let a=12+t.length,c=a+i.length+1,u=l.Buffer.alloc(iv.span+n.length);return iv.encode({numSignatures:1,signatureOffset:a,signatureInstructionIndex:o,ethAddressOffset:12,ethAddressInstructionIndex:o,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:o,signature:t8(i),ethAddress:t8(t),recoveryId:s},u),u.fill(t8(n),iv.span),new ry({keys:[],programId:iS.programId,data:u})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:n}=e;ro(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{var i;let e,s=t8(t),o=iw(s,!1).slice(1),[a,c]=(i=l.Buffer.from((0,tO.keccak_256)(t8(r))),[(e=tG.sign(i,s)).toCompactRawBytes(),e.recovery]);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:a,recoveryId:c,instructionIndex:n})}catch(e){throw Error(`Error creating instruction; ${e}`)}}}iS.programId=new t3("KeccakSecp256k11111111111111111111111111111");let ik=new t3("StakeConfig11111111111111111111111111111111");class iB{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}iB.default=new iB(0,0,t3.default);let iE=Object.freeze({Initialize:{index:0,layout:e5.struct([e5.u32("instruction"),((e="authorized")=>e5.struct([rr("staker"),rr("withdrawer")],e))(),((e="lockup")=>e5.struct([e5.ns64("unixTimestamp"),e5.ns64("epoch"),rr("custodian")],e))()])},Authorize:{index:1,layout:e5.struct([e5.u32("instruction"),rr("newAuthorized"),e5.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:e5.struct([e5.u32("instruction")])},Split:{index:3,layout:e5.struct([e5.u32("instruction"),e5.ns64("lamports")])},Withdraw:{index:4,layout:e5.struct([e5.u32("instruction"),e5.ns64("lamports")])},Deactivate:{index:5,layout:e5.struct([e5.u32("instruction")])},Merge:{index:7,layout:e5.struct([e5.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:e5.struct([e5.u32("instruction"),rr("newAuthorized"),e5.u32("stakeAuthorizationType"),rn("authoritySeed"),rr("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ix{static initialize(e){let{stakePubkey:t,authorized:r,lockup:n}=e,i=n||iB.default,s=rA(iE.Initialize,{authorized:{staker:t8(r.staker.toBuffer()),withdrawer:t8(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:t8(i.custodian.toBuffer())}});return new ry({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rS,isSigner:!1,isWritable:!1}],programId:this.programId,data:s})}static createAccountWithSeed(e){let t=new rm;t.add(rL.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){let t=new rm;t.add(rL.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=rA(iE.Delegate);return new rm().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:rw,isSigner:!1,isWritable:!1},{pubkey:rk,isSigner:!1,isWritable:!1},{pubkey:ik,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){let{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=e,o=rA(iE.Authorize,{newAuthorized:t8(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rw,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!0,isWritable:!1}),new rm().add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=e,c=rA(iE.AuthorizeWithSeed,{newAuthorized:t8(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:t8(i.toBuffer())}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:rw,isSigner:!1,isWritable:!1}];return a&&u.push({pubkey:a,isSigner:!0,isWritable:!1}),new rm().add({keys:u,programId:this.programId,data:c})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,s=rA(iE.Split,{lamports:i});return new ry({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static split(e,t){let r=new rm;return r.add(rL.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=e,c=new rm;return c.add(rL.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),t&&t>0&&c.add(rL.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=rA(iE.Merge);return new rm().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:rw,isSigner:!1,isWritable:!1},{pubkey:rk,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=e,o=rA(iE.Withdraw,{lamports:i}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:rw,isSigner:!1,isWritable:!1},{pubkey:rk,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!0,isWritable:!1}),new rm().add({keys:a,programId:this.programId,data:o})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:r}=e,n=rA(iE.Deactivate);return new rm().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rw,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}ix.programId=new t3("Stake11111111111111111111111111111111111111"),ix.space=200;let iI=Object.freeze({InitializeAccount:{index:0,layout:e5.struct([e5.u32("instruction"),((e="voteInit")=>e5.struct([rr("nodePubkey"),rr("authorizedVoter"),rr("authorizedWithdrawer"),e5.u8("commission")],e))()])},Authorize:{index:1,layout:e5.struct([e5.u32("instruction"),rr("newAuthorized"),e5.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:e5.struct([e5.u32("instruction"),e5.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:e5.struct([e5.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:e5.struct([e5.u32("instruction"),((e="voteAuthorizeWithSeedArgs")=>e5.struct([e5.u32("voteAuthorizationType"),rr("currentAuthorityDerivedKeyOwnerPubkey"),rn("currentAuthorityDerivedKeySeed"),rr("newAuthorized")],e))()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class iA{static initializeAccount(e){let{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=rA(iI.InitializeAccount,{voteInit:{nodePubkey:t8(n.nodePubkey.toBuffer()),authorizedVoter:t8(n.authorizedVoter.toBuffer()),authorizedWithdrawer:t8(n.authorizedWithdrawer.toBuffer()),commission:n.commission}});return new ry({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rS,isSigner:!1,isWritable:!1},{pubkey:rw,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static createAccount(e){let t=new rm;return t.add(rL.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,s=rA(iI.Authorize,{newAuthorized:t8(n.toBuffer()),voteAuthorizationType:i.index});return new rm().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:rw,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=e,a=rA(iI.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t8(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:t8(i.toBuffer()),voteAuthorizationType:s.index}});return new rm().add({keys:[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:rw,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,s=rA(iI.Withdraw,{lamports:n});return new rm().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw Error("Withdraw will leave vote account with insufficient funds.");return iA.withdraw(e)}static updateValidatorIdentity(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,i=rA(iI.UpdateValidatorIdentity);return new rm().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}iA.programId=new t3("Vote111111111111111111111111111111111111111"),iA.space=3762,new t3("Va1idator1nfo111111111111111111111111111111"),tS({name:tw(),website:tm(tw()),details:tm(tw()),iconUrl:tm(tw()),keybaseUsername:tm(tw())}),new t3("Vote111111111111111111111111111111111111111"),e5.struct([rr("nodePubkey"),rr("authorizedWithdrawer"),e5.u8("commission"),e5.nu64(),e5.seq(e5.struct([e5.nu64("slot"),e5.u32("confirmationCount")]),e5.offset(e5.u32(),-8),"votes"),e5.u8("rootSlotValid"),e5.nu64("rootSlot"),e5.nu64(),e5.seq(e5.struct([e5.nu64("epoch"),rr("authorizedVoter")]),e5.offset(e5.u32(),-8),"authorizedVoters"),e5.struct([e5.seq(e5.struct([rr("authorizedPubkey"),e5.nu64("epochOfLastAuthorizedSwitch"),e5.nu64("targetEpoch")]),32,"buf"),e5.nu64("idx"),e5.u8("isEmpty")],"priorVoters"),e5.nu64(),e5.seq(e5.struct([e5.nu64("epoch"),e5.nu64("credits"),e5.nu64("prevCredits")]),e5.offset(e5.u32(),-8),"epochCredits"),e5.struct([e5.nu64("slot"),e5.nu64("timestamp")],"lastTimestamp")]),e.s(["Connection",()=>ig,"Keypair",()=>iy,"LAMPORTS_PER_SOL",()=>1e9,"PublicKey",()=>t3,"Transaction",()=>rm,"VersionedMessage",()=>rh,"VersionedTransaction",()=>rb],27261)}]);