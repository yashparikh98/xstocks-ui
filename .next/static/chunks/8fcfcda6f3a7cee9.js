(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84642,e=>{"use strict";let t=(e=>{if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let n=0;n<e.length;n++){let r=e.charAt(n),i=r.charCodeAt(0);if(255!==t[i])throw TypeError(`${r} is ambiguous`);t[i]=n}let n=e.length,r=e.charAt(0),i=Math.log(n)/Math.log(256),a=Math.log(256)/Math.log(n);function s(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let a=0,s=0,o=0;for(;e[a]===r;)s++,a++;let c=(e.length-a)*i+1>>>0,l=new Uint8Array(c);for(;e[a];){let r=t[e.charCodeAt(a)];if(255===r)return;let i=0;for(let e=c-1;(0!==r||i<o)&&-1!==e;e--,i++)r+=n*l[e]>>>0,l[e]=r%256>>>0,r=r/256>>>0;if(0!==r)throw Error("Non-zero carry");o=i,a++}let d=c-o;for(;d!==c&&0===l[d];)d++;let h=new Uint8Array(s+(c-d)),u=s;for(;d!==c;)h[u++]=l[d++];return h}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,s=0,o=0,c=t.length;for(;o!==c&&0===t[o];)o++,i++;let l=(c-o)*a+1>>>0,d=new Uint8Array(l);for(;o!==c;){let e=t[o],r=0;for(let t=l-1;(0!==e||r<s)&&-1!==t;t--,r++)e+=256*d[t]>>>0,d[t]=e%n>>>0,e=e/n>>>0;if(0!==e)throw Error("Non-zero carry");s=r,o++}let h=l-s;for(;h!==l&&0===d[h];)h++;let u=r.repeat(i);for(;h<l;++h)u+=e.charAt(d[h]);return u},decodeUnsafe:s,decode:function(e){let t=s(e);if(t)return t;throw Error(`Non-base${n} character`)}}})("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");e.s(["bs58",()=>t])},23020,e=>{"use strict";var t=e.i(32984),n=e.i(71488);function r(e){let{chainId:t}=e;return(0,n.mergeMiddleware)([(e,n,r,i)=>"solana_chainId"===e.method?(n.result=t,i()):r(),(t,n,r,i)=>"solana_provider_config"===t.method?(n.result=e,i()):r()])}function i(e){let{rpcTarget:i}=e,a=(0,t.createFetchMiddleware)({rpcTarget:i});return{networkMiddleware:(0,n.mergeMiddleware)([r(e),a]),fetchMiddleware:a}}e.s(["createConfigMiddleware",()=>r,"createSolanaJsonRpcClient",()=>i])},31168,e=>{"use strict";var t=e.i(3589),n=e.i(71488),r=e.i(65273);function i(e,n){return(0,t.createAsyncMiddleware)(async(t,r,i)=>{let{method:a}=t;if(a!==e)return i();if(!n)throw Error(`WalletMiddleware - ${e} not provided`);r.result=await n(t)})}function a(e){let{getAccounts:a,requestAccounts:s,signTransaction:o,signAndSendTransaction:c,signAllTransactions:l,signMessage:d,getPrivateKey:h,getSecretKey:u,getPublicKey:E}=e;return(0,n.mergeMiddleware)([function({requestAccounts:e}){return(0,t.createAsyncMiddleware)(async(t,n,i)=>{let{method:a}=t;if(a!==r.SOLANA_METHOD_TYPES.SOLANA_REQUEST_ACCOUNTS)return i();if(!e)throw Error("WalletMiddleware - opts.requestAccounts not provided");n.result=await e(t)})}({requestAccounts:s}),function({getAccounts:e}){return(0,t.createAsyncMiddleware)(async(t,n,i)=>{let{method:a}=t;if(a!==r.SOLANA_METHOD_TYPES.GET_ACCOUNTS)return i();if(!e)throw Error("WalletMiddleware - opts.getAccounts not provided");n.result=await e(t)})}({getAccounts:a}),i(r.SOLANA_METHOD_TYPES.SIGN_TRANSACTION,o),i(r.SOLANA_METHOD_TYPES.SEND_TRANSACTION,c),i(r.SOLANA_METHOD_TYPES.SIGN_ALL_TRANSACTIONS,l),i(r.SOLANA_METHOD_TYPES.SIGN_MESSAGE,d),i(r.SOLANA_METHOD_TYPES.SOLANA_PRIVATE_KEY,h),i(r.SOLANA_METHOD_TYPES.PRIVATE_KEY,h),i("public_key",E),i("solanaPublicKey",E),i("solanaSecretKey",u)])}e.s(["createSolanaMiddleware",()=>a])},85146,e=>{"use strict";var t=e.i(54507),n=e.i(69910),r=e.i(46937),i=e.i(22859);let a=e=>{let{chains:a,features:s}=e;return a.some(e=>e.startsWith("solana"))?!![i.StandardConnect,t.SolanaSignMessage,n.SolanaSignTransaction,r.SolanaSignAndSendTransaction].every(e=>Object.keys(s).includes(e)):void 0};e.s(["hasSolanaWalletStandardFeatures",()=>a],35436),e.i(35436);var s=e.i(66829),o=e.i(11577),c=e.i(73506),l=e.i(64527),d=e.i(65273),h=e.i(25390),u=e.i(69146),E=e.i(67888),T=e.i(23264);class S extends h.BaseConnector{async init(e){}async getIdentityToken(){if(!this.provider||!this.canAuthorize)throw u.WalletLoginError.notConnectedError();if(!this.coreOptions)throw u.WalletInitializationError.invalidParams("Please initialize Web3Auth with a valid options");this.status=E.CONNECTOR_STATUS.AUTHORIZING,this.emit(E.CONNECTOR_EVENTS.AUTHORIZING,{connector:this.name});let e=await this.provider.request({method:d.SOLANA_METHOD_TYPES.GET_ACCOUNTS});if(e&&e.length>0){let t=(0,T.getSavedToken)(e[0],this.name);if(t&&!(0,T.checkIfTokenIsExpired)(t))return this.status=E.CONNECTOR_STATUS.AUTHORIZED,this.emit(E.CONNECTOR_EVENTS.AUTHORIZED,{connector:this.name,identityTokenInfo:{idToken:t}}),{idToken:t};let n=await this.provider.request({method:"solana_chainId"}),r=this.coreOptions.chains.find(e=>e.chainId===n);if(!r)throw u.WalletInitializationError.invalidParams("chainConfig is required before authentication");let{chainNamespace:i}=r,a={domain:window.location.origin,uri:window.location.href,address:e[0],chainId:parseInt(n,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},s=await (0,l.signChallenge)(a,i),o=await this.provider.request({method:d.SOLANA_METHOD_TYPES.SIGN_MESSAGE,params:{data:s,display:"utf8"}}),c=await (0,l.verifySignedChallenge)(i,o,s,this.name,this.coreOptions.sessionTime,this.coreOptions.clientId,this.coreOptions.web3AuthNetwork);return(0,T.saveToken)(e[0],this.name,c),this.status=E.CONNECTOR_STATUS.AUTHORIZED,this.emit(E.CONNECTOR_EVENTS.AUTHORIZED,{connector:this.name,identityTokenInfo:{idToken:c}}),{idToken:c}}throw u.WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();let e=await this.provider.request({method:d.SOLANA_METHOD_TYPES.GET_ACCOUNTS});e&&e.length>0&&(0,T.clearToken)(e[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(E.CONNECTOR_EVENTS.DISCONNECTED)}}var g=e.i(67034),A=e.i(27261),N=e.i(84642),w=e.i(71488),f=e.i(23020),O=e.i(31168),y=e.i(61690);class p extends y.BaseProvider{constructor({config:e,state:t}){super({config:e,state:t})}async switchChain(e){throw u.WalletLoginError.unsupportedOperation("Chain switching is not supported by this connector")}async setupProvider(e,t){let n=new w.JRPCEngine,r=this.getChain(t),i=this.getProviderHandlers(e),a=(0,O.createSolanaMiddleware)(i);n.push(a);let s=(0,f.createConfigMiddleware)(r);n.push(s);let o=this.getInjectedProviderProxy(e);o&&n.push(o);let c=(0,w.providerFromEngine)(n);this.updateProviderEngineProxy(c),await this.lookupNetwork(e,t)}async lookupNetwork(e,t){return this.update({chainId:t}),t||""}getInjectedProviderProxy(e){}}var C=e.i(4521);let m=e=>{switch(e.chainId){case"0x65":return"solana:mainnet";case"0x66":return"solana:testnet";case"0x67":return"solana:devnet";default:return null}};class _ extends p{getProviderHandlers(e){var i;let a=m(this.config.chain),s=()=>{let t=null==e?void 0:e.accounts[0];if(!t)throw u.WalletLoginError.notConnectedError();return t};return i={get publicKey(){return new A.PublicKey(s().publicKey)},signMessage:async n=>{let r=s(),i=new Uint8Array(g.Buffer.from(n,"utf-8")),a=await e.features[t.SolanaSignMessage].signMessage({account:r,message:i});return N.bs58.encode(a[0].signature)},signTransaction:async t=>{let r=s(),i=await e.features[n.SolanaSignTransaction].signTransaction({account:r,transaction:new Uint8Array(g.Buffer.from(t,"base64")),chain:a});return N.bs58.encode(A.VersionedTransaction.deserialize(i[0].signedTransaction).signatures[0])},signAllTransactions:async t=>{let r=s();return Promise.all(t.map(async t=>{let i=await e.features[n.SolanaSignTransaction].signTransaction({account:r,transaction:new Uint8Array(g.Buffer.from(t,"base64")),chain:a});return g.Buffer.from(i[0].signedTransaction).toString("base64")}))},signAndSendTransaction:async t=>{let n=s(),i=await e.features[r.SolanaSignAndSendTransaction].signAndSendTransaction({account:n,transaction:new Uint8Array(g.Buffer.from(t,"base64")),chain:a});return N.bs58.encode(i[0].signature)}},{requestAccounts:async()=>i.publicKey?[N.bs58.encode(i.publicKey.toBytes())]:[],getPublicKey:async()=>i.publicKey?N.bs58.encode(i.publicKey.toBytes()):"",getAccounts:async()=>i.publicKey?[N.bs58.encode(i.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw C.rpcErrors.methodNotSupported()},getSecretKey:async()=>{throw C.rpcErrors.methodNotSupported()},signTransaction:async e=>await i.signTransaction(e.params.message),signMessage:async e=>await i.signMessage(e.params.data,e.params.from,e.params.display),signAllTransactions:async e=>{var t,n;if(!(null!=(t=e.params)&&t.message)||!(null!=(n=e.params)&&n.message.length))throw C.rpcErrors.invalidParams("message");return await i.signAllTransactions(e.params.message)},signAndSendTransaction:async e=>await i.signAndSendTransaction(e.params.message)}}}var R=e.i(24154),v=e.i(29871),I=e.i(79383),P=e.i(11810);class M extends S{constructor(e){super(e),(0,o.default)(this,"name",void 0),(0,o.default)(this,"connectorNamespace",v.CONNECTOR_NAMESPACES.SOLANA),(0,o.default)(this,"currentChainNamespace",I.CHAIN_NAMESPACES.SOLANA),(0,o.default)(this,"type",E.CONNECTOR_CATEGORY.EXTERNAL),(0,o.default)(this,"isInjected",!0),(0,o.default)(this,"status",E.CONNECTOR_STATUS.NOT_READY),(0,o.default)(this,"wallet",null),(0,o.default)(this,"injectedProvider",null),this.name=e.name,this.icon=e.wallet.icon,this.wallet=["gate","solflare"].includes(this.name)?Object.freeze(e.wallet):e.wallet}get provider(){return this.status!==E.CONNECTOR_STATUS.NOT_READY&&this.injectedProvider?this.injectedProvider:null}get isWalletConnected(){return!!(this.connected&&this.wallet.accounts.length>0)}async init(e){await super.init(e);let t=this.coreOptions.chains.find(t=>t.chainId===e.chainId);super.checkInitializationRequirements({chainConfig:t}),this.injectedProvider=new _({config:{chain:t,chains:this.coreOptions.chains}}),await this.injectedProvider.setupProvider(this.wallet,e.chainId),this.status=E.CONNECTOR_STATUS.READY,this.emit(E.CONNECTOR_EVENTS.READY,this.name);try{if(P.log.debug("initializing solana injected connector"),e.autoConnect&&(this.rehydrated=!0,!await this.connect({chainId:e.chainId,getIdentityToken:e.getIdentityToken})))throw this.rehydrated=!1,u.WalletLoginError.connectionError("Failed to rehydrate.")}catch(e){this.emit(E.CONNECTOR_EVENTS.REHYDRATION_ERROR,e)}}async connect({chainId:e,getIdentityToken:t}){try{let n;super.checkConnectionRequirements();let r=this.coreOptions.chains.find(t=>t.chainId===e);if(!r)throw u.WalletLoginError.connectionError("Chain config is not available");this.status=E.CONNECTOR_STATUS.CONNECTING,this.emit(E.CONNECTOR_EVENTS.CONNECTING,{connector:this.name});let a=m(r);if(!this.wallet.chains.find(e=>e===a))throw u.WalletLoginError.connectionError(`Chain ${a} not supported. Supported chains are ${this.wallet.chains.join(", ")}`);if(this.isWalletConnected||await this.wallet.features[i.StandardConnect].connect(),0===this.wallet.accounts.length)throw u.WalletLoginError.connectionError();return this.status=E.CONNECTOR_STATUS.CONNECTED,this.emit(E.CONNECTOR_EVENTS.CONNECTED,{connector:this.name,reconnected:this.rehydrated,provider:this.provider,identityTokenInfo:n}),t&&(n=await this.getIdentityToken()),this.provider}catch(e){throw this.status=E.CONNECTOR_STATUS.READY,this.rehydrated||this.emit(E.CONNECTOR_EVENTS.ERRORED,e),this.rehydrated=!1,e}}async disconnect(e={cleanup:!1}){await super.disconnectSession();try{var t;await (null==(t=this.wallet.features[c.StandardDisconnect])?void 0:t.disconnect()),e.cleanup?(this.status=E.CONNECTOR_STATUS.NOT_READY,this.injectedProvider=null):this.status=E.CONNECTOR_STATUS.READY,await super.disconnect()}catch(e){this.emit(E.CONNECTOR_EVENTS.ERRORED,u.WalletLoginError.disconnectionError(null==e?void 0:e.message))}}async getUserInfo(){if(!this.canAuthorize)throw u.WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async switchChain(e,t=!1){var n;super.checkSwitchChainRequirements(e,t),await (null==(n=this.injectedProvider)?void 0:n.switchChain(e))}async enableMFA(){throw Error("Method not implemented.")}async manageMFA(){throw Error("Method Not implemented")}}let b=e=>({coreOptions:t})=>new M({name:(0,R.normalizeWalletName)(e.name),wallet:e,coreOptions:t});e.s(["createSolanaMipd",()=>s.getWallets,"hasSolanaWalletStandardFeatures",()=>a,"walletStandardConnector",()=>b],85146)}]);