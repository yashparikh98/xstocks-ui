(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38750,(e,t,n)=>{t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},87201,(e,t,n)=>{let r,i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];n.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},n.getSymbolTotalCodewords=function(e){return i[e]},n.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},n.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');r=e},n.isKanjiModeEnabled=function(){return void 0!==r},n.toSJIS=function(e){return r(e)}},56835,(e,t,n)=>{n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2},n.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},n.from=function(e,t){if(n.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw Error("Unknown EC Level: "+e)}}catch(e){return t}}},73666,(e,t,n)=>{function r(){this.buffer=[],this.length=0}r.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},t.exports=r},11421,(e,t,n)=>{function r(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}r.prototype.set=function(e,t,n,r){let i=e*this.size+t;this.data[i]=n,r&&(this.reservedBit[i]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},t.exports=r},20637,(e,t,n)=>{let r=e.r(87201).getSymbolSize;n.getRowColCoords=function(e){if(1===e)return[];let t=Math.floor(e/7)+2,n=r(e),i=145===n?26:2*Math.ceil((n-13)/(2*t-2)),a=[n-7];for(let e=1;e<t-1;e++)a[e]=a[e-1]-i;return a.push(6),a.reverse()},n.getPositions=function(e){let t=[],r=n.getRowColCoords(e),i=r.length;for(let e=0;e<i;e++)for(let n=0;n<i;n++)(0!==e||0!==n)&&(0!==e||n!==i-1)&&(e!==i-1||0!==n)&&t.push([r[e],r[n]]);return t}},14002,(e,t,n)=>{let r=e.r(87201).getSymbolSize;n.getPositions=function(e){let t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},37692,(e,t,n)=>{n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};n.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},n.from=function(e){return n.isValid(e)?parseInt(e,10):void 0},n.getPenaltyN1=function(e){let t=e.size,n=0,r=0,i=0,a=null,o=null;for(let s=0;s<t;s++){r=i=0,a=o=null;for(let l=0;l<t;l++){let t=e.get(s,l);t===a?r++:(r>=5&&(n+=3+(r-5)),a=t,r=1),(t=e.get(l,s))===o?i++:(i>=5&&(n+=3+(i-5)),o=t,i=1)}r>=5&&(n+=3+(r-5)),i>=5&&(n+=3+(i-5))}return n},n.getPenaltyN2=function(e){let t=e.size,n=0;for(let r=0;r<t-1;r++)for(let i=0;i<t-1;i++){let t=e.get(r,i)+e.get(r,i+1)+e.get(r+1,i)+e.get(r+1,i+1);(4===t||0===t)&&n++}return 3*n},n.getPenaltyN3=function(e){let t=e.size,n=0,r=0,i=0;for(let a=0;a<t;a++){r=i=0;for(let o=0;o<t;o++)r=r<<1&2047|e.get(a,o),o>=10&&(1488===r||93===r)&&n++,i=i<<1&2047|e.get(o,a),o>=10&&(1488===i||93===i)&&n++}return 40*n},n.getPenaltyN4=function(e){let t=0,n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return 10*Math.abs(Math.ceil(100*t/n/5)-10)},n.applyMask=function(e,t){let r=t.size;for(let i=0;i<r;i++)for(let a=0;a<r;a++)t.isReserved(a,i)||t.xor(a,i,function(e,t,r){switch(e){case n.Patterns.PATTERN000:return(t+r)%2==0;case n.Patterns.PATTERN001:return t%2==0;case n.Patterns.PATTERN010:return r%3==0;case n.Patterns.PATTERN011:return(t+r)%3==0;case n.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case n.Patterns.PATTERN101:return t*r%2+t*r%3==0;case n.Patterns.PATTERN110:return(t*r%2+t*r%3)%2==0;case n.Patterns.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,a,i))},n.getBestMask=function(e,t){let r=Object.keys(n.Patterns).length,i=0,a=1/0;for(let o=0;o<r;o++){t(o),n.applyMask(o,e);let r=n.getPenaltyN1(e)+n.getPenaltyN2(e)+n.getPenaltyN3(e)+n.getPenaltyN4(e);n.applyMask(o,e),r<a&&(a=r,i=o)}return i}},48125,(e,t,n)=>{let r=e.r(56835),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];n.getBlocksCount=function(e,t){switch(t){case r.L:return i[(e-1)*4+0];case r.M:return i[(e-1)*4+1];case r.Q:return i[(e-1)*4+2];case r.H:return i[(e-1)*4+3];default:return}},n.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return a[(e-1)*4+0];case r.M:return a[(e-1)*4+1];case r.Q:return a[(e-1)*4+2];case r.H:return a[(e-1)*4+3];default:return}}},54232,(e,t,n)=>{let r=new Uint8Array(512),i=new Uint8Array(256),a=1;for(let e=0;e<255;e++)r[e]=a,i[a]=e,256&(a<<=1)&&(a^=285);for(let e=255;e<512;e++)r[e]=r[e-255];n.log=function(e){if(e<1)throw Error("log("+e+")");return i[e]},n.exp=function(e){return r[e]},n.mul=function(e,t){return 0===e||0===t?0:r[i[e]+i[t]]}},50677,(e,t,n)=>{let r=e.r(54232);n.mul=function(e,t){let n=new Uint8Array(e.length+t.length-1);for(let i=0;i<e.length;i++)for(let a=0;a<t.length;a++)n[i+a]^=r.mul(e[i],t[a]);return n},n.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){let e=n[0];for(let i=0;i<t.length;i++)n[i]^=r.mul(t[i],e);let i=0;for(;i<n.length&&0===n[i];)i++;n=n.slice(i)}return n},n.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let i=0;i<e;i++)t=n.mul(t,new Uint8Array([1,r.exp(i)]));return t}},62458,(e,t,n)=>{let r=e.r(50677);function i(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let n=r.mod(t,this.genPoly),i=this.degree-n.length;if(i>0){let e=new Uint8Array(this.degree);return e.set(n,i),e}return n},t.exports=i},67483,(e,t,n)=>{n.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},96592,(e,t,n)=>{let r="[0-9]+",i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",a="(?:(?![A-Z0-9 $%*+\\-./:]|"+(i=i.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";n.KANJI=RegExp(i,"g"),n.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),n.BYTE=RegExp(a,"g"),n.NUMERIC=RegExp(r,"g"),n.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");let o=RegExp("^"+i+"$"),s=RegExp("^"+r+"$"),l=RegExp("^[A-Z0-9 $%*+\\-./:]+$");n.testKanji=function(e){return o.test(e)},n.testNumeric=function(e){return s.test(e)},n.testAlphanumeric=function(e){return l.test(e)}},50882,(e,t,n)=>{let r=e.r(67483),i=e.r(96592);n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!r.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},n.getBestModeForData=function(e){return i.testNumeric(e)?n.NUMERIC:i.testAlphanumeric(e)?n.ALPHANUMERIC:i.testKanji(e)?n.KANJI:n.BYTE},n.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},n.isValid=function(e){return e&&e.bit&&e.ccBits},n.from=function(e,t){if(n.isValid(e))return e;try{if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw Error("Unknown mode: "+e)}}catch(e){return t}}},93547,(e,t,n)=>{let r=e.r(87201),i=e.r(48125),a=e.r(56835),o=e.r(50882),s=e.r(67483),l=r.getBCHDigit(7973);function c(e,t){return o.getCharCountIndicator(e,t)+4}n.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},n.getCapacity=function(e,t,n){if(!s.isValid(e))throw Error("Invalid QR Code version");void 0===n&&(n=o.BYTE);let a=(r.getSymbolTotalCodewords(e)-i.getTotalCodewordsCount(e,t))*8;if(n===o.MIXED)return a;let l=a-c(n,e);switch(n){case o.NUMERIC:return Math.floor(l/10*3);case o.ALPHANUMERIC:return Math.floor(l/11*2);case o.KANJI:return Math.floor(l/13);case o.BYTE:default:return Math.floor(l/8)}},n.getBestVersionForData=function(e,t){let r,i=a.from(t,a.M);if(Array.isArray(e)){if(e.length>1){for(let t=1;t<=40;t++)if(function(e,t){let n=0;return e.forEach(function(e){let r=c(e.mode,t);n+=r+e.getBitsLength()}),n}(e,t)<=n.getCapacity(t,i,o.MIXED))return t;return}if(0===e.length)return 1;r=e[0]}else r=e;return function(e,t,r){for(let i=1;i<=40;i++)if(t<=n.getCapacity(i,r,e))return i}(r.mode,r.getLength(),i)},n.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw Error("Invalid QR Code version");let t=e<<12;for(;r.getBCHDigit(t)-l>=0;)t^=7973<<r.getBCHDigit(t)-l;return e<<12|t}},57655,(e,t,n)=>{let r=e.r(87201),i=r.getBCHDigit(1335);n.getEncodedBits=function(e,t){let n=e.bit<<3|t,a=n<<10;for(;r.getBCHDigit(a)-i>=0;)a^=1335<<r.getBCHDigit(a)-i;return(n<<10|a)^21522}},94097,(e,t,n)=>{let r=e.r(50882);function i(e){this.mode=r.NUMERIC,this.data=e.toString()}i.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){let t,n;for(t=0;t+3<=this.data.length;t+=3)n=parseInt(this.data.substr(t,3),10),e.put(n,10);let r=this.data.length-t;r>0&&(n=parseInt(this.data.substr(t),10),e.put(n,3*r+1))},t.exports=i},12553,(e,t,n)=>{let r=e.r(50882),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(e){this.mode=r.ALPHANUMERIC,this.data=e}a.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*i.indexOf(this.data[t]);n+=i.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(i.indexOf(this.data[t]),6)},t.exports=a},82257,(e,t,n)=>{let r=e.r(50882);function i(e){this.mode=r.BYTE,"string"==typeof e?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}i.getBitsLength=function(e){return 8*e},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},t.exports=i},22644,(e,t,n)=>{let r=e.r(50882),i=e.r(87201);function a(e){this.mode=r.KANJI,this.data=e}a.getBitsLength=function(e){return 13*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=i.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n=(n>>>8&255)*192+(255&n),e.put(n,13)}},t.exports=a},45953,(e,t,n)=>{"use strict";var r={single_source_shortest_paths:function(e,t,n){var i,a,o,s,l,c,d,u={},h={};h[t]=0;var f=r.PriorityQueue.make();for(f.push(t,0);!f.empty();)for(o in a=(i=f.pop()).value,s=i.cost,l=e[a]||{})l.hasOwnProperty(o)&&(c=s+l[o],d=h[o],(void 0===h[o]||d>c)&&(h[o]=c,f.push(o,c),u[o]=a));if(void 0!==n&&void 0===h[n])throw Error("Could not find a path from "+t+" to "+n+".");return u},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var i=r.single_source_shortest_paths(e,t,n);return r.extract_shortest_path_from_predecessor_list(i,n)},PriorityQueue:{make:function(e){var t,n=r.PriorityQueue,i={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i.queue=[],i.sorter=e.sorter||n.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=r},97930,(e,t,n)=>{let r=e.r(50882),i=e.r(94097),a=e.r(12553),o=e.r(82257),s=e.r(22644),l=e.r(96592),c=e.r(87201),d=e.r(45953);function u(e){return unescape(encodeURIComponent(e)).length}function h(e,t,n){let r,i=[];for(;null!==(r=e.exec(n));)i.push({data:r[0],index:r.index,mode:t,length:r[0].length});return i}function f(e){let t,n,i=h(l.NUMERIC,r.NUMERIC,e),a=h(l.ALPHANUMERIC,r.ALPHANUMERIC,e);return c.isKanjiModeEnabled()?(t=h(l.BYTE,r.BYTE,e),n=h(l.KANJI,r.KANJI,e)):(t=h(l.BYTE_KANJI,r.BYTE,e),n=[]),i.concat(a,t,n).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function p(e,t){switch(t){case r.NUMERIC:return i.getBitsLength(e);case r.ALPHANUMERIC:return a.getBitsLength(e);case r.KANJI:return s.getBitsLength(e);case r.BYTE:return o.getBitsLength(e)}}function g(e,t){let n,l=r.getBestModeForData(e);if((n=r.from(t,l))!==r.BYTE&&n.bit<l.bit)throw Error('"'+e+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(l));switch(n===r.KANJI&&!c.isKanjiModeEnabled()&&(n=r.BYTE),n){case r.NUMERIC:return new i(e);case r.ALPHANUMERIC:return new a(e);case r.KANJI:return new s(e);case r.BYTE:return new o(e)}}n.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(g(t,null)):t.data&&e.push(g(t.data,t.mode)),e},[])},n.fromString=function(e,t){let i=function(e,t){let n={},i={start:{}},a=["start"];for(let o=0;o<e.length;o++){let s=e[o],l=[];for(let e=0;e<s.length;e++){let c=s[e],d=""+o+e;l.push(d),n[d]={node:c,lastCount:0},i[d]={};for(let e=0;e<a.length;e++){let o=a[e];n[o]&&n[o].node.mode===c.mode?(i[o][d]=p(n[o].lastCount+c.length,c.mode)-p(n[o].lastCount,c.mode),n[o].lastCount+=c.length):(n[o]&&(n[o].lastCount=c.length),i[o][d]=p(c.length,c.mode)+4+r.getCharCountIndicator(c.mode,t))}}a=l}for(let e=0;e<a.length;e++)i[a[e]].end=0;return{map:i,table:n}}(function(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n];switch(i.mode){case r.NUMERIC:t.push([i,{data:i.data,mode:r.ALPHANUMERIC,length:i.length},{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.ALPHANUMERIC:t.push([i,{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.KANJI:t.push([i,{data:i.data,mode:r.BYTE,length:u(i.data)}]);break;case r.BYTE:t.push([{data:i.data,mode:r.BYTE,length:u(i.data)}])}}return t}(f(e,c.isKanjiModeEnabled())),t),a=d.find_path(i.map,"start","end"),o=[];for(let e=1;e<a.length-1;e++)o.push(i.table[a[e]].node);return n.fromArray(o.reduce(function(e,t){let n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},n.rawSplit=function(e){return n.fromArray(f(e,c.isKanjiModeEnabled()))}},30671,(e,t,n)=>{let r=e.r(87201),i=e.r(56835),a=e.r(73666),o=e.r(11421),s=e.r(20637),l=e.r(14002),c=e.r(37692),d=e.r(48125),u=e.r(62458),h=e.r(93547),f=e.r(57655),p=e.r(50882),g=e.r(97930);function m(e,t,n){let r,i,a=e.size,o=f.getEncodedBits(t,n);for(r=0;r<15;r++)i=(o>>r&1)==1,r<6?e.set(r,8,i,!0):r<8?e.set(r+1,8,i,!0):e.set(a-15+r,8,i,!0),r<8?e.set(8,a-r-1,i,!0):r<9?e.set(8,15-r-1+1,i,!0):e.set(8,15-r-1,i,!0);e.set(a-8,8,1,!0)}n.create=function(e,t){let n,f;if(void 0===e||""===e)throw Error("No input text");let w=i.M;return void 0!==t&&(w=i.from(t.errorCorrectionLevel,i.M),n=h.from(t.version),f=c.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),function(e,t,n,i){let f;if(Array.isArray(e))f=g.fromArray(e);else if("string"==typeof e){let r=t;if(!r){let t=g.rawSplit(e);r=h.getBestVersionForData(t,n)}f=g.fromString(e,r||40)}else throw Error("Invalid data");let w=h.getBestVersionForData(f,n);if(!w)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<w)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+w+".\n")}else t=w;let y=function(e,t,n){let i=new a;n.forEach(function(t){i.put(t.mode.bit,4),i.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(i)});let o=(r.getSymbolTotalCodewords(e)-d.getTotalCodewordsCount(e,t))*8;for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(0);let s=(o-i.getLengthInBits())/8;for(let e=0;e<s;e++)i.put(e%2?17:236,8);return function(e,t,n){let i,a,o=r.getSymbolTotalCodewords(t),s=o-d.getTotalCodewordsCount(t,n),l=d.getBlocksCount(t,n),c=o%l,h=l-c,f=Math.floor(o/l),p=Math.floor(s/l),g=p+1,m=f-p,w=new u(m),y=0,v=Array(l),b=Array(l),E=0,C=new Uint8Array(e.buffer);for(let e=0;e<l;e++){let t=e<h?p:g;v[e]=C.slice(y,y+t),b[e]=w.encode(v[e]),y+=t,E=Math.max(E,t)}let x=new Uint8Array(o),S=0;for(i=0;i<E;i++)for(a=0;a<l;a++)i<v[a].length&&(x[S++]=v[a][i]);for(i=0;i<m;i++)for(a=0;a<l;a++)x[S++]=b[a][i];return x}(i,e,t)}(t,n,f),v=new o(r.getSymbolSize(t));!function(e,t){let n=e.size,r=l.getPositions(t);for(let t=0;t<r.length;t++){let i=r[t][0],a=r[t][1];for(let t=-1;t<=7;t++)if(!(i+t<=-1)&&!(n<=i+t))for(let r=-1;r<=7;r++)a+r<=-1||n<=a+r||(t>=0&&t<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===t||6===t)||t>=2&&t<=4&&r>=2&&r<=4?e.set(i+t,a+r,!0,!0):e.set(i+t,a+r,!1,!0))}}(v,t);let b=v.size;for(let e=8;e<b-8;e++){let t=e%2==0;v.set(e,6,t,!0),v.set(6,e,t,!0)}return!function(e,t){let n=s.getPositions(t);for(let t=0;t<n.length;t++){let r=n[t][0],i=n[t][1];for(let t=-2;t<=2;t++)for(let n=-2;n<=2;n++)-2===t||2===t||-2===n||2===n||0===t&&0===n?e.set(r+t,i+n,!0,!0):e.set(r+t,i+n,!1,!0)}}(v,t),m(v,n,0),t>=7&&function(e,t){let n,r,i,a=e.size,o=h.getEncodedBits(t);for(let t=0;t<18;t++)n=Math.floor(t/3),r=t%3+a-8-3,i=(o>>t&1)==1,e.set(n,r,i,!0),e.set(r,n,i,!0)}(v,t),!function(e,t){let n=e.size,r=-1,i=n-1,a=7,o=0;for(let s=n-1;s>0;s-=2)for(6===s&&s--;;){for(let n=0;n<2;n++)if(!e.isReserved(i,s-n)){let r=!1;o<t.length&&(r=(t[o]>>>a&1)==1),e.set(i,s-n,r),-1==--a&&(o++,a=7)}if((i+=r)<0||n<=i){i-=r,r=-r;break}}}(v,y),isNaN(i)&&(i=c.getBestMask(v,m.bind(null,v,n))),c.applyMask(i,v),m(v,n,i),{modules:v,version:t,errorCorrectionLevel:n,maskPattern:i,segments:f}}(e,n,w,f)}},25950,(e,t,n)=>{function r(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");let n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}n.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:n,scale:n?4:i,margin:t,color:{dark:r(e.color.dark||"#000000ff"),light:r(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},n.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},n.getImageWidth=function(e,t){let r=n.getScale(e,t);return Math.floor((e+2*t.margin)*r)},n.qrToImageData=function(e,t,r){let i=t.modules.size,a=t.modules.data,o=n.getScale(i,r),s=Math.floor((i+2*r.margin)*o),l=r.margin*o,c=[r.color.light,r.color.dark];for(let t=0;t<s;t++)for(let n=0;n<s;n++){let d=(t*s+n)*4,u=r.color.light;t>=l&&n>=l&&t<s-l&&n<s-l&&(u=c[+!!a[Math.floor((t-l)/o)*i+Math.floor((n-l)/o)]]),e[d++]=u.r,e[d++]=u.g,e[d++]=u.b,e[d]=u.a}}},63037,(e,t,n)=>{let r=e.r(25950);n.render=function(e,t,n){var i;let a=n,o=t;void 0!==a||t&&t.getContext||(a=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),a=r.getOptions(a);let s=r.getImageWidth(e.modules.size,a),l=o.getContext("2d"),c=l.createImageData(s,s);return r.qrToImageData(c.data,e,a),i=o,l.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=s,i.width=s,i.style.height=s+"px",i.style.width=s+"px",l.putImageData(c,0,0),o},n.renderToDataURL=function(e,t,r){let i=r;void 0!==i||t&&t.getContext||(i=t,t=void 0),i||(i={});let a=n.render(e,t,i),o=i.type||"image/png",s=i.rendererOpts||{};return a.toDataURL(o,s.quality)}},10891,(e,t,n)=>{let r=e.r(25950);function i(e,t){let n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function a(e,t,n){let r=e+t;return void 0!==n&&(r+=" "+n),r}n.render=function(e,t,n){let o=r.getOptions(t),s=e.modules.size,l=e.modules.data,c=s+2*o.margin,d=o.color.light.a?"<path "+i(o.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",u="<path "+i(o.color.dark,"stroke")+' d="'+function(e,t,n){let r="",i=0,o=!1,s=0;for(let l=0;l<e.length;l++){let c=Math.floor(l%t),d=Math.floor(l/t);c||o||(o=!0),e[l]?(s++,l>0&&c>0&&e[l-1]||(r+=o?a("M",c+n,.5+d+n):a("m",i,0),i=0,o=!1),c+1<t&&e[l+1]||(r+=a("h",s),s=0)):i++}return r}(l,s,o.margin)+'"/>',h='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+('viewBox="0 0 '+c+" ")+c+'" shape-rendering="crispEdges">'+d+u+"</svg>\n";return"function"==typeof n&&n(null,h),h}},73134,(e,t,n)=>{let r=e.r(38750),i=e.r(30671),a=e.r(63037),o=e.r(10891);function s(e,t,n,a,o){let s=[].slice.call(arguments,1),l=s.length,c="function"==typeof s[l-1];if(!c&&!r())throw Error("Callback required as last argument");if(c){if(l<2)throw Error("Too few arguments provided");2===l?(o=n,n=t,t=a=void 0):3===l&&(t.getContext&&void 0===o?(o=a,a=void 0):(o=a,a=n,n=t,t=void 0))}else{if(l<1)throw Error("Too few arguments provided");return 1===l?(n=t,t=a=void 0):2!==l||t.getContext||(a=n,n=t,t=void 0),new Promise(function(r,o){try{let o=i.create(n,a);r(e(o,t,a))}catch(e){o(e)}})}try{let r=i.create(n,a);o(null,e(r,t,a))}catch(e){o(e)}}n.create=i.create,n.toCanvas=s.bind(null,a.render),n.toDataURL=s.bind(null,a.renderToDataURL),n.toString=s.bind(null,function(e,t,n){return o.render(e,n)})},50889,(e,t,n)=>{"use strict";t.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),a=i.charCodeAt(0);if(255!==t[a])throw TypeError(i+" is ambiguous");t[a]=r}var o=e.length,s=e.charAt(0),l=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,r=0,i=0;e[n]===s;)r++,n++;for(var a=(e.length-n)*l+1>>>0,c=new Uint8Array(a);e[n];){var d=e.charCodeAt(n);if(d>255)return;var u=t[d];if(255===u)return;for(var h=0,f=a-1;(0!==u||h<i)&&-1!==f;f--,h++)u+=o*c[f]>>>0,c[f]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=h,n++}for(var p=a-i;p!==a&&0===c[p];)p++;for(var g=new Uint8Array(r+(a-p)),m=r;p!==a;)g[m++]=c[p++];return g}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,a=t.length;i!==a&&0===t[i];)i++,n++;for(var l=(a-i)*c+1>>>0,d=new Uint8Array(l);i!==a;){for(var u=t[i],h=0,f=l-1;(0!==u||h<r)&&-1!==f;f--,h++)u+=256*d[f]>>>0,d[f]=u%o>>>0,u=u/o>>>0;if(0!==u)throw Error("Non-zero carry");r=h,i++}for(var p=l-r;p!==l&&0===d[p];)p++;for(var g=s.repeat(n);p<l;++p)g+=e.charAt(d[p]);return g},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw Error("Non-base"+o+" character")}}}},54611,(e,t,n)=>{t.exports=e.r(50889)("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},20502,(e,t,n)=>{var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||e.g,i=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();(function(t){var n=void 0!==i&&i||"undefined"!=typeof self&&self||e.g||{},r={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};if(r.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function u(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function h(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function f(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(r.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(r.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;r.arrayBuffer&&r.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e)}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=u(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(r.blob)return this.blob().then(f);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,i,a=u(this);if(a)return a;if(this._bodyBlob)return e=this._bodyBlob,n=h(t=new FileReader),i=(r=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?r[1]:"utf-8",t.readAsText(e,i),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},r.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=s(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[s(e)]},d.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},d.prototype.set=function(e,t){this.map[s(e)]=l(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),c(e)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},d.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),c(e)},r.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);var m=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function w(e,t){if(!(this instanceof w))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,a=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new d(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),m.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function y(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e,t){if(!(this instanceof v))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},g.call(w.prototype),g.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var b=[301,302,303,307,308];v.redirect=function(e,t){if(-1===b.indexOf(t))throw RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function E(e,i){return new Promise(function(a,o){var c=new w(e,i);if(c.signal&&c.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function h(){u.abort()}if(u.onload=function(){var e,t,n={statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();try{t.append(r,i)}catch(e){console.warn("Response "+e.message)}}}),t)};0===c.url.indexOf("file://")&&(u.status<200||u.status>599)?n.status=200:n.status=u.status,n.url="responseURL"in u?u.responseURL:n.headers.get("X-Request-URL");var r="response"in u?u.response:u.responseText;setTimeout(function(){a(new v(r,n))},0)},u.onerror=function(){setTimeout(function(){o(TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){o(TypeError("Network request timed out"))},0)},u.onabort=function(){setTimeout(function(){o(new t.DOMException("Aborted","AbortError"))},0)},u.open(c.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?u.withCredentials=!0:"omit"===c.credentials&&(u.withCredentials=!1),"responseType"in u&&(r.blob?u.responseType="blob":r.arrayBuffer&&(u.responseType="arraybuffer")),i&&"object"==typeof i.headers&&!(i.headers instanceof d||n.Headers&&i.headers instanceof n.Headers)){var f=[];Object.getOwnPropertyNames(i.headers).forEach(function(e){f.push(s(e)),u.setRequestHeader(e,l(i.headers[e]))}),c.headers.forEach(function(e,t){-1===f.indexOf(t)&&u.setRequestHeader(t,e)})}else c.headers.forEach(function(e,t){u.setRequestHeader(t,e)});c.signal&&(c.signal.addEventListener("abort",h),u.onreadystatechange=function(){4===u.readyState&&c.signal.removeEventListener("abort",h)}),u.send(void 0===c._bodyInit?null:c._bodyInit)})}E.polyfill=!0,n.fetch||(n.fetch=E,n.Headers=d,n.Request=w,n.Response=v),t.Headers=d,t.Request=w,t.Response=v,t.fetch=E})({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var a=r.fetch?r:i;(n=a.fetch).default=a.fetch,n.fetch=a.fetch,n.Headers=a.Headers,n.Request=a.Request,n.Response=a.Response,t.exports=n},73905,(e,t,n)=>{"use strict";var r=e.i(47167),i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,l={},c={createFinalURL:()=>S,createPathBasedClient:()=>w,createQuerySerializer:()=>E,default:()=>f,defaultBodySerializer:()=>x,defaultPathSerializer:()=>C,mergeHeaders:()=>_,randomID:()=>h,removeTrailingSlash:()=>A,serializeArrayParam:()=>b,serializeObjectParam:()=>v,serializePrimitiveParam:()=>y,wrapAsPathBasedClient:()=>m};for(var d in c)i(l,d,{get:c[d],enumerable:!0});t.exports=((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))s.call(e,l)||l===n||i(e,l,{get:()=>t[l],enumerable:!(r=a(t,l))||r.enumerable});return e})(i({},"__esModule",{value:!0}),l);var u=/\{[^{}]+\}/g;function h(){return Math.random().toString(36).slice(2,11)}function f(e){let{baseUrl:t="",Request:n=globalThis.Request,fetch:i=globalThis.fetch,querySerializer:a,bodySerializer:o,headers:s,requestInitExt:l,...c}={...e};l="object"==typeof r.default&&Number.parseInt(r.default?.versions?.node?.substring(0,2))>=18&&r.default.versions.undici?l:void 0,t=A(t);let d=[];async function u(e,r){let u,f,p,{baseUrl:g,fetch:m=i,Request:w=n,headers:y,params:v={},parseAs:b="json",querySerializer:C,bodySerializer:T=o??x,body:I,...N}=r||{},O=t;g&&(O=A(g)??t);let k="function"==typeof a?a:E(a);C&&(k="function"==typeof C?C:E({..."object"==typeof a?a:{},...C}));let M=void 0===I?void 0:T(I,_(s,y,v.header)),P=_(void 0===M||M instanceof FormData?{}:{"Content-Type":"application/json"},s,y,v.header),R={redirect:"follow",...c,...N,body:M,headers:P},L=new n(S(e,{baseUrl:O,params:v,querySerializer:k}),R);for(let e in N)e in L||(L[e]=N[e]);if(d.length){for(let t of(u=h(),f=Object.freeze({baseUrl:O,fetch:m,parseAs:b,querySerializer:k,bodySerializer:T}),d))if(t&&"object"==typeof t&&"function"==typeof t.onRequest){let r=await t.onRequest({request:L,schemaPath:e,params:v,options:f,id:u});if(r)if(r instanceof n)L=r;else if(r instanceof Response){p=r;break}else throw Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!p){try{p=await m(L,l)}catch(n){let t=n;if(d.length)for(let n=d.length-1;n>=0;n--){let r=d[n];if(r&&"object"==typeof r&&"function"==typeof r.onError){let n=await r.onError({request:L,error:t,schemaPath:e,params:v,options:f,id:u});if(n){if(n instanceof Response){t=void 0,p=n;break}if(n instanceof Error){t=n;continue}throw Error("onError: must return new Response() or instance of Error")}}}if(t)throw t}if(d.length)for(let t=d.length-1;t>=0;t--){let n=d[t];if(n&&"object"==typeof n&&"function"==typeof n.onResponse){let t=await n.onResponse({request:L,response:p,schemaPath:e,params:v,options:f,id:u});if(t){if(!(t instanceof Response))throw Error("onResponse: must return new Response() when modifying the response");p=t}}}}if(204===p.status||"HEAD"===L.method||"0"===p.headers.get("Content-Length"))return p.ok?{data:void 0,response:p}:{error:void 0,response:p};if(p.ok)return"stream"===b?{data:p.body,response:p}:{data:await p[b](),response:p};let D=await p.text();try{D=JSON.parse(D)}catch{}return{error:D,response:p}}return{request:(e,t,n)=>u(t,{...n,method:e.toUpperCase()}),GET:(e,t)=>u(e,{...t,method:"GET"}),PUT:(e,t)=>u(e,{...t,method:"PUT"}),POST:(e,t)=>u(e,{...t,method:"POST"}),DELETE:(e,t)=>u(e,{...t,method:"DELETE"}),OPTIONS:(e,t)=>u(e,{...t,method:"OPTIONS"}),HEAD:(e,t)=>u(e,{...t,method:"HEAD"}),PATCH:(e,t)=>u(e,{...t,method:"PATCH"}),TRACE:(e,t)=>u(e,{...t,method:"TRACE"}),use(...e){for(let t of e)if(t){if("object"!=typeof t||!("onRequest"in t||"onResponse"in t||"onError"in t))throw Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");d.push(t)}},eject(...e){for(let t of e){let e=d.indexOf(t);-1!==e&&d.splice(e,1)}}}}var p=class{constructor(e,t){this.client=e,this.url=t}GET=e=>this.client.GET(this.url,e);PUT=e=>this.client.PUT(this.url,e);POST=e=>this.client.POST(this.url,e);DELETE=e=>this.client.DELETE(this.url,e);OPTIONS=e=>this.client.OPTIONS(this.url,e);HEAD=e=>this.client.HEAD(this.url,e);PATCH=e=>this.client.PATCH(this.url,e);TRACE=e=>this.client.TRACE(this.url,e)},g=class{constructor(){this.client=null}get(e,t){let n=new p(e,t);return this.client[t]=n,n}};function m(e){let t=new g;function n(){}n.prototype=new Proxy(e,t);let r=new n;return t.client=r,r}function w(e){return m(f(e))}function y(e,t,n){if(null==t)return"";if("object"==typeof t)throw Error("Deeply-nested arrays/objects arenâ€™t supported. Provide your own `querySerializer()` to handle these.");return`${e}=${n?.allowReserved===!0?t:encodeURIComponent(t)}`}function v(e,t,n){if(!t||"object"!=typeof t)return"";let r=[],i={simple:",",label:".",matrix:";"}[n.style]||"&";if("deepObject"!==n.style&&!1===n.explode){for(let e in t)r.push(e,!0===n.allowReserved?t[e]:encodeURIComponent(t[e]));let i=r.join(",");switch(n.style){case"form":return`${e}=${i}`;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return i}}for(let i in t){let a="deepObject"===n.style?`${e}[${i}]`:i;r.push(y(a,t[i],n))}let a=r.join(i);return"label"===n.style||"matrix"===n.style?`${i}${a}`:a}function b(e,t,n){if(!Array.isArray(t))return"";if(!1===n.explode){let r={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",i=(!0===n.allowReserved?t:t.map(e=>encodeURIComponent(e))).join(r);switch(n.style){case"simple":return i;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return`${e}=${i}`}}let r={simple:",",label:".",matrix:";"}[n.style]||"&",i=[];for(let r of t)"simple"===n.style||"label"===n.style?i.push(!0===n.allowReserved?r:encodeURIComponent(r)):i.push(y(e,r,n));return"label"===n.style||"matrix"===n.style?`${r}${i.join(r)}`:i.join(r)}function E(e){return function(t){let n=[];if(t&&"object"==typeof t)for(let r in t){let i=t[r];if(null!=i){if(Array.isArray(i)){if(0===i.length)continue;n.push(b(r,i,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if("object"==typeof i){n.push(v(r,i,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}n.push(y(r,i,e))}}return n.join("&")}}function C(e,t){let n=e;for(let r of e.match(u)??[]){let e=r.substring(1,r.length-1),i=!1,a="simple";if(e.endsWith("*")&&(i=!0,e=e.substring(0,e.length-1)),e.startsWith(".")?(a="label",e=e.substring(1)):e.startsWith(";")&&(a="matrix",e=e.substring(1)),!t||void 0===t[e]||null===t[e])continue;let o=t[e];if(Array.isArray(o)){n=n.replace(r,b(e,o,{style:a,explode:i}));continue}if("object"==typeof o){n=n.replace(r,v(e,o,{style:a,explode:i}));continue}if("matrix"===a){n=n.replace(r,`;${y(e,o)}`);continue}n=n.replace(r,"label"===a?`.${encodeURIComponent(o)}`:encodeURIComponent(o))}return n}function x(e,t){return e instanceof FormData?e:t&&"application/x-www-form-urlencoded"===(t.get instanceof Function?t.get("Content-Type")??t.get("content-type"):t["Content-Type"]??t["content-type"])?new URLSearchParams(e).toString():JSON.stringify(e)}function S(e,t){let n=`${t.baseUrl}${e}`;t.params?.path&&(n=C(n,t.params.path));let r=t.querySerializer(t.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function _(...e){let t=new Headers;for(let n of e)if(n&&"object"==typeof n)for(let[e,r]of n instanceof Headers?n.entries():Object.entries(n))if(null===r)t.delete(e);else if(Array.isArray(r))for(let n of r)t.append(e,n);else void 0!==r&&t.set(e,r);return t}function A(e){return e.endsWith("/")?e.substring(0,e.length-1):e}},80606,(e,t,n)=>{"use strict";let r,i,a;var o,s,l=e.i(47167),c=Object.create,d=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,f=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,g=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of h(t))p.call(e,i)||i===n||d(e,i,{get:()=>t[i],enumerable:!(r=u(t,i))||r.enumerable});return e},m={},w={analytics:()=>C};for(var y in w)d(m,y,{get:w[y],enumerable:!0});t.exports=g(d({},"__esModule",{value:!0}),m);var v=(a=null!=(r=e.r(73905))?c(f(r)):{},g(!i&&r&&r.__esModule?a:d(a,"default",{value:r,enumerable:!0}),r)),b=class{constructor(e){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=e.batchSize,this.baseTimeoutMs=e.baseTimeoutMs,this.currentTimeoutMs=e.baseTimeoutMs,this.sendFn=e.sendFn}enqueue(e){this.batch.push(e),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}async flush(){if(this.isSending||0===this.batch.length)return;this.isSending=!0;let e=[...this.batch.slice(0,this.batchSize)];this.batch=this.batch.slice(this.batchSize);try{await this.sendFn(e),this.currentTimeoutMs=this.baseTimeoutMs}catch(t){console.error("Sender: Failed to send batch",t),this.batch=[...e,...this.batch],this.currentTimeoutMs=Math.min(2*this.currentTimeoutMs,this.maxTimeoutMs)}finally{this.isSending=!1,this.schedule()}}},E=class{constructor(e){this.enabled=!1,this.properties={};const t=(0,v.default)({baseUrl:e}),n=async e=>{let n=await t.POST("/v1/events",{body:e});if(200!==n.response.status)throw Error(n.error)};this.sender=new b({batchSize:100,baseTimeoutMs:200,sendFn:n})}enable(){this.enabled=!0}setGlobalProperty(e,t){this.properties[e]=t}track(e,t){if(!this.enabled)return;let n={name:e,...this.properties,...t};this.sender.enqueue(n)}};void 0!==l.default&&l.default.env&&(o=null!=(s=l.default.env.METAMASK_ANALYTICS_ENDPOINT)?s:l.default.env.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var C=new E(null!=o?o:"https://mm-sdk-analytics.api.cx.metamask.io/")},36926,(e,t,n)=>{var r=e.i(47167);!function(n){var i=Object.hasOwnProperty,a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o="object"==typeof r.default&&"function"==typeof r.default.nextTick,s="function"==typeof Symbol,l="object"==typeof Reflect,c="function"==typeof setImmediate?setImmediate:setTimeout,d=s?l&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function u(){this._events={},this._conf&&h.call(this,this._conf)}function h(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==n&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function f(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r.default&&r.default.emitWarning){var i=Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.default.emitWarning(i)}else console.error(n),console.trace&&console.trace()}var p=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=Array(r);r--;)i[r]=arguments[r];return i}};function g(e,t){for(var r={},i=e.length,a=t?t.length:0,o=0;o<i;o++)r[e[o]]=o<a?t[o]:n;return r}function m(e,t,n){if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var r,i,a=e._observers;a?a.push(this):e._observers=[this]}function w(e,t,r,a){var o,s,l,c=Object.assign({},t);if(!e)return c;if("object"!=typeof e)throw TypeError("options must be an object");var d=Object.keys(e),u=d.length;function h(e){throw Error('Invalid "'+o+'" option value'+(e?". Reason: "+e:""))}for(var f=0;f<u;f++){if(o=d[f],!a&&!i.call(t,o))throw Error('Unknown "'+o+'" option');n!==(s=e[o])&&(l=r[o],c[o]=l?l(s,h):s)}return c}function y(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function v(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var a=typeof e;if(a===r||a===i)return e;n(t)}:function(r,i){for(var a=typeof r,o=n;o-- >0;)if(a===e[o])return r;i(t)}}Object.assign(m.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,a=this._emitter,o=this._listeners,s=function(){var r=p.apply(null,arguments),o={data:r,name:t,original:e};if(n){!1!==n.call(i,o)&&a.emit.apply(a,[o.name].concat(r));return}a.emit.apply(a,[t].concat(r))};if(o[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,a._newListener&&a._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===o[e]&&(o[e]=s,r._on.call(i,e,s))},a.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!a.hasListeners(n)&&o[e]&&(o[e]=null,r._off.call(i,e,s))},o[e]=null,a.on("removeListener",this._onRemoveListener)):(o[e]=s,r._on.call(i,e,s))},unsubscribe:function(e){var t,n,r,i=this,a=this._listeners,o=this._emitter,s=this._off,l=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function c(){i._onNewListener&&(o.off("newListener",i._onNewListener),o.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=x.call(o,i);o._observers.splice(e,1)}if(e){if(!(t=a[e]))return;s.call(l,e,t),delete a[e],--this._listenersCount||c()}else{for(r=(n=d(a)).length;r-- >0;)e=n[r],s.call(l,e,a[e]);this._listeners={},this._listenersCount=0,c()}}});var b=v(["function"]),E=v(["object","function"]);function C(e,t,n){var r,i,a,o=0,s=new e(function(l,c,d){function u(){i&&(i=null),o&&(clearTimeout(o),o=0)}r=!(n=w(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}})).overload&&"function"==typeof e.prototype.cancel&&"function"==typeof d;var h=function(e){u(),l(e)},f=function(e){u(),c(e)};r?t(h,f,d):(i=[function(e){f(e||Error("canceled"))}],t(h,f,function(e){if(a)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");i.push(e)}),a=!0),n.timeout>0&&(o=setTimeout(function(){var e=Error("timeout");e.code="ETIMEDOUT",o=0,s.cancel(e),c(e)},n.timeout))});return r||(s.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),s}function x(e){var t=this._observers;if(!t)return -1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return -1}function S(e,t,n,r,i){if(!n)return null;if(0===r){var a=typeof t;if("string"===a){var o,s,l=0,c=0,u=this.delimiter,h=u.length;if(-1!==(s=t.indexOf(u))){o=[,,,,,];do o[l++]=t.slice(c,s),c=s+h;while(-1!==(s=t.indexOf(u,c)))o[l++]=t.slice(c),t=o,i=l}else t=[t],i=1}else"object"===a?i=t.length:(t=[t],i=1)}var f,p,g,m,w,y,v,b=null,E=t[r],C=t[r+1];if(r===i)n._listeners&&("function"==typeof n._listeners?e&&e.push(n._listeners):e&&e.push.apply(e,n._listeners),b=[n]);else if("*"===E){for(s=(y=d(n)).length;s-- >0;)"_listeners"!==(f=y[s])&&(v=S(e,t,n[f],r+1,i))&&(b?b.push.apply(b,v):b=v);return b}else if("**"===E){for((w=r+1===i||r+2===i&&"*"===C)&&n._listeners&&(b=S(e,t,n,i,i)),s=(y=d(n)).length;s-- >0;)"_listeners"!==(f=y[s])&&("*"===f||"**"===f?(n[f]._listeners&&!w&&(v=S(e,t,n[f],i,i))&&(b?b.push.apply(b,v):b=v),v=S(e,t,n[f],r,i)):v=f===C?S(e,t,n[f],r+2,i):S(e,t,n[f],r,i),v&&(b?b.push.apply(b,v):b=v));return b}else n[E]&&(b=S(e,t,n[E],r+1,i));if((p=n["*"])&&S(e,t,p,r+1,i),g=n["**"])if(r<i)for(g._listeners&&S(e,t,g,i,i),s=(y=d(g)).length;s-- >0;)"_listeners"!==(f=y[s])&&(f===C?S(e,t,g[f],r+2,i):f===E?S(e,t,g[f],r+1,i):((m={})[f]=g[f],S(e,t,{"**":m},r+1,i)));else g._listeners?S(e,t,g,i,i):g["*"]&&g["*"]._listeners&&S(e,t,g["*"],i,i);return b}function _(e,t,n){var r,i,a=0,o=0,s=this.delimiter,l=s.length;if("string"==typeof e)if(-1!==(r=e.indexOf(s))){i=[,,,,,];do i[a++]=e.slice(o,r),o=r+l;while(-1!==(r=e.indexOf(s,o)))i[a++]=e.slice(o)}else i=[e],a=1;else i=e,a=e.length;if(a>1){for(r=0;r+1<a;r++)if("**"===i[r]&&"**"===i[r+1])return}var c,d=this.listenerTree;for(r=0;r<a;r++)if(d=d[c=i[r]]||(d[c]={}),r===a-1){d._listeners?("function"==typeof d._listeners&&(d._listeners=[d._listeners]),n?d._listeners.unshift(t):d._listeners.push(t),!d._listeners.warned&&this._maxListeners>0&&d._listeners.length>this._maxListeners&&(d._listeners.warned=!0,f.call(this,d._listeners.length,c))):d._listeners=t;break}return!0}function A(e,t,n,r){for(var i,a,o,s,l=d(e),c=l.length,u=e._listeners;c-- >0;)i=e[a=l[c]],o="_listeners"===a?n:n?n.concat(a):[a],s=r||"symbol"==typeof a,u&&t.push(s?o:o.join(this.delimiter)),"object"==typeof i&&A.call(this,i,t,o,s);return t}function T(e){for(var t,n,r,i=d(e),a=i.length;a-- >0;)(t=e[n=i[a]])&&(r=!0,"_listeners"===n||T(t)||delete e[n]);return r}function I(e,t,n){this.emitter=e,this.event=t,this.listener=n}function N(e,t,i){if(!0===i)s=!0;else if(!1===i)a=!0;else{if(!i||"object"!=typeof i)throw TypeError("options should be an object or true");var a=i.async,s=i.promisify,l=i.nextTick,d=i.objectify}if(a||l||s){var u=t,h=t._origin||t;if(l&&!o)throw Error("process.nextTick is not supported");n===s&&(s="AsyncFunction"===t.constructor.name),(t=function(){var e=arguments,t=this,n=this.event;return s?l?Promise.resolve():new Promise(function(e){c(e)}).then(function(){return t.event=n,u.apply(t,e)}):(l?r.default.nextTick:c)(function(){t.event=n,u.apply(t,e)})})._async=!0,t._origin=h}return[t,d?new I(this,e,t):this]}function O(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,h.call(this,e)}I.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},O.EventEmitter2=O,O.prototype.listenTo=function(e,t,r){if("object"!=typeof e)throw TypeError("target musts be an object");var i=this;return r=w(r,{on:n,off:n,reducers:n},{on:b,off:b,reducers:E}),function(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,a,o=r.reducers,s=x.call(i,e);n=-1===s?new m(i,e,r):i._observers[s];for(var l=d(t),c=l.length,u="function"==typeof o,h=0;h<c;h++)a=l[h],n.subscribe(a,t[a]||a,u?o:o&&o[a])}(a(t)?g(t):"string"==typeof t?g(t.split(/\s+/)):t),this},O.prototype.stopListeningTo=function(e,t){var n,r=this._observers;if(!r)return!1;var i=r.length,a=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;i-- >0;)n=r[i],e&&n._target!==e||(n.unsubscribe(t),a=!0);return a},O.prototype.delimiter=".",O.prototype.setMaxListeners=function(e){n!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},O.prototype.getMaxListeners=function(){return this._maxListeners},O.prototype.event="",O.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},O.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},O.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},O.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},O.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},O.prototype._many=function(e,t,n,r,i){var a=this;if("function"!=typeof n)throw Error("many only accepts instances of Function");function o(){return 0==--t&&a.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r,i)},O.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var e,t,n,r,i,a,o,l=arguments[0],c=this.wildcard;if("newListener"===l&&!this._newListener&&!this._events.newListener)return!1;if(c&&(o=l,"newListener"!==l&&"removeListener"!==l&&"object"==typeof l)){if(t=l.length,s){for(n=0;n<t;n++)if("symbol"==typeof l[n]){i=!0;break}}i||(l=l.join(this.delimiter))}var d=arguments.length;if(this._all&&this._all.length)for(n=0,t=(a=this._all.slice()).length;n<t;n++)switch(this.event=l,d){case 1:a[n].call(this,l);break;case 2:a[n].call(this,l,arguments[1]);break;case 3:a[n].call(this,l,arguments[1],arguments[2]);break;default:a[n].apply(this,arguments)}if(c)a=[],S.call(this,a,o,this.listenerTree,0,t);else{if("function"==typeof(a=this._events[l])){switch(this.event=l,d){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(r=1,e=Array(d-1);r<d;r++)e[r-1]=arguments[r];a.apply(this,e)}return!0}a&&(a=a.slice())}if(a&&a.length){if(d>3)for(r=1,e=Array(d-1);r<d;r++)e[r-1]=arguments[r];for(n=0,t=a.length;n<t;n++)switch(this.event=l,d){case 1:a[n].call(this);break;case 2:a[n].call(this,arguments[1]);break;case 3:a[n].call(this,arguments[1],arguments[2]);break;default:a[n].apply(this,e)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===l)if(arguments[1]instanceof Error)throw arguments[1];else throw Error("Uncaught, unspecified 'error' event.");return!!this._all},O.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var e,t,n,r,i,a,o,l=arguments[0],c=this.wildcard;if("newListener"===l&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(c&&(a=l,"newListener"!==l&&"removeListener"!==l&&"object"==typeof l)){if(t=l.length,s){for(n=0;n<t;n++)if("symbol"==typeof l[n]){o=!0;break}}o||(l=l.join(this.delimiter))}var d=[],h=arguments.length;if(this._all)for(n=0,t=this._all.length;n<t;n++)switch(this.event=l,h){case 1:d.push(this._all[n].call(this,l));break;case 2:d.push(this._all[n].call(this,l,arguments[1]));break;case 3:d.push(this._all[n].call(this,l,arguments[1],arguments[2]));break;default:d.push(this._all[n].apply(this,arguments))}if(c?(i=[],S.call(this,i,a,this.listenerTree,0)):i=this._events[l],"function"==typeof i)switch(this.event=l,h){case 1:d.push(i.call(this));break;case 2:d.push(i.call(this,arguments[1]));break;case 3:d.push(i.call(this,arguments[1],arguments[2]));break;default:for(r=1,e=Array(h-1);r<h;r++)e[r-1]=arguments[r];d.push(i.apply(this,e))}else if(i&&i.length){if(i=i.slice(),h>3)for(r=1,e=Array(h-1);r<h;r++)e[r-1]=arguments[r];for(n=0,t=i.length;n<t;n++)switch(this.event=l,h){case 1:d.push(i[n].call(this));break;case 2:d.push(i[n].call(this,arguments[1]));break;case 3:d.push(i[n].call(this,arguments[1],arguments[2]));break;default:d.push(i[n].apply(this,e))}}else if(!this.ignoreErrors&&!this._all&&"error"===l)if(arguments[1]instanceof Error)return Promise.reject(arguments[1]);else return Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(d)},O.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},O.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},O.prototype.onAny=function(e){return this._onAny(e,!1)},O.prototype.prependAny=function(e){return this._onAny(e,!0)},O.prototype.addListener=O.prototype.on,O.prototype._onAny=function(e,t){if("function"!=typeof e)throw Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},O.prototype._on=function(e,t,r,i){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw Error("on only accepts instances of Function");this._events||u.call(this);var a,o=this;return(n!==i&&(t=(a=N.call(this,e,t,i))[0],o=a[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard)?_.call(this,e,t,r):this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,f.call(this,this._events[e].length,e))):this._events[e]=t,o},O.prototype.off=function(e,t){if("function"!=typeof t)throw Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();if(!(r=S.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var o=0;o<r.length;o++){var s=r[o];if(a(n=s._listeners)){for(var l=-1,c=0,d=n.length;c<d;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){l=c;break}if(l<0)continue;return this.wildcard?s._listeners.splice(l,1):this._events[e].splice(l,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&T(this.listenerTree),this},O.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n]){t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e);break}}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},O.prototype.removeListener=O.prototype.off,O.prototype.removeAllListeners=function(e){if(n===e)return this._events&&u.call(this),this;if(this.wildcard){var t,r=S.call(this,null,e,this.listenerTree,0);if(!r)return this;for(t=0;t<r.length;t++)r[t]._listeners=null;this.listenerTree&&T(this.listenerTree)}else this._events&&(this._events[e]=null);return this},O.prototype.listeners=function(e){var t,r,i,a,o,s=this._events;if(n===e){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(a=(t=d(s)).length,i=[];a-- >0;)"function"==typeof(r=s[t[a]])?i.push(r):i.push.apply(i,r);return i}if(this.wildcard){if(!(o=this.listenerTree))return[];var l=[],c="string"==typeof e?e.split(this.delimiter):e.slice();return S.call(this,l,c,o,0),l}return s&&(r=s[e])?"function"==typeof r?[r]:r:[]},O.prototype.eventNames=function(e){var t=this._events;return this.wildcard?A.call(this,this.listenerTree,[],null,e):t?d(t):[]},O.prototype.listenerCount=function(e){return this.listeners(e).length},O.prototype.hasListeners=function(e){if(this.wildcard){var t=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return S.call(this,t,r,this.listenerTree,0),t.length>0}var i=this._events,a=this._all;return!!(a&&a.length||i&&(n===e?d(i).length:i[e]))},O.prototype.listenersAny=function(){return this._all?this._all:[]},O.prototype.waitFor=function(e,t){var r=this,i=typeof t;return"number"===i?t={timeout:t}:"function"===i&&(t={filter:t}),C((t=w(t,{timeout:0,filter:n,handleError:!1,Promise:Promise,overload:!1},{filter:b,Promise:y})).Promise,function(n,i,a){function o(){var a=t.filter;if(!a||a.apply(r,arguments))if(r.off(e,o),t.handleError){var s=arguments[0];s?i(s):n(p.apply(null,arguments).slice(1))}else n(p.apply(null,arguments))}a(function(){r.off(e,o)}),r._on(e,o,!1)},{timeout:t.timeout,overload:t.overload})};var k=O.prototype;if(Object.defineProperties(O,{defaultMaxListeners:{get:function(){return k._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");k._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return C((n=w(n,{Promise:Promise,timeout:0,overload:!1},{Promise:y})).Promise,function(n,r,i){if("function"==typeof e.addEventListener){a=function(){n(p.apply(null,arguments))},i(function(){e.removeEventListener(t,a)}),e.addEventListener(t,a,{once:!0});return}var a,o,s=function(){o&&e.removeListener("error",o),n(p.apply(null,arguments))};"error"!==t&&(o=function(n){e.removeListener(t,s),r(n)},e.once("error",o)),i(function(){o&&e.removeListener("error",o),e.removeListener(t,s)}),e.once(t,s)},{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(k,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),"function"==typeof define&&define.amd)e.r,n!==O&&e.v(O);else t.exports=O}()},94511,(e,t,n)=>{"use strict";t.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},33572,(e,t,n)=>{"use strict";let r=e.r(94511),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:a}=Object,o=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0}),s=e.e,l={concatArrays:!1,ignoreUndefined:!1},c=e=>{let t=[];for(let n in e)i.call(e,n)&&t.push(n);if(Object.getOwnPropertySymbols)for(let n of Object.getOwnPropertySymbols(e))a.call(e,n)&&t.push(n);return t};function d(e){var t,n;let i,a;return Array.isArray(e)?(i=(t=e).slice(0,0),c(t).forEach(e=>{o(i,e,d(t[e]))}),i):r(e)?(a=null===Object.getPrototypeOf(n=e)?Object.create(null):{},c(n).forEach(e=>{o(a,e,d(n[e]))}),a):e}let u=(e,t,n,r)=>(n.forEach(n=>{void 0===t[n]&&r.ignoreUndefined||(n in e&&e[n]!==Object.getPrototypeOf(e)?o(e,n,h(e[n],t[n],r)):o(e,n,d(t[n])))}),e);function h(e,t,n){if(n.concatArrays&&Array.isArray(e)&&Array.isArray(t)){let r,a;return r=e.slice(0,0),a=0,[e,t].forEach(t=>{let s=[];for(let n=0;n<t.length;n++)i.call(t,n)&&(s.push(String(n)),t===e?o(r,a++,t[n]):o(r,a++,d(t[n])));r=u(r,t,c(t).filter(e=>!s.includes(e)),n)}),r}return r(t)&&r(e)?u(e,t,c(t),n):d(t)}t.exports=function(...e){let t=h(d(l),this!==s&&this||{},l),n={_:{}};for(let i of e)if(void 0!==i){if(!r(i))throw TypeError("`"+i+"` is not an Option Object");n=h(n,{_:i},t)}return n._}},84017,e=>{"use strict";let t=e.i(33572).default.bind({concatArrays:!0,ignoreUndefined:!0});function n(e,t){return new Promise((n,r)=>{try{let r=e();null==t||t(null,r),n(r)}catch(e){null==t||t(e),r(e)}})}function r(e,t,n){return Promise.all(e).then(e=>{let r=(null==n?void 0:n(e))??null;return null==t||t(null,r),Promise.resolve(r)},e=>(null==t||t(e),Promise.reject(e)))}let i={getItem:(e,t)=>n(()=>window.localStorage.getItem(e),t),setItem:(e,t,r)=>n(()=>window.localStorage.setItem(e,t),r),removeItem:(e,t)=>n(()=>window.localStorage.removeItem(e),t),mergeItem:(e,r,i)=>n(()=>(function(e,n){let r=window.localStorage.getItem(e);if(r){let i=JSON.stringify(t(JSON.parse(r),JSON.parse(n)));window.localStorage.setItem(e,i)}else window.localStorage.setItem(e,n)})(e,r),i),clear:e=>n(()=>window.localStorage.clear(),e),getAllKeys:e=>n(()=>{let e=window.localStorage.length,t=[];for(let n=0;n<e;n+=1){let e=window.localStorage.key(n)||"";t.push(e)}return t},e),flushGetRequests:()=>void 0,multiGet:(e,t)=>r(e.map(e=>i.getItem(e)),t,t=>t.map((t,n)=>[e[n],t])),multiSet:(e,t)=>r(e.map(e=>i.setItem(e[0],e[1])),t),multiRemove:(e,t)=>r(e.map(e=>i.removeItem(e)),t),multiMerge:(e,t)=>r(e.map(e=>i.mergeItem(e[0],e[1])),t)};function a(e){return{getItem:(...t)=>i.getItem(e,...t),setItem:(...t)=>i.setItem(e,...t),mergeItem:(...t)=>i.mergeItem(e,...t),removeItem:(...t)=>i.removeItem(e,...t)}}e.s(["default",0,i],66492),e.i(66492),e.s(["default",0,i,"useAsyncStorage",()=>a],84017)},2008,(e,t,n)=>{t.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},43794,(e,t,n)=>{!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=i(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var a in e)n.call(e,a)&&e[a]&&(t=i(t,a));return t}(a)))}return e}function i(e,t){return t?e?e+" "+t:e+t:e}if(t.exports)r.default=r,t.exports=r;else if("function"==typeof define&&"object"==typeof define.amd&&define.amd)void 0!==r&&e.v(r);else window.classNames=r}()},38066,(e,t,n)=>{var r,i,a,o="__lodash_hash_undefined__",s="[object Arguments]",l="[object Array]",c="[object Boolean]",d="[object Date]",u="[object Error]",h="[object Function]",f="[object Map]",p="[object Number]",g="[object Object]",m="[object Promise]",w="[object RegExp]",y="[object Set]",v="[object String]",b="[object WeakMap]",E="[object ArrayBuffer]",C="[object DataView]",x=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_[s]=_[l]=_[E]=_[c]=_[C]=_[d]=_[u]=_[h]=_[f]=_[p]=_[g]=_[w]=_[y]=_[v]=_[b]=!1;var A=e.g&&e.g.Object===Object&&e.g,T="object"==typeof self&&self&&self.Object===Object&&self,I=A||T||Function("return this")(),N=n&&!n.nodeType&&n,O=N&&t&&!t.nodeType&&t,k=O&&O.exports===N,M=k&&A.process,P=function(){try{return M&&M.binding&&M.binding("util")}catch(e){}}(),R=P&&P.isTypedArray;function L(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function D(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var j=Array.prototype,U=Function.prototype,B=Object.prototype,$=I["__core-js_shared__"],W=U.toString,K=B.hasOwnProperty,H=(r=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",z=B.toString,F=RegExp("^"+W.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=k?I.Buffer:void 0,q=I.Symbol,Y=I.Uint8Array,G=B.propertyIsEnumerable,J=j.splice,Z=q?q.toStringTag:void 0,Q=Object.getOwnPropertySymbols,X=V?V.isBuffer:void 0,ee=(i=Object.keys,a=Object,function(e){return i(a(e))}),et=e_(I,"DataView"),en=e_(I,"Map"),er=e_(I,"Promise"),ei=e_(I,"Set"),ea=e_(I,"WeakMap"),eo=e_(Object,"create"),es=eI(et),el=eI(en),ec=eI(er),ed=eI(ei),eu=eI(ea),eh=q?q.prototype:void 0,ef=eh?eh.valueOf:void 0;function ep(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function eg(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function em(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ew(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new em;++t<n;)this.add(e[t])}function ey(e){var t=this.__data__=new eg(e);this.size=t.size}function ev(e,t){for(var n=e.length;n--;)if(eN(e[n][0],t))return n;return -1}function eb(e){var t;return null==e?void 0===e?"[object Undefined]":"[object Null]":Z&&Z in Object(e)?function(e){var t=K.call(e,Z),n=e[Z];try{e[Z]=void 0;var r=!0}catch(e){}var i=z.call(e);return r&&(t?e[Z]=n:delete e[Z]),i}(e):(t=e,z.call(t))}function eE(e){return eD(e)&&eb(e)==s}function eC(e,t,n,r,i,a){var o=1&n,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var d=-1,u=!0,h=2&n?new ew:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var f=e[d],p=t[d];if(r)var g=o?r(p,f,d,t,e,a):r(f,p,d,e,t,a);if(void 0!==g){if(g)continue;u=!1;break}if(h){if(!function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}(t,function(e,t){if(!h.has(t)&&(f===e||i(f,e,n,r,a)))return h.push(t)})){u=!1;break}}else if(!(f===p||i(f,p,n,r,a))){u=!1;break}}return a.delete(e),a.delete(t),u}function ex(e){var t;return t=eU(e),ek(e)?t:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(t,eA(e))}function eS(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function e_(e,t){var n,r=null==e?void 0:e[t];return!(!eL(r)||(n=r,H&&H in n))&&(eP(r)?F:x).test(eI(r))?r:void 0}ep.prototype.clear=function(){this.__data__=eo?eo(null):{},this.size=0},ep.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},ep.prototype.get=function(e){var t=this.__data__;if(eo){var n=t[e];return n===o?void 0:n}return K.call(t,e)?t[e]:void 0},ep.prototype.has=function(e){var t=this.__data__;return eo?void 0!==t[e]:K.call(t,e)},ep.prototype.set=function(e,t){var n=this.__data__;return this.size+=+!this.has(e),n[e]=eo&&void 0===t?o:t,this},eg.prototype.clear=function(){this.__data__=[],this.size=0},eg.prototype.delete=function(e){var t=this.__data__,n=ev(t,e);return!(n<0)&&(n==t.length-1?t.pop():J.call(t,n,1),--this.size,!0)},eg.prototype.get=function(e){var t=this.__data__,n=ev(t,e);return n<0?void 0:t[n][1]},eg.prototype.has=function(e){return ev(this.__data__,e)>-1},eg.prototype.set=function(e,t){var n=this.__data__,r=ev(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},em.prototype.clear=function(){this.size=0,this.__data__={hash:new ep,map:new(en||eg),string:new ep}},em.prototype.delete=function(e){var t=eS(this,e).delete(e);return this.size-=!!t,t},em.prototype.get=function(e){return eS(this,e).get(e)},em.prototype.has=function(e){return eS(this,e).has(e)},em.prototype.set=function(e,t){var n=eS(this,e),r=n.size;return n.set(e,t),this.size+=+(n.size!=r),this},ew.prototype.add=ew.prototype.push=function(e){return this.__data__.set(e,o),this},ew.prototype.has=function(e){return this.__data__.has(e)},ey.prototype.clear=function(){this.__data__=new eg,this.size=0},ey.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ey.prototype.get=function(e){return this.__data__.get(e)},ey.prototype.has=function(e){return this.__data__.has(e)},ey.prototype.set=function(e,t){var n=this.__data__;if(n instanceof eg){var r=n.__data__;if(!en||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new em(r)}return n.set(e,t),this.size=n.size,this};var eA=Q?function(e){return null==e?[]:function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(Q(e=Object(e)),function(t){return G.call(e,t)})}:function(){return[]},eT=eb;function eI(e){if(null!=e){try{return W.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eN(e,t){return e===t||e!=e&&t!=t}(et&&eT(new et(new ArrayBuffer(1)))!=C||en&&eT(new en)!=f||er&&eT(er.resolve())!=m||ei&&eT(new ei)!=y||ea&&eT(new ea)!=b)&&(eT=function(e){var t=eb(e),n=t==g?e.constructor:void 0,r=n?eI(n):"";if(r)switch(r){case es:return C;case el:return f;case ec:return m;case ed:return y;case eu:return b}return t});var eO=eE(function(){return arguments}())?eE:function(e){return eD(e)&&K.call(e,"callee")&&!G.call(e,"callee")},ek=Array.isArray,eM=X||function(){return!1};function eP(e){if(!eL(e))return!1;var t=eb(e);return t==h||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eR(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}function eL(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eD(e){return null!=e&&"object"==typeof e}var ej=R?function(e){return R(e)}:function(e){return eD(e)&&eR(e.length)&&!!_[eb(e)]};function eU(e){return null!=e&&eR(e.length)&&!eP(e)?function(e,t){var n,r,i=ek(e),a=!i&&eO(e),o=!i&&!a&&eM(e),s=!i&&!a&&!o&&ej(e),l=i||a||o||s,c=l?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],d=c.length;for(var u in e){K.call(e,u)&&!(l&&("length"==u||o&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||(n=u,(r=null==(r=d)?0x1fffffffffffff:r)&&("number"==typeof n||S.test(n))&&n>-1&&n%1==0&&n<r)))&&c.push(u)}return c}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||B))return ee(e);var t,n,r=[];for(var i in Object(e))K.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e)}t.exports=function(e,t){return function e(t,n,r,i,a){return t===n||(null!=t&&null!=n&&(eD(t)||eD(n))?function(e,t,n,r,i,a){var o=ek(e),h=ek(t),m=o?l:eT(e),b=h?l:eT(t);m=m==s?g:m,b=b==s?g:b;var x=m==g,S=b==g,_=m==b;if(_&&eM(e)){if(!eM(t))return!1;o=!0,x=!1}if(_&&!x)return a||(a=new ey),o||ej(e)?eC(e,t,n,r,i,a):function(e,t,n,r,i,a,o){switch(n){case C:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case E:if(e.byteLength!=t.byteLength||!a(new Y(e),new Y(t)))break;return!0;case c:case d:case p:return eN(+e,+t);case u:return e.name==t.name&&e.message==t.message;case w:case v:return e==t+"";case f:var s=L;case y:var l=1&r;if(s||(s=D),e.size!=t.size&&!l)break;var h=o.get(e);if(h)return h==t;r|=2,o.set(e,t);var g=eC(s(e),s(t),r,i,a,o);return o.delete(e),g;case"[object Symbol]":if(ef)return ef.call(e)==ef.call(t)}return!1}(e,t,m,n,r,i,a);if(!(1&n)){var A=x&&K.call(e,"__wrapped__"),T=S&&K.call(t,"__wrapped__");if(A||T){var I=A?e.value():e,N=T?t.value():t;return a||(a=new ey),i(I,N,n,r,a)}}return!!_&&(a||(a=new ey),function(e,t,n,r,i,a){var o=1&n,s=ex(e),l=s.length;if(l!=ex(t).length&&!o)return!1;for(var c=l;c--;){var d=s[c];if(!(o?d in t:K.call(t,d)))return!1}var u=a.get(e);if(u&&a.get(t))return u==t;var h=!0;a.set(e,t),a.set(t,e);for(var f=o;++c<l;){var p=e[d=s[c]],g=t[d];if(r)var m=o?r(g,p,d,t,e,a):r(p,g,d,e,t,a);if(!(void 0===m?p===g||i(p,g,n,r,a):m)){h=!1;break}f||(f="constructor"==d)}if(h&&!f){var w=e.constructor,y=t.constructor;w!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof y&&y instanceof y)&&(h=!1)}return a.delete(e),a.delete(t),h}(e,t,n,r,i,a))}(t,n,r,i,e,a):t!=t&&n!=n)}(e,t)}},79543,(e,t,n)=>{var r=function(){var e,t,n,r,i,a,o,s=function(e,t){var n=e,r=l[t],i=null,a=0,o=null,s=[],d={},y=function(e,t){i=function(e){for(var t=Array(e),n=0;n<e;n+=1){t[n]=Array(e);for(var r=0;r<e;r+=1)t[n][r]=null}return t}(a=4*n+17),v(0,0),v(a-7,0),v(0,a-7),x(),E(),_(e,t),n>=7&&S(e),null==o&&(o=I(n,r,s)),A(o,t)},v=function(e,t){for(var n=-1;n<=7;n+=1)if(!(e+n<=-1)&&!(a<=e+n))for(var r=-1;r<=7;r+=1)t+r<=-1||a<=t+r||(0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4?i[e+n][t+r]=!0:i[e+n][t+r]=!1)},b=function(){for(var e=0,t=0,n=0;n<8;n+=1){y(!0,n);var r=c.getLostPoint(d);(0==n||e>r)&&(e=r,t=n)}return t},E=function(){for(var e=8;e<a-8;e+=1)null==i[e][6]&&(i[e][6]=e%2==0);for(var t=8;t<a-8;t+=1)null==i[6][t]&&(i[6][t]=t%2==0)},x=function(){for(var e=c.getPatternPosition(n),t=0;t<e.length;t+=1)for(var r=0;r<e.length;r+=1){var a=e[t],o=e[r];if(null==i[a][o])for(var s=-2;s<=2;s+=1)for(var l=-2;l<=2;l+=1)-2==s||2==s||-2==l||2==l||0==s&&0==l?i[a+s][o+l]=!0:i[a+s][o+l]=!1}},S=function(e){for(var t=c.getBCHTypeNumber(n),r=0;r<18;r+=1){var o=!e&&(t>>r&1)==1;i[Math.floor(r/3)][r%3+a-8-3]=o}for(var r=0;r<18;r+=1){var o=!e&&(t>>r&1)==1;i[r%3+a-8-3][Math.floor(r/3)]=o}},_=function(e,t){for(var n=r<<3|t,o=c.getBCHTypeInfo(n),s=0;s<15;s+=1){var l=!e&&(o>>s&1)==1;s<6?i[s][8]=l:s<8?i[s+1][8]=l:i[a-15+s][8]=l}for(var s=0;s<15;s+=1){var l=!e&&(o>>s&1)==1;s<8?i[8][a-s-1]=l:s<9?i[8][15-s-1+1]=l:i[8][15-s-1]=l}i[a-8][8]=!e},A=function(e,t){for(var n=-1,r=a-1,o=7,s=0,l=c.getMaskFunction(t),d=a-1;d>0;d-=2)for(6==d&&(d-=1);;){for(var u=0;u<2;u+=1)if(null==i[r][d-u]){var h=!1;s<e.length&&(h=(e[s]>>>o&1)==1),l(r,d-u)&&(h=!h),i[r][d-u]=h,-1==(o-=1)&&(s+=1,o=7)}if((r+=n)<0||a<=r){r-=n,n=-n;break}}},T=function(e,t){for(var n=0,r=0,i=0,a=Array(t.length),o=Array(t.length),s=0;s<t.length;s+=1){var l=t[s].dataCount,d=t[s].totalCount-l;r=Math.max(r,l),i=Math.max(i,d),a[s]=Array(l);for(var h=0;h<a[s].length;h+=1)a[s][h]=255&e.getBuffer()[h+n];n+=l;var f=c.getErrorCorrectPolynomial(d),p=u(a[s],f.getLength()-1).mod(f);o[s]=Array(f.getLength()-1);for(var h=0;h<o[s].length;h+=1){var g=h+p.getLength()-o[s].length;o[s][h]=g>=0?p.getAt(g):0}}for(var m=0,h=0;h<t.length;h+=1)m+=t[h].totalCount;for(var w=Array(m),y=0,h=0;h<r;h+=1)for(var s=0;s<t.length;s+=1)h<a[s].length&&(w[y]=a[s][h],y+=1);for(var h=0;h<i;h+=1)for(var s=0;s<t.length;s+=1)h<o[s].length&&(w[y]=o[s][h],y+=1);return w},I=function(e,t,n){for(var r=h.getRSBlocks(e,t),i=f(),a=0;a<n.length;a+=1){var o=n[a];i.put(o.getMode(),4),i.put(o.getLength(),c.getLengthInBits(o.getMode(),e)),o.write(i)}for(var s=0,a=0;a<r.length;a+=1)s+=r[a].dataCount;if(i.getLengthInBits()>8*s)throw"code length overflow. ("+i.getLengthInBits()+">"+8*s+")";for(i.getLengthInBits()+4<=8*s&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*s)&&(i.put(236,8),!(i.getLengthInBits()>=8*s));){;i.put(17,8)}return T(i,r)};d.addData=function(e,t){var n=null;switch(t=t||"Byte"){case"Numeric":n=p(e);break;case"Alphanumeric":n=g(e);break;case"Byte":n=m(e);break;case"Kanji":n=w(e);break;default:throw"mode:"+t}s.push(n),o=null},d.isDark=function(e,t){if(e<0||a<=e||t<0||a<=t)throw e+","+t;return i[e][t]},d.getModuleCount=function(){return a},d.make=function(){if(n<1){for(var e=1;e<40;e++){for(var t=h.getRSBlocks(e,r),i=f(),a=0;a<s.length;a++){var o=s[a];i.put(o.getMode(),4),i.put(o.getLength(),c.getLengthInBits(o.getMode(),e)),o.write(i)}for(var l=0,a=0;a<t.length;a++)l+=t[a].dataCount;if(i.getLengthInBits()<=8*l)break}n=e}y(!1,b())},d.createTableTag=function(e,t){e=e||2;var n="";n+='<table style=" border-width: 0px; border-style: none; border-collapse: collapse; padding: 0px; margin: '+(t=void 0===t?4*e:t)+'px;"><tbody>';for(var r=0;r<d.getModuleCount();r+=1){n+="<tr>";for(var i=0;i<d.getModuleCount();i+=1)n+='<td style=" border-width: 0px; border-style: none; border-collapse: collapse; padding: 0px; margin: 0px; width: '+e+"px;"+(" height: "+e)+"px; background-color: "+(d.isDark(r,i)?"#000000":"#ffffff")+';"/>';n+="</tr>"}return n+"</tbody></table>"},d.createSvgTag=function(e,t,n,r){var i={};"object"==typeof arguments[0]&&(i=arguments[0],e=i.cellSize,t=i.margin,n=i.alt,r=i.title),e=e||2,t=void 0===t?4*e:t,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var a,o,s,l,c=d.getModuleCount()*e+2*t,u="";for(l="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",u+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',u+=i.scalable?"":' width="'+c+'px" height="'+c+'px"',u+=' viewBox="0 0 '+c+" "+c+'" ',u+=' preserveAspectRatio="xMinYMin meet"',u+=r.text||n.text?' role="img" aria-labelledby="'+N([r.id,n.id].join(" ").trim())+'"':"",u+=">",u+=r.text?'<title id="'+N(r.id)+'">'+N(r.text)+"</title>":"",u+=n.text?'<description id="'+N(n.id)+'">'+N(n.text)+"</description>":"",u+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',u+='<path d="',o=0;o<d.getModuleCount();o+=1)for(a=0,s=o*e+t;a<d.getModuleCount();a+=1)d.isDark(o,a)&&(u+="M"+(a*e+t)+","+s+l);return u+='" stroke="transparent" fill="black"/>',u+="</svg>"},d.createDataURL=function(e,t){e=e||2,t=void 0===t?4*e:t;var n=d.getModuleCount()*e+2*t,r=t,i=n-t;return C(n,n,function(t,n){if(!(r<=t)||!(t<i)||!(r<=n)||!(n<i))return 1;var a=Math.floor((t-r)/e),o=Math.floor((n-r)/e);return+!d.isDark(o,a)})},d.createImgTag=function(e,t,n){e=e||2,t=void 0===t?4*e:t;var r=d.getModuleCount()*e+2*t,i="";return i+="<img",i+=' src="',i+=d.createDataURL(e,t),i+='"',i+=' width="',i+=r,i+='"',i+=' height="',i+=r,i+='"',n&&(i+=' alt="',i+=N(n),i+='"'),i+="/>"};var N=function(e){for(var t="",n=0;n<e.length;n+=1){var r=e.charAt(n);switch(r){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=r}}return t},O=function(e){e=void 0===e?2:e;var t,n,r,i,a,o=+d.getModuleCount()+2*e,s=e,l=o-e,c={"â–ˆâ–ˆ":"â–ˆ","â–ˆ ":"â–€"," â–ˆ":"â–„","  ":" "},u={"â–ˆâ–ˆ":"â–€","â–ˆ ":"â–€"," â–ˆ":" ","  ":" "},h="";for(t=0;t<o;t+=2){for(n=0,r=Math.floor((t-s)/1),i=Math.floor((t+1-s)/1);n<o;n+=1)a="â–ˆ",s<=n&&n<l&&s<=t&&t<l&&d.isDark(r,Math.floor((n-s)/1))&&(a=" "),s<=n&&n<l&&s<=t+1&&t+1<l&&d.isDark(i,Math.floor((n-s)/1))?a+=" ":a+="â–ˆ",h+=e<1&&t+1>=l?u[a]:c[a];h+="\n"}return o%2&&e>0?h.substring(0,h.length-o-1)+Array(o+1).join("â–€"):h.substring(0,h.length-1)};return d.createASCII=function(e,t){if((e=e||1)<2)return O(t);e-=1,t=void 0===t?2*e:t;var n,r,i,a,o=d.getModuleCount()*e+2*t,s=t,l=o-t,c=Array(e+1).join("â–ˆâ–ˆ"),u=Array(e+1).join("  "),h="",f="";for(n=0;n<o;n+=1){for(r=0,i=Math.floor((n-s)/e),f="";r<o;r+=1)a=1,s<=r&&r<l&&s<=n&&n<l&&d.isDark(i,Math.floor((r-s)/e))&&(a=0),f+=a?c:u;for(i=0;i<e;i+=1)h+=f+"\n"}return h.substring(0,h.length-1)},d.renderTo2dContext=function(e,t){t=t||2;for(var n=d.getModuleCount(),r=0;r<n;r++)for(var i=0;i<n;i++)e.fillStyle=d.isDark(r,i)?"black":"white",e.fillRect(r*t,i*t,t,t)},d};s.stringToBytesFuncs={default:function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(255&r)}return t}},s.stringToBytes=s.stringToBytesFuncs.default,s.createStringToBytes=function(e,t){var n=function(){for(var n=b(e),r=function(){var e=n.read();if(-1==e)throw"eof";return e},i=0,a={};;){var o=n.read();if(-1==o)break;var s=r(),l=r(),c=r(),d=String.fromCharCode(o<<8|s),u=l<<8|c;a[d]=u,i+=1}if(i!=t)throw i+" != "+t;return a}();return function(e){for(var t=[],r=0;r<e.length;r+=1){var i=e.charCodeAt(r);if(i<128)t.push(i);else{var a=n[e.charAt(r)];"number"==typeof a?(255&a)==a?t.push(a):(t.push(a>>>8),t.push(255&a)):t.push(63)}}return t}};var l={L:1,M:0,Q:3,H:2},c=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],t={},n=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t},t.getBCHTypeInfo=function(e){for(var t=e<<10;n(t)-n(1335)>=0;)t^=1335<<n(t)-n(1335);return(e<<10|t)^21522},t.getBCHTypeNumber=function(e){for(var t=e<<12;n(t)-n(7973)>=0;)t^=7973<<n(t)-n(7973);return e<<12|t},t.getPatternPosition=function(t){return e[t-1]},t.getMaskFunction=function(e){switch(e){case 0:return function(e,t){return(e+t)%2==0};case 1:return function(e,t){return e%2==0};case 2:return function(e,t){return t%3==0};case 3:return function(e,t){return(e+t)%3==0};case 4:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case 5:return function(e,t){return e*t%2+e*t%3==0};case 6:return function(e,t){return(e*t%2+e*t%3)%2==0};case 7:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},t.getErrorCorrectPolynomial=function(e){for(var t=u([1],0),n=0;n<e;n+=1)t=t.multiply(u([1,d.gexp(n)],0));return t},t.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+e}if(t<27)switch(e){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+e}if(t<41)switch(e){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+e}throw"type:"+t},t.getLostPoint=function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r+=1)for(var i=0;i<t;i+=1){for(var a=0,o=e.isDark(r,i),s=-1;s<=1;s+=1)if(!(r+s<0)&&!(t<=r+s))for(var l=-1;l<=1;l+=1)i+l<0||t<=i+l||(0!=s||0!=l)&&o==e.isDark(r+s,i+l)&&(a+=1);a>5&&(n+=3+a-5)}for(var r=0;r<t-1;r+=1)for(var i=0;i<t-1;i+=1){var c=0;e.isDark(r,i)&&(c+=1),e.isDark(r+1,i)&&(c+=1),e.isDark(r,i+1)&&(c+=1),e.isDark(r+1,i+1)&&(c+=1),(0==c||4==c)&&(n+=3)}for(var r=0;r<t;r+=1)for(var i=0;i<t-6;i+=1)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(var i=0;i<t;i+=1)for(var r=0;r<t-6;r+=1)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);for(var d=0,i=0;i<t;i+=1)for(var r=0;r<t;r+=1)e.isDark(r,i)&&(d+=1);return n+10*(Math.abs(100*d/t/t-50)/5)},t),d=function(){for(var e=Array(256),t=Array(256),n=0;n<8;n+=1)e[n]=1<<n;for(var n=8;n<256;n+=1)e[n]=e[n-4]^e[n-5]^e[n-6]^e[n-8];for(var n=0;n<255;n+=1)t[e[n]]=n;var r={};return r.glog=function(e){if(e<1)throw"glog("+e+")";return t[e]},r.gexp=function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]},r}();function u(e,t){if(void 0===e.length)throw e.length+"/"+t;var n=function(){for(var n=0;n<e.length&&0==e[n];)n+=1;for(var r=Array(e.length-n+t),i=0;i<e.length-n;i+=1)r[i]=e[i+n];return r}(),r={};return r.getAt=function(e){return n[e]},r.getLength=function(){return n.length},r.multiply=function(e){for(var t=Array(r.getLength()+e.getLength()-1),n=0;n<r.getLength();n+=1)for(var i=0;i<e.getLength();i+=1)t[n+i]^=d.gexp(d.glog(r.getAt(n))+d.glog(e.getAt(i)));return u(t,0)},r.mod=function(e){if(r.getLength()-e.getLength()<0)return r;for(var t=d.glog(r.getAt(0))-d.glog(e.getAt(0)),n=Array(r.getLength()),i=0;i<r.getLength();i+=1)n[i]=r.getAt(i);for(var i=0;i<e.getLength();i+=1)n[i]^=d.gexp(d.glog(e.getAt(i))+t);return u(n,0).mod(e)},r}var h=(r=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n},a={},o=function(e,t){switch(t){case l.L:return r[(e-1)*4+0];case l.M:return r[(e-1)*4+1];case l.Q:return r[(e-1)*4+2];case l.H:return r[(e-1)*4+3];default:return}},a.getRSBlocks=function(e,t){var n=o(e,t);if(void 0===n)throw"bad rs block @ typeNumber:"+e+"/errorCorrectionLevel:"+t;for(var r=n.length/3,a=[],s=0;s<r;s+=1)for(var l=n[3*s+0],c=n[3*s+1],d=n[3*s+2],u=0;u<l;u+=1)a.push(i(c,d));return a},a),f=function(){var e=[],t=0,n={};return n.getBuffer=function(){return e},n.getAt=function(t){return(e[Math.floor(t/8)]>>>7-t%8&1)==1},n.put=function(e,t){for(var r=0;r<t;r+=1)n.putBit((e>>>t-r-1&1)==1)},n.getLengthInBits=function(){return t},n.putBit=function(n){var r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1},n},p=function(e){var t={};t.getMode=function(){return 1},t.getLength=function(t){return e.length},t.write=function(t){for(var r=0;r+2<e.length;)t.put(n(e.substring(r,r+3)),10),r+=3;r<e.length&&(e.length-r==1?t.put(n(e.substring(r,r+1)),4):e.length-r==2&&t.put(n(e.substring(r,r+2)),7))};var n=function(e){for(var t=0,n=0;n<e.length;n+=1)t=10*t+r(e.charAt(n));return t},r=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-48;throw"illegal char :"+e};return t},g=function(e){var t={};t.getMode=function(){return 2},t.getLength=function(t){return e.length},t.write=function(t){for(var r=0;r+1<e.length;)t.put(45*n(e.charAt(r))+n(e.charAt(r+1)),11),r+=2;r<e.length&&t.put(n(e.charAt(r)),6)};var n=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-48;if("A"<=e&&e<="Z")return e.charCodeAt(0)-65+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return t},m=function(e){var t=s.stringToBytes(e),n={};return n.getMode=function(){return 4},n.getLength=function(e){return t.length},n.write=function(e){for(var n=0;n<t.length;n+=1)e.put(t[n],8)},n},w=function(e){var t=s.stringToBytesFuncs.SJIS;if(!t)throw"sjis not supported.";var n=t("å‹");if(2!=n.length||(n[0]<<8|n[1])!=38726)throw"sjis not supported.";var r=t(e),i={};return i.getMode=function(){return 8},i.getLength=function(e){return~~(r.length/2)},i.write=function(e){for(var t=0;t+1<r.length;){var n=(255&r[t])<<8|255&r[t+1];if(33088<=n&&n<=40956)n-=33088;else if(57408<=n&&n<=60351)n-=49472;else throw"illegal char at "+(t+1)+"/"+n;n=(n>>>8&255)*192+(255&n),e.put(n,13),t+=2}if(t<r.length)throw"illegal char at "+(t+1)},i},y=function(){var e=[],t={};return t.writeByte=function(t){e.push(255&t)},t.writeShort=function(e){t.writeByte(e),t.writeByte(e>>>8)},t.writeBytes=function(e,n,r){n=n||0,r=r||e.length;for(var i=0;i<r;i+=1)t.writeByte(e[i+n])},t.writeString=function(e){for(var n=0;n<e.length;n+=1)t.writeByte(e.charCodeAt(n))},t.toByteArray=function(){return e},t.toString=function(){var t="";t+="[";for(var n=0;n<e.length;n+=1)n>0&&(t+=","),t+=e[n];return t+"]"},t},v=function(){var e=0,t=0,n=0,r="",i={},a=function(e){r+=String.fromCharCode(o(63&e))},o=function(e){if(e<0);else if(e<26)return 65+e;else if(e<52)return 97+(e-26);else if(e<62)return 48+(e-52);else if(62==e)return 43;else if(63==e)return 47;throw"n:"+e};return i.writeByte=function(r){for(e=e<<8|255&r,t+=8,n+=1;t>=6;)a(e>>>t-6),t-=6},i.flush=function(){if(t>0&&(a(e<<6-t),e=0,t=0),n%3!=0)for(var i=3-n%3,o=0;o<i;o+=1)r+="="},i.toString=function(){return r},i},b=function(e){var t=0,n=0,r=0,i={};i.read=function(){for(;r<8;){if(t>=e.length){if(0==r)return -1;throw"unexpected end of file./"+r}var i=e.charAt(t);if(t+=1,"="==i)return r=0,-1;i.match(/^\s$/)||(n=n<<6|a(i.charCodeAt(0)),r+=6)}var o=n>>>r-8&255;return r-=8,o};var a=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;else throw"c:"+e};return i},E=function(e,t){var n=Array(e*t),r={};r.setPixel=function(t,r,i){n[r*e+t]=i},r.write=function(n){n.writeString("GIF87a"),n.writeShort(e),n.writeShort(t),n.writeByte(128),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(255),n.writeByte(255),n.writeByte(255),n.writeString(","),n.writeShort(0),n.writeShort(0),n.writeShort(e),n.writeShort(t),n.writeByte(0);var r=a(2);n.writeByte(2);for(var i=0;r.length-i>255;)n.writeByte(255),n.writeBytes(r,i,255),i+=255;n.writeByte(r.length-i),n.writeBytes(r,i,r.length-i),n.writeByte(0),n.writeString(";")};var i=function(e){var t=0,n=0,r={};return r.write=function(r,i){if(r>>>i!=0)throw"length over";for(;t+i>=8;)e.writeByte(255&(r<<t|n)),i-=8-t,r>>>=8-t,n=0,t=0;n=r<<t|n,t+=i},r.flush=function(){t>0&&e.writeByte(n)},r},a=function(e){for(var t=1<<e,r=(1<<e)+1,a=e+1,s=o(),l=0;l<t;l+=1)s.add(String.fromCharCode(l));s.add(String.fromCharCode(t)),s.add(String.fromCharCode(r));var c=y(),d=i(c);d.write(t,a);var u=0,h=String.fromCharCode(n[0]);for(u+=1;u<n.length;){var f=String.fromCharCode(n[u]);u+=1,s.contains(h+f)?h+=f:(d.write(s.indexOf(h),a),4095>s.size()&&(s.size()==1<<a&&(a+=1),s.add(h+f)),h=f)}return d.write(s.indexOf(h),a),d.write(r,a),d.flush(),c.toByteArray()},o=function(){var e={},t=0,n={};return n.add=function(r){if(n.contains(r))throw"dup key:"+r;e[r]=t,t+=1},n.size=function(){return t},n.indexOf=function(t){return e[t]},n.contains=function(t){return void 0!==e[t]},n};return r},C=function(e,t,n){for(var r=E(e,t),i=0;i<t;i+=1)for(var a=0;a<e;a+=1)r.setPixel(a,i,n(a,i));var o=y();r.write(o);for(var s=v(),l=o.toByteArray(),c=0;c<l.length;c+=1)s.writeByte(l[c]);return s.flush(),"data:image/gif;base64,"+s};return s}();r.stringToBytesFuncs["UTF-8"]=function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return t};var i=function(){return r};if("function"==typeof define&&define.amd){let t;void 0!==(t=i())&&e.v(t)}else t.exports=i()},34549,(e,t,n)=>{"use strict";var r,i=e.e&&e.e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=e.e&&e.e.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.QRCode=void 0;var o=e.r(38066),s=e.r(79543),l=e.r(71645);n.QRCode=function(e){function t(t){var n=e.call(this,t)||this;return n.canvasRef=l.createRef(),n}return i(t,e),t.prototype.download=function(e,t){if(this.canvasRef.current){var n=void 0;switch(e){case"jpg":n="image/jpeg";break;case"webp":n="image/webp";break;default:n="image/png"}var r=this.canvasRef.current.toDataURL(n,1),i=document.createElement("a");i.download=null!=t?t:"react-qrcode-logo",i.href=r,i.click()}},t.prototype.utf16to8=function(e){var t,n,r="",i=e.length;for(t=0;t<i;t++)(n=e.charCodeAt(t))>=1&&n<=127?r+=e.charAt(t):(n>2047?(r+=String.fromCharCode(224|n>>12&15),r+=String.fromCharCode(128|n>>6&63)):r+=String.fromCharCode(192|n>>6&31),r+=String.fromCharCode(128|63&n));return r},t.prototype.drawRoundedSquare=function(e,t,n,r,i,a,o,s){s.lineWidth=e,s.fillStyle=i,s.strokeStyle=i,n+=e/2,t+=e/2,r-=e,Array.isArray(a)||(a=[a,a,a,a]);var l=(a=a.map(function(e){return(e=Math.min(e,r/2))<0?0:e}))[0]||0,c=a[1]||0,d=a[2]||0,u=a[3]||0;s.beginPath(),s.moveTo(t+l,n),s.lineTo(t+r-c,n),c&&s.quadraticCurveTo(t+r,n,t+r,n+c),s.lineTo(t+r,n+r-d),d&&s.quadraticCurveTo(t+r,n+r,t+r-d,n+r),s.lineTo(t+u,n+r),u&&s.quadraticCurveTo(t,n+r,t,n+r-u),s.lineTo(t,n+l),l&&s.quadraticCurveTo(t,n,t+l,n),s.closePath(),s.stroke(),o&&s.fill()},t.prototype.drawPositioningPattern=function(e,t,n,r,i,a,o){void 0===o&&(o=[0,0,0,0]);var s,l,c,d,u=Math.ceil(t);"number"==typeof o||Array.isArray(o)?l=s=o:(s=o.outer||0,l=o.inner||0),"string"!=typeof a?(c=a.outer,d=a.inner):(c=a,d=a);var h=r*t+n,f=i*t+n,p=7*t;this.drawRoundedSquare(u,f,h,p,c,s,!1,e),p=3*t,h+=2*t,f+=2*t,this.drawRoundedSquare(u,f,h,p,d,l,!0,e)},t.prototype.isInPositioninZone=function(e,t,n){return n.some(function(n){return t>=n.row&&t<=n.row+7&&e>=n.col&&e<=n.col+7})},t.prototype.transformPixelLengthIntoNumberOfCells=function(e,t){return e/t},t.prototype.isCoordinateInImage=function(e,t,n,r,i,a,o,s){if(!s)return!1;var l=this.transformPixelLengthIntoNumberOfCells(i,o),c=this.transformPixelLengthIntoNumberOfCells(a,o),d=this.transformPixelLengthIntoNumberOfCells(n,o)-1,u=this.transformPixelLengthIntoNumberOfCells(r,o)-1;return t>=l-2&&t<=l+d+2&&e>=c-2&&e<=c+u+2},t.prototype.shouldComponentUpdate=function(e){return!o(this.props,e)},t.prototype.componentDidMount=function(){this.update()},t.prototype.componentDidUpdate=function(){this.update()},t.prototype.update=function(){var e,t=this.props,n=t.value,r=t.ecLevel,i=t.enableCORS,a=t.bgColor,o=t.fgColor,l=t.logoImage,c=t.logoOpacity,d=t.logoOnLoad,u=t.removeQrCodeBehindLogo,h=t.qrStyle,f=t.eyeRadius,p=t.eyeColor,g=t.logoPaddingStyle,m=+this.props.size,w=+this.props.quietZone,y=this.props.logoWidth?+this.props.logoWidth:0,v=this.props.logoHeight?+this.props.logoHeight:0,b=this.props.logoPadding?+this.props.logoPadding:0,E=s(0,r);E.addData(this.utf16to8(n)),E.make();var C=null==(e=this.canvasRef)?void 0:e.current,x=C.getContext("2d"),S=m+2*w,_=E.getModuleCount(),A=m/_,T=window.devicePixelRatio||1;C.height=C.width=S*T,x.scale(T,T),x.fillStyle=a,x.fillRect(0,0,S,S);var I=[{row:0,col:0},{row:0,col:_-7},{row:_-7,col:0}];if(x.strokeStyle=o,"dots"===h){x.fillStyle=o;for(var N=A/2,O=0;O<_;O++)for(var k=0;k<_;k++)E.isDark(O,k)&&!this.isInPositioninZone(O,k,I)&&(x.beginPath(),x.arc(Math.round(k*A)+N+w,Math.round(O*A)+N+w,N/100*75,0,2*Math.PI,!1),x.closePath(),x.fill())}else if("fluid"===h){for(var N=Math.ceil(A/2),O=0;O<_;O++)for(var k=0;k<_;k++)if(E.isDark(O,k)&&!this.isInPositioninZone(O,k,I)){var M=[!1,!1,!1,!1];O>0&&!E.isDark(O-1,k)&&k>0&&!E.isDark(O,k-1)&&(M[0]=!0),O>0&&!E.isDark(O-1,k)&&k<_-1&&!E.isDark(O,k+1)&&(M[1]=!0),O<_-1&&!E.isDark(O+1,k)&&k<_-1&&!E.isDark(O,k+1)&&(M[2]=!0),O<_-1&&!E.isDark(O+1,k)&&k>0&&!E.isDark(O,k-1)&&(M[3]=!0);var P=Math.ceil((k+1)*A)-Math.floor(k*A),R=Math.ceil((O+1)*A)-Math.floor(O*A);x.fillStyle=o,x.beginPath(),x.arc(Math.round(k*A)+N+w,Math.round(O*A)+N+w,N,0,2*Math.PI,!1),x.closePath(),x.fill(),M[0]||x.fillRect(Math.round(k*A)+w,Math.round(O*A)+w,P/2,R/2),M[1]||x.fillRect(Math.round(k*A)+w+Math.floor(P/2),Math.round(O*A)+w,P/2,R/2),M[2]||x.fillRect(Math.round(k*A)+w+Math.floor(P/2),Math.round(O*A)+w+Math.floor(R/2),P/2,R/2),M[3]||x.fillRect(Math.round(k*A)+w,Math.round(O*A)+w+Math.floor(R/2),P/2,R/2)}}else for(var O=0;O<_;O++)for(var k=0;k<_;k++)if(E.isDark(O,k)&&!this.isInPositioninZone(O,k,I)){x.fillStyle=o;var P=Math.ceil((k+1)*A)-Math.floor(k*A),R=Math.ceil((O+1)*A)-Math.floor(O*A);x.fillRect(Math.round(k*A)+w,Math.round(O*A)+w,P,R)}for(var L=0;L<3;L++){var D=I[L],O=D.row,k=D.col,j=f,U=void 0;Array.isArray(j)&&(j=j[L]),"number"==typeof j&&(j=[j,j,j,j]),U=p?Array.isArray(p)?p[L]:p:o,this.drawPositioningPattern(x,A,w,O,k,U,j)}if(l){var B=new Image;i&&(B.crossOrigin="Anonymous"),B.onload=function(e){x.save();var t=y||.2*m,n=v||t,r=(m-t)/2,i=(m-n)/2;if(u||b){x.beginPath(),x.strokeStyle=a,x.fillStyle=a;var o=t+2*b,s=n+2*b,l=r+w-b,h=i+w-b;"circle"===g?(x.ellipse(l+o/2,h+s/2,o/2,s/2,0,0,2*Math.PI),x.stroke(),x.fill()):x.fillRect(l,h,o,s)}x.globalAlpha=c,x.drawImage(B,r+w,i+w,t,n),x.restore(),d&&d(e)},B.src=l}},t.prototype.render=function(){var e,t=+this.props.size+2*this.props.quietZone;return l.createElement("canvas",{id:null!=(e=this.props.id)?e:"react-qrcode-logo",height:t,width:t,style:a({height:t+"px",width:t+"px"},this.props.style),ref:this.canvasRef})},t.defaultProps={value:"https://reactjs.org/",ecLevel:"M",enableCORS:!1,size:150,quietZone:10,bgColor:"#FFFFFF",fgColor:"#000000",logoOpacity:1,qrStyle:"squares",eyeRadius:[0,0,0],logoPaddingStyle:"square"},t}(l.Component)},37997,e=>{"use strict";let t,n,r,i;var a=e.i(43476),o=e.i(47167),s=e.i(71645),l=e.i(27261),c=e.i(48774);let d=({children:e,endpoint:t,config:n={commitment:"confirmed"}})=>{let r=(0,s.useMemo)(()=>new l.Connection(t,n),[t,n]);return s.default.createElement(c.ConnectionContext.Provider,{value:{connection:r}},e)};var u=e.i(50808),h=e.i(63991);function f(e){return"version"in e}class p extends u.BaseWalletAdapter{async sendTransaction(e,t,n={}){let r=!0;try{if(f(e)){if(!this.supportedTransactionVersions)throw new h.WalletSendTransactionError("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new h.WalletSendTransactionError(`Sending transaction version ${e.version} isn't supported by this wallet`);try{let r=(e=await this.signTransaction(e)).serialize();return await t.sendRawTransaction(r,n)}catch(e){if(e instanceof h.WalletSignTransactionError)throw r=!1,e;throw new h.WalletSendTransactionError(e?.message,e)}}try{let{signers:r,...i}=n;e=await this.prepareTransaction(e,t,i),r?.length&&e.partialSign(...r);let a=(e=await this.signTransaction(e)).serialize();return await t.sendRawTransaction(a,i)}catch(e){if(e instanceof h.WalletSignTransactionError)throw r=!1,e;throw new h.WalletSendTransactionError(e?.message,e)}}catch(e){throw r&&this.emit("error",e),e}}async signAllTransactions(e){for(let t of e)if(f(t)){if(!this.supportedTransactionVersions)throw new h.WalletSignTransactionError("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new h.WalletSignTransactionError(`Signing transaction version ${t.version} isn't supported by this wallet`)}let t=[];for(let n of e)t.push(await this.signTransaction(n));return t}}class g extends p{}class m extends g{}let w="solana:signIn";var y=e.i(54507),v=e.i(46937),b=e.i(69910);e.i(73134);let E=`(?:\\nURI: (?<uri>[^\\n]+))?(?:\\nVersion: (?<version>[^\\n]+))?(?:\\nChain ID: (?<chainId>[^\\n]+))?(?:\\nNonce: (?<nonce>[^\\n]+))?(?:\\nIssued At: (?<issuedAt>[^\\n]+))?(?:\\nExpiration Time: (?<expirationTime>[^\\n]+))?(?:\\nNot Before: (?<notBefore>[^\\n]+))?(?:\\nRequest ID: (?<requestId>[^\\n]+))?(?:\\nResources:(?<resources>(?:\\n- [^\\n]+)*))?`;RegExp(`^(?<domain>[^\\n]+?) wants you to sign in with your Solana account:\\n(?<address>[^\\n]+)(?:\\n|$)(?:\\n(?<statement>[\\S\\s]*?)(?:\\n|$))??${E}\\n*$`);let C="ERROR_FORBIDDEN_WALLET_BASE_URL";class x extends Error{constructor(...e){const[t,n,r]=e;super(n),this.code=t,this.data=r,this.name="SolanaMobileWalletAdapterError"}}class S extends Error{constructor(...e){const[t,n,r,i]=e;super(r),this.code=n,this.data=i,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function _(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}function A(e,t){let n=window.btoa(String.fromCharCode.call(null,...e));return t?n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):n}function T(e){return new Uint8Array(window.atob(e).split("").map(e=>e.charCodeAt(0)))}function I(e,t){return _(this,void 0,void 0,function*(){let n=yield crypto.subtle.exportKey("raw",e),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,n),i=new Uint8Array(n.byteLength+r.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(r),n.byteLength),i})}let N="solana:cloneAuthorization";function O(e,n){return _(this,void 0,void 0,function*(){let r=e.slice(0,4),i=e.slice(4,16),a=e.slice(16),o=yield crypto.subtle.decrypt(k(r,i),n,a);return(void 0===t&&(t=new TextDecoder("utf-8")),t).decode(o)})}function k(e,t){return{additionalData:e,iv:t,name:"AES-GCM",tagLength:128}}function M(){return _(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function P(e){if(e<49152||e>65535)throw new x("ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",`Association port number must be between 49152 and 65535. ${e} given.`,{port:e});return e}function R(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}let L=null,D=[150,150,200,500,500,750,750,1e3];function j(e){return new DataView(e).getUint32(0,!1)}var U=e.i(22859),B=e.i(73506);let $="standard:events";var W=e.i(54611);let K="solana:mainnet";function H(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}function z(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function F(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}let V=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,q=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,Y=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class G{constructor(){lu.add(this),lh.set(this,null),lf.set(this,{}),lp.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),z(this,lu,"m",lm).call(this),z(this,lh,"f")&&(z(this,lh,"f").style.display="flex")},this.close=e=>{var t;console.debug("Modal close"),z(this,lu,"m",lw).call(this),z(this,lh,"f")&&(z(this,lh,"f").style.display="none"),null==(t=z(this,lf,"f").close)||t.forEach(t=>t(e))},ly.set(this,e=>{"Escape"===e.key&&this.close(e)}),this.init=this.init.bind(this),F(this,lh,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f")}init(){return H(this,void 0,void 0,function*(){console.log("Injecting modal"),z(this,lu,"m",lg).call(this)})}addEventListener(e,t){var n;return(null==(n=z(this,lf,"f")[e])?void 0:n.push(t))||(z(this,lf,"f")[e]=[t]),()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;z(this,lf,"f")[e]=null==(n=z(this,lf,"f")[e])?void 0:n.filter(e=>t!==e)}}function J(e){return window.btoa(String.fromCharCode.call(null,...e))}function Z(e){return new Uint8Array(window.atob(e).split("").map(e=>e.charCodeAt(0)))}lh=new WeakMap,lf=new WeakMap,lp=new WeakMap,ly=new WeakMap,lu=new WeakSet,lg=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){z(this,lh,"f")||F(this,lh,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f");return}F(this,lh,document.createElement("div"),"f"),z(this,lh,"f").id="mobile-wallet-adapter-embedded-root-ui",z(this,lh,"f").innerHTML=V,z(this,lh,"f").style.display="none";let e=z(this,lh,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");e&&(e.innerHTML=this.contentHtml);let t=document.createElement("style");t.id="mobile-wallet-adapter-embedded-modal-styles",t.textContent=q+this.contentStyles;let n=document.createElement("div");n.innerHTML=Y,this.dom=n.attachShadow({mode:"closed"}),this.dom.appendChild(t),this.dom.appendChild(z(this,lh,"f")),document.body.appendChild(n)},lm=function(){!z(this,lh,"f")||z(this,lp,"f")||([...z(this,lh,"f").querySelectorAll("[data-modal-close]")].forEach(e=>null==e?void 0:e.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",z(this,ly,"f")),F(this,lp,!0,"f"))},lw=function(){!z(this,lp,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",z(this,ly,"f")),z(this,lh,"f")&&([...z(this,lh,"f").querySelectorAll("[data-modal-close]")].forEach(e=>null==e?void 0:e.removeEventListener("click",this.close)),F(this,lp,!1,"f")))};let Q="Mobile Wallet Adapter",X=[v.SolanaSignAndSendTransaction,b.SolanaSignTransaction,y.SolanaSignMessage,w];class ee{constructor(e){lv.add(this),lb.set(this,{}),lE.set(this,"1.0.0"),lC.set(this,Q),lx.set(this,"https://solanamobile.com/wallets"),lS.set(this,"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo="),l_.set(this,void 0),lA.set(this,void 0),lT.set(this,void 0),lI.set(this,!1),lN.set(this,0),lO.set(this,[]),lk.set(this,void 0),lM.set(this,void 0),lP.set(this,void 0),lR.set(this,(e,t)=>{var n;return(null==(n=z(this,lb,"f")[e])?void 0:n.push(t))||(z(this,lb,"f")[e]=[t]),()=>z(this,lv,"m",lD).call(this,e,t)}),lj.set(this,({silent:e}={})=>H(this,void 0,void 0,function*(){if(z(this,lI,"f")||this.connected)return{accounts:this.accounts};F(this,lI,!0,"f");try{if(e){let e=yield z(this,lT,"f").get();if(!e)return{accounts:this.accounts};yield z(this,l$,"f").call(this,e.capabilities),yield z(this,lB,"f").call(this,e)}else yield z(this,lU,"f").call(this)}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}finally{F(this,lI,!1,"f")}return{accounts:this.accounts}})),lU.set(this,e=>H(this,void 0,void 0,function*(){try{let t=yield z(this,lT,"f").get();if(t)return z(this,lB,"f").call(this,t),t;let n=yield z(this,lk,"f").select(z(this,lO,"f"));return yield z(this,lH,"f").call(this,t=>H(this,void 0,void 0,function*(){let[r,i]=yield Promise.all([t.getCapabilities(),t.authorize({chain:n,identity:z(this,l_,"f"),sign_in_payload:e})]),a=z(this,lF,"f").call(this,i.accounts),o=Object.assign(Object.assign({},i),{accounts:a,chain:n,capabilities:r});return Promise.all([z(this,l$,"f").call(this,r),z(this,lT,"f").set(o),z(this,lB,"f").call(this,o)]),o}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),lB.set(this,e=>H(this,void 0,void 0,function*(){var t;let n=null==z(this,lA,"f")||(null==(t=z(this,lA,"f"))?void 0:t.accounts.length)!==e.accounts.length||z(this,lA,"f").accounts.some((t,n)=>t.address!==e.accounts[n].address);F(this,lA,e,"f"),n&&z(this,lv,"m",lL).call(this,"change",{accounts:this.accounts})})),l$.set(this,e=>H(this,void 0,void 0,function*(){let t=e.features.includes("solana:signTransactions"),n=e.supports_sign_and_send_transactions,r=v.SolanaSignAndSendTransaction in this.features!==n||b.SolanaSignTransaction in this.features!==t;F(this,lM,Object.assign(Object.assign({},(n||!n&&!t)&&{[v.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:z(this,lY,"f")}}),t&&{[b.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:z(this,lG,"f")}}),"f"),r&&z(this,lv,"m",lL).call(this,"change",{features:this.features})})),lW.set(this,(e,t,n)=>H(this,void 0,void 0,function*(){var r,i;try{let[a,o]=yield Promise.all([null!=(i=null==(r=z(this,lA,"f"))?void 0:r.capabilities)?i:yield e.getCapabilities(),e.authorize({auth_token:t,identity:z(this,l_,"f"),chain:n})]),s=z(this,lF,"f").call(this,o.accounts),l=Object.assign(Object.assign({},o),{accounts:s,chain:n,capabilities:a});Promise.all([z(this,lT,"f").set(l),z(this,lB,"f").call(this,l)])}catch(e){throw z(this,lK,"f").call(this),Error(e instanceof Error&&e.message||"Unknown error")}})),lK.set(this,()=>H(this,void 0,void 0,function*(){var e;z(this,lT,"f").clear(),F(this,lI,!1,"f"),F(this,lN,(e=z(this,lN,"f"),++e),"f"),F(this,lA,void 0,"f"),z(this,lv,"m",lL).call(this,"change",{accounts:this.accounts})})),lH.set(this,e=>H(this,void 0,void 0,function*(){var t;let n=null==(t=z(this,lA,"f"))?void 0:t.wallet_uri_base,r=z(this,lN,"f");try{return yield function(e,t){return _(this,void 0,void 0,function*(){let n,r;if("undefined"==typeof window||!0!==window.isSecureContext)throw new x("ERROR_SECURE_CONTEXT_REQUIRED","The mobile wallet adapter protocol must be used in a secure context (`https`).");let i=yield function(){return _(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}(),a=yield function(e,t){return _(this,void 0,void 0,function*(){let n=P(49152+Math.floor(16384*Math.random())),r=yield function(e,t,n,r=["v1"]){return _(this,void 0,void 0,function*(){let i=P(t),a=function(e){let t="",n=new Uint8Array(e),r=n.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}((yield crypto.subtle.exportKey("raw",e))),o=function(e,t){let n=null;if(t){try{n=new URL(t)}catch(e){}if((null==n?void 0:n.protocol)!=="https:")throw new x(C,"Base URLs supplied by wallets must be valid `https` URLs")}return n||(n=new URL("solana-wallet:/")),new URL(e.startsWith("/")?e:[...R(n.pathname),...R(e)].join("/"),n)}("v1/associate/local",n);return o.searchParams.set("association",a.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])),o.searchParams.set("port",`${i}`),r.forEach(e=>{o.searchParams.set("v",e)}),o})}(e,n,t);return yield function(e){return _(this,void 0,void 0,function*(){if("https:"===e.protocol)window.location.assign(e);else try{switch(1*(-1===navigator.userAgent.indexOf("Firefox/"))){case 0:null==L&&((L=document.createElement("iframe")).style.display="none",document.body.appendChild(L)),L.contentWindow.location.href=e.toString();break;case 1:{let t=new Promise((e,t)=>{function n(){clearTimeout(i),window.removeEventListener("blur",r)}function r(){n(),e()}window.addEventListener("blur",r);let i=setTimeout(()=>{n(),t()},3e3)});window.location.assign(e),yield t}}}catch(e){throw new x("ERROR_WALLET_NOT_FOUND","Found no installed wallet that supports the mobile wallet protocol.")}})}(r),n})}(i.publicKey,null==t?void 0:t.baseUri),o=`ws://localhost:${a}/solana-wallet`,s=(r=[...D],()=>r.length>1?r.shift():r[0]),l=1,c=0,d={__type:"disconnected"};return new Promise((t,r)=>{let a,u,h,f={},p=()=>_(this,void 0,void 0,function*(){if("connecting"!==d.__type)return void console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${d.__type}\`.`);a.removeEventListener("open",p);let{associationKeypair:e}=d,t=yield M();a.send((yield I(t.publicKey,e.privateKey))),d={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:t.privateKey}}),g=e=>{e.wasClean?d={__type:"disconnected"}:r(new x("ERROR_SESSION_CLOSED",`The wallet session dropped unexpectedly (${e.code}: ${e.reason}).`,{closeEvent:e})),u()},m=e=>_(this,void 0,void 0,function*(){u(),Date.now()-n>=3e4?r(new x("ERROR_SESSION_TIMEOUT",`Failed to connect to the wallet websocket at ${o}.`)):(yield new Promise(e=>{let t=s();h=window.setTimeout(e,t)}),y())}),w=n=>_(this,void 0,void 0,function*(){let o=yield n.data.arrayBuffer();switch(d.__type){case"connecting":if(0!==o.byteLength)throw Error("Encountered unexpected message while connecting");let s=yield M();a.send((yield I(s.publicKey,i.privateKey))),d={__type:"hello_req_sent",associationPublicKey:i.publicKey,ecdhPrivateKey:s.privateKey};break;case"connected":try{let e=o.slice(0,4),t=j(e);if(t!==c+1)throw Error("Encrypted message has invalid sequence number");c=t;let n=yield function(e,t){return _(this,void 0,void 0,function*(){let n=JSON.parse((yield O(e,t)));if(Object.hasOwnProperty.call(n,"error"))throw new S(n.id,n.error.code,n.error.message);return n})}(o,d.sharedSecret),r=f[n.id];delete f[n.id],r.resolve(n.result)}catch(e){if(e instanceof S){let t=f[e.jsonRpcMessageId];delete f[e.jsonRpcMessageId],t.reject(e)}else throw e}break;case"hello_req_sent":{var h,p;if(0===o.byteLength){let e=yield M();a.send((yield I(e.publicKey,i.privateKey))),d={__type:"hello_req_sent",associationPublicKey:i.publicKey,ecdhPrivateKey:e.privateKey};break}let n=yield function(e,t,n){return _(this,void 0,void 0,function*(){let[r,i]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",e.slice(0,65),{name:"ECDH",namedCurve:"P-256"},!1,[])]),a=yield crypto.subtle.deriveBits({name:"ECDH",public:i},n,256),o=yield crypto.subtle.importKey("raw",a,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}(o,d.associationPublicKey,d.ecdhPrivateKey),s=o.slice(65),g=0!==s.byteLength?yield _(this,void 0,void 0,function*(){let e=j(s.slice(0,4));if(e!==c+1)throw Error("Encrypted message has invalid sequence number");return c=e,function(e,t){return _(this,void 0,void 0,function*(){let n=JSON.parse((yield O(e,t))),r="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":r="v1";break;case"legacy":r="legacy";break;default:throw new x("ERROR_INVALID_PROTOCOL_VERSION",`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:r}})}(s,n)}):{protocol_version:"legacy"};d={__type:"connected",sharedSecret:n,sessionProperties:g};let m=(h=g.protocol_version,p=(e,t)=>_(this,void 0,void 0,function*(){let r=l++;return a.send((yield function(e,t){return _(this,void 0,void 0,function*(){let n=JSON.stringify(e);return function(e,t,n){return _(this,void 0,void 0,function*(){let r=function(e){if(e>=0x100000000)throw Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!1),new Uint8Array(t)}(t),i=new Uint8Array(12);crypto.getRandomValues(i);let a=yield crypto.subtle.encrypt(k(r,i),n,new TextEncoder().encode(e)),o=new Uint8Array(r.byteLength+i.byteLength+a.byteLength);return o.set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.byteLength),o.set(new Uint8Array(a),r.byteLength+i.byteLength),o})}(n,e.id,t)})}({id:r,jsonrpc:"2.0",method:e,params:null!=t?t:{}},n))),new Promise((t,n)=>{f[r]={resolve(r){switch(e){case"authorize":case"reauthorize":{let{wallet_uri_base:e}=r;if(null!=e)try{let t;try{t=new URL(e)}catch(e){throw new x(C,"Invalid base URL supplied by wallet")}if("https:"!==t.protocol)throw new x(C,"Base URLs supplied by wallets must be valid `https` URLs")}catch(e){n(e);return}}}t(r)},reject:n}})}),new Proxy({},{get:(e,t)=>"then"===t?null:(null==e[t]&&(e[t]=function(e){return _(this,void 0,void 0,function*(){let{method:n,params:r}=function(e,t,n){let r=t,i=e.toString().replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`).toLowerCase();switch(e){case"authorize":{let{chain:e}=r;if("legacy"===n){switch(e){case"solana:testnet":e="testnet";break;case"solana:devnet":e="devnet";break;case"solana:mainnet":e="mainnet-beta";break;default:e=r.cluster}r.cluster=e}else{switch(e){case"testnet":case"devnet":e=`solana:${e}`;break;case"mainnet-beta":e="solana:mainnet"}r.chain=e}}case"reauthorize":{let{auth_token:e,identity:t}=r;e&&("legacy"===n?(i="reauthorize",r={auth_token:e,identity:t}):i="authorize")}}return{method:i,params:r}}(t,e,h),i=yield p(n,r);return"authorize"===n&&r.sign_in_payload&&!i.sign_in_result&&(i.sign_in_result=yield function(e,t,n){var r;return _(this,void 0,void 0,function*(){var i,a,o,s;let l=null!=(r=e.domain)?r:window.location.host,c=t.accounts[0].address,d=(s=function(e){let t=`${e.domain} wants you to sign in with your Solana account:
`;t+=`${e.address}`,e.statement&&(t+=`

${e.statement}`);let n=[];if(e.uri&&n.push(`URI: ${e.uri}`),e.version&&n.push(`Version: ${e.version}`),e.chainId&&n.push(`Chain ID: ${e.chainId}`),e.nonce&&n.push(`Nonce: ${e.nonce}`),e.issuedAt&&n.push(`Issued At: ${e.issuedAt}`),e.expirationTime&&n.push(`Expiration Time: ${e.expirationTime}`),e.notBefore&&n.push(`Not Before: ${e.notBefore}`),e.requestId&&n.push(`Request ID: ${e.requestId}`),e.resources)for(let t of(n.push("Resources:"),e.resources))n.push(`- ${t}`);return n.length&&(t+=`

${n.join("\n")}`),t}(Object.assign(Object.assign({},e),{domain:l,address:(i=T(c),(a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Object.freeze({...o={read(e,t){let n=0===t?e:e.slice(t);if(0===n.length)return["",0];let r=n.findIndex(e=>0!==e);r=-1===r?n.length:r;let i=a[0].repeat(r);return r===n.length?[i,e.length]:[i+function(e,t){let n=BigInt(t.length),r=[];for(;e>0n;)r.unshift(t[Number(e%n)]),e/=n;return r.join("")}(n.slice(r).reduce((e,t)=>256n*e+BigInt(t),0n),a),e.length]}},decode:(e,t=0)=>o.read(e,t)[0]})).decode(i))})),window.btoa(s)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),u=T((yield n("sign_messages",{addresses:[c],payloads:[d]})).signed_payloads[0]),h=A(u.slice(0,u.length-64)),f=A(u.slice(u.length-64));return{address:c,signed_message:0==h.length?d:h,signature:f}})}(r.sign_in_payload,i,p)),function(e,t,n){if("getCapabilities"===e)switch(n){case"legacy":{let e=["solana:signTransactions"];return!0===t.supports_clone_authorization&&e.push(N),Object.assign(Object.assign({},t),{features:e})}case"v1":return Object.assign(Object.assign({},t),{supports_sign_and_send_transactions:!0,supports_clone_authorization:t.features.includes(N)})}return t}(t,i,h)})}),e[t]),defineProperty:()=>!1,deleteProperty:()=>!1}));try{t((yield e(m)))}catch(e){r(e)}finally{u(),a.close()}}}}),y=()=>{u&&u(),d={__type:"connecting",associationKeypair:i},void 0===n&&(n=Date.now()),(a=new WebSocket(o,["com.solana.mobilewalletadapter.v1"])).addEventListener("open",p),a.addEventListener("close",g),a.addEventListener("error",m),a.addEventListener("message",w),u=()=>{window.clearTimeout(h),a.removeEventListener("open",p),a.removeEventListener("close",g),a.removeEventListener("error",m),a.removeEventListener("message",w)}};y()})})}(e,n?{baseUri:n}:void 0)}catch(e){throw z(this,lN,"f")!==r&&(yield new Promise(()=>{})),e instanceof Error&&"SolanaMobileWalletAdapterError"===e.name&&"ERROR_WALLET_NOT_FOUND"===e.code&&(yield z(this,lP,"f").call(this,this)),e}})),lz.set(this,()=>{if(!z(this,lA,"f"))throw Error("Wallet not connected");return{authToken:z(this,lA,"f").auth_token,chain:z(this,lA,"f").chain}}),lF.set(this,e=>e.map(e=>{var t,n;let r=Z(e.address);return{address:W.default.encode(r),publicKey:r,label:e.label,icon:e.icon,chains:null!=(t=e.chains)?t:z(this,lO,"f"),features:null!=(n=e.features)?n:X}})),lV.set(this,e=>H(this,void 0,void 0,function*(){let{authToken:t,chain:n}=z(this,lz,"f").call(this);try{let r=e.map(e=>J(e));return yield z(this,lH,"f").call(this,e=>H(this,void 0,void 0,function*(){return yield z(this,lW,"f").call(this,e,t,n),(yield e.signTransactions({payloads:r})).signed_payloads.map(Z)}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),lq.set(this,(e,t)=>H(this,void 0,void 0,function*(){let{authToken:n,chain:r}=z(this,lz,"f").call(this);try{return yield z(this,lH,"f").call(this,i=>H(this,void 0,void 0,function*(){let[a,o]=yield Promise.all([i.getCapabilities(),z(this,lW,"f").call(this,i,n,r)]);if(a.supports_sign_and_send_transactions){let n=J(e);return(yield i.signAndSendTransactions(Object.assign(Object.assign({},t),{payloads:[n]}))).signatures.map(Z)[0]}throw Error("connected wallet does not support signAndSendTransaction")}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),lY.set(this,(...e)=>H(this,void 0,void 0,function*(){let t=[];for(let n of e){let e=yield z(this,lq,"f").call(this,n.transaction,n.options);t.push({signature:e})}return t})),lG.set(this,(...e)=>H(this,void 0,void 0,function*(){return(yield z(this,lV,"f").call(this,e.map(({transaction:e})=>e))).map(e=>({signedTransaction:e}))})),lJ.set(this,(...e)=>H(this,void 0,void 0,function*(){let{authToken:t,chain:n}=z(this,lz,"f").call(this),r=e.map(({account:e})=>J(e.publicKey)),i=e.map(({message:e})=>J(e));try{return yield z(this,lH,"f").call(this,e=>H(this,void 0,void 0,function*(){return yield z(this,lW,"f").call(this,e,t,n),(yield e.signMessages({addresses:r,payloads:i})).signed_payloads.map(Z).map(e=>({signedMessage:e,signature:e.slice(-64)}))}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),lZ.set(this,(...e)=>H(this,void 0,void 0,function*(){let t=[];if(!(e.length>1))return[(yield z(this,lQ,"f").call(this,e[0]))];for(let n of e)t.push((yield z(this,lQ,"f").call(this,n)));return t})),lQ.set(this,e=>H(this,void 0,void 0,function*(){var t,n,r;F(this,lI,!0,"f");try{let i=yield z(this,lU,"f").call(this,Object.assign(Object.assign({},e),{domain:null!=(t=null==e?void 0:e.domain)?t:window.location.host}));if(!i.sign_in_result)throw Error("Sign in failed, no sign in result returned by wallet");let a=i.sign_in_result.address,o=i.accounts.find(e=>e.address==a);return{account:Object.assign(Object.assign({},null!=o?o:{address:W.default.encode(Z(a))}),{publicKey:Z(a),chains:null!=(n=null==o?void 0:o.chains)?n:z(this,lO,"f"),features:null!=(r=null==o?void 0:o.features)?r:i.capabilities.features}),signedMessage:Z(i.sign_in_result.signed_message),signature:Z(i.sign_in_result.signature)}}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}finally{F(this,lI,!1,"f")}})),F(this,lT,e.authorizationCache,"f"),F(this,l_,e.appIdentity,"f"),F(this,lO,e.chains,"f"),F(this,lk,e.chainSelector,"f"),F(this,lP,e.onWalletNotFound,"f"),F(this,lM,{[v.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:z(this,lY,"f")},[b.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:z(this,lG,"f")}},"f")}get version(){return z(this,lE,"f")}get name(){return z(this,lC,"f")}get url(){return z(this,lx,"f")}get icon(){return z(this,lS,"f")}get chains(){return z(this,lO,"f")}get features(){return Object.assign({[U.StandardConnect]:{version:"1.0.0",connect:z(this,lj,"f")},[B.StandardDisconnect]:{version:"1.0.0",disconnect:z(this,lK,"f")},[$]:{version:"1.0.0",on:z(this,lR,"f")},[y.SolanaSignMessage]:{version:"1.0.0",signMessage:z(this,lJ,"f")},[w]:{version:"1.0.0",signIn:z(this,lZ,"f")}},z(this,lM,"f"))}get accounts(){var e,t;return null!=(t=null==(e=z(this,lA,"f"))?void 0:e.accounts)?t:[]}get connected(){return!!z(this,lA,"f")}get isAuthorized(){return!!z(this,lA,"f")}get currentAuthorization(){return z(this,lA,"f")}get cachedAuthorizationResult(){return z(this,lT,"f").get()}}lb=new WeakMap,lE=new WeakMap,lC=new WeakMap,lx=new WeakMap,lS=new WeakMap,l_=new WeakMap,lA=new WeakMap,lT=new WeakMap,lI=new WeakMap,lN=new WeakMap,lO=new WeakMap,lk=new WeakMap,lM=new WeakMap,lP=new WeakMap,lR=new WeakMap,lj=new WeakMap,lU=new WeakMap,lB=new WeakMap,l$=new WeakMap,lW=new WeakMap,lK=new WeakMap,lH=new WeakMap,lz=new WeakMap,lF=new WeakMap,lV=new WeakMap,lq=new WeakMap,lY=new WeakMap,lG=new WeakMap,lJ=new WeakMap,lZ=new WeakMap,lQ=new WeakMap,lv=new WeakSet,lL=function(e,...t){var n;null==(n=z(this,lb,"f")[e])||n.forEach(e=>e.apply(null,t))},lD=function(e,t){var n;z(this,lb,"f")[e]=null==(n=z(this,lb,"f")[e])?void 0:n.filter(e=>t!==e)},new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakSet;Event,new WeakMap;class et extends G{constructor(){super(...arguments),this.contentStyles=er,this.contentHtml=en}initWithError(e){super.init(),this.populateError(e)}populateError(e){var t,n;let r=null==(t=this.dom)?void 0:t.getElementById("mobile-wallet-adapter-error-message"),i=null==(n=this.dom)?void 0:n.getElementById("mobile-wallet-adapter-error-action");if(r){if("SolanaMobileWalletAdapterError"===e.name)switch(e.code){case"ERROR_WALLET_NOT_FOUND":r.innerHTML="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",i&&i.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":r.innerHTML="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.",i&&(i.style.display="none");return}r.innerHTML=`An unexpected error occurred: ${e.message}`}else console.log("Failed to locate error dialog element")}}let en=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,er=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`,ei="SolanaMobileWalletAdapterDefaultAuthorizationCache";function ea(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}function eo(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function es(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}let el="standard:connect";function ec(e){return window.btoa(String.fromCharCode.call(null,...e))}function ed(e){switch(e){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return e}}class eu extends m{constructor(e,t){super(),lX.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),l0.set(this,void 0),l1.set(this,!1),l3.set(this,"undefined"!=typeof window&&window.isSecureContext&&"undefined"!=typeof document&&/android/i.test(navigator.userAgent)?u.WalletReadyState.Loadable:u.WalletReadyState.Unsupported),l2.set(this,void 0),l5.set(this,void 0),l4.set(this,void 0),l8.set(this,e=>ea(this,void 0,void 0,function*(){if(e.accounts&&e.accounts.length>0){eo(this,lX,"m",l9).call(this);let t=yield eo(this,l2,"f").call(this,e.accounts);t!==eo(this,l5,"f")&&(es(this,l5,t,"f"),es(this,l4,void 0,"f"),this.emit("connect",this.publicKey))}})),es(this,l2,e=>ea(this,void 0,void 0,function*(){var n;let r=yield t.addressSelector.select(e.map(({publicKey:e})=>ec(e)));return null!=(n=e.find(({publicKey:e})=>ec(e)===r))?n:e[0]}),"f"),es(this,l0,e,"f"),eo(this,l0,"f").features["standard:events"].on("change",eo(this,l8,"f")),this.name=eo(this,l0,"f").name,this.icon=eo(this,l0,"f").icon,this.url=eo(this,l0,"f").url}get publicKey(){var e;if(!eo(this,l4,"f")&&eo(this,l5,"f"))try{es(this,l4,new l.PublicKey(eo(this,l5,"f").publicKey),"f")}catch(e){throw new h.WalletPublicKeyError(e instanceof Error&&(null==e?void 0:e.message)||"Unknown error",e)}return null!=(e=eo(this,l4,"f"))?e:null}get connected(){return eo(this,l0,"f").connected}get connecting(){return eo(this,l1,"f")}get readyState(){return eo(this,l3,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return ea(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return ea(this,void 0,void 0,function*(){eo(this,lX,"m",l6).call(this,!0)})}connect(){return ea(this,void 0,void 0,function*(){eo(this,lX,"m",l6).call(this)})}performAuthorization(e){return ea(this,void 0,void 0,function*(){try{let t=yield eo(this,l0,"f").cachedAuthorizationResult;if(t)return yield eo(this,l0,"f").features[el].connect({silent:!0}),t;return e?yield eo(this,l0,"f").features[w].signIn(e):yield eo(this,l0,"f").features[el].connect(),yield yield eo(this,l0,"f").cachedAuthorizationResult}catch(e){throw new h.WalletConnectionError(e instanceof Error&&e.message||"Unknown error",e)}})}disconnect(){return ea(this,void 0,void 0,function*(){return yield eo(this,lX,"m",ct).call(this,()=>ea(this,void 0,void 0,function*(){es(this,l1,!1,"f"),es(this,l4,void 0,"f"),es(this,l5,void 0,"f"),yield eo(this,l0,"f").features["standard:disconnect"].disconnect(),this.emit("disconnect")}))})}signIn(e){return ea(this,void 0,void 0,function*(){return eo(this,lX,"m",ct).call(this,()=>ea(this,void 0,void 0,function*(){var t;if(eo(this,l3,"f")!==u.WalletReadyState.Installed&&eo(this,l3,"f")!==u.WalletReadyState.Loadable)throw new h.WalletNotReadyError;es(this,l1,!0,"f");try{let n=yield eo(this,l0,"f").features[w].signIn(Object.assign(Object.assign({},e),{domain:null!=(t=null==e?void 0:e.domain)?t:window.location.host}));if(n.length>0)return n[0];throw Error("Sign in failed, no sign in result returned by wallet")}catch(e){throw new h.WalletConnectionError(e instanceof Error&&e.message||"Unknown error",e)}finally{es(this,l1,!1,"f")}}))})}signMessage(e){return ea(this,void 0,void 0,function*(){return yield eo(this,lX,"m",ct).call(this,()=>ea(this,void 0,void 0,function*(){let t=eo(this,lX,"m",l7).call(this);try{return(yield eo(this,l0,"f").features[y.SolanaSignMessage].signMessage({account:t,message:e}))[0].signature}catch(e){throw new h.WalletSignMessageError(null==e?void 0:e.message,e)}}))})}sendTransaction(e,t,n){return ea(this,void 0,void 0,function*(){return yield eo(this,lX,"m",ct).call(this,()=>ea(this,void 0,void 0,function*(){let r=eo(this,lX,"m",l7).call(this);try{if(v.SolanaSignAndSendTransaction in eo(this,l0,"f").features){let t=ed(eo(this,l0,"f").currentAuthorization.chain),[i]=(yield eo(this,l0,"f").features[v.SolanaSignAndSendTransaction].signAndSendTransaction({account:r,transaction:e.serialize(),chain:t,options:n?{skipPreflight:n.skipPreflight,maxRetries:n.maxRetries}:void 0})).map(e=>ec(e.signature));return i}{let[r]=yield eo(this,lX,"m",ce).call(this,[e]);if("version"in r)return yield t.sendTransaction(r);{let e=r.serialize();return yield t.sendRawTransaction(e,Object.assign(Object.assign({},n),{preflightCommitment:function(){let e,r;switch(t.commitment){case"confirmed":case"finalized":case"processed":e=t.commitment;break;default:e="finalized"}switch(null==n?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":r=n.preflightCommitment;break;case void 0:r=e;break;default:r="finalized"}let i="finalized"===r?2:+("confirmed"===r),a="finalized"===e?2:+("confirmed"===e);return i<a?r:e}()}))}}}catch(e){throw new h.WalletSendTransactionError(null==e?void 0:e.message,e)}}))})}signTransaction(e){return ea(this,void 0,void 0,function*(){return yield eo(this,lX,"m",ct).call(this,()=>ea(this,void 0,void 0,function*(){let[t]=yield eo(this,lX,"m",ce).call(this,[e]);return t}))})}signAllTransactions(e){return ea(this,void 0,void 0,function*(){return yield eo(this,lX,"m",ct).call(this,()=>ea(this,void 0,void 0,function*(){return yield eo(this,lX,"m",ce).call(this,e)}))})}}l0=new WeakMap,l1=new WeakMap,l3=new WeakMap,l2=new WeakMap,l5=new WeakMap,l4=new WeakMap,l8=new WeakMap,lX=new WeakSet,l6=function(e=!1){return ea(this,void 0,void 0,function*(){if(!this.connecting&&!this.connected)return yield eo(this,lX,"m",ct).call(this,()=>ea(this,void 0,void 0,function*(){if(eo(this,l3,"f")!==u.WalletReadyState.Installed&&eo(this,l3,"f")!==u.WalletReadyState.Loadable)throw new h.WalletNotReadyError;es(this,l1,!0,"f");try{yield eo(this,l0,"f").features[el].connect({silent:e})}catch(e){throw new h.WalletConnectionError(e instanceof Error&&e.message||"Unknown error",e)}finally{es(this,l1,!1,"f")}}))})},l9=function(){eo(this,l3,"f")!==u.WalletReadyState.Installed&&this.emit("readyStateChange",es(this,l3,u.WalletReadyState.Installed,"f"))},l7=function(){if(!eo(this,l0,"f").isAuthorized||!eo(this,l5,"f"))throw new h.WalletNotConnectedError;return eo(this,l5,"f")},ce=function(e){return ea(this,void 0,void 0,function*(){let t=eo(this,lX,"m",l7).call(this);try{if(b.SolanaSignTransaction in eo(this,l0,"f").features)return eo(this,l0,"f").features[b.SolanaSignTransaction].signTransaction(...e.map(e=>({account:t,transaction:e.serialize()}))).then(e=>e.map(e=>{let t=e.signedTransaction,n=t[0],r=l.VersionedMessage.deserializeMessageVersion(t.slice(64*n+1,t.length));return"legacy"===r?l.Transaction.from(t):l.VersionedTransaction.deserialize(t)}));throw Error("Connected wallet does not support signing transactions")}catch(e){throw new h.WalletSignTransactionError(null==e?void 0:e.message,e)}})},ct=function(e){return ea(this,void 0,void 0,function*(){try{return yield e()}catch(e){throw this.emit("error",e),e}})};class eh extends eu{constructor(e){var t;const n=ed(null!=(t=e.chain)?t:e.cluster);super(new ee({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>ea(this,void 0,void 0,function*(){return yield e.authorizationResultCache.get()}),clear:e.authorizationResultCache.clear},chains:[n],chainSelector:{select(e){return H(this,void 0,void 0,function*(){return 1===e.length?e[0]:e.includes(K)?K:e[0]})}},onWalletNotFound:()=>ea(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:n})}}class ef extends eh{}function ep(e){return ea(this,void 0,void 0,function*(){return function(){return H(this,void 0,void 0,function*(){if("undefined"!=typeof window){let e=window.navigator.userAgent.toLowerCase(),t=new et;e.includes("wv")?t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),t.open()}})}()})}let eg=function(e){return U.StandardConnect in e.features&&$ in e.features&&(v.SolanaSignAndSendTransaction in e.features||b.SolanaSignTransaction in e.features)};var em=u;function ew(e){switch(e){case"processed":case"confirmed":case"finalized":case void 0:return e;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap;let ey=function(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let n=0;n<e.length;n++){let r=e.charAt(n),i=r.charCodeAt(0);if(255!==t[i])throw TypeError(r+" is ambiguous");t[i]=n}let n=e.length,r=e.charAt(0),i=Math.log(n)/Math.log(256),a=Math.log(256)/Math.log(n);function o(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let a=0,o=0,s=0;for(;e[a]===r;)o++,a++;let l=(e.length-a)*i+1>>>0,c=new Uint8Array(l);for(;a<e.length;){let r=e.charCodeAt(a);if(r>255)return;let i=t[r];if(255===i)return;let o=0;for(let e=l-1;(0!==i||o<s)&&-1!==e;e--,o++)i+=n*c[e]>>>0,c[e]=i%256>>>0,i=i/256>>>0;if(0!==i)throw Error("Non-zero carry");s=o,a++}let d=l-s;for(;d!==l&&0===c[d];)d++;let u=new Uint8Array(o+(l-d)),h=o;for(;d!==l;)u[h++]=c[d++];return u}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,o=0,s=0,l=t.length;for(;s!==l&&0===t[s];)s++,i++;let c=(l-s)*a+1>>>0,d=new Uint8Array(c);for(;s!==l;){let e=t[s],r=0;for(let t=c-1;(0!==e||r<o)&&-1!==t;t--,r++)e+=256*d[t]>>>0,d[t]=e%n>>>0,e=e/n>>>0;if(0!==e)throw Error("Non-zero carry");o=r,s++}let u=c-o;for(;u!==c&&0===d[u];)u++;let h=r.repeat(i);for(;u<c;++u)h+=e.charAt(d[u]);return h},decodeUnsafe:o,decode:function(e){let t=o(e);if(t)return t;throw Error("Non-base"+n+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var ev=function(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},eb=function(e,t,n,r,i){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};class eE extends em.BaseWalletAdapter{get name(){return ev(this,cc,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return ev(this,cc,"f").icon}get readyState(){return ev(this,cd,"f")}get publicKey(){return ev(this,ci,"f")}get connecting(){return ev(this,ca,"f")}get supportedTransactionVersions(){return ev(this,cl,"f")}get wallet(){return ev(this,cc,"f")}get standard(){return!0}constructor({wallet:e}){super(),cn.add(this),cr.set(this,void 0),ci.set(this,void 0),ca.set(this,void 0),co.set(this,void 0),cs.set(this,void 0),cl.set(this,void 0),cc.set(this,void 0),cd.set(this,"undefined"==typeof window||"undefined"==typeof document?em.WalletReadyState.Unsupported:em.WalletReadyState.Installed),cg.set(this,e=>{if("accounts"in e){let e=ev(this,cc,"f").accounts[0];ev(this,cr,"f")&&!ev(this,co,"f")&&e!==ev(this,cr,"f")&&(e?ev(this,cn,"m",ch).call(this,e):(this.emit("error",new h.WalletDisconnectedError),ev(this,cn,"m",cf).call(this)))}"features"in e&&ev(this,cn,"m",cp).call(this)}),eb(this,cc,e,"f"),eb(this,cr,null,"f"),eb(this,ci,null,"f"),eb(this,ca,!1,"f"),eb(this,co,!1,"f"),eb(this,cs,ev(this,cc,"f").features[$].on("change",ev(this,cg,"f")),"f"),ev(this,cn,"m",cp).call(this)}destroy(){eb(this,cr,null,"f"),eb(this,ci,null,"f"),eb(this,ca,!1,"f"),eb(this,co,!1,"f");let e=ev(this,cs,"f");e&&(eb(this,cs,null,"f"),e())}async autoConnect(){return ev(this,cn,"m",cu).call(this,{silent:!0})}async connect(){return ev(this,cn,"m",cu).call(this)}async disconnect(){if(B.StandardDisconnect in ev(this,cc,"f").features)try{eb(this,co,!0,"f"),await ev(this,cc,"f").features[B.StandardDisconnect].disconnect()}catch(e){this.emit("error",new h.WalletDisconnectionError(e?.message,e))}finally{eb(this,co,!1,"f")}ev(this,cn,"m",cf).call(this)}async sendTransaction(e,t,n={}){try{var r;let i,a=ev(this,cr,"f");if(!a)throw new h.WalletNotConnectedError;if(v.SolanaSignAndSendTransaction in ev(this,cc,"f").features)if(a.features.includes(v.SolanaSignAndSendTransaction))i=v.SolanaSignAndSendTransaction;else if(b.SolanaSignTransaction in ev(this,cc,"f").features&&a.features.includes(b.SolanaSignTransaction))i=b.SolanaSignTransaction;else throw new h.WalletAccountError;else if(b.SolanaSignTransaction in ev(this,cc,"f").features){if(!a.features.includes(b.SolanaSignTransaction))throw new h.WalletAccountError;i=b.SolanaSignTransaction}else throw new h.WalletConfigError;let o=(r=t.rpcEndpoint).includes("https://api.mainnet-beta.solana.com")?K:/\bdevnet\b/i.test(r)?"solana:devnet":/\btestnet\b/i.test(r)?"solana:testnet":/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?"solana:localnet":K;if(!a.chains.includes(o))throw new h.WalletSendTransactionError;try{let r,{signers:s,...l}=n;if(f(e)?(s?.length&&e.sign(s),r=e.serialize()):(e=await this.prepareTransaction(e,t,l),s?.length&&e.partialSign(...s),r=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),i===v.SolanaSignAndSendTransaction){let[e]=await ev(this,cc,"f").features[v.SolanaSignAndSendTransaction].signAndSendTransaction({account:a,chain:o,transaction:r,options:{preflightCommitment:ew(l.preflightCommitment||t.commitment),skipPreflight:l.skipPreflight,maxRetries:l.maxRetries,minContextSlot:l.minContextSlot}});return ey.encode(e.signature)}{let[e]=await ev(this,cc,"f").features[b.SolanaSignTransaction].signTransaction({account:a,chain:o,transaction:r,options:{preflightCommitment:ew(l.preflightCommitment||t.commitment),minContextSlot:l.minContextSlot}});return await t.sendRawTransaction(e.signedTransaction,{...l,preflightCommitment:ew(l.preflightCommitment||t.commitment)})}}catch(e){if(e instanceof h.WalletError)throw e;throw new h.WalletSendTransactionError(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}cr=new WeakMap,ci=new WeakMap,ca=new WeakMap,co=new WeakMap,cs=new WeakMap,cl=new WeakMap,cc=new WeakMap,cd=new WeakMap,cg=new WeakMap,cn=new WeakSet,cu=async function(e){try{if(this.connected||this.connecting)return;if(ev(this,cd,"f")!==em.WalletReadyState.Installed)throw new h.WalletNotReadyError;if(eb(this,ca,!0,"f"),!ev(this,cc,"f").accounts.length)try{await ev(this,cc,"f").features[U.StandardConnect].connect(e)}catch(e){throw new h.WalletConnectionError(e?.message,e)}let t=ev(this,cc,"f").accounts[0];if(!t)throw new h.WalletAccountError;ev(this,cn,"m",ch).call(this,t)}catch(e){throw this.emit("error",e),e}finally{eb(this,ca,!1,"f")}},ch=function(e){let t;try{t=new l.PublicKey(e.address)}catch(e){throw new h.WalletPublicKeyError(e?.message,e)}eb(this,cr,e,"f"),eb(this,ci,t,"f"),ev(this,cn,"m",cp).call(this),this.emit("connect",t)},cf=function(){eb(this,cr,null,"f"),eb(this,ci,null,"f"),ev(this,cn,"m",cp).call(this),this.emit("disconnect")},cp=function(){let e=v.SolanaSignAndSendTransaction in ev(this,cc,"f").features?ev(this,cc,"f").features[v.SolanaSignAndSendTransaction].supportedTransactionVersions:ev(this,cc,"f").features[b.SolanaSignTransaction].supportedTransactionVersions;eb(this,cl,!function(e,t){if(e===t)return!0;let n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}(e,["legacy"])?new Set(e):null,"f"),b.SolanaSignTransaction in ev(this,cc,"f").features&&ev(this,cr,"f")?.features.includes(b.SolanaSignTransaction)?(this.signTransaction=ev(this,cn,"m",cm),this.signAllTransactions=ev(this,cn,"m",cw)):(delete this.signTransaction,delete this.signAllTransactions),y.SolanaSignMessage in ev(this,cc,"f").features&&ev(this,cr,"f")?.features.includes(y.SolanaSignMessage)?this.signMessage=ev(this,cn,"m",cy):delete this.signMessage,w in ev(this,cc,"f").features?this.signIn=ev(this,cn,"m",cv):delete this.signIn},cm=async function(e){try{let t=ev(this,cr,"f");if(!t)throw new h.WalletNotConnectedError;if(!(b.SolanaSignTransaction in ev(this,cc,"f").features))throw new h.WalletConfigError;if(!t.features.includes(b.SolanaSignTransaction))throw new h.WalletAccountError;try{let n=(await ev(this,cc,"f").features[b.SolanaSignTransaction].signTransaction({account:t,transaction:f(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return f(e)?l.VersionedTransaction.deserialize(n):l.Transaction.from(n)}catch(e){if(e instanceof h.WalletError)throw e;throw new h.WalletSignTransactionError(e?.message,e)}}catch(e){throw this.emit("error",e),e}},cw=async function(e){try{let t=ev(this,cr,"f");if(!t)throw new h.WalletNotConnectedError;if(!(b.SolanaSignTransaction in ev(this,cc,"f").features))throw new h.WalletConfigError;if(!t.features.includes(b.SolanaSignTransaction))throw new h.WalletAccountError;try{let n=await ev(this,cc,"f").features[b.SolanaSignTransaction].signTransaction(...e.map(e=>({account:t,transaction:f(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((e,t)=>{let r=n[t].signedTransaction;return f(e)?l.VersionedTransaction.deserialize(r):l.Transaction.from(r)})}catch(e){throw new h.WalletSignTransactionError(e?.message,e)}}catch(e){throw this.emit("error",e),e}},cy=async function(e){try{let t=ev(this,cr,"f");if(!t)throw new h.WalletNotConnectedError;if(!(y.SolanaSignMessage in ev(this,cc,"f").features))throw new h.WalletConfigError;if(!t.features.includes(y.SolanaSignMessage))throw new h.WalletAccountError;try{return(await ev(this,cc,"f").features[y.SolanaSignMessage].signMessage({account:t,message:e}))[0].signature}catch(e){throw new h.WalletSignMessageError(e?.message,e)}}catch(e){throw this.emit("error",e),e}},cv=async function(e={}){try{let t;if(!(w in ev(this,cc,"f").features))throw new h.WalletConfigError;try{[t]=await ev(this,cc,"f").features[w].signIn(e)}catch(e){throw new h.WalletSignInError(e?.message,e)}if(!t)throw new h.WalletSignInError;return ev(this,cn,"m",ch).call(this,t.account),t}catch(e){throw this.emit("error",e),e}};var eC=e.i(66829);function ex(e){let t=(0,s.useRef)(void 0);return void 0===t.current&&(t.current={value:e()}),t.current.value}function eS(e){return e.filter(eg).map(e=>new eE({wallet:e}))}(ld=cb||(cb={}))[ld.DESKTOP_WEB=0]="DESKTOP_WEB",ld[ld.MOBILE_WEB=1]="MOBILE_WEB";var e_=h;class eA extends e_.WalletError{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}var eT=e.i(67762);function eI({children:e,wallets:t,adapter:n,isUnloadingRef:r,onAutoConnectRequest:i,onConnectError:a,onError:o,onSelectWallet:l}){let c=(0,s.useRef)(!1),[d,f]=(0,s.useState)(!1),p=(0,s.useRef)(!1),[g,m]=(0,s.useState)(!1),[w,y]=(0,s.useState)(()=>n?.publicKey??null),[v,b]=(0,s.useState)(()=>n?.connected??!1),E=(0,s.useRef)(o);(0,s.useEffect)(()=>(E.current=o,()=>{E.current=void 0}),[o]);let C=(0,s.useRef)((e,t)=>(!r.current&&(E.current?E.current(e,t):(console.error(e,t),e instanceof h.WalletNotReadyError&&"undefined"!=typeof window&&t&&window.open(t.url,"_blank"))),e)),[x,S]=(0,s.useState)(()=>t.map(e=>({adapter:e,readyState:e.readyState})).filter(({readyState:e})=>e!==u.WalletReadyState.Unsupported));(0,s.useEffect)(()=>{function e(e){S(t=>{let n=t.findIndex(({adapter:e})=>e===this);if(-1===n)return t;let{adapter:r}=t[n];return[...t.slice(0,n),{adapter:r,readyState:e},...t.slice(n+1)].filter(({readyState:e})=>e!==u.WalletReadyState.Unsupported)})}return S(e=>t.map((t,n)=>{let r=e[n];return r&&r.adapter===t&&r.readyState===t.readyState?r:{adapter:t,readyState:t.readyState}}).filter(({readyState:e})=>e!==u.WalletReadyState.Unsupported)),t.forEach(t=>t.on("readyStateChange",e,t)),()=>{t.forEach(t=>t.off("readyStateChange",e,t))}},[n,t]);let _=(0,s.useMemo)(()=>x.find(e=>e.adapter===n)??null,[n,x]);(0,s.useEffect)(()=>{if(!n)return;let e=e=>{y(e),c.current=!1,f(!1),b(!0),p.current=!1,m(!1)},t=()=>{r.current||(y(null),c.current=!1,f(!1),b(!1),p.current=!1,m(!1))},i=e=>{C.current(e,n)};return n.on("connect",e),n.on("disconnect",t),n.on("error",i),()=>{n.off("connect",e),n.off("disconnect",t),n.off("error",i),t()}},[n,r]);let A=(0,s.useRef)(!1);(0,s.useEffect)(()=>()=>{A.current=!1},[n]),(0,s.useEffect)(()=>{A.current||c.current||v||!i||_?.readyState!==u.WalletReadyState.Installed&&_?.readyState!==u.WalletReadyState.Loadable||(c.current=!0,f(!0),A.current=!0,async function(){try{await i()}catch{a()}finally{f(!1),c.current=!1}}())},[v,i,a,_]);let T=(0,s.useCallback)(async(e,t,r)=>{if(!n)throw C.current(new eA);if(!v)throw C.current(new h.WalletNotConnectedError,n);return await n.sendTransaction(e,t,r)},[n,v]),I=(0,s.useMemo)(()=>n&&"signTransaction"in n?async e=>{if(!v)throw C.current(new h.WalletNotConnectedError,n);return await n.signTransaction(e)}:void 0,[n,v]),N=(0,s.useMemo)(()=>n&&"signAllTransactions"in n?async e=>{if(!v)throw C.current(new h.WalletNotConnectedError,n);return await n.signAllTransactions(e)}:void 0,[n,v]),O=(0,s.useMemo)(()=>n&&"signMessage"in n?async e=>{if(!v)throw C.current(new h.WalletNotConnectedError,n);return await n.signMessage(e)}:void 0,[n,v]),k=(0,s.useMemo)(()=>n&&"signIn"in n?async e=>await n.signIn(e):void 0,[n]),M=(0,s.useCallback)(async()=>{if(c.current||p.current||_?.adapter.connected)return;if(!_)throw C.current(new eA);let{adapter:e,readyState:t}=_;if(t!==u.WalletReadyState.Installed&&t!==u.WalletReadyState.Loadable)throw C.current(new h.WalletNotReadyError,e);c.current=!0,f(!0);try{await e.connect()}catch(e){throw a(),e}finally{f(!1),c.current=!1}},[a,_]),P=(0,s.useCallback)(async()=>{if(!p.current&&n){p.current=!0,m(!0);try{await n.disconnect()}finally{m(!1),p.current=!1}}},[n]);return s.default.createElement(eT.WalletContext.Provider,{value:{autoConnect:!!i,wallets:x,wallet:_,publicKey:w,connected:v,connecting:d,disconnecting:g,select:l,connect:M,disconnect:P,sendTransaction:T,signTransaction:I,signAllTransactions:N,signMessage:O,signIn:k}},e)}function eN(e){return function({adapters:e,userAgentString:t}){return e.some(e=>e.name!==Q&&e.readyState===u.WalletReadyState.Installed)?cb.DESKTOP_WEB:t&&/android/i.test(t)&&!/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)?cb.MOBILE_WEB:cb.DESKTOP_WEB}({adapters:e,userAgentString:(void 0===n&&(n=globalThis.navigator?.userAgent??null),n)})===cb.MOBILE_WEB}function eO({children:e,wallets:t,autoConnect:n,localStorageKey:r="walletName",onError:i}){let a,o,l,{connection:d}=(0,c.useConnection)(),u=function(e){var t;let n,r=ex(()=>new Set),{get:i,on:a}=ex(()=>(0,eC.DEPRECATED_getWallets)()),[o,l]=(0,s.useState)(()=>eS(i()));(0,s.useEffect)(()=>{let e=[a("register",(...e)=>l(t=>[...t,...eS(e)])),a("unregister",(...e)=>l(t=>t.filter(t=>e.some(e=>e===t.wallet))))];return()=>e.forEach(e=>e())},[a]);let c=(t=o,n=(0,s.useRef)(void 0),(0,s.useEffect)(()=>{n.current=t}),n.current);return(0,s.useEffect)(()=>{if(!c)return;let e=new Set(o);new Set(c.filter(t=>!e.has(t))).forEach(e=>e.destroy())},[c,o]),(0,s.useEffect)(()=>()=>o.forEach(e=>e.destroy()),[]),(0,s.useMemo)(()=>[...o,...e.filter(({name:e})=>!o.some(t=>t.name===e)||(r.has(e)||(r.add(e),console.warn(`${e} was registered as a Standard Wallet. The Wallet Adapter for ${e} can be removed from your app.`)),!1))],[o,e,r])}(t),h=(0,s.useMemo)(()=>{var e;if(!eN(u))return null;let t=u.find(e=>e.name===Q);return t?t:new ef({addressSelector:{select(e){return ea(this,void 0,void 0,function*(){return e[0]})}},appIdentity:{uri:function(){let e=globalThis.location;if(e)return`${e.protocol}//${e.host}`}()},authorizationResultCache:function(){let e;try{e=window.localStorage}catch(e){}return{clear(){return H(this,void 0,void 0,function*(){if(e)try{e.removeItem(ei)}catch(e){}})},get(){return H(this,void 0,void 0,function*(){if(e)try{let t=JSON.parse(e.getItem(ei));if(!t||!t.accounts)return t||void 0;{let e=t.accounts.map(e=>Object.assign(Object.assign({},e),{publicKey:"publicKey"in e?new Uint8Array(Object.values(e.publicKey)):W.default.decode(e.address)}));return Object.assign(Object.assign({},t),{accounts:e})}}catch(e){}})},set(t){return H(this,void 0,void 0,function*(){if(e)try{e.setItem(ei,JSON.stringify(t))}catch(e){}})}}}(),cluster:(e=d?.rpcEndpoint)?/devnet/i.test(e)?"devnet":/testnet/i.test(e)?"testnet":"mainnet-beta":"mainnet-beta",onWalletNotFound:ep})},[u,d?.rpcEndpoint]),f=(0,s.useMemo)(()=>null==h||-1!==u.indexOf(h)?u:[h,...u],[u,h]),[p,g]=(o=(a=(0,s.useState)(()=>{try{let e=localStorage.getItem(r);if(e)return JSON.parse(e)}catch(e){"undefined"!=typeof window&&console.error(e)}return null}))[0],l=(0,s.useRef)(!0),(0,s.useEffect)(()=>{if(l.current){l.current=!1;return}try{null===o?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(o))}catch(e){"undefined"!=typeof window&&console.error(e)}},[o,r]),a),m=(0,s.useMemo)(()=>f.find(e=>e.name===p)??null,[f,p]),w=(0,s.useCallback)(e=>{p!==e&&(m&&m.name!==Q&&m.disconnect(),g(e))},[m,g,p]);(0,s.useEffect)(()=>{if(m)return m.on("disconnect",e),()=>{m.off("disconnect",e)};function e(){b.current||g(null)}},[m,u,g,p]);let y=(0,s.useRef)(!1),v=(0,s.useMemo)(()=>{if(n&&m)return async()=>{(!0===n||await n(m))&&(y.current?await m.connect():await m.autoConnect())}},[n,m]),b=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(p===Q&&eN(u)){b.current=!1;return}function e(){b.current=!0}return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[u,p]);let E=(0,s.useCallback)(()=>{m&&w(null)},[m,w]),C=(0,s.useCallback)(e=>{y.current=!0,w(e)},[w]);return s.default.createElement(eI,{wallets:f,adapter:m,isUnloadingRef:b,onAutoConnectRequest:v,onConnectError:E,onError:i,onSelectWallet:C},e)}var ek=e.i(34807);let eM={SOLANA_RPC_URL:"https://broken-solitary-meme.solana-mainnet.quiknode.pro/5f9aee0d3c7a616d84b7e0b45f66c95c3582051a/",SOLANA_NETWORK:"mainnet-beta",JUPITER_API_KEY:o.default.env.NEXT_PUBLIC_JUPITER_API_KEY||""};var eP=e.i(67034),eR=e.i(71410);let eL={hideWalletDiscovery:!1,connectors:{[eR.EVM_CONNECTORS.AUTH]:{label:"Auth",showOnModal:!0}}};var eD=e.i(9428),ej=e.i(11577),eU=e.i(503),eB=e.i(3923),e$=e.i(79383),eW=e.i(31317),eK=e.i(25243),eH=e.i(14863),ez=e.i(6170),eF=e.i(26010),eV=e.i(86325),eq=eV.default.getLogger("customauth");let eY={[eK.AUTH_CONNECTION.APPLE]:"apple",[eK.AUTH_CONNECTION.GITHUB]:"github",[eK.AUTH_CONNECTION.LINKEDIN]:"linkedin",[eK.AUTH_CONNECTION.TWITTER]:"twitter",[eK.AUTH_CONNECTION.LINE]:"line",[eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS]:"email",[eK.AUTH_CONNECTION.SMS_PASSWORDLESS]:"sms"},eG=e=>e.href.endsWith("/")?e.href:`${e.href}/`,eJ=()=>Math.random().toString(36).slice(2),eZ={webWorkerSupport:!1};function eQ(e,t){return t?e:e.toLowerCase()}let eX=(e,t,n,r=!0)=>{let{name:i,sub:a}=e;if(n)return eQ(e[n],r);switch(t){case eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS:case eK.AUTH_CONNECTION.SMS_PASSWORDLESS:case eK.AUTH_CONNECTION.AUTHENTICATOR:return eQ(i,r);case eK.AUTH_CONNECTION.GITHUB:case eK.AUTH_CONNECTION.TWITTER:case eK.AUTH_CONNECTION.APPLE:case eK.AUTH_CONNECTION.LINKEDIN:case eK.AUTH_CONNECTION.LINE:case eK.AUTH_CONNECTION.WECHAT:case eK.AUTH_CONNECTION.KAKAO:case eK.AUTH_CONNECTION.FARCASTER:case eK.AUTH_CONNECTION.CUSTOM:return eQ(a,r);default:throw Error("Invalid login type to get auth connection id")}};function e0(e){let t;try{t=window[e];let n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}function e1(){let e=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY,n=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,i=Math.abs((n-1200)/2/1+e),a=Math.abs((r-700)/2/1+t);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=1200,top=${a},left=${i}`}function e3(e){let{baseURL:t,query:n,hash:r}=e,i=new URL(t);return n&&Object.keys(n).forEach(e=>{i.searchParams.append(e,n[e])}),r&&(i.hash=new URL(e3({baseURL:t,query:r})).searchParams.toString()),i.toString()}let e2=e=>{try{return new URL(decodeURIComponent(e))}catch(t){throw Error(`${(null==t?void 0:t.message)||""}, Note: Your jwt domain: (i.e ${e}) must have http:// or https:// prefix`)}};function e5(e){let t;return(e===eK.AUTH_CONNECTION.FACEBOOK||e===eK.AUTH_CONNECTION.LINE)&&((t=eF.default.getParser(navigator.userAgent).getPlatform()).type===eF.default.PLATFORMS_MAP.tablet||t.type===eF.default.PLATFORMS_MAP.mobile)?3e4:1e3}function e4(e){let[t,n]=e.split(".");return{header:JSON.parse(ez.default.decode(t)),payload:JSON.parse(ez.default.decode(n))}}class e8{constructor(){(0,ej.default)(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}}class e6{constructor(e,t){(0,ej.default)(this,"storage",void 0),(0,ej.default)(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch{}}static getInstance(e,t="local"){if(!this.instanceMap.has(e)){let n;n="local"===t&&e0("localStorage")?window.localStorage:"session"===t&&e0("sessionStorage")?window.sessionStorage:new e8,this.instanceMap.set(e,new this(e,n))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){let e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){let n=JSON.parse(this.storage.getItem(this._storeKey)||"{}");n[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(n))}}(0,ej.default)(e6,"instanceMap",new Map);var e9=e.i(30860),e7=e.i(50449),te=e.i(23184),tt=e.i(67888),tn=e.i(24154),tr=e.i(36020),ti=e.i(77716);let ta=new ti.ec("secp256k1"),to=globalThis.crypto||globalThis.msCrypto||{},ts=to.subtle||to.webkitSubtle,tl=eP.Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),tc=eP.Buffer.alloc(32,0);function td(e,t){if(!e)throw Error(t||"Assertion failed")}function tu(e){return!!eP.Buffer.isBuffer(e)&&32===e.length&&e.compare(tc)>0&&0>e.compare(tl)}function th(e){if(void 0===to.getRandomValues)return eP.Buffer.from(to.randomBytes(e));let t=new Uint8Array(e);return to.getRandomValues(t),eP.Buffer.from(t)}async function tf(e){return new Uint8Array(to.createHash?to.createHash("sha512").update(e).digest():await ts.digest("SHA-512",e))}function tp(e){return async function(t,n,r){if(ts&&ts[e]&&ts.importKey){let i=await ts.importKey("raw",n,{name:"AES-CBC"},!1,[e]),a=await ts[e]({name:"AES-CBC",iv:t},i,r);return eP.Buffer.from(new Uint8Array(a))}if("encrypt"===e&&to.createCipheriv){let e=to.createCipheriv("aes-256-cbc",n,t),i=e.update(r),a=e.final();return eP.Buffer.concat([i,a])}if("decrypt"===e&&to.createDecipheriv){let e=to.createDecipheriv("aes-256-cbc",n,t),i=e.update(r),a=e.final();return eP.Buffer.concat([i,a])}throw Error(`Unsupported operation: ${e}`)}}let tg=tp("encrypt"),tm=tp("decrypt");async function tw(e,t){if(!to.createHmac){let n=await ts.importKey("raw",new Uint8Array(e),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign","verify"]),r=await ts.sign("HMAC",n,t);return eP.Buffer.from(new Uint8Array(r))}let n=to.createHmac("sha256",eP.Buffer.from(e));return n.update(t),n.digest()}async function ty(e,t,n){var r=await tw(e,t);if(r.length!==n.length)return!1;let i=0;for(let e=0;e<r.length;e++)i|=r[e]^n[e];return 0===i}let tv=function(){let e=th(32);for(;!tu(e);)e=th(32);return e},tb=function(e){return tx(e),eP.Buffer.from(ta.keyFromPrivate(e).getPublic("array"))},tE=async function(e,t){return tx(e),td(t.length>0,"Message should not be empty"),td(t.length<=32,"Message is too long"),eP.Buffer.from(ta.sign(t,e,{canonical:!0}).toDER())},tC=function(e){td(65===e.length||33===e.length,"Bad public key: expected 65 or 33 bytes, got "+e.length),65===e.length&&td(4===e[0],"Bad public key: expected first byte 4, got "+e[0]),33===e.length&&td(2===e[0]||3===e[0],"Bad public key: expected first byte 2 or 3, got "+e[0])},tx=function(e){td(eP.Buffer.isBuffer(e),"Bad private key: expected Buffer"),td(32===e.length,"Bad private key: expected 32 bytes, got "+e.length),td(tu(e),"Bad private key: out of range")},tS=async function(e,t,n){tx(e),tC(t);let r=ta.keyFromPrivate(e),i=ta.keyFromPublic(t),a=r.derive(i.getPublic());return n?eP.Buffer.from(a.toString(16,64),"hex"):eP.Buffer.from(a.toArray())},t_=async function(e,t,n){let r=(n=n||{}).ephemPrivateKey||th(32);for(;!tu(r);)r=n.ephemPrivateKey||th(32);let i=tb(r),a=await tS(r,e,n.padding),o=await tf(a),s=n.iv||th(16),l=o.slice(0,32),c=o.slice(32),d=await tg(s,eP.Buffer.from(l),t),u=eP.Buffer.concat([s,i,d]);return{iv:s,ephemPublicKey:i,ciphertext:d,mac:await tw(eP.Buffer.from(c),u)}},tA=async function(e,t,n){let r=await tS(e,t.ephemPublicKey,n),i=await tf(r),a=i.slice(0,32),o=i.slice(32),s=eP.Buffer.concat([t.iv,t.ephemPublicKey,t.ciphertext]),l=await ty(eP.Buffer.from(o),s,t.mac);if(!l&&!n)return tA(e,t,!0);if(!l&&!0===n)throw Error("bad MAC after trying padded");let c=await tm(t.iv,eP.Buffer.from(a),t.ciphertext);return eP.Buffer.from(new Uint8Array(c))};var tT=e.i(93121),tI=e.i(22232);function tN(e){return eP.Buffer.from((0,tI.keccak256)(e))}let tO=new ti.ec("secp256k1");async function tk(e,t){var n;let r=JSON.stringify(t),i=eP.Buffer.from(r,"utf-8");return JSON.stringify((n=await t_(tb(eP.Buffer.from(e,"hex")),i),{iv:eP.Buffer.from(n.iv).toString("hex"),ephemPublicKey:eP.Buffer.from(n.ephemPublicKey).toString("hex"),ciphertext:eP.Buffer.from(n.ciphertext).toString("hex"),mac:eP.Buffer.from(n.mac).toString("hex")}))}async function tM(e,t){var n;let r=(n=JSON.parse(t),{iv:eP.Buffer.from(n.iv,"hex"),ephemPublicKey:eP.Buffer.from(n.ephemPublicKey,"hex"),ciphertext:eP.Buffer.from(n.ciphertext,"hex"),mac:eP.Buffer.from(n.mac,"hex")}),i=tO.keyFromPrivate(e);return JSON.parse((await tA(eP.Buffer.from(i.getPrivate().toString("hex",64),"hex"),r)).toString("utf-8"))}var tP=e.i(96085),tR=eV.default.getLogger("SecurePubSub");class tL{constructor(e={}){(0,ej.default)(this,"options",void 0),(0,ej.default)(this,"SOCKET_CONN",null),this.options=e,this.options.timeout=e.timeout||600,this.options.serverUrl=e.serverUrl||"https://api.web3auth.io/session-service",this.options.socketUrl=e.socketUrl||"https://session.web3auth.io",this.options.enableLogging=e.enableLogging||!1,this.options.namespace=e.namespace||"",this.options.sameIpCheck=e.sameIpCheck||!1,this.options.allowedOrigin=e.allowedOrigin||"*",this.options.enableLogging?tR.enableAll():tR.disableAll()}static setLogLevel(e){tR.setLevel(e),(0,tT.setLogLevel)(e)}async publish(e,t){if(!this.isValidTopic(e))throw tR.error("Invalid topic"),Error("Invalid topic");let n=tN(eP.Buffer.from(e,"utf8")),r=await tk(n.toString("hex"),t),i=await tE(n,tN(eP.Buffer.from(r,"utf8"))),a={key:tb(n).toString("hex"),data:r,signature:i.toString("hex"),timeout:this.options.timeout,namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,allowedOrigin:this.options.allowedOrigin};return(0,tT.post)(`${this.options.serverUrl}/v2/channel/set`,a)}async subscribe(e){let t=!0,n=tN(eP.Buffer.from(e,"utf8")),r=tb(n).toString("hex"),i=this.getSocketConnection();i.connected?(tR.debug("already connected with socket"),i.emit("v2:check_auth_status",r,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,allowedOrigin:this.options.allowedOrigin})):i.once("connect",()=>{tR.debug("connected with socket"),i.emit("v2:check_auth_status",r,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,allowedOrigin:this.options.allowedOrigin})});let a=()=>{i.once("connect",async()=>{tR.debug("connected with socket using reconnect"),t&&i.emit("v2:check_auth_status",r,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,allowedOrigin:this.options.allowedOrigin})})},o=()=>{t||document.removeEventListener("visibilitychange",o),i.connected||"visible"!==document.visibilityState||a()},s=()=>{tR.debug("socket disconnected",t),t?(tR.error("socket disconnected unexpectedly, reconnecting socket"),a()):i.removeListener("disconnect",s)};i.on("disconnect",s);let l=new Promise((e,a)=>{let s=async r=>{try{let t=await tM(n.toString("hex"),r);tR.info("got data",t),e(t)}catch(e){tR.error(e),a(e)}finally{t=!1,"undefined"!=typeof document&&document.removeEventListener("visibilitychange",o)}};tR.info("listening to",`${r}_success`),i.once(`${r}_success`,s)});return"undefined"!=typeof document&&document.addEventListener("visibilitychange",o),l}cleanup(){this.SOCKET_CONN&&(this.SOCKET_CONN.disconnect(),this.SOCKET_CONN=null)}getSocketConnection(){if(this.SOCKET_CONN)return this.SOCKET_CONN;let e=(0,tP.io)(this.options.socketUrl,{transports:["websocket","polling"],withCredentials:!0,reconnectionDelayMax:1e4,reconnectionAttempts:10});return e.on("connect_error",t=>{e.io.opts.transports=["polling","websocket"],tR.error("connect error",t)}),e.on("connect",async()=>{let{engine:t}=e.io;tR.debug("initially connected to",t.transport.name),t.once("upgrade",()=>{tR.debug("upgraded",t.transport.name)}),t.once("close",e=>{tR.debug("connection closed",e)})}),e.on("error",t=>{tR.error("socket errored",t),e.disconnect()}),this.SOCKET_CONN=e,this.SOCKET_CONN}isValidTopic(e){return e&&e.length>0}}var tD=e.i(12748),tj=e.i(67632);let tU=e=>e.padStart(64,"0").slice(0,64);class tB{constructor(){(0,ej.default)(this,"sessionId",void 0)}checkSessionParams(){if(!this.sessionId)throw Error("Session id is required");this.sessionId=tU(this.sessionId)}request({method:e="GET",url:t,data:n={},headers:r={}}){let i={headers:r};switch(e){case"GET":return(0,tT.get)(t,i);case"POST":return(0,tT.post)(t,n,i);case"PUT":return(0,tT.put)(t,n,i);case"PATCH":return(0,tT.patch)(t,n,i)}throw Error("Invalid method type")}}class t$ extends tB{constructor({sessionServerBaseUrl:e,sessionNamespace:t,sessionTime:n,sessionId:r,allowedOrigin:i}={}){super(),(0,ej.default)(this,"sessionServerBaseUrl","https://api.web3auth.io/session-service"),(0,ej.default)(this,"sessionNamespace",void 0),(0,ej.default)(this,"allowedOrigin",void 0),(0,ej.default)(this,"sessionTime",86400),(0,ej.default)(this,"sessionId",""),e&&(this.sessionServerBaseUrl=e),t&&(this.sessionNamespace=t),n&&(this.sessionTime=n),r&&(this.sessionId=tU(r)),i?this.allowedOrigin=i:this.allowedOrigin="*"}static generateRandomSessionKey(){return tU(tv().toString("hex"))}async createSession(e,t={}){super.checkSessionParams();let n=eP.Buffer.from(this.sessionId,"hex"),r=tb(n).toString("hex"),i=await tk(this.sessionId,e),a=(await tE(n,tN(eP.Buffer.from(i,"utf8")))).toString("hex"),o={key:r,data:i,signature:a,namespace:this.sessionNamespace,timeout:this.sessionTime,allowedOrigin:this.allowedOrigin};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:o,headers:t}),this.sessionId}async authorizeSession({headers:e}={headers:{}}){super.checkSessionParams();let t={key:tb(eP.Buffer.from(this.sessionId,"hex")).toString("hex"),namespace:this.sessionNamespace},n=await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/get`,data:t,headers:e});if(!n.message)throw Error("Session Expired or Invalid public key");let r=await tM(this.sessionId,n.message);if(r.error)throw Error("There was an error decrypting data.");return r}async updateSession(e,t={}){super.checkSessionParams();let n=eP.Buffer.from(this.sessionId,"hex"),r=tb(n).toString("hex"),i=await tk(this.sessionId,e),a=(await tE(n,tN(eP.Buffer.from(i,"utf8")))).toString("hex"),o={key:r,data:i,signature:a,namespace:this.sessionNamespace,allowedOrigin:this.allowedOrigin};await super.request({method:"PUT",url:`${this.sessionServerBaseUrl}/v2/store/update`,data:o,headers:t})}async invalidateSession(e={}){super.checkSessionParams();let t=eP.Buffer.from(this.sessionId,"hex"),n=tb(t).toString("hex"),r=await tk(this.sessionId,{}),i=(await tE(t,tN(eP.Buffer.from(r,"utf8")))).toString("hex"),a={key:n,data:r,signature:i,namespace:this.sessionNamespace,timeout:1};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:a,headers:e}),this.sessionId="",!0}}var tW=e.i(71901);let tK="light",tH=new Map;class tz{constructor({sdkUrl:e,whiteLabel:t}){(0,ej.default)(this,"sdkUrl",void 0),(0,ej.default)(this,"whiteLabel",void 0),(0,ej.default)(this,"initialized",!1),(0,ej.default)(this,"loginCallbackSuccess",null),(0,ej.default)(this,"loginCallbackFailed",null),(0,ej.default)(this,"embedNonce",eJ()),this.sdkUrl=e,this.whiteLabel=t}get targetOrigin(){return new URL(this.sdkUrl).origin}getAuthServiceIframe(){return tH.get(this.embedNonce)}registerAuthServiceIframe(e){tH.set(this.embedNonce,e)}cleanup(){let e=tH.get(this.embedNonce);e&&e.parentNode&&(e.parentNode.removeChild(e),tH.delete(this.embedNonce))}async init({network:e,clientId:t}){var n;if("undefined"==typeof window||"undefined"==typeof document)throw Error("window or document is not available");if(this.initialized)throw Error("AuthProvider already initialized");let r=new URL(this.sdkUrl);r.pathname.endsWith("/")?r.pathname+="frame":r.pathname+="/frame";let i=new URLSearchParams;i.append("origin",window.location.origin),i.append("nonce",this.embedNonce),r.hash=i.toString();let a=(n=this.whiteLabel.mode||tK)===tK?"light":"dark"===n||window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",o=(0,eH.htmlToElement)(`<iframe
        id="${tD.IFRAME_MODAL_ID}-${this.embedNonce}"
        class="${tD.IFRAME_MODAL_ID}-${this.embedNonce}"
        sandbox="allow-popups allow-scripts allow-same-origin allow-forms allow-modals allow-downloads"
        src="${r.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%; z-index: 10000000;
        height: 100%; border: none; border-radius: 0; color-scheme: ${a};"
        allow="clipboard-write"
      ></iframe>`);return this.registerAuthServiceIframe(o),new Promise((n,r)=>{try{window.document.body.appendChild(o);let r=r=>{var i,a,o;if(r.origin!==this.targetOrigin)return;let{data:s}=r,{type:l,nonce:c}=s;if(c!==this.embedNonce)return;let d=s.data;switch(l){case tD.JRPC_METHODS.SETUP_COMPLETE:null==(i=this.getAuthServiceIframe())||null==(i=i.contentWindow)||i.postMessage({type:tD.JRPC_METHODS.INIT_DAPP,data:{network:e,clientId:t}},this.targetOrigin),this.initialized=!0,n();break;case tD.JRPC_METHODS.LOGIN_FAILED:null==(a=this.loginCallbackFailed)||a.call(this,(null==d?void 0:d.error)||"Login failed, reason: unknown");break;case tD.JRPC_METHODS.DISPLAY_IFRAME:this.getAuthServiceIframe().style.display="block";break;case tD.JRPC_METHODS.HIDE_IFRAME:this.getAuthServiceIframe().style.display="none";break;case tD.JRPC_METHODS.LOGIN_SUCCESS:tW.log.info("LOGIN_SUCCESS",d),this.getAuthServiceIframe().style.display="none",null!=d&&d.sessionId&&(null==(o=this.loginCallbackSuccess)||o.call(this,d));break;default:tW.log.warn(`Unknown message type: ${l}`)}};window.addEventListener("message",r)}catch(e){r(e)}})}postLoginInitiatedMessage(e,t){var n;if(!this.initialized)throw Error("Iframe not initialized");return null==(n=this.getAuthServiceIframe().contentWindow)||n.postMessage({type:tD.JRPC_METHODS.LOGIN_INITIATED,data:{loginConfig:e,nonce:t}},this.targetOrigin),new Promise((e,t)=>{this.loginCallbackSuccess=e,this.loginCallbackFailed=t})}postLoginCancelledMessage(e){var t;if(!this.initialized)throw Error("Iframe not initialized");null==(t=this.getAuthServiceIframe().contentWindow)||t.postMessage({type:tD.JRPC_METHODS.LOGIN_CANCELLED,data:{nonce:e}},this.targetOrigin)}}var tF=e.i(49661);class tV extends tF.CustomError{constructor(e,t){super(t),(0,ej.default)(this,"code",void 0),(0,ej.default)(this,"message",void 0),this.code=e,this.message=t||"",Object.defineProperty(this,"name",{value:"AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class tq extends tV{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"InitializationError"})}static fromCode(e,t=""){return new tq(e,`${tq.messages[e]}, ${t}`)}static invalidParams(e=""){return tq.fromCode(5001,e)}static notInitialized(e=""){return tq.fromCode(5002,e)}}(0,ej.default)(tq,"messages",{5e3:"Custom",5001:"Invalid constructor params",5002:"SDK not initialized. please call init first"});class tY extends tV{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"LoginError"})}static fromCode(e,t=""){return new tY(e,`${tY.messages[e]}, ${t}`)}static invalidLoginParams(e=""){return tY.fromCode(5111,e)}static userNotLoggedIn(e=""){return tY.fromCode(5112,e)}static popupClosed(e=""){return tY.fromCode(5113,e)}static loginFailed(e=""){return tY.fromCode(5114,e)}static popupBlocked(e=""){return tY.fromCode(5115,e)}static mfaAlreadyEnabled(e=""){return tY.fromCode(5116,e)}static mfaNotEnabled(e=""){return tY.fromCode(5117,e)}}(0,ej.default)(tY,"messages",{5e3:"Custom",5111:"Invalid login params",5112:"User not logged in.",5113:"login popup has been closed by the user",5114:"Login failed",5115:"Popup was blocked. Please call this function as soon as user clicks button or use redirect mode",5116:"MFA already enabled",5117:"MFA not yet enabled. Please call `enableMFA` first"});var tG=e.i(19298);class tJ extends tG.EventEmitter{constructor({url:e,target:t,features:n,timeout:r=3e4,sessionSocketUrl:i,sessionServerUrl:a}){super(),(0,ej.default)(this,"url",void 0),(0,ej.default)(this,"target",void 0),(0,ej.default)(this,"features",void 0),(0,ej.default)(this,"window",void 0),(0,ej.default)(this,"windowTimer",void 0),(0,ej.default)(this,"iClosedWindow",void 0),(0,ej.default)(this,"timeout",void 0),(0,ej.default)(this,"sessionSocketUrl",void 0),(0,ej.default)(this,"sessionServerUrl",void 0),this.url=e,this.target=t||"_blank",this.features=n||e1(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=r,this.sessionServerUrl=a||tj.SESSION_SERVER_API_URL,this.sessionSocketUrl=i||tj.SESSION_SERVER_SOCKET_URL,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),void 0===this.window&&clearInterval(this.windowTimer)},500))}open(){var e;if(this.window=window.open(this.url,this.target,this.features),!this.window)throw tY.popupBlocked();null!=(e=this.window)&&e.focus&&this.window.focus()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url):window.location.href=this.url}async listenOnChannel(e){let t=new tL({serverUrl:this.sessionServerUrl,socketUrl:this.sessionSocketUrl,sameIpCheck:!0,allowedOrigin:!0}),n=await t.subscribe(e);this.close(),t.cleanup();let r=JSON.parse(n);return r.error?{error:r.error,state:r.state}:r.data}}let tZ="10.8.0";class tQ{constructor(e){if((0,ej.default)(this,"state",{}),(0,ej.default)(this,"options",void 0),(0,ej.default)(this,"sessionManager",void 0),(0,ej.default)(this,"currentStorage",void 0),(0,ej.default)(this,"_storageBaseKey","auth_store"),(0,ej.default)(this,"dappState",void 0),(0,ej.default)(this,"addVersionInUrls",!0),(0,ej.default)(this,"authProvider",void 0),(0,ej.default)(this,"authProviderPromise",void 0),!e.clientId)throw tq.invalidParams("clientId is required");e.network||(e.network=tD.WEB3AUTH_NETWORK.SAPPHIRE_MAINNET),e.buildEnv||(e.buildEnv=tD.BUILD_ENV.PRODUCTION),e.sdkMode||(e.sdkMode=tD.SDK_MODE.DEFAULT),(e.buildEnv===tD.BUILD_ENV.DEVELOPMENT||e.buildEnv===tD.BUILD_ENV.TESTING||e.sdkUrl)&&(this.addVersionInUrls=!1),e.sdkUrl||e.useMpc||(e.buildEnv===tD.BUILD_ENV.DEVELOPMENT?(e.sdkUrl=tD.AUTH_SERVICE_DEVELOPMENT_URL,e.dashboardUrl=tD.AUTH_DASHBOARD_DEVELOPMENT_URL):e.buildEnv===tD.BUILD_ENV.STAGING?(e.sdkUrl=tD.AUTH_SERVICE_STAGING_URL,e.dashboardUrl=tD.AUTH_DASHBOARD_STAGING_URL):e.buildEnv===tD.BUILD_ENV.TESTING?(e.sdkUrl=tD.AUTH_SERVICE_TESTING_URL,e.dashboardUrl=tD.AUTH_DASHBOARD_TESTING_URL):(e.sdkUrl=tD.AUTH_SERVICE_PRODUCTION_URL,e.dashboardUrl=tD.AUTH_DASHBOARD_PRODUCTION_URL)),e.redirectUrl||"undefined"==typeof window||(e.redirectUrl=`${window.location.protocol}//${window.location.host}${window.location.pathname}`),e.uxMode||(e.uxMode=eK.UX_MODE.REDIRECT),"boolean"!=typeof e.replaceUrlOnRedirect&&(e.replaceUrlOnRedirect=!0),"boolean"!=typeof e.includeUserDataInToken&&(e.includeUserDataInToken=!0),e.originData||(e.originData={}),e.whiteLabel||(e.whiteLabel={}),e.authConnectionConfig||(e.authConnectionConfig=[]),e.mfaSettings||(e.mfaSettings={}),e.storageServerUrl||(e.storageServerUrl=tj.SESSION_SERVER_API_URL),e.sessionSocketUrl||(e.sessionSocketUrl=tj.SESSION_SERVER_SOCKET_URL),e.storage||(e.storage="local"),e.sessionTime||(e.sessionTime=86400),this.options=e}get privKey(){return this.options.useMpc?this.state.factorKey||"":this.state.privKey?this.state.privKey.padStart(64,"0"):""}get coreKitKey(){return this.state.coreKitKey?this.state.coreKitKey.padStart(64,"0"):""}get ed25519PrivKey(){return this.state.ed25519PrivKey?this.state.ed25519PrivKey.padStart(128,"0"):""}get coreKitEd25519Key(){return this.state.coreKitEd25519PrivKey?this.state.coreKitEd25519PrivKey.padStart(128,"0"):""}get sessionId(){return this.state.sessionId||""}get sessionNamespace(){return this.options.sessionNamespace||""}get appState(){return this.state.userInfo.appState||this.dappState||""}get baseUrl(){return this.addVersionInUrls?`${this.options.sdkUrl}/v${tZ.split(".")[0]}`:`${this.options.sdkUrl}`}get dashboardUrl(){return this.addVersionInUrls?`${this.options.dashboardUrl}/v${tZ.split(".")[0]}`:`${this.options.dashboardUrl}`}async init(){let e=function(e=!1){let t={},n=new URLSearchParams(window.location.search.slice(1));n.forEach((e,n)=>{"b64Params"!==n&&(t[n]=e)});let r=n.get("b64Params");if(r)try{let e=JSON.parse((0,eH.safeatob)(r));Object.keys(e).forEach(n=>{t[n]=e[n]})}catch(e){tW.log.error(e)}let i=new URLSearchParams(window.location.hash.substring(1));i.forEach((e,n)=>{"b64Params"!==n&&(t[n]=e)});let a=i.get("b64Params");if(a)try{let e=JSON.parse((0,eH.safeatob)(a));Object.keys(e).forEach(n=>{t[n]=e[n]})}catch(e){tW.log.error(e)}if(e){let e=new URL(window.location.origin+window.location.pathname);0!==n.size&&(n.delete("error"),n.delete("state"),n.delete("b64Params"),n.delete("sessionNamespace"),e.search=n.toString()),0!==i.size&&(i.delete("error"),i.delete("state"),i.delete("b64Params"),i.delete("sessionNamespace"),e.hash=i.toString()),window.history.replaceState((0,eD.default)((0,eD.default)({},window.history.state),{},{as:e.href,url:e.href}),"",e.href)}return t}(this.options.replaceUrlOnRedirect);e.sessionNamespace&&(this.options.sessionNamespace=e.sessionNamespace);let t=this.options.sessionKey||(this.options.sessionNamespace?`${this._storageBaseKey}_${this.options.sessionNamespace}`:this._storageBaseKey);this.currentStorage=e6.getInstance(t,this.options.storage);let n=this.currentStorage.get("sessionId");if(this.sessionManager=new t$({sessionServerBaseUrl:this.options.storageServerUrl,sessionNamespace:this.options.sessionNamespace,sessionTime:this.options.sessionTime,sessionId:n,allowedOrigin:this.options.sdkUrl}),(this.options.network===tD.WEB3AUTH_NETWORK.TESTNET||this.options.network===tD.WEB3AUTH_NETWORK.SAPPHIRE_DEVNET)&&console.log(`%c WARNING! You are on ${this.options.network}. Please set network: 'mainnet' or 'sapphire_mainnet' in production`,"color: #FF0000"),this.options.buildEnv!==tD.BUILD_ENV.PRODUCTION&&console.log(`%c WARNING! You are using build env ${this.options.buildEnv}. Please set buildEnv: 'production' in production`,"color: #FF0000"),e.error)throw this.dappState=e.state,tY.loginFailed(e.error);if(e.sessionId&&(this.currentStorage.set("sessionId",e.sessionId),this.sessionManager.sessionId=e.sessionId),this.sessionManager.sessionId){let e=await this._authorizeSession();this.updateState(e),0===Object.keys(e).length?this.currentStorage.set("sessionId",""):this.updateState({sessionId:this.sessionManager.sessionId})}this.options.sdkMode===tD.SDK_MODE.IFRAME&&(this.authProvider=new tz({sdkUrl:this.baseUrl,whiteLabel:this.options.whiteLabel}),!this.state.sessionId&&(this.authProviderPromise=this.authProvider.init({network:this.options.network,clientId:this.options.clientId}),e.nonce&&(await this.authProviderPromise,await this.postLoginInitiatedMessage(JSON.parse(e.loginParams),e.nonce))))}async login(e){if(!e.authConnection&&(!e.authConnectionId||!e.groupedAuthConnectionId))throw tY.invalidLoginParams("AuthConnection is required");let t=(0,eD.default)({},e),n={actionType:tD.AUTH_ACTIONS.LOGIN,options:this.options,params:t},r=await this.authHandler(`${this.baseUrl}/start`,n,e5(e.authConnection));if(this.options.uxMode===eK.UX_MODE.REDIRECT)return null;if(r.error)throw this.dappState=r.state,tY.loginFailed(r.error);return this.sessionManager.sessionId=r.sessionId,this.options.sessionNamespace=r.sessionNamespace,this.currentStorage.set("sessionId",r.sessionId),await this.rehydrateSession(),{privKey:this.privKey}}async postLoginInitiatedMessage(e,t){var n;if(this.options.sdkMode!==tD.SDK_MODE.IFRAME)throw tY.invalidLoginParams("Cannot perform this action in default mode.");this.authProviderPromise&&await this.authProviderPromise,null!=(n=this.authProvider)&&n.initialized||await this.authProvider.init({network:this.options.network,clientId:this.options.clientId});let r=await this.authProvider.postLoginInitiatedMessage({actionType:tD.AUTH_ACTIONS.LOGIN,params:e,options:this.options},t);if(r.error)throw tY.loginFailed(r.error);this.sessionManager.sessionId=r.sessionId,this.options.sessionNamespace=r.sessionNamespace,this.currentStorage.set("sessionId",r.sessionId),await this.rehydrateSession()}async postLoginCancelledMessage(e){var t;if(this.options.sdkMode!==tD.SDK_MODE.IFRAME)throw tY.invalidLoginParams("Cannot perform this action in default mode.");if(this.authProviderPromise&&await this.authProviderPromise,!(null!=(t=this.authProvider)&&t.initialized))throw tq.notInitialized();this.authProvider.postLoginCancelledMessage(e)}async logout(){if(!this.sessionManager.sessionId)throw tY.userNotLoggedIn();await this.sessionManager.invalidateSession(),this.updateState({privKey:"",coreKitKey:"",coreKitEd25519PrivKey:"",ed25519PrivKey:"",walletKey:"",oAuthPrivateKey:"",tKey:"",metadataNonce:"",keyMode:void 0,userInfo:{name:"",profileImage:"",dappShare:"",idToken:"",oAuthIdToken:"",oAuthAccessToken:"",appState:"",email:"",authConnectionId:"",userId:"",groupedAuthConnectionId:"",authConnection:"",isMfaEnabled:!1},authToken:"",sessionId:"",factorKey:"",signatures:[],tssShareIndex:-1,tssPubKey:"",tssShare:"",tssNonce:-1}),this.currentStorage.set("sessionId","")}async enableMFA(e){var t;if(!this.sessionId)throw tY.userNotLoggedIn();if(this.state.userInfo.isMfaEnabled)throw tY.mfaAlreadyEnabled();let n={actionType:tD.AUTH_ACTIONS.ENABLE_MFA,options:(0,eD.default)((0,eD.default)({},this.options),{},{sdkMode:tD.SDK_MODE.DEFAULT}),params:(0,eD.default)((0,eD.default)({},e),{},{authConnection:this.state.userInfo.authConnection,authConnectionId:this.state.userInfo.authConnectionId,groupedAuthConnectionId:this.state.userInfo.groupedAuthConnectionId,extraLoginOptions:{login_hint:this.state.userInfo.userId},mfaLevel:"mandatory"}),sessionId:this.sessionId},r=await this.authHandler(`${this.baseUrl}/start`,n,tD.POPUP_TIMEOUT);if(this.options.uxMode===eK.UX_MODE.REDIRECT)return null;if(r.error)throw this.dappState=r.state,tY.loginFailed(r.error);return this.sessionManager.sessionId=r.sessionId,this.options.sessionNamespace=r.sessionNamespace,this.currentStorage.set("sessionId",r.sessionId),await this.rehydrateSession(),!!(null==(t=this.state.userInfo)?void 0:t.isMfaEnabled)}async manageMFA(e){if(!this.sessionId)throw tY.userNotLoggedIn();if(!this.state.userInfo.isMfaEnabled)throw tY.mfaNotEnabled();let t={dappUrl:`${window.location.origin}${window.location.pathname}`},n=t$.generateRandomSessionKey(),r={actionType:tD.AUTH_ACTIONS.MANAGE_MFA,options:(0,eD.default)((0,eD.default)({},this.options),{},{uxMode:eK.UX_MODE.REDIRECT,sdkMode:tD.SDK_MODE.DEFAULT,redirectUrl:`${this.dashboardUrl}/wallet/account`}),params:(0,eD.default)((0,eD.default)((0,eD.default)({},t),e),{},{authConnection:this.state.userInfo.authConnection,authConnectionId:this.state.userInfo.authConnectionId,groupedAuthConnectionId:this.state.userInfo.groupedAuthConnectionId,extraLoginOptions:{login_hint:this.state.userInfo.userId},appState:(0,eH.jsonToBase64)({loginId:n})}),sessionId:this.sessionId};this.createLoginSession(n,r,r.options.sessionTime,!0);let i={loginId:n,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl},a=e3({baseURL:`${this.baseUrl}/start`,hash:{b64Params:(0,eH.jsonToBase64)(i)}});window.open(a,"_blank")}async manageSocialFactor(e,t){if(!this.sessionId)throw tY.userNotLoggedIn();let n={actionType:e,options:(0,eD.default)((0,eD.default)({},this.options),{},{sdkMode:tD.SDK_MODE.DEFAULT}),params:(0,eD.default)({},t),sessionId:this.sessionId},r=await this.authHandler(`${this.baseUrl}/start`,n);if(this.options.uxMode!==eK.UX_MODE.REDIRECT)return!r.error}async addAuthenticatorFactor(e){if(!this.sessionId)throw tY.userNotLoggedIn();let t={actionType:tD.AUTH_ACTIONS.ADD_AUTHENTICATOR_FACTOR,options:(0,eD.default)((0,eD.default)({},this.options),{},{sdkMode:tD.SDK_MODE.DEFAULT}),params:(0,eD.default)((0,eD.default)({},e),{},{authConnection:eK.AUTH_CONNECTION.AUTHENTICATOR}),sessionId:this.sessionId},n=await this.authHandler(`${this.baseUrl}/start`,t);if(this.options.uxMode!==eK.UX_MODE.REDIRECT)return!n.error}async addPasskeyFactor(e){if(!this.sessionId)throw tY.userNotLoggedIn();let t={actionType:tD.AUTH_ACTIONS.ADD_PASSKEY_FACTOR,options:(0,eD.default)((0,eD.default)({},this.options),{},{sdkMode:tD.SDK_MODE.DEFAULT}),params:(0,eD.default)((0,eD.default)({},e),{},{authConnection:eK.AUTH_CONNECTION.PASSKEYS}),sessionId:this.sessionId},n=await this.authHandler(`${this.baseUrl}/start`,t);if(this.options.uxMode!==eK.UX_MODE.REDIRECT)return!n.error}async cleanup(){this.authProvider&&this.authProvider.cleanup()}getUserInfo(){if(!this.sessionManager.sessionId)throw tY.userNotLoggedIn();return this.state.userInfo}async createLoginSession(e,t,n=600,r=!1){if(!this.sessionManager)throw tq.notInitialized();let i=new t$({sessionServerBaseUrl:t.options.storageServerUrl,sessionNamespace:t.options.sessionNamespace,sessionTime:n,sessionId:e,allowedOrigin:this.options.sdkUrl}).createSession(JSON.parse(JSON.stringify(t)));t.options.uxMode!==eK.UX_MODE.REDIRECT||r||await i}async _authorizeSession(){try{if(!this.sessionManager.sessionId)return{};return await this.sessionManager.authorizeSession()}catch(e){return tW.log.error("authorization failed",e),{}}}updateState(e){this.state=(0,eD.default)((0,eD.default)({},this.state),e)}async rehydrateSession(){let e=await this._authorizeSession();this.updateState(e)}async authHandler(e,t,n=1e4){let r=t$.generateRandomSessionKey();await this.createLoginSession(r,t);let i={loginId:r,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl};if(this.options.uxMode===eK.UX_MODE.REDIRECT){let t=e3({baseURL:e,hash:{b64Params:(0,eH.jsonToBase64)(i)}});window.location.href=t;return}let a=new tJ({url:e3({baseURL:e,hash:{b64Params:(0,eH.jsonToBase64)(i)}}),timeout:n,sessionServerUrl:this.options.storageServerUrl,sessionSocketUrl:this.options.sessionSocketUrl});return new Promise((e,t)=>{a.on("close",()=>{t(tY.popupClosed())}),a.listenOnChannel(r).then(e).catch(t);try{a.open()}catch(e){t(e)}})}}let tX=eV.default.getLogger("http-helpers");tX.setLevel(eV.levels.INFO);let t0="torus-default";async function t1(e,t){try{new URL(e)}catch{}return fetch(e,t)}function t3(){let e={};return t0&&(e["x-api-key"]=t0),e}function t2(e){tX.info(`Response: ${e.status} ${e.statusText}`),tX.info(`Url: ${e.url}`)}let t5=async(e,t)=>{let n=null;try{let r=new Promise((t,r)=>{n=setTimeout(()=>{r(Error(`Timed out in ${e}ms`))},e)}),i=await Promise.race([t,r]);return null!=n&&clearTimeout(n),i}catch(e){throw null!=n&&clearTimeout(n),e}},t4=async(e,t={},n={})=>{let r={mode:"cors",headers:{}};n.useAPIKey&&(r.headers=(0,eD.default)((0,eD.default)({},r.headers),t3())),t.method="GET";let i=(0,e9.default)(r,t),a=await t1(e,i);if(a.ok){let e=a.headers.get("content-type");return null!=e&&e.includes("application/json")?a.json():a.text()}throw t2(a),a},t8=async(e,t={},n={},r={})=>{let i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(i.headers=(0,eD.default)((0,eD.default)({},i.headers),t3())),n.method="PATCH";let a=(0,e9.default)(i,n);r.isUrlEncodedData?(a.body=t,"application/json; charset=utf-8"===a.headers["Content-Type"]&&delete a.headers["Content-Type"]):a.body=JSON.stringify(t);let o=await t1(e,a);if(o.ok){let e=o.headers.get("content-type");return null!=e&&e.includes("application/json")?o.json():o.text()}throw t2(o),o},t6=async(e,t={},n={},r={})=>{let i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(i.headers=(0,eD.default)((0,eD.default)({},i.headers),t3())),n.method="PUT";let a=(0,e9.default)(i,n);r.isUrlEncodedData?(a.body=t,"application/json; charset=utf-8"===a.headers["Content-Type"]&&delete a.headers["Content-Type"]):a.body=JSON.stringify(t);let o=await t1(e,a);if(o.ok){let e=o.headers.get("content-type");return null!=e&&e.includes("application/json")?o.json():o.text()}throw t2(o),o};var t9=tG;class t7 extends t9.EventEmitter{constructor({url:e,target:t,features:n,timeout:r=3e4}){super(),(0,ej.default)(this,"url",void 0),(0,ej.default)(this,"target",void 0),(0,ej.default)(this,"features",void 0),(0,ej.default)(this,"window",void 0),(0,ej.default)(this,"windowTimer",void 0),(0,ej.default)(this,"iClosedWindow",void 0),(0,ej.default)(this,"timeout",void 0),this.url=e,this.target=t||"_blank",this.features=n||e1(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=r,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),void 0===this.window&&clearInterval(this.windowTimer)},500))}open(){var e;if(this.window=window.open(this.url.href,this.target,this.features),!this.window)throw Error("popup window is blocked");return null!=(e=this.window)&&e.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}let ne=["access_token","id_token"];class nt{constructor(e){(0,ej.default)(this,"nonce",eJ()),(0,ej.default)(this,"finalURL",void 0),(0,ej.default)(this,"params",void 0),this.params=e}get state(){return encodeURIComponent(ez.default.encode(JSON.stringify((0,eD.default)((0,eD.default)({},this.params.customState||{}),{},{instanceId:this.nonce,authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId,redirectToOpener:this.params.redirectToOpener||!1}))))}async handleLoginWindow(t){let n=new t7({url:this.finalURL,features:t.popupFeatures,timeout:e5(this.params.authConnection)});if(this.params.uxMode===eK.UX_MODE.REDIRECT)n.redirect(t.locationReplaceOnRedirect);else{let{RedundantAdaptiveBroadcastChannel:t}=await e.A(78268);return new Promise((e,r)=>{let i,a=async t=>{try{let{error:n,data:a}=t,o=a||{},{instanceParams:s,hashParams:{access_token:l,id_token:c}}=o,d=(0,eB.default)(o.hashParams,ne);if(n){eq.error(t),r(Error(`Error: ${n}. Info: ${JSON.stringify(t.data||{})}`));return}t.data&&s.authConnectionId===this.params.authConnectionId&&(eq.info(t.data),!this.params.redirectToOpener&&i&&await i.postMessage({success:!0}),e((0,eD.default)((0,eD.default)({accessToken:l,idToken:c||""},d),{},{state:s})))}catch(e){eq.error(e),r(e)}};if(this.params.redirectToOpener){let e=async t=>{if(!t.data)return;let r=t.data;r.channel===`redirect_channel_${this.nonce}`&&(window.removeEventListener("message",e),a(r),n.close())};window.addEventListener("message",e)}else(i=new t(`redirect_channel_${this.nonce}`,eZ)).addEventListener("message",async e=>{await a(e),i.close(),n.close()});try{n.open()}catch(e){eq.error(e),r(e);return}n.once("close",()=>{i&&i.close(),r(Error("user closed popup"))})})}return null}}class nn extends nt{constructor(e){super(e),(0,ej.default)(this,"RESPONSE_TYPE","token"),(0,ej.default)(this,"SCOPE","identify email"),this.setFinalUrl()}setFinalUrl(){let e=new URL("https://discord.com/api/oauth2/authorize"),t=JSON.parse(JSON.stringify(this.params.jwtParams||{})),n=(0,e9.default)({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.params.clientId,redirect_uri:this.params.redirect_uri,scope:this.SCOPE},t);Object.keys(n).forEach(t=>{n[t]&&e.searchParams.append(t,n[t])}),this.finalURL=e}async getUserInfo(e){let{accessToken:t}=e,{id:n,avatar:r,email:i="",username:a="",discriminator:o=""}=await t4("https://discord.com/api/users/@me",{headers:{Authorization:`Bearer ${t}`}});return{profileImage:null===r?`https://cdn.discordapp.com/embed/avatars/${Number(o)%5}.png`:`https://cdn.discordapp.com/avatars/${n}/${r}.png?size=2048`,name:`${a}#${o}`,email:i,userId:n,authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}}class nr extends nt{constructor(e){super(e),(0,ej.default)(this,"RESPONSE_TYPE","token"),(0,ej.default)(this,"SCOPE","public_profile email"),this.setFinalUrl()}setFinalUrl(){let e=new URL("https://www.facebook.com/v20.0/dialog/oauth"),t=JSON.parse(JSON.stringify(this.params.jwtParams||{})),n=(0,e9.default)({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.params.clientId,redirect_uri:this.params.redirect_uri,scope:this.SCOPE},t);Object.keys(n).forEach(t=>{n[t]&&e.searchParams.append(t,n[t])}),this.finalURL=e}async getUserInfo(e){let{accessToken:t}=e,{name:n="",id:r,picture:i,email:a=""}=await t4("https://graph.facebook.com/me?fields=name,email,picture.type(large)",{headers:{Authorization:`Bearer ${t}`}});return{email:a,name:n,profileImage:i.data.url||"",authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId,userId:r}}}class ni extends nt{constructor(e){super(e),(0,ej.default)(this,"RESPONSE_TYPE","token id_token"),(0,ej.default)(this,"SCOPE","profile email openid"),(0,ej.default)(this,"PROMPT","select_account"),this.setFinalUrl()}setFinalUrl(){let e=new URL("https://accounts.google.com/o/oauth2/v2/auth"),t=JSON.parse(JSON.stringify(this.params.jwtParams||{})),n=(0,e9.default)({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.params.clientId,prompt:this.PROMPT,redirect_uri:this.params.redirect_uri,scope:this.SCOPE,nonce:this.nonce},t);Object.keys(n).forEach(t=>{n[t]&&e.searchParams.append(t,n[t])}),this.finalURL=e}async getUserInfo(e){let{accessToken:t}=e,{picture:n="",email:r="",name:i=""}=await t4("https://www.googleapis.com/userinfo/v2/me",{headers:{Authorization:`Bearer ${t}`}});return{email:r,name:i,profileImage:n,authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId,userId:r.toLowerCase()}}}class na extends nt{constructor(e){super(e),(0,ej.default)(this,"SCOPE","openid profile email"),(0,ej.default)(this,"RESPONSE_TYPE","token id_token"),(0,ej.default)(this,"PROMPT","login"),this.setFinalUrl()}setFinalUrl(){let{domain:e}=this.params.jwtParams,t=e2(e);t.pathname+=t.pathname.endsWith("/")?"authorize":"/authorize";let n=JSON.parse(JSON.stringify(this.params.jwtParams));delete n.domain;let r=(0,e9.default)({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.params.clientId,prompt:this.PROMPT,redirect_uri:this.params.redirect_uri,scope:this.SCOPE,connection:eY[this.params.authConnection],nonce:this.nonce},n);Object.keys(r).forEach(e=>{r[e]&&t.searchParams.append(e,r[e])}),this.finalURL=t}async getUserInfo(e){let{idToken:t,accessToken:n}=e,{domain:r,userIdField:i,isUserIdCaseSensitive:a,user_info_route:o="userinfo"}=this.params.jwtParams;if(t){let e=e4(t).payload,{name:n,email:r,picture:o}=e;return{profileImage:o,name:n,email:r,userId:eX(e,this.params.authConnection,i,a),authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}if(n)try{let e=new URL(r),t=await t4(`${eG(e)}${o}`,{headers:{Authorization:`Bearer ${n}`}}),{picture:s,name:l,email:c}=t;return{email:c,name:l,profileImage:s,userId:eX(t,this.params.authConnection,i,a),authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}catch(e){eV.default.warn(e,"Unable to get userinfo from endpoint")}throw Error("Access/id token not available")}}class no extends nt{constructor(e){super(e),this.setFinalUrl()}setFinalUrl(){let e=JSON.parse(JSON.stringify(this.params.jwtParams));delete e.domain;let t=(0,e9.default)({state:this.state,client_id:this.params.clientId,nonce:this.nonce},e);this.finalURL=new URL(e3({baseURL:this.params.redirect_uri,query:null,hash:t}))}async getUserInfo(e){let{idToken:t,accessToken:n}=e,{domain:r,userIdField:i,isUserIdCaseSensitive:a,user_info_route:o="userinfo"}=this.params.jwtParams;if(t){let e=e4(t).payload,{name:n,email:r,picture:o}=e;return{profileImage:o,name:n,email:r,userId:eX(e,this.params.authConnection,i,a),authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}if(n)try{let e=new URL(r),t=await t4(`${eG(e)}${o}`,{headers:{Authorization:`Bearer ${n}`}}),{picture:s,name:l,email:c}=t;return{email:c,name:l,profileImage:s,userId:eX(t,this.params.authConnection,i,a),authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}catch(e){eV.default.warn(e,"Unable to get userinfo from endpoint")}throw Error("Access/id token not available")}handleLoginWindow(e){let{id_token:t,access_token:n}=this.params.jwtParams,r=new t7({url:this.finalURL,features:e.popupFeatures});return this.params.uxMode!==eK.UX_MODE.REDIRECT?Promise.resolve({state:{},idToken:t,accessToken:n}):(r.redirect(e.locationReplaceOnRedirect),null)}}var ns=e.i(48128),nl=e.i(67515),nc=e.i(61131);let nd=e=>e.padStart(64,"0").slice(0,64);class nu{constructor(){(0,ej.default)(this,"sessionId",void 0)}checkSessionParams(){if(!this.sessionId)throw Error("Session id is required");this.sessionId=nd(this.sessionId)}request({method:e="GET",url:t,data:n={},headers:r={}}){let i={headers:r};switch(e){case"GET":return t4(t,i);case"POST":return((e,t={},n={},r={})=>{let i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(i.headers=(0,eD.default)((0,eD.default)({},i.headers),t3())),n.method="POST";let a=(0,e9.default)(i,n);return r.isUrlEncodedData?(a.body=t,"application/json; charset=utf-8"===a.headers["Content-Type"]&&delete a.headers["Content-Type"]):a.body=JSON.stringify(t),t5(r.timeout||6e4,t1(e,a).then(e=>{let t;if(r.logTracingHeader&&(t=e.headers.get("x-web3-correlation-id"))&&tX.info(`Request tracing with traceID = ${t}`),e.ok){let t=e.headers.get("content-type");return null!=t&&t.includes("application/json")?e.json():e.text()}throw t2(e),e}))})(t,n,i);case"PUT":return t6(t,n,i);case"PATCH":return t8(t,n,i)}throw Error("Invalid method type")}}class nh extends nu{constructor({sessionServerBaseUrl:e,sessionNamespace:t,sessionTime:n,sessionId:r,allowedOrigin:i}={}){super(),(0,ej.default)(this,"sessionServerBaseUrl","https://api.web3auth.io/session-service"),(0,ej.default)(this,"sessionNamespace",void 0),(0,ej.default)(this,"allowedOrigin",void 0),(0,ej.default)(this,"sessionTime",86400),(0,ej.default)(this,"sessionId",""),e&&(this.sessionServerBaseUrl=e),t&&(this.sessionNamespace=t),n&&(this.sessionTime=n),r&&(this.sessionId=nd(r)),i?this.allowedOrigin=i:this.allowedOrigin="*"}static generateRandomSessionKey(){return nd((0,ns.generatePrivate)().toString("hex"))}async createSession(e,t={}){super.checkSessionParams();let n=eP.Buffer.from(this.sessionId,"hex"),r=(0,ns.getPublic)(n).toString("hex"),i=await (0,nl.encryptData)(this.sessionId,e),a=(await (0,ns.sign)(n,(0,nc.keccak256)(eP.Buffer.from(i,"utf8")))).toString("hex"),o={key:r,data:i,signature:a,namespace:this.sessionNamespace,timeout:this.sessionTime,allowedOrigin:this.allowedOrigin};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:o,headers:t}),this.sessionId}async authorizeSession({headers:e}={headers:{}}){super.checkSessionParams();let t={key:(0,ns.getPublic)(eP.Buffer.from(this.sessionId,"hex")).toString("hex"),namespace:this.sessionNamespace},n=await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/get`,data:t,headers:e});if(!n.message)throw Error("Session Expired or Invalid public key");let r=await (0,nl.decryptData)(this.sessionId,n.message);if(r.error)throw Error("There was an error decrypting data.");return r}async updateSession(e,t={}){super.checkSessionParams();let n=eP.Buffer.from(this.sessionId,"hex"),r=(0,ns.getPublic)(n).toString("hex"),i=await (0,nl.encryptData)(this.sessionId,e),a=(await (0,ns.sign)(n,(0,nc.keccak256)(eP.Buffer.from(i,"utf8")))).toString("hex"),o={key:r,data:i,signature:a,namespace:this.sessionNamespace,allowedOrigin:this.allowedOrigin};await super.request({method:"PUT",url:`${this.sessionServerBaseUrl}/v2/store/update`,data:o,headers:t})}async invalidateSession(e={}){super.checkSessionParams();let t=eP.Buffer.from(this.sessionId,"hex"),n=(0,ns.getPublic)(t).toString("hex"),r=await (0,nl.encryptData)(this.sessionId,{}),i=(await (0,ns.sign)(t,(0,nc.keccak256)(eP.Buffer.from(r,"utf8")))).toString("hex"),a={key:n,data:r,signature:i,namespace:this.sessionNamespace,timeout:1};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:a,headers:e}),this.sessionId="",!0}}async function nf(e,t){try{let n=new nh({sessionId:e,sessionServerBaseUrl:t,allowedOrigin:!0});return await n.authorizeSession()}catch(e){throw eV.default.error("fetch data from storage server error",e),Error("Unable to retrieve data from storage server, invalid key or key expired.")}}class np extends nt{constructor(e){super(e),this.setFinalUrl()}setFinalUrl(){let{passkeysHostUrl:e}=this.params.customState||{};if(!e)throw Error("Invalid passkeys url.");let t=new URL(e),n=JSON.parse(JSON.stringify(this.params.jwtParams||{})),r=(0,e9.default)({state:this.state,client_id:this.params.clientId,redirect_uri:this.params.redirect_uri},n);Object.keys(r).forEach(e=>{r[e]&&t.searchParams.append(e,r[e])}),this.finalURL=t}async getUserInfo(e,t){let{idToken:n,extraParams:r}=e,{sessionId:i}=JSON.parse(ez.default.decode(r))||{};if(!i)throw Error("sessionId not found");let{verifier_id:a,signature:o,clientDataJSON:s,authenticatorData:l,publicKey:c,challenge:d,rpOrigin:u,rpId:h,credId:f,transports:p,username:g}=await nf(i,t);if(o!==n)throw Error("idtoken should be equal to signature");return{email:"",name:"Passkeys Login",profileImage:"",authConnectionId:this.params.authConnectionId,userId:a,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId,extraConnectionParams:{signature:o,clientDataJSON:s,authenticatorData:l,publicKey:c,challenge:d,rpOrigin:u,rpId:h,credId:f,transports:p,username:g}}}}let ng=["event","origin","result"];class nm extends nt{constructor(e){super(e),(0,ej.default)(this,"RESPONSE_TYPE","token"),(0,ej.default)(this,"SCOPE","profile"),(0,ej.default)(this,"PROMPT","select_account"),this.setFinalUrl()}setFinalUrl(){let{domain:e}=this.params.jwtParams,t=e2(e||"https://oauth.telegram.org/auth"),n=JSON.parse(JSON.stringify(this.params.jwtParams||{}));n.origin=`${this.params.redirect_uri}?state=${this.state}&nonce=${this.nonce}`;let r=(0,e9.default)({state:this.state,response_type:this.RESPONSE_TYPE,bot_id:this.params.clientId,prompt:this.PROMPT,redirect_uri:`${this.params.redirect_uri}?state=${this.state}&nonce=${this.nonce}`,scope:this.SCOPE,nonce:this.nonce},n);Object.keys(r).forEach(e=>{r[e]&&t.searchParams.append(e,r[e])}),this.finalURL=t}async getUserInfo(e){let{idToken:t}=e,{photo_url:n="",first_name:r="",last_name:i="",id:a}=JSON.parse(ez.default.decode(t));return{email:"",name:`${r} ${i}`,profileImage:n,authConnectionId:this.params.authConnectionId,userId:a.toString(),authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}async handleLoginWindow(e){let t=new t7({url:this.finalURL,features:e.popupFeatures,timeout:e5(this.params.authConnection)});return this.params.uxMode!==eK.UX_MODE.REDIRECT?new Promise((e,n)=>{let r=async t=>{try{let n=JSON.parse(t)||{},{event:r,origin:i,result:a}=n,o=(0,eB.default)(n,ng),s=new URL(i).searchParams.get("state");r&&"auth_result"===r&&e((0,eD.default)((0,eD.default)({accessToken:""},o),{},{idToken:ez.default.encode(JSON.stringify(a))||"",state:ez.default.decode(s)}))}catch(e){eq.error(e),n(e)}},i=async e=>{if(!e.data)throw Error("Invalid data received");if(this.finalURL.origin!==e.origin)throw Error("Invalid origin received");let n=e.data;if("string"!=typeof n)throw Error("Invalid data type received");let{event:a}=JSON.parse(n)||{};a&&"auth_result"!==a&&eq.info("Invalid event received"),window.removeEventListener("message",i),r(n),t.close()};window.addEventListener("message",i);try{t.open()}catch(e){eq.error(e),n(e);return}t.once("close",()=>{n(Error("user closed popup"))})}):(t.redirect(e.locationReplaceOnRedirect),null)}}class nw extends nt{constructor(e){super(e),(0,ej.default)(this,"RESPONSE_TYPE","token"),(0,ej.default)(this,"SCOPE","user:read:email"),this.setFinalUrl()}setFinalUrl(){let e=new URL("https://id.twitch.tv/oauth2/authorize"),t=JSON.parse(JSON.stringify(this.params.jwtParams||{})),n=(0,e9.default)({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.params.clientId,redirect_uri:this.params.redirect_uri,scope:this.SCOPE,force_verify:"true"},t);Object.keys(n).forEach(t=>{n[t]&&e.searchParams.append(t,n[t])}),this.finalURL=e}async getUserInfo(e){let{accessToken:t}=e,[{profile_image_url:n="",display_name:r="",email:i="",id:a}]=(await t4("https://api.twitch.tv/helix/users",{headers:{Authorization:`Bearer ${t}`,"Client-ID":this.params.clientId}})).data||[];return{profileImage:n,name:r,email:i,userId:a,authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}}let ny="code";class nv extends nt{constructor(e){super(e),(0,ej.default)(this,"SCOPE","openid profile email"),(0,ej.default)(this,"RESPONSE_TYPE","token id_token"),(0,ej.default)(this,"PROMPT","login"),this.setFinalUrl()}setFinalUrl(){let{domain:e}=this.params.jwtParams||{},t=e2(e||"https://passwordless.web3auth.io/v7");t.pathname+=t.pathname.endsWith("/")?"authorize":"/authorize";let n=JSON.parse(JSON.stringify(this.params.jwtParams||{}));delete n.domain,this.params.customState=(0,eD.default)((0,eD.default)({},this.params.customState||{}),{},{client:this.params.web3AuthClientId});let r=(0,e9.default)({state:this.state,client_id:this.params.clientId||this.params.web3AuthClientId,redirect_uri:this.params.redirect_uri,nonce:this.nonce,network:this.params.web3AuthNetwork,connection:eY[this.params.authConnection],scope:this.SCOPE,response_type:this.RESPONSE_TYPE,prompt:this.PROMPT,flow_type:(null==n?void 0:n.flow_type)||ny},n);Object.keys(r).forEach(e=>{r[e]&&t.searchParams.append(e,r[e])}),this.finalURL=t}async getUserInfo(e){let{idToken:t}=e,{name:n,email:r,picture:i}=e4(t).payload;return{profileImage:i,name:n,email:r,userId:n.toLowerCase(),authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}}var nb=e.i(94964),nE=e.i(25390),nC=e.i(29871),nx=e.i(69146),nS=e.i(11810),n_=e.i(22435);function nA(e){try{return structuredClone(e)}catch{return JSON.parse(JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t))}}class nT extends nE.BaseConnector{constructor(e){super(e),(0,ej.default)(this,"name",eR.WALLET_CONNECTORS.AUTH),(0,ej.default)(this,"connectorNamespace",nC.CONNECTOR_NAMESPACES.MULTICHAIN),(0,ej.default)(this,"type",tt.CONNECTOR_CATEGORY.IN_APP),(0,ej.default)(this,"authInstance",null),(0,ej.default)(this,"status",tt.CONNECTOR_STATUS.NOT_READY),(0,ej.default)(this,"privateKeyProvider",null),(0,ej.default)(this,"authOptions",void 0),(0,ej.default)(this,"loginSettings",{authConnection:""}),(0,ej.default)(this,"wsSettings",void 0),(0,ej.default)(this,"wsEmbedInstance",null),(0,ej.default)(this,"authConnectionConfig",[]),(0,ej.default)(this,"wsEmbedInstancePromise",null),this.authOptions=e.connectorSettings,this.loginSettings=e.loginSettings||{authConnection:""},this.wsSettings=e.walletServicesSettings||{},this.authConnectionConfig=e.authConnectionConfig||[]}get provider(){if(this.status!==tt.CONNECTOR_STATUS.NOT_READY){var e;if(null!=(e=this.wsEmbedInstance)&&e.provider)return this.wsEmbedInstance.provider;if(this.privateKeyProvider)return this.privateKeyProvider}return null}get wsEmbed(){return this.wsEmbedInstance}set provider(e){throw Error("Not implemented")}async init(t){let{chains:n}=this.coreOptions,{chainId:r}=t,i=n.find(e=>e.chainId===r);if(super.checkInitializationRequirements({chainConfig:i}),!this.coreOptions.clientId)throw nx.WalletInitializationError.invalidParams("clientId is required before auth's initialization");if(!this.authOptions)throw nx.WalletInitializationError.invalidParams("authOptions is required before auth's initialization");if(0===this.authConnectionConfig.length)throw nx.WalletInitializationError.invalidParams("authConnectionConfig is required before auth's initialization");let a=this.authOptions.uxMode===eK.UX_MODE.REDIRECT;this.authOptions=(0,eD.default)((0,eD.default)({},this.authOptions),{},{replaceUrlOnRedirect:a,useCoreKitKey:this.coreOptions.useSFAKey}),this.authInstance=new tQ((0,eD.default)((0,eD.default)({},this.authOptions),{},{clientId:this.coreOptions.clientId,network:this.coreOptions.web3AuthNetwork,sdkMode:tD.SDK_MODE.IFRAME,authConnectionConfig:this.authConnectionConfig.filter(e=>!e.isDefault),mfaSettings:this.coreOptions.mfaSettings})),nS.log.debug("initializing auth connector init",this.authOptions);let o=this.authInstance.init();if(this.coreOptions.privateKeyProvider)this.privateKeyProvider=this.coreOptions.privateKeyProvider;else switch(i.chainNamespace){case e$.CHAIN_NAMESPACES.EIP155:case e$.CHAIN_NAMESPACES.SOLANA:{let{default:t}=await e.A(29901);this.wsEmbedInstance=new t({web3AuthClientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork,modalZIndex:this.wsSettings.modalZIndex});let i=n.filter(e=>e.chainNamespace===e$.CHAIN_NAMESPACES.EIP155||e.chainNamespace===e$.CHAIN_NAMESPACES.SOLANA);this.wsEmbedInstancePromise=this.wsEmbedInstance.init((0,eD.default)((0,eD.default)({},this.wsSettings),{},{chains:i,chainId:r,whiteLabel:(0,eD.default)((0,eD.default)({},this.authOptions.whiteLabel),this.wsSettings.whiteLabel)})).then(()=>{this.wsEmbedInstancePromise=null});break}case e$.CHAIN_NAMESPACES.XRPL:throw nx.WalletLoginError.connectionError("Private key provider is required for XRPL");default:{let{CommonPrivateKeyProvider:t}=await e.A(35578);this.privateKeyProvider=new t({config:{chain:i,chains:this.coreOptions.chains}})}}nS.log.debug("initializing auth connector"),await o,this.status=tt.CONNECTOR_STATUS.READY,this.emit(tt.CONNECTOR_EVENTS.READY,eR.WALLET_CONNECTORS.AUTH);try{let{sessionId:e}=this.authInstance||{};if(e&&(t.autoConnect||a))this.rehydrated=!0,await this.connect({chainId:t.chainId,getIdentityToken:t.getIdentityToken});else if(!e&&t.autoConnect)throw nx.WalletLoginError.connectionError("Failed to rehydrate")}catch(e){this.emit(tt.CONNECTOR_EVENTS.REHYDRATION_ERROR,e)}}async connect(e){super.checkConnectionRequirements(),this.status=tt.CONNECTOR_STATUS.CONNECTING,this.emit(tt.CONNECTOR_EVENTS.CONNECTING,(0,eD.default)((0,eD.default)({},e),{},{connector:eR.WALLET_CONNECTORS.AUTH}));try{return await this.connectWithProvider(e),this.provider}catch(e){var t;if(nS.log.error("Failed to connect with auth provider",e),this.status=tt.CONNECTOR_STATUS.READY,this.emit(tt.CONNECTOR_EVENTS.ERRORED,e),null!=e&&null!=(t=e.message)&&t.includes("user closed popup"))throw nx.WalletLoginError.popupClosed();if(e instanceof nx.Web3AuthError)throw e;throw nx.WalletLoginError.connectionError("Failed to login with auth",e)}}async enableMFA(e={authConnection:""}){if(!this.connected)throw nx.WalletLoginError.notConnectedError("Not connected with wallet");if(!this.authInstance)throw nx.WalletInitializationError.notReady("authInstance is not ready");try{let t=await this.authInstance.enableMFA(e);t&&this.emit(tt.CONNECTOR_EVENTS.MFA_ENABLED,t)}catch(e){if(nS.log.error("Failed to enable MFA with auth provider",e),e instanceof nx.Web3AuthError)throw e;throw nx.WalletLoginError.connectionError("Failed to enable MFA with auth",e)}}async manageMFA(e={authConnection:""}){if(!this.connected)throw nx.WalletLoginError.notConnectedError("Not connected with wallet");if(!this.authInstance)throw nx.WalletInitializationError.notReady("authInstance is not ready");try{await this.authInstance.manageMFA(e)}catch(e){if(nS.log.error("Failed to manage MFA with auth provider",e),e instanceof nx.Web3AuthError)throw e;throw nx.WalletLoginError.connectionError("Failed to manage MFA with auth",e)}}async disconnect(e={cleanup:!1}){if(!this.connected)throw nx.WalletLoginError.notConnectedError("Not connected with wallet");if(!this.authInstance)throw nx.WalletInitializationError.notReady("authInstance is not ready");this.status=tt.CONNECTOR_STATUS.DISCONNECTING,await this.authInstance.logout(),this.wsEmbedInstance&&await this.wsEmbedInstance.logout(),e.cleanup?(this.status=tt.CONNECTOR_STATUS.NOT_READY,this.authInstance=null,this.wsEmbedInstance&&(this.wsEmbedInstance=null),this.privateKeyProvider&&(this.privateKeyProvider=null)):this.status=tt.CONNECTOR_STATUS.READY,this.rehydrated=!1,this.emit(tt.CONNECTOR_EVENTS.DISCONNECTED)}async getIdentityToken(){if(!this.canAuthorize)throw nx.WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first");this.status=tt.CONNECTOR_STATUS.AUTHORIZING,this.emit(tt.CONNECTOR_EVENTS.AUTHORIZING,{connector:eR.WALLET_CONNECTORS.AUTH});let e=await this.getUserInfo();return this.status=tt.CONNECTOR_STATUS.AUTHORIZED,this.emit(tt.CONNECTOR_EVENTS.AUTHORIZED,{connector:eR.WALLET_CONNECTORS.AUTH,identityTokenInfo:{idToken:e.idToken}}),{idToken:e.idToken}}async getUserInfo(){if(!this.canAuthorize)throw nx.WalletLoginError.notConnectedError("Not connected with wallet");if(!this.authInstance)throw nx.WalletInitializationError.notReady("authInstance is not ready");return this.authInstance.getUserInfo()}async switchChain(e,t=!1){var n,r;super.checkSwitchChainRequirements(e,t);let{chainId:i}=e,{chainId:a}=this.provider,{chainNamespace:o}=this.getChain(a),{chainNamespace:s}=this.getChain(i);if(a!==i)if(o===e$.CHAIN_NAMESPACES.SOLANA||o===e$.CHAIN_NAMESPACES.EIP155){if(s!==e$.CHAIN_NAMESPACES.SOLANA&&s!==e$.CHAIN_NAMESPACES.EIP155)throw nx.WalletLoginError.connectionError("Cannot switch to other chain namespace");let t=`${s}:${Number(e.chainId)}`;await (null==(n=this.wsEmbedInstance.provider)?void 0:n.request({method:"wallet_switchChain",params:{chainId:t}}))}else{if(o!==s)throw nx.WalletLoginError.connectionError("Cannot switch to other chain namespace");await (null==(r=this.privateKeyProvider)?void 0:r.switchChain(e))}}async cleanup(){if(!this.authInstance)throw nx.WalletInitializationError.notReady("authInstance is not ready");await this.authInstance.cleanup(),this.wsEmbedInstance&&this.wsEmbedInstance.clearInit()}getOAuthProviderConfig(e){let{authConnection:t,authConnectionId:n,groupedAuthConnectionId:r}=e;return this.authConnectionConfig.find(e=>r&&n?e.authConnection===t&&e.groupedAuthConnectionId===r&&e.authConnectionId===n:n?e.authConnection===t&&e.authConnectionId===n:e.authConnection===t&&e.isDefault)}getChain(e){return this.coreOptions.chains.find(t=>t.chainId===e)}_getFinalPrivKey(){if(!this.authInstance)return"";let e=this.authInstance.privKey;if(this.coreOptions.useSFAKey){if(this.authInstance.privKey&&!this.authInstance.coreKitKey)throw nx.WalletLoginError.sfaKeyNotFound();e=this.authInstance.coreKitKey}return e}async connectWithProvider(e){var t,n,r,i;if(!this.authInstance)throw nx.WalletInitializationError.notReady("authInstance is not ready");let a=this.coreOptions.chains.find(t=>t.chainId===e.chainId);if(!a)throw nx.WalletLoginError.connectionError("Chain config is not available");let{chainNamespace:o}=a,s=o===e$.CHAIN_NAMESPACES.EIP155||o===e$.CHAIN_NAMESPACES.SOLANA?null==(t=this.authInstance)?void 0:t.sessionId:this._getFinalPrivKey();if(e.idToken&&(e.extraLoginOptions=(0,eD.default)((0,eD.default)({},e.extraLoginOptions),{},{id_token:e.idToken})),!s||null!=(n=e.extraLoginOptions)&&n.id_token){this.loginSettings.curve=tD.SUPPORTED_KEY_CURVES.OTHER;let t=(0,e9.default)(this.loginSettings,e);null!=(r=e.extraLoginOptions)&&r.id_token?await this.connectWithJwtLogin(t):await this.connectWithSocialLogin(t)}if(o===e$.CHAIN_NAMESPACES.EIP155||o===e$.CHAIN_NAMESPACES.SOLANA){this.wsEmbedInstancePromise&&await this.wsEmbedInstancePromise;let{sessionId:t,sessionNamespace:n}=this.authInstance||{};if(t&&await this.wsEmbedInstance.loginWithSessionId({sessionId:t,sessionNamespace:n})){let t;this.status=tt.CONNECTOR_STATUS.CONNECTED,this.emit(tt.CONNECTOR_EVENTS.CONNECTED,{connector:eR.WALLET_CONNECTORS.AUTH,reconnected:this.rehydrated,provider:this.provider,identityTokenInfo:t}),e.getIdentityToken&&(t=await this.getIdentityToken()),null==(i=this.wsEmbedInstance)||i.provider.on("accountsChanged",(e=[])=>{0===e.length&&n_.CONNECTED_STATUSES.includes(this.status)&&this.disconnect({cleanup:!1})})}}else{let t=this._getFinalPrivKey();t&&(await this.privateKeyProvider.setupProvider(t,e.chainId),this.status=tt.CONNECTOR_STATUS.CONNECTED,this.emit(tt.CONNECTOR_EVENTS.CONNECTED,{connector:eR.WALLET_CONNECTORS.AUTH,reconnected:this.rehydrated,provider:this.provider}))}}async connectWithSocialLogin(e){var t,n;let r=this.getOAuthProviderConfig({authConnection:e.authConnection,authConnectionId:e.authConnectionId,groupedAuthConnectionId:e.groupedAuthConnectionId});if(!(null!=r&&r.authConnection))throw nx.WalletLoginError.connectionError("Invalid auth connection.");let i=(0,eD.default)((0,eD.default)((0,eD.default)({},r.jwtParameters||{}),e.extraLoginOptions||{}),{},{login_hint:e.loginHint||(null==(t=e.extraLoginOptions)?void 0:t.login_hint)}),a=eJ(),o=nA(e);o.extraLoginOptions=(0,eD.default)((0,eD.default)({},o.extraLoginOptions||{}),{},{login_hint:e.loginHint||(null==(n=e.extraLoginOptions)?void 0:n.login_hint)}),delete o.chainId;let s=new t7({url:(e=>{let{authConnectionId:t,authConnection:n,clientId:r,jwtParams:i}=e;if(!t||!n||!r)throw Error("Invalid params. Missing authConnectionId, authConnection or clientId");let{domain:a,login_hint:o,id_token:s,access_token:l}=i||{};switch(n){case eK.AUTH_CONNECTION.GOOGLE:return new ni(e);case eK.AUTH_CONNECTION.TELEGRAM:return new nm(e);case eK.AUTH_CONNECTION.FACEBOOK:return new nr(e);case eK.AUTH_CONNECTION.TWITCH:return new nw(e);case eK.AUTH_CONNECTION.DISCORD:return new nn(e);case eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS:case eK.AUTH_CONNECTION.SMS_PASSWORDLESS:if(!o)throw Error("Invalid params. Missing login_hint for web3auth passwordless login");return new nv(e);case eK.AUTH_CONNECTION.APPLE:case eK.AUTH_CONNECTION.GITHUB:case eK.AUTH_CONNECTION.LINKEDIN:case eK.AUTH_CONNECTION.TWITTER:case eK.AUTH_CONNECTION.LINE:case eK.AUTH_CONNECTION.CUSTOM:case eK.AUTH_CONNECTION.REDDIT:case eK.AUTH_CONNECTION.WECHAT:case eK.AUTH_CONNECTION.KAKAO:case eK.AUTH_CONNECTION.FARCASTER:case eK.AUTH_CONNECTION.AUTHENTICATOR:if(s||l)return new no(e);if(!a)throw Error("Invalid params for jwt login. Missing domain");return new na(e);case eK.AUTH_CONNECTION.PASSKEYS:return new np(e);default:throw Error("Unsupported login type")}})({authConnection:e.authConnection,authConnectionId:r.authConnectionId,clientId:r.clientId||i.client_id,groupedAuthConnectionId:r.groupedAuthConnectionId,redirect_uri:`${this.authInstance.options.sdkUrl}/auth`,jwtParams:i,customState:{nonce:a,appState:e.appState,dapp_redirect_url:this.authInstance.options.redirectUrl,uxMode:this.authInstance.options.uxMode,whiteLabel:JSON.stringify(this.authInstance.options.whiteLabel),loginParams:JSON.stringify(o),version:tZ.split(".")[0],web3AuthNetwork:this.coreOptions.web3AuthNetwork,web3AuthClientId:this.coreOptions.clientId,originData:this.authInstance.options.originData?JSON.stringify(this.authInstance.options.originData):void 0},web3AuthClientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork}).finalURL,timeout:0});if(this.authOptions.uxMode===eK.UX_MODE.REDIRECT)return s.redirect(this.authOptions.replaceUrlOnRedirect);let l=!1;return new Promise((e,t)=>{s.open().catch(e=>{nS.log.error("Error during login with social",e),this.authInstance.postLoginCancelledMessage(a),t(e)});let n=new tL({sameIpCheck:!0});n.subscribe(`web3auth-login-${a}`).then(e=>{let r=JSON.parse(e||"{}");return(null==r?void 0:r.message)==="login_finished"&&(null!=r&&r.error&&(this.authInstance.postLoginCancelledMessage(a),t(r.error)),l=!0,n.cleanup(),s.close()),!0}).catch(e=>{nS.log.error("Error during login with social",e)}),s.once("close",()=>{l||(n.cleanup(),this.authInstance.postLoginCancelledMessage(a),t(nx.WalletLoginError.popupClosed()))}),this.authInstance.postLoginInitiatedMessage(o,a).then(e).catch(e=>{if(e instanceof nx.Web3AuthError)throw e;t(nx.WalletLoginError.connectionError(e instanceof Error?e.message:e||"Failed to login with social"))})})}connectWithJwtLogin(e){var t,n,r;let i,a=this.getOAuthProviderConfig({authConnection:e.authConnection,authConnectionId:e.authConnectionId,groupedAuthConnectionId:e.groupedAuthConnectionId});if(!(null!=a&&a.authConnection)&&!e.authConnectionId)throw nx.WalletLoginError.connectionError("Invalid auth connection.");null!=a&&a.authConnection||this.authInstance.options.authConnectionConfig.push({authConnection:e.authConnection,authConnectionId:e.authConnectionId,groupedAuthConnectionId:e.groupedAuthConnectionId});let o=nA(e),s=(0,eD.default)((0,eD.default)({},(null==a?void 0:a.jwtParameters)||{}),e.extraLoginOptions||{});if(e.loginHint||null!=(t=e.extraLoginOptions)&&t.login_hint)i=e.loginHint||(null==(r=e.extraLoginOptions)?void 0:r.login_hint);else if(null!=(n=e.extraLoginOptions)&&n.id_token){let{payload:t}=(0,nb.parseToken)(e.extraLoginOptions.id_token);i=eX(t,o.authConnection,s.userIdField,s.isUserIdCaseSensitive)}else throw nx.WalletLoginError.connectionError("Invalid login hint or id_token");return o.extraLoginOptions=(0,eD.default)((0,eD.default)({},s),{},{login_hint:i}),delete o.chainId,this.authInstance.postLoginInitiatedMessage(o)}}var nI=eW;let nN=(0,eD.default)((0,eD.default)({},e$.CHAIN_NAMESPACES),{},{MULTICHAIN:"multichain"}),nO={READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},nk=(0,eD.default)({},nO),nM={WALLET_SERVICES:"wallet-services"};(0,eD.default)((0,eD.default)({},nM),{SOLANA:"solana"});var nP=nx;class nR extends nP.Web3AuthError{constructor(e,t,n){super(e,t,n),Object.defineProperty(this,"name",{value:"WalletServicesPluginError"})}static fromCode(e,t="",n){return new nR(e,`${nR.messages[e]}${t}`,n)}static notInitialized(e="",t){return nR.fromCode(5210,e,t)}static unsupportedConnector(e="",t){return nR.fromCode(5211,e,t)}static providerRequired(e="",t){return nR.fromCode(5212,e,t)}static web3authRequired(e="",t){return nR.fromCode(5213,e,t)}static web3AuthNotConnected(e="",t){return nR.fromCode(5214,e,t)}static alreadyInitialized(e="",t){return nR.fromCode(5216,e,t)}static unsupportedChainNamespace(e="",t){return nR.fromCode(5218,e,t)}static differentWeb3AuthNetwork(e="",t){return nR.fromCode(5219,e,t)}static invalidParams(e="",t){return nR.fromCode(5220,e,t)}static web3authNotInitialized(e="",t){return nR.fromCode(5221,e,t)}static invalidSession(e="",t){return nR.fromCode(5222,e,t)}static walletPluginNotConnected(e="",t){return nR.fromCode(5223,e,t)}}(0,ej.default)(nR,"messages",{5210:"Wallet Services Plugin is not initialized",5211:"Web3Auth is connected to unsupported connector. Wallet services connector plugin requires web3auth connected to auth connector.",5212:"Provider is required..",5213:"Web3Auth instance is required while initialization.",5214:"Web3Auth is not connected.",5216:"Plugin is already initialized",5218:"Unsupported chain namespace.",5219:"Plugin network different than web3auth instance network.",5221:"Web3Auth is not initialized",5222:"Invalid session inside wallet services. Please report this issue.",5223:"Wallet plugin is not connected Yet. Please wait for plugin to connect and listen via `connected` event on the plugin"});class nL extends nI.SafeEventEmitter{constructor(...e){super(...e),(0,ej.default)(this,"name",nM.WALLET_SERVICES),(0,ej.default)(this,"status",nO.DISCONNECTED),(0,ej.default)(this,"SUPPORTED_CONNECTORS",[eR.WALLET_CONNECTORS.AUTH]),(0,ej.default)(this,"pluginNamespace",nN.MULTICHAIN),(0,ej.default)(this,"wsEmbedInstance",void 0),(0,ej.default)(this,"provider",null),(0,ej.default)(this,"web3auth",null),(0,ej.default)(this,"isInitialized",!1),(0,ej.default)(this,"analytics",void 0)}get proxyProvider(){var e;return null!=(e=this.wsEmbedInstance)&&e.provider?this.wsEmbedInstance.provider:null}async initWithWeb3Auth(e,t,n){if(this.isInitialized)return;if(!e)throw nR.web3authRequired();if(e.provider&&!this.SUPPORTED_CONNECTORS.includes(e.connectedConnectorName))throw nR.notInitialized();let r=e.currentChain;if(![e$.CHAIN_NAMESPACES.EIP155,e$.CHAIN_NAMESPACES.SOLANA].includes(null==r?void 0:r.chainNamespace))throw nR.unsupportedChainNamespace();e.provider&&(this.provider=e.provider),this.web3auth=e,this.analytics=n;let i=e.getConnector(eR.WALLET_CONNECTORS.AUTH);if(!i||!i.wsEmbed)throw nR.web3AuthNotConnected();this.wsEmbedInstance=i.wsEmbed,this.isInitialized=!0,this.status=nO.READY,this.emit(nk.READY)}initWithProvider(){throw Error("Method not implemented.")}async connect(){if(!this.isInitialized)throw nR.notInitialized();if(this.emit(nk.CONNECTING),this.status=nO.CONNECTING,!this.provider){var e;null!=(e=this.web3auth)&&e.provider&&(this.provider=this.web3auth.provider)}if(n_.CAN_AUTHORIZE_STATUSES.includes(this.web3auth.status)){if(!this.web3auth.provider)throw nR.providerRequired()}else throw nR.web3AuthNotConnected();try{this.emit(nk.CONNECTED),this.status=nO.CONNECTED}catch(e){nS.log.error(e),this.status=nO.ERRORED,this.emit(nk.ERRORED,{error:e.message||"Something went wrong"})}}async showWalletConnectScanner(e){var t,n;if(!(null!=(t=this.wsEmbedInstance)&&t.isLoggedIn))throw nR.walletPluginNotConnected();return null==(n=this.analytics)||n.track(te.ANALYTICS_EVENTS.WALLET_CONNECT_SCANNER_CLICKED,{is_visible:null==e?void 0:e.show}),this.wsEmbedInstance.showWalletConnectScanner(e)}async showFunding(e){var t,n;if(!(null!=(t=this.wsEmbedInstance)&&t.isLoggedIn))throw nR.walletPluginNotConnected();return null==(n=this.analytics)||n.track(te.ANALYTICS_EVENTS.WALLET_FUNDING_CLICKED,{is_visible:null==e?void 0:e.show}),this.wsEmbedInstance.showFunding(e)}async showCheckout(e){var t,n;if(!(null!=(t=this.wsEmbedInstance)&&t.isLoggedIn))throw nR.walletPluginNotConnected();return null==(n=this.analytics)||n.track(te.ANALYTICS_EVENTS.WALLET_CHECKOUT_CLICKED,{is_visible:null==e?void 0:e.show,receive_wallet_address_enabled:!!(null!=e&&e.receiveWalletAddress),token_list:null==e?void 0:e.tokenList,fiat_list:null==e?void 0:e.fiatList,crypto:null==e?void 0:e.crypto,fiat:null==e?void 0:e.fiat,fiat_amount:null==e?void 0:e.fiatAmount,crypto_amount:null==e?void 0:e.cryptoAmount}),this.wsEmbedInstance.showCheckout(e)}async showReceive(e){var t,n;if(!(null!=(t=this.wsEmbedInstance)&&t.isLoggedIn))throw nR.walletPluginNotConnected();return null==(n=this.analytics)||n.track(te.ANALYTICS_EVENTS.WALLET_RECEIVE_CLICKED,{is_visible:null==e?void 0:e.show}),this.wsEmbedInstance.showReceive(e)}async showWalletUi(e){var t,n;if(!(null!=(t=this.wsEmbedInstance)&&t.isLoggedIn))throw nR.walletPluginNotConnected();return null==(n=this.analytics)||n.track(te.ANALYTICS_EVENTS.WALLET_UI_CLICKED,{is_visible:null==e?void 0:e.show,path:null==e?void 0:e.path}),this.wsEmbedInstance.showWalletUi(e)}async showSwap(e){var t,n;if(!(null!=(t=this.wsEmbedInstance)&&t.isLoggedIn))throw nR.walletPluginNotConnected();return null==(n=this.analytics)||n.track(te.ANALYTICS_EVENTS.WALLET_SWAP_CLICKED,{is_visible:null==e?void 0:e.show,from_token:null==e?void 0:e.fromToken,to_token:null==e?void 0:e.toToken,from_value_enabled:!!(null!=e&&e.fromValue),to_address_enabled:!!(null!=e&&e.toAddress)}),this.wsEmbedInstance.showSwap(e)}async cleanup(){var e;return null==(e=this.wsEmbedInstance)?void 0:e.cleanUp()}async disconnect(){var e;if(this.status!==nO.CONNECTED)throw nR.invalidSession("Wallet Services plugin is not connected");null!=(e=this.wsEmbedInstance)&&e.isLoggedIn&&await this.wsEmbedInstance.logout(),this.emit(nk.DISCONNECTED),this.status=nO.DISCONNECTED}}var nD=e.i(23264),nj=e.i(20502),nU=e.i(48450),nB=e.i(80606),n$=e.i(36926),nW=e.i(63110),nW=nW,nK=e.i(35825),nK=nK;function nH(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var nz=e.g,nF=[],nV=[],nq="undefined"!=typeof Uint8Array?Uint8Array:Array,nY=!1;function nG(){nY=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)nF[t]=e[t],nV[e.charCodeAt(t)]=t;nV[45]=62,nV[95]=63}function nJ(e){var t;nY||nG();for(var n=e.length,r=n%3,i="",a=[],o=0,s=n-r;o<s;o+=16383)a.push(function(e,t,n){for(var r,i=[],a=t;a<n;a+=3)i.push(nF[(r=(e[a]<<16)+(e[a+1]<<8)+e[a+2])>>18&63]+nF[r>>12&63]+nF[r>>6&63]+nF[63&r]);return i.join("")}(e,o,o+16383>s?s:o+16383));return 1===r?(i+=nF[(t=e[n-1])>>2],i+=nF[t<<4&63],i+="=="):2===r&&(i+=nF[(t=(e[n-2]<<8)+e[n-1])>>10],i+=nF[t>>4&63],i+=nF[t<<2&63],i+="="),a.push(i),a.join("")}function nZ(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,d=-7,u=n?i-1:0,h=n?-1:1,f=e[t+u];for(u+=h,a=f&(1<<-d)-1,f>>=-d,d+=s;d>0;a=256*a+e[t+u],u+=h,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=r;d>0;o=256*o+e[t+u],u+=h,d-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=c}return(f?-1:1)*o*Math.pow(2,a-r)}function nQ(e,t,n,r,i,a){var o,s,l,c=8*a-i-1,d=(1<<c)-1,u=d>>1,h=5960464477539062e-23*(23===i),f=r?0:a-1,p=r?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(s=+!!isNaN(t),o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+u>=1?h/l:h*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=d?(s=0,o=d):o+u>=1?(s=(t*l-1)*Math.pow(2,i),o+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+f]=255&o,f+=p,o/=256,c-=8);e[n+f-p]|=128*g}var nX={}.toString,n0=Array.isArray||function(e){return"[object Array]"==nX.call(e)};n5.TYPED_ARRAY_SUPPORT=void 0===nz.TYPED_ARRAY_SUPPORT||nz.TYPED_ARRAY_SUPPORT;var n1=n3();function n3(){return n5.TYPED_ARRAY_SUPPORT?0x7fffffff:0x3fffffff}function n2(e,t){if(n3()<t)throw RangeError("Invalid typed array length");return n5.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=n5.prototype:(null===e&&(e=new n5(t)),e.length=t),e}function n5(e,t,n){if(!(n5.TYPED_ARRAY_SUPPORT||this instanceof n5))return new n5(e,t,n);if("number"==typeof e){if("string"==typeof t)throw Error("If encoding is specified then the first argument must be a string");return n6(this,e)}return n4(this,e,t,n)}function n4(e,t,n,r){if("number"==typeof t)throw TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),n5.TYPED_ARRAY_SUPPORT?(e=t).__proto__=n5.prototype:e=n9(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!n5.isEncoding(n))throw TypeError('"encoding" must be a valid string encoding');var r=0|rt(t,n),i=(e=n2(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(re(t)){var n,r=0|n7(t.length);return 0===(e=n2(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?n2(e,0):n9(e,t);if("Buffer"===t.type&&n0(t.data))return n9(e,t.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function n8(e){if("number"!=typeof e)throw TypeError('"size" argument must be a number');if(e<0)throw RangeError('"size" argument must not be negative')}function n6(e,t){if(n8(t),e=n2(e,t<0?0:0|n7(t)),!n5.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function n9(e,t){var n=t.length<0?0:0|n7(t.length);e=n2(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function n7(e){if(e>=n3())throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n3().toString(16)+" bytes");return 0|e}function re(e){return!(null==e||!e._isBuffer)}function rt(e,t){if(re(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return rw(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ry(e).length;default:if(r)return rw(e).length;t=(""+t).toLowerCase(),r=!0}}function rn(e,t,n){var r,i,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var a="",o=t;o<n;++o){a+=(r=e[o])<16?"0"+r.toString(16):r.toString(16)}return a}(this,t,n);case"utf8":case"utf-8":return rs(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,i=t,a=n,0===i&&a===r.length?nJ(r):nJ(r.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}(this,t,n);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function rr(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ri(e,t,n,r,i){if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),isNaN(n*=1)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return -1;n=e.length-1}else if(n<0){if(!i)return -1;n=0}if("string"==typeof t&&(t=n5.from(t,r)),re(t))return 0===t.length?-1:ra(e,t,n,r,i);if("number"==typeof t)return t&=255,n5.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):ra(e,[t],n,r,i);throw TypeError("val must be string, number or Buffer")}function ra(e,t,n,r,i){var a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;o=2,s/=2,l/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var d=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===d?0:a-d)){if(-1===d&&(d=a),a-d+1===l)return d*o}else -1!==d&&(a-=a-d),d=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var u=!0,h=0;h<l;h++)if(c(e,a+h)!==c(t,h)){u=!1;break}if(u)return a}return -1}function ro(e,t,n,r){return rv(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function rs(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,l,c=e[i],d=null,u=c>239?4:c>223?3:c>191?2:1;if(i+u<=n)switch(u){case 1:c<128&&(d=c);break;case 2:128==(192&(a=e[i+1]))&&(l=(31&c)<<6|63&a)>127&&(d=l);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(l=(15&c)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(d=l)}null===d?(d=65533,u=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=u}var h=r.length;if(h<=rl)return String.fromCharCode.apply(String,r);for(var f="",p=0;p<h;)f+=String.fromCharCode.apply(String,r.slice(p,p+=rl));return f}n5.poolSize=8192,n5._augment=function(e){return e.__proto__=n5.prototype,e},n5.from=function(e,t,n){return n4(null,e,t,n)},n5.TYPED_ARRAY_SUPPORT&&(n5.prototype.__proto__=Uint8Array.prototype,n5.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&n5[Symbol.species]),n5.alloc=function(e,t,n){return n8(e),e<=0?n2(null,e):void 0!==t?"string"==typeof n?n2(null,e).fill(t,n):n2(null,e).fill(t):n2(null,e)},n5.allocUnsafe=function(e){return n6(null,e)},n5.allocUnsafeSlow=function(e){return n6(null,e)},n5.isBuffer=rb,n5.compare=function(e,t){if(!re(e)||!re(t))throw TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:+(r<n)},n5.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n5.concat=function(e,t){if(!n0(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return n5.alloc(0);if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var n,r=n5.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!re(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},n5.byteLength=rt,n5.prototype._isBuffer=!0,n5.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)rr(this,t,t+1);return this},n5.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)rr(this,t,t+3),rr(this,t+1,t+2);return this},n5.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)rr(this,t,t+7),rr(this,t+1,t+6),rr(this,t+2,t+5),rr(this,t+3,t+4);return this},n5.prototype.toString=function(){var e=0|this.length;return 0===e?"":0==arguments.length?rs(this,0,e):rn.apply(this,arguments)},n5.prototype.equals=function(e){if(!re(e))throw TypeError("Argument must be a Buffer");return this===e||0===n5.compare(this,e)},n5.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},n5.prototype.compare=function(e,t,n,r,i){if(!re(e))throw TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return -1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n),d=0;d<s;++d)if(l[d]!==c[d]){a=l[d],o=c[d];break}return a<o?-1:+(o<a)},n5.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},n5.prototype.indexOf=function(e,t,n){return ri(this,e,t,n,!0)},n5.prototype.lastIndexOf=function(e,t,n){return ri(this,e,t,n,!1)},n5.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i,a,o,s,l,c,d=this.length-t;if((void 0===n||n>d)&&(n=d),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var u=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))break;e[n+o]=s}return o}(this,e,t,n);case"utf8":case"utf-8":return i=t,a=n,rv(rw(e,this.length-i),this,i,a);case"ascii":case"latin1":case"binary":return ro(this,e,t,n);case"base64":return o=t,s=n,rv(ry(e),this,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=t,c=n,rv(function(e,t){for(var n,r,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i.push(n%256),i.push(r);return i}(e,this.length-l),this,l,c);default:if(u)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},n5.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var rl=4096;function rc(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function rd(e,t,n,r,i,a){if(!re(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function ru(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function rh(e,t,n,r){t<0&&(t=0xffffffff+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function rf(e,t,n,r,i,a){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function rp(e,t,n,r,i){return i||rf(e,0,n,4),nQ(e,t,n,r,23,4),n+4}function rg(e,t,n,r,i){return i||rf(e,0,n,8),nQ(e,t,n,r,52,8),n+8}n5.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),n5.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=n5.prototype;else{var i=t-e;n=new n5(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},n5.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||rc(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},n5.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||rc(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},n5.prototype.readUInt8=function(e,t){return t||rc(e,1,this.length),this[e]},n5.prototype.readUInt16LE=function(e,t){return t||rc(e,2,this.length),this[e]|this[e+1]<<8},n5.prototype.readUInt16BE=function(e,t){return t||rc(e,2,this.length),this[e]<<8|this[e+1]},n5.prototype.readUInt32LE=function(e,t){return t||rc(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},n5.prototype.readUInt32BE=function(e,t){return t||rc(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n5.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||rc(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},n5.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||rc(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},n5.prototype.readInt8=function(e,t){return t||rc(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n5.prototype.readInt16LE=function(e,t){t||rc(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?0xffff0000|n:n},n5.prototype.readInt16BE=function(e,t){t||rc(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?0xffff0000|n:n},n5.prototype.readInt32LE=function(e,t){return t||rc(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n5.prototype.readInt32BE=function(e,t){return t||rc(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n5.prototype.readFloatLE=function(e,t){return t||rc(e,4,this.length),nZ(this,e,!0,23,4)},n5.prototype.readFloatBE=function(e,t){return t||rc(e,4,this.length),nZ(this,e,!1,23,4)},n5.prototype.readDoubleLE=function(e,t){return t||rc(e,8,this.length),nZ(this,e,!0,52,8)},n5.prototype.readDoubleBE=function(e,t){return t||rc(e,8,this.length),nZ(this,e,!1,52,8)},n5.prototype.writeUIntLE=function(e,t,n,r){e*=1,t|=0,n|=0,r||rd(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},n5.prototype.writeUIntBE=function(e,t,n,r){e*=1,t|=0,n|=0,r||rd(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},n5.prototype.writeUInt8=function(e,t,n){return e*=1,t|=0,n||rd(this,e,t,1,255,0),n5.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},n5.prototype.writeUInt16LE=function(e,t,n){return e*=1,t|=0,n||rd(this,e,t,2,65535,0),n5.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):ru(this,e,t,!0),t+2},n5.prototype.writeUInt16BE=function(e,t,n){return e*=1,t|=0,n||rd(this,e,t,2,65535,0),n5.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):ru(this,e,t,!1),t+2},n5.prototype.writeUInt32LE=function(e,t,n){return e*=1,t|=0,n||rd(this,e,t,4,0xffffffff,0),n5.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):rh(this,e,t,!0),t+4},n5.prototype.writeUInt32BE=function(e,t,n){return e*=1,t|=0,n||rd(this,e,t,4,0xffffffff,0),n5.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):rh(this,e,t,!1),t+4},n5.prototype.writeIntLE=function(e,t,n,r){if(e*=1,t|=0,!r){var i=Math.pow(2,8*n-1);rd(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o|0)-s&255;return t+n},n5.prototype.writeIntBE=function(e,t,n,r){if(e*=1,t|=0,!r){var i=Math.pow(2,8*n-1);rd(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o|0)-s&255;return t+n},n5.prototype.writeInt8=function(e,t,n){return e*=1,t|=0,n||rd(this,e,t,1,127,-128),n5.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},n5.prototype.writeInt16LE=function(e,t,n){return e*=1,t|=0,n||rd(this,e,t,2,32767,-32768),n5.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):ru(this,e,t,!0),t+2},n5.prototype.writeInt16BE=function(e,t,n){return e*=1,t|=0,n||rd(this,e,t,2,32767,-32768),n5.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):ru(this,e,t,!1),t+2},n5.prototype.writeInt32LE=function(e,t,n){return e*=1,t|=0,n||rd(this,e,t,4,0x7fffffff,-0x80000000),n5.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):rh(this,e,t,!0),t+4},n5.prototype.writeInt32BE=function(e,t,n){return e*=1,t|=0,n||rd(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),n5.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):rh(this,e,t,!1),t+4},n5.prototype.writeFloatLE=function(e,t,n){return rp(this,e,t,!0,n)},n5.prototype.writeFloatBE=function(e,t,n){return rp(this,e,t,!1,n)},n5.prototype.writeDoubleLE=function(e,t,n){return rg(this,e,t,!0,n)},n5.prototype.writeDoubleBE=function(e,t,n){return rg(this,e,t,!1,n)},n5.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("sourceStart out of bounds");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!n5.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},n5.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i,a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!n5.isEncoding(r))throw TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var o=re(e)?e:rw(new n5(e,r).toString()),s=o.length;for(i=0;i<n-t;++i)this[i+t]=o[i%s]}return this};var rm=/[^+\/0-9A-Za-z-_]/g;function rw(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319||o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function ry(e){return function(e){nY||nG();var t,n,r,i,a,o,s=e.length;if(s%4>0)throw Error("Invalid string. Length must be a multiple of 4");a="="===e[s-2]?2:+("="===e[s-1]),o=new nq(3*s/4-a),r=a>0?s-4:s;var l=0;for(t=0,n=0;t<r;t+=4,n+=3)i=nV[e.charCodeAt(t)]<<18|nV[e.charCodeAt(t+1)]<<12|nV[e.charCodeAt(t+2)]<<6|nV[e.charCodeAt(t+3)],o[l++]=i>>16&255,o[l++]=i>>8&255,o[l++]=255&i;return 2===a?(i=nV[e.charCodeAt(t)]<<2|nV[e.charCodeAt(t+1)]>>4,o[l++]=255&i):1===a&&(i=nV[e.charCodeAt(t)]<<10|nV[e.charCodeAt(t+1)]<<4|nV[e.charCodeAt(t+2)]>>2,o[l++]=i>>8&255,o[l++]=255&i),o}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(rm,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function rv(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function rb(e){return null!=e&&(!!e._isBuffer||rE(e)||"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&rE(e.slice(0,0)))}function rE(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var rC=Object.freeze({__proto__:null,Buffer:n5,INSPECT_MAX_BYTES:50,SlowBuffer:function(e){return+e!=e&&(e=0),n5.alloc(+e)},isBuffer:rb,kMaxLength:n1}),rx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:e.g;function rS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r_(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}var rA={},rT={},rI={};function rN(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function rO(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function rk(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function rM(e,...t){if(!rk(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function rP(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("hash must be wrapped by utils.wrapConstructor");rN(e.outputLen),rN(e.blockLen)}function rR(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function rL(e,t){rM(e);let n=t.outputLen;if(e.length<n)throw Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(rI,"__esModule",{value:!0}),rI.isBytes=rk,rI.number=rN,rI.bool=rO,rI.bytes=rM,rI.hash=rP,rI.exists=rR,rI.output=rL,rI.default={number:rN,bool:rO,bytes:rM,hash:rP,exists:rR,output:rL},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.wrapCipher=e.Hash=e.nextTick=e.isLE=e.createView=e.u32=e.u16=e.u8=void 0,e.bytesToHex=r,e.hexToBytes=a,e.hexToNumber=o,e.bytesToNumberBE=function(e){return o(r(e))},e.numberToBytesBE=function(e,t){return a(e.toString(16).padStart(2*t,"0"))},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let a=0;a<t;a++){r(a);let t=Date.now()-i;t>=0&&t<n||(await (0,e.nextTick)(),i+=t)}},e.utf8ToBytes=s,e.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},e.toBytes=function(e){if("string"==typeof e)e=s(e);else{if(!(0,t.isBytes)(e))throw Error("Uint8Array expected, got "+typeof e);e=c(e)}return e},e.concatBytes=function(...e){let n=0;for(let r=0;r<e.length;r++){let i=e[r];(0,t.bytes)(i),n+=i.length}let r=new Uint8Array(n);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r},e.checkOpts=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)},e.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},e.setBigUint64=l,e.u64Lengths=function(t,n){let r=new Uint8Array(16),i=(0,e.createView)(r);return l(i,0,BigInt(n?n.length:0),!0),l(i,8,BigInt(t.length),!0),r},e.isAligned32=function(e){return e.byteOffset%4==0},e.copyBytes=c,e.clean=function(...e){for(let t=0;t<e.length;t++)e[t].fill(0)};let t=rI;if(e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),e.u16=e=>new Uint16Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/2)),e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),e.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],!e.isLE)throw Error("Non little-endian hardware is not supported");let n=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function r(e){(0,t.bytes)(e);let r="";for(let t=0;t<e.length;t++)r+=n[e[t]];return r}function i(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function a(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let t=0,a=0;t<n;t++,a+=2){let n=i(e.charCodeAt(a)),o=i(e.charCodeAt(a+1));if(void 0===n||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);r[t]=16*n+o}return r}function o(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function s(e){if("string"!=typeof e)throw Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function l(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);let i=BigInt(32),a=BigInt(0xffffffff),o=Number(n>>i&a),s=Number(n&a),l=4*!!r,c=4*!r;e.setUint32(t+l,o,r),e.setUint32(t+c,s,r)}function c(e){return Uint8Array.from(e)}e.nextTick=async()=>{},e.Hash=class{},e.wrapCipher=(e,t)=>(Object.assign(t,e),t)}(rT);var rD={},rj={};Object.defineProperty(rj,"__esModule",{value:!0}),rj.AEAD_TAG_LENGTH=rj.XCHACHA20_NONCE_LENGTH=rj.CURVE25519_PUBLIC_KEY_SIZE=rj.ETH_PUBLIC_KEY_SIZE=rj.UNCOMPRESSED_PUBLIC_KEY_SIZE=rj.COMPRESSED_PUBLIC_KEY_SIZE=rj.SECRET_KEY_LENGTH=void 0,rj.SECRET_KEY_LENGTH=32,rj.COMPRESSED_PUBLIC_KEY_SIZE=33,rj.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,rj.ETH_PUBLIC_KEY_SIZE=64,rj.CURVE25519_PUBLIC_KEY_SIZE=32,rj.XCHACHA20_NONCE_LENGTH=24,rj.AEAD_TAG_LENGTH=16,Object.defineProperty(rD,"__esModule",{value:!0}),rD.ephemeralKeySize=rD.symmetricNonceLength=rD.symmetricAlgorithm=rD.isHkdfKeyCompressed=rD.isEphemeralKeyCompressed=rD.ellipticCurve=rD.ECIES_CONFIG=void 0,rD.ECIES_CONFIG=new function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16},rD.ellipticCurve=function(){return rD.ECIES_CONFIG.ellipticCurve},rD.isEphemeralKeyCompressed=function(){return rD.ECIES_CONFIG.isEphemeralKeyCompressed},rD.isHkdfKeyCompressed=function(){return rD.ECIES_CONFIG.isHkdfKeyCompressed},rD.symmetricAlgorithm=function(){return rD.ECIES_CONFIG.symmetricAlgorithm},rD.symmetricNonceLength=function(){return rD.ECIES_CONFIG.symmetricNonceLength},rD.ephemeralKeySize=function(){var e={secp256k1:rD.ECIES_CONFIG.isEphemeralKeyCompressed?rj.COMPRESSED_PUBLIC_KEY_SIZE:rj.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:rj.CURVE25519_PUBLIC_KEY_SIZE,ed25519:rj.CURVE25519_PUBLIC_KEY_SIZE};if(rD.ECIES_CONFIG.ellipticCurve in e)return e[rD.ECIES_CONFIG.ellipticCurve];throw Error("Not implemented")};var rU={},rB={},r$={},rW={},rK={},rH={};Object.defineProperty(rH,"__esModule",{value:!0}),rH.crypto=void 0,rH.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.gcm=e.ctr=e.cbc=e.utils=void 0,e.randomBytes=r,e.getWebcryptoSubtle=i,e.managedNonce=function(e){return(0,t.number)(e.nonceLength),(t,...i)=>({encrypt(a,...o){let{nonceLength:s}=e,l=r(s),c=e(t,l,...i).encrypt(a,...o),d=(0,n.concatBytes)(l,c);return c.fill(0),d},decrypt(n,...r){let{nonceLength:a}=e,o=n.subarray(0,a),s=n.subarray(a);return e(t,o,...i).decrypt(s,...r)}})};let t=rI,n=rT;function r(e=32){if(rH.crypto&&"function"==typeof rH.crypto.getRandomValues)return rH.crypto.getRandomValues(new Uint8Array(e));if(rH.crypto&&"function"==typeof rH.crypto.randomBytes)return rH.crypto.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}function i(){if(rH.crypto&&"object"==typeof rH.crypto.subtle&&null!=rH.crypto.subtle)return rH.crypto.subtle;throw Error("crypto.subtle must be defined")}e.utils={async encrypt(e,t,n,r){let a=i(),o=await a.importKey("raw",e,t,!0,["encrypt"]);return new Uint8Array(await a.encrypt(n,o,r))},async decrypt(e,t,n,r){let a=i(),o=await a.importKey("raw",e,t,!0,["decrypt"]);return new Uint8Array(await a.decrypt(n,o,r))}};let a="AES-CBC",o="AES-CTR",s="AES-GCM";function l(n){return(r,i,l)=>{(0,t.bytes)(r),(0,t.bytes)(i);let c={name:n,length:8*r.length},d=function(e,t,n){if(e===a)return{name:a,iv:t};if(e===o)return{name:o,counter:t,length:64};if(e===s)return n?{name:s,iv:t,additionalData:n}:{name:s,iv:t};throw Error("unknown aes block mode")}(n,i,l);return{encrypt:n=>((0,t.bytes)(n),e.utils.encrypt(r,c,d,n)),decrypt:n=>((0,t.bytes)(n),e.utils.decrypt(r,c,d,n))}}}e.cbc=l(a),e.ctr=l(o),e.gcm=l(s)}(rK);var rz={},rF={},rV={},rq={};function rY(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function rG(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function rJ(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function rZ(e,...t){if(!rJ(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function rQ(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");rY(e.outputLen),rY(e.blockLen)}function rX(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function r0(e,t){rZ(e);let n=t.outputLen;if(e.length<n)throw Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(rq,"__esModule",{value:!0}),rq.isBytes=rJ,rq.number=rY,rq.bool=rG,rq.bytes=rZ,rq.hash=rQ,rq.exists=rX,rq.output=r0,rq.default={number:rY,bool:rG,bytes:rZ,hash:rQ,exists:rX,output:r0};var r1={},r3={};Object.defineProperty(r3,"__esModule",{value:!0}),r3.crypto=void 0,r3.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name},e.byteSwap32=function(t){for(let n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])},e.bytesToHex=function(e){(0,n.bytes)(e);let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},e.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let t=0,a=0;t<n;t++,a+=2){let n=i(e.charCodeAt(a)),o=i(e.charCodeAt(a+1));if(void 0===n||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);r[t]=16*n+o}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let a=0;a<t;a++){r(a);let t=Date.now()-i;t>=0&&t<n||(await (0,e.nextTick)(),i+=t)}},e.utf8ToBytes=a,e.toBytes=o,e.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];(0,n.bytes)(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r},e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==s.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){let t=t=>e().update(o(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){let t=(t,n)=>e(n).update(o(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){let t=(t,n)=>e(n).update(o(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.randomBytes=function(e=32){if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));if(t.crypto&&"function"==typeof t.crypto.randomBytes)return t.crypto.randomBytes(e);throw Error("crypto.getRandomValues must be defined")};let t=r3,n=rq;e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),e.rotr=(e,t)=>e<<32-t|e>>>t,e.rotl=(e,t)=>e<<t|e>>>32-t>>>0,e.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],e.byteSwap=e=>e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255,e.byteSwapIfBE=e.isLE?e=>e:t=>(0,e.byteSwap)(t);let r=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function i(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function a(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function o(e){return"string"==typeof e&&(e=a(e)),(0,n.bytes)(e),e}e.nextTick=async()=>{},e.Hash=class{clone(){return this._cloneInto()}};let s={}.toString}(r1),Object.defineProperty(rV,"__esModule",{value:!0}),rV.HashMD=rV.Maj=rV.Chi=void 0;let r2=r1;rV.Chi=(e,t,n)=>e&t^~e&n,rV.Maj=(e,t,n)=>e&t^e&n^t&n,rV.HashMD=class extends r2.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,r2.createView)(this.buffer)}update(e){(0,rq.exists)(this);let{view:t,buffer:n,blockLen:r}=this,i=(e=(0,r2.toBytes)(e)).length;for(let a=0;a<i;){let o=Math.min(r-this.pos,i-a);if(o!==r)n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===r&&(this.process(t,0),this.pos=0);else{let t=(0,r2.createView)(e);for(;r<=i-a;a+=r)this.process(t,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,rq.exists)(this),(0,rq.output)(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:r,isLE:i}=this,{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(n,0),a=0);for(let e=a;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);let i=BigInt(32),a=BigInt(0xffffffff),o=Number(n>>i&a),s=Number(n&a),l=4*!!r,c=4*!r;e.setUint32(t+l,o,r),e.setUint32(t+c,s,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);let o=(0,r2.createView)(e),s=this.outputLen;if(s%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=s/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:r,finished:i,destroyed:a,pos:o}=this;return e.length=r,e.pos=o,e.finished=i,e.destroyed=a,r%t&&e.buffer.set(n),e}};var r5={};Object.defineProperty(r5,"__esModule",{value:!0}),r5.add5L=r5.add5H=r5.add4H=r5.add4L=r5.add3H=r5.add3L=r5.rotlBL=r5.rotlBH=r5.rotlSL=r5.rotlSH=r5.rotr32L=r5.rotr32H=r5.rotrBL=r5.rotrBH=r5.rotrSL=r5.rotrSH=r5.shrSL=r5.shrSH=r5.toBig=void 0,r5.fromBig=r6,r5.split=r9,r5.add=ip;let r4=BigInt(0x100000000-1),r8=BigInt(32);function r6(e,t=!1){return t?{h:Number(e&r4),l:Number(e>>r8&r4)}:{h:0|Number(e>>r8&r4),l:0|Number(e&r4)}}function r9(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:a,l:o}=r6(e[i],t);[n[i],r[i]]=[a,o]}return[n,r]}let r7=(e,t)=>BigInt(e>>>0)<<r8|BigInt(t>>>0);r5.toBig=r7;let ie=(e,t,n)=>e>>>n;r5.shrSH=ie;let it=(e,t,n)=>e<<32-n|t>>>n;r5.shrSL=it;let ir=(e,t,n)=>e>>>n|t<<32-n;r5.rotrSH=ir;let ii=(e,t,n)=>e<<32-n|t>>>n;r5.rotrSL=ii;let ia=(e,t,n)=>e<<64-n|t>>>n-32;r5.rotrBH=ia;let io=(e,t,n)=>e>>>n-32|t<<64-n;r5.rotrBL=io;let is=(e,t)=>t;r5.rotr32H=is;let il=(e,t)=>e;r5.rotr32L=il;let ic=(e,t,n)=>e<<n|t>>>32-n;r5.rotlSH=ic;let id=(e,t,n)=>t<<n|e>>>32-n;r5.rotlSL=id;let iu=(e,t,n)=>t<<n-32|e>>>64-n;r5.rotlBH=iu;let ih=(e,t,n)=>e<<n-32|t>>>64-n;function ip(e,t,n,r){let i=(t>>>0)+(r>>>0);return{h:e+n+(i/0x100000000|0)|0,l:0|i}}r5.rotlBL=ih;let ig=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);r5.add3L=ig;let im=(e,t,n,r)=>t+n+r+(e/0x100000000|0)|0;r5.add3H=im;let iw=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);r5.add4L=iw;let iy=(e,t,n,r,i)=>t+n+r+i+(e/0x100000000|0)|0;r5.add4H=iy;let iv=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0);r5.add5L=iv;let ib=(e,t,n,r,i,a)=>t+n+r+i+a+(e/0x100000000|0)|0;r5.add5H=ib,r5.default={fromBig:r6,split:r9,toBig:r7,shrSH:ie,shrSL:it,rotrSH:ir,rotrSL:ii,rotrBH:ia,rotrBL:io,rotr32H:is,rotr32L:il,rotlSH:ic,rotlSL:id,rotlBH:iu,rotlBL:ih,add:ip,add3L:ig,add3H:im,add4L:iw,add4H:iy,add5H:ib,add5L:iv},Object.defineProperty(rF,"__esModule",{value:!0}),rF.sha384=rF.sha512_256=rF.sha512_224=rF.sha512=rF.SHA384=rF.SHA512_256=rF.SHA512_224=rF.SHA512=void 0;let iE=rV,[iC,ix]=r5.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),iS=new Uint32Array(80),i_=new Uint32Array(80);class iA extends iE.HashMD{constructor(){super(128,64,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:a,Dh:o,Dl:s,Eh:l,El:c,Fh:d,Fl:u,Gh:h,Gl:f,Hh:p,Hl:g}=this;return[e,t,n,r,i,a,o,s,l,c,d,u,h,f,p,g]}set(e,t,n,r,i,a,o,s,l,c,d,u,h,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|a,this.Dh=0|o,this.Dl=0|s,this.Eh=0|l,this.El=0|c,this.Fh=0|d,this.Fl=0|u,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let n=0;n<16;n++,t+=4)iS[n]=e.getUint32(t),i_[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|iS[e-15],n=0|i_[e-15],r=r5.default.rotrSH(t,n,1)^r5.default.rotrSH(t,n,8)^r5.default.shrSH(t,n,7),i=r5.default.rotrSL(t,n,1)^r5.default.rotrSL(t,n,8)^r5.default.shrSL(t,n,7),a=0|iS[e-2],o=0|i_[e-2],s=r5.default.rotrSH(a,o,19)^r5.default.rotrBH(a,o,61)^r5.default.shrSH(a,o,6),l=r5.default.rotrSL(a,o,19)^r5.default.rotrBL(a,o,61)^r5.default.shrSL(a,o,6),c=r5.default.add4L(i,l,i_[e-7],i_[e-16]),d=r5.default.add4H(c,r,s,iS[e-7],iS[e-16]);iS[e]=0|d,i_[e]=0|c}let{Ah:n,Al:r,Bh:i,Bl:a,Ch:o,Cl:s,Dh:l,Dl:c,Eh:d,El:u,Fh:h,Fl:f,Gh:p,Gl:g,Hh:m,Hl:w}=this;for(let e=0;e<80;e++){let t=r5.default.rotrSH(d,u,14)^r5.default.rotrSH(d,u,18)^r5.default.rotrBH(d,u,41),y=r5.default.rotrSL(d,u,14)^r5.default.rotrSL(d,u,18)^r5.default.rotrBL(d,u,41),v=d&h^~d&p,b=u&f^~u&g,E=r5.default.add5L(w,y,b,ix[e],i_[e]),C=r5.default.add5H(E,m,t,v,iC[e],iS[e]),x=0|E,S=r5.default.rotrSH(n,r,28)^r5.default.rotrBH(n,r,34)^r5.default.rotrBH(n,r,39),_=r5.default.rotrSL(n,r,28)^r5.default.rotrBL(n,r,34)^r5.default.rotrBL(n,r,39),A=n&i^n&o^i&o,T=r&a^r&s^a&s;m=0|p,w=0|g,p=0|h,g=0|f,h=0|d,f=0|u,({h:d,l:u}=r5.default.add(0|l,0|c,0|C,0|x)),l=0|o,c=0|s,o=0|i,s=0|a,i=0|n,a=0|r;let I=r5.default.add3L(x,_,T);n=r5.default.add3H(I,C,S,A),r=0|I}({h:n,l:r}=r5.default.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:a}=r5.default.add(0|this.Bh,0|this.Bl,0|i,0|a)),({h:o,l:s}=r5.default.add(0|this.Ch,0|this.Cl,0|o,0|s)),({h:l,l:c}=r5.default.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:d,l:u}=r5.default.add(0|this.Eh,0|this.El,0|d,0|u)),({h:h,l:f}=r5.default.add(0|this.Fh,0|this.Fl,0|h,0|f)),({h:p,l:g}=r5.default.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:w}=r5.default.add(0|this.Hh,0|this.Hl,0|m,0|w)),this.set(n,r,i,a,o,s,l,c,d,u,h,f,p,g,m,w)}roundClean(){iS.fill(0),i_.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}rF.SHA512=iA;class iT extends iA{constructor(){super(),this.Ah=-0x73c2c838,this.Al=0x19544da2,this.Bh=0x73e19966,this.Bl=-0x76232b2a,this.Ch=0x1dfab7ae,this.Cl=0x32ff9c82,this.Dh=0x679dd514,this.Dl=0x582f9fcf,this.Eh=0xf6d2b69,this.El=0x7bd44da8,this.Fh=0x77e36f73,this.Fl=0x4c48942,this.Gh=0x3f9d85a8,this.Gl=0x6a1d36c8,this.Hh=0x1112e6ad,this.Hl=-0x6e296d5f,this.outputLen=28}}rF.SHA512_224=iT;class iI extends iA{constructor(){super(),this.Ah=0x22312194,this.Al=-0x3d408d4,this.Bh=-0x60aaa05d,this.Bl=-0x37b39b3e,this.Ch=0x2393b86b,this.Cl=0x6f53b151,this.Dh=-0x69c788e7,this.Dl=0x5940eabd,this.Eh=-0x69d7c11e,this.El=-0x5771001d,this.Fh=-0x41a1e1db,this.Fl=0x53863992,this.Gh=0x2b0199fc,this.Gl=0x2c85b8aa,this.Hh=0xeb72ddc,this.Hl=-0x7e3ad35e,this.outputLen=32}}rF.SHA512_256=iI;class iN extends iA{constructor(){super(),this.Ah=-0x344462a3,this.Al=-0x3efa6128,this.Bh=0x629a292a,this.Bl=0x367cd507,this.Ch=-0x6ea6fea6,this.Cl=0x3070dd17,this.Dh=0x152fecd8,this.Dl=-0x8f1a6c7,this.Eh=0x67332667,this.El=-4191439,this.Fh=-0x714bb579,this.Fl=0x68581511,this.Gh=-0x24f3d1f3,this.Gl=0x64f98fa7,this.Hh=0x47b5481d,this.Hl=-0x4105b05c,this.outputLen=48}}rF.SHA384=iN,rF.sha512=(0,r1.wrapConstructor)(()=>new iA),rF.sha512_224=(0,r1.wrapConstructor)(()=>new iT),rF.sha512_256=(0,r1.wrapConstructor)(()=>new iI),rF.sha384=(0,r1.wrapConstructor)(()=>new iN);var iO={},ik={},iM={},iP={};Object.defineProperty(iP,"__esModule",{value:!0}),iP.notImplemented=iP.bitMask=void 0,iP.isBytes=ij,iP.abytes=iU,iP.abool=function(e,t){if("boolean"!=typeof t)throw Error(`${e} must be valid boolean, got "${t}".`)},iP.bytesToHex=i$,iP.numberToHexUnpadded=iW,iP.hexToNumber=iK,iP.hexToBytes=iz,iP.bytesToNumberBE=function(e){return iK(i$(e))},iP.bytesToNumberLE=function(e){return iU(e),iK(i$(Uint8Array.from(e).reverse()))},iP.numberToBytesBE=iF,iP.numberToBytesLE=function(e,t){return iF(e,t).reverse()},iP.numberToVarBytesBE=function(e){return iz(iW(e))},iP.ensureBytes=function(e,t,n){let r;if("string"==typeof t)try{r=iz(t)}catch(n){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!ij(t))throw Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}let i=r.length;if("number"==typeof n&&i!==n)throw Error(`${e} expected ${n} bytes, got ${i}`);return r},iP.concatBytes=iV,iP.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},iP.utf8ToBytes=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},iP.inRange=iY,iP.aInRange=function(e,t,n,r){if(!iY(t,n,r))throw Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)},iP.bitLen=function(e){let t;for(t=0;e>iR;e>>=iL,t+=1);return t},iP.bitGet=function(e,t){return e>>BigInt(t)&iL},iP.bitSet=function(e,t,n){return e|(n?iL:iR)<<BigInt(t)},iP.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof n)throw Error("hmacFn must be a function");let r=iG(e),i=iG(e),a=0,o=()=>{r.fill(1),i.fill(0),a=0},s=(...e)=>n(i,r,...e),l=(e=iG())=>{i=s(iJ([0]),e),r=s(),0!==e.length&&(i=s(iJ([1]),e),r=s())},c=()=>{if(a++>=1e3)throw Error("drbg: tried 1000 values");let e=0,n=[];for(;e<t;){let t=(r=s()).slice();n.push(t),e+=r.length}return iV(...n)};return(e,t)=>{let n;for(o(),l(e);!(n=t(c()));)l();return o(),n}},iP.validateObject=function(e,t,n={}){let r=(t,n,r)=>{let i=iZ[n];if("function"!=typeof i)throw Error(`Invalid validator "${n}", expected function`);let a=e[t];if(!(r&&void 0===a||i(a,e)))throw Error(`Invalid param ${String(t)}=${a} (${typeof a}), expected ${n}`)};for(let[e,n]of Object.entries(t))r(e,n,!1);for(let[e,t]of Object.entries(n))r(e,t,!0);return e},iP.memoized=function(e){let t=new WeakMap;return(n,...r)=>{let i=t.get(n);if(void 0!==i)return i;let a=e(n,...r);return t.set(n,a),a}};let iR=BigInt(0),iL=BigInt(1),iD=BigInt(2);function ij(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function iU(e){if(!ij(e))throw Error("Uint8Array expected")}let iB=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function i$(e){iU(e);let t="";for(let n=0;n<e.length;n++)t+=iB[e[n]];return t}function iW(e){let t=e.toString(16);return 1&t.length?`0${t}`:t}function iK(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function iH(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function iz(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let t=0,i=0;t<n;t++,i+=2){let n=iH(e.charCodeAt(i)),a=iH(e.charCodeAt(i+1));if(void 0===n||void 0===a)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);r[t]=16*n+a}return r}function iF(e,t){return iz(e.toString(16).padStart(2*t,"0"))}function iV(...e){let t=0;for(let n=0;n<e.length;n++){let r=e[n];iU(r),t+=r.length}let n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){let i=e[t];n.set(i,r),r+=i.length}return n}let iq=e=>"bigint"==typeof e&&iR<=e;function iY(e,t,n){return iq(e)&&iq(t)&&iq(n)&&t<=e&&e<n}iP.bitMask=e=>(iD<<BigInt(e-1))-iL;let iG=e=>new Uint8Array(e),iJ=e=>Uint8Array.from(e),iZ={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||ij(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};iP.notImplemented=()=>{throw Error("not implemented")},Object.defineProperty(iM,"__esModule",{value:!0}),iM.isNegativeLE=void 0,iM.mod=i8,iM.pow=i6,iM.pow2=function(e,t,n){let r=e;for(;t-- >iX;)r*=r,r%=n;return r},iM.invert=i9,iM.tonelliShanks=i7,iM.FpSqrt=ae,iM.validateField=function(e){let t=at.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,iQ.validateObject)(e,t)},iM.FpPow=an,iM.FpInvertBatch=ar,iM.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?i9(n,e.ORDER):e.inv(n))},iM.FpLegendre=ai,iM.FpIsSquare=function(e){let t=ai(e.ORDER);return n=>{let r=t(e,n);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}},iM.nLength=aa,iM.Field=function(e,t,n=!1,r={}){if(e<=iX)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:a}=aa(e,t);if(a>2048)throw Error("Field lengths over 2048 bytes are not supported");let o=ae(e),s=Object.freeze({ORDER:e,BITS:i,BYTES:a,MASK:(0,iQ.bitMask)(i),ZERO:iX,ONE:i0,create:t=>i8(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("Invalid field element: expected bigint, got "+typeof t);return iX<=t&&t<e},is0:e=>e===iX,isOdd:e=>(e&i0)===i0,neg:t=>i8(-t,e),eql:(e,t)=>e===t,sqr:t=>i8(t*t,e),add:(t,n)=>i8(t+n,e),sub:(t,n)=>i8(t-n,e),mul:(t,n)=>i8(t*n,e),pow:(e,t)=>an(s,e,t),div:(t,n)=>i8(t*i9(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>i9(t,e),sqrt:r.sqrt||(e=>o(s,e)),invertBatch:e=>ar(s,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?(0,iQ.numberToBytesLE)(e,a):(0,iQ.numberToBytesBE)(e,a),fromBytes:e=>{if(e.length!==a)throw Error(`Fp.fromBytes: expected ${a}, got ${e.length}`);return n?(0,iQ.bytesToNumberLE)(e):(0,iQ.bytesToNumberBE)(e)}});return Object.freeze(s)},iM.FpSqrtOdd=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},iM.FpSqrtEven=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},iM.hashToPrivateScalar=function(e,t,n=!1){let r=(e=(0,iQ.ensureBytes)("privateHash",e)).length,i=aa(t).nByteLength+8;if(i<24||r<i||r>1024)throw Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return i8(n?(0,iQ.bytesToNumberLE)(e):(0,iQ.bytesToNumberBE)(e),t-i0)+i0},iM.getFieldBytesLength=ao,iM.getMinHashLength=as,iM.mapHashToField=function(e,t,n=!1){let r=e.length,i=ao(t),a=as(t);if(r<16||r<a||r>1024)throw Error(`expected ${a}-1024 bytes of input, got ${r}`);let o=i8(n?(0,iQ.bytesToNumberBE)(e):(0,iQ.bytesToNumberLE)(e),t-i0)+i0;return n?(0,iQ.numberToBytesLE)(o,i):(0,iQ.numberToBytesBE)(o,i)};let iQ=iP,iX=BigInt(0),i0=BigInt(1),i1=BigInt(2),i3=BigInt(3),i2=BigInt(4),i5=BigInt(5),i4=BigInt(8);function i8(e,t){let n=e%t;return n>=iX?n:t+n}function i6(e,t,n){if(n<=iX||t<iX)throw Error("Expected power/modulo > 0");if(n===i0)return iX;let r=i0;for(;t>iX;)t&i0&&(r=r*e%n),e=e*e%n,t>>=i0;return r}function i9(e,t){if(e===iX||t<=iX)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=i8(e,t),r=t,i=iX,a=i0;for(;n!==iX;){let e=r%n,t=i-r/n*a;r=n,n=e,i=a,a=t}if(r!==i0)throw Error("invert: does not exist");return i8(i,t)}function i7(e){let t,n,r,i=(e-i0)/i1;for(t=e-i0,n=0;t%i1===iX;t/=i1,n++);for(r=i1;r<e&&i6(r,i,e)!==e-i0;r++);if(1===n){let t=(e+i0)/i2;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error("Cannot find square root");return r}}let a=(t+i0)/i1;return function(e,o){if(e.pow(o,i)===e.neg(e.ONE))throw Error("Cannot find square root");let s=n,l=e.pow(e.mul(e.ONE,r),t),c=e.pow(o,a),d=e.pow(o,t);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(d);t<s&&!e.eql(n,e.ONE);t++)n=e.sqr(n);let n=e.pow(l,i0<<BigInt(s-t-1));l=e.sqr(n),c=e.mul(c,n),d=e.mul(d,l),s=t}return c}}function ae(e){if(e%i2===i3){let t=(e+i0)/i2;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error("Cannot find square root");return r}}if(e%i4===i5){let t=(e-i5)/i4;return function(e,n){let r=e.mul(n,i1),i=e.pow(r,t),a=e.mul(n,i),o=e.mul(e.mul(a,i1),i),s=e.mul(a,e.sub(o,e.ONE));if(!e.eql(e.sqr(s),n))throw Error("Cannot find square root");return s}}return i7(e)}BigInt(9),BigInt(16),iM.isNegativeLE=(e,t)=>(i8(e,t)&i0)===i0;let at=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function an(e,t,n){if(n<iX)throw Error("Expected power > 0");if(n===iX)return e.ONE;if(n===i0)return t;let r=e.ONE,i=t;for(;n>iX;)n&i0&&(r=e.mul(r,i)),i=e.sqr(i),n>>=i0;return r}function ar(e,t){let n=Array(t.length),r=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),i=e.inv(r);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),i),n}function ai(e){let t=(e-i0)/i1;return(e,n)=>e.pow(n,t)}function aa(e,t){let n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function ao(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function as(e){let t=ao(e);return t+Math.ceil(t/2)}Object.defineProperty(ik,"__esModule",{value:!0}),ik.wNAF=function(e,t){let n=(e,t)=>{let n=t.negate();return e?n:t},r=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error(`Wrong window size=${e}, should be [1..${t}]`)},i=e=>(r(e),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>ad;)n&au&&(r=r.add(i)),i=i.double(),n>>=au;return r},precomputeWindow(e,t){let{windows:n,windowSize:r}=i(t),a=[],o=e,s=o;for(let e=0;e<n;e++){s=o,a.push(s);for(let e=1;e<r;e++)s=s.add(o),a.push(s);o=s.double()}return a},wNAF(t,r,a){let{windows:o,windowSize:s}=i(t),l=e.ZERO,c=e.BASE,d=BigInt(2**t-1),u=2**t,h=BigInt(t);for(let e=0;e<o;e++){let t=e*s,i=Number(a&d);a>>=h,i>s&&(i-=u,a+=au);let o=t+Math.abs(i)-1,f=e%2!=0,p=i<0;0===i?c=c.add(n(f,r[t])):l=l.add(n(p,r[o]))}return{p:l,f:c}},wNAFCached(e,t,n){let r=af.get(e)||1,i=ah.get(e);return i||(i=this.precomputeWindow(e,r),1!==r&&ah.set(e,n(i))),this.wNAF(r,i,t)},setWindowSize(e,t){r(t),af.set(e,t),ah.delete(e)}}},ik.pippenger=function(e,t,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw Error("arrays of points and scalars must have equal length");r.forEach((e,n)=>{if(!t.isValid(e))throw Error(`wrong scalar at index ${n}`)}),n.forEach((t,n)=>{if(!(t instanceof e))throw Error(`wrong point at index ${n}`)});let i=(0,ac.bitLen)(BigInt(n.length)),a=i>12?i-3:i>4?i-2:i?2:1,o=(1<<a)-1,s=Array(o+1).fill(e.ZERO),l=Math.floor((t.BITS-1)/a)*a,c=e.ZERO;for(let t=l;t>=0;t-=a){s.fill(e.ZERO);for(let e=0;e<r.length;e++){let i=Number(r[e]>>BigInt(t)&BigInt(o));s[i]=s[i].add(n[e])}let i=e.ZERO;for(let t=s.length-1,n=e.ZERO;t>0;t--)n=n.add(s[t]),i=i.add(n);if(c=c.add(i),0!==t)for(let e=0;e<a;e++)c=c.double()}return c},ik.validateBasic=function(e){return(0,al.validateField)(e.Fp),(0,ac.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,al.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})};let al=iM,ac=iP,ad=BigInt(0),au=BigInt(1),ah=new WeakMap,af=new WeakMap;Object.defineProperty(iO,"__esModule",{value:!0}),iO.twistedEdwards=function(e){let t,n=(t=(0,ap.validateBasic)(e),am.validateObject(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})),{Fp:r,n:i,prehash:a,hash:o,randomBytes:s,nByteLength:l,h:c}=n,d=ab<<BigInt(8*l)-av,u=r.create,h=(0,ag.Field)(n.n,n.nBitLength),f=n.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(e){return{isValid:!1,value:ay}}}),p=n.adjustScalarBytes||(e=>e),g=n.domain||((e,t,n)=>{if((0,aw.abool)("phflag",n),t.length||n)throw Error("Contexts/pre-hash are not supported");return e});function m(e,t){am.aInRange("coordinate "+e,t,ay,d)}function w(e){if(!(e instanceof b))throw Error("ExtendedPoint expected")}let y=(0,aw.memoized)((e,t)=>{let{ex:n,ey:i,ez:a}=e,o=e.is0();null==t&&(t=o?aE:r.inv(a));let s=u(n*t),l=u(i*t),c=u(a*t);if(o)return{x:ay,y:av};if(c!==av)throw Error("invZ was invalid");return{x:s,y:l}}),v=(0,aw.memoized)(e=>{let{a:t,d:r}=n;if(e.is0())throw Error("bad point: ZERO");let{ex:i,ey:a,ez:o,et:s}=e,l=u(i*i),c=u(a*a),d=u(o*o),h=u(d*d),f=u(l*t);if(u(d*u(f+c))!==u(h+u(r*u(l*c))))throw Error("bad point: equation left != right (1)");if(u(i*a)!==u(o*s))throw Error("bad point: equation left != right (2)");return!0});class b{constructor(e,t,n,r){this.ex=e,this.ey=t,this.ez=n,this.et=r,m("x",e),m("y",t),m("z",n),m("t",r),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof b)throw Error("extended point not allowed");let{x:t,y:n}=e||{};return m("x",t),m("y",n),new b(t,n,av,u(t*n))}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.ez));return e.map((e,n)=>e.toAffine(t[n])).map(b.fromAffine)}static msm(e,t){return(0,ap.pippenger)(b,h,e,t)}_setWindowSize(e){x.setWindowSize(this,e)}assertValidity(){v(this)}equals(e){w(e);let{ex:t,ey:n,ez:r}=this,{ex:i,ey:a,ez:o}=e,s=u(t*o),l=u(i*r),c=u(n*o),d=u(a*r);return s===l&&c===d}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:e}=n,{ex:t,ey:r,ez:i}=this,a=u(t*t),o=u(r*r),s=u(ab*u(i*i)),l=u(e*a),c=t+r,d=u(u(c*c)-a-o),h=l+o,f=h-s,p=l-o,g=u(d*f),m=u(h*p),w=u(d*p);return new b(g,m,u(f*h),w)}add(e){w(e);let{a:t,d:r}=n,{ex:i,ey:a,ez:o,et:s}=this,{ex:l,ey:c,ez:d,et:h}=e;if(t===BigInt(-1)){let e=u((a-i)*(c+l)),t=u((a+i)*(c-l)),n=u(t-e);if(n===ay)return this.double();let r=u(o*ab*h),f=u(s*ab*d),p=f+r,g=t+e,m=f-r,w=u(p*n),y=u(g*m),v=u(p*m);return new b(w,y,u(n*g),v)}let f=u(i*l),p=u(a*c),g=u(s*r*h),m=u(o*d),y=u((i+a)*(l+c)-f-p),v=m-g,E=m+g,C=u(p-t*f),x=u(y*v),S=u(E*C),_=u(y*C);return new b(x,S,u(v*E),_)}subtract(e){return this.add(e.negate())}wNAF(e){return x.wNAFCached(this,e,b.normalizeZ)}multiply(e){am.aInRange("scalar",e,av,i);let{p:t,f:n}=this.wNAF(e);return b.normalizeZ([t,n])[0]}multiplyUnsafe(e){return am.aInRange("scalar",e,ay,i),e===ay?C:this.equals(C)||e===av?this:this.equals(E)?this.wNAF(e).p:x.unsafeLadder(this,e)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return x.unsafeLadder(this,i).is0()}toAffine(e){return y(this,e)}clearCofactor(){let{h:e}=n;return e===av?this:this.multiplyUnsafe(e)}static fromHex(e,t=!1){let{d:i,a:a}=n,o=r.BYTES;e=(0,aw.ensureBytes)("pointHex",e,o),(0,aw.abool)("zip215",t);let s=e.slice(),l=e[o-1];s[o-1]=-129&l;let c=am.bytesToNumberLE(s),h=t?d:r.ORDER;am.aInRange("pointHex.y",c,ay,h);let p=u(c*c),{isValid:g,value:m}=f(u(p-av),u(i*p-a));if(!g)throw Error("Point.fromHex: invalid y coordinate");let w=(m&av)===av,y=0!=(128&l);if(!t&&m===ay&&y)throw Error("Point.fromHex: x=0 and x_0=1");return y!==w&&(m=u(-m)),b.fromAffine({x:m,y:c})}static fromPrivateKey(e){return A(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),n=am.numberToBytesLE(t,r.BYTES);return n[n.length-1]|=e&av?128:0,n}toHex(){return am.bytesToHex(this.toRawBytes())}}b.BASE=new b(n.Gx,n.Gy,av,u(n.Gx*n.Gy)),b.ZERO=new b(ay,av,av,ay);let{BASE:E,ZERO:C}=b,x=(0,ap.wNAF)(b,8*l);function S(e){return(0,ag.mod)(e,i)}function _(e){return S(am.bytesToNumberLE(e))}function A(e){e=(0,aw.ensureBytes)("private key",e,l);let t=(0,aw.ensureBytes)("hashed private key",o(e),2*l),n=p(t.slice(0,l)),r=t.slice(l,2*l),i=_(n),a=E.multiply(i),s=a.toRawBytes();return{head:n,prefix:r,scalar:i,point:a,pointBytes:s}}function T(e=new Uint8Array,...t){return _(o(g(am.concatBytes(...t),(0,aw.ensureBytes)("context",e),!!a)))}return E._setWindowSize(8),{CURVE:n,getPublicKey:function(e){return A(e).pointBytes},sign:function(e,t,n={}){e=(0,aw.ensureBytes)("message",e),a&&(e=a(e));let{prefix:o,scalar:s,pointBytes:c}=A(t),d=T(n.context,o,e),u=E.multiply(d).toRawBytes(),h=S(d+T(n.context,u,c,e)*s);am.aInRange("signature.s",h,ay,i);let f=am.concatBytes(u,am.numberToBytesLE(h,r.BYTES));return(0,aw.ensureBytes)("result",f,2*l)},verify:function(e,t,n,i=aC){let o,s,l,{context:c,zip215:d}=i,u=r.BYTES;e=(0,aw.ensureBytes)("signature",e,2*u),t=(0,aw.ensureBytes)("message",t),void 0!==d&&(0,aw.abool)("zip215",d),a&&(t=a(t));let h=am.bytesToNumberLE(e.slice(u,2*u));try{o=b.fromHex(n,d),s=b.fromHex(e.slice(0,u),d),l=E.multiplyUnsafe(h)}catch(e){return!1}if(!d&&o.isSmallOrder())return!1;let f=T(c,s.toRawBytes(),o.toRawBytes(),t);return s.add(o.multiplyUnsafe(f)).subtract(l).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:{getExtendedPublicKey:A,randomPrivateKey:()=>s(r.BYTES),precompute:(e=8,t=b.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}};let ap=ik,ag=iM,am=iP,aw=iP,ay=BigInt(0),av=BigInt(1),ab=BigInt(2),aE=BigInt(8),aC={zip215:!0};var ax={};Object.defineProperty(ax,"__esModule",{value:!0}),ax.expand_message_xmd=aT,ax.expand_message_xof=aI,ax.hash_to_field=aN,ax.isogenyMap=function(e,t){let n=t.map(e=>Array.from(e).reverse());return(t,r)=>{let[i,a,o,s]=n.map(n=>n.reduce((n,r)=>e.add(e.mul(n,t),r)));return t=e.div(i,a),r=e.mul(r,e.div(o,s)),{x:t,y:r}}},ax.createHasher=function(e,t,n){if("function"!=typeof t)throw Error("mapToCurve() must be defined");return{hashToCurve(r,i){let a=aN(r,2,{...n,DST:n.DST,...i}),o=e.fromAffine(t(a[0])),s=e.fromAffine(t(a[1])),l=o.add(s).clearCofactor();return l.assertValidity(),l},encodeToCurve(r,i){let a=aN(r,1,{...n,DST:n.encodeDST,...i}),o=e.fromAffine(t(a[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(n){if(!Array.isArray(n))throw Error("mapToCurve: expected array of bigints");for(let e of n)if("bigint"!=typeof e)throw Error(`mapToCurve: expected array of bigints, got ${e} in array`);let r=e.fromAffine(t(n)).clearCofactor();return r.assertValidity(),r}}};let aS=iP.bytesToNumberBE;function a_(e,t){if(aA(e),aA(t),e<0||e>=1<<8*t)throw Error(`bad I2OSP call: value=${e} length=${t}`);let n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function aA(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function aT(e,t,n,r){(0,iP.abytes)(e),(0,iP.abytes)(t),aA(n),t.length>255&&(t=r((0,iP.concatBytes)((0,iP.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:i,blockLen:a}=r,o=Math.ceil(n/i);if(n>65535||o>255)throw Error("expand_message_xmd: invalid lenInBytes");let s=(0,iP.concatBytes)(t,a_(t.length,1)),l=a_(0,a),c=a_(n,2),d=Array(o),u=r((0,iP.concatBytes)(l,e,c,a_(0,1),s));d[0]=r((0,iP.concatBytes)(u,a_(1,1),s));for(let e=1;e<=o;e++){let t=[function(e,t){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}(u,d[e-1]),a_(e+1,1),s];d[e]=r((0,iP.concatBytes)(...t))}return(0,iP.concatBytes)(...d).slice(0,n)}function aI(e,t,n,r,i){if((0,iP.abytes)(e),(0,iP.abytes)(t),aA(n),t.length>255){let e=Math.ceil(2*r/8);t=i.create({dkLen:e}).update((0,iP.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(a_(n,2)).update(t).update(a_(t.length,1)).digest()}function aN(e,t,n){let r;(0,iP.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:i,k:a,m:o,hash:s,expand:l,DST:c}=n;(0,iP.abytes)(e),aA(t);let d="string"==typeof c?(0,iP.utf8ToBytes)(c):c,u=Math.ceil((i.toString(2).length+a)/8),h=t*o*u;if("xmd"===l)r=aT(e,d,h,s);else if("xof"===l)r=aI(e,d,h,a,s);else{if("_internal_pass"!==l)throw Error('expand must be "xmd" or "xof"');r=e}let f=Array(t);for(let e=0;e<t;e++){let t=Array(o);for(let n=0;n<o;n++){let a=u*(n+e*o),s=r.subarray(a,a+u);t[n]=(0,iM.mod)(aS(s),i)}f[e]=t}return f}var aO={};Object.defineProperty(aO,"__esModule",{value:!0}),aO.montgomery=function(e){let t=((0,aM.validateObject)(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})),{P:n}=t,r=e=>(0,ak.mod)(e,n),i=t.montgomeryBits,a=Math.ceil(i/8),o=t.nByteLength,s=t.adjustScalarBytes||(e=>e),l=t.powPminus2||(e=>(0,ak.pow)(e,n-BigInt(2),n));function c(e,t,n){let i=r(e*(t-n));return[t=r(t-i),n=r(n+i)]}let d=(t.a-BigInt(2))/BigInt(4);function u(e){return(0,aM.numberToBytesLE)(r(e),a)}function h(e,t){let h,f=function(e,t){(0,aM.aInRange)("u",e,aP,n),(0,aM.aInRange)("scalar",t,aP,n);let a,o=aR,s=aP,u=e,h=aR,f=aP;for(let n=BigInt(i-1);n>=aP;n--){let i=t>>n&aR;f^=i,o=(a=c(f,o,u))[0],u=a[1],s=(a=c(f,s,h))[0],h=a[1],f=i;let l=o+s,p=r(l*l),g=o-s,m=r(g*g),w=p-m,y=u+h,v=r((u-h)*l),b=r(y*g),E=v+b,C=v-b;u=r(E*E),h=r(e*r(C*C)),o=r(p*m),s=r(w*(p+r(d*w)))}return o=(a=c(f,o,u))[0],u=a[1],s=(a=c(f,s,h))[0],h=a[1],r(o*l(s))}((h=(0,aM.ensureBytes)("u coordinate",t,a),32===o&&(h[31]&=127),(0,aM.bytesToNumberLE)(h)),function(e){let t=(0,aM.ensureBytes)("scalar",e),n=t.length;if(n!==a&&n!==o)throw Error(`Expected ${a} or ${o} bytes, got ${n}`);return(0,aM.bytesToNumberLE)(s(t))}(e));if(f===aP)throw Error("Invalid private or public key received");return u(f)}let f=u(t.Gu);function p(e){return h(e,f)}return{scalarMult:h,scalarMultBase:p,getSharedSecret:(e,t)=>h(e,t),getPublicKey:e=>p(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:f}};let ak=iM,aM=iP,aP=BigInt(0),aR=BigInt(1);!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hash_to_ristretto255=e.hashToRistretto255=e.RistrettoPoint=e.encodeToCurve=e.hashToCurve=e.edwardsToMontgomery=e.x25519=e.ed25519ph=e.ed25519ctx=e.ed25519=e.ED25519_TORSION_SUBGROUP=void 0,e.edwardsToMontgomeryPub=g,e.edwardsToMontgomeryPriv=function(e){let t=f.hash(e.subarray(0,32));return f.adjustScalarBytes(t).subarray(0,32)};let t=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),n=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),r=BigInt(0),i=BigInt(1),a=BigInt(2),o=BigInt(3),s=BigInt(5),l=BigInt(8);function c(e){let n=BigInt(10),r=BigInt(20),o=BigInt(40),l=BigInt(80),c=e*e%t*e%t,d=(0,iM.pow2)(c,a,t)*c%t,u=(0,iM.pow2)(d,i,t)*e%t,h=(0,iM.pow2)(u,s,t)*u%t,f=(0,iM.pow2)(h,n,t)*h%t,p=(0,iM.pow2)(f,r,t)*f%t,g=(0,iM.pow2)(p,o,t)*p%t,m=(0,iM.pow2)(g,l,t)*g%t,w=(0,iM.pow2)(m,l,t)*g%t,y=(0,iM.pow2)(w,n,t)*h%t;return{pow_p_5_8:(0,iM.pow2)(y,a,t)*e%t,b2:c}}function d(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function u(e,r){let i=(0,iM.mod)(r*r*r,t),a=c(e*(0,iM.mod)(i*i*r,t)).pow_p_5_8,o=(0,iM.mod)(e*i*a,t),s=(0,iM.mod)(r*o*o,t),l=o,d=(0,iM.mod)(o*n,t),u=s===e,h=s===(0,iM.mod)(-e,t),f=s===(0,iM.mod)(-e*n,t);return u&&(o=l),(h||f)&&(o=d),(0,iM.isNegativeLE)(o,t)&&(o=(0,iM.mod)(-o,t)),{isValid:u||h,value:o}}e.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];let h=(0,iM.Field)(t,void 0,!0),f={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:h,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:l,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:rF.sha512,randomBytes:r1.randomBytes,adjustScalarBytes:d,uvRatio:u};function p(e,t,n){if(t.length>255)throw Error("Context is too big");return(0,r1.concatBytes)((0,r1.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([+!!n,t.length]),t,e)}function g(t){let{y:n}=e.ed25519.ExtendedPoint.fromHex(t),r=BigInt(1);return h.toBytes(h.create((r+n)*h.inv(r-n)))}e.ed25519=(0,iO.twistedEdwards)(f),e.ed25519ctx=(0,iO.twistedEdwards)({...f,domain:p}),e.ed25519ph=(0,iO.twistedEdwards)(Object.assign({},f,{domain:p,prehash:rF.sha512})),e.x25519=(0,aO.montgomery)({P:t,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{let{pow_p_5_8:n,b2:r}=c(e);return(0,iM.mod)((0,iM.pow2)(n,o,t)*r,t)},adjustScalarBytes:d,randomBytes:r1.randomBytes}),e.edwardsToMontgomery=g;let m=(h.ORDER+o)/l,w=h.pow(a,m),y=h.sqrt(h.neg(h.ONE)),v=(0,iM.FpSqrtEven)(h,h.neg(BigInt(486664))),b=(0,ax.createHasher)(e.ed25519.ExtendedPoint,e=>(function(e){let t,n,r,o,c,d,u,f,p,g,m,b,E,C,x,S,_,A,T,I,N,O,k,{xMn:M,xMd:P,yMn:R,yMd:L}=(t=(h.ORDER-s)/l,n=BigInt(486662),r=h.sqr(e),r=h.mul(r,a),o=h.add(r,h.ONE),c=h.neg(n),d=h.sqr(o),u=h.mul(d,o),f=h.mul(r,n),f=h.mul(f,c),f=h.add(f,d),f=h.mul(f,c),p=h.sqr(u),d=h.sqr(p),p=h.mul(p,u),p=h.mul(p,f),d=h.mul(d,p),g=h.pow(d,t),g=h.mul(g,p),m=h.mul(g,y),d=h.sqr(g),d=h.mul(d,u),b=h.eql(d,f),E=h.cmov(m,g,b),C=h.mul(c,r),x=h.mul(g,e),x=h.mul(x,w),S=h.mul(x,y),_=h.mul(f,r),d=h.sqr(x),d=h.mul(d,u),A=h.eql(d,_),T=h.cmov(S,x,A),d=h.sqr(E),d=h.mul(d,u),I=h.eql(d,f),N=h.cmov(C,c,I),O=h.cmov(T,E,I),k=h.isOdd(O),{xMn:N,xMd:o,yMn:O=h.cmov(O,h.neg(O),I!==k),yMd:i}),D=h.mul(M,L);D=h.mul(D,v);let j=h.mul(P,R),U=h.sub(M,P),B=h.add(M,P),$=h.mul(j,B),W=h.eql($,h.ZERO);D=h.cmov(D,h.ZERO,W),j=h.cmov(j,h.ONE,W),U=h.cmov(U,h.ONE,W),B=h.cmov(B,h.ONE,W);let K=h.invertBatch([j,B]);return{x:h.mul(D,K[0]),y:h.mul(U,K[1])}})(e[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:h.ORDER,m:1,k:128,expand:"xmd",hash:rF.sha512});function E(e){if(!(e instanceof N))throw Error("RistrettoPoint expected")}e.hashToCurve=b.hashToCurve,e.encodeToCurve=b.encodeToCurve;let C=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),x=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),S=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),_=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),A=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),T=t=>e.ed25519.CURVE.Fp.create((0,iP.bytesToNumberLE)(t)&A);function I(t){let{d:r}=e.ed25519.CURVE,a=e.ed25519.CURVE.Fp.ORDER,o=e.ed25519.CURVE.Fp.create,s=o(n*t*t),l=o((s+i)*S),c=BigInt(-1),d=o((c-r*s)*o(s+r)),{isValid:h,value:f}=u(l,d),p=o(f*t);(0,iM.isNegativeLE)(p,a)||(p=o(-p)),h||(f=p),h||(c=s);let g=o(c*(s-i)*_-d),m=f*f,w=o((f+f)*d),y=o(g*C),v=o(i-m),b=o(i+m);return new e.ed25519.ExtendedPoint(o(w*b),o(v*y),o(y*b),o(w*v))}class N{constructor(e){this.ep=e}static fromAffine(t){return new N(e.ed25519.ExtendedPoint.fromAffine(t))}static hashToCurve(e){let t=I(T((e=(0,iP.ensureBytes)("ristrettoHash",e,64)).slice(0,32))),n=I(T(e.slice(32,64)));return new N(t.add(n))}static fromHex(t){t=(0,iP.ensureBytes)("ristrettoHex",t,32);let{a:n,d:a}=e.ed25519.CURVE,o=e.ed25519.CURVE.Fp.ORDER,s=e.ed25519.CURVE.Fp.create,l="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",c=T(t);if(!(0,iP.equalBytes)((0,iP.numberToBytesLE)(c,32),t)||(0,iM.isNegativeLE)(c,o))throw Error(l);let d=s(c*c),h=s(i+n*d),f=s(i-n*d),p=s(h*h),g=s(f*f),m=s(n*a*p-g),{isValid:w,value:y}=u(i,s(m*g)),v=s(y*f),b=s(y*v*m),E=s((c+c)*v);(0,iM.isNegativeLE)(E,o)&&(E=s(-E));let C=s(h*b),x=s(E*C);if(!w||(0,iM.isNegativeLE)(x,o)||C===r)throw Error(l);return new N(new e.ed25519.ExtendedPoint(E,C,i,x))}toRawBytes(){let t,{ex:r,ey:a,ez:o,et:s}=this.ep,l=e.ed25519.CURVE.Fp.ORDER,c=e.ed25519.CURVE.Fp.create,d=c(c(o+a)*c(o-a)),h=c(r*a),f=c(h*h),{value:p}=u(i,c(d*f)),g=c(p*d),m=c(p*h),w=c(g*m*s);if((0,iM.isNegativeLE)(s*w,l)){let e=c(a*n),i=c(r*n);r=e,a=i,t=c(g*x)}else t=m;(0,iM.isNegativeLE)(r*w,l)&&(a=c(-a));let y=c((o-a)*t);return(0,iM.isNegativeLE)(y,l)&&(y=c(-y)),(0,iP.numberToBytesLE)(y,32)}toHex(){return(0,iP.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(t){E(t);let{ex:n,ey:r}=this.ep,{ex:i,ey:a}=t.ep,o=e.ed25519.CURVE.Fp.create,s=o(n*a)===o(r*i),l=o(r*a)===o(n*i);return s||l}add(e){return E(e),new N(this.ep.add(e.ep))}subtract(e){return E(e),new N(this.ep.subtract(e.ep))}multiply(e){return new N(this.ep.multiply(e))}multiplyUnsafe(e){return new N(this.ep.multiplyUnsafe(e))}double(){return new N(this.ep.double())}negate(){return new N(this.ep.negate())}}N.BASE||(N.BASE=new N(e.ed25519.ExtendedPoint.BASE)),N.ZERO||(N.ZERO=new N(e.ed25519.ExtendedPoint.ZERO)),e.RistrettoPoint=N,e.hashToRistretto255=(e,t)=>{let n=t.DST,r="string"==typeof n?(0,r1.utf8ToBytes)(n):n,i=(0,ax.expand_message_xmd)(e,r,64,rF.sha512);return N.hashToCurve(i)},e.hash_to_ristretto255=e.hashToRistretto255}(rz);var aL={},aD={};Object.defineProperty(aD,"__esModule",{value:!0}),aD.sha224=aD.sha256=aD.SHA256=void 0;let aj=rV,aU=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),aB=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),a$=new Uint32Array(64);class aW extends aj.HashMD{constructor(){super(64,32,8,!1),this.A=0|aB[0],this.B=0|aB[1],this.C=0|aB[2],this.D=0|aB[3],this.E=0|aB[4],this.F=0|aB[5],this.G=0|aB[6],this.H=0|aB[7]}get(){let{A:e,B:t,C:n,D:r,E:i,F:a,G:o,H:s}=this;return[e,t,n,r,i,a,o,s]}set(e,t,n,r,i,a,o,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|a,this.G=0|o,this.H=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)a$[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=a$[e-15],n=a$[e-2],r=(0,r1.rotr)(t,7)^(0,r1.rotr)(t,18)^t>>>3,i=(0,r1.rotr)(n,17)^(0,r1.rotr)(n,19)^n>>>10;a$[e]=i+a$[e-7]+r+a$[e-16]|0}let{A:n,B:r,C:i,D:a,E:o,F:s,G:l,H:c}=this;for(let e=0;e<64;e++){let t=c+((0,r1.rotr)(o,6)^(0,r1.rotr)(o,11)^(0,r1.rotr)(o,25))+(0,aj.Chi)(o,s,l)+aU[e]+a$[e]|0,d=((0,r1.rotr)(n,2)^(0,r1.rotr)(n,13)^(0,r1.rotr)(n,22))+(0,aj.Maj)(n,r,i)|0;c=l,l=s,s=o,o=a+t|0,a=i,i=r,r=n,n=t+d|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,s=s+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,r,i,a,o,s,l,c)}roundClean(){a$.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}aD.SHA256=aW;class aK extends aW{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}aD.sha256=(0,r1.wrapConstructor)(()=>new aW),aD.sha224=(0,r1.wrapConstructor)(()=>new aK);var aH={},az={};Object.defineProperty(az,"__esModule",{value:!0}),az.hmac=az.HMAC=void 0;let aF=r1;class aV extends aF.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,rq.hash)(e);const n=(0,aF.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return(0,rq.exists)(this),this.iHash.update(e),this}digestInto(e){(0,rq.exists)(this),(0,rq.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:a,outputLen:o}=this;return e.finished=r,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}az.HMAC=aV,az.hmac=(e,t,n)=>new aV(e,t).update(n).digest(),az.hmac.create=(e,t)=>new aV(e,t);var aq={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DER=void 0,e.weierstrassPoints=f,e.weierstrass=function(o){let s,d=(s=(0,t.validateBasic)(o),r.validateObject(s,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...s})),{Fp:u,n:h}=d,p=u.BYTES+1,g=2*u.BYTES+1;function m(e){return n.mod(e,h)}function w(e){return n.invert(e,h)}let{ProjectivePoint:y,normPrivateKeyToScalar:v,weierstrassEquation:b,isWithinCurveOrder:E}=f({...d,toBytes(e,t,n){let a=t.toAffine(),o=u.toBytes(a.x),s=r.concatBytes;return(0,i.abool)("isCompressed",n),n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,u.toBytes(a.y))},fromBytes(e){let t=e.length,n=e[0],i=e.subarray(1);if(t!==p||2!==n&&3!==n){if(t===g&&4===n)return{x:u.fromBytes(i.subarray(0,u.BYTES)),y:u.fromBytes(i.subarray(u.BYTES,2*u.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${p} compressed bytes or ${g} uncompressed bytes`)}{let e,t=r.bytesToNumberBE(i);if(!r.inRange(t,c,u.ORDER))throw Error("Point is not on curve");let a=b(t);try{e=u.sqrt(a)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return 1==(1&n)!=((e&c)===c)&&(e=u.neg(e)),{x:t,y:e}}}}),C=e=>r.bytesToHex(r.numberToBytesBE(e,d.nByteLength)),x=(e,t,n)=>r.bytesToNumberBE(e.slice(t,n));class S{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){let t=d.nByteLength;return new S(x(e=(0,i.ensureBytes)("compactSignature",e,2*t),0,t),x(e,t,2*t))}static fromDER(t){let{r:n,s:r}=e.DER.toSig((0,i.ensureBytes)("DER",t));return new S(n,r)}assertValidity(){r.aInRange("r",this.r,c,h),r.aInRange("s",this.s,c,h)}addRecoveryBit(e){return new S(this.r,this.s,e)}recoverPublicKey(e){let{r:t,s:n,recovery:r}=this,a=T((0,i.ensureBytes)("msgHash",e));if(null==r||![0,1,2,3].includes(r))throw Error("recovery id invalid");let o=2===r||3===r?t+d.n:t;if(o>=u.ORDER)throw Error("recovery id 2 or 3 invalid");let s=0==(1&r)?"02":"03",l=y.fromHex(s+C(o)),c=w(o),h=m(-a*c),f=m(n*c),p=y.BASE.multiplyAndAddUnsafe(l,h,f);if(!p)throw Error("point at infinify");return p.assertValidity(),p}hasHighS(){return this.s>h>>c}normalizeS(){return this.hasHighS()?new S(this.r,m(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return C(this.r)+C(this.s)}}function _(e){let t=r.isBytes(e),n="string"==typeof e,i=(t||n)&&e.length;return t?i===p||i===g:n?i===2*p||i===2*g:e instanceof y}let A=d.bits2int||function(e){let t=r.bytesToNumberBE(e),n=8*e.length-d.nBitLength;return n>0?t>>BigInt(n):t},T=d.bits2int_modN||function(e){return m(A(e))},I=r.bitMask(d.nBitLength);function N(e){return r.aInRange(`num < 2^${d.nBitLength}`,e,l,I),r.numberToBytesBE(e,d.nByteLength)}let O={lowS:d.lowS,prehash:!1},k={lowS:d.lowS,prehash:!1};return y.BASE._setWindowSize(8),{CURVE:d,getPublicKey:function(e,t=!0){return y.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(_(e))throw Error("first arg must be private key");if(!_(t))throw Error("second arg must be public key");return y.fromHex(t).multiply(v(e)).toRawBytes(n)},sign:function(e,t,n=O){let{seed:o,k2sig:s}=function(e,t,n=O){if(["recovered","canonical"].some(e=>e in n))throw Error("sign() legacy options not supported");let{hash:o,randomBytes:s}=d,{lowS:f,prehash:p,extraEntropy:g}=n;null==f&&(f=!0),e=(0,i.ensureBytes)("msgHash",e),a(n),p&&(e=(0,i.ensureBytes)("prehashed msgHash",o(e)));let b=T(e),C=v(t),x=[N(C),N(b)];if(null!=g&&!1!==g){let e=!0===g?s(u.BYTES):g;x.push((0,i.ensureBytes)("extraEntropy",e))}return{seed:r.concatBytes(...x),k2sig:function(e){let t=A(e);if(!E(t))return;let n=w(t),r=y.BASE.multiply(t).toAffine(),i=m(r.x);if(i===l)return;let a=m(n*m(b+i*C));if(a===l)return;let o=2*(r.x!==i)|Number(r.y&c),s=a;return f&&a>h>>c&&(s=a>h>>c?m(-a):a,o^=1),new S(i,s,o)}}}(e,t,n);return r.createHmacDrbg(d.hash.outputLen,d.nByteLength,d.hmac)(o,s)},verify:function(t,n,o,s=k){let l,c;if(n=(0,i.ensureBytes)("msgHash",n),o=(0,i.ensureBytes)("publicKey",o),"strict"in s)throw Error("options.strict was renamed to lowS");a(s);let{lowS:u,prehash:h}=s;try{if("string"==typeof t||r.isBytes(t))try{l=S.fromDER(t)}catch(n){if(!(n instanceof e.DER.Err))throw n;l=S.fromCompact(t)}else{if("object"!=typeof t||"bigint"!=typeof t.r||"bigint"!=typeof t.s)throw Error("PARSE");{let{r:e,s:n}=t;l=new S(e,n)}}c=y.fromHex(o)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&l.hasHighS())return!1;h&&(n=d.hash(n));let{r:f,s:p}=l,g=T(n),v=w(p),b=m(g*v),E=m(f*v),C=y.BASE.multiplyAndAddUnsafe(c,b,E)?.toAffine();return!!C&&m(C.x)===f},ProjectivePoint:y,Signature:S,utils:{isValidPrivateKey(e){try{return v(e),!0}catch(e){return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{let e=n.getMinHashLength(d.n);return n.mapHashToField(d.randomBytes(e),d.n)},precompute:(e=8,t=y.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}},e.SWUFpSqrtRatio=p,e.mapToCurveSimpleSWU=function(e,t){if(n.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=p(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let i,a,o,s,l,c,d,u;i=e.sqr(n),i=e.mul(i,t.Z),a=e.sqr(i),a=e.add(a,i),o=e.add(a,e.ONE),o=e.mul(o,t.B),s=e.cmov(t.Z,e.neg(a),!e.eql(a,e.ZERO)),s=e.mul(s,t.A),a=e.sqr(o),c=e.sqr(s),l=e.mul(c,t.A),a=e.add(a,l),a=e.mul(a,o),c=e.mul(c,s),l=e.mul(c,t.B),a=e.add(a,l),d=e.mul(i,o);let{isValid:h,value:f}=r(a,c);u=e.mul(i,n),u=e.mul(u,f),d=e.cmov(d,o,h),u=e.cmov(u,f,h);let p=e.isOdd(n)===e.isOdd(u);return u=e.cmov(e.neg(u),u,p),{x:d=e.div(d,s),y:u}}};let t=ik,n=iM,r=iP,i=iP;function a(e){void 0!==e.lowS&&(0,i.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,i.abool)("prehash",e.prehash)}let{bytesToNumberBE:o,hexToBytes:s}=r;e.DER={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(t,n)=>{let{Err:i}=e.DER;if(t<0||t>256)throw new i("tlv.encode: wrong tag");if(1&n.length)throw new i("tlv.encode: unpadded data");let a=n.length/2,o=r.numberToHexUnpadded(a);if(o.length/2&128)throw new i("tlv.encode: long form length too big");let s=a>127?r.numberToHexUnpadded(o.length/2|128):"";return`${r.numberToHexUnpadded(t)}${s}${o}${n}`},decode(t,n){let{Err:r}=e.DER,i=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(n.length<2||n[i++]!==t)throw new r("tlv.decode: wrong tlv");let a=n[i++],o=0;if(128&a){let e=127&a;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let t=n.subarray(i,i+e);if(t.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===t[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of t)o=o<<8|e;if(i+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=a;let s=n.subarray(i,i+o);if(s.length!==o)throw new r("tlv.decode: wrong value length");return{v:s,l:n.subarray(i+o)}}},_int:{encode(t){let{Err:n}=e.DER;if(t<l)throw new n("integer: negative integers are not allowed");let i=r.numberToHexUnpadded(t);if(8&Number.parseInt(i[0],16)&&(i="00"+i),1&i.length)throw new n("unexpected assertion");return i},decode(t){let{Err:n}=e.DER;if(128&t[0])throw new n("Invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new n("Invalid signature integer: unnecessary leading zero");return o(t)}},toSig(t){let{Err:n,_int:i,_tlv:a}=e.DER,o="string"==typeof t?s(t):t;r.abytes(o);let{v:l,l:c}=a.decode(48,o);if(c.length)throw new n("Invalid signature: left bytes after parsing");let{v:d,l:u}=a.decode(2,l),{v:h,l:f}=a.decode(2,u);if(f.length)throw new n("Invalid signature: left bytes after parsing");return{r:i.decode(d),s:i.decode(h)}},hexFromSig(t){let{_tlv:n,_int:r}=e.DER,i=`${n.encode(2,r.encode(t.r))}${n.encode(2,r.encode(t.s))}`;return n.encode(48,i)}};let l=BigInt(0),c=BigInt(1),d=BigInt(2),u=BigInt(3),h=BigInt(4);function f(e){let a=function(e){let n=(0,t.validateBasic)(e);r.validateObject(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:i,Fp:a,a:o}=n;if(i){if(!a.eql(o,a.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof i||"bigint"!=typeof i.beta||"function"!=typeof i.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...n})}(e),{Fp:o}=a,s=n.Field(a.n,a.nBitLength),d=a.toBytes||((e,t,n)=>{let i=t.toAffine();return r.concatBytes(Uint8Array.from([4]),o.toBytes(i.x),o.toBytes(i.y))}),h=a.fromBytes||(e=>{let t=e.subarray(1);return{x:o.fromBytes(t.subarray(0,o.BYTES)),y:o.fromBytes(t.subarray(o.BYTES,2*o.BYTES))}});function f(e){let{a:t,b:n}=a,r=o.sqr(e),i=o.mul(r,e);return o.add(o.add(i,o.mul(e,t)),n)}if(!o.eql(o.sqr(a.Gy),f(a.Gx)))throw Error("bad generator point: equation left != right");function p(e){let t,{allowedPrivateKeyLengths:o,nByteLength:s,wrapPrivateKey:l,n:d}=a;if(o&&"bigint"!=typeof e){if(r.isBytes(e)&&(e=r.bytesToHex(e)),"string"!=typeof e||!o.includes(e.length))throw Error("Invalid key");e=e.padStart(2*s,"0")}try{t="bigint"==typeof e?e:r.bytesToNumberBE((0,i.ensureBytes)("private key",e,s))}catch(t){throw Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}return l&&(t=n.mod(t,d)),r.aInRange("private key",t,c,d),t}function g(e){if(!(e instanceof y))throw Error("ProjectivePoint expected")}let m=(0,i.memoized)((e,t)=>{let{px:n,py:r,pz:i}=e;if(o.eql(i,o.ONE))return{x:n,y:r};let a=e.is0();null==t&&(t=a?o.ONE:o.inv(i));let s=o.mul(n,t),l=o.mul(r,t),c=o.mul(i,t);if(a)return{x:o.ZERO,y:o.ZERO};if(!o.eql(c,o.ONE))throw Error("invZ was invalid");return{x:s,y:l}}),w=(0,i.memoized)(e=>{if(e.is0()){if(a.allowInfinityPoint&&!o.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:n}=e.toAffine();if(!o.isValid(t)||!o.isValid(n))throw Error("bad point: x or y not FE");let r=o.sqr(n),i=f(t);if(!o.eql(r,i))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class y{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!o.isValid(e))throw Error("x required");if(null==t||!o.isValid(t))throw Error("y required");if(null==n||!o.isValid(n))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!o.isValid(t)||!o.isValid(n))throw Error("invalid affine point");if(e instanceof y)throw Error("projective point not allowed");let r=e=>o.eql(e,o.ZERO);return r(t)&&r(n)?y.ZERO:new y(t,n,o.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=o.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(y.fromAffine)}static fromHex(e){let t=y.fromAffine(h((0,i.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(p(e))}static msm(e,n){return(0,t.pippenger)(y,s,e,n)}_setWindowSize(e){b.setWindowSize(this,e)}assertValidity(){w(this)}hasEvenY(){let{y:e}=this.toAffine();if(o.isOdd)return!o.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){g(e);let{px:t,py:n,pz:r}=this,{px:i,py:a,pz:s}=e,l=o.eql(o.mul(t,s),o.mul(i,r)),c=o.eql(o.mul(n,s),o.mul(a,r));return l&&c}negate(){return new y(this.px,o.neg(this.py),this.pz)}double(){let{a:e,b:t}=a,n=o.mul(t,u),{px:r,py:i,pz:s}=this,l=o.ZERO,c=o.ZERO,d=o.ZERO,h=o.mul(r,r),f=o.mul(i,i),p=o.mul(s,s),g=o.mul(r,i);return g=o.add(g,g),d=o.mul(r,s),d=o.add(d,d),l=o.mul(e,d),c=o.mul(n,p),c=o.add(l,c),l=o.sub(f,c),c=o.add(f,c),c=o.mul(l,c),l=o.mul(g,l),d=o.mul(n,d),p=o.mul(e,p),g=o.sub(h,p),g=o.mul(e,g),g=o.add(g,d),d=o.add(h,h),h=o.add(d,h),h=o.add(h,p),h=o.mul(h,g),c=o.add(c,h),p=o.mul(i,s),p=o.add(p,p),h=o.mul(p,g),l=o.sub(l,h),d=o.mul(p,f),d=o.add(d,d),new y(l,c,d=o.add(d,d))}add(e){g(e);let{px:t,py:n,pz:r}=this,{px:i,py:s,pz:l}=e,c=o.ZERO,d=o.ZERO,h=o.ZERO,f=a.a,p=o.mul(a.b,u),m=o.mul(t,i),w=o.mul(n,s),v=o.mul(r,l),b=o.add(t,n),E=o.add(i,s);b=o.mul(b,E),E=o.add(m,w),b=o.sub(b,E),E=o.add(t,r);let C=o.add(i,l);return E=o.mul(E,C),C=o.add(m,v),E=o.sub(E,C),C=o.add(n,r),c=o.add(s,l),C=o.mul(C,c),c=o.add(w,v),C=o.sub(C,c),h=o.mul(f,E),c=o.mul(p,v),h=o.add(c,h),c=o.sub(w,h),h=o.add(w,h),d=o.mul(c,h),w=o.add(m,m),w=o.add(w,m),v=o.mul(f,v),E=o.mul(p,E),w=o.add(w,v),v=o.sub(m,v),v=o.mul(f,v),E=o.add(E,v),m=o.mul(w,E),d=o.add(d,m),m=o.mul(C,E),c=o.mul(b,c),c=o.sub(c,m),m=o.mul(b,w),h=o.mul(C,h),new y(c,d,h=o.add(h,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return b.wNAFCached(this,e,y.normalizeZ)}multiplyUnsafe(e){r.aInRange("scalar",e,l,a.n);let t=y.ZERO;if(e===l)return t;if(e===c)return this;let{endo:n}=a;if(!n)return b.unsafeLadder(this,e);let{k1neg:i,k1:s,k2neg:d,k2:u}=n.splitScalar(e),h=t,f=t,p=this;for(;s>l||u>l;)s&c&&(h=h.add(p)),u&c&&(f=f.add(p)),p=p.double(),s>>=c,u>>=c;return i&&(h=h.negate()),d&&(f=f.negate()),f=new y(o.mul(f.px,n.beta),f.py,f.pz),h.add(f)}multiply(e){let t,n,{endo:i,n:s}=a;if(r.aInRange("scalar",e,c,s),i){let{k1neg:r,k1:a,k2neg:s,k2:l}=i.splitScalar(e),{p:c,f:d}=this.wNAF(a),{p:u,f:h}=this.wNAF(l);c=b.constTimeNegate(r,c),u=b.constTimeNegate(s,u),u=new y(o.mul(u.px,i.beta),u.py,u.pz),t=c.add(u),n=d.add(h)}else{let{p:r,f:i}=this.wNAF(e);t=r,n=i}return y.normalizeZ([t,n])[0]}multiplyAndAddUnsafe(e,t,n){let r=y.BASE,i=(e,t)=>t!==l&&t!==c&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),a=i(this,t).add(i(e,n));return a.is0()?void 0:a}toAffine(e){return m(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=a;if(e===c)return!0;if(t)return t(y,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=a;return e===c?this:t?t(y,this):this.multiplyUnsafe(a.h)}toRawBytes(e=!0){return(0,i.abool)("isCompressed",e),this.assertValidity(),d(y,this,e)}toHex(e=!0){return(0,i.abool)("isCompressed",e),r.bytesToHex(this.toRawBytes(e))}}y.BASE=new y(a.Gx,a.Gy,o.ONE),y.ZERO=new y(o.ZERO,o.ONE,o.ZERO);let v=a.nBitLength,b=(0,t.wNAF)(y,a.endo?Math.ceil(v/2):v);return{CURVE:a,ProjectivePoint:y,normPrivateKeyToScalar:p,weierstrassEquation:f,isWithinCurveOrder:function(e){return r.inRange(e,c,a.n)}}}function p(e,t){let n=e.ORDER,r=l;for(let e=n-c;e%d===l;e/=d)r+=c;let i=r,a=d<<i-c-c,o=a*d,s=(n-c)/o,f=(s-c)/d,p=o-c,g=e.pow(t,s),m=e.pow(t,(s+c)/d),w=(t,n)=>{let r=g,o=e.pow(n,p),s=e.sqr(o);s=e.mul(s,n);let l=e.mul(t,s);l=e.pow(l,f),l=e.mul(l,o),o=e.mul(l,n),s=e.mul(l,t);let u=e.mul(s,o);l=e.pow(u,a);let h=e.eql(l,e.ONE);o=e.mul(s,m),l=e.mul(u,r),s=e.cmov(o,s,h),u=e.cmov(l,u,h);for(let t=i;t>c;t--){let n=t-d;n=d<<n-c;let i=e.pow(u,n),a=e.eql(i,e.ONE);o=e.mul(s,r),r=e.mul(r,r),i=e.mul(u,r),s=e.cmov(o,s,a),u=e.cmov(i,u,a)}return{isValid:h,value:s}};if(e.ORDER%h===u){let n=(e.ORDER-u)/h,r=e.sqrt(e.neg(t));w=(t,i)=>{let a=e.sqr(i),o=e.mul(t,i);a=e.mul(a,o);let s=e.pow(a,n);s=e.mul(s,o);let l=e.mul(s,r),c=e.mul(e.sqr(s),i),d=e.eql(c,t);return{isValid:d,value:e.cmov(l,s,d)}}}return w}}(aq),Object.defineProperty(aH,"__esModule",{value:!0}),aH.getHash=aG,aH.createCurve=function(e,t){let n=t=>(0,aY.weierstrass)({...e,...aG(t)});return Object.freeze({...n(t),create:n})};let aY=aq;function aG(e){return{hash:e,hmac:(t,...n)=>(0,az.hmac)(e,t,(0,r1.concatBytes)(...n)),randomBytes:r1.randomBytes}}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;let t=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),r=BigInt(1),i=BigInt(2),a=(e,t)=>(e+t/i)/t;function o(e){let n=BigInt(3),r=BigInt(6),a=BigInt(11),o=BigInt(22),l=BigInt(23),c=BigInt(44),d=BigInt(88),u=e*e*e%t,h=u*u*e%t,f=(0,iM.pow2)(h,n,t)*h%t,p=(0,iM.pow2)(f,n,t)*h%t,g=(0,iM.pow2)(p,i,t)*u%t,m=(0,iM.pow2)(g,a,t)*g%t,w=(0,iM.pow2)(m,o,t)*m%t,y=(0,iM.pow2)(w,c,t)*w%t,v=(0,iM.pow2)(y,d,t)*y%t,b=(0,iM.pow2)(v,c,t)*w%t,E=(0,iM.pow2)(b,n,t)*h%t,C=(0,iM.pow2)(E,l,t)*m%t,x=(0,iM.pow2)(C,r,t)*u%t,S=(0,iM.pow2)(x,i,t);if(!s.eql(s.sqr(S),e))throw Error("Cannot find square root");return S}let s=(0,iM.Field)(t,void 0,void 0,{sqrt:o});e.secp256k1=(0,aH.createCurve)({a:BigInt(0),b:BigInt(7),Fp:s,n:n,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-r*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=BigInt("0x100000000000000000000000000000000"),l=a(t*e,n),c=a(-i*e,n),d=(0,iM.mod)(e-l*t-c*o,n),u=(0,iM.mod)(-l*i-c*t,n),h=d>s,f=u>s;if(h&&(d=n-d),f&&(u=n-u),d>s||u>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:d,k2neg:f,k2:u}}}},aD.sha256);let l=BigInt(0),c={};function d(e,...t){let n=c[e];if(void 0===n){let t=(0,aD.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));n=(0,iP.concatBytes)(t,t),c[e]=n}return(0,aD.sha256)((0,iP.concatBytes)(n,...t))}let u=e=>e.toRawBytes(!0).slice(1),h=e=>(0,iP.numberToBytesBE)(e,32),f=e=>(0,iM.mod)(e,t),p=e=>(0,iM.mod)(e,n),g=e.secp256k1.ProjectivePoint;function m(t){let n=e.secp256k1.utils.normPrivateKeyToScalar(t),r=g.fromPrivateKey(n);return{scalar:r.hasEvenY()?n:p(-n),bytes:u(r)}}function w(e){(0,iP.aInRange)("x",e,r,t);let n=f(e*e),a=o(f(n*e+BigInt(7)));a%i!==l&&(a=f(-a));let s=new g(e,a,r);return s.assertValidity(),s}let y=iP.bytesToNumberBE;function v(...e){return p(y(d("BIP0340/challenge",...e)))}function b(e,i,a){let o=(0,iP.ensureBytes)("signature",e,64),s=(0,iP.ensureBytes)("message",i),l=(0,iP.ensureBytes)("publicKey",a,32);try{let e,i=w(y(l)),a=y(o.subarray(0,32));if(!(0,iP.inRange)(a,r,t))return!1;let c=y(o.subarray(32,64));if(!(0,iP.inRange)(c,r,n))return!1;let d=v(h(a),u(i),s),f=(e=p(-d),g.BASE.multiplyAndAddUnsafe(i,c,e));return!(!f||!f.hasEvenY()||f.toAffine().x!==a)}catch(e){return!1}}e.schnorr={getPublicKey:function(e){return m(e).bytes},sign:function(e,t,n=(0,r1.randomBytes)(32)){let r=(0,iP.ensureBytes)("message",e),{bytes:i,scalar:a}=m(t),o=h(a^y(d("BIP0340/aux",(0,iP.ensureBytes)("auxRand",n,32)))),s=p(y(d("BIP0340/nonce",o,i,r)));if(s===l)throw Error("sign failed: k is zero");let{bytes:c,scalar:u}=m(s),f=v(c,i,r),g=new Uint8Array(64);if(g.set(c,0),g.set(h(p(u+f*a)),32),!b(g,r,i))throw Error("sign: Invalid signature produced");return g},verify:b,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:w,pointToBytes:u,numberToBytesBE:iP.numberToBytesBE,bytesToNumberBE:iP.bytesToNumberBE,taggedHash:d,mod:iM.mod}};let E=(0,ax.isogenyMap)(s,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),C=(0,aq.mapToCurveSimpleSWU)(s,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:s.create(BigInt("-11"))}),x=(0,ax.createHasher)(e.secp256k1.ProjectivePoint,e=>{let{x:t,y:n}=C(s.create(e[0]));return E(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:s.ORDER,m:1,k:128,expand:"xmd",hash:aD.sha256});e.hashToCurve=x.hashToCurve,e.encodeToCurve=x.encodeToCurve}(aL);var aJ={};Object.defineProperty(aJ,"__esModule",{value:!0}),aJ.decodeHex=aJ.remove0x=void 0,aJ.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2):e},aJ.decodeHex=function(e){return(0,rT.hexToBytes)((0,aJ.remove0x)(e))},function(e){function t(e,t,n,r){if("secp256k1"===e)return t(aL.secp256k1);if("x25519"===e)return n(rz.x25519);if("ed25519"===e)return r(rz.ed25519);throw Error("Not implemented")}Object.defineProperty(e,"__esModule",{value:!0}),e.hexToPublicKey=e.convertPublicKeyFormat=e.getSharedPoint=e.getPublicKey=e.isValidPrivateKey=e.getValidSecret=void 0,e.getValidSecret=function(){var t;do t=(0,rK.randomBytes)(rj.SECRET_KEY_LENGTH);while(!(0,e.isValidPrivateKey)(t))return t},e.isValidPrivateKey=function(e){return t((0,rD.ellipticCurve)(),function(t){return t.utils.isValidPrivateKey(e)},function(){return!0},function(){return!0})},e.getPublicKey=function(e){return t((0,rD.ellipticCurve)(),function(t){return t.getPublicKey(e)},function(t){return t.getPublicKey(e)},function(t){return t.getPublicKey(e)})},e.getSharedPoint=function(e,n,i){return t((0,rD.ellipticCurve)(),function(t){return t.getSharedSecret(e,n,i)},function(t){return t.getSharedSecret(e,n)},function(t){return r(t,e,n)})},e.convertPublicKeyFormat=function(e,n){return t((0,rD.ellipticCurve)(),function(t){return t.getSharedSecret(BigInt(1),e,n)},function(){return e},function(){return e})},e.hexToPublicKey=function(e){var r=(0,aJ.decodeHex)(e);return t((0,rD.ellipticCurve)(),function(){return n(r)},function(){return r},function(){return r})};var n=function(e){if(e.length===rj.ETH_PUBLIC_KEY_SIZE){var t=new Uint8Array(1+e.length);return t.set([4]),t.set(e,1),t}return e},r=function(e,t,n){var r=e.utils.getExtendedPublicKey(t).scalar;return e.ExtendedPoint.fromHex(n).multiply(r).toRawBytes()}}(rW);var aZ={},aQ={};function aX(e,t,n){return(0,rq.hash)(e),void 0===n&&(n=new Uint8Array(e.outputLen)),(0,az.hmac)(e,(0,r1.toBytes)(n),(0,r1.toBytes)(t))}Object.defineProperty(aQ,"__esModule",{value:!0}),aQ.hkdf=void 0,aQ.extract=aX,aQ.expand=a3;let a0=new Uint8Array([0]),a1=new Uint8Array;function a3(e,t,n,r=32){if((0,rq.hash)(e),(0,rq.number)(r),r>255*e.outputLen)throw Error("Length should be <= 255*HashLen");let i=Math.ceil(r/e.outputLen);void 0===n&&(n=a1);let a=new Uint8Array(i*e.outputLen),o=az.hmac.create(e,t),s=o._cloneInto(),l=new Uint8Array(o.outputLen);for(let t=0;t<i;t++)a0[0]=t+1,s.update(0===t?a1:l).update(n).update(a0).digestInto(l),a.set(l,e.outputLen*t),o._cloneInto(s);return o.destroy(),s.destroy(),l.fill(0),a0.fill(0),a.slice(0,r)}aQ.hkdf=(e,t,n,r,i)=>a3(e,aX(e,t,n),r,i),Object.defineProperty(aZ,"__esModule",{value:!0}),aZ.getSharedKey=aZ.deriveKey=void 0,aZ.deriveKey=function(e,t,n){return(0,aQ.hkdf)(aD.sha256,e,t,n,32)},aZ.getSharedKey=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,aZ.deriveKey)(rT.concatBytes.apply(void 0,e))};var a2={},a5={},a4={},a8={};Object.defineProperty(a8,"__esModule",{value:!0}),a8.polyval=a8.ghash=void 0,a8._toGHASHKey=oe;let a6=new Uint8Array(16),a9=(0,rT.u32)(a6),a7=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255;function oe(e){e.reverse();let t=1&e[15],n=0;for(let t=0;t<e.length;t++){let r=e[t];e[t]=r>>>1|n,n=(1&r)<<7}return e[0]^=225&-t,e}class ot{constructor(e,t){var n,r,i,a;this.blockLen=16,this.outputLen=16,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,rT.toBytes)(e),(0,rI.bytes)(e,16);const o=(0,rT.createView)(e);let s=o.getUint32(0,!1),l=o.getUint32(4,!1),c=o.getUint32(8,!1),d=o.getUint32(12,!1);const u=[];for(let e=0;e<128;e++)u.push({s0:a7(s),s1:a7(l),s2:a7(c),s3:a7(d)}),{s0:s,s1:l,s2:c,s3:d}={s3:(i=c)<<31|(a=d)>>>1,s2:(r=l)<<31|i>>>1,s1:(n=s)<<31|r>>>1,s0:n>>>1^-0x1f000000&-(1&a)};const h=(e=>e>65536?8:e>1024?4:2)(t||1024);if(![1,2,4,8].includes(h))throw Error(`ghash: wrong window size=${h}, should be 2, 4 or 8`);this.W=h;const f=128/h,p=this.windowSize=2**h,g=[];for(let e=0;e<f;e++)for(let t=0;t<p;t++){let n=0,r=0,i=0,a=0;for(let o=0;o<h;o++){if(!(t>>>h-o-1&1))continue;const{s0:s,s1:l,s2:c,s3:d}=u[h*e+o];n^=s,r^=l,i^=c,a^=d}g.push({s0:n,s1:r,s2:i,s3:a})}this.t=g}_updateBlock(e,t,n,r){e^=this.s0,t^=this.s1,n^=this.s2,r^=this.s3;let{W:i,t:a,windowSize:o}=this,s=0,l=0,c=0,d=0,u=(1<<i)-1,h=0;for(let f of[e,t,n,r])for(let e=0;e<4;e++){let t=f>>>8*e&255;for(let e=8/i-1;e>=0;e--){let{s0:n,s1:r,s2:f,s3:p}=a[h*o+(t>>>i*e&u)];s^=n,l^=r,c^=f,d^=p,h+=1}}this.s0=s,this.s1=l,this.s2=c,this.s3=d}update(e){e=(0,rT.toBytes)(e),(0,rI.exists)(this);let t=(0,rT.u32)(e),n=Math.floor(e.length/16),r=e.length%16;for(let e=0;e<n;e++)this._updateBlock(t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]);return r&&(a6.set(e.subarray(16*n)),this._updateBlock(a9[0],a9[1],a9[2],a9[3]),(0,rT.clean)(a9)),this}destroy(){let{t:e}=this;for(let t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){(0,rI.exists)(this),(0,rI.output)(e,this),this.finished=!0;let{s0:t,s1:n,s2:r,s3:i}=this,a=(0,rT.u32)(e);return a[0]=t,a[1]=n,a[2]=r,a[3]=i,e}digest(){let e=new Uint8Array(16);return this.digestInto(e),this.destroy(),e}}class on extends ot{constructor(e,t){e=(0,rT.toBytes)(e);const n=oe((0,rT.copyBytes)(e));super(n,t),(0,rT.clean)(n)}update(e){e=(0,rT.toBytes)(e),(0,rI.exists)(this);let t=(0,rT.u32)(e),n=e.length%16,r=Math.floor(e.length/16);for(let e=0;e<r;e++)this._updateBlock(a7(t[4*e+3]),a7(t[4*e+2]),a7(t[4*e+1]),a7(t[4*e+0]));return n&&(a6.set(e.subarray(16*r)),this._updateBlock(a7(a9[3]),a7(a9[2]),a7(a9[1]),a7(a9[0])),(0,rT.clean)(a9)),this}digestInto(e){(0,rI.exists)(this),(0,rI.output)(e,this),this.finished=!0;let{s0:t,s1:n,s2:r,s3:i}=this,a=(0,rT.u32)(e);return a[0]=t,a[1]=n,a[2]=r,a[3]=i,e.reverse()}}function or(e){let t=(t,n)=>e(n,t.length).update((0,rT.toBytes)(t)).digest(),n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=(t,n)=>e(t,n),t}a8.ghash=or((e,t)=>new ot(e,t)),a8.polyval=or((e,t)=>new on(e,t)),Object.defineProperty(a4,"__esModule",{value:!0}),a4.unsafe=a4.aeskwp=a4.aeskw=a4.siv=a4.gcm=a4.cfb=a4.cbc=a4.ecb=a4.ctr=void 0,a4.expandKeyLE=om,a4.expandKeyDecLE=ow;let oi=new Uint8Array(16);function oa(e){return e<<1^283&-(e>>7)}function oo(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(1&t),e=oa(e);return n}let os=(()=>{let e=new Uint8Array(256);for(let t=0,n=1;t<256;t++,n^=oa(n))e[t]=n;let t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,rT.clean)(e),t})(),ol=os.map((e,t)=>os.indexOf(t)),oc=e=>e<<24|e>>>8,od=e=>e<<8|e>>>24,ou=e=>e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255;function oh(e,t){if(256!==e.length)throw Error("Wrong sbox length");let n=new Uint32Array(256).map((n,r)=>t(e[r])),r=n.map(od),i=r.map(od),a=i.map(od),o=new Uint32Array(65536),s=new Uint32Array(65536),l=new Uint16Array(65536);for(let t=0;t<256;t++)for(let c=0;c<256;c++){let d=256*t+c;o[d]=n[t]^r[c],s[d]=i[t]^a[c],l[d]=e[t]<<8|e[c]}return{sbox:e,sbox2:l,T0:n,T1:r,T2:i,T3:a,T01:o,T23:s}}let of=oh(os,e=>oo(e,3)<<24|e<<16|e<<8|oo(e,2)),op=oh(ol,e=>oo(e,11)<<24|oo(e,13)<<16|oo(e,9)<<8|oo(e,14)),og=(()=>{let e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=oa(n))e[t]=n;return e})();function om(e){(0,rI.bytes)(e);let t=e.length;if(![16,24,32].includes(t))throw Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);let{sbox2:n}=of,r=[];(0,rT.isAligned32)(e)||r.push(e=(0,rT.copyBytes)(e));let i=(0,rT.u32)(e),a=i.length,o=e=>ov(n,e,e,e,e),s=new Uint32Array(t+28);s.set(i);for(let e=a;e<s.length;e++){let t=s[e-1];e%a==0?t=o(oc(t))^og[e/a-1]:a>6&&e%a==4&&(t=o(t)),s[e]=s[e-a]^t}return(0,rT.clean)(...r),s}function ow(e){let t=om(e),n=t.slice(),r=t.length,{sbox2:i}=of,{T0:a,T1:o,T2:s,T3:l}=op;for(let e=0;e<r;e+=4)for(let i=0;i<4;i++)n[e+i]=t[r-e-4+i];(0,rT.clean)(t);for(let e=4;e<r-4;e++){let t=n[e],r=ov(i,t,t,t,t);n[e]=a[255&r]^o[r>>>8&255]^s[r>>>16&255]^l[r>>>24]}return n}function oy(e,t,n,r,i,a){return e[n<<8&65280|r>>>8&255]^t[i>>>8&65280|a>>>24&255]}function ov(e,t,n,r,i){return e[255&t|65280&n]|e[r>>>16&255|i>>>16&65280]<<16}function ob(e,t,n,r,i){let{sbox2:a,T01:o,T23:s}=of,l=0;t^=e[l++],n^=e[l++],r^=e[l++],i^=e[l++];let c=e.length/4-2;for(let a=0;a<c;a++){let a=e[l++]^oy(o,s,t,n,r,i),c=e[l++]^oy(o,s,n,r,i,t),d=e[l++]^oy(o,s,r,i,t,n),u=e[l++]^oy(o,s,i,t,n,r);t=a,n=c,r=d,i=u}return{s0:e[l++]^ov(a,t,n,r,i),s1:e[l++]^ov(a,n,r,i,t),s2:e[l++]^ov(a,r,i,t,n),s3:e[l++]^ov(a,i,t,n,r)}}function oE(e,t,n,r,i){let{sbox2:a,T01:o,T23:s}=op,l=0;t^=e[l++],n^=e[l++],r^=e[l++],i^=e[l++];let c=e.length/4-2;for(let a=0;a<c;a++){let a=e[l++]^oy(o,s,t,i,r,n),c=e[l++]^oy(o,s,n,t,i,r),d=e[l++]^oy(o,s,r,n,t,i),u=e[l++]^oy(o,s,i,r,n,t);t=a,n=c,r=d,i=u}return{s0:e[l++]^ov(a,t,i,r,n),s1:e[l++]^ov(a,n,t,i,r),s2:e[l++]^ov(a,r,n,t,i),s3:e[l++]^ov(a,i,r,n,t)}}function oC(e,t){if(void 0===t)return new Uint8Array(e);if((0,rI.bytes)(t),t.length<e)throw Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);if(!(0,rT.isAligned32)(t))throw Error("unaligned dst");return t}function ox(e,t,n,r){(0,rI.bytes)(t,16),(0,rI.bytes)(n);let i=n.length;r=oC(i,r);let a=(0,rT.u32)(t),{s0:o,s1:s,s2:l,s3:c}=ob(e,a[0],a[1],a[2],a[3]),d=(0,rT.u32)(n),u=(0,rT.u32)(r);for(let n=0;n+4<=d.length;n+=4){u[n+0]=d[n+0]^o,u[n+1]=d[n+1]^s,u[n+2]=d[n+2]^l,u[n+3]=d[n+3]^c;let r=1;for(let e=t.length-1;e>=0;e--)r=r+(255&t[e])|0,t[e]=255&r,r>>>=8;({s0:o,s1:s,s2:l,s3:c}=ob(e,a[0],a[1],a[2],a[3]))}let h=16*Math.floor(d.length/4);if(h<i){let e=new Uint32Array([o,s,l,c]),t=(0,rT.u8)(e);for(let e=h,a=0;e<i;e++,a++)r[e]=n[e]^t[a];(0,rT.clean)(e)}return r}function oS(e,t,n,r,i){(0,rI.bytes)(n,16),(0,rI.bytes)(r),i=oC(r.length,i);let a=(0,rT.u32)(n),o=(0,rT.createView)(n),s=(0,rT.u32)(r),l=(0,rT.u32)(i),c=12*!t,d=r.length,u=o.getUint32(c,t),{s0:h,s1:f,s2:p,s3:g}=ob(e,a[0],a[1],a[2],a[3]);for(let n=0;n+4<=s.length;n+=4)l[n+0]=s[n+0]^h,l[n+1]=s[n+1]^f,l[n+2]=s[n+2]^p,l[n+3]=s[n+3]^g,u=u+1>>>0,o.setUint32(c,u,t),{s0:h,s1:f,s2:p,s3:g}=ob(e,a[0],a[1],a[2],a[3]);let m=16*Math.floor(s.length/4);if(m<d){let e=new Uint32Array([h,f,p,g]),t=(0,rT.u8)(e);for(let e=m,n=0;e<d;e++,n++)i[e]=r[e]^t[n];(0,rT.clean)(e)}return i}function o_(e){if((0,rI.bytes)(e),e.length%16!=0)throw Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function oA(e,t,n){(0,rI.bytes)(e);let r=e.length,i=r%16;if(!t&&0!==i)throw Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,rT.isAligned32)(e)||(e=(0,rT.copyBytes)(e));let a=(0,rT.u32)(e);if(t){let e=16-i;e||(e=16),r+=e}let o=oC(r,n);return{b:a,o:(0,rT.u32)(o),out:o}}function oT(e,t){if(!t)return e;let n=e.length;if(!n)throw Error("aes/pcks5: empty ciphertext not allowed");let r=e[n-1];if(r<=0||r>16)throw Error("aes/pcks5: wrong padding");let i=e.subarray(0,-r);for(let t=0;t<r;t++)if(e[n-t-1]!==r)throw Error("aes/pcks5: wrong padding");return i}function oI(e){let t=new Uint8Array(16),n=(0,rT.u32)(t);t.set(e);let r=16-e.length;for(let e=16-r;e<16;e++)t[e]=r;return n}function oN(e,t,n,r,i){let a=null==i?0:i.length,o=e.create(n,r.length+a);i&&o.update(i),o.update(r);let s=new Uint8Array(16),l=(0,rT.createView)(s);i&&(0,rT.setBigUint64)(l,0,BigInt(8*a),t),(0,rT.setBigUint64)(l,8,BigInt(8*r.length),t),o.update(s);let c=o.digest();return(0,rT.clean)(s),c}a4.ctr=(0,rT.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(n,r){if((0,rI.bytes)(n),void 0!==r&&((0,rI.bytes)(r),!(0,rT.isAligned32)(r)))throw Error("unaligned destination");let i=om(e),a=(0,rT.copyBytes)(t),o=[i,a];(0,rT.isAligned32)(n)||o.push(n=(0,rT.copyBytes)(n));let s=ox(i,a,n,r);return(0,rT.clean)(...o),s}return(0,rI.bytes)(e),(0,rI.bytes)(t,16),{encrypt:(e,t)=>n(e,t),decrypt:(e,t)=>n(e,t)}}),a4.ecb=(0,rT.wrapCipher)({blockSize:16},function(e,t={}){(0,rI.bytes)(e);let n=!t.disablePadding;return{encrypt(t,r){let{b:i,o:a,out:o}=oA(t,n,r),s=om(e),l=0;for(;l+4<=i.length;){let{s0:e,s1:t,s2:n,s3:r}=ob(s,i[l+0],i[l+1],i[l+2],i[l+3]);a[l++]=e,a[l++]=t,a[l++]=n,a[l++]=r}if(n){let e=oI(t.subarray(4*l)),{s0:n,s1:r,s2:i,s3:o}=ob(s,e[0],e[1],e[2],e[3]);a[l++]=n,a[l++]=r,a[l++]=i,a[l++]=o}return(0,rT.clean)(s),o},decrypt(t,r){o_(t);let i=ow(e),a=oC(t.length,r),o=[i];(0,rT.isAligned32)(t)||o.push(t=(0,rT.copyBytes)(t));let s=(0,rT.u32)(t),l=(0,rT.u32)(a);for(let e=0;e+4<=s.length;){let{s0:t,s1:n,s2:r,s3:a}=oE(i,s[e+0],s[e+1],s[e+2],s[e+3]);l[e++]=t,l[e++]=n,l[e++]=r,l[e++]=a}return(0,rT.clean)(...o),oT(a,n)}}}),a4.cbc=(0,rT.wrapCipher)({blockSize:16,nonceLength:16},function(e,t,n={}){(0,rI.bytes)(e),(0,rI.bytes)(t,16);let r=!n.disablePadding;return{encrypt(n,i){let a=om(e),{b:o,o:s,out:l}=oA(n,r,i),c=t,d=[a];(0,rT.isAligned32)(c)||d.push(c=(0,rT.copyBytes)(c));let u=(0,rT.u32)(c),h=u[0],f=u[1],p=u[2],g=u[3],m=0;for(;m+4<=o.length;)h^=o[m+0],f^=o[m+1],p^=o[m+2],g^=o[m+3],({s0:h,s1:f,s2:p,s3:g}=ob(a,h,f,p,g)),s[m++]=h,s[m++]=f,s[m++]=p,s[m++]=g;if(r){let e=oI(n.subarray(4*m));h^=e[0],f^=e[1],p^=e[2],g^=e[3],({s0:h,s1:f,s2:p,s3:g}=ob(a,h,f,p,g)),s[m++]=h,s[m++]=f,s[m++]=p,s[m++]=g}return(0,rT.clean)(...d),l},decrypt(n,i){o_(n);let a=ow(e),o=t,s=[a];(0,rT.isAligned32)(o)||s.push(o=(0,rT.copyBytes)(o));let l=(0,rT.u32)(o),c=oC(n.length,i);(0,rT.isAligned32)(n)||s.push(n=(0,rT.copyBytes)(n));let d=(0,rT.u32)(n),u=(0,rT.u32)(c),h=l[0],f=l[1],p=l[2],g=l[3];for(let e=0;e+4<=d.length;){let t=h,n=f,r=p,i=g;h=d[e+0],f=d[e+1];let{s0:o,s1:s,s2:l,s3:c}=oE(a,h,f,p=d[e+2],g=d[e+3]);u[e++]=o^t,u[e++]=s^n,u[e++]=l^r,u[e++]=c^i}return(0,rT.clean)(...s),oT(c,r)}}}),a4.cfb=(0,rT.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(n,r,i){(0,rI.bytes)(n);let a=n.length;i=oC(a,i);let o=om(e),s=t,l=[o];(0,rT.isAligned32)(s)||l.push(s=(0,rT.copyBytes)(s)),(0,rT.isAligned32)(n)||l.push(n=(0,rT.copyBytes)(n));let c=(0,rT.u32)(n),d=(0,rT.u32)(i),u=r?d:c,h=(0,rT.u32)(s),f=h[0],p=h[1],g=h[2],m=h[3];for(let e=0;e+4<=c.length;){let{s0:t,s1:n,s2:r,s3:i}=ob(o,f,p,g,m);d[e+0]=c[e+0]^t,d[e+1]=c[e+1]^n,d[e+2]=c[e+2]^r,d[e+3]=c[e+3]^i,f=u[e++],p=u[e++],g=u[e++],m=u[e++]}let w=16*Math.floor(c.length/4);if(w<a){({s0:f,s1:p,s2:g,s3:m}=ob(o,f,p,g,m));let e=(0,rT.u8)(new Uint32Array([f,p,g,m]));for(let t=w,r=0;t<a;t++,r++)i[t]=n[t]^e[r];(0,rT.clean)(e)}return(0,rT.clean)(...l),i}return(0,rI.bytes)(e),(0,rI.bytes)(t,16),{encrypt:(e,t)=>n(e,!0,t),decrypt:(e,t)=>n(e,!1,t)}}),a4.gcm=(0,rT.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,n){if((0,rI.bytes)(e),(0,rI.bytes)(t),void 0!==n&&(0,rI.bytes)(n),t.length<8)throw Error("aes/gcm: invalid nonce length");function r(e,t,r){let i=oN(a8.ghash,!1,e,r,n);for(let e=0;e<t.length;e++)i[e]^=t[e];return i}function i(){let n=om(e),r=oi.slice(),i=oi.slice();if(oS(n,!1,i,i,r),12===t.length)i.set(t);else{let e=oi.slice(),n=(0,rT.createView)(e);(0,rT.setBigUint64)(n,8,BigInt(8*t.length),!1);let a=a8.ghash.create(r).update(t).update(e);a.digestInto(i),a.destroy()}return{xk:n,authKey:r,counter:i,tagMask:oS(n,!1,i,oi)}}return{encrypt(e){(0,rI.bytes)(e);let{xk:t,authKey:n,counter:a,tagMask:o}=i(),s=new Uint8Array(e.length+16),l=[t,n,a,o];(0,rT.isAligned32)(e)||l.push(e=(0,rT.copyBytes)(e)),oS(t,!1,a,e,s);let c=r(n,o,s.subarray(0,s.length-16));return l.push(c),s.set(c,e.length),(0,rT.clean)(...l),s},decrypt(e){if((0,rI.bytes)(e),e.length<16)throw Error("aes/gcm: ciphertext less than tagLen (16)");let{xk:t,authKey:n,counter:a,tagMask:o}=i(),s=[t,n,o,a];(0,rT.isAligned32)(e)||s.push(e=(0,rT.copyBytes)(e));let l=e.subarray(0,-16),c=e.subarray(-16),d=r(n,o,l);if(s.push(d),!(0,rT.equalBytes)(d,c))throw Error("aes/gcm: invalid ghash tag");let u=oS(t,!1,a,l);return(0,rT.clean)(...s),u}}});let oO=(e,t,n)=>r=>{if(!Number.isSafeInteger(r)||t>r||r>n)throw Error(`${e}: invalid value=${r}, must be [${t}..${n}]`)};function ok(e){return null!=e&&"object"==typeof e&&(e instanceof Uint32Array||"Uint32Array"===e.constructor.name)}function oM(e,t){if((0,rI.bytes)(t,16),!ok(e))throw Error("_encryptBlock accepts result of expandKeyLE");let n=(0,rT.u32)(t),{s0:r,s1:i,s2:a,s3:o}=ob(e,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=a,n[3]=o,t}function oP(e,t){if((0,rI.bytes)(t,16),!ok(e))throw Error("_decryptBlock accepts result of expandKeyLE");let n=(0,rT.u32)(t),{s0:r,s1:i,s2:a,s3:o}=oE(e,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=i,n[2]=a,n[3]=o,t}a4.siv=(0,rT.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,n){let r=oO("AAD",0,0x1000000000),i=oO("plaintext",0,0x1000000000),a=oO("nonce",12,12),o=oO("ciphertext",16,0x1000000000+16);function s(){let n=om(e),r=new Uint8Array(e.length),i=new Uint8Array(16),a=[n,r],o=t;(0,rT.isAligned32)(o)||a.push(o=(0,rT.copyBytes)(o));let s=(0,rT.u32)(o),l=0,c=s[0],d=s[1],u=s[2],h=0;for(let e of[i,r].map(rT.u32)){let t=(0,rT.u32)(e);for(let e=0;e<t.length;e+=2){let{s0:r,s1:i}=ob(n,l,c,d,u);t[e+0]=r,t[e+1]=i,l=++h}}let f={authKey:i,encKey:om(r)};return(0,rT.clean)(...a),f}function l(e,r,i){let a=oN(a8.polyval,!0,r,i,n);for(let e=0;e<12;e++)a[e]^=t[e];a[15]&=127;let o=(0,rT.u32)(a),s=o[0],l=o[1],c=o[2],d=o[3];return{s0:s,s1:l,s2:c,s3:d}=ob(e,s,l,c,d),o[0]=s,o[1]=l,o[2]=c,o[3]=d,a}function c(e,t,n){let r=(0,rT.copyBytes)(t);r[15]|=128;let i=oS(e,!0,r,n);return(0,rT.clean)(r),i}return(0,rI.bytes)(e,16,24,32),(0,rI.bytes)(t),a(t.length),void 0!==n&&((0,rI.bytes)(n),r(n.length)),{encrypt(e){(0,rI.bytes)(e),i(e.length);let{encKey:t,authKey:n}=s(),r=l(t,n,e),a=[t,n,r];(0,rT.isAligned32)(e)||a.push(e=(0,rT.copyBytes)(e));let o=new Uint8Array(e.length+16);return o.set(r,e.length),o.set(c(t,r,e)),(0,rT.clean)(...a),o},decrypt(e){(0,rI.bytes)(e),o(e.length);let t=e.subarray(-16),{encKey:n,authKey:r}=s(),i=[n,r];(0,rT.isAligned32)(e)||i.push(e=(0,rT.copyBytes)(e));let a=c(n,t,e.subarray(0,-16)),d=l(n,r,a);if(i.push(d),!(0,rT.equalBytes)(t,d))throw(0,rT.clean)(...i),Error("invalid polyval tag");return(0,rT.clean)(...i),a}}});let oR={encrypt(e,t){if(t.length>=0x100000000)throw Error("plaintext should be less than 4gb");let n=om(e);if(16===t.length)oM(n,t);else{let e=(0,rT.u32)(t),r=e[0],i=e[1];for(let t=0,a=1;t<6;t++)for(let t=2;t<e.length;t+=2,a++){let{s0:o,s1:s,s2:l,s3:c}=ob(n,r,i,e[t],e[t+1]);r=o,i=s^ou(a),e[t]=l,e[t+1]=c}e[0]=r,e[1]=i}n.fill(0)},decrypt(e,t){if(t.length-8>=0x100000000)throw Error("ciphertext should be less than 4gb");let n=ow(e),r=t.length/8-1;if(1===r)oP(n,t);else{let e=(0,rT.u32)(t),i=e[0],a=e[1];for(let t=0,o=6*r;t<6;t++)for(let t=2*r;t>=1;t-=2,o--){let{s0:r,s1:s,s2:l,s3:c}=oE(n,i,a^=ou(o),e[t],e[t+1]);i=r,a=s,e[t]=l,e[t+1]=c}e[0]=i,e[1]=a}n.fill(0)}},oL=new Uint8Array(8).fill(166);a4.aeskw=(0,rT.wrapCipher)({blockSize:8},e=>({encrypt(t){if((0,rI.bytes)(t),!t.length||t.length%8!=0)throw Error("invalid plaintext length");if(8===t.length)throw Error("8-byte keys not allowed in AESKW, use AESKWP instead");let n=(0,rT.concatBytes)(oL,t);return oR.encrypt(e,n),n},decrypt(t){if((0,rI.bytes)(t),t.length%8!=0||t.length<24)throw Error("invalid ciphertext length");let n=(0,rT.copyBytes)(t);if(oR.decrypt(e,n),!(0,rT.equalBytes)(n.subarray(0,8),oL))throw Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}})),a4.aeskwp=(0,rT.wrapCipher)({blockSize:8},e=>({encrypt(t){if((0,rI.bytes)(t),!t.length)throw Error("invalid plaintext length");let n=new Uint8Array(8+8*Math.ceil(t.length/8));n.set(t,8);let r=(0,rT.u32)(n);return r[0]=0xa65959a6,r[1]=ou(t.length),oR.encrypt(e,n),n},decrypt(t){if((0,rI.bytes)(t),t.length<16)throw Error("invalid ciphertext length");let n=(0,rT.copyBytes)(t),r=(0,rT.u32)(n);oR.decrypt(e,n);let i=ou(r[1])>>>0,a=8*Math.ceil(i/8);if(0xa65959a6!==r[0]||n.length-8!==a)throw Error("integrity check failed");for(let e=i;e<a;e++)if(0!==n[8+e])throw Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}})),a4.unsafe={expandKeyLE:om,expandKeyDecLE:ow,encrypt:ob,decrypt:oE,encryptBlock:oM,decryptBlock:oP,ctrCounter:ox,ctr32:oS},Object.defineProperty(a5,"__esModule",{value:!0}),a5.aes256cbc=a5.aes256gcm=void 0,a5.aes256gcm=function(e,t,n){return(0,a4.gcm)(e,t,n)},a5.aes256cbc=function(e,t,n){return(0,a4.cbc)(e,t)};var oD={},oj={},oU={};Object.defineProperty(oU,"__esModule",{value:!0}),oU.sigma=void 0,oU.rotl=function(e,t){return e<<t|e>>>32-t},oU.createCipher=function(e,t){let{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:a,rounds:o}=(0,o$.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return(0,oB.number)(i),(0,oB.number)(o),(0,oB.bool)(a),(0,oB.bool)(n),(t,s,l,c,d=0)=>{(0,oB.bytes)(t),(0,oB.bytes)(s),(0,oB.bytes)(l);let u=l.length;if(void 0===c&&(c=new Uint8Array(u)),(0,oB.bytes)(c),(0,oB.number)(d),d<0||d>=oG)throw Error("arx: counter overflow");if(c.length<u)throw Error(`arx: output (${c.length}) is shorter than data (${u})`);let h=[],f,p,g=t.length;if(32===g)h.push(f=(0,o$.copyBytes)(t)),p=oF;else{if(16!==g||!n)throw Error(`arx: invalid 32-byte key, got length=${g}`);(f=new Uint8Array(32)).set(t),f.set(t,16),p=oz,h.push(f)}oV(s)||h.push(s=(0,o$.copyBytes)(s));let m=(0,o$.u32)(f);if(r){if(24!==s.length)throw Error("arx: extended nonce must be 24 bytes");r(p,m,(0,o$.u32)(s.subarray(0,16)),m),s=s.subarray(16)}let w=16-i;if(w!==s.length)throw Error(`arx: nonce must be ${w} or 16 bytes`);if(12!==w){let e=new Uint8Array(12);e.set(s,a?0:12-s.length),s=e,h.push(s)}return function(e,t,n,r,i,a,o,s){let l=i.length,c=new Uint8Array(oq),d=(0,o$.u32)(c),u=oV(i)&&oV(a),h=u?(0,o$.u32)(i):oJ,f=u?(0,o$.u32)(a):oJ;for(let p=0;p<l;o++){if(e(t,n,r,d,o,s),o>=oG)throw Error("arx: counter overflow");let g=Math.min(oq,l-p);if(u&&g===oq){let e=p/4;if(p%4!=0)throw Error("arx: invalid block position");for(let t,n=0;n<oY;n++)f[t=e+n]=h[t]^d[n];p+=oq}else{for(let e,t=0;t<g;t++)a[e=p+t]=i[e]^c[t];p+=g}}}(e,p,m,(0,o$.u32)(s),l,c,d,o),(0,o$.clean)(...h),c}};let oB=rI,o$=rT,oW=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),oK=oW("expand 16-byte k"),oH=oW("expand 32-byte k"),oz=(0,o$.u32)(oK),oF=(0,o$.u32)(oH);function oV(e){return e.byteOffset%4==0}oU.sigma=oF.slice();let oq=64,oY=16,oG=0x100000000-1,oJ=new Uint32Array;var oZ={};Object.defineProperty(oZ,"__esModule",{value:!0}),oZ.poly1305=void 0,oZ.wrapConstructorWithKey=o0;let oQ=(e,t)=>255&e[t++]|(255&e[t++])<<8;class oX{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,rT.toBytes)(e),(0,rI.bytes)(e,32);const t=oQ(e,0),n=oQ(e,2),r=oQ(e,4),i=oQ(e,6),a=oQ(e,8),o=oQ(e,10),s=oQ(e,12),l=oQ(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|i<<9),this.r[4]=255&(i>>>4|a<<12),this.r[5]=a>>>1&8190,this.r[6]=8191&(a>>>14|o<<2),this.r[7]=8065&(o>>>11|s<<5),this.r[8]=8191&(s>>>8|l<<8),this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=oQ(e,16+2*t)}process(e,t,n=!1){let{h:r,r:i}=this,a=i[0],o=i[1],s=i[2],l=i[3],c=i[4],d=i[5],u=i[6],h=i[7],f=i[8],p=i[9],g=oQ(e,t+0),m=oQ(e,t+2),w=oQ(e,t+4),y=oQ(e,t+6),v=oQ(e,t+8),b=oQ(e,t+10),E=oQ(e,t+12),C=oQ(e,t+14),x=r[0]+(8191&g),S=r[1]+(8191&(g>>>13|m<<3)),_=r[2]+(8191&(m>>>10|w<<6)),A=r[3]+(8191&(w>>>7|y<<9)),T=r[4]+(8191&(y>>>4|v<<12)),I=r[5]+(v>>>1&8191),N=r[6]+(8191&(v>>>14|b<<2)),O=r[7]+(8191&(b>>>11|E<<5)),k=r[8]+(8191&(E>>>8|C<<8)),M=r[9]+(C>>>5|2048*!n),P=0,R=0+x*a+5*p*S+5*f*_+5*h*A+5*u*T;P=R>>>13,R&=8191,R+=5*d*I+5*c*N+5*l*O+5*s*k+5*o*M,P+=R>>>13,R&=8191;let L=P+x*o+S*a+5*p*_+5*f*A+5*h*T;P=L>>>13,L&=8191,L+=5*u*I+5*d*N+5*c*O+5*l*k+5*s*M,P+=L>>>13,L&=8191;let D=P+x*s+S*o+_*a+5*p*A+5*f*T;P=D>>>13,D&=8191,D+=5*h*I+5*u*N+5*d*O+5*c*k+5*l*M,P+=D>>>13,D&=8191;let j=P+x*l+S*s+_*o+A*a+5*p*T;P=j>>>13,j&=8191,j+=5*f*I+5*h*N+5*u*O+5*d*k+5*c*M,P+=j>>>13,j&=8191;let U=P+x*c+S*l+_*s+A*o+T*a;P=U>>>13,U&=8191,U+=5*p*I+5*f*N+5*h*O+5*u*k+5*d*M,P+=U>>>13,U&=8191;let B=P+x*d+S*c+_*l+A*s+T*o;P=B>>>13,B&=8191,B+=I*a+5*p*N+5*f*O+5*h*k+5*u*M,P+=B>>>13,B&=8191;let $=P+x*u+S*d+_*c+A*l+T*s;P=$>>>13,$&=8191,$+=I*o+N*a+5*p*O+5*f*k+5*h*M,P+=$>>>13,$&=8191;let W=P+x*h+S*u+_*d+A*c+T*l;P=W>>>13,W&=8191,W+=I*s+N*o+O*a+5*p*k+5*f*M,P+=W>>>13,W&=8191;let K=P+x*f+S*h+_*u+A*d+T*c;P=K>>>13,K&=8191,K+=I*l+N*s+O*o+k*a+5*p*M,P+=K>>>13,K&=8191;let H=P+x*p+S*f+_*h+A*u+T*d;P=H>>>13,H&=8191,H+=I*c+N*l+O*s+k*o+M*a,P+=H>>>13,H&=8191,R=8191&(P=(P=(P<<2)+P|0)+R|0),P>>>=13,L+=P,r[0]=R,r[1]=L,r[2]=D,r[3]=j,r[4]=U,r[5]=B,r[6]=$,r[7]=W,r[8]=K,r[9]=H}finalize(){let{h:e,pad:t}=this,n=new Uint16Array(10),r=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=r,r=e[t]>>>13,e[t]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(let t=1;t<10;t++)n[t]=e[t]+r,r=n[t]>>>13,n[t]&=8191;n[9]-=8192;let i=(1^r)-1;for(let e=0;e<10;e++)n[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|n[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let a=e[0]+t[0];e[0]=65535&a;for(let n=1;n<8;n++)a=(e[n]+t[n]|0)+(a>>>16)|0,e[n]=65535&a;(0,rT.clean)(n)}update(e){(0,rI.exists)(this);let{buffer:t,blockLen:n}=this,r=(e=(0,rT.toBytes)(e)).length;for(let i=0;i<r;){let a=Math.min(n-this.pos,r-i);if(a!==n)t.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-i;i+=n)this.process(e,i)}return this}destroy(){(0,rT.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,rI.exists)(this),(0,rI.output)(e,this),this.finished=!0;let{buffer:t,h:n}=this,{pos:r}=this;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let t=0;t<8;t++)e[i++]=n[t]>>>0,e[i++]=n[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}}function o0(e){let t=(t,n)=>e(n).update((0,rT.toBytes)(t)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}oZ.poly1305=o0(e=>new oX(e)),function(e){function t(e,n,r,i,a,o=20){let s=e[0],l=e[1],c=e[2],d=e[3],u=n[0],h=n[1],f=n[2],p=n[3],g=n[4],m=n[5],w=n[6],y=n[7],v=r[0],b=r[1],E=r[2],C=s,x=l,S=c,_=d,A=u,T=h,I=f,N=p,O=g,k=m,M=w,P=y,R=a,L=v,D=b,j=E;for(let e=0;e<o;e+=2)C=C+A|0,O=O+(R=(0,oU.rotl)(R^C,16))|0,C=C+(A=(0,oU.rotl)(A^O,12))|0,O=O+(R=(0,oU.rotl)(R^C,8))|0,A=(0,oU.rotl)(A^O,7),x=x+T|0,k=k+(L=(0,oU.rotl)(L^x,16))|0,x=x+(T=(0,oU.rotl)(T^k,12))|0,k=k+(L=(0,oU.rotl)(L^x,8))|0,T=(0,oU.rotl)(T^k,7),S=S+I|0,M=M+(D=(0,oU.rotl)(D^S,16))|0,S=S+(I=(0,oU.rotl)(I^M,12))|0,M=M+(D=(0,oU.rotl)(D^S,8))|0,I=(0,oU.rotl)(I^M,7),_=_+N|0,P=P+(j=(0,oU.rotl)(j^_,16))|0,_=_+(N=(0,oU.rotl)(N^P,12))|0,P=P+(j=(0,oU.rotl)(j^_,8))|0,N=(0,oU.rotl)(N^P,7),C=C+T|0,M=M+(j=(0,oU.rotl)(j^C,16))|0,C=C+(T=(0,oU.rotl)(T^M,12))|0,M=M+(j=(0,oU.rotl)(j^C,8))|0,T=(0,oU.rotl)(T^M,7),x=x+I|0,P=P+(R=(0,oU.rotl)(R^x,16))|0,x=x+(I=(0,oU.rotl)(I^P,12))|0,P=P+(R=(0,oU.rotl)(R^x,8))|0,I=(0,oU.rotl)(I^P,7),S=S+N|0,O=O+(L=(0,oU.rotl)(L^S,16))|0,S=S+(N=(0,oU.rotl)(N^O,12))|0,O=O+(L=(0,oU.rotl)(L^S,8))|0,N=(0,oU.rotl)(N^O,7),_=_+A|0,k=k+(D=(0,oU.rotl)(D^_,16))|0,_=_+(A=(0,oU.rotl)(A^k,12))|0,k=k+(D=(0,oU.rotl)(D^_,8))|0,A=(0,oU.rotl)(A^k,7);let U=0;i[U++]=s+C|0,i[U++]=l+x|0,i[U++]=c+S|0,i[U++]=d+_|0,i[U++]=u+A|0,i[U++]=h+T|0,i[U++]=f+I|0,i[U++]=p+N|0,i[U++]=g+O|0,i[U++]=m+k|0,i[U++]=w+M|0,i[U++]=y+P|0,i[U++]=a+R|0,i[U++]=v+L|0,i[U++]=b+D|0,i[U++]=E+j|0}function n(e,t,n,r){let i=e[0],a=e[1],o=e[2],s=e[3],l=t[0],c=t[1],d=t[2],u=t[3],h=t[4],f=t[5],p=t[6],g=t[7],m=n[0],w=n[1],y=n[2],v=n[3];for(let e=0;e<20;e+=2)i=i+l|0,h=h+(m=(0,oU.rotl)(m^i,16))|0,i=i+(l=(0,oU.rotl)(l^h,12))|0,h=h+(m=(0,oU.rotl)(m^i,8))|0,l=(0,oU.rotl)(l^h,7),a=a+c|0,f=f+(w=(0,oU.rotl)(w^a,16))|0,a=a+(c=(0,oU.rotl)(c^f,12))|0,f=f+(w=(0,oU.rotl)(w^a,8))|0,c=(0,oU.rotl)(c^f,7),o=o+d|0,p=p+(y=(0,oU.rotl)(y^o,16))|0,o=o+(d=(0,oU.rotl)(d^p,12))|0,p=p+(y=(0,oU.rotl)(y^o,8))|0,d=(0,oU.rotl)(d^p,7),s=s+u|0,g=g+(v=(0,oU.rotl)(v^s,16))|0,s=s+(u=(0,oU.rotl)(u^g,12))|0,g=g+(v=(0,oU.rotl)(v^s,8))|0,u=(0,oU.rotl)(u^g,7),i=i+c|0,p=p+(v=(0,oU.rotl)(v^i,16))|0,i=i+(c=(0,oU.rotl)(c^p,12))|0,p=p+(v=(0,oU.rotl)(v^i,8))|0,c=(0,oU.rotl)(c^p,7),a=a+d|0,g=g+(m=(0,oU.rotl)(m^a,16))|0,a=a+(d=(0,oU.rotl)(d^g,12))|0,g=g+(m=(0,oU.rotl)(m^a,8))|0,d=(0,oU.rotl)(d^g,7),o=o+u|0,h=h+(w=(0,oU.rotl)(w^o,16))|0,o=o+(u=(0,oU.rotl)(u^h,12))|0,h=h+(w=(0,oU.rotl)(w^o,8))|0,u=(0,oU.rotl)(u^h,7),s=s+l|0,f=f+(y=(0,oU.rotl)(y^s,16))|0,s=s+(l=(0,oU.rotl)(l^f,12))|0,f=f+(y=(0,oU.rotl)(y^s,8))|0,l=(0,oU.rotl)(l^f,7);let b=0;r[b++]=i,r[b++]=a,r[b++]=o,r[b++]=s,r[b++]=m,r[b++]=w,r[b++]=y,r[b++]=v}Object.defineProperty(e,"__esModule",{value:!0}),e.xchacha20poly1305=e.chacha20poly1305=e._poly1305_aead=e.chacha12=e.chacha8=e.xchacha20=e.chacha20=e.chacha20orig=void 0,e.hchacha=n,e.chacha20orig=(0,oU.createCipher)(t,{counterRight:!1,counterLength:8,allowShortKeys:!0}),e.chacha20=(0,oU.createCipher)(t,{counterRight:!1,counterLength:4,allowShortKeys:!1}),e.xchacha20=(0,oU.createCipher)(t,{counterRight:!1,counterLength:8,extendNonceFn:n,allowShortKeys:!1}),e.chacha8=(0,oU.createCipher)(t,{counterRight:!1,counterLength:4,rounds:8}),e.chacha12=(0,oU.createCipher)(t,{counterRight:!1,counterLength:4,rounds:12});let r=new Uint8Array(16),i=(e,t)=>{e.update(t);let n=t.length%16;n&&e.update(r.subarray(n))},a=new Uint8Array(32);function o(e,t,n,r,o){let s=e(t,n,a),l=oZ.poly1305.create(s);o&&i(l,o),i(l,r);let c=new Uint8Array(16),d=(0,rT.createView)(c);(0,rT.setBigUint64)(d,0,BigInt(o?o.length:0),!0),(0,rT.setBigUint64)(d,8,BigInt(r.length),!0),l.update(c);let u=l.digest();return(0,rT.clean)(s,c),u}e._poly1305_aead=e=>(t,n,r)=>((0,rI.bytes)(t,32),(0,rI.bytes)(n),{encrypt(i,a){let s=i.length,l=s+16;a?(0,rI.bytes)(a,l):a=new Uint8Array(l),e(t,n,i,a,1);let c=o(e,t,n,a.subarray(0,-16),r);return a.set(c,s),(0,rT.clean)(c),a},decrypt(i,a){let s=i.length,l=s-16;if(s<16)throw Error("encrypted data must be at least 16 bytes");a?(0,rI.bytes)(a,l):a=new Uint8Array(l);let c=i.subarray(0,-16),d=i.subarray(-16),u=o(e,t,n,c,r);if(!(0,rT.equalBytes)(d,u))throw Error("invalid tag");return e(t,n,c,a,1),(0,rT.clean)(u),a}}),e.chacha20poly1305=(0,rT.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,e._poly1305_aead)(e.chacha20)),e.xchacha20poly1305=(0,rT.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,e._poly1305_aead)(e.xchacha20))}(oj),Object.defineProperty(oD,"__esModule",{value:!0}),oD.xchacha20=void 0,oD.xchacha20=function(e,t,n){return(0,oj.xchacha20poly1305)(e,t,n)},function(e){function t(e,t,n,r){var i=(0,rD.symmetricAlgorithm)();if("aes-256-gcm"===i)return e(a5.aes256gcm,t,n,(0,rD.symmetricNonceLength)(),rj.AEAD_TAG_LENGTH,r);if("xchacha20"===i)return e(oD.xchacha20,t,n,rj.XCHACHA20_NONCE_LENGTH,rj.AEAD_TAG_LENGTH,r);if("aes-256-cbc"===i)return e(a5.aes256cbc,t,n,16,0);throw Error("Not implemented")}function n(e,t,n,r,i,a){var o=(0,rK.randomBytes)(r),s=e(t,o,a).encrypt(n);if(0===i)return(0,rT.concatBytes)(o,s);var l=s.length-i,c=s.subarray(0,l),d=s.subarray(l);return(0,rT.concatBytes)(o,d,c)}function r(e,t,n,r,i,a){var o=n.subarray(0,r),s=e(t,Uint8Array.from(o),a),l=n.subarray(r);if(0===i)return s.decrypt(l);var c=l.subarray(0,i),d=l.subarray(i);return s.decrypt((0,rT.concatBytes)(d,c))}Object.defineProperty(e,"__esModule",{value:!0}),e.aesDecrypt=e.aesEncrypt=e.symDecrypt=e.symEncrypt=void 0,e.symEncrypt=function(e,r,i){return t(n,e,r,i)},e.symDecrypt=function(e,n,i){return t(r,e,n,i)},e.aesEncrypt=e.symEncrypt,e.aesDecrypt=e.symDecrypt}(a2),cE=rx&&rx.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),cC=rx&&rx.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||cE(t,e,n)},Object.defineProperty(r$,"__esModule",{value:!0}),cC(rW,r$),cC(aZ,r$),cC(aJ,r$),cC(a2,r$);var o1={};Object.defineProperty(o1,"__esModule",{value:!0}),o1.PublicKey=void 0,o1.PublicKey=function(){function e(e){this.data=(0,r$.convertPublicKeyFormat)(e,!0)}return e.fromHex=function(t){return new e((0,r$.hexToPublicKey)(t))},Object.defineProperty(e.prototype,"uncompressed",{get:function(){return n5.from((0,r$.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compressed",{get:function(){return n5.from(this.data)},enumerable:!1,configurable:!0}),e.prototype.toHex=function(e){return void 0===e&&(e=!0),(0,rT.bytesToHex)(e?this.data:this.uncompressed)},e.prototype.decapsulate=function(e,t){void 0===t&&(t=!1);var n=t?this.data:this.uncompressed,r=e.multiply(this,t);return(0,r$.getSharedKey)(n,r)},e.prototype.equals=function(e){return(0,rT.equalBytes)(this.data,e.data)},e}(),Object.defineProperty(rB,"__esModule",{value:!0}),rB.PrivateKey=void 0,rB.PrivateKey=function(){function e(e){if(void 0===e)this.data=(0,r$.getValidSecret)();else{if(!(0,r$.isValidPrivateKey)(e))throw Error("Invalid private key");this.data=e}this.publicKey=new o1.PublicKey((0,r$.getPublicKey)(this.data))}return e.fromHex=function(t){return new e((0,r$.decodeHex)(t))},Object.defineProperty(e.prototype,"secret",{get:function(){return n5.from(this.data)},enumerable:!1,configurable:!0}),e.prototype.toHex=function(){return(0,rT.bytesToHex)(this.data)},e.prototype.encapsulate=function(e,t){void 0===t&&(t=!1);var n=t?this.publicKey.compressed:this.publicKey.uncompressed,r=this.multiply(e,t);return(0,r$.getSharedKey)(n,r)},e.prototype.multiply=function(e,t){return void 0===t&&(t=!1),(0,r$.getSharedPoint)(this.data,e.compressed,t)},e.prototype.equals=function(e){return(0,rT.equalBytes)(this.data,e.data)},e}(),Object.defineProperty(rU,"__esModule",{value:!0}),rU.PublicKey=rU.PrivateKey=void 0,Object.defineProperty(rU,"PrivateKey",{enumerable:!0,get:function(){return rB.PrivateKey}}),Object.defineProperty(rU,"PublicKey",{enumerable:!0,get:function(){return o1.PublicKey}}),Object.defineProperty(rA,"__esModule",{value:!0}),rA.utils=rA.PublicKey=rA.PrivateKey=rA.ECIES_CONFIG=void 0,rA.encrypt=function(e,t){var n=new c_.PrivateKey,r=e instanceof Uint8Array?new c_.PublicKey(e):c_.PublicKey.fromHex(e),i=n.encapsulate(r,(0,cS.isHkdfKeyCompressed)()),a=(0,cS.isEphemeralKeyCompressed)()?n.publicKey.compressed:n.publicKey.uncompressed,o=(0,cA.symEncrypt)(i,t);return n5.from((0,cx.concatBytes)(a,o))},rA.decrypt=function(e,t){var n=e instanceof Uint8Array?new c_.PrivateKey(e):c_.PrivateKey.fromHex(e),r=(0,cS.ephemeralKeySize)(),i=new c_.PublicKey(t.subarray(0,r)),a=t.subarray(r),o=i.decapsulate(n,(0,cS.isHkdfKeyCompressed)());return n5.from((0,cA.symDecrypt)(o,a))},cx=rT,cS=rD,c_=rU,cA=r$,Object.defineProperty(rA,"ECIES_CONFIG",{enumerable:!0,get:function(){return rD.ECIES_CONFIG}}),Object.defineProperty(rA,"PrivateKey",{enumerable:!0,get:function(){return rU.PrivateKey}}),Object.defineProperty(rA,"PublicKey",{enumerable:!0,get:function(){return rU.PublicKey}}),rA.utils={aesEncrypt:cA.aesEncrypt,aesDecrypt:cA.aesDecrypt,symEncrypt:cA.symEncrypt,symDecrypt:cA.symDecrypt,decodeHex:cA.decodeHex,getValidSecret:cA.getValidSecret,remove0x:cA.remove0x};let o3=(0,nU.default)("KeyExchange:Layer"),o2=(0,nU.default)("SocketService:Layer"),o5=(0,nU.default)("Ecies:Layer"),o4=(0,nU.default)("RemoteCommunication:Layer");o3.color="##95c44e",o2.color="#f638d7",o5.color="#465b9c",o4.color="#47a2be";let o8,o6=[],o9=[],o7=(e,t)=>nH(void 0,void 0,void 0,function*(){o8=t,o9.push(e),(function(e){return nH(this,void 0,void 0,function*(){let t;if(!o8||!e)return;t=o9,o9=o6,o6=t;let n=o8.endsWith("/")?`${o8}evt`:`${o8}/evt`,r=Object.assign({},e);if(delete r.params,e.params)for(let[t,n]of Object.entries(e.params))r[t]=n;let i=JSON.stringify(r);o4(`[sendBufferedEvents] Sending ${o6.length} analytics events to ${n}`);try{let e=yield(0,nj.default)(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:i}),t=yield e.text();o4(`[sendBufferedEvents] Response: ${t}`),o6.length=0}catch(e){}})})(e).catch(()=>{})});class se{constructor(e){this.enabled=!0,(null==e?void 0:e.debug)&&nU.default.enable("Ecies:Layer"),this.ecies=(null==e?void 0:e.privateKey)?rA.PrivateKey.fromHex(e.privateKey):new rA.PrivateKey,o5("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),o5("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),o5("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new rA.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,t){let n=e;if(this.enabled)try{o5("[ECIES: encrypt()] using otherPublicKey",t);let r=n5.from(e),i=rA.encrypt(t,r);n=n5.from(i).toString("base64")}catch(n){throw o5("[ECIES: encrypt()] error encrypt:",n),o5("[ECIES: encrypt()] private: ",this.ecies.toHex()),o5("[ECIES: encrypt()] data: ",e),o5("[ECIES: encrypt()] otherkey: ",t),n}return n}decrypt(e){let t=e;if(this.enabled)try{o5("[ECIES: decrypt()] using privateKey",this.ecies.toHex());let n=n5.from(e.toString(),"base64");t=rA.decrypt(this.ecies.toHex(),n).toString()}catch(t){throw o5("[ECIES: decrypt()] error decrypt",t),o5("[ECIES: decrypt()] private: ",this.ecies.toHex()),o5("[ECIES: decrypt()] encryptedData: ",e),t}return t}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){o5("[ECIES: toString()]",this.getKeyInfo())}}var st="0.33.1";let sn="https://metamask-sdk.api.cx.metamask.io/",sr=["websocket"],si=["metamask_connectSign","metamask_connectWith","metamask_open","metamask_batch","personal_sign","wallet_requestPermissions","wallet_revokePermissions","wallet_watchAsset","eth_sendTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_signTransaction","eth_sign","personal_ecRecover"];function sa(e){return si.includes(e)}function so(e){let{context:t}=e;o4(`[RemoteCommunication: clean()] context=${t}`),e.channelConfig=void 0,e.ready=!1,e.originatorConnectStarted=!1}(c$=cR||(cR={})).DISCONNECTED="disconnected",c$.WAITING="waiting",c$.TIMEOUT="timeout",c$.LINKED="linked",c$.PAUSED="paused",c$.TERMINATED="terminated",(cT=cL||(cL={})).KEY_INFO="key_info",cT.SERVICE_STATUS="service_status",cT.PROVIDER_UPDATE="provider_update",cT.RPC_UPDATE="rpc_update",cT.KEYS_EXCHANGED="keys_exchanged",cT.JOIN_CHANNEL="join_channel",cT.PUBLIC_KEY="public_key",cT.CHANNEL_CREATED="channel_created",cT.CLIENTS_CONNECTED="clients_connected",cT.CLIENTS_DISCONNECTED="clients_disconnected",cT.CLIENTS_WAITING="clients_waiting",cT.CLIENTS_READY="clients_ready",cT.REJECTED="rejected",cT.WALLET_INIT="wallet_init",cT.CHANNEL_PERSISTENCE="channel_persistence",cT.CONFIG="config",cT.MESSAGE_ACK="ack",cT.SOCKET_DISCONNECTED="socket_disconnected",cT.SOCKET_RECONNECT="socket_reconnect",cT.OTP="otp",cT.SDK_RPC_CALL="sdk_rpc_call",cT.AUTHORIZED="authorized",cT.CONNECTION_STATUS="connection_status",cT.MESSAGE="message",cT.TERMINATE="terminate",(cD||(cD={})).KEY_EXCHANGE="key_exchange",(cI=cj||(cj={})).KEY_HANDSHAKE_START="key_handshake_start",cI.KEY_HANDSHAKE_CHECK="key_handshake_check",cI.KEY_HANDSHAKE_SYN="key_handshake_SYN",cI.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",cI.KEY_HANDSHAKE_ACK="key_handshake_ACK",cI.KEY_HANDSHAKE_WALLET="key_handshake_wallet",cI.KEY_HANDSHAKE_NONE="none";class ss extends n$.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:t,context:n,ecies:r,logging:i}){super(),this.keysExchanged=!1,this.step=cj.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=n,this.communicationLayer=e,(null==r?void 0:r.privateKey)&&t&&(o3(`[KeyExchange: constructor()] otherPubKey=${t} set keysExchanged to true!`,r),this.keysExchanged=!0),this.myECIES=new se(Object.assign(Object.assign({},r),{debug:null==i?void 0:i.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=!0===(null==i?void 0:i.keyExchangeLayer),t&&this.setOtherPublicKey(t),this.communicationLayer.on(cD.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){let{relayPersistence:t}=this.communicationLayer.remote.state;if(o3(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${t}`,e),t)return void o3("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");let{message:n}=e;this.keysExchanged&&o3(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(cL.KEY_INFO,n.type),n.type===cj.KEY_HANDSHAKE_SYN?(this.checkStep([cj.KEY_HANDSHAKE_NONE,cj.KEY_HANDSHAKE_ACK]),o3("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",n),n.pubkey&&this.setOtherPublicKey(n.pubkey),this.communicationLayer.sendMessage({type:cj.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch(e=>{o3("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",e)}),this.setStep(cj.KEY_HANDSHAKE_ACK)):n.type===cj.KEY_HANDSHAKE_SYNACK?(this.checkStep([cj.KEY_HANDSHAKE_SYNACK,cj.KEY_HANDSHAKE_ACK,cj.KEY_HANDSHAKE_NONE]),o3("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),n.pubkey&&this.setOtherPublicKey(n.pubkey),this.communicationLayer.sendMessage({type:cj.KEY_HANDSHAKE_ACK}).catch(e=>{o3("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",e)}),this.keysExchanged=!0,this.setStep(cj.KEY_HANDSHAKE_ACK),this.emit(cL.KEYS_EXCHANGED)):n.type===cj.KEY_HANDSHAKE_ACK&&(o3("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([cj.KEY_HANDSHAKE_ACK,cj.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(cj.KEY_HANDSHAKE_ACK),this.emit(cL.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new se(e)}clean(){o3(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(cj.KEY_HANDSHAKE_NONE),this.emit(cL.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:t}){let{relayPersistence:n,protocolVersion:r}=this.communicationLayer.remote.state;n?o3("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(o3(`[KeyExchange: start()] context=${this.context} protocolVersion=${r} isOriginator=${e} step=${this.step} force=${t} relayPersistence=${n} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==cj.KEY_HANDSHAKE_NONE&&this.step!==cj.KEY_HANDSHAKE_SYNACK)||t?(o3(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${t}) -- step=${this.step}`,this.step),this.clean(),this.setStep(cj.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:cj.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch(e=>{o3("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",e)})):o3(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&!0!==t?o3("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):r>=2?this.communicationLayer.sendMessage({type:cj.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch(e=>{o3("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",e)}):(this.communicationLayer.sendMessage({type:cj.KEY_HANDSHAKE_START}).catch(e=>{o3("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",e)}),this.clean()))}setStep(e){this.step=e,this.emit(cL.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence({localKey:e,otherKey:t}){this.otherPublicKey=t,this.myECIES=new se({privateKey:e,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){o3("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){return JSON.stringify({keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step})}}(cN=cU||(cU={})).TERMINATE="terminate",cN.ANSWER="answer",cN.OFFER="offer",cN.CANDIDATE="candidate",cN.JSONRPC="jsonrpc",cN.WALLET_INFO="wallet_info",cN.WALLET_INIT="wallet_init",cN.ORIGINATOR_INFO="originator_info",cN.PAUSE="pause",cN.OTP="otp",cN.AUTHORIZED="authorized",cN.PING="ping",cN.READY="ready",(cO=cB||(cB={})).REQUEST="sdk_connect_request_started",cO.REQUEST_MOBILE="sdk_connect_request_started_mobile",cO.RECONNECT="sdk_reconnect_request_started",cO.CONNECTED="sdk_connection_established",cO.CONNECTED_MOBILE="sdk_connection_established_mobile",cO.AUTHORIZED="sdk_connection_authorized",cO.REJECTED="sdk_connection_rejected",cO.TERMINATED="sdk_connection_terminated",cO.DISCONNECTED="sdk_disconnected",cO.SDK_USE_EXTENSION="sdk_use_extension",cO.SDK_RPC_REQUEST="sdk_rpc_request",cO.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",cO.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",cO.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",cO.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser";let sl=(e,t,n)=>nH(void 0,void 0,void 0,function*(){var r,i,a,o,s,l;let{remote:c,state:d}=e,{channelId:u,isOriginator:h}=d;if("error_terminated"===t)return o2(`handleJoinChannelResults: Channel ${u} terminated`),void e.emit(cL.TERMINATE);if(!n)return void o2(`handleJoinChannelResults: No result for channel ${u}`);let{persistence:f,walletKey:p,rejected:g}=n;if(o2(`handleJoinChannelResults: Channel ${u} persistence=${f} walletKey=${p} rejected=${g}`),g)return o2(`handleJoinChannelResults: Channel ${u} rejected`),yield e.remote.disconnect({terminate:!0}),e.remote.emit(cL.REJECTED,{channelId:u}),void e.remote.emitServiceStatusEvent();if(p&&!(null==(r=c.state.channelConfig)?void 0:r.otherKey)){e.getKeyExchange().setOtherPublicKey(p),null==(i=e.state.keyExchange)||i.setKeysExchanged(!0),c.state.ready=!0,c.state.authorized=!0,c.emit(cL.AUTHORIZED);let{communicationLayer:t,storageManager:n}=c.state,r=Object.assign(Object.assign({},c.state.channelConfig),{channelId:null!=(a=c.state.channelId)?a:"",validUntil:Date.now()+6048e5,localKey:null==t?void 0:t.getKeyInfo().ecies.private,otherKey:p});e.sendMessage({type:cj.KEY_HANDSHAKE_ACK}).catch(e=>{}),null==(o=e.state.socket)||o.emit(cU.PING,{id:u,clientType:h?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield null==n?void 0:n.persistChannelConfig(r),c.emitServiceStatusEvent(),c.setConnectionStatus(cR.LINKED)}f&&(e.emit(cL.CHANNEL_PERSISTENCE),null==(s=e.state.keyExchange)||s.setKeysExchanged(!0),c.state.ready=!0,c.state.authorized=!0,c.emit(cL.AUTHORIZED),o7(Object.assign(Object.assign({id:null!=u?u:"",event:h?cB.CONNECTED:cB.CONNECTED_MOBILE},e.remote.state.originatorInfo),{sdkVersion:e.remote.state.sdkVersion,commLayer:e.state.communicationLayerPreference,commLayerVersion:st,walletVersion:null==(l=e.remote.state.walletInfo)?void 0:l.version}),d.communicationServerUrl).catch(e=>{}))}),sc=e=>new Promise(t=>{setTimeout(t,e)}),sd=(e,t,...n)=>nH(void 0,[e,t,...n],void 0,function*(e,t,n=200){let r,i=Date.now(),a=!1;for(;!a;){if(a=Date.now()-i>3e5,void 0!==(r=t[e]).elapsedTime)return r;yield sc(n)}throw Error(`RPC ${e} timed out`)}),su=e=>nH(void 0,void 0,void 0,function*(){let{state:t}=e,{socket:n,channelId:r,context:i,isOriginator:a,isReconnecting:o}=t;if(o)return o2("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",e),!1;if(!n)return o2("[SocketService: reconnectSocket()] socket is not defined",e),!1;if(!r)return!1;let{connected:s}=n;t.isReconnecting=!0,t.reconnectionAttempts=0,o2(`[SocketService: reconnectSocket()] connected=${s} trying to reconnect after socketio disconnection`,e);try{for(;3>t.reconnectionAttempts;){if(o2(`[SocketService: reconnectSocket()] Attempt ${t.reconnectionAttempts+1} of 3`,e),yield sc(200),n.connected)return o2("Socket already connected --- ping to retrieve messages"),n.emit(cU.PING,{id:r,clientType:a?"dapp":"wallet",context:"on_channel_config",message:""}),!0;t.resumed=!0,n.connect(),e.emit(cL.SOCKET_RECONNECT);try{if(yield new Promise((t,o)=>{n.emit(cL.JOIN_CHANNEL,{channelId:r,context:`${i}connect_again`,clientType:a?"dapp":"wallet"},(n,r)=>nH(void 0,void 0,void 0,function*(){try{yield sl(e,n,r),t()}catch(e){o(e)}}))}),yield sc(100),n.connected)return o2(`Reconnection successful on attempt ${t.reconnectionAttempts+1}`),!0}catch(e){o2(`Error during reconnection attempt ${t.reconnectionAttempts+1}:`,e)}t.reconnectionAttempts+=1,3>t.reconnectionAttempts&&(yield sc(200))}return o2("Failed to reconnect after 3 attempts"),!1}finally{t.isReconnecting=!1,t.reconnectionAttempts=0}});function sh(e,t){return nH(this,void 0,void 0,function*(){var n;let r=null==(n=e.state.keyExchange)?void 0:n.encryptMessage(JSON.stringify(t)),i={id:e.state.channelId,context:e.state.context,clientType:e.state.isOriginator?"dapp":"wallet",message:r,plaintext:e.state.hasPlaintext?JSON.stringify(t):void 0};return o2(`[SocketService: encryptAndSendMessage()] context=${e.state.context}`,i),t.type===cU.TERMINATE&&(e.state.manualDisconnect=!0),new Promise((t,n)=>{var r;null==(r=e.state.socket)||r.emit(cL.MESSAGE,i,(e,r)=>{var i;e&&(o2(`[SocketService: encryptAndSendMessage()] error=${e}`),n(e)),o2("[encryptAndSendMessage] response",r),t(null!=(i=null==r?void 0:r.success)&&i)})})})}(ck=cW||(cW={})).RPC_CHECK="rpcCheck",ck.SKIPPED_RPC="skippedRpc";let sf=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map(e=>e.toLowerCase()),sp=[{event:cL.CLIENTS_CONNECTED,handler:function(e,t){return n=>nH(this,void 0,void 0,function*(){var n,r,i,a,o,s,l,c,d,u,h;let f=null!=(r=null==(n=e.remote.state.channelConfig)?void 0:n.relayPersistence)&&r;if(o2(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected-${t}' relayPersistence=${f} resumed=${e.state.resumed}  clientsPaused=${e.state.clientsPaused} keysExchanged=${null==(i=e.state.keyExchange)?void 0:i.areKeysExchanged()} isOriginator=${e.state.isOriginator}`),e.emit(cL.CLIENTS_CONNECTED,{isOriginator:e.state.isOriginator,keysExchanged:null==(a=e.state.keyExchange)?void 0:a.areKeysExchanged(),context:e.state.context}),e.state.resumed)e.state.isOriginator||(o2(`[SocketService: handleClientsConnected()] context=${e.state.context} 'clients_connected' / keysExchanged=${null==(o=e.state.keyExchange)?void 0:o.areKeysExchanged()} -- backward compatibility`),null==(s=e.state.keyExchange)||s.start({isOriginator:null!=(l=e.state.isOriginator)&&l})),e.state.resumed=!1;else if(e.state.clientsPaused)o2("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!e.state.isOriginator){let t=!f;o2(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected' / keysExchanged=${null==(c=e.state.keyExchange)?void 0:c.areKeysExchanged()} -- force=${t} -- backward compatibility`),o2(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected' / keysExchanged=${null==(d=e.state.keyExchange)?void 0:d.areKeysExchanged()} -- force=${t} -- backward compatibility`),null==(u=e.state.keyExchange)||u.start({isOriginator:null!=(h=e.state.isOriginator)&&h,force:t})}e.state.clientsConnected=!0,e.state.clientsPaused=!1})}},{event:cL.CHANNEL_CREATED,handler:function(e,t){return n=>{o2(`[SocketService: handleChannelCreated()] context=${e.state.context} on 'channel_created-${t}'`,n),e.emit(cL.CHANNEL_CREATED,n)}}},{event:cL.CLIENTS_DISCONNECTED,handler:function(e,t){return()=>{var n;e.state.clientsConnected=!1,o2(`[SocketService: handlesClientsDisconnected()] context=${e.state.context} on 'clients_disconnected-${t}'`),e.remote.state.relayPersistence?o2(`[SocketService: handlesClientsDisconnected()] context=${e.state.context} on 'clients_disconnected-${t}' - relayPersistence enabled, skipping key exchange cleanup.`):(e.state.isOriginator&&!e.state.clientsPaused&&(null==(n=e.state.keyExchange)||n.clean()),e.emit(cL.CLIENTS_DISCONNECTED,t))}}},{event:cL.CONFIG,handler:function(e,t){return n=>nH(this,void 0,void 0,function*(){var r,i,a;o2(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${t}'`,n);let{persistence:o,walletKey:s}=n;e.state.isOriginator&&e.remote.state.channelConfig?(n.walletKey&&!e.remote.state.channelConfig.otherKey&&(o2(`Setting wallet key ${s}`),e.remote.state.channelConfig.otherKey=s,e.getKeyExchange().setOtherPublicKey(n.walletKey),null==(r=e.state.keyExchange)||r.setKeysExchanged(!0),yield e.remote.sendMessage({type:cj.KEY_HANDSHAKE_ACK}),yield e.remote.sendMessage({type:cU.PING}),yield null==(i=e.remote.state.storageManager)?void 0:i.persistChannelConfig(e.remote.state.channelConfig)),!0!==o||e.remote.state.channelConfig.relayPersistence||(o2(`Setting relay persistence ${o}`),e.remote.state.channelConfig.relayPersistence=o,e.remote.state.relayPersistence=!0,e.remote.emit(cL.CHANNEL_PERSISTENCE),e.remote.state.authorized=!0,e.remote.state.ready=!0,e.remote.emit(cL.AUTHORIZED),yield null==(a=e.remote.state.storageManager)?void 0:a.persistChannelConfig(e.remote.state.channelConfig))):e.state.isOriginator||n.persistence&&(e.remote.state.relayPersistence=!0,e.remote.emit(cL.CHANNEL_PERSISTENCE))})}},{event:cL.MESSAGE,handler:function(e,t){return n=>{var r,i,a,o,s,l,c,d,u,h,f,p,g,m,w,y,v,b;let{ackId:E,message:C,error:x}=n,S=null!=(r=e.remote.state.relayPersistence)&&r;if(o2(`[SocketService handleMessage()]  relayPersistence=${S}  context=${e.state.context} on 'message' ${t} keysExchanged=${null==(i=e.state.keyExchange)?void 0:i.areKeysExchanged()}`,n),x)throw o2(`
      [SocketService handleMessage()] context=${e.state.context}::on 'message' error=${x}`),Error(x);let _="string"==typeof C;if(!_&&(null==C?void 0:C.type)===cj.KEY_HANDSHAKE_START){if(S)return;return o2(`[SocketService handleMessage()] context=${e.state.context}::on 'message' received HANDSHAKE_START isOriginator=${e.state.isOriginator}`,C),void(null==(a=e.state.keyExchange)||a.start({isOriginator:null!=(o=e.state.isOriginator)&&o,force:!0}))}if(!_&&(null==(s=null==C?void 0:C.type)?void 0:s.startsWith("key_handshake"))){if(S)return;return o2(`[SocketService handleMessage()] context=${e.state.context}::on 'message' emit KEY_EXCHANGE`,C),void e.emit(cD.KEY_EXCHANGE,{message:C,context:e.state.context})}if(!_||(null==(l=e.state.keyExchange)?void 0:l.areKeysExchanged())){if(!_&&(null==C?void 0:C.type))return void e.emit(cL.MESSAGE,C)}else{let t=!1;try{o2(`[SocketService handleMessage()] context=${e.state.context}::on 'message' trying to decrypt message`),null==(c=e.state.keyExchange)||c.decryptMessage(C),t=!0}catch(t){o2(`[SocketService handleMessage()] context=${e.state.context}::on 'message' error`,t)}if(!t)return e.state.isOriginator?null==(u=e.state.keyExchange)||u.start({isOriginator:null!=(h=e.state.isOriginator)&&h}):e.sendMessage({type:cj.KEY_HANDSHAKE_START}).catch(e=>{}),void o2(`Message ignored because invalid key exchange status. step=${null==(f=e.state.keyExchange)?void 0:f.getKeyInfo().step}`,null==(p=e.state.keyExchange)?void 0:p.getKeyInfo(),C);o2("Invalid key exchange status detected --- updating it."),null==(d=e.state.keyExchange)||d.setKeysExchanged(!0)}if(!_)return void e.emit(cL.MESSAGE,C);let A=null==(g=e.state.keyExchange)?void 0:g.decryptMessage(C),T=JSON.parse(null!=A?A:"{}");if(E&&(null==E?void 0:E.length)>0&&(o2(`[SocketService handleMessage()] context=${e.state.context}::on 'message' ackid=${E} channelId=${t}`),null==(m=e.state.socket)||m.emit(cL.MESSAGE_ACK,{ackId:E,channelId:t,clientType:e.state.isOriginator?"dapp":"wallet"})),e.state.clientsPaused=(null==T?void 0:T.type)===cU.PAUSE,e.state.isOriginator&&T.data){let t=T.data,n=e.state.rpcMethodTracker[t.id];if(n){let r=Date.now()-n.timestamp;o2(`[SocketService handleMessage()] context=${e.state.context}::on 'message' received answer for id=${t.id} method=${n.method} responseTime=${r}`,T),e.remote.state.analytics&&sf.includes(n.method.toLowerCase())&&o7(Object.assign(Object.assign({id:null!=(w=e.remote.state.channelId)?w:"",event:cB.SDK_RPC_REQUEST_DONE,sdkVersion:e.remote.state.sdkVersion,commLayerVersion:st},e.remote.state.originatorInfo),{walletVersion:null==(y=e.remote.state.walletInfo)?void 0:y.version,params:{method:n.method,from:"mobile"}}),e.remote.state.communicationServerUrl).catch(e=>{}),sa(n.method)&&nB.analytics.track(t.error?4001===t.error.code?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:n.method});let i=Object.assign(Object.assign({},n),{result:t.result,error:t.error?{code:null==(v=t.error)?void 0:v.code,message:null==(b=t.error)?void 0:b.message}:void 0,elapsedTime:r});e.state.rpcMethodTracker[t.id]=i,e.emit(cL.RPC_UPDATE,i)}}e.emit(cL.MESSAGE,{message:T})}}},{event:cL.REJECTED,handler:function(e,t){return n=>nH(this,void 0,void 0,function*(){var n;e.state.isOriginator&&!e.remote.state.ready?(o2(`[SocketService: handleChannelRejected()] context=${e.state.context} channelId=${t} isOriginator=${e.state.isOriginator} ready=${e.remote.state.ready}`,e.remote.state.originatorInfo),o7(Object.assign(Object.assign({id:t,event:cB.REJECTED},e.remote.state.originatorInfo),{sdkVersion:e.remote.state.sdkVersion,commLayer:e.state.communicationLayerPreference,commLayerVersion:st,walletVersion:null==(n=e.remote.state.walletInfo)?void 0:n.version}),e.remote.state.communicationServerUrl).catch(e=>{}),nB.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),yield e.remote.disconnect({terminate:!0}),e.remote.emit(cL.REJECTED,{channelId:t}),e.remote.setConnectionStatus(cR.DISCONNECTED)):o2(`[SocketService: handleChannelRejected()] SKIP -- channelId=${t} isOriginator=${e.state.isOriginator} ready=${e.remote.state.ready}`)})}},{event:"clients_waiting_to_join",handler:function(e,t){return n=>{o2(`[SocketService: handleClientsWaitingToJoin()] context=${e.state.context} on 'clients_waiting_to_join-${t}'`,n),e.emit(cL.CLIENTS_WAITING,n)}}}],sg=[{event:cL.KEY_INFO,handler:function(e){return t=>{o2("[SocketService: handleKeyInfo()] on 'KEY_INFO'",t),e.emit(cL.KEY_INFO,t)}}},{event:cL.KEYS_EXCHANGED,handler:function(e){return()=>{var t,n,r;o2(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${null==(t=e.state.keyExchange)?void 0:t.areKeysExchanged()}`);let{channelConfig:i}=e.remote.state;if(i){let t=e.getKeyExchange().getKeyInfo().ecies;i.localKey=t.private,i.otherKey=t.otherPubKey,e.remote.state.channelConfig=i,null==(n=e.remote.state.storageManager)||n.persistChannelConfig(i).catch(e=>{})}e.emit(cL.KEYS_EXCHANGED,{keysExchanged:null==(r=e.state.keyExchange)?void 0:r.areKeysExchanged(),isOriginator:e.state.isOriginator});let a={keyInfo:e.getKeyInfo()};e.emit(cL.SERVICE_STATUS,a)}}}];function sm(e,t){o2(`[SocketService: setupChannelListener()] context=${e.state.context} setting socket listeners for channel ${t}...`);let{socket:n}=e.state,{keyExchange:r}=e.state;n&&e.state.isOriginator&&(e.state.debug&&(null==n||n.io.on("error",t=>{o2(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=error`,t)}),null==n||n.io.on("reconnect",t=>{o2(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect`,t),su(e).catch(e=>{})}),null==n||n.io.on("reconnect_error",t=>{o2(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect_error`,t)}),null==n||n.io.on("reconnect_failed",()=>{o2(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect_failed`)})),null==n||n.on("disconnect",t=>(o2(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${t}' begin recovery...`),(t=>{o2(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${e.state.manualDisconnect}`,t),e.state.manualDisconnect||(e.emit(cL.SOCKET_DISCONNECTED),su(e).catch(e=>{}))})(t)))),sp.forEach(({event:r,handler:i})=>{null==n||n.on(`${r}-${t}`,i(e,t))}),sg.forEach(({event:t,handler:n})=>{null==r||r.on(t,n(e))}),e.state.setupChannelListeners=!0}class sw extends n$.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;const{reconnect:t,communicationLayerPreference:n,communicationServerUrl:r,context:i,remote:a,logging:o}=e;this.state.resumed=t,this.state.context=i,this.state.isOriginator=a.state.isOriginator,this.state.communicationLayerPreference=n,this.state.debug=!0===(null==o?void 0:o.serviceLayer),this.remote=a,!0===(null==o?void 0:o.serviceLayer)&&nU.default.enable("SocketService:Layer"),this.state.communicationServerUrl=r,this.state.hasPlaintext=this.state.communicationServerUrl!==sn&&!0===(null==o?void 0:o.plaintext),o2(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e;let{otherPublicKey:t,ecies:n,logging:r}=this.options,i=this.state.communicationServerUrl;o2(`[SocketService: initSocket()] Socket IO url: ${i}`),this.state.socket=(0,tP.io)(i,{autoConnect:!1,transports:sr,withCredentials:!0}),function(e){if("undefined"!=typeof window&&"undefined"!=typeof document&&(o2(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,e),!e.state.focusListenerAdded)){let t=()=>{o2("Document has focus --- reconnecting socket"),su(e).catch(e=>{})};window.addEventListener("focus",t),e.state.focusListenerAdded=!0,e.state.removeFocusListener=()=>{window.removeEventListener("focus",t),e.state.focusListenerAdded=!1}}}(this);let a={communicationLayer:this,otherPublicKey:t,sendPublicKey:!1,context:null!=(e=this.state.context)?e:"",ecies:n,logging:r};this.state.keyExchange=new ss(a)}resetKeys(){var e;return o2("[SocketService: resetKeys()] Resetting keys."),void(null==(e=this.state.keyExchange)||e.resetKeys())}createChannel(){return nH(this,void 0,void 0,function*(){return function(e){return nH(this,void 0,void 0,function*(){var t,n,r;if(o2(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),null==(t=e.state.socket)?void 0:t.connected)throw Error("socket already connected");null==(n=e.state.socket)||n.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;let i=(0,nK.default)();e.state.channelId=i,sm(e,i),yield new Promise((t,n)=>{var r;null==(r=e.state.socket)||r.emit(cL.JOIN_CHANNEL,{channelId:i,context:`${e.state.context}createChannel`,clientType:"dapp"},(r,i)=>nH(this,void 0,void 0,function*(){try{yield sl(e,r,i),t()}catch(e){n(e)}}))});let a=null==(r=e.state.keyExchange)?void 0:r.getKeyInfo();return{channelId:i,pubKey:(null==a?void 0:a.ecies.public)||"",privKey:(null==a?void 0:a.ecies.private)||""}})}(this)})}connectToChannel({channelId:e,withKeyExchange:t=!1,authorized:n}){return function(e){return nH(this,arguments,void 0,function*({options:e,instance:t}){let{channelId:n,authorized:r,withKeyExchange:i}=e,{state:a,remote:o}=t,{isOriginator:s=!1,socket:l,keyExchange:c}=a,{channelConfig:d}=o.state;if(null==l?void 0:l.connected)throw Error("socket already connected");if(s&&(null==d?void 0:d.relayPersistence)){let{localKey:e,otherKey:t}=d;e&&t&&(null==c||c.setRelayPersistence({localKey:e,otherKey:t}))}return Object.assign(a,{manualDisconnect:!1,withKeyExchange:i,isOriginator:s,channelId:n}),null==l||l.connect(),sm(t,n),!s&&r&&(null==c||c.setKeysExchanged(!0),Object.assign(o.state,{ready:!0,authorized:!0})),new Promise(e=>{var i;let o=null==(i=null==c?void 0:c.getKeyInfo())?void 0:i.ecies.public;null==l||l.emit(cL.JOIN_CHANNEL,{channelId:n,context:`${a.context}_connectToChannel`,clientType:s?"dapp":"wallet",publicKey:r&&!s?o:void 0},(n,r)=>nH(this,void 0,void 0,function*(){yield sl(t,n,r),e()}))})})}({options:{channelId:e,withKeyExchange:t,authorized:n},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e;null==(e=this.state.socket)||e.emit(cL.MESSAGE,{id:this.state.channelId,context:this.state.context,message:{type:cj.KEY_HANDSHAKE_CHECK,pubkey:this.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return nH(this,void 0,void 0,function*(){return function(e,t){return nH(this,void 0,void 0,function*(){var n,r,i,a,o;let s,l;if(!e.state.channelId)throw o2("handleSendMessage: no channelId - Create a channel first"),Error("Create a channel first");if(o2(`[SocketService: handleSendMessage()] context=${e.state.context} areKeysExchanged=${null==(n=e.state.keyExchange)?void 0:n.areKeysExchanged()}`,t),null==(r=null==t?void 0:t.type)?void 0:r.startsWith("key_handshake"))return o2(`[SocketService: handleKeyHandshake()] context=${e.state.context}`,t),null==(a=e.state.socket)||a.emit(cL.MESSAGE,{id:e.state.channelId,context:e.state.context,clientType:e.state.isOriginator?"dapp":"wallet",message:t}),!0;!function(e,t){var n;if(!(null==(n=e.state.keyExchange)?void 0:n.areKeysExchanged())&&!e.remote.state.relayPersistence)throw o2(`[SocketService: validateKeyExchange()] context=${e.state.context} ERROR keys not exchanged`,t),Error("Keys not exchanged BBB")}(e,t),s=null!=(o=null==t?void 0:t.method)?o:"",l=null==t?void 0:t.id,e.state.isOriginator&&l&&(e.state.rpcMethodTracker[l]={id:l,timestamp:Date.now(),method:s},e.emit(cL.RPC_UPDATE,e.state.rpcMethodTracker[l]));let c=yield sh(e,t);return e.remote.state.analytics&&e.remote.state.isOriginator&&t.method&&sf.includes(t.method.toLowerCase())&&o7({id:null!=(i=e.remote.state.channelId)?i:"",event:cB.SDK_RPC_REQUEST,params:{method:t.method,from:"mobile"}},e.remote.state.communicationServerUrl).catch(e=>{}),e.remote.state.isOriginator&&t.method&&sa(t.method)&&nB.analytics.track("sdk_action_requested",{action:t.method}),(function(e,t){return nH(this,void 0,void 0,function*(){var n;let r=null==t?void 0:t.id,i=null!=(n=null==t?void 0:t.method)?n:"";if(e.state.isOriginator&&r)try{let n=sd(r,e.state.rpcMethodTracker,200).then(e=>({type:cW.RPC_CHECK,result:e})),a=nH(this,void 0,void 0,function*(){let t,n=yield(t={instance:e,rpcId:r},nH(void 0,[t],void 0,function*({rpcId:e,instance:t}){for(;t.state.lastRpcId===e||void 0===t.state.lastRpcId;)yield sc(200);return t.state.lastRpcId})),i=yield sd(n,e.state.rpcMethodTracker,200);return{type:cW.SKIPPED_RPC,result:i}}),o=yield Promise.race([n,a]);if(o.type===cW.RPC_CHECK){let e=o.result;o2(`[SocketService:handleRpcReplies()] id=${t.id} ${i} ( ${e.elapsedTime} ms)`,e.result)}else{if(o.type!==cW.SKIPPED_RPC)throw Error(`Error handling RPC replies for ${r}`);{let t=Object.assign(Object.assign({},e.state.rpcMethodTracker[r]),{error:Error("SDK_CONNECTION_ISSUE")});e.emit(cL.RPC_UPDATE,t);let n={data:Object.assign(Object.assign({},t),{jsonrpc:"2.0"}),name:"metamask-provider"};e.emit(cL.MESSAGE,{message:n})}}}catch(e){throw e}})})(e,t).catch(e=>{}),c})}(this,e)})}ping(){return function(e){return nH(this,void 0,void 0,function*(){var t,n;o2(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${null==(t=e.state.keyExchange)?void 0:t.areKeysExchanged()}`),null==(n=e.state.socket)||n.emit(cU.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""})})}(this)}pause(){return function(e){return nH(this,void 0,void 0,function*(){var t,n;o2(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,(null==(t=e.state.keyExchange)?void 0:t.areKeysExchanged())&&(yield e.sendMessage({type:cU.PAUSE})),null==(n=e.state.socket)||n.disconnect()})}(this)}isConnected(){var e;return null==(e=this.state.socket)?void 0:e.connected}resume(){return function(e){return nH(this,void 0,void 0,function*(){let{state:t,remote:n}=e,{socket:r,channelId:i,context:a,keyExchange:o,isOriginator:s}=t,{isOriginator:l}=n.state;if(o2(`[SocketService: resume()] channelId=${i} context=${a} connected=${null==r?void 0:r.connected} manualDisconnect=${t.manualDisconnect} resumed=${t.resumed} keysExchanged=${null==o?void 0:o.areKeysExchanged()}`),!i)throw o2("[SocketService: resume()] channelId is not defined"),Error("ChannelId is not defined");(null==r?void 0:r.connected)?(o2("[SocketService: resume()] already connected."),r.emit(cU.PING,{id:i,clientType:l?"dapp":"wallet",context:"on_channel_config",message:""}),n.hasRelayPersistence()||(null==o?void 0:o.areKeysExchanged())||(s?yield e.sendMessage({type:cU.READY}):null==o||o.start({isOriginator:!1}))):(null==r||r.connect(),o2(`[SocketService: resume()] after connecting socket --> connected=${null==r?void 0:r.connected}`),null==r||r.emit(cL.JOIN_CHANNEL,{channelId:i,context:`${a}_resume`,clientType:l?"dapp":"wallet"},(t,n)=>nH(this,void 0,void 0,function*(){try{yield sl(e,t,n)}catch(e){}}))),t.manualDisconnect=!1,t.resumed=!0})}(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){var t,n,r,i,a;o2(`[SocketService: disconnect()] context=${this.state.context}`,e),(null==e?void 0:e.terminate)&&(null==(n=(t=this.state).removeFocusListener)||n.call(t),this.state.channelId=e.channelId,null==(r=this.state.socket)||r.removeAllListeners(),null==(i=this.state.keyExchange)||i.clean(),this.remote.state.ready=!1,this.state.socket=void 0,this.state.rpcMethodTracker={}),this.state.manualDisconnect=!0,null==(a=this.state.socket)||a.disconnect()}}function sy({communicationLayerPreference:e,otherPublicKey:t,reconnect:n,ecies:r,communicationServerUrl:i=sn,instance:a}){var o,s,l,c,d,u,h,f,p,g,m;let{state:w}=a;if(o4("[initCommunicationLayer()] ",JSON.stringify(w,null,2)),e!==cK.SOCKET)throw Error("Invalid communication protocol");w.communicationLayer=new sw({communicationLayerPreference:e,otherPublicKey:t,reconnect:n,transports:w.transports,communicationServerUrl:i,context:w.context,ecies:r,logging:w.logging,remote:a});let y="undefined"!=typeof document&&document.URL||"",v="undefined"!=typeof document&&document.title||"";(null==(o=w.dappMetadata)?void 0:o.url)&&(y=w.dappMetadata.url),(null==(s=w.dappMetadata)?void 0:s.name)&&(v=w.dappMetadata.name);let b=null!=(u=null!=(c=null==(l=w.dappMetadata)?void 0:l.name)?c:null==(d=w.dappMetadata)?void 0:d.url)?u:"N/A",E="undefined"!=typeof window&&void 0!==window.location&&null!=(h=window.location.hostname)?h:b,C={url:y,title:v,source:null==(f=w.dappMetadata)?void 0:f.source,dappId:E,anonId:w.anonId,icon:(null==(p=w.dappMetadata)?void 0:p.iconUrl)||(null==(g=w.dappMetadata)?void 0:g.base64Icon),platform:w.platformType,apiVersion:st,connector:null==(m=w.dappMetadata)?void 0:m.connector};for(let[t,n]of(w.originatorInfo=C,Object.entries({[cL.AUTHORIZED]:function(e){return()=>nH(this,void 0,void 0,function*(){var t,n,r;let{state:i}=e;if(i.authorized)return;yield nH(this,void 0,void 0,function*(){for(;!i.walletInfo;)yield sc(500)});let a="7.3".localeCompare((null==(t=i.walletInfo)?void 0:t.version)||"");if(o4(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${null==(n=i.walletInfo)?void 0:n.version} compareValue=${a}`),1!==a)return;let o=i.platformType===cH.MobileWeb||i.platformType===cH.ReactNative||i.platformType===cH.MetaMaskMobileWebview;o4(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${i.platformType} secure=${o} channel=${i.channelId} walletVersion=${null==(r=i.walletInfo)?void 0:r.version}`),o&&(i.authorized=!0,e.emit(cL.AUTHORIZED))})}(a),[cL.MESSAGE]:e=>{let t=e;e.message&&(t=t.message),function(e,t){let{state:n}=t;if(o4(`[RemoteCommunication: onCommunicationLayerMessage()] context=${n.context} on 'message' typeof=${typeof e}`,e),t.state.ready=!0,n.isOriginator||e.type!==cU.ORIGINATOR_INFO)if(n.isOriginator&&e.type===cU.WALLET_INFO)!function(e,t){let{state:n}=e;n.walletInfo=t.walletInfo,n.paused=!1}(t,e);else{if(n.isOriginator&&e.type===cU.WALLET_INIT)(function(e,t){return nH(this,void 0,void 0,function*(){var n,r,i;let{state:a}=e;if(a.isOriginator){let a=t.data||{};if("object"==typeof a&&"accounts"in a&&"chainId"in a&&"walletKey"in a)try{let{channelConfig:t}=e.state;if(o4("WALLET_INIT: channelConfig",JSON.stringify(t,null,2)),t){let o=a.accounts,s=a.chainId,l=a.walletKey,c,d=!1;"deeplinkProtocol"in a&&(d=!!a.deeplinkProtocol,e.state.deeplinkProtocolAvailable=d),"walletVersion"in a&&(c=a.walletVersion),yield null==(n=e.state.storageManager)?void 0:n.persistChannelConfig(Object.assign(Object.assign({},t),{otherKey:l,walletVersion:c,deeplinkProtocolAvailable:d,relayPersistence:!0})),yield null==(r=e.state.storageManager)?void 0:r.persistAccounts(o),yield null==(i=e.state.storageManager)?void 0:i.persistChainId(s)}e.emit(cL.WALLET_INIT,{accounts:a.accounts,chainId:a.chainId})}catch(e){}}})})(t,e).catch(e=>{o4(`[RemoteCommunication: onCommunicationLayerMessage()] error=${e}`)});else if(e.type===cU.TERMINATE)(function(e){return nH(this,void 0,void 0,function*(){let{state:t}=e;t.isOriginator&&(yield sv({options:{terminate:!0,sendMessage:!1},instance:e}),e.emit(cL.TERMINATE))})})(t).catch(e=>{o4(`[RemoteCommunication: onCommunicationLayerMessage()] error=${e}`)});else if(e.type===cU.PAUSE)!function(e){let{state:t}=e;t.paused=!0,e.setConnectionStatus(cR.PAUSED)}(t);else if(e.type===cU.READY&&n.isOriginator)!function(e){let{state:t}=e;e.setConnectionStatus(cR.LINKED);let n=t.paused;t.paused=!1,e.emit(cL.CLIENTS_READY,{isOriginator:t.isOriginator,walletInfo:t.walletInfo}),n&&(t.authorized=!0,e.emit(cL.AUTHORIZED))}(t);else{if(e.type===cU.OTP&&n.isOriginator)return function(e,t){var n;let{state:r}=e;e.emit(cL.OTP,t.otpAnswer),1==="6.6".localeCompare((null==(n=r.walletInfo)?void 0:n.version)||"")&&e.emit(cL.SDK_RPC_CALL,{method:"eth_requestAccounts",params:[]})}(t,e);e.type===cU.AUTHORIZED&&n.isOriginator&&function(e){let{state:t}=e;t.authorized=!0,e.emit(cL.AUTHORIZED)}(t)}t.emit(cL.MESSAGE,e)}else!function(e,t){var n;let{state:r}=e;null==(n=r.communicationLayer)||n.sendMessage({type:cU.WALLET_INFO,walletInfo:r.walletInfo}),r.originatorInfo=t.originatorInfo||t.originator,e.emit(cL.CLIENTS_READY,{isOriginator:r.isOriginator,originatorInfo:r.originatorInfo}),r.paused=!1}(t,e)}(t,a)},[cL.CHANNEL_PERSISTENCE]:function(e){return()=>nH(this,void 0,void 0,function*(){var t,n,r,i,a,o,s;let{state:l}=e;o4(`[RemoteCommunication: handleFullPersistenceEvent()] context=${l.context}`),e.state.ready=!0,e.state.clientsConnected=!0,e.state.authorized=!0,e.state.relayPersistence=!0,null==(t=e.state.communicationLayer)||t.getKeyExchange().setKeysExchanged(!0),e.emit(cL.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),e.emit(cL.AUTHORIZED),e.emit(cL.CLIENTS_READY),e.emit(cL.CHANNEL_PERSISTENCE);try{l.channelConfig=Object.assign(Object.assign({},l.channelConfig),{localKey:null==(n=l.communicationLayer)?void 0:n.getKeyExchange().getKeyInfo().ecies.private,otherKey:null==(r=l.communicationLayer)?void 0:r.getKeyExchange().getOtherPublicKey(),channelId:null!=(i=l.channelId)?i:"",validUntil:null!=(o=null==(a=l.channelConfig)?void 0:a.validUntil)?o:6048e5,relayPersistence:!0}),yield null==(s=l.storageManager)?void 0:s.persistChannelConfig(l.channelConfig)}catch(e){}})}(a),[cL.CLIENTS_CONNECTED]:()=>{var t,n,r,i;let{state:o}=a;o4(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${o.channelId} keysExchanged=${null==(n=null==(t=o.communicationLayer)?void 0:t.getKeyInfo())?void 0:n.keysExchanged}`),o.analytics&&o7(Object.assign(Object.assign({id:null!=(r=o.channelId)?r:"",event:o.reconnection?cB.RECONNECT:o.isOriginator?cB.REQUEST:cB.REQUEST_MOBILE},o.originatorInfo),{commLayer:e,sdkVersion:o.sdkVersion,walletVersion:null==(i=o.walletInfo)?void 0:i.version,commLayerVersion:st}),o.communicationServerUrl).catch(e=>{}),o.isOriginator&&!o.reconnection&&nB.analytics.track("sdk_connection_established",{transport_type:"websocket"}),o.clientsConnected=!0,o.originatorInfoSent=!1,a.emit(cL.CLIENTS_CONNECTED)},[cL.KEYS_EXCHANGED]:t=>{var n,r,i,o,s,l,c,d;let{state:u}=a;if(o4(`[RemoteCommunication: handleKeysExchangedEvent()] context=${u.context} on commLayer.'keys_exchanged' channel=${u.channelId}`,t),null==(r=null==(n=u.communicationLayer)?void 0:n.getKeyInfo())?void 0:r.keysExchanged){let e=Object.assign(Object.assign({},u.channelConfig),{channelId:null!=(i=u.channelId)?i:"",validUntil:(null==(o=u.channelConfig)?void 0:o.validUntil)||6048e5,localKey:u.communicationLayer.getKeyInfo().ecies.private,otherKey:u.communicationLayer.getKeyInfo().ecies.otherPubKey});null==(s=u.storageManager)||s.persistChannelConfig(e).catch(e=>{}),a.setConnectionStatus(cR.LINKED)}!function(e,t){var n,r,i,a,o,s,l,c;let{state:d}=e;o4(`[RemoteCommunication: setLastActiveDate()] channel=${d.channelId}`,t);let u=Object.assign(Object.assign({},d.channelConfig),{channelId:null!=(n=d.channelId)?n:"",validUntil:null!=(i=null==(r=d.channelConfig)?void 0:r.validUntil)?i:0,relayPersistence:d.relayPersistence,localKey:null==(o=null==(a=d.communicationLayer)?void 0:a.state.keyExchange)?void 0:o.getKeyInfo().ecies.private,otherKey:null==(l=null==(s=d.communicationLayer)?void 0:s.state.keyExchange)?void 0:l.getKeyInfo().ecies.otherPubKey,lastActive:t.getTime()});null==(c=d.storageManager)||c.persistChannelConfig(u)}(a,new Date),u.analytics&&u.channelId&&o7(Object.assign(Object.assign({id:u.channelId,event:t.isOriginator?cB.CONNECTED:cB.CONNECTED_MOBILE},u.originatorInfo),{sdkVersion:u.sdkVersion,commLayer:e,commLayerVersion:st,walletVersion:null==(l=u.walletInfo)?void 0:l.version}),u.communicationServerUrl).catch(e=>{}),u.isOriginator=t.isOriginator,t.isOriginator||(null==(c=u.communicationLayer)||c.sendMessage({type:cU.READY}),u.ready=!0,u.paused=!1),t.isOriginator&&!u.originatorInfoSent&&(null==(d=u.communicationLayer)||d.sendMessage({type:cU.ORIGINATOR_INFO,originatorInfo:u.originatorInfo,originator:u.originatorInfo}),u.originatorInfoSent=!0)},[cL.SOCKET_DISCONNECTED]:()=>{let{state:e}=a;o4("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),e.ready=!1},[cL.SOCKET_RECONNECT]:()=>{let{state:e}=a;o4("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),e.ready=!1,e.authorized=!1,so(e),a.emitServiceStatusEvent({context:"socket_reconnect"})},[cL.CLIENTS_DISCONNECTED]:e=>{let{state:t}=a;o4(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${t.context} on 'clients_disconnected' channelId=${e}`),t.relayPersistence||(t.clientsConnected=!1,t.ready=!1,t.authorized=!1),a.emit(cL.CLIENTS_DISCONNECTED,t.channelId),a.setConnectionStatus(cR.DISCONNECTED)},[cL.KEY_INFO]:()=>{},[cL.CHANNEL_CREATED]:e=>{let{state:t}=a;o4(`[RemoteCommunication: handleChannelCreatedEvent()] context=${t.context} on 'channel_created' channelId=${e}`),a.emit(cL.CHANNEL_CREATED,e)},[cL.CLIENTS_WAITING]:e=>{var t;let{state:n}=a;if(o4(`[RemoteCommunication: handleClientsWaitingEvent()] context=${n.context} on 'clients_waiting' numberUsers=${e} ready=${n.ready} autoStarted=${n.originatorConnectStarted}`),a.setConnectionStatus(cR.WAITING),a.emit(cL.CLIENTS_WAITING,e),n.originatorConnectStarted){o4(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${n.originatorConnectStarted} timeout`,n.autoConnectOptions);let e=(null==(t=n.autoConnectOptions)?void 0:t.timeout)||3e3,r=setTimeout(()=>{o4(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${e}) terminate channelConfig`,n.autoConnectOptions),n.originatorConnectStarted=!1,n.ready||a.setConnectionStatus(cR.TIMEOUT),clearTimeout(r)},e)}},[cL.RPC_UPDATE]:e=>{a.emit(cL.RPC_UPDATE,e)}})))try{w.communicationLayer.on(t,n)}catch(e){}}function sv(e){return nH(this,arguments,void 0,function*({options:e,instance:t}){let{state:n}=t;return o4(`[RemoteCommunication: disconnect()] channel=${n.channelId}`,e),new Promise((r,i)=>{var a,o,s,l,c,d;(null==e?void 0:e.terminate)?(t.state.ready&&o7({id:null!=(a=t.state.channelId)?a:"",event:cB.TERMINATED},t.state.communicationServerUrl).catch(e=>{}),n.ready=!1,n.paused=!1,null==(o=n.storageManager)||o.terminate(null!=(s=n.channelId)?s:""),t.state.terminated=!0,e.sendMessage?(null==(l=n.communicationLayer)?void 0:l.getKeyInfo().keysExchanged)&&t.state.communicationLayer&&sh(t.state.communicationLayer,{type:cU.TERMINATE}).then(()=>{r(!0)}).catch(e=>{i(e)}):r(!0),n.authorized=!1,n.relayPersistence=!1,n.channelId=(0,nK.default)(),e.channelId=n.channelId,n.channelConfig=void 0,n.originatorConnectStarted=!1,null==(c=n.communicationLayer)||c.disconnect(e),t.setConnectionStatus(cR.TERMINATED)):(null==(d=n.communicationLayer)||d.disconnect(e),t.setConnectionStatus(cR.DISCONNECTED),r(!0))})})}(cK||(cK={})).SOCKET="socket",(cM=cH||(cH={})).NonBrowser="nodejs",cM.MetaMaskMobileWebview="in-app-browser",cM.DesktopWeb="web-desktop",cM.MobileWeb="web-mobile",cM.ReactNative="react-native";class sb extends n$.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:sn,context:"",persist:!1,clientsConnected:!1,sessionDuration:6048e5,originatorConnectStarted:!1,debug:!1,_connectionStatus:cR.DISCONNECTED},this._options=e;const{anonId:t,platformType:n,communicationLayerPreference:r,otherPublicKey:i,reconnect:a,walletInfo:o,dappMetadata:s,protocolVersion:l,transports:c,context:d,relayPersistence:u,ecies:h,analytics:f=!1,storage:p,sdkVersion:g,communicationServerUrl:m=sn,logging:w,autoConnect:y={timeout:3e3}}=e;this.state.anonId=t,this.state.otherPublicKey=i,this.state.dappMetadata=s,this.state.walletInfo=o,this.state.transports=c,this.state.platformType=n,this.state.analytics=f,this.state.protocolVersion=null!=l?l:1,this.state.isOriginator=!i,this.state.relayPersistence=u,this.state.communicationServerUrl=m,this.state.context=d,this.state.terminated=!1,this.state.sdkVersion=g,this.setMaxListeners(50),this.setConnectionStatus(cR.DISCONNECTED),(null==p?void 0:p.duration)&&(this.state.sessionDuration=6048e5),this.state.storageOptions=p,this.state.autoConnectOptions=y,this.state.debug=!0===(null==w?void 0:w.remoteLayer),!0===(null==w?void 0:w.remoteLayer)&&nU.default.enable("RemoteCommunication:Layer"),!0===(null==w?void 0:w.serviceLayer)&&nU.default.enable("SocketService:Layer"),!0===(null==w?void 0:w.eciesLayer)&&nU.default.enable("ECIES:Layer"),!0===(null==w?void 0:w.keyExchangeLayer)&&nU.default.enable("KeyExchange:Layer"),this.state.logging=w,(null==p?void 0:p.storageManager)&&(this.state.storageManager=p.storageManager),o4(`[RemoteCommunication: constructor()] protocolVersion=${l} relayPersistence=${u} isOriginator=${this.state.isOriginator} communicationLayerPreference=${r} otherPublicKey=${i} reconnect=${a}`),this.state.isOriginator||sy({communicationLayerPreference:r,otherPublicKey:i,reconnect:a,ecies:h,communicationServerUrl:m,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return nH(this,void 0,void 0,function*(){var e;if(this.state.storageManager){let t=yield this.state.storageManager.getPersistedChannelConfig({});t&&(this.state.channelConfig=t,this.state.channelId=t.channelId,this.state.deeplinkProtocolAvailable=null!=(e=t.deeplinkProtocolAvailable)&&e,t.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(cR.LINKED),yield this.connectToChannel({channelId:t.channelId})))}sy({communicationLayerPreference:cK.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})})}originatorSessionConnect(){return nH(this,void 0,void 0,function*(){return yield function(e){return nH(this,void 0,void 0,function*(){var t;let{state:n}=e;if(!n.storageManager)return void o4("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");let r=yield n.storageManager.getPersistedChannelConfig({});if(o4(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${n.originatorConnectStarted} channelConfig`,r),null==(t=n.communicationLayer)?void 0:t.isConnected())return o4("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),r;if(r){if(r.validUntil>Date.now())return n.channelConfig=r,n.originatorConnectStarted=!0,n.channelId=null==r?void 0:r.channelId,n.reconnection=!0,r;o4("[RemoteCommunication: autoConnect()] Session has expired")}n.originatorConnectStarted=!1})}(this)})}generateChannelIdConnect(){return nH(this,void 0,void 0,function*(){return function(e){return nH(this,void 0,void 0,function*(){var t,n,r,i,a,o;if(!e.communicationLayer)throw Error("communication layer not initialized");if(e.ready)throw Error("Channel already connected");if(e.channelId&&(null==(t=e.communicationLayer)?void 0:t.isConnected()))return e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),null==(n=e.storageManager)||n.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:null==(i=null==(r=e.communicationLayer)?void 0:r.getKeyInfo())?void 0:i.ecies.private,pubKey:null==(o=null==(a=e.communicationLayer)?void 0:a.getKeyInfo())?void 0:o.ecies.public};o4("[RemoteCommunication: generateChannelId()]");let s=yield e.communicationLayer.createChannel();o4("[RemoteCommunication: generateChannelId()] channel created",s);let l=Object.assign(Object.assign({},e.channelConfig),{channelId:s.channelId,localKey:s.privKey,validUntil:Date.now()+e.sessionDuration});return e.channelId=s.channelId,e.channelConfig=l,{channelId:e.channelId,pubKey:s.pubKey,privKey:s.privKey}})}(this.state)})}clean(){return so(this.state)}connectToChannel({channelId:e,withKeyExchange:t,authorized:n}){return function(e){return nH(this,arguments,void 0,function*({channelId:e,withKeyExchange:t,authorized:n,state:r}){var i,a,o;if(!(0,nW.default)(e))throw o4(`[RemoteCommunication: connectToChannel()] context=${r.context} invalid channel channelId=${e}`),Error(`Invalid channel ${e}`);if(o4(`[RemoteCommunication: connectToChannel()] context=${r.context} channelId=${e} withKeyExchange=${t}`),null==(i=r.communicationLayer)?void 0:i.isConnected())return void o4(`[RemoteCommunication: connectToChannel()] context=${r.context} already connected - interrupt connection.`);r.channelId=e,yield null==(a=r.communicationLayer)?void 0:a.connectToChannel({channelId:e,authorized:n,withKeyExchange:t});let s=Object.assign(Object.assign({},r.channelConfig),{channelId:e,validUntil:Date.now()+r.sessionDuration});r.channelConfig=s,null==(o=r.storageManager)||o.persistChannelConfig(s)})}({channelId:e,authorized:n,withKeyExchange:t,state:this.state})}sendMessage(e){return nH(this,void 0,void 0,function*(){let t=this.state.isOriginator&&e.method&&sa(e.method);t&&nB.analytics.track("sdk_action_requested",{action:e.method});try{return yield function(e,t){return nH(this,void 0,void 0,function*(){var n,r;let{state:i}=e;o4(`[RemoteCommunication: sendMessage()] context=${i.context} paused=${i.paused} ready=${i.ready} relayPersistence=${i.relayPersistence} authorized=${i.authorized} socket=${null==(n=i.communicationLayer)?void 0:n.isConnected()} clientsConnected=${i.clientsConnected} status=${i._connectionStatus}`,t),i.relayPersistence||i.ready&&(null==(r=i.communicationLayer)?void 0:r.isConnected())&&i.clientsConnected||(o4(`[RemoteCommunication: sendMessage()] context=${i.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise(t=>{e.once(cL.CLIENTS_READY,t)}),o4(`[RemoteCommunication: sendMessage()] context=${i.context}  AFTER SKIP / READY -- sending pending message`));try{return yield function(e,t){return nH(this,void 0,void 0,function*(){return new Promise(n=>{var r;let{state:i}=e;o4(`[RemoteCommunication: handleAuthorization()] context=${i.context} ready=${i.ready} authorized=${i.authorized} method=${t.method}`),!i.isOriginator||i.authorized||i.relayPersistence?null==(r=i.communicationLayer)||r.sendMessage(t).then(e=>{n(e)}).catch(e=>{n(!1)}):e.once(cL.AUTHORIZED,()=>{var e;o4(`[RemoteCommunication: handleAuthorization()] context=${i.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),null==(e=i.communicationLayer)||e.sendMessage(t).then(e=>{n(e)}).catch(e=>{n(!1)})})})})}(e,t)}catch(e){throw e}})}(this,e)}catch(n){throw t&&nB.analytics.track("sdk_action_failed",{action:e.method}),n}})}testStorage(){return nH(this,void 0,void 0,function*(){return function(e){return nH(this,void 0,void 0,function*(){var t;o4("[RemoteCommunication: testStorage()] res",(yield null==(t=e.storageManager)?void 0:t.getPersistedChannelConfig()))})}(this.state)})}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return null==(e=this.state.communicationLayer)?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return nH(this,void 0,void 0,function*(){var e;o4(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield null==(e=this.state.communicationLayer)?void 0:e.ping()})}testLogger(){o4(`testLogger() channel=${this.state.channelId}`),o2(`testLogger() channel=${this.state.channelId}`),o5(`testLogger() channel=${this.state.channelId}`),o3(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;o4(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),null==(e=this.state.communicationLayer)||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(cL.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(e={}){this.emit(cL.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return null==(e=this.state.communicationLayer)?void 0:e.getKeyInfo()}resetKeys(){var e;null==(e=this.state.communicationLayer)||e.resetKeys()}setOtherPublicKey(e){var t;let n=null==(t=this.state.communicationLayer)?void 0:t.getKeyExchange();if(!n)throw Error("KeyExchange is not initialized.");n.getOtherPublicKey()!==e&&n.setOtherPublicKey(e)}pause(){return nH(this,void 0,void 0,function*(){var e;o4(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield null==(e=this.state.communicationLayer)?void 0:e.pause(),this.setConnectionStatus(cR.PAUSED)})}getVersion(){return st}hasRelayPersistence(){var e;return null!=(e=this.state.relayPersistence)&&e}resume(){return nH(this,void 0,void 0,function*(){return function(e){return nH(this,void 0,void 0,function*(){var t;let{state:n}=e;o4(`[RemoteCommunication: resume()] channel=${n.channelId}`),yield null==(t=n.communicationLayer)?void 0:t.resume(),e.setConnectionStatus(cR.LINKED)})}(this)})}encrypt(e){var t,n,r;let i=null==(t=this.state.communicationLayer)?void 0:t.getKeyExchange(),a=null==i?void 0:i.getOtherPublicKey();if(!a)throw Error("KeyExchange not completed");return null==(r=null==(n=this.state.communicationLayer)?void 0:n.state.eciesInstance)?void 0:r.encrypt(e,a)}decrypt(e){var t,n,r;if(!(null==(t=this.state.communicationLayer)?void 0:t.state.eciesInstance))throw Error("ECIES instance is not initialized");return null==(r=null==(n=this.state.communicationLayer)?void 0:n.state.eciesInstance)?void 0:r.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return null==(e=this.state.communicationLayer)?void 0:e.getRPCMethodTracker()}reject({channelId:e}){return function(e){return nH(this,arguments,void 0,function*({channelId:e,state:t}){var n,r,i;if(!(0,nW.default)(e))throw o4(`[RemoteCommunication: connectToChannel()] context=${t.context} invalid channel channelId=${e}`),Error(`Invalid channel ${e}`);if(t.isOriginator)return void o4(`[RemoteCommunication: reject()] context=${t.context} isOriginator=${t.isOriginator} channelId=${e}`);let{socket:a}=null!=(r=null==(n=t.communicationLayer)?void 0:n.state)?r:{};(null==a?void 0:a.connected)||(o4(`[RemoteCommunication: reject()] context=${t.context} socket already connected`),null==a||a.connect()),o7(Object.assign(Object.assign({id:e,event:cB.REJECTED},t.originatorInfo),{sdkVersion:t.sdkVersion,commLayerVersion:st,walletVersion:null==(i=t.walletInfo)?void 0:i.version}),t.communicationServerUrl).catch(e=>{}),yield new Promise((n,r)=>{null==a||a.emit(cL.REJECTED,{channelId:e},(e,i)=>{o4(`[RemoteCommunication: reject()] context=${t.context} socket=${null==a?void 0:a.id}`,{error:e,response:i}),e?r(e):n(i)})})})}({channelId:e,state:this.state})}disconnect(e){return nH(this,void 0,void 0,function*(){return sv({options:e,instance:this})})}}(cP=cz||(cz={})).RENEW="renew",cP.LINK="link";var sE=()=>"MetaMask: Disconnected from chain. Attempting to connect.",sC=()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sx=()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",sS=e=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,s_=()=>"Must provide a Node.js-style duplex stream.",sA=()=>"MetaMask: Received invalid network parameters. Please report this bug.",sT=()=>"Expected a single, non-array, object argument.",sI=()=>"'args.method' must be a non-empty string.",sN=()=>"'args.params' must be an object or array if provided.",sO=e=>`MetaMask: Connected to chain with ID "${e}".`,sk="MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",sM="MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",sP="MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",sR="MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1102",sL="MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193",sD={close:"MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect",data:"MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message",networkChanged:"MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged",notification:"MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message"},sj={ethDecryptDeprecation:"MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.\nFor more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686",ethGetEncryptionPublicKeyDeprecation:"MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.\nFor more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686",walletWatchAssetNFTExperimental:"MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle"},sU="MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning.",sB=Math.floor(0xffffffff*Math.random()),s$=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},sW=(e,t,n)=>(s$(e,t,"read from private field"),n?n.call(e):t.get(e)),sK=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},sH=(e,t,n,r)=>(s$(e,t,"write to private field"),t.set(e,n),n),sz=(e,t,n)=>(s$(e,t,"access private method"),n),sF={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function sV(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}var sq=(e,t)=>Object.hasOwnProperty.call(e,t);class sY extends TypeError{constructor(e,t){let n;const{message:r,explanation:i,...a}=e,{path:o}=e,s=0===o.length?r:`At path: ${o.join(".")} -- ${r}`;super(i??s),null!=i&&(this.cause=s),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function sG(e){return"object"==typeof e&&null!=e}function sJ(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function*sZ(e,t,n,r){var i;for(let a of(sG(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]),e)){let e=function(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:i,branch:a}=t,{type:o}=n,{refinement:s,message:l=`Expected a value of type \`${o}\`${s?` with refinement \`${s}\``:""}, but received: \`${sJ(r)}\``}=e;return{value:r,type:o,refinement:s,key:i[i.length-1],path:i,branch:a,...e,message:l}}(a,t,n,r);e&&(yield e)}}function*sQ(e,t,n={}){let{path:r=[],branch:i=[e],coerce:a=!1,mask:o=!1}=n,s={path:r,branch:i};if(a&&(e=t.coercer(e,s),o&&"type"!==t.type&&sG(t.schema)&&sG(e)&&!Array.isArray(e)))for(let n in e)void 0===t.schema[n]&&delete e[n];let l="valid";for(let r of t.validator(e,s))r.explanation=n.message,l="not_valid",yield[r,void 0];for(let[c,d,u]of t.entries(e,s))for(let t of sQ(d,u,{path:void 0===c?r:[...r,c],branch:void 0===c?i:[...i,d],coerce:a,mask:o,message:n.message}))t[0]?(l=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):a&&(d=t[1],void 0===c?e=d:e instanceof Map?e.set(c,d):e instanceof Set?e.add(d):sG(e)&&(void 0!==d||c in e)&&(e[c]=d));if("not_valid"!==l)for(let r of t.refiner(e,s))r.explanation=n.message,l="not_refined",yield[r,void 0];"valid"===l&&(yield[void 0,e])}class sX{constructor(e){const{type:t,schema:n,validator:r,refiner:i,coercer:a=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=n,this.entries=o,this.coercer=a,this.validator=r?(e,t)=>sZ(r(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>sZ(i(e,t),t,this,e):()=>[]}assert(e,t){return s0(e,this,t)}create(e,t){return s1(e,this,t)}is(e){return s3(e,this)}mask(e,t){let n=s2(e,this,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}validate(e,t={}){return s2(e,this,t)}}function s0(e,t,n){let r=s2(e,t,{message:n});if(r[0])throw r[0]}function s1(e,t,n){let r=s2(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function s3(e,t){return!s2(e,t)[0]}function s2(e,t,n={}){let r=sQ(e,t,n),i=function(e){let{done:t,value:n}=e.next();return t?void 0:n}(r);return i[0]?[new sY(i[0],function*(){for(let e of r)e[0]&&(yield e[0])}),void 0]:[void 0,i[1]]}function s5(e,t){return new sX({type:e,schema:null,validator:t})}function s4(e){let t;return new sX({type:"lazy",schema:null,*entries(n,r){t??(t=e()),yield*t.entries(n,r)},validator:(n,r)=>(t??(t=e()),t.validator(n,r)),coercer:(n,r)=>(t??(t=e()),t.coercer(n,r)),refiner:(n,r)=>(t??(t=e()),t.refiner(n,r))})}function s8(e){return new sX({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${sJ(e)}`})}function s6(e){let t=sJ(e),n=typeof e;return new sX({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \`${t}\`, but received: ${sJ(n)}`})}function s9(){return s5("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${sJ(e)}`)}function s7(e){let t=e?Object.keys(e):[],n=s5("never",()=>!1);return new sX({type:"object",schema:e||null,*entries(r){if(e&&sG(r)){let i=new Set(Object.keys(r));for(let n of t)i.delete(n),yield[n,r[n],e[n]];for(let e of i)yield[e,r[e],n]}},validator:e=>sG(e)||`Expected an object, but received: ${sJ(e)}`,coercer:e=>sG(e)?{...e}:e})}function le(e){return new sX({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function lt(e,t){return new sX({type:"record",schema:null,*entries(n){if(sG(n))for(let r in n){let i=n[r];yield[r,r,e],yield[r,i,t]}},validator:e=>sG(e)||`Expected an object, but received: ${sJ(e)}`})}function ln(){return s5("string",e=>"string"==typeof e||`Expected a string, but received: ${sJ(e)}`)}function lr(e){let t=e.map(e=>e.type).join(" | ");return new sX({type:"union",schema:null,coercer(t){for(let n of e){let[e,r]=n.validate(t,{coerce:!0});if(!e)return r}return t},validator(n,r){let i=[];for(let t of e){let[...e]=sQ(n,t,r),[a]=e;if(!a[0])return[];for(let[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${sJ(n)}`,...i]}})}var li=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}};function la(){throw Error("setTimeout has not been defined")}function lo(){throw Error("clearTimeout has not been defined")}var ls=la,ll=lo;function lc(e){if(ls===setTimeout)return setTimeout(e,0);if((ls===la||!ls)&&setTimeout)return ls=setTimeout,setTimeout(e,0);try{return ls(e,0)}catch(t){try{return ls.call(null,e,0)}catch(t){return ls.call(this,e,0)}}}"function"==typeof nz.setTimeout&&(ls=setTimeout),"function"==typeof nz.clearTimeout&&(ll=clearTimeout);var ld,lu,lh,lf,lp,lg,lm,lw,ly,lv,lb,lE,lC,lx,lS,l_,lA,lT,lI,lN,lO,lk,lM,lP,lR,lL,lD,lj,lU,lB,l$,lW,lK,lH,lz,lF,lV,lq,lY,lG,lJ,lZ,lQ,lX,l0,l1,l3,l2,l5,l4,l8,l6,l9,l7,ce,ct,cn,cr,ci,ca,co,cs,cl,cc,cd,cu,ch,cf,cp,cg,cm,cw,cy,cv,cb,cE,cC,cx,cS,c_,cA,cT,cI,cN,cO,ck,cM,cP,cR,cL,cD,cj,cU,cB,c$,cW,cK,cH,cz,cF,cV=[],cq=!1,cY=-1;function cG(){cq&&cF&&(cq=!1,cF.length?cV=cF.concat(cV):cY=-1,cV.length&&cJ())}function cJ(){if(!cq){var e=lc(cG);cq=!0;for(var t=cV.length;t;){for(cF=cV,cV=[];++cY<t;)cF&&cF[cY].run();cY=-1,t=cV.length}cF=null,cq=!1,function(e){if(ll===clearTimeout)return clearTimeout(e);if((ll===lo||!ll)&&clearTimeout)return ll=clearTimeout,clearTimeout(e);try{ll(e)}catch(t){try{return ll.call(null,e)}catch(t){return ll.call(this,e)}}}(e)}}function cZ(e,t){this.fun=e,this.array=t}function cQ(){}cZ.prototype.run=function(){this.fun.apply(null,this.array)};var cX=nz.performance||{},c0=cX.now||cX.mozNow||cX.msNow||cX.oNow||cX.webkitNow||function(){return(new Date).getTime()},c1=new Date,c3={nextTick:function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];cV.push(new cZ(e,t)),1!==cV.length||cq||lc(cJ)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:cQ,addListener:cQ,once:cQ,off:cQ,removeListener:cQ,removeAllListeners:cQ,emit:cQ,binding:function(e){throw Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*c0.call(cX),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-c1)/1e3}};function c2({path:e,branch:t}){let n=e[e.length-1];return sq(t[t.length-2],n)}function c5(e){return new sX({...e,type:`optional ${e.type}`,validator:(t,n)=>!c2(n)||e.validator(t,n),refiner:(t,n)=>!c2(n)||e.refiner(t,n)})}var c4,c8,c6=lr([s6(null),s5("boolean",e=>"boolean"==typeof e),s5("finite number",e=>s3(e,s9())&&Number.isFinite(e)),ln(),s8(s4(()=>c6)),lt(ln(),s4(()=>c6))]),c9=(c4=s5("any",()=>!0),c8=e=>((function(e,t,n="Assertion failed",r=li){try{s0(e,t)}catch(e){var i,a;throw i=r,a=`${n}: ${("object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?e.message:null==e?"":String(e)).replace(/\.$/u,"")}.`,"string"==typeof i?.prototype?.constructor?.name?new i({message:a}):i({message:a})}})(e,c6),JSON.parse(JSON.stringify(e,(e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))),new sX({...c6,coercer:(e,t)=>s3(e,c4)?c6.coercer(c8(e,t),t):c6.coercer(e,t)}));function c7(e){try{return s1(e,c9),!0}catch{return!1}}var de=s6("2.0"),dt=new sX({...dj=lr([s9(),ln()]),validator:(e,t)=>null===e||dj.validator(e,t),refiner:(e,t)=>null===e||dj.refiner(e,t)}),dn=s7({code:s5("integer",e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${sJ(e)}`),message:ln(),data:c5(c9),stack:c5(ln())}),dr=lr([lt(ln(),c9),s8(c9)]),di=s7({id:dt,jsonrpc:de,method:ln(),params:c5(dr)}),da=s7({jsonrpc:de,method:ln(),params:c5(dr)});s7({id:dt,jsonrpc:de,result:le(s5("unknown",()=>!0)),error:le(dn)}),lr([s7({id:dt,jsonrpc:de,result:c9}),s7({id:dt,jsonrpc:de,error:dn})]);var ds={code:-32603,message:dl(-32603)};function dl(e,t="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(e)){let t=e.toString();if(sq(sF,t))return sF[t].message;if(e>=-32099&&e<=-32e3)return"Unspecified server error."}return t}function dc(e,{fallbackError:t=ds,shouldIncludeStack:n=!0}={}){if(!s3(t,dn))throw Error("Must provide fallback error with integer number code and string message.");let r=function(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if(s3(e,dn))return e;let n=dd(e);return{...t,data:{cause:n}}}(e,t);return n||delete r.stack,r}function dd(e){return Array.isArray(e)?e.map(e=>c7(e)?e:sV(e)?du(e):null):sV(e)?du(e):c7(e)?e:null}function du(e){return Object.getOwnPropertyNames(e).reduce((t,n)=>{let r=e[n];return c7(r)&&(t[n]=r),t},{})}dw.default=dw,dw.stable=db,dw.stableStringify=db;var dh="[...]",df="[Circular]",dp=[],dg=[];function dm(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function dw(e,t,n,r){var i;void 0===r&&(r=dm()),function e(t,n,r,i,a,o,s){var l;if(o+=1,"object"==typeof t&&null!==t){for(l=0;l<i.length;l++)if(i[l]===t)return void dy(df,t,n,a);if(void 0!==s.depthLimit&&o>s.depthLimit||void 0!==s.edgesLimit&&r+1>s.edgesLimit)return void dy(dh,t,n,a);if(i.push(t),Array.isArray(t))for(l=0;l<t.length;l++)e(t[l],l,l,i,t,o,s);else{var c=Object.keys(t);for(l=0;l<c.length;l++){var d=c[l];e(t[d],d,l,i,t,o,s)}}i.pop()}}(e,"",0,[],void 0,0,r);try{i=0===dg.length?JSON.stringify(e,t,n):JSON.stringify(e,dE(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==dp.length;){var a=dp.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return i}function dy(e,t,n,r){var i=Object.getOwnPropertyDescriptor(r,n);void 0!==i.get?i.configurable?(Object.defineProperty(r,n,{value:e}),dp.push([r,n,t,i])):dg.push([t,n,e]):(r[n]=e,dp.push([r,n,t]))}function dv(e,t){return e<t?-1:+(e>t)}function db(e,t,n,r){void 0===r&&(r=dm());var i,a=function e(t,n,r,i,a,o,s){var l;if(o+=1,"object"==typeof t&&null!==t){for(l=0;l<i.length;l++)if(i[l]===t)return void dy(df,t,n,a);try{if("function"==typeof t.toJSON)return}catch(e){return}if(void 0!==s.depthLimit&&o>s.depthLimit||void 0!==s.edgesLimit&&r+1>s.edgesLimit)return void dy(dh,t,n,a);if(i.push(t),Array.isArray(t))for(l=0;l<t.length;l++)e(t[l],l,l,i,t,o,s);else{var c={},d=Object.keys(t).sort(dv);for(l=0;l<d.length;l++){var u=d[l];e(t[u],u,l,i,t,o,s),c[u]=t[u]}if(void 0===a)return c;dp.push([a,n,t]),a[n]=c}i.pop()}}(e,"",0,[],void 0,0,r)||e;try{i=0===dg.length?JSON.stringify(a,t,n):JSON.stringify(a,dE(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==dp.length;){var o=dp.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function dE(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(dg.length>0)for(var r=0;r<dg.length;r++){var i=dg[r];if(i[1]===t&&i[0]===n){n=i[2],dg.splice(r,1);break}}return e.call(this,t,n)}}var dC=rS(dw),dx=class extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw Error('"message" must be a non-empty string.');super(t),this.code=e,void 0!==n&&(this.data=n)}serialize(){let e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}}(this.data)&&(e.data.cause=dd(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return dC(this.serialize(),dS,2)}};function dS(e,t){if("[Circular]"!==t)return t}function d_(e,t){let[n,r]=function(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){let{message:t,data:n}=e;if(t&&"string"!=typeof t)throw Error("Must specify string message.");return[t??void 0,n]}}return[]}(t);return new dx(e,n??dl(e),r)}var dA={};function dT(){}function dI(){dI.init.call(this)}function dN(e){return void 0===e._maxListeners?dI.defaultMaxListeners:e._maxListeners}function dO(e,t,n,r){var i,a,o;if("function"!=typeof n)throw TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]):(a=e._events=new dT,e._eventsCount=0),o){if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=dN(e))&&i>0&&o.length>i){o.warned=!0;var s=Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,"function"==typeof console.warn?console.warn(s):console.log(s)}}else o=a[t]=n,++e._eventsCount;return e}function dk(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function dM(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function dP(e,t){for(var n=Array(t);t--;)n[t]=e[t];return n}dT.prototype=Object.create(null),dI.EventEmitter=dI,dI.usingDomains=!1,dI.prototype.domain=void 0,dI.prototype._events=void 0,dI.prototype._maxListeners=void 0,dI.defaultMaxListeners=10,dI.init=function(){this.domain=null,dI.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new dT,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},dI.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},dI.prototype.getMaxListeners=function(){return dN(this)},dI.prototype.emit=function(e){var t,n,r,i,a,o,s,l="error"===e;if(o=this._events)l=l&&null==o.error;else if(!l)return!1;if(s=this.domain,l){if(t=arguments[1],!s){if(t instanceof Error)throw t;var c=Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(n=o[e]))return!1;var d="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=dP(e,r),a=0;a<r;++a)i[a].call(n)}(n,d,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=dP(e,i),o=0;o<i;++o)a[o].call(n,r)}(n,d,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=dP(e,a),s=0;s<a;++s)o[s].call(n,r,i)}(n,d,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,s=dP(e,o),l=0;l<o;++l)s[l].call(n,r,i,a)}(n,d,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,a=dP(e,i),o=0;o<i;++o)a[o].apply(n,r)}(n,d,this,i)}return!0},dI.prototype.addListener=function(e,t){return dO(this,e,t,!1)},dI.prototype.on=dI.prototype.addListener,dI.prototype.prependListener=function(e,t){return dO(this,e,t,!0)},dI.prototype.once=function(e,t){if("function"!=typeof t)throw TypeError('"listener" argument must be a function');return this.on(e,dk(this,e,t)),this},dI.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw TypeError('"listener" argument must be a function');return this.prependListener(e,dk(this,e,t)),this},dI.prototype.removeListener=function(e,t){var n,r,i,a,o;if("function"!=typeof t)throw TypeError('"listener" argument must be a function');if(!(r=this._events)||!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new dT:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new dT,this;delete r[e]}else{for(var s=n,l=i,c=l,d=c+1,u=s.length;d<u;c+=1,d+=1)s[c]=s[d];s.pop()}r.removeListener&&this.emit("removeListener",e,o||t)}return this},dI.prototype.off=function(e,t){return this.removeListener(e,t)},dI.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0==arguments.length?(this._events=new dT,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new dT:delete n[e]),this;if(0==arguments.length){for(var r,i=Object.keys(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new dT,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0])return this},dI.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},dI.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):dM.call(e,t)},dI.prototype.listenerCount=dM,dI.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var dR=r_(Object.freeze({__proto__:null,EventEmitter:dI,default:dI}));Object.defineProperty(dA,"__esModule",{value:!0});let dL=dR;function dD(e,t,n){try{Reflect.apply(e,t,n)}catch(e){setTimeout(()=>{throw e})}}var dj,dU,dB,d$,dW,dK,dH,dz,dF,dV,dq,dY,dG,dJ,dZ,dQ,dX,d0,d1,d3,d2=dA.default=class extends dL.EventEmitter{emit(e,...t){let n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;let n=Error("Unhandled error."+(e?` (${e.message})`:""));throw n.context=e,n}let i=r[e];if(void 0===i)return!1;if("function"==typeof i)dD(i,this,t);else{let e=i.length,n=function(e){let t=e.length,n=Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}(i);for(let r=0;r<e;r+=1)dD(n[r],this,t)}return!0}},d5=class e extends d2{constructor({notificationHandler:e}={}){super(),sK(this,dW),sK(this,dH),sK(this,dF),sK(this,dU,!1),sK(this,dB,void 0),sK(this,d$,void 0),sH(this,dB,[]),sH(this,d$,e)}destroy(){sW(this,dB).forEach(e=>{"destroy"in e&&"function"==typeof e.destroy&&e.destroy()}),sH(this,dB,[]),sH(this,dU,!0)}push(e){sz(this,dW,dK).call(this),sW(this,dB).push(e)}handle(e,t){if(sz(this,dW,dK).call(this),t&&"function"!=typeof t)throw Error('"callback" must be a function if provided.');return Array.isArray(e)?t?sz(this,dH,dz).call(this,e,t):sz(this,dH,dz).call(this,e):t?sz(this,dF,dV).call(this,e,t):this._promiseHandle(e)}asMiddleware(){return sz(this,dW,dK).call(this),async(t,n,r,i)=>{try{let[a,o,s]=await sz(e,dG,dJ).call(e,t,n,sW(this,dB));return o?(await sz(e,dX,d0).call(e,s),i(a)):r(async t=>{try{await sz(e,dX,d0).call(e,s)}catch(e){return t(e)}return t()})}catch(e){return i(e)}}}async _promiseHandle(e){return new Promise((t,n)=>{sz(this,dF,dV).call(this,e,(e,r)=>{e&&void 0===r?n(e):t(r)}).catch(n)})}};function d4(e){return JSON.stringify(e,null,2)}dU=new WeakMap,dB=new WeakMap,d$=new WeakMap,dW=new WeakSet,dK=function(){if(sW(this,dU))throw Error("This engine is destroyed and can no longer be used.")},dH=new WeakSet,dz=async function(e,t){try{if(0===e.length){let e=[{id:null,jsonrpc:"2.0",error:new dx(-32600,"Request batch must contain plain objects. Received an empty array")}];return t?t(null,e):e}let n=(await Promise.all(e.map(this._promiseHandle.bind(this)))).filter(e=>void 0!==e);return t?t(null,n):n}catch(e){if(t)return t(e);throw e}},dF=new WeakSet,dV=async function(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){let n=new dx(-32600,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(n,{id:null,jsonrpc:"2.0",error:n})}if("string"!=typeof e.method){let n=new dx(-32600,"Must specify a string method. Received: "+typeof e.method,{request:e});return sW(this,d$)&&!s3(e,di)?t(null):t(n,{id:e.id??null,jsonrpc:"2.0",error:n})}if(sW(this,d$)&&s3(e,da)&&!s3(e,di)){try{await sW(this,d$).call(this,e)}catch(e){return t(e)}return t(null)}let n=null,r={...e},i={id:r.id,jsonrpc:r.jsonrpc};try{await sz(d5,dq,dY).call(d5,r,i,sW(this,dB))}catch(e){n=e}return n&&(delete i.result,i.error||(i.error=dc(n))),t(n,i)},dq=new WeakSet,dY=async function(e,t,n){let[r,i,a]=await sz(d5,dG,dJ).call(d5,e,t,n);if(sz(d5,d1,d3).call(d5,e,t,i),await sz(d5,dX,d0).call(d5,a),r)throw r},dG=new WeakSet,dJ=async function(e,t,n){let r=[],i=null,a=!1;for(let o of n)if([i,a]=await sz(d5,dZ,dQ).call(d5,e,t,o,r),a)break;return[i,a,r.reverse()]},dZ=new WeakSet,dQ=async function(e,t,n,r){return new Promise(i=>{let a=e=>{let n=e||t.error;n&&(t.error=dc(n)),i([n,!0])};try{n(e,t,n=>{t.error?a(t.error):(n&&("function"!=typeof n&&a(new dx(-32603,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof n}" for request:
${d4(e)}`,{request:e})),r.push(n)),i([null,!1]))},a)}catch(e){a(e)}})},dX=new WeakSet,d0=async function(e){for(let t of e)await new Promise((e,n)=>{t(t=>t?n(t):e())})},d1=new WeakSet,d3=function(e,t,n){if(!sq(t,"result")&&!sq(t,"error"))throw new dx(-32603,`JsonRpcEngine: Response has no error or result for request:
${d4(e)}`,{request:e});if(!n)throw new dx(-32603,`JsonRpcEngine: Nothing ended request:
${d4(e)}`,{request:e})},sK(d5,dq),sK(d5,dG),sK(d5,dZ),sK(d5,dX),sK(d5,d1);var d8=Object.freeze(["eth_subscription"]),d6=(e,t,n=!0)=>(r,i)=>{r||i.error?t(r||i.error):!n||Array.isArray(i)?e(i):e(i.result)},d9=e=>!!e&&"string"==typeof e&&e.startsWith("0x"),d7=()=>{};async function ue(e,t){try{let t=await async function(){return{name:function(e){let{document:t}=e,n=t.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;let r=t.querySelector('head > meta[name="title"]');return r?r.content:t.title&&t.title.length>0?t.title:window.location.hostname}(window),icon:await ut(window)}}();e.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:t},d7)}catch(e){t.error({message:sx(),originalError:e})}}async function ut(e){let{document:t}=e;for(let e of Array.from(t.querySelectorAll('head > link[rel~="icon"]')))if(e&&await un(e.href))return e.href;return null}async function un(e){return new Promise((t,n)=>{try{let n=document.createElement("img");n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=e}catch(e){n(e)}})}var ur=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ui=(e,t,n)=>(ur(e,t,"read from private field"),n?n.call(e):t.get(e)),ua=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},uo=(e,t,n,r)=>(ur(e,t,"write to private field"),t.set(e,n),n);function us(e,t,n){try{Reflect.apply(e,t,n)}catch(e){setTimeout(()=>{throw e})}}class ul extends dI{emit(e,...t){let n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;let n=Error("Unhandled error."+(e?` (${e.message})`:""));throw n.context=e,n}let i=r[e];if(void 0===i)return!1;if("function"==typeof i)us(i,this,t);else{let e=i.length,n=function(e){let t=e.length,n=Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}(i);for(let r=0;r<e;r+=1)us(n[r],this,t)}return!0}}var uc,ud,uu=rS(function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!=i--;){var r,i,a,o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}),uh=class e extends ul{constructor({logger:t=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),ua(this,uc,void 0),ua(this,ud,void 0),this._log=t,this.setMaxListeners(n),this._state={...e._defaultState},uo(this,ud,null),uo(this,uc,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const i=new d5;r.forEach(e=>i.push(e)),this._rpcEngine=i}get chainId(){return ui(this,uc)}get selectedAddress(){return ui(this,ud)}isConnected(){return this._state.isConnected}async request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw d_(-32600,{message:sT(),data:e});let{method:t,params:n}=e;if("string"!=typeof t||0===t.length)throw d_(-32600,{message:sI(),data:e});if(void 0!==n&&!Array.isArray(n)&&("object"!=typeof n||null===n))throw d_(-32600,{message:sN(),data:e});let r=null==n?{method:t}:{method:t,params:n};return new Promise((e,t)=>{this._rpcRequest(r,d6(e,t))})}_initializeState(e){if(this._state.initialized)throw Error("Provider already initialized.");if(e){let{accounts:t,chainId:n,isUnlocked:r,networkVersion:i}=e;this._handleConnect(n),this._handleChainChanged({chainId:n,networkVersion:i}),this._handleUnlockStateChanged({accounts:t,isUnlocked:r}),this._handleAccountsChanged(t)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,t){let n=t;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),"eth_accounts"!==e.method&&"eth_requestAccounts"!==e.method||(n=(n,r)=>{this._handleAccountsChanged(r.result??[],"eth_accounts"===e.method),t(n,r)})),this._rpcEngine.handle(e,n)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(sO(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let n;this._state.isConnected=!1,e?(n=new dx(1013,t??sE()),this._log.debug(n)):(n=new dx(1011,t??sC()),this._log.error(n),uo(this,uc,null),this._state.accounts=null,uo(this,ud,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleChainChanged({chainId:e}={}){d9(e)?(this._handleConnect(e),e!==ui(this,uc)&&(uo(this,uc,e),this._state.initialized&&this.emit("chainChanged",ui(this,uc)))):this._log.error(sA(),{chainId:e})}_handleAccountsChanged(e,t=!1){let n=e;for(let t of(Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),n=[]),e))if("string"!=typeof t){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),n=[];break}if(!uu(this._state.accounts,n)&&(t&&null!==this._state.accounts&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",n),this._state.accounts=n,ui(this,ud)!==n[0]&&uo(this,ud,n[0]||null),this._state.initialized)){let e=[...n];this.emit("accountsChanged",e)}}_handleUnlockStateChanged({accounts:e,isUnlocked:t}={}){"boolean"==typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};uc=new WeakMap,ud=new WeakMap,uh._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var uf,up=uh,ug={exports:{}},um=dR.EventEmitter,uw=r_(rC);uf="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var uy=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},uv=/%[sdj%]/g;function ub(e){if(!uD(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u_(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(uv,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),o=r[n];n<i;o=r[++n])uP(o)||!u$(o)?a+=" "+o:a+=" "+u_(o);return a}function uE(e,t){if(uU(nz.process))return function(){return uE(e,t).apply(this,arguments)};if(!0===c3.noDeprecation)return e;var n=!1;return function(){if(!n){if(c3.throwDeprecation)throw Error(t);c3.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}}var uC,ux={};function uS(e){return uU(uC)&&(uC=c3.env.NODE_DEBUG||""),ux[e=e.toUpperCase()]||(RegExp("\\b"+e+"\\b","i").test(uC)?ux[e]=function(){var t=ub.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:ux[e]=function(){}),ux[e]}function u_(e,t){var n={seen:[],stylize:uT};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),uM(t)?n.showHidden=t:t&&uJ(n,t),uU(n.showHidden)&&(n.showHidden=!1),uU(n.depth)&&(n.depth=2),uU(n.colors)&&(n.colors=!1),uU(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=uA),uI(n,e,n.depth)}function uA(e,t){var n=u_.styles[t];return n?"\x1b["+u_.colors[n][0]+"m"+e+"\x1b["+u_.colors[n][1]+"m":e}function uT(e,t){return e}function uI(e,t,n){if(e.customInspect&&t&&uH(t.inspect)&&t.inspect!==u_&&(!t.constructor||t.constructor.prototype!==t)){var r,i,a=t.inspect(n,e);return uD(a)||(a=uI(e,a,n)),a}var o=function(e,t){if(uU(t))return e.stylize("undefined","undefined");if(uD(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return uL(t)?e.stylize(""+t,"number"):uM(t)?e.stylize(""+t,"boolean"):uP(t)?e.stylize("null","null"):void 0}(e,t);if(o)return o;var s=Object.keys(t),l=(d={},s.forEach(function(e,t){d[e]=!0}),d);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),uK(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return uN(t);if(0===s.length){if(uH(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(uB(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(uW(t))return e.stylize(Date.prototype.toString.call(t),"date");if(uK(t))return uN(t)}var d,u,h="",f=!1,p=["{","}"];return uk(t)&&(f=!0,p=["[","]"]),uH(t)&&(h=" [Function"+(t.name?": "+t.name:"")+"]"),uB(t)&&(h=" "+RegExp.prototype.toString.call(t)),uW(t)&&(h=" "+Date.prototype.toUTCString.call(t)),uK(t)&&(h=" "+uN(t)),0!==s.length||f&&0!=t.length?n<0?uB(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=f?function(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)uZ(t,String(o))?a.push(uO(e,t,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(uO(e,t,n,r,i,!0))}),a}(e,t,n,l,s):s.map(function(r){return uO(e,t,n,l,r,f)}),e.seen.pop(),r=h,i=p,u.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===r?"":r+"\n ")+" "+u.join(",\n  ")+" "+i[1]:i[0]+r+" "+u.join(", ")+" "+i[1]):p[0]+h+p[1]}function uN(e){return"["+Error.prototype.toString.call(e)+"]"}function uO(e,t,n,r,i,a){var o,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),uZ(r,i)||(o="["+i+"]"),s||(0>e.seen.indexOf(l.value)?(s=uP(n)?uI(e,l.value,null):uI(e,l.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),uU(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function uk(e){return Array.isArray(e)}function uM(e){return"boolean"==typeof e}function uP(e){return null===e}function uR(e){return null==e}function uL(e){return"number"==typeof e}function uD(e){return"string"==typeof e}function uj(e){return"symbol"==typeof e}function uU(e){return void 0===e}function uB(e){return u$(e)&&"[object RegExp]"===uV(e)}function u$(e){return"object"==typeof e&&null!==e}function uW(e){return u$(e)&&"[object Date]"===uV(e)}function uK(e){return u$(e)&&("[object Error]"===uV(e)||e instanceof Error)}function uH(e){return"function"==typeof e}function uz(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function uF(e){return n5.isBuffer(e)}function uV(e){return Object.prototype.toString.call(e)}function uq(e){return e<10?"0"+e.toString(10):e.toString(10)}u_.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u_.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var uY=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function uG(){var e,t;console.log("%s - %s",(t=[uq((e=new Date).getHours()),uq(e.getMinutes()),uq(e.getSeconds())].join(":"),[e.getDate(),uY[e.getMonth()],t].join(" ")),ub.apply(null,arguments))}function uJ(e,t){if(!t||!u$(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function uZ(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var uQ="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function uX(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');if(uQ&&e[uQ]){var t;if("function"!=typeof(t=e[uQ]))throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,uQ,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);i.push(function(e,r){e?n(e):t(r)});try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),uQ&&Object.defineProperty(t,uQ,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,uy(e))}function u0(e,t){if(!e){var n=Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function u1(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!=typeof r)throw TypeError("The last argument must be of type Function");var i=this,a=function(){return r.apply(i,arguments)};e.apply(this,t).then(function(e){c3.nextTick(a.bind(null,null,e))},function(e){c3.nextTick(u0.bind(null,e,a))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,uy(e)),t}uX.custom=uQ;var u3,u2,u5=r_(Object.freeze({__proto__:null,_extend:uJ,callbackify:u1,debuglog:uS,default:{inherits:uf,_extend:uJ,log:uG,isBuffer:uF,isPrimitive:uz,isFunction:uH,isError:uK,isDate:uW,isObject:u$,isRegExp:uB,isUndefined:uU,isSymbol:uj,isString:uD,isNumber:uL,isNullOrUndefined:uR,isNull:uP,isBoolean:uM,isArray:uk,inspect:u_,deprecate:uE,format:ub,debuglog:uS,promisify:uX,callbackify:u1},deprecate:uE,format:ub,inherits:uf,inspect:u_,isArray:uk,isBoolean:uM,isBuffer:uF,isDate:uW,isError:uK,isFunction:uH,isNull:uP,isNullOrUndefined:uR,isNumber:uL,isObject:u$,isPrimitive:uz,isRegExp:uB,isString:uD,isSymbol:uj,isUndefined:uU,log:uG,promisify:uX}));function u4(e,t){u6(e,t),u8(e)}function u8(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function u6(e,t){e.emit("error",t)}var u9={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,c3.nextTick(u6,this,e)):c3.nextTick(u6,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?n._writableState?n._writableState.errorEmitted?c3.nextTick(u8,n):(n._writableState.errorEmitted=!0,c3.nextTick(u4,n,e)):c3.nextTick(u4,n,e):t?(c3.nextTick(u8,n),t(e)):c3.nextTick(u8,n)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}},u7={},he={};function ht(e,t,n){n||(n=Error);var r=function(e){function n(n,r,i){return e.call(this,"string"==typeof t?t:t(n,r,i))||this}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e,n}(n);r.prototype.name=n.name,r.prototype.code=e,he[e]=r}function hn(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}ht("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),ht("ERR_INVALID_ARG_TYPE",function(e,t,n){if("string"==typeof t&&(i="not ",t.substr(0,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",o=" argument",(void 0===s||s>e.length)&&(s=e.length),e.substring(s-o.length,s)===o)a="The ".concat(e," ").concat(r," ").concat(hn(t,"type"));else{var r,i,a,o,s,l,c=("number"!=typeof l&&(l=0),l+1>e.length||-1===e.indexOf(".",l))?"argument":"property";a='The "'.concat(e,'" ').concat(c," ").concat(r," ").concat(hn(t,"type"))}return a+". Received type ".concat(typeof n)},TypeError),ht("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),ht("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),ht("ERR_STREAM_PREMATURE_CLOSE","Premature close"),ht("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),ht("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),ht("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),ht("ERR_STREAM_WRITE_AFTER_END","write after end"),ht("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ht("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),ht("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),u7.codes=he;var hr,hi,ha,ho,hs=u7.codes.ERR_INVALID_OPT_VALUE,hl=function(e,t,n,r){var i=null!=t.highWaterMark?t.highWaterMark:r?t[n]:null;if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new hs(r?n:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384},hc=r_(Object.freeze({__proto__:null,default:"function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}})),hd=function(e,t){if(hu("noDeprecation"))return e;var n=!1;return function(){if(!n){if(hu("throwDeprecation"))throw Error(t);hu("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}};function hu(e){try{if(!rx.localStorage)return!1}catch(e){return!1}var t=rx.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}function hh(){if(hi)return hr;function e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){var n=t.entry;for(t.entry=null;n;){var r=n.callback;e.pendingcb--,r(void 0),n=n.next}e.corkedRequestsFree.next=t}}hi=1,hr=w,w.WritableState=m;var t,n,r=uw.Buffer,i=(void 0!==rx?rx:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},a=u7.codes,o=a.ERR_INVALID_ARG_TYPE,s=a.ERR_METHOD_NOT_IMPLEMENTED,l=a.ERR_MULTIPLE_CALLBACK,c=a.ERR_STREAM_CANNOT_PIPE,d=a.ERR_STREAM_DESTROYED,u=a.ERR_STREAM_NULL_VALUES,h=a.ERR_STREAM_WRITE_AFTER_END,f=a.ERR_UNKNOWN_ENCODING,p=u9.errorOrDestroy;function g(){}function m(n,r,i){t=t||hf(),n=n||{},"boolean"!=typeof i&&(i=r instanceof t),this.objectMode=!!n.objectMode,i&&(this.objectMode=this.objectMode||!!n.writableObjectMode),this.highWaterMark=hl(this,n,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===n.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=n.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new l;if(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t)--n.pendingcb,r?(c3.nextTick(i,t),c3.nextTick(x,e,n),e._writableState.errorEmitted=!0,p(e,t)):(i(t),e._writableState.errorEmitted=!0,p(e,t),x(e,n));else{var a=E(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||b(e,n),r?c3.nextTick(v,e,n,a,i):v(e,n,a,i)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==n.emitClose,this.autoDestroy=!!n.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function w(e){var r=this instanceof(t=t||hf());if(!r&&!n.call(w,this))return new w(e);this._writableState=new m(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),um.call(this)}function y(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new d("write")):n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function v(e,t,n,r){n||0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain")),t.pendingcb--,r(),x(e,t)}function b(t,n){n.bufferProcessing=!0;var r=n.bufferedRequest;if(t._writev&&r&&r.next){var i=Array(n.bufferedRequestCount),a=n.corkedRequestsFree;a.entry=r;for(var o=0,s=!0;r;)i[o]=r,r.isBuf||(s=!1),r=r.next,o+=1;i.allBuffers=s,y(t,n,!0,n.length,i,"",a.finish),n.pendingcb++,n.lastBufferedRequest=null,a.next?(n.corkedRequestsFree=a.next,a.next=null):n.corkedRequestsFree=new e(n),n.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,d=r.callback;if(y(t,n,!1,n.objectMode?1:l.length,l,c,d),r=r.next,n.bufferedRequestCount--,n.writing)break}null===r&&(n.lastBufferedRequest=null)}n.bufferedRequest=r,n.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final(function(n){t.pendingcb--,n&&p(e,n),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function x(e,t){var n=E(t);if(n&&(t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,c3.nextTick(C,e,t))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}return hc(w,um),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:hd(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(e){return!!n.call(this,e)||this===w&&e&&e._writableState instanceof m}})):n=function(e){return e instanceof this},w.prototype.pipe=function(){p(this,new c)},w.prototype.write=function(e,t,n){var a,s,l,c,d,f,m,w=this._writableState,v=!1,b=!w.objectMode&&(m=e,r.isBuffer(m)||m instanceof i);return b&&!r.isBuffer(e)&&(a=e,e=r.from(a)),"function"==typeof t&&(n=t,t=null),b?t="buffer":t||(t=w.defaultEncoding),"function"!=typeof n&&(n=g),w.ending?(s=n,p(this,l=new h),c3.nextTick(s,l)):(b||(c=e,d=n,null===c?f=new u:"string"==typeof c||w.objectMode||(f=new o("chunk",["string","Buffer"],c)),!f||(p(this,f),c3.nextTick(d,f),0)))&&(w.pendingcb++,v=function(e,t,n,i,a,o){if(!n){var s,l,c=(s=i,l=a,t.objectMode||!1===t.decodeStrings||"string"!=typeof s||(s=r.from(s,l)),s);i!==c&&(n=!0,a="buffer",i=c)}var d=t.objectMode?1:i.length;t.length+=d;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:a,isBuf:n,callback:o,next:null},h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,d,i,a,o);return u}(this,w,b,e,t,n)),v},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||b(this,e))},w.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new f(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(e,t,n){n(new s("_write()"))},w.prototype._writev=null,w.prototype.end=function(e,t,n){var r,i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||(r=n,i.ending=!0,x(this,i),r&&(i.finished?c3.nextTick(r):this.once("finish",r)),i.ended=!0,this.writable=!1),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),w.prototype.destroy=u9.destroy,w.prototype._undestroy=u9.undestroy,w.prototype._destroy=function(e,t){t(e)},hr}function hf(){if(ho)return ha;ho=1;var e=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};ha=o;var t=hN(),n=hh();hc(o,t);for(var r=e(n.prototype),i=0;i<r.length;i++){var a=r[i];o.prototype[a]||(o.prototype[a]=n.prototype[a])}function o(e){if(!(this instanceof o))return new o(e);t.call(this,e),n.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||c3.nextTick(l,this)}function l(e){e.end()}return Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),ha}var hp=n5.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function hg(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!hp(e))throw Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=hw;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=hy;break;default:return void(this.write=hm)}this.charBuffer=new n5(6),this.charReceived=0,this.charLength=0}function hm(e){return e.toString(this.encoding)}function hw(e){this.charReceived=e.length%2,this.charLength=2*!!this.charReceived}function hy(e){this.charReceived=e.length%3,this.charLength=3*!!this.charReceived}hg.prototype.write=function(e){for(var t,n="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((t=(n=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(n.length-1))>=55296&&t<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return n;break}this.charLength+=this.surrogateSize,n=""}this.detectIncompleteChar(e);var i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(n+=e.toString(this.encoding,0,i)).length-1,(t=n.charCodeAt(i))>=55296&&t<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),n.substring(0,i)}return n},hg.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},hg.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t};var hv=r_(Object.freeze({__proto__:null,StringDecoder:hg})),hb=u7.codes.ERR_STREAM_PREMATURE_CLOSE;function hE(){}var hC,hx,hS,h_,hA,hT,hI=function e(t,n,r){if("function"==typeof n)return e(t,null,n);n||(n={}),i=r||hE,a=!1,r=function(){if(!a){a=!0;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(this,t)}};var i,a,o=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||d()},c=t._writableState&&t._writableState.finished,d=function(){s=!1,c=!0,o||r.call(t)},u=t._readableState&&t._readableState.endEmitted,h=function(){o=!1,u=!0,s||r.call(t)},f=function(e){r.call(t,e)},p=function(){var e;return o&&!u?(t._readableState&&t._readableState.ended||(e=new hb),r.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new hb),r.call(t,e)):void 0},g=function(){t.req.on("finish",d)};return t.setHeader&&"function"==typeof t.abort?(t.on("complete",d),t.on("abort",p),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",h),t.on("finish",d),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",d),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",d),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",d),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",p)}};function hN(){if(hT)return hA;hT=1,hA=w,w.ReadableState=m,dR.EventEmitter;var e=function(e,t){return e.listeners(t).length},t=uw.Buffer,n=(void 0!==rx?rx:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},r,i,a,o,s=u5&&u5.debuglog?u5.debuglog("stream"):function(){},l=function(){if(u2)return u3;function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach(function(e){var r,a,o;r=t,a=e,o=i[e],(a=n(a))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}u2=1;var r=uw.Buffer,i=u5.inspect,a=i&&i.custom||"inspect";return u3=function(){var e;function o(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),this.head=null,this.tail=null,this.length=0}return e=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return r.alloc(0);for(var t,n,i=r.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=a.data,n=o,r.prototype.copy.call(t,i,n),o+=a.data.length,a=a.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?r+=i:r+=i.slice(0,e),0==(e-=a)){a===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(a));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=r.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,o),0==(e-=o)){o===a.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(o));break}++i}return this.length-=i,t}},{key:a,value:function(e,n){return i(this,t(t({},n),{},{depth:0,customInspect:!1}))}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}(o.prototype,e),Object.defineProperty(o,"prototype",{writable:!1}),o}()}(),c=u7.codes,d=c.ERR_INVALID_ARG_TYPE,u=c.ERR_STREAM_PUSH_AFTER_EOF,h=c.ERR_METHOD_NOT_IMPLEMENTED,f=c.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;hc(w,um);var p=u9.errorOrDestroy,g=["error","close","destroy","pause","resume"];function m(e,t,n){r=r||hf(),e=e||{},"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=hl(this,e,"readableHighWaterMark",n),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(i||(i=hv.StringDecoder),this.decoder=new i(e.encoding),this.encoding=e.encoding)}function w(e){if(r=r||hf(),!(this instanceof w))return new w(e);var t=this instanceof r;this._readableState=new m(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),um.call(this)}function y(e,r,i,a,o){s("readableAddChunk",r);var l,c,h,g,m,w=e._readableState;if(null===r)w.reading=!1,function(e,t){if(s("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?E(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,C(e)))}}(e,w);else{if(o||(l=w,c=r,t.isBuffer(c)||c instanceof n||"string"==typeof c||void 0===c||l.objectMode||(h=new d("chunk",["string","Buffer","Uint8Array"],c)),m=h),m)p(e,m);else if(w.objectMode||r&&r.length>0)if("string"==typeof r||w.objectMode||Object.getPrototypeOf(r)===t.prototype||(g=r,r=t.from(g)),a)w.endEmitted?p(e,new f):v(e,w,r,!0);else if(w.ended)p(e,new u);else{if(w.destroyed)return!1;w.reading=!1,w.decoder&&!i?(r=w.decoder.write(r),w.objectMode||0!==r.length?v(e,w,r,!1):x(e,w)):v(e,w,r,!1)}else a||(w.reading=!1,x(e,w))}return!w.ended&&(w.length<w.highWaterMark||0===w.length)}function v(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&E(e)),x(e,t)}function b(e,t){var n;return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&((n=e)>=0x40000000?n=0x40000000:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),t.highWaterMark=n),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;s("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(s("emitReadable",t.flowing),t.emittedReadable=!0,c3.nextTick(C,e))}function C(e){var t=e._readableState;s("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,I(e)}function x(e,t){t.readingMore||(t.readingMore=!0,c3.nextTick(S,e,t))}function S(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(s("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function _(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function A(e){s("readable nexttick read 0"),e.read(0)}function T(e,t){s("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(s("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){var n;return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n)}function O(e){var t=e._readableState;s("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,c3.nextTick(k,t,e))}function k(e,t){if(s("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function M(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1}return Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=u9.destroy,w.prototype._undestroy=u9.undestroy,w.prototype._destroy=function(e,t){t(e)},w.prototype.push=function(e,n){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((n=n||i.defaultEncoding)!==i.encoding&&(e=t.from(e,n),n=""),r=!0),y(this,e,n,!1,r)},w.prototype.unshift=function(e){return y(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){i||(i=hv.StringDecoder);var t=new i(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this},w.prototype.read=function(e){s("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return s("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):E(this),null;if(0===(e=b(e,t))&&t.ended)return 0===t.length&&O(this),null;var r,i=t.needReadable;return s("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&s("length less than watermark",i=!0),t.ended||t.reading?s("reading or ended",i=!1):i&&(s("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=b(n,t))),null===(r=e>0?N(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==r&&this.emit("data",r),r},w.prototype._read=function(e){p(this,new h("_read()"))},w.prototype.pipe=function(t,n){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,s("pipe count=%d opts=%j",i.pipesCount,n);var a=n&&!1===n.end||t===c3.stdout||t===c3.stderr?g:o;function o(){s("onend"),t.end()}i.endEmitted?c3.nextTick(a):r.once("end",a),t.on("unpipe",function e(n,a){s("onunpipe"),n===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,s("cleanup"),t.removeListener("close",h),t.removeListener("finish",f),t.removeListener("drain",l),t.removeListener("error",u),t.removeListener("unpipe",e),r.removeListener("end",o),r.removeListener("end",g),r.removeListener("data",d),c=!0,i.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l())});var l=function(){var t=r._readableState;s("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e(r,"data")&&(t.flowing=!0,I(r))};t.on("drain",l);var c=!1;function d(e){s("ondata");var n=t.write(e);s("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==M(i.pipes,t))&&!c&&(s("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function u(n){s("onerror",n),g(),t.removeListener("error",u),0===e(t,"error")&&p(t,n)}function h(){t.removeListener("finish",f),g()}function f(){s("onfinish"),t.removeListener("close",h),g()}function g(){s("unpipe"),r.unpipe(t)}return r.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(t,"error",u),t.once("close",h),t.once("finish",f),t.emit("pipe",r),i.flowing||(s("pipe resume"),r.resume()),t},w.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=M(t.pipes,e);return -1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},w.prototype.on=function(e,t){var n=um.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,s("on readable",r.length,r.reading),r.length?E(this):r.reading||c3.nextTick(A,this))),n},w.prototype.addListener=w.prototype.on,w.prototype.removeListener=function(e,t){var n=um.prototype.removeListener.call(this,e,t);return"readable"===e&&c3.nextTick(_,this),n},w.prototype.removeAllListeners=function(e){var t=um.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||c3.nextTick(_,this),t},w.prototype.resume=function(){var e=this._readableState;return e.flowing||(s("resume"),e.flowing=!e.readableListening,e.resumeScheduled||(e.resumeScheduled=!0,c3.nextTick(T,this,e))),e.paused=!1,this},w.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(s("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){s("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<g.length;a++)e.on(g[a],this.emit.bind(this,g[a]));return this._read=function(t){s("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return void 0===a&&(a=function(){if(hx)return hC;function e(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}hx=1;var t,n=Symbol("lastResolve"),r=Symbol("lastReject"),i=Symbol("error"),a=Symbol("ended"),o=Symbol("lastPromise"),s=Symbol("handlePromise"),l=Symbol("stream");function c(e,t){return{value:e,done:t}}function d(e){var t=e[n];if(null!==t){var i=e[l].read();null!==i&&(e[o]=null,e[n]=null,e[r]=null,t(c(i,!1)))}}function u(e){c3.nextTick(d,e)}var h=Object.getPrototypeOf(function(){}),f=Object.setPrototypeOf((e(t={get stream(){return this[l]},next:function(){var e,t=this,n=this[i];if(null!==n)return Promise.reject(n);if(this[a])return Promise.resolve(c(void 0,!0));if(this[l].destroyed)return new Promise(function(e,n){c3.nextTick(function(){t[i]?n(t[i]):e(c(void 0,!0))})});var r,d=this[o];if(d)r=new Promise((e=this,function(t,n){d.then(function(){e[a]?t(c(void 0,!0)):e[s](t,n)},n)}));else{var u=this[l].read();if(null!==u)return Promise.resolve(c(u,!1));r=new Promise(this[s])}return this[o]=r,r}},Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var e=this;return new Promise(function(t,n){e[l].destroy(null,function(e){e?n(e):t(c(void 0,!0))})})}),t),h);return hC=function(t){var d,h=Object.create(f,(e(d={},l,{value:t,writable:!0}),e(d,n,{value:null,writable:!0}),e(d,r,{value:null,writable:!0}),e(d,i,{value:null,writable:!0}),e(d,a,{value:t._readableState.endEmitted,writable:!0}),e(d,s,{value:function(e,t){var i=h[l].read();i?(h[o]=null,h[n]=null,h[r]=null,e(c(i,!1))):(h[n]=e,h[r]=t)},writable:!0}),d));return h[o]=null,hI(t,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=h[r];return null!==t&&(h[o]=null,h[n]=null,h[r]=null,t(e)),void(h[i]=e)}var s=h[n];null!==s&&(h[o]=null,h[n]=null,h[r]=null,s(c(void 0,!0))),h[a]=!0}),t.on("readable",u.bind(null,h)),h}}()),a(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),w._fromList=N,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(e,t){return void 0===o&&(o=h_?hS:(h_=1,hS=function(){throw Error("Readable.from is not available in the browser")})),o(w,e,t)}),hA}var hO=u7.codes,hk=hO.ERR_METHOD_NOT_IMPLEMENTED,hM=hO.ERR_MULTIPLE_CALLBACK,hP=hO.ERR_TRANSFORM_ALREADY_TRANSFORMING,hR=hO.ERR_TRANSFORM_WITH_LENGTH_0,hL=hf();function hD(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new hM);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function hj(e){if(!(this instanceof hj))return new hj(e);hL.call(this,e),this._transformState={afterTransform:hD.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",hU)}function hU(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?hB(this,null,null):this._flush(function(t,n){hB(e,t,n)})}function hB(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new hR;if(e._transformState.transforming)throw new hP;return e.push(null)}function h$(e){if(!(this instanceof h$))return new h$(e);hj.call(this,e)}hc(hj,hL),hj.prototype.push=function(e,t){return this._transformState.needTransform=!1,hL.prototype.push.call(this,e,t)},hj.prototype._transform=function(e,t,n){n(new hk("_transform()"))},hj.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},hj.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},hj.prototype._destroy=function(e,t){hL.prototype._destroy.call(this,e,function(e){t(e)})},hc(h$,hj),h$.prototype._transform=function(e,t,n){n(null,e)};var hW=u7.codes,hK=hW.ERR_MISSING_ARGS,hH=hW.ERR_STREAM_DESTROYED;function hz(e){if(e)throw e}function hF(e){e()}function hV(e,t){return e.pipe(t)}fe=ug.exports,(fe=ug.exports=hN()).Stream=fe,fe.Readable=fe,fe.Writable=hh(),fe.Duplex=hf(),fe.Transform=hj,fe.PassThrough=h$,fe.finished=hI,fe.pipeline=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i,a=(r=t).length?"function"!=typeof r[r.length-1]?hz:r.pop():hz;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new hK("streams");var o=t.map(function(e,n){var r,s,l,c,d,u,h=n<t.length-1;return r=n>0,l=s=function(e){i||(i=e),e&&o.forEach(hF),h||(o.forEach(hF),a(i))},c=!1,s=function(){c||(c=!0,l.apply(void 0,arguments))},d=!1,e.on("close",function(){d=!0}),void 0===h7&&(h7=hI),h7(e,{readable:h,writable:r},function(e){if(e)return s(e);d=!0,s()}),u=!1,function(t){if(!d&&!u)return u=!0,e.setHeader&&"function"==typeof e.abort?e.abort():"function"==typeof e.destroy?e.destroy():void s(t||new hH("pipe"))}});return t.reduce(hV)};var hq=ug.exports,hY={},hG={exports:{}},hJ=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw TypeError("need wrapper function");return Object.keys(t).forEach(function(e){r[e]=t[e]}),r;function r(){for(var e=Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(e){r[e]=i[e]}),r}};function hZ(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function hQ(e){var t=function(){if(t.called)throw Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)};return t.onceError=(e.name||"Function wrapped with `once`")+" shouldn't be called more than once",t.called=!1,t}hG.exports=hJ(hZ),hG.exports.strict=hJ(hQ),hZ.proto=hZ(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return hZ(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return hQ(this)},configurable:!0})});var hX=hG.exports,h0={};Object.defineProperty(h0,"__esModule",{value:!0}),h0.Substream=void 0;let h1=hq;class h3 extends h1.Duplex{constructor({parent:e,name:t}){super({objectMode:!0}),this._parent=e,this._name=t}_read(){}_write(e,t,n){this._parent.push({name:this._name,data:e}),n()}}h0.Substream=h3;var h2=rx&&rx.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hY,"__esModule",{value:!0}),hY.ObjectMultiplex=void 0;let h5=hq,h4=h2(hX),h8=Symbol("IGNORE_SUBSTREAM");hY.ObjectMultiplex=class extends h5.Duplex{constructor(e={}){super(Object.assign(Object.assign({},e),{objectMode:!0})),this._substreams={}}createStream(e){var t;let n;if(this.destroyed)throw Error(`ObjectMultiplex - parent stream for name "${e}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw Error(`ObjectMultiplex - parent stream for name "${e}" already ended`);if(!e)throw Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw Error(`ObjectMultiplex - Substream for name "${e}" already exists`);let r=new h0.Substream({parent:this,name:e});return this._substreams[e]=r,t=e=>r.destroy(e||void 0),n=(0,h4.default)(t),(0,h5.finished)(this,{readable:!1},n),(0,h5.finished)(this,{writable:!1},n),r}ignoreStream(e){if(!e)throw Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=h8}_read(){}_write(e,t,n){let{name:r,data:i}=e;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),n();let a=this._substreams[r];return a?a!==h8&&a.push(i):console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n()}};var h6=rS(hY.ObjectMultiplex);let h9=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;h9.writable=e=>h9(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,h9.readable=e=>h9(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,h9.duplex=e=>h9.writable(e)&&h9.readable(e),h9.transform=e=>h9.duplex(e)&&"function"==typeof e._transform;var h7,fe,ft,fn=class extends up{constructor(e,{jsonRpcStreamName:t,logger:n=console,maxEventListeners:r=100,rpcMiddleware:i=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:i}),!h9.duplex(e))throw Error(s_());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const a=new h6;hq.pipeline(e,a,e,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=function(e={}){let t={},n=new hq.Duplex({objectMode:!0,read:()=>{},write:function(i,a,o){let s=null;try{i.id?function(e){let{id:n}=e;if(null===n)return;let r=t[n];if(!r)return console.warn(`StreamMiddleware - Unknown response id "${n}"`);delete t[n],Object.assign(r.res,e),setTimeout(r.end)}(i):(e?.retryOnMessage&&i.method===e.retryOnMessage&&Object.values(t).forEach(({req:e,retryCount:r=0})=>{var i;if(!e.id)return;if(r>=3)throw Error(`StreamMiddleware - Retry limit exceeded for request id "${e.id}"`);let a=t[e.id];a&&(a.retryCount=r+1),i=e,n.push(i)}),r.emit("notification",i))}catch(e){s=e}o(s)}}),r=new d2;return{events:r,middleware:(e,r,i,a)=>{var o;t[e.id]={req:e,res:r,next:i,end:a},o=e,n.push(o)},stream:n}}({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),hq.pipeline(this._jsonRpcConnection.stream,a.createStream(t),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",t=>{let{method:n,params:r}=t;"metamask_accountsChanged"===n?this._handleAccountsChanged(r):"metamask_unlockStateChanged"===n?this._handleUnlockStateChanged(r):"metamask_chainChanged"===n?this._handleChainChanged(r):d8.includes(n)?this.emit("message",{type:n,data:r}):"METAMASK_STREAM_FAILURE"===n&&e.destroy(Error(sC()))})}async _initializeStateAsync(){let e;try{e=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(e)}_handleStreamDisconnect(e,t){let n=`MetaMask: Lost connection to "${e}".`;t?.stack&&(n+=`
${t.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,t?t.message:void 0)}_handleChainChanged({chainId:e,networkVersion:t}={}){d9(e)&&t&&"string"==typeof t?"loading"===t?this._handleDisconnect(!0):super._handleChainChanged({chainId:e}):this._log.error(sA(),{chainId:e,networkVersion:t})}},fr=class extends fn{constructor(e,{jsonRpcStreamName:t="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:i}={}){if(super(e,{jsonRpcStreamName:t,logger:n,maxEventListeners:r,rpcMiddleware:((e=console)=>{var t;let n;return[(e,t,n,r)=>{let i=e.id,a=sB=(sB+1)%0xffffffff;e.id=a,t.id=a,n(n=>{e.id=i,t.id=i,n()})},(t=e,(e,n,r)=>{"string"==typeof e.method&&e.method||(n.error=d_(-32600,{message:"The request 'method' must be a non-empty string.",data:e})),r(e=>{let{error:r}=n;return r&&t.error(`MetaMask - RPC Error: ${r.message}`,r),e()})}),(n={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1},(t,r,i)=>{n.ethDecryptDeprecation||"eth_decrypt"!==t.method?n.ethGetEncryptionPublicKeyDeprecation||"eth_getEncryptionPublicKey"!==t.method?!n.walletWatchAssetNFTExperimental&&"wallet_watchAsset"===t.method&&["ERC721","ERC1155"].includes(t.params?.type||"")&&(e.warn(sj.walletWatchAssetNFTExperimental),n.walletWatchAssetNFTExperimental=!0):(e.warn(sj.ethGetEncryptionPublicKeyDeprecation),n.ethGetEncryptionPublicKeyDeprecation=!0):(e.warn(sj.ethDecryptDeprecation),n.ethDecryptDeprecation=!0),i()})]})(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},ua(this,ft,void 0),this._initializeStateAsync(),uo(this,ft,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",e=>{let{method:t}=e;d8.includes(t)&&(this.emit("data",e),this.emit("notification",e.params.result))}),i)if("complete"===document.readyState)ue(this._rpcEngine,this._log);else{const e=()=>{ue(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",e)};window.addEventListener("DOMContentLoaded",e)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(sk),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(sM),this._sentWarnings.networkVersion=!0),ui(this,ft)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(sP),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(e,t){this._rpcRequest(e,t)}addListener(e,t){return this._warnOfDeprecation(e),super.addListener(e,t)}on(e,t){return this._warnOfDeprecation(e),super.on(e,t)}once(e,t){return this._warnOfDeprecation(e),super.once(e,t)}prependListener(e,t){return this._warnOfDeprecation(e),super.prependListener(e,t)}prependOnceListener(e,t){return this._warnOfDeprecation(e),super.prependOnceListener(e,t)}_handleDisconnect(e,t){super._handleDisconnect(e,t),ui(this,ft)&&!e&&uo(this,ft,null)}_warnOfDeprecation(e){!1===this._sentWarnings?.events[e]&&(this._log.warn(sD[e]),this._sentWarnings.events[e]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(sR),this._sentWarnings.enable=!0),new Promise((e,t)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},d6(e,t))}catch(e){t(e)}})}send(e,t){return this._sentWarnings.send||(this._log.warn(sL),this._sentWarnings.send=!0),"string"!=typeof e||t&&!Array.isArray(t)?e&&"object"==typeof e&&"function"==typeof t?this._rpcRequest(e,t):this._sendSync(e):new Promise((n,r)=>{try{this._rpcRequest({method:e,params:t},d6(n,r,!1))}catch(e){r(e)}})}_sendSync(e){let t;switch(e.method){case"eth_accounts":t=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":t=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(e,d7),t=!0;break;case"net_version":t=ui(this,ft)??null;break;default:throw Error(sS(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:t}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise(e=>{this.on("_initialized",()=>e())}),this._state.isUnlocked),requestBatch:async e=>{if(!Array.isArray(e))throw d_(-32600,{message:"Batch requests must be made with an array of request objects.",data:e});return new Promise((t,n)=>{this._rpcRequest(e,d6(t,n))})}},{get:(e,t,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(sU),this._sentWarnings.experimentalMethods=!0),Reflect.get(e,t,...n))})}_handleChainChanged({chainId:e,networkVersion:t}={}){super._handleChainChanged({chainId:e,networkVersion:t}),this._state.isConnected&&t!==ui(this,ft)&&(uo(this,ft,t),this._state.initialized&&this.emit("networkChanged",ui(this,ft)))}};ft=new WeakMap;let fi=(0,nU.default)("MM_SDK");fi.color="#FFAC1C";var fa={},fo={};Object.defineProperty(fo,"__esModule",{value:!0}),fo.EthereumProviderError=fo.EthereumRpcError=void 0;class fs extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==n&&(this.data=n)}serialize(){let e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return dw.default(this.serialize(),fl,2)}}function fl(e,t){if("[Circular]"!==t)return t}fo.EthereumRpcError=fs,fo.EthereumProviderError=class extends fs{constructor(e,t,n){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,n)}};var fc={},fd={};Object.defineProperty(fd,"__esModule",{value:!0}),fd.errorValues=fd.errorCodes=void 0,fd.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},fd.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;let t=fd.errorCodes.rpc.internal,n={code:t,message:r(t)};function r(t,n="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(t)){var i;let n=t.toString();if(o(fd.errorValues,n))return fd.errorValues[n].message;if((i=t)>=-32099&&i<=-32e3)return e.JSON_RPC_SERVER_ERROR_MESSAGE}return n}function i(e){var t;if(!Number.isInteger(e))return!1;let n=e.toString();return!!fd.errorValues[n]||!!((t=e)>=-32099&&t<=-32e3)}function a(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.getMessageFromCode=r,e.isValidCode=i,e.serializeError=function(e,{fallbackError:t=n,shouldIncludeStack:s=!1}={}){if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw Error("Must provide fallback error with integer number code and string message.");if(e instanceof fo.EthereumRpcError)return e.serialize();let l={};if(e&&"object"==typeof e&&!Array.isArray(e)&&o(e,"code")&&i(e.code))l.code=e.code,e.message&&"string"==typeof e.message?(l.message=e.message,o(e,"data")&&(l.data=e.data)):(l.message=r(l.code),l.data={originalError:a(e)});else{l.code=t.code;let n=null==e?void 0:e.message;l.message=n&&"string"==typeof n?n:t.message,l.data={originalError:a(e)}}let c=null==e?void 0:e.stack;return s&&e&&c&&"string"==typeof c&&(l.stack=c),l}}(fc);var fu={};function fh(e,t){let[n,r]=fp(t);return new fo.EthereumRpcError(e,n||fc.getMessageFromCode(e),r)}function ff(e,t){let[n,r]=fp(t);return new fo.EthereumProviderError(e,n||fc.getMessageFromCode(e),r)}function fp(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){let{message:t,data:n}=e;if(t&&"string"!=typeof t)throw Error("Must specify string message.");return[t||void 0,n]}}return[]}Object.defineProperty(fu,"__esModule",{value:!0}),fu.ethErrors=void 0,fu.ethErrors={rpc:{parse:e=>fh(fd.errorCodes.rpc.parse,e),invalidRequest:e=>fh(fd.errorCodes.rpc.invalidRequest,e),invalidParams:e=>fh(fd.errorCodes.rpc.invalidParams,e),methodNotFound:e=>fh(fd.errorCodes.rpc.methodNotFound,e),internal:e=>fh(fd.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw Error('"code" must be an integer such that: -32099 <= code <= -32005');return fh(t,e)},invalidInput:e=>fh(fd.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>fh(fd.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>fh(fd.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>fh(fd.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>fh(fd.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>fh(fd.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>ff(fd.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>ff(fd.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>ff(fd.errorCodes.provider.unsupportedMethod,e),disconnected:e=>ff(fd.errorCodes.provider.disconnected,e),chainDisconnected:e=>ff(fd.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum Provider custom errors must provide single object argument.");let{code:t,message:n,data:r}=e;if(!n||"string"!=typeof n)throw Error('"message" must be a nonempty string');return new fo.EthereumProviderError(t,n,r)}}},Object.defineProperty(fa,"__esModule",{value:!0}),fa.getMessageFromCode=fa.serializeError=fa.EthereumProviderError=fa.EthereumRpcError=fa.ethErrors=fa.errorCodes=void 0,Object.defineProperty(fa,"EthereumRpcError",{enumerable:!0,get:function(){return fo.EthereumRpcError}}),Object.defineProperty(fa,"EthereumProviderError",{enumerable:!0,get:function(){return fo.EthereumProviderError}}),Object.defineProperty(fa,"serializeError",{enumerable:!0,get:function(){return fc.serializeError}}),Object.defineProperty(fa,"getMessageFromCode",{enumerable:!0,get:function(){return fc.getMessageFromCode}}),Object.defineProperty(fa,"ethErrors",{enumerable:!0,get:function(){return fu.ethErrors}}),Object.defineProperty(fa,"errorCodes",{enumerable:!0,get:function(){return fd.errorCodes}});var fg={exports:{}};fg.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=n(18);t.default=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),a=e.getVersionPrecision(n),o=Math.max(i,a),s=0,l=e.map([t,n],function(t){var n=o-e.getVersionPrecision(t),r=t+Array(n+1).join(".0");return e.map(r.split("."),function(e){return Array(20-e.length).join("0")+e}).reverse()});for(r&&(s=o-Math.min(i,a)),o-=1;o>=s;){if(l[0][o]>l[1][o])return 1;if(l[0][o]===l[1][o]){if(o===s)return 0;o-=1}else if(l[0][o]<l[1][o])return -1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign.apply(Object,[e].concat(n))},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}(),e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},a=n(18);t.default=function(){function e(){}return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e,[{key:"BROWSER_MAP",get:function(){return a.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return a.ENGINE_MAP}},{key:"OS_MAP",get:function(){return a.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return a.PLATFORMS_MAP}}]),e}(),e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=l(n(92)),i=l(n(93)),a=l(n(94)),o=l(n(95)),s=l(n(17));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(a.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(o.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},a=0;if(Object.keys(e).forEach(function(t){var o=e[t];"string"==typeof o?(i[t]=o,a+=1):"object"==typeof o&&(n[t]=o,r+=1)}),r>0){var o=Object.keys(n),l=s.default.find(o,function(e){return t.isOS(e)});if(l){var c=this.satisfies(n[l]);if(void 0!==c)return c}var d=s.default.find(o,function(e){return t.isPlatform(e)});if(d){var u=this.satisfies(n[d]);if(void 0!==u)return u}}if(a>0){var h=Object.keys(i),f=s.default.find(h,function(e){return t.isBrowser(e,!0)});if(void 0!==f)return this.compareVersion(i[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}(),e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=/version\/(\d+(\.?_?\d+)+)/i;t.default=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}],e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18);t.default=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:a.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:a.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:a.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:a.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:a.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:a.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:a.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:a.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:a.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:a.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.PlayStation4,version:t}}}],e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18);t.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:a.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:a.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}}],e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18);t.default=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:a.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:a.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:a.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:a.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:a.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:a.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:a.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}],e.exports=t.default}});var fm=rS(fg.exports);let fw="provider_update",fy="connectWithResponse",fv="connection_status",fb="service_status";class fE{constructor({shouldSetOnWindow:e,connectionStream:t,shouldSendMetadata:n=!1,shouldShimWeb3:r,sdkInstance:i}){const a=new fS({connectionStream:t,shouldSendMetadata:n,shouldSetOnWindow:e,shouldShimWeb3:r,autoRequestAccounts:!1}),o=new Proxy(a,{deleteProperty:()=>!0});if(this.provider=o,this.sdkInstance=i,e&&"undefined"!=typeof window)try{window.ethereum=a,window.dispatchEvent(new Event("ethereum#initialized"))}catch(e){fi("[Ethereum] Unable to set global provider - window.ethereum may be read-only",e)}if(r&&"undefined"!=typeof window)try{!function(e,t=console){let n=!1,r=!1;if(!window.web3){let i="__isMetaMaskShim__",a={currentProvider:e};Object.defineProperty(a,i,{value:!0,enumerable:!0,configurable:!1,writable:!1}),a=new Proxy(a,{get:(a,o,...s)=>("currentProvider"!==o||n?"currentProvider"===o||o===i||r||(r=!0,t.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),e.request({method:"metamask_logWeb3ShimUsage"}).catch(e=>{t.debug("MetaMask: Failed to log web3 shim usage.",e)})):(n=!0,t.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(a,o,...s)),set:(...e)=>(t.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...e))}),Object.defineProperty(window,"web3",{value:a,enumerable:!1,configurable:!0,writable:!0})}}(this.provider)}catch(e){fi("[Ethereum] Unable to shim web3 - window.web3 may be read-only",e)}this.provider.on("display_uri",e=>{this.sdkInstance.emit("display_uri",e)}),this.provider.on("_initialized",()=>{let e={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit("initialized",e),fi("[Ethereum: constructor()] provider initialized",e)})}static init(e){var t;return fi("[Ethereum: init()] Initializing Ethereum service"),this.instance=new fE(e),null==(t=this.instance)?void 0:t.provider}static destroy(){}static getInstance(){var e;if(!(null==(e=this.instance)?void 0:e.provider))throw Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(null==(e=this.instance)?void 0:e.provider))throw Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}class fC{constructor({useDeepLink:e,preferredOpenLink:t,debug:n=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=t,this.state.debug=n}openDeeplink(e,t,n){return function(e,t,n,r){let{state:i}=e;fi(`[PlatfformManager: openDeeplink()] universalLink --> ${t}`),fi(`[PlatfformManager: openDeeplink()] deepLink --> ${n}`);try{if(i.preferredOpenLink)return void i.preferredOpenLink(i.useDeeplink?n:t,r);if(fi(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${i.useDeeplink} link=${i.useDeeplink?n:t}`),i.useDeeplink)"undefined"!=typeof window&&(window.location.href=n);else if("undefined"!=typeof document){let e=document.createElement("a");e.href=t,e.target="_self",e.rel="noreferrer noopener",e.click()}}catch(e){console.log("[PlatfformManager: openDeeplink()] can't open link",e)}}(this,e,t,n)}isReactNative(){var e;return this.isNotBrowser()&&"undefined"!=typeof window&&(null==window?void 0:window.navigator)&&"ReactNative"===(null==(e=window.navigator)?void 0:e.product)}isMetaMaskInstalled(){let e;return e=fE.getProvider()||(null==window?void 0:window.ethereum),fi(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${null==e?void 0:e.isMetaMask} isConnected=${null==e?void 0:e.isConnected()}`),(null==e?void 0:e.isMetaMask)&&(null==e?void 0:e.isConnected())}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,t;let n=fm.parse(window.navigator.userAgent);return"mobile"===(null==(e=null==n?void 0:n.platform)?void 0:e.type)||"tablet"===(null==(t=null==n?void 0:n.platform)?void 0:t.type)}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return"undefined"!=typeof window&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===cH.MobileWeb}static isNotBrowser(){var e;return"undefined"==typeof window||!(null==window?void 0:window.navigator)||void 0!==nz&&"ReactNative"===(null==(e=null==nz?void 0:nz.navigator)?void 0:e.product)||"ReactNative"===(null==navigator?void 0:navigator.product)}isNotBrowser(){return fC.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return fC.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return function(e){let{state:t}=e;return t.platformType?t.platformType:e.isReactNative()?cH.ReactNative:e.isNotBrowser()?cH.NonBrowser:e.isMetaMaskMobileWebView()?cH.MetaMaskMobileWebview:e.isMobile()?cH.MobileWeb:cH.DesktopWeb}(this)}}let fx=e=>nH(void 0,void 0,void 0,function*(){if(fC.isBrowser()){let{StorageManagerWeb:t}=yield Promise.resolve().then(function(){return pv});return new t(e)}return Promise.resolve({persistChannelConfig:()=>nH(void 0,void 0,void 0,function*(){}),getPersistedChannelConfig:()=>nH(void 0,void 0,void 0,function*(){}),persistAccounts:()=>nH(void 0,void 0,void 0,function*(){}),getCachedAccounts:()=>nH(void 0,void 0,void 0,function*(){return[]}),persistChainId:()=>nH(void 0,void 0,void 0,function*(){}),getCachedChainId:()=>nH(void 0,void 0,void 0,function*(){}),terminate:()=>nH(void 0,void 0,void 0,function*(){})})});class fS extends fr{constructor({connectionStream:e,shouldSendMetadata:t,autoRequestAccounts:n=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:t}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},fi(`[SDKProvider: constructor()] autoRequestAccounts=${n}`),this.state.autoRequestAccounts=n}forceInitializeState(){return nH(this,void 0,void 0,function*(){return fi(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()})}_setConnected(){fi("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;let{accounts:t}=this._state;return t&&0!==t.length?(null==(e=t[0])?void 0:e.toLowerCase())||"":(fi("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,t){return this._handleAccountsChanged(e,t)}handleDisconnect({terminate:e=!1}){!function({terminate:e=!1,instance:t}){let{state:n}=t;fi(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${e}`,t),e&&(t._state.accounts=null,t._state.isUnlocked=!1,t._state.isPermanentlyDisconnected=!0,t._state.initialized=!1),t._handleAccountsChanged([]),t._state.isConnected=!1,t.emit("disconnect",fa.ethErrors.provider.disconnected()),n.providerStateRequested=!1}({terminate:e,instance:this})}_initializeStateAsync(){return nH(this,void 0,void 0,function*(){return function(e){var t,n;return nH(this,void 0,void 0,function*(){let r;void 0===e.state&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});let{state:i}=e;if(i.providerStateRequested)fi("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let a;i.providerStateRequested=!0;let o=null,s=!1,l=!1,c=yield fx({enabled:!0});if(c){let e=yield c.getPersistedChannelConfig({});s=null!=(t=null==e?void 0:e.relayPersistence)&&t,a=yield c.getCachedChainId();let n=yield c.getCachedAccounts();n.length>0&&(o=n[0])}if(fi(`[SDKProvider: initializeStateAsync()] relayPersistence=${s}`,{relayPersistence:s,cachedChainId:a,cachedSelectedAddress:o}),s)if(a&&o)r={accounts:[o],chainId:a,isUnlocked:!1},l=!0;else try{r=yield e.request({method:"metamask_getProviderState"})}catch(t){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",t),void(i.providerStateRequested=!1)}if(0===(null==(n=null==r?void 0:r.accounts)?void 0:n.length))if(e.getSelectedAddress())r.accounts=[e.getSelectedAddress()];else{fi("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");let t=yield e.request({method:"eth_requestAccounts",params:[]});r.accounts=t}e._initializeState(r),i.providerStateRequested=!1,l&&(e._state.isConnected=!0,e.emit("connect",{chainId:null==r?void 0:r.chainId}))}})}(this)})}_initializeState(e){var t;return fi("[SDKProvider: _initializeState()]",e),t=super._initializeState.bind(this),fi("[SDKProvider: initializeState()] set state._initialized to false"),this._state.initialized=!1,t(e)}_handleChainChanged({chainId:e,networkVersion:t}={}){this.state.chainId=e,this.state.networkVersion=t,function({instance:e,chainId:t,networkVersion:n,superHandleChainChanged:i}){fi(`[SDKProvider: handleChainChanged()] chainId=${t} networkVersion=${n}`);let a=n;n||(fi("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),a="1"),t!==r&&(nB.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(null!=t?t:"0x1",16)}`}),r=t),e._state.isConnected=!0,e.emit("connect",{chainId:t}),i({chainId:t,networkVersion:a})}({instance:this,chainId:e,networkVersion:t,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var f_,fA="0.34.0";(pq=f_||(f_={})).INPAGE="metamask-inpage",pq.CONTENT_SCRIPT="metamask-contentscript",pq.PROVIDER="metamask-provider";let fT="https://metamask.app.link/connect",fI="metamask://connect",fN=["io.metamask","io.metamask.flask"],fO=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,fk="metamask_getProviderState",fM="metamask_connectSign",fP="metamask_connectWith",fR="metamask_batch",fL="personal_sign",fD="wallet_requestPermissions",fj="wallet_getPermissions",fU="eth_requestAccounts",fB="eth_accounts",f$="eth_chainId",fW="eth_sendTransaction",fK={[fU]:!0,[fW]:!0,eth_signTransaction:!0,eth_sign:!0,[fL]:!0,[fB]:!1,[f$]:!1,[fL]:!0,eth_signTypedData:!0,eth_signTypedData_v3:!0,eth_signTypedData_v4:!0,[fD]:!0,[fj]:!0,wallet_watchAsset:!0,wallet_addEthereumChain:!0,wallet_switchEthereumChain:!0,[fM]:!0,[fP]:!0,personal_ecRecover:!0,[fR]:!0,metamask_open:!0},fH=Object.keys(fK).filter(e=>!0===fK[e]).map(e=>e.toLowerCase()),fz=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map(e=>e.toLowerCase()),fF=".sdk-comm",fV="providerType",fq=".MMSDK_cached_address",fY=".MMSDK_cached_chainId",fG="chainChanged",fJ="accountsChanged",fZ="disconnect",fQ="connect",fX="connected";(pY=pJ||(pJ={})).TERMINATE="terminate",pY.EXTENSION="extension",pY.INITIALIZED="initialized";let f0="undefined"!=typeof window&&window.localStorage;function f1(e){var t,n;return nH(this,void 0,void 0,function*(){fi("[MetaMaskSDK: connectWithExtensionProvider()] ",e),e.sdkProvider=e.activeProvider,e.activeProvider=window.extension,window.ethereum=window.extension;try{let e=yield null==(t=window.extension)?void 0:t.request({method:"eth_requestAccounts"});fi(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${e}`)}catch(e){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",e)}localStorage.setItem(fV,"extension"),e.extensionActive=!0,e.emit(fw,pJ.EXTENSION),e.options.enableAnalytics&&(null==(n=e.analytics)||n.send({event:cB.SDK_USE_EXTENSION}))})}function f3(e){let t;if(void 0!==n5)t=n5.from(e,"utf8").toString("base64");else if("function"==typeof btoa)t=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/gu,(e,t)=>String.fromCharCode(parseInt(t,16))));else{if(!("Buffer"in nz))throw Error("Unable to base64 encode: No available method.");t=nz.Buffer.from(e,"utf8").toString("base64")}return t}class f2 extends hq.Duplex{constructor({name:e,remote:t,deeplinkProtocol:n,hideReturnToAppNotification:r,platformManager:i}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,hideReturnToAppNotification:!1,platformManager:null},this.state._name=e,this.state.remote=t,this.state.deeplinkProtocol=n,this.state.hideReturnToAppNotification=null!=r?r:this.state.hideReturnToAppNotification,this.state.platformManager=i,this._onMessage=this._onMessage.bind(this),this.state.remote.on(cL.MESSAGE,this._onMessage)}_write(e,t,n){return nH(this,void 0,void 0,function*(){return function(e,t,n,r){var i,a,o,s,l,c,d,u,h,f,p,g,m,w,y,v,b,E,C,x;return nH(this,void 0,void 0,function*(){var n,S,_,A;let T,I,N,O=null==(i=e.state.remote)?void 0:i.isReady(),k=null==(a=e.state.remote)?void 0:a.isConnected(),M=null==(o=e.state.remote)?void 0:o.isPaused(),P=fE.getProvider(),R=null==(s=e.state.remote)?void 0:s.getChannelId(),L=null==(l=e.state.remote)?void 0:l.isAuthorized(),{deeplinkProtocol:D}=e.state,{method:j,data:U,triggeredInstaller:B}=(n5.isBuffer(t)?(T=t.toJSON())._isBuffer=!0:T=t,I=null==(n=null==T?void 0:T.data)?void 0:n.method,N=!1,"object"==typeof(null==(S=null==T?void 0:T.data)?void 0:S.params)&&!0===(null==(A=null==(_=null==T?void 0:T.data)?void 0:_.params)?void 0:A.__triggeredInstaller)&&(N=!0,T.data.params=T.data.params.wrappedParams),{method:I,data:T,triggeredInstaller:N});if(fi(`[RCPMS: write()] method='${j}' isRemoteReady=${O} channelId=${R} isSocketConnected=${k} isRemotePaused=${M} providerConnected=${P.isConnected()}`,t),!R)return j!==fk&&fi(`[RCPMS: write()] ${j} --> channelId is undefined`),r(Error("disconnected"));fi(`[RCPMS: write()] remote.isPaused()=${null==(c=e.state.remote)?void 0:c.isPaused()} authorized=${L} ready=${O} socketConnected=${k}`,t);let $=null==(d=e.state.platformManager)?void 0:d.isSecure(),W=null!=(h=null==(u=e.state.platformManager)?void 0:u.isMobileWeb())&&h,K=null!=(p=null==(f=e.state.remote)?void 0:f.hasDeeplinkProtocol())&&p&&W&&L;try{if(!B){let t=JSON.stringify(null==U?void 0:U.data);if(t.length>1e6)return r(Error(`Message size ${t.length} exceeds maximum allowed size of 1000000 bytes`));null==(g=e.state.remote)||g.sendMessage(null==U?void 0:U.data).then(()=>{fi(`[RCPMS: _write()] ${j} sent successfully`)}).catch(e=>{fi("[RCPMS: _write()] error sending message",e)})}if(!$)return fi(`[RCPMS: _write()] unsecure platform for method ${j} -- return callback`),r();if(B)return fi("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r();let t=null!=(y=null==(w=null==(m=e.state.remote)?void 0:m.getKeyInfo())?void 0:w.ecies.public)?y:"",n=encodeURI(`channelId=${R}&pubkey=${t}&comm=socket&t=d&v=2&hr=${+!!e.state.hideReturnToAppNotification}`);if(K){let t=JSON.stringify(null==U?void 0:U.data),i=null==(v=e.state.remote)?void 0:v.encrypt(t);if(!i)return fi("[RCPMS: _write()] error encrypting message"),r(Error("RemoteCommunicationPostMessageStream - disconnected"));n+=`&scheme=${D}&rpc=${f3(i)}`}if(!(null==(b=e.state.platformManager)?void 0:b.isMetaMaskInstalled()))return fi("[RCPMS: _write()] prevent deeplink until installation is completed."),r();fK[j]?(fi(`[RCPMS: _write()] redirect link for '${j}' socketConnected=${k} connect?${n}`),null==(E=e.state.platformManager)||E.openDeeplink(`${fT}?${n}`,`${fI}?${n}`,"_self")):(null==(C=e.state.remote)?void 0:C.isPaused())?(fi(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${j}`),null==(x=e.state.platformManager)||x.openDeeplink(`${fT}?redirect=true&${n}`,`${fI}?redirect=true&${n}`,"_self")):fi(`[RCPMS: _write()] method ${j} doesn't need redirect.`)}catch(e){return fi("[RCPMS: _write()] error sending message",e),r(Error("RemoteCommunicationPostMessageStream - disconnected"))}return r()})}(this,e,0,n)})}_read(){}_onMessage(e){try{if(fi("[RCPMS: onMessage()] message",e),!e||"object"!=typeof e||"object"!=typeof(null==e?void 0:e.data))return;if(!(null==e?void 0:e.name))return void fi("[RCPMS: onMessage()] ignore message without name",e);if((null==e?void 0:e.name)!==f_.PROVIDER)return void fi(`[RCPMS: onMessage()] ignore message with wrong name message=${e}`);if(n5.isBuffer(e)){let t=n5.from(e);this.push(t)}else this.push(e)}catch(e){fi(`[RCPMS: onMessage()] ignore message error err=${e}`)}}start(){}}let f5=1,f4=e=>new Promise(t=>{setTimeout(()=>{t(!0)},e)});class f8{constructor({serverUrl:e,enabled:t,originatorInfo:n}){this.serverURL=sn,this.serverURL=e,this.originatorInfo=n,this.enabled=null==t||t}send({event:e,params:t}){if(!this.enabled)return;let n=Object.assign(Object.assign({id:"sdk",event:e,sdkVersion:fA},this.originatorInfo),{params:t});fi(`[Analytics: send()] event: ${e}`,n),o7(n,this.serverURL).catch(e=>{fi(`[Analytics: send()] error: ${e}`)})}}function f6(e){var t,n,r;let{dappMetadata:i}=e,a=function({url:e,name:t}){var n;let r=f3(e+t);if(!localStorage)return"";let i=null!=(n=localStorage.getItem(r))?n:"";if(!i){i=(0,nK.default)();try{localStorage.setItem(r,i)}catch(e){return""}}return i}({url:null!=(t=null==i?void 0:i.url)?t:"no_url",name:null!=(n=null==i?void 0:i.name)?n:"no_name"}),o=null==(r=e.platformManager)?void 0:r.getPlatformType(),s=o===cH.DesktopWeb,l=o===cH.MetaMaskMobileWebview,c="N/A";return s?c="extension":l&&(c="mobile"),{id:a,from:c}}let f9=(e,t,n)=>{if(sa(e))if(n||t&&"object"==typeof t&&null!==t&&"error"in t){let r=n||(null==t?void 0:t.error);r&&4001===r.code?nB.analytics.track("sdk_action_rejected",{action:e}):nB.analytics.track("sdk_action_failed",{action:e})}else nB.analytics.track("sdk_action_succeeded",{action:e})},f7=({provider:e,sdkInstance:t})=>{if("state"in e)throw Error("INVALID EXTENSION PROVIDER");return new Proxy(e,{get:(n,r)=>"request"===r?function(e){var r,i;return nH(this,void 0,void 0,function*(){fi("[wrapExtensionProvider()] Overwriting request method",e);let{method:a,params:o}=e,s=fH.includes(a.toLowerCase()),{id:l,from:c}=f6(t);if(s&&(null==(r=t.analytics)||r.send({event:cB.SDK_RPC_REQUEST,params:{method:a,from:c,id:l}})),sa(a)&&nB.analytics.track("sdk_action_requested",{action:a}),a===fR&&Array.isArray(o))return(({target:e,args:t,trackEvent:n,sdkInstance:r})=>nH(void 0,void 0,void 0,function*(){var i,a;if("metamask_batch"!==t.method)throw Error("Invalid usage");let o=[];for(let n of null!=(i=null==t?void 0:t.params)?i:[]){let t=yield null==e?void 0:e.request({method:n.method,params:n.params});o.push(t)}let{id:s,from:l}=f6(r);for(let e of(n&&(null==(a=r.analytics)||a.send({event:cB.SDK_RPC_REQUEST_DONE,params:{method:t.method,from:l,id:s}})),o))f9(t.method,e,null);return o}))({target:n,args:e,trackEvent:s,sdkInstance:t});if(a.toLowerCase()===fM.toLowerCase()&&Array.isArray(o))return(({target:e,params:t})=>nH(void 0,void 0,void 0,function*(){let n,r=null;try{let r=yield e.request({method:fU,params:[]});if(!r.length)throw Error("SDK state invalid -- undefined accounts");return n=yield e.request({method:fL,params:[t[0],r[0]]})}catch(e){throw r=e,e}finally{f9(fL,n,r)}}))({target:n,params:o});if(a.toLowerCase()===fP.toLowerCase()&&Array.isArray(o))return(({target:e,params:t})=>nH(void 0,void 0,void 0,function*(){let[n]=t,r=n.method,i=n.params,a,o=null;try{let t=yield e.request({method:fU,params:[]});if(!Array.isArray(t)||!t.length)throw Error("SDK state invalid -- undefined accounts");return(null==r?void 0:r.toLowerCase())===fL.toLowerCase()?a=yield e.request({method:r,params:[i[0],t[0]]}):(null==r?void 0:r.toLowerCase())===fW.toLowerCase()?a=yield e.request({method:r,params:[Object.assign(Object.assign({},i[0]),{from:t[0]})]}):fz.includes(r.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${r} -- not handled by the extension -- call separately`),a=t):a=yield e.request({method:r,params:i})}catch(e){throw o=e,e}finally{f9(r,a,o)}}))({target:n,params:o});let d,u=null;try{return d=yield n.request(e)}catch(e){throw u=e,e}finally{s&&(null==(i=t.analytics)||i.send({event:cB.SDK_RPC_REQUEST_DONE,params:{method:a,from:c,id:l}})),f9(a,d,u)}})}:"getChainId"===r?function(){return e.chainId}:"getNetworkVersion"===r?function(){return e.networkVersion}:"getSelectedAddress"===r?function(){return e.selectedAddress}:"isConnected"===r?function(){return e._state.isConnected}:n[r]})};(pG=pZ||(pZ={})).Announce="eip6963:announceProvider",pG.Request="eip6963:requestProvider";var pe="INSTALLED",pt="NOT_INSTALLED",pn="REGISTERED",pr="REGISTERING",pi="RELOADING",pa={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},po="REGISTRATION_IN_PROGRESS",ps="FORWARDER_ID",pl=function(){function e(t){var n=void 0===t?{}:t,r=n.forwarderOrigin,i=n.forwarderMode,a=void 0===i?e.FORWARDER_MODE.INJECT:i;this.forwarderOrigin=void 0===r?"https://fwd.metamask.io":r,this.forwarderMode=a,this.state=e.isMetaMaskInstalled()?pe:pt;var o=e._detectBrowser();this.downloadUrl=o?pa[o]:pa.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),a===e.FORWARDER_MODE.INJECT&&"true"===sessionStorage.getItem(po)&&e._injectForwarder(this.forwarderOrigin)}return e.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return"metamask:reload"===e.data.type?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},e.prototype._onMessageUnknownStateError=function(e){throw Error("Unknown state: '"+e+"'")},e.prototype._onMessageFromForwarder=function(t){var n,r,i;return n=this,r=void 0,i=function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var l=[a,s];if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:switch(this.state){case pi:return[3,1];case pt:return[3,2];case pe:return[3,3];case pr:return[3,5];case pn:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=pi,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=pr,[4,e._register()];case 4:return n.sent(),this.state=pn,t.source.postMessage({type:"metamask:registrationCompleted"},t.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}})},new(r||(r=Promise))(function(e,t){function a(e){try{s(i.next(e))}catch(e){t(e)}}function o(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(a,o)}s((i=i.apply(n,[])).next())})},e.prototype.startOnboarding=function(){sessionStorage.setItem(po,"true"),this._openDownloadPage(),this._openForwarder()},e.prototype.stopOnboarding=function(){"true"===sessionStorage.getItem(po)&&(this.forwarderMode===e.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),e._removeForwarder()),sessionStorage.setItem(po,"false"))},e.prototype._openForwarder=function(){this.forwarderMode===e.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):e._injectForwarder(this.forwarderOrigin)},e.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},e.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},e._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},e._injectForwarder=function(e){var t=document.body,n=document.createElement("iframe");n.setAttribute("height","0"),n.setAttribute("width","0"),n.setAttribute("style","display: none;"),n.setAttribute("src",e),n.setAttribute("id",ps),t.insertBefore(n,t.children[0])},e._removeForwarder=function(){var e;null==(e=document.getElementById(ps))||e.remove()},e._detectBrowser=function(){var e=fm.parse(window.navigator.userAgent);return"Firefox"===e.browser.name?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},e.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},e}();class pc{constructor({remote:e,preferDesktop:t,platformManager:n,debug:r=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=e,this.state.preferDesktop=t,this.state.platformManager=n,this.state.debug=r}startDesktopOnboarding(){return function(){return nH(this,void 0,void 0,function*(){fi("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),(new pl).startOnboarding()})}()}redirectToProperInstall(){return nH(this,void 0,void 0,function*(){return function(e){var t,n;return nH(this,void 0,void 0,function*(){let{state:r}=e,i=null==(t=r.platformManager)?void 0:t.getPlatformType();if(fi(`[MetamaskInstaller: redirectToProperInstall()] platform=${i}`),i===cH.MetaMaskMobileWebview)return!1;r.isInstalling=!0;try{yield null==(n=r.remote)?void 0:n.startConnection({connectWith:r.connectWith}),r.isInstalling=!1,r.hasInstalled=!0}catch(e){throw r.isInstalling=!1,e}return!0})}(this)})}checkInstallation(){return nH(this,void 0,void 0,function*(){return function(e){var t;return nH(this,void 0,void 0,function*(){let{state:n}=e,r=null==(t=n.platformManager)?void 0:t.isMetaMaskInstalled();return fi(`[MetamaskInstaller: checkInstallation()] isInstalled=${r}`),!!r||(yield e.redirectToProperInstall())})}(this)})}start({wait:e=!1,connectWith:t}){return nH(this,void 0,void 0,function*(){this.state.connectWith=t,fi(`[MetaMaskInstaller: start()] wait=${e}`,t),yield function(e,{wait:t=!1}){return nH(this,void 0,void 0,function*(){return fi(`[MetamaskInstaller: startInstaller()] wait=${t}`),t&&(yield f4(1e3)),yield e.checkInstallation()})}(this,{wait:e})})}}class pd{constructor({debug:e,sdkVersion:t}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=null!=e&&e,this.sdkVersion=t}loadComponent(e){return nH(this,void 0,void 0,function*(){if(!this.defined[e]){this.defined[e]=!0;try{let e=yield Promise.resolve().then(function(){return gk});console.log("loader",e),e.defineCustomElements()}catch(t){console.error(`Failed to load ${e} modal:`,t)}}})}renderInstallModal(e){var t;return nH(this,void 0,void 0,function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,yield this.loadComponent("install");let n=document.createElement("mm-install-modal");n.link=e.link,n.preferDesktop=e.preferDesktop,n.sdkVersion=null!=(t=e.sdkVersion)?t:this.sdkVersion,n.addEventListener("close",({detail:{shouldTerminate:t}})=>e.onClose(t)),n.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),n.addEventListener("trackAnalytics",t=>{var n;return null==(n=e.onAnalyticsEvent)?void 0:n.call(e,t.detail)}),e.parentElement.appendChild(n)})}renderSelectModal(e){var t;return nH(this,void 0,void 0,function*(){this.containers.select=e.parentElement,yield this.loadComponent("select");let n=document.createElement("mm-select-modal");n.link=e.link,n.sdkVersion=null!=(t=e.sdkVersion)?t:this.sdkVersion,n.preferDesktop=e.preferDesktop,n.addEventListener("close",({detail:{shouldTerminate:t}})=>e.onClose(t)),n.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(n),setTimeout(()=>this.updateQRCode(e.link),100)})}renderPendingModal(e){var t;return nH(this,void 0,void 0,function*(){this.containers.pending=e.parentElement,yield this.loadComponent("pending");let n=document.createElement("mm-pending-modal");n.sdkVersion=null!=(t=e.sdkVersion)?t:this.sdkVersion,n.displayOTP=e.displayOTP,n.addEventListener("close",e.onClose),n.addEventListener("updateOTPValue",({detail:{otpValue:t}})=>e.updateOTPValue(t)),e.onDisconnect&&n.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(n)})}updateOTPValue(e){let t=()=>{var t;let n=null==(t=this.containers.pending)?void 0:t.querySelector("mm-pending-modal");return!!n&&(n.otpCode=e,!0)};setTimeout(()=>{t()},800)}updateQRCode(e){var t,n;let r=null==(t=this.containers.install)?void 0:t.querySelector("mm-install-modal");if(r)r.link=e;else{let t=null==(n=this.containers.select)?void 0:n.querySelector("mm-select-modal");t&&(t.link=e)}}unmount(){Object.entries(this.containers).forEach(([e,t])=>{var n;null==(n=null==t?void 0:t.parentNode)||n.removeChild(t),this.containers[e]=void 0})}}let pu=({link:e,debug:t,installer:n,terminate:r,connectWithExtension:i,preferDesktop:a,onAnalyticsEvent:o})=>{let s=null,l=null;fi("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),fi(`[UI: InstallModal-web: sdkWebInstallModal()] link=${e}`),fi(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${e}" --ios`),fi(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${e}" --android`),fi(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${e}"`);let c=e=>{var t;fi("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",e,l),(null==l?void 0:l.parentNode)&&(null==(t=l.parentNode)||t.removeChild(l)),l=null,s=null,!0===e&&(null==r||r())};return{mount:r=>{(fi("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",l),l)?(l.style.display="block",null==s||s.updateQRCode(r)):(s=new pd({debug:t,sdkVersion:fA}),l=document.createElement("div"),document.body.appendChild(l),window.extension?s.renderSelectModal({parentElement:l,connectWithExtension:()=>{c(),null==i||i()},onClose:c,link:e,preferDesktop:null!=a&&a}).catch(e=>{console.error(e)}):s.renderInstallModal({parentElement:l,preferDesktop:null!=a&&a,link:e,metaMaskInstaller:n,onClose:c,onAnalyticsEvent:o}).catch(e=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",e)}))},unmount:c}},ph=({onDisconnect:e,debug:t})=>{let n=null,r=null,i=()=>{fi("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",n),(null==n?void 0:n.parentNode)&&n.parentNode.removeChild(n),n=null,r=null},a=e=>{fi("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",e),r&&r.updateOTPValue(e)},o=({displayOTP:o}={displayOTP:!0})=>{fi("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",n),n?n.style.display="block":(r=new pd({debug:t,sdkVersion:fA}),n=document.createElement("div"),document.body.appendChild(n),r.renderPendingModal({parentElement:n,onClose:i,onDisconnect:e,updateOTPValue:a,displayOTP:o}).catch(e=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",e)}))};return o(),{mount:o,unmount:i,updateOTPValue:a}};function pf(e,t){var n,r,i,a;e.connector||(fi("[RemoteConnection: initializeConnector()] initialize connector"),e.connector=new sb({anonId:t.anonId,platformType:t.platformManager.getPlatformType(),communicationLayerPreference:t.communicationLayerPreference,transports:t.transports,dappMetadata:Object.assign(Object.assign({},t.dappMetadata),{source:t._source}),analytics:t.enableAnalytics,communicationServerUrl:t.communicationServerUrl,sdkVersion:fA,context:"dapp",ecies:t.ecies,storage:t.storage,logging:t.logging}),t.timer&&(fi("[RemoteConnection: initializeConnector()] reset background timer",t.timer),null==(r=null==(n=t.timer)?void 0:n.stopBackgroundTimer)||r.call(n),null==(a=null==(i=t.timer)?void 0:i.runBackgroundTimer)||a.call(i,()=>!1,1e4)))}function pp(e){e.listeners.forEach(({event:t,handler:n})=>{var r;null==(r=e.connector)||r.off(t,n)}),e.listeners=[]}function pg(e,t){function n(t,n){var r;null==(r=e.connector)||r.on(t,n),e.listeners.push({event:t,handler:n})}e.connector&&(pp(e),n(cL.WALLET_INIT,({accounts:e,chainId:t})=>nH(this,void 0,void 0,function*(){fi(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${e} chainId=${t}`);let n=fE.getProvider();n._setConnected(),n._initializeState({accounts:e,chainId:t,isUnlocked:!1}),n.emit("chainChanged",t),n.emit("accountsChanged",e)})),n(cL.AUTHORIZED,()=>nH(this,void 0,void 0,function*(){var t,n,r,i;try{fi("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",e.pendingModal,e.installModal);let a=fE.getProvider();a._setConnected(),null==(n=null==(t=e.pendingModal)?void 0:t.unmount)||n.call(t),null==(i=null==(r=e.installModal)?void 0:r.unmount)||i.call(r,!1),e.otpAnswer=void 0,e.authorized=!0,fi("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),yield a.forceInitializeState()}catch(e){}})),n(cL.TERMINATE,()=>{var t,n,r,i,a;null==(n=null==(t=e.pendingModal)?void 0:t.unmount)||n.call(t),null==(i=null==(r=e.installModal)?void 0:r.unmount)||i.call(r,!0),e.pendingModal=void 0,e.installModal=void 0,e.otpAnswer=void 0,null==(a=e.connector)||a.disconnect({terminate:!0}),e.authorized=!1,fE.getProvider().handleDisconnect({terminate:!0}),pp(e),fi("[RemoteConnection: setupListeners()] All listeners cleaned up")}))}class pm{constructor(e){var t,n,r;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;const i=!0===(null==(t=e.logging)?void 0:t.developerMode)||!0===(null==(n=e.logging)?void 0:n.sdk);this.state.developerMode=i,this.state.analytics=e.analytics,this.state.preferDesktop=null!=(r=e.preferDesktop)&&r,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.hideReturnToAppNotification=e.sdk.options.hideReturnToAppNotification,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=pu),e.modals.otp||(e.modals.otp=ph)}startConnection(e){return nH(this,void 0,void 0,function*(){return function(e,t,{initialCheck:n,connectWith:r}={}){var i,a,o,s,l,c,d,u,h,f,p,g,m,w,y,v,b,E,C;return nH(this,void 0,void 0,function*(){try{if(pf(e,t),!e.connector)throw Error("no connector defined");pg(e);let x=fE.getProvider();e.authorized=!1,x.emit("connecting");let S=yield null==(i=e.connector)?void 0:i.originatorSessionConnect();fi(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${n}`,S);let _=null!=(a=null==S?void 0:S.channelId)?a:"",A=null!=(s=null==(o=e.connector.getKeyInfo())?void 0:o.ecies.public)?s:"",T=null!=(c=null==(l=e.connector.getKeyInfo())?void 0:l.ecies.private)?c:"";if(n&&!S)return Promise.resolve();if(!S&&!n){let t=yield e.connector.generateChannelIdConnect();_=null!=(d=t.channelId)?d:"",A=null!=(u=t.pubKey)?u:"",T=null!=(h=t.privKey)?h:"";let n=Date.now();null==(f=e.connector.state.storageManager)||f.persistChannelConfig({channelId:_,localKey:T,lastActive:n,validUntil:n+6048e5})}if(n&&(null==S?void 0:S.channelId))return(null==(p=e.connector)?void 0:p.isConnected())||(fi(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${n}`,S),yield null==(g=e.connector)?void 0:g.connectToChannel({channelId:_})),Promise.resolve();!S||(null==(m=e.connector)?void 0:m.isConnected())||(fi("[RemoteConnection: startConnection()] reconnecting to channel",S),yield null==(w=e.connector)?void 0:w.connectToChannel({channelId:_}));let I=(null==(y=e.platformManager)?void 0:y.isSecure())?"":"&t=q",{iconUrl:N,name:O,url:k,scheme:M}=t.dappMetadata||{},P=null==(v=e.platformManager)?void 0:v.getPlatformType(),R="N/A";"undefined"!=typeof window&&window.location&&window.location.hostname?R=window.location.hostname:void 0!==O?R=O:void 0!==k&&(R=k);let L={url:null!=k?k:"",title:null!=O?O:"",icon:N,scheme:null!=M?M:"",apiVersion:fA,dappId:R||k||"N/A",anonId:t.anonId,platform:null!=P?P:"",source:null!=(b=t._source)?b:""},D=f3(JSON.stringify(L)),j=`channelId=${_}&v=2&comm=${null!=(E=e.communicationLayerPreference)?E:""}&pubkey=${A}${I}&originatorInfo=${D}&hr=${+!!e.hideReturnToAppNotification}`;if(r){j+=`&rpc=${f3(JSON.stringify(r))}`;let t=e.connector.getRPCMethodTracker();t&&(t[`${r.id}`]=Object.assign(Object.assign({},r),{id:`${r.id}`,timestamp:Date.now()}))}let U=encodeURI(j),B=`${e.useDeeplink?fI:fT}?${j}`;if(e.qrcodeLink=B,e.developerMode&&fi(`[RemoteConnection: startConnection()] qrcodeLink=${U}`),x.emit("display_uri",B),nB.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),null==(C=e.platformManager)?void 0:C.isSecure()){let t=setTimeout(()=>{nB.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return yield function(e,t){var n,r;return nH(this,void 0,void 0,function*(){let i=`${fT}?${t}`,a=`${fI}?${t}`;null==(r=null==(n=e.platformManager)?void 0:n.openDeeplink)||r.call(n,i,a,"_self")})}(e,U),new Promise((n,r)=>{var i,a,o;(null==(i=e.connector)?void 0:i.isAuthorized())?(clearTimeout(t),n()):(null==(a=e.connector)||a.once(cL.AUTHORIZED,()=>{clearTimeout(t),n()}),null==(o=e.connector)||o.once(cL.REJECTED,()=>{clearTimeout(t),r(cL.REJECTED)}))})}return function(e,t,n){return nH(this,void 0,void 0,function*(){let r=setTimeout(()=>{nB.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return new Promise((i,a)=>{var o,s,l,c;if(!e.connector)return void a(Error("No connector available"));fi("[RemoteConnection: connectWithModalInstaller()]",{state:e,options:t,linkParams:n});let d=`${e.useDeeplink?fI:fT}?${n}`;e.installModal=null==(s=(o=t.modals).install)?void 0:s.call(o,{link:d,preferDesktop:e.preferDesktop,installer:t.getMetaMaskInstaller(),terminate:()=>{fi("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),t.sdk.terminate().catch(e=>{console.warn("[MMSDK] failed to terminate connection",e)})},debug:e.developerMode,connectWithExtension:()=>{var e;return null==(e=t.connectWithExtensionProvider)||e.call(t),!1},onAnalyticsEvent:({event:n,params:r})=>{var i,a,o;let s=Object.assign(Object.assign({},r),{sdkVersion:t.sdk.getVersion(),dappId:null==(i=t.dappMetadata)?void 0:i.name,source:t._source,url:null==(a=t.dappMetadata)?void 0:a.url});null==(o=e.analytics)||o.send({event:n,params:s})}}),null==(c=null==(l=e.installModal)?void 0:l.mount)||c.call(l,d),t.sdk.once(cL.PROVIDER_UPDATE,e=>nH(this,void 0,void 0,function*(){(fi("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),e===pJ.TERMINATE)?(clearTimeout(r),a({code:4001,message:"User rejected the request."})):a(e)})),e.connector.once(cL.AUTHORIZED,()=>{clearTimeout(r),i()}),e.connector.once(cL.REJECTED,()=>{clearTimeout(r),a(cL.REJECTED)}),e.connector.once(cL.CLIENTS_READY,()=>nH(this,void 0,void 0,function*(){fi("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(r),i()}))})})}(e,t,U)}catch(e){throw console.error("[startConnection] error",e),e}})}(this.state,this.options,e)})}initRemoteCommunication({sdkInstance:e}){var t,n,r;return nH(this,void 0,void 0,function*(){let i=yield null==(n=null==(t=e.options.storage)?void 0:t.storageManager)?void 0:n.getPersistedChannelConfig();if(!this.options.ecies){let e={privateKey:null==i?void 0:i.localKey};this.options.ecies=e}pf(this.state,this.options),yield null==(r=this.getConnector())?void 0:r.initFromDappStorage(),pg(this.state,this.options)})}showActiveModal(){var e,t,n,r,i;(e=this.state).authorized?fi("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?null==(n=(t=e.pendingModal).mount)||n.call(t):e.installModal&&(null==(i=(r=e.installModal).mount)||i.call(r,e.qrcodeLink||""))}closeModal(){var e,t,n,r;null==(t=null==(e=this.state.pendingModal)?void 0:e.unmount)||t.call(e),null==(r=null==(n=this.state.installModal)?void 0:n.unmount)||r.call(n,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return null==(e=this.state.connector)?void 0:e.getChannelConfig()}getKeyInfo(){var e;return null==(e=this.state.connector)?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return(null==(e=this.state.connector)?void 0:e.isReady())||!1}isAuthorized(){var e;return(null==(e=this.state.connector)?void 0:e.isAuthorized())||!1}isPaused(){var e;return null==(e=this.state.connector)?void 0:e.isPaused()}disconnect(e){var t,n,r,i;fi("[RemoteConnection: disconnect()]",e),(null==e?void 0:e.terminate)&&(fE.getProvider().handleDisconnect({terminate:!0}),null==(n=null==(t=this.state.pendingModal)?void 0:t.unmount)||n.call(t),this.state.otpAnswer=void 0),null==(r=this.state.connector)||r.disconnect(e),i=this.state,fi("[RemoteConnection: cleanupConnector()] cleaning up connector"),i.connector&&(pp(i),i.connector.disconnect({terminate:!0}).catch(e=>{fi("[RemoteConnection: cleanupConnector()] error disconnecting connector",e)}))}}let pw={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,hideReturnToAppNotification:!1,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:"direct",i18nOptions:{enabled:!1}};class py extends n$.default{constructor(e){var t,n,r;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",nU.default.disable(),this.options=Object.assign(Object.assign({},pw),e);const i=!0===(null==(t=this.options.logging)?void 0:t.developerMode);if(((null==(n=this.options.logging)?void 0:n.sdk)||i)&&nU.default.enable("MM_SDK"),fi("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(null==(r=this.options.dappMetadata)?void 0:r.url)){if("undefined"==typeof window||"undefined"==typeof document)throw Error("You must provide dAppMetadata url");this.options.dappMetadata=Object.assign(Object.assign({},this.options.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.init().then(()=>{fi("[MetaMaskSDK: constructor()]: initialized successfully."),"undefined"!=typeof window&&(window.mmsdk=this)}).catch(e=>{console.error("[MetaMaskSDK: constructor()] error during initialization",e)})}init(){return nH(this,void 0,void 0,function*(){return function(e){var t;return nH(this,void 0,void 0,function*(){if("undefined"!=typeof window&&(null==(t=window.mmsdk)?void 0:t.isInitialized()))return fi("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return fi("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return fi("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=function(e){var t,n,r,i,a,o,s,l,c,d,u,h;return nH(this,void 0,void 0,function*(){let{options:f}=e;if(f.logging=null!=(t=f.logging)?t:{},f.communicationLayerPreference=null!=(n=f.communicationLayerPreference)?n:cK.SOCKET,void 0!==f.enableDebug&&(nU.default.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),f.enableAnalytics=null==(r=f.enableAnalytics)||r,f.injectProvider=null==(i=f.injectProvider)||i,f.shouldShimWeb3=null==(a=f.shouldShimWeb3)||a,f.extensionOnly=null==(o=f.extensionOnly)||o,f.useDeeplink=null==(s=f.useDeeplink)||s,f.hideReturnToAppNotification=null!=(l=f.hideReturnToAppNotification)&&l,f.storage=null!=(c=f.storage)?c:{enabled:!0},f.headless){(0,nU.default)("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");let e=()=>{};f.modals={install:()=>({mount:e,unmount:e})},f.ui={installer:e}}let p=!0===(null==(d=f.logging)?void 0:d.developerMode);e.debug=(null==(u=f.logging)?void 0:u.sdk)||p,fi("[MetaMaskSDK: performSDKInitialization()] options",e.options);let g=Object.assign({},f.logging);p&&(g.sdk=!0,g.eciesLayer=!0,g.keyExchangeLayer=!0,g.remoteLayer=!0,g.serviceLayer=!0,g.plaintext=!0),yield function(e){var t;return nH(this,void 0,void 0,function*(){let{options:n}=e;e.platformManager=new fC({useDeepLink:null!=(t=n.useDeeplink)&&t,preferredOpenLink:n.openDeeplink,debug:e.debug})})}(e),yield function(e){var t,n,r,i,a;return nH(this,void 0,void 0,function*(){let{options:o}=e,s=null==(t=e.platformManager)?void 0:t.getPlatformType();e.analytics=new f8({serverUrl:null!=(n=o.communicationServerUrl)?n:sn,enabled:o.enableAnalytics,originatorInfo:{url:null!=(r=o.dappMetadata.url)?r:"",title:null!=(i=o.dappMetadata.name)?i:"",dappId:e.getDappId(),platform:null!=s?s:"",source:null!=(a=o._source)?a:"",anonId:""}})})}(e),yield function(e){var t,n,r;return nH(this,void 0,void 0,function*(){if(!e.options.enableAnalytics||!(null==(t=e.platformManager)?void 0:t.isBrowser())&&!(null==(n=e.platformManager)?void 0:n.isReactNative()))return;let i=e.getVersion(),a=e.getDappId(),o=yield e.getAnonId(),s=null==(r=e.platformManager)?void 0:r.getPlatformType(),l=e.options._source;nB.analytics.setGlobalProperty("sdk_version",i),nB.analytics.setGlobalProperty("dapp_id",a),nB.analytics.setGlobalProperty("anon_id",o),nB.analytics.setGlobalProperty("platform",s),nB.analytics.setGlobalProperty("integration_type",l),nB.analytics.enable(),nB.analytics.track("sdk_initialized",{})})}(e),yield function(e){var t;return nH(this,void 0,void 0,function*(){let{options:n}=e;!0!==(null==(t=n.storage)?void 0:t.enabled)||n.storage.storageManager||(n.storage.storageManager=yield fx(n.storage))})}(e),yield function(e){return nH(this,void 0,void 0,function*(){let{options:t}=e,n=/^(http|https):\/\/[^\s]*$/;if(t.dappMetadata){t.dappMetadata.iconUrl&&!n.test(t.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),t.dappMetadata.iconUrl=void 0),t.dappMetadata.base64Icon&&t.dappMetadata.base64Icon.length>163400&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),t.dappMetadata.base64Icon=void 0),t.dappMetadata.url&&!n.test(t.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");let e=(()=>{let e;if("undefined"==typeof document)return;let t=document.getElementsByTagName("link");for(let n=0;n<t.length;n++)"icon"!==t[n].getAttribute("rel")&&"shortcut icon"!==t[n].getAttribute("rel")||(e=t[n].getAttribute("href"));return e})();if(e&&!t.dappMetadata.iconUrl&&!t.dappMetadata.base64Icon){let n=`${window.location.protocol}//${window.location.host}${e}`;t.dappMetadata.iconUrl=n}}e.dappMetadata=t.dappMetadata})}(e),yield nH(void 0,void 0,void 0,function*(){let{options:t}=e,{infuraAPIKey:n}=t;if(!n)return;let r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0xaa36a7":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};e.options.readonlyRPCMap?e.options.readonlyRPCMap=Object.assign(Object.assign({},e.options.readonlyRPCMap),r):e.options.readonlyRPCMap=r}),yield nH(void 0,void 0,void 0,function*(){let{options:t}=e,{readonlyRPCMap:n}=t;if(n)try{fi("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),e.setReadOnlyRPCCalls(!0)}catch(e){throw Error("Invalid Infura Settings")}});let{metamaskBrowserExtension:m,preferExtension:w,shouldReturn:y}=yield function(e){var t,n,r,i;return nH(this,void 0,void 0,function*(){let{options:a}=e,o,s=!1,l=!1;if("undefined"==typeof window||!window.ethereum||(null==(t=e.platformManager)?void 0:t.isMetaMaskMobileWebView()))(null==(n=e.platformManager)?void 0:n.isMetaMaskMobileWebView())&&(null==(r=e.analytics)||r.send({event:cB.SDK_USE_INAPP_BROWSER}),e.activeProvider=f7({provider:window.ethereum,sdkInstance:e}),e._initialized=!0,l=!0);else{s="extension"===localStorage.getItem(fV);try{o=yield function({mustBeMetaMask:e,sdkInstance:t}){return nH(this,void 0,void 0,function*(){if("undefined"==typeof window)throw Error("window not available");try{let e=yield new Promise((e,t)=>{let n=setTimeout(()=>{t(Error("eip6963RequestProvider timed out"))},500);window.addEventListener(pZ.Announce,t=>{let{detail:{info:r,provider:i}={}}=t,{name:a,rdns:o,uuid:s}=null!=r?r:{};fO.test(s)&&a.startsWith("MetaMask")&&fN.includes(o)&&(clearTimeout(n),e(i))}),window.dispatchEvent(new Event(pZ.Request))});return f7({provider:e,sdkInstance:t})}catch(n){if(!e&&window.ethereum)return f7({provider:window.ethereum,sdkInstance:t});throw Error("Provider not found")}})}({mustBeMetaMask:!0,sdkInstance:e}),window.extension=o,o.on(fG,t=>{fi(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${t}`),e.sdkProvider&&e.getMobileProvider().emit(fG,t)}),o.on(fJ,t=>nH(this,void 0,void 0,function*(){var n;fi(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${t}`);let r=!!e.sdkProvider,i=!!e.extensionActive;if(r&&e.getMobileProvider().emit(fJ,t),i&&0===(null==t?void 0:t.length)&&0===(yield null==(n=e.getProvider())?void 0:n.request({method:fj,params:[]})).length)try{yield e.terminate()}catch(e){fi("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",e)}})),o.on(fZ,t=>{fi(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${t}`),e.sdkProvider&&e.getMobileProvider().emit(fZ,t)}),o.on(fQ,t=>{fi(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${t}`),e.sdkProvider&&e.getMobileProvider().emit(fQ,t)}),o.on(fX,t=>{fi("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",t),e.sdkProvider&&e.getMobileProvider().emit(fX,t)})}catch(e){window.extension=void 0}}return o&&a.extensionOnly&&(fi("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),null==(i=e.analytics)||i.send({event:cB.SDK_USE_EXTENSION}),e.activeProvider=o,e.extensionActive=!0,e.extension=o,e._initialized=!0,l=!0),{preferExtension:s,shouldReturn:l,metamaskBrowserExtension:o}})}(e);if(y)fi("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield function(e,t){var n,r,i,a,o;return nH(this,void 0,void 0,function*(){let{options:s}=e,l=Object.assign({},s.logging);e.remoteConnection=new pm({anonId:yield e.getAnonId(),preferDesktop:null!=(n=s.preferDesktop)&&n,communicationLayerPreference:null!=(r=s.communicationLayerPreference)?r:cK.SOCKET,analytics:e.analytics,dappMetadata:s.dappMetadata,_source:s._source,enableAnalytics:null==(i=s.enableAnalytics)||i,timer:s.timer,sdk:e,platformManager:e.platformManager,transports:s.transports,communicationServerUrl:s.communicationServerUrl,storage:null!=(a=s.storage)?a:{enabled:!0},getMetaMaskInstaller:()=>{if(!e.installer)throw Error("Invalid SDK status -- installer not initialized");return e.installer},logging:l,connectWithExtensionProvider:void 0===t?void 0:()=>f1(e),modals:Object.assign(Object.assign({},s.modals),{onPendingModalDisconnect:e.terminate.bind(e)})}),yield e.remoteConnection.initRemoteCommunication({sdkInstance:e}),e.installer=new pc({remote:e.remoteConnection,preferDesktop:null!=(o=s.preferDesktop)&&o,platformManager:e.platformManager,debug:e.debug})})}(e,m),yield function(e){var t,n,r,i;return nH(this,void 0,void 0,function*(){var a,o,s,l;let{options:c}=e,d={communicationLayerPreference:null!=(t=c.communicationLayerPreference)?t:cK.SOCKET,platformManager:e.platformManager,sdk:e,checkInstallationOnAllCalls:c.checkInstallationOnAllCalls,injectProvider:null==(n=c.injectProvider)||n,shouldShimWeb3:null==(r=c.shouldShimWeb3)||r,extensionOnly:null==(i=c.extensionOnly)||i,installer:e.installer,remoteConnection:e.remoteConnection,debug:e.debug};e.activeProvider=yield(({checkInstallationOnAllCalls:e=!1,communicationLayerPreference:t,injectProvider:n,shouldShimWeb3:r,platformManager:i,installer:a,sdk:o,remoteConnection:s,debug:l})=>nH(void 0,void 0,void 0,function*(){var c,d;let u=(({name:e,remoteConnection:t})=>{if(!t||!(null==t?void 0:t.getConnector()))throw Error("Missing remote connection parameter");return new f2({name:e,remote:null==t?void 0:t.getConnector(),deeplinkProtocol:null==t?void 0:t.state.deeplinkProtocol,hideReturnToAppNotification:null==t?void 0:t.state.hideReturnToAppNotification,platformManager:null==t?void 0:t.getPlatformManager()})})({name:f_.INPAGE,target:f_.CONTENT_SCRIPT,platformManager:i,communicationLayerPreference:t,remoteConnection:s}),h=i.getPlatformType(),f=o.options.dappMetadata,p=`Sdk/Javascript SdkVersion/${fA} Platform/${h} dApp/${null!=(c=f.url)?c:f.name} dAppTitle/${f.name}`,g=null,m=null,w=null==(d=o.options.storage)?void 0:d.storageManager;if(w){try{let e=yield w.getCachedAccounts();e.length>0&&(g=e[0])}catch(e){console.error(`[initializeMobileProvider] failed to get cached addresses: ${e}`)}try{let e=yield w.getCachedChainId();e&&(m=e)}catch(e){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${e}`)}}fi(`[initializeMobileProvider] cachedAccountAddress: ${g}, cachedChainId: ${m}`);let y=!(!n||h===cH.NonBrowser||h===cH.ReactNative),v=fE.init({shouldSetOnWindow:y,connectionStream:u,shouldShimWeb3:r,sdkInstance:o}),b=!1,E=e=>{b=e},C=()=>b,x=(t,n,r,l)=>nH(void 0,void 0,void 0,function*(){var c,d,u,h,f,y,v,x,S;let _=fE.getProvider();if(b){_.emit("display_uri",(null==s?void 0:s.state.qrcodeLink)||""),null==s||s.showActiveModal();let e=C();for(;e;){let t=C(),n=null==s?void 0:s.isAuthorized();e=t&&!n,fi(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${t} authorized: ${n}`),yield f4(1e3)}return fi("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),r(...n)}let A=i.isMetaMaskInstalled(),T=null==s?void 0:s.isConnected(),I=null,N=null,O=null;if(I=null!=(c=_.getSelectedAddress())?c:g,O=_.getChainId()||m,I&&w&&I!==g&&w.persistAccounts([I]).catch(e=>{console.error(`[initializeMobileProvider] failed to persist account: ${e}`)}),O&&(m=O,w&&w.persistChainId(O).catch(e=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${e}`)})),fi("[initializeMobileProvider: sendRequest()]",{selectedAddress:I,chainId:O}),l&&fi(`[initializeMobileProvider: sendRequest()] method=${t} ongoing=${b} selectedAddress=${I} isInstalled=${A} checkInstallationOnAllCalls=${e} socketConnected=${T}`),I&&t.toLowerCase()===fB.toLowerCase())return[I];if(O&&t.toLowerCase()===f$.toLowerCase())return O;let k=!fK[t],M=null==(d=o.options.readonlyRPCMap)?void 0:d[O];if(M&&k)try{let e=null==(u=null==n?void 0:n[0])?void 0:u.params,r=yield(({rpcEndpoint:e,method:t,sdkInfo:n,params:r})=>nH(void 0,void 0,void 0,function*(){let i,a=JSON.stringify({jsonrpc:"2.0",method:t,params:r,id:f5+=1}),o={Accept:"application/json","Content-Type":"application/json"};e.includes("infura")&&(o["Metamask-Sdk-Info"]=n);try{i=yield(0,nj.default)(e,{method:"POST",headers:o,body:a})}catch(e){throw e instanceof Error?Error(`Failed to fetch from RPC: ${e.message}`):Error(`Failed to fetch from RPC: ${e}`)}if(!i.ok)throw Error(`Server responded with a status of ${i.status}`);return(yield i.json()).result}))({rpcEndpoint:M,sdkInfo:p,method:t,params:e||[]});return l&&fi(`initializeProvider::ReadOnlyRPCResponse ${r}`),r}catch(e){console.warn(`[initializeMobileProvider: sendRequest()] method=${t} readOnlyRPCRequest failed:`,e)}if((!A||A&&!T)&&t!==fk){let l=(null==(h=null==n?void 0:n[0])?void 0:h.params)||[];if(-1!==[fU,fD,fM,fP].indexOf(t)||e){E(!0);let e=t===fP,i=`${Date.now()}`;try{yield a.start({wait:!1,connectWith:e?{method:t,id:i,params:l}:void 0}),yield new Promise((e,t)=>{(null==s?void 0:s.isAuthorized())&&(fi("[initializeMobileProvider: sendRequest()] already authorized"),e(!0)),null==s||s.getConnector().once(cL.AUTHORIZED,()=>{e(!0)}),o.once(cL.PROVIDER_UPDATE,e=>{fi(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${e}`),e===pJ.EXTENSION?t(cL.PROVIDER_UPDATE):t(Error("Connection Terminated"))})})}catch(e){if(pJ.EXTENSION===e){if(fi(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${t} on the active provider`),t.toLowerCase()===fM.toLowerCase()){let e=yield null==(f=o.getProvider())?void 0:f.request({method:fU,params:[]});if(!e.length)throw Error("SDK state invalid -- undefined accounts");let t=yield null==(y=o.getProvider())?void 0:y.request({method:fL,params:[l[0],e[0]]});return o.emit(fy,t),t}if(t.toLowerCase()===fP.toLowerCase()){let[e]=l,t=yield(({method:e,sdk:t,params:n})=>nH(void 0,void 0,void 0,function*(){var r,i,a,o;if(!t.isExtensionActive())throw Error("SDK state invalid -- extension is not active");fi("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",e,n);let s=yield null==(r=t.getProvider())?void 0:r.request({method:fU,params:[]});if(!s.length)throw Error("SDK state invalid -- undefined accounts");if((null==e?void 0:e.toLowerCase())===fL.toLowerCase()){let r={method:e,params:[n[0],s[0]]};return yield null==(i=t.getProvider())?void 0:i.request(r)}if((null==e?void 0:e.toLowerCase())===fW.toLowerCase()){let r={method:e,params:[Object.assign(Object.assign({},n[0]),{from:s[0]})]};return yield null==(a=t.getProvider())?void 0:a.request(r)}return fz.includes(e.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${e} -- not handled by the extension -- call separately`),s):yield null==(o=t.getProvider())?void 0:o.request({method:e,params:n})}))({method:e.method,sdk:o,params:e.params});return o.emit(fy,t),t}return fi(`[initializeMobileProvider: sendRequest()] sending '${t}' on active provider`,l),yield null==(v=o.getProvider())?void 0:v.request({method:t,params:l})}if(e===cL.REJECTED)throw null==s||s.closeModal(),null==(x=o.getProvider())||x.handleDisconnect({terminate:!1}),Object.assign(Error("User rejected connection"),{code:4001});throw fi(`[initializeMobileProvider: sendRequest()] failed to start installer: ${e}`),e}finally{E(!1)}if(t===fU)return N=yield new Promise(e=>{let t=setInterval(()=>{let{accounts:n}=_.getState();n&&(clearInterval(t),e(n))},100)}),fi(`[initializeMobileProvider: sendRequest()] selectedAddress: ${I} --- SKIP rpc call`),N;if(t===fP)try{let e,t,n=0,r=yield new Promise((r,a)=>{let l=null==s?void 0:s.getConnector().getRPCMethodTracker();fi(`TRACKER: method ${i}`,l),(null==l?void 0:l[i].result)?(fi("[initializeMobileProvider: sendRequest()] found result",null==l?void 0:l[i].result),r(null==l?void 0:l[i].result)):(null==l?void 0:l[i].error)&&(fi("[initializeMobileProvider: sendRequest()] found error",null==l?void 0:l[i].error),a(null==l?void 0:l[i].error)),t=()=>(({resolve:e,reject:t})=>{n+=1;let r=null==s?void 0:s.getConnector().getRPCMethodTracker(),a=null==r?void 0:r[i];return fi(`TRACKER: update method ${i}`,a),(null==a?void 0:a.result)?(fi("[initializeMobileProvider: sendRequest()] found result",a.result),o.emit(fy,a.result),void e(a.result)):(null==a?void 0:a.error)?(fi("[initializeMobileProvider: sendRequest()] found error",a.error),void t(a.error)):n>=5?(fi("[initializeMobileProvider: sendRequest()] max message count reached without result"),void t(Error("Max message count reached without result"))):void fi("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")})({resolve:r,reject:a}),e=null==s?void 0:s.getConnector().on(cL.RPC_UPDATE,t)});return t&&(null==e||e.off(cL.RPC_UPDATE,t)),fi("TRACKER: result",r),r}catch(e){throw fi("[initializeMobileProvider: sendRequest()] error:",e),e}return n[0]&&"object"==typeof n[0]&&(n[0].params={__triggeredInstaller:!0,wrappedParams:n[0].params}),r(...n)}if(i.isSecure()&&fK[t])return r(...n);if(o.isExtensionActive())return fi(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${t}' to it`,n,l),yield null==(S=o.getProvider())?void 0:S.request({method:t,params:l});throw fi(`[initializeMobileProvider: sendRequest()] method=${t} --- skip --- not connected/installed`),Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{let e=yield r(...n);if(fi(`[initializeMobileProvider: sendRequest()] method=${t} rpcResponse`,e),t===fD){let t=e.reduce((e,t)=>{var n;if("eth_accounts"===t.parentCapability){let r=null==(n=t.caveats.find(e=>"restrictReturnedAccounts"===e.type))?void 0:n.value;r&&e.push(...r)}return e},[]);fi("[initializeMobileProvider: sendRequest()] accountsToPersist:",t),t.length>0&&(_.handleAccountsChanged(t,!1),null==w||w.persistAccounts(t))}return e}catch(e){throw console.error("[initializeMobileProvider: sendRequest()] error:",e),e}}),{request:S}=v;v.request=(...e)=>nH(void 0,void 0,void 0,function*(){return x(null==e?void 0:e[0].method,e,S,l)});let{send:_}=v;return v.send=(...e)=>nH(void 0,void 0,void 0,function*(){return x(null==e?void 0:e[0],e,_,l)}),fi("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),u.start(),v}))(d),null==(o=null==(a=e.remoteConnection)?void 0:a.getConnector())||o.on(fv,t=>{e.emit(fv,t)}),null==(l=null==(s=e.remoteConnection)?void 0:s.getConnector())||l.on(fb,t=>{e.emit(fb,t)})})}(e),yield function(e,t){var n,r;return nH(this,void 0,void 0,function*(){let{options:i}=e;t?(fi("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),null==(n=e.analytics)||n.send({event:cB.SDK_EXTENSION_UTILIZED}),f1(e).catch(e=>{console.warn("Can't connect with MetaMask extension...",e),localStorage.removeItem(fV)})):i.checkInstallationImmediately&&((null==(r=e.platformManager)?void 0:r.isDesktopWeb())?(fi("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),e.connect().catch(e=>{fi(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${e}`)})):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),e._initialized=!0})}(e,w);try{yield null==(h=e.remoteConnection)?void 0:h.startConnection({initialCheck:!0})}catch(e){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",e)}e.emit(fw,pJ.INITIALIZED)}})}(e),yield e.sdkInitPromise}catch(e){throw console.error(e),e}return e.sdkInitPromise})}(this)})}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return"undefined"!=typeof window&&!!(null==(e=window.ethereum)?void 0:e.isMetaMask)}connect(){return nH(this,void 0,void 0,function*(){return function(e){return nH(this,void 0,void 0,function*(){if(e._initialized||(fi("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),fi(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw Error("SDK state invalid -- undefined provider");let t=e.activeProvider.getSelectedAddress();return t?[t]:e.activeProvider.request({method:fU,params:[]})})}(this)})}connectAndSign({msg:e}){return nH(this,void 0,void 0,function*(){return function({instance:e,msg:t}){return nH(this,void 0,void 0,function*(){if(e._initialized||(fi("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield e.init()),fi(`[MetaMaskSDK: connectAndSign()] activeProvider=${e.activeProvider}`),!e.activeProvider)throw Error("SDK state invalid -- undefined provider");let n=/^0x([0-9A-Fa-f]{2})*$/u.test(t)?t:function(e){let t;if(void 0!==n5)t=n5.from(e,"utf8").toString("hex");else if("undefined"!=typeof TextEncoder)t=Array.from((new TextEncoder).encode(e)).map(e=>e.toString(16).padStart(2,"0")).join("");else{if(!("Buffer"in nz))throw Error("Unable to convert string to hex: No available method.");t=nz.Buffer.from(e,"utf8").toString("hex")}return`0x${t}`}(t);return e.activeProvider.request({method:fP,params:[{method:fL,params:[n]}]})})}({instance:this,msg:e})})}connectWith(e){return nH(this,void 0,void 0,function*(){return function({instance:e,rpc:t}){return nH(this,void 0,void 0,function*(){if(e._initialized||(fi("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield e.init()),fi(`[MetaMaskSDK: connectWith()] method: ${t.method} rpc=${t}`),!e.activeProvider)throw Error("SDK state invalid -- undefined provider");return e.activeProvider.request({method:fP,params:[t]})})}({instance:this,rpc:e})})}resume(){return function(e){var t,n,r;return nH(this,void 0,void 0,function*(){(null==(n=null==(t=e.remoteConnection)?void 0:t.getConnector())?void 0:n.isReady())?fi("[MetaMaskSDK: resume()] channel is ready"):(fi("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),null==(r=e.remoteConnection)||r.startConnection())})}(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;null==(e=this.remoteConnection)||e.isAuthorized()}terminate(){return function(e){var t,n,r;return nH(this,void 0,void 0,function*(){if(!(null==(t=e.platformManager)?void 0:t.isMetaMaskMobileWebView())){if(f0&&(window.localStorage.removeItem(fV),window.localStorage.removeItem(fY),window.localStorage.removeItem(fq)),e.extensionActive){try{yield null==(n=e.activeProvider)?void 0:n.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(e){fi("[MetaMaskSDK: terminate()] error revoking permissions",e)}return e.options.extensionOnly?(e.emit(fw,pJ.TERMINATE),void fi("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(fw,pJ.TERMINATE))}e.emit(fw,pJ.TERMINATE),fi(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),null==(r=e.remoteConnection)||r.disconnect({terminate:!0,sendMessage:!0})}})}(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;let t=null==(e=this.remoteConnection)?void 0:e.getUniversalLink();if(!t)throw Error("No Universal Link available, please call eth_requestAccounts first.");return t}getChannelId(){var e,t;return null==(t=null==(e=this.remoteConnection)?void 0:e.getChannelConfig())?void 0:t.channelId}getRPCHistory(){var e,t;return null==(t=null==(e=this.remoteConnection)?void 0:e.getConnector())?void 0:t.getRPCMethodTracker()}getVersion(){return fA}getDappId(){var e,t,n,r;return"undefined"==typeof window||void 0===window.location?null!=(r=null!=(t=null==(e=this.options.dappMetadata)?void 0:e.name)?t:null==(n=this.options.dappMetadata)?void 0:n.url)?r:"N/A":window.location.hostname}getAnonId(){var e,t;return nH(this,void 0,void 0,function*(){let n;return this._anonId?this._anonId:(n=(null==(e=this.platformManager)?void 0:e.isBrowser())?this.getBrowserAnonId():(null==(t=this.platformManager)?void 0:t.isReactNative())?yield this.getReactNativeAnonId():(0,nK.default)(),this._anonId=n,n)})}getBrowserAnonId(){let e=this.ANON_ID_STORAGE_KEY;try{let t=localStorage.getItem(e);if(t)return t;let n=(0,nK.default)();return localStorage.setItem(e,n),n}catch(e){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",e),(0,nK.default)()}}getReactNativeAnonId(){return nH(this,void 0,void 0,function*(){let t=this.ANON_ID_STORAGE_KEY;try{let n=e.r(84017).default,r=yield n.getItem(t);if(r)return r;let i=(0,nK.default)();return yield n.setItem(t,i),i}catch(e){return console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",e),(0,nK.default)()}})}getWalletStatus(){var e,t;return null==(t=null==(e=this.remoteConnection)?void 0:e.getConnector())?void 0:t.getConnectionStatus()}_getChannelConfig(){var e;return null==(e=this.remoteConnection)?void 0:e.getChannelConfig()}_ping(){var e,t;null==(t=null==(e=this.remoteConnection)?void 0:e.getConnector())||t.ping()}_keyCheck(){var e,t;null==(t=null==(e=this.remoteConnection)?void 0:e.getConnector())||t.keyCheck()}_getServiceStatus(){var e,t;return null==(t=null==(e=this.remoteConnection)?void 0:e.getConnector())?void 0:t.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return null==(e=this.remoteConnection)?void 0:e.getKeyInfo()}_resetKeys(){var e,t;null==(t=null==(e=this.remoteConnection)?void 0:e.getConnector())||t.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,t){return super.emit(e,t)}on(e,t){return super.on(e,t)}}var pv=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:e}={enabled:!1}){this.enabled=!1,this.enabled=e}persistChannelConfig(e){return nH(this,void 0,void 0,function*(){let t=JSON.stringify(e);fi(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,e),localStorage.setItem(fF,t)})}getPersistedChannelConfig(){return nH(this,void 0,void 0,function*(){let e;try{if(fi(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),e=localStorage.getItem(fF),fi("[StorageManagerWeb: getPersistedChannelConfig()]",e),!e)return;let t=JSON.parse(e);return fi("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",t),t}catch(e){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",e)}})}persistAccounts(e){return nH(this,void 0,void 0,function*(){fi(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,e);let t=JSON.stringify(e);localStorage.setItem(fq,t)})}getCachedAccounts(){return nH(this,void 0,void 0,function*(){try{let e=localStorage.getItem(fq);return e?JSON.parse(e):[]}catch(e){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",e),e}})}persistChainId(e){return nH(this,void 0,void 0,function*(){fi(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,e),localStorage.setItem(fY,e)})}getCachedChainId(){return nH(this,void 0,void 0,function*(){try{let e=localStorage.getItem(fY);return null!=e?e:void 0}catch(e){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",e),e}})}terminate(){return nH(this,void 0,void 0,function*(){fi(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(fF)})}}}),pb=Object.defineProperty,pE=new WeakMap,pC=(e,t)=>pE.set(t.$lazyInstance$=e,t),px=(e,t)=>(0,console.error)(e,t),pS=new Map,p_=new Map,pA="slot-fb{display:contents}slot-fb[hidden]{display:none}",pT="undefined"!=typeof window?window:{},pI=pT.document||{head:{}},pN={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},pO=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1})(),pk=!1,pM=[],pP=[],pR=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){px(e)}e.length=0},pL=()=>{pR(pM),pR(pP),(pk=pM.length>0)&&pN.raf(pL)},pD=e=>Promise.resolve(void 0).then(e),pj=e=>{pP.push(e),pk||(pk=!0,4&pN.$flags$?pD(pL):pN.raf(pL))},pU={},pB=e=>"object"==(e=typeof e)||"function"===e;function p$(e){var t,n,r;return null!=(r=null==(n=null==(t=e.head)?void 0:t.querySelector('meta[name="csp-nonce"]'))?void 0:n.getAttribute("content"))?r:void 0}var pW={},pK={err:()=>pF,map:()=>pV,ok:()=>pz,unwrap:()=>pX,unwrapErr:()=>p0};for(var pH in pK)pb(pW,pH,{get:pK[pH],enumerable:!0});var pz=e=>({isOk:!0,isErr:!1,value:e}),pF=e=>({isOk:!1,isErr:!0,value:e});function pV(e,t){if(e.isOk){let n=t(e.value);return n instanceof Promise?n.then(e=>pz(e)):pz(n)}if(e.isErr)return pF(e.value);throw"should never get here"}var pq,pY,pG,pJ,pZ,pQ,pX=e=>{if(e.isOk)return e.value;throw e.value},p0=e=>{if(e.isErr)return e.value;throw e.value},p1=(e,t,...n)=>{let r=null,i=!1,a=!1,o=[],s=t=>{for(let n=0;n<t.length;n++)Array.isArray(r=t[n])?s(r):null!=r&&"boolean"!=typeof r&&((i="function"!=typeof e&&!pB(r))&&(r=String(r)),i&&a?o[o.length-1].$text$+=r:o.push(i?p3(null,r):r),a=i)};if(s(n),t){let e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter(t=>e[t]).join(" "))}if("function"==typeof e)return e(null===t?{}:t,o,p5);let l=p3(e,null);return l.$attrs$=t,o.length>0&&(l.$children$=o),l},p3=(e,t)=>({$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null}),p2={},p5={forEach:(e,t)=>e.map(p4).forEach(t),map:(e,t)=>e.map(p4).map(t).map(p8)},p4=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),p8=e=>{if("function"==typeof e.vtag){let t={...e.vattrs};return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),p1(e.vtag,t,...e.vchildren||[])}let t=p3(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},p6=e=>pE.get(e).$hostElement$,p9=(e,t,n)=>{let r=p6(e);return{emit:e=>p7(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e})}},p7=(e,t,n)=>{let r=pN.ce(t,n);return e.dispatchEvent(r),r},ge=new WeakMap,gt=(e,t,n,r,i,a)=>{if(n!==r){let o=t in e,s=t.toLowerCase();if("class"===t){let t=e.classList,i=gr(n),a=gr(r);t.remove(...i.filter(e=>e&&!a.includes(e))),t.add(...a.filter(e=>e&&!i.includes(e)))}else if("style"===t){for(let t in n)r&&null!=r[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(let t in r)n&&r[t]===n[t]||(t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if(o||"o"!==t[0]||"n"!==t[1]){let s=pB(r);if((o||s&&null!==r)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{let i=null==r?"":r;"list"===t?o=!1:null!=n&&e[t]==i||("function"==typeof e.__lookupSetter__(t)?e[t]=i:e.setAttribute(t,i))}}catch(e){}null==r||!1===r?!1===r&&""!==e.getAttribute(t)||e.removeAttribute(t):(!o||4&a||i)&&!s&&(r=!0===r?"":r,e.setAttribute(t,r))}else if(t="-"===t[2]?t.slice(3):s in pT?s.slice(2):s[2]+t.slice(3),n||r){let i=t.endsWith(gi);t=t.replace(ga,""),n&&pN.rel(e,t,n,i),r&&pN.ael(e,t,r,i)}}},gn=/\s/,gr=e=>e?e.split(gn):[],gi="Capture",ga=RegExp(gi+"$"),go=(e,t,n)=>{let r=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||pU,a=t.$attrs$||pU;for(let e of gs(Object.keys(i)))e in a||gt(r,e,i[e],void 0,n,t.$flags$);for(let e of gs(Object.keys(a)))gt(r,e,i[e],a[e],n,t.$flags$)};function gs(e){return e.includes("ref")?[...e.filter(e=>"ref"!==e),"ref"]:e}var gl=!1,gc=(e,t,n,r)=>{let i=t.$children$[n],a,o,s=0;if(null!==i.$text$)a=i.$elm$=pI.createTextNode(i.$text$);else{if(gl||(gl="svg"===i.$tag$),a=i.$elm$=pI.createElementNS(gl?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i.$tag$),gl&&"foreignObject"===i.$tag$&&(gl=!1),go(null,i,gl),a.getRootNode().querySelector("body"),i.$children$)for(s=0;s<i.$children$.length;++s)(o=gc(e,i,s))&&a.appendChild(o);"svg"===i.$tag$?gl=!1:"foreignObject"===a.tagName&&(gl=!0)}return a["s-hn"]=pQ,a},gd=(e,t,n,r,i,a)=>{let o,s=e;for(s.shadowRoot&&s.tagName===pQ&&(s=s.shadowRoot);i<=a;++i)r[i]&&(o=gc(null,n,i))&&(r[i].$elm$=o,gp(s,o,t))},gu=(e,t,n)=>{for(let r=t;r<=n;++r){let t=e[r];if(t){let e=t.$elm$;e&&e.remove()}}},gh=(e,t,n=!1)=>e.$tag$===t.$tag$,gf=(e,t,n=!1)=>{let r=t.$elm$=e.$elm$,i=e.$children$,a=t.$children$,o=t.$tag$,s=t.$text$;null===s?(go(e,t,gl="svg"===o||"foreignObject"!==o&&gl),null!==i&&null!==a?((e,t,n,r,i=!1)=>{let a,o=0,s=0,l=t.length-1,c=t[0],d=t[l],u=r.length-1,h=r[0],f=r[u];for(;o<=l&&s<=u;)null==c?c=t[++o]:null==d?d=t[--l]:null==h?h=r[++s]:null==f?f=r[--u]:gh(c,h,i)?(gf(c,h,i),c=t[++o],h=r[++s]):gh(d,f,i)?(gf(d,f,i),d=t[--l],f=r[--u]):gh(c,f,i)?(gf(c,f,i),gp(e,c.$elm$,d.$elm$.nextSibling),c=t[++o],f=r[--u]):gh(d,h,i)?(gf(d,h,i),gp(e,d.$elm$,c.$elm$),d=t[--l],h=r[++s]):(a=gc(t&&t[s],n,s),h=r[++s],a&&gp(c.$elm$.parentNode,a,c.$elm$));o>l?gd(e,null==r[u+1]?null:r[u+1].$elm$,n,r,s,u):s>u&&gu(t,o,l)})(r,i,t,a,n):null!==a?(null!==e.$text$&&(r.textContent=""),gd(r,null,t,a,0,a.length-1)):n||null===i||gu(i,0,i.length-1),gl&&"svg"===o&&(gl=!1)):e.$text$!==s&&(r.data=s)},gp=(e,t,n)=>null==e?void 0:e.insertBefore(t,n),gg=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(t=>e.$onRenderResolve$=t))},gm=(e,t)=>(e.$flags$|=16,4&e.$flags$)?void(e.$flags$|=512):(gg(e,e.$ancestorComponent$),pj(()=>gw(e,t))),gw=(e,t)=>{let n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),i=e.$lazyInstance$;if(!i)throw Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return r(),gy(void 0,()=>gb(e,i,t))},gy=(e,t)=>gv(e)?e.then(t).catch(e=>{console.error(e),t()}):t(),gv=e=>e instanceof Promise||e&&e.then&&"function"==typeof e.then,gb=async(e,t,n)=>{var r;let i,a,o,s,l=e.$hostElement$,c=(e.$cmpMeta$.$tagName$,()=>{}),d=l["s-rc"];n&&(i=e.$cmpMeta$,a=e.$hostElement$,o=i.$flags$,i.$tagName$,s=((e,t,n)=>{var r;let i="sc-"+t.$tagName$,a=p_.get(i);if(e=11===e.nodeType?e:pI,a)if("string"==typeof a){e=e.head||e;let n,o=ge.get(e);if(o||ge.set(e,o=new Set),!o.has(i)){{(n=pI.createElement("style")).innerHTML=a;let i=null!=(r=pN.$nonce$)?r:p$(pI);if(null!=i&&n.setAttribute("nonce",i),!(1&t.$flags$))if("HEAD"===e.nodeName){let t=e.querySelectorAll("link[rel=preconnect]"),r=t.length>0?t[t.length-1].nextSibling:e.querySelector("style");e.insertBefore(n,r)}else if("host"in e)if(pO){let t=new CSSStyleSheet;t.replaceSync(a),e.adoptedStyleSheets=[t,...e.adoptedStyleSheets]}else{let t=e.querySelector("style");t?t.innerHTML=a+t.innerHTML:e.prepend(n)}else e.append(n);1&t.$flags$&&"HEAD"!==e.nodeName&&e.insertBefore(n,null)}4&t.$flags$&&(n.innerHTML+=pA),o&&o.add(i)}}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return i})(a.shadowRoot?a.shadowRoot:a.getRootNode(),i),10&o&&2&o&&(a["s-sc"]=s,a.classList.add(s+"-h")),(()=>{})());let u=(e.$cmpMeta$.$tagName$,()=>{});gE(e,t,l,n),d&&(d.map(e=>e()),l["s-rc"]=void 0),u(),c();{let t=null!=(r=l["s-p"])?r:[],n=()=>gC(e);0===t.length?n():(Promise.all(t).then(n),e.$flags$|=4,t.length=0)}},gE=(e,t,n,r)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,((e,t,n=!1)=>{let r=e.$hostElement$,i=e.$cmpMeta$,a=e.$vnode$||p3(null,null),o=t&&t.$tag$===p2?t:p1(null,null,t);if(pQ=r.tagName,n&&o.$attrs$)for(let e of Object.keys(o.$attrs$))r.hasAttribute(e)&&!["key","ref","style","class"].includes(e)&&(o.$attrs$[e]=r[e]);o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=a.$elm$=r.shadowRoot||r,r["s-sc"],i.$flags$,gf(a,o,n)})(e,t,r)}catch(t){px(t,e.$hostElement$)}return null},gC=e=>{e.$cmpMeta$.$tagName$;let t=e.$hostElement$,n=()=>{},r=e.$lazyInstance$,i=e.$ancestorComponent$;64&e.$flags$?n():(e.$flags$|=64,g_(t),gS(r,"componentDidLoad"),n(),e.$onReadyResolve$(t),i||gx()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&pD(()=>gm(e,!1)),e.$flags$&=-517},gx=e=>{g_(pI.documentElement),pD(()=>p7(pT,"appload",{detail:{namespace:"sdk-install-modal-web"}}))},gS=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(e){px(e)}},g_=e=>e.classList.add("hydrated"),gA=(e,t,n)=>{var r,i;let a=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);let o=Object.entries(null!=(r=t.$members$)?r:{});if(o.map(([e,[r]])=>{(31&r||2&n&&32&r)&&Object.defineProperty(a,e,{get(){return pE.get(this).$instanceValues$.get(e)},set(n){((e,t,n,r)=>{var i,a;let o=pE.get(e);if(!o)throw Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);let s=o.$hostElement$,l=o.$instanceValues$.get(t),c=o.$flags$,d=o.$lazyInstance$;i=n,a=r.$members$[t][0],n=null==i||pB(i)?i:4&a?"false"!==i&&(""===i||!!i):1&a?String(i):i;let u=Number.isNaN(l)&&Number.isNaN(n);if((!(8&c)||void 0===l)&&n!==l&&!u&&(o.$instanceValues$.set(t,n),d)){if(r.$watchers$&&128&c){let e=r.$watchers$[t];e&&e.map(e=>{try{d[e](n,l,t)}catch(e){px(e,s)}})}2==(18&c)&&gm(o,!1)}})(this,e,n,t)},configurable:!0,enumerable:!0})}),1&n){let n=new Map;a.attributeChangedCallback=function(e,r,i){pN.jmp(()=>{var o;let s=n.get(e);if(this.hasOwnProperty(s))i=this[s],delete this[s];else{if(a.hasOwnProperty(s)&&"number"==typeof this[s]&&this[s]==i)return;if(null==s){let n=pE.get(this),a=null==n?void 0:n.$flags$;if(a&&!(8&a)&&128&a&&i!==r){let a=n.$lazyInstance$,s=null==(o=t.$watchers$)?void 0:o[e];null==s||s.forEach(t=>{null!=a[t]&&a[t].call(a,i,r,e)})}return}}this[s]=(null!==i||"boolean"!=typeof this[s])&&i})},e.observedAttributes=Array.from(new Set([...Object.keys(null!=(i=t.$watchers$)?i:{}),...o.filter(([e,t])=>15&t[0]).map(([e,t])=>{let r=t[1]||e;return n.set(r,e),r})]))}}return e},gT=async(e,t,n,r)=>{let i;if(0==(32&t.$flags$)){if(t.$flags$|=32,n.$lazyBundleId$){let e=((e,t,n)=>{let r=e.$tagName$.replace(/-/g,"_"),i=e.$lazyBundleId$;if(!i)return;let a=pS.get(i);return a?a[r]:"mm-install-modal_3"===i?Promise.resolve().then(function(){return mr}).then(e=>(pS.set(i,e),e[r]),px):import(`./${i}.entry.js`).then(e=>(pS.set(i,e),e[r]),px)})(n);if(!(i=e&&"then"in e?await e:e))throw Error(`Constructor for "${n.$tagName$}#${t.$modeName$}" was not found`);i.isProxied||(n.$watchers$=i.watchers,gA(i,n,2),i.isProxied=!0);let r=(n.$tagName$,()=>{});t.$flags$|=8;try{new i(t)}catch(e){px(e)}t.$flags$&=-9,t.$flags$|=128,r(),gI(t.$lazyInstance$)}else{i=e.constructor;let n=e.localName;customElements.whenDefined(n).then(()=>t.$flags$|=128)}if(i&&i.style){let e;"string"==typeof i.style&&(e=i.style);let t="sc-"+n.$tagName$;if(!p_.has(t)){var a,o;let r,i=(n.$tagName$,()=>{});a=e,o=!!(1&n.$flags$),r=p_.get(t),pO&&o?"string"==typeof(r=r||new CSSStyleSheet)?r=a:r.replaceSync(a):r=a,p_.set(t,r),i()}}}let s=t.$ancestorComponent$,l=()=>gm(t,!0);s&&s["s-rc"]?s["s-rc"].push(l):l()},gI=e=>{gS(e,"connectedCallback")},gN=e=>{gS(e,"disconnectedCallback")};if("undefined"!=typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var gO=HTMLElement;window.HTMLElement=function(){return Reflect.construct(gO,[],this.constructor)},HTMLElement.prototype=gO.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,gO)}var gk=Object.freeze({__proto__:null,defineCustomElements:async(e,t)=>{if("undefined"!=typeof window)return await void 0,((e,t={})=>{var n;let r=[],i=t.exclude||[],a=pT.customElements,o=pI.head,s=o.querySelector("meta[charset]"),l=pI.createElement("style"),c=[],d,u=!0;Object.assign(pN,t),pN.$resourcesUrl$=new URL(t.resourcesUrl||"./",pI.baseURI).href;let h=!1;if(e.map(e=>{e[1].map(t=>{var n;let o={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};4&o.$flags$&&(h=!0),o.$members$=t[2],o.$watchers$=null!=(n=t[4])?n:{};let s=o.$tagName$,l=class extends HTMLElement{constructor(e){if(super(e),this.hasRegisteredEventListeners=!1,((e,t)=>{let n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};n.$onReadyPromise$=new Promise(e=>n.$onReadyResolve$=e),e["s-p"]=[],e["s-rc"]=[],pE.set(e,n)})(e=this,o),1&o.$flags$)if(e.shadowRoot){if("open"!==e.shadowRoot.mode)throw Error(`Unable to re-use existing shadow root for ${o.$tagName$}! Mode is set to ${e.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else e.attachShadow({mode:"open"})}connectedCallback(){pE.get(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),d&&(clearTimeout(d),d=null),u?c.push(this):pN.jmp(()=>(e=>{if(0==(1&pN.$flags$)){let t=pE.get(e),n=t.$cmpMeta$,r=(n.$tagName$,()=>{});if(1&t.$flags$)(null==t?void 0:t.$lazyInstance$)?gI(t.$lazyInstance$):(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then(()=>gI(t.$lazyInstance$));else{t.$flags$|=1;{let n=e;for(;n=n.parentNode||n.host;)if(n["s-p"]){gg(t,t.$ancestorComponent$=n);break}}n.$members$&&Object.entries(n.$members$).map(([t,[n]])=>{if(31&n&&e.hasOwnProperty(t)){let n=e[t];delete e[t],e[t]=n}}),gT(e,t,n)}r()}})(this))}disconnectedCallback(){pN.jmp(()=>(async e=>{if(0==(1&pN.$flags$)){let t=pE.get(e);(null==t?void 0:t.$lazyInstance$)?gN(t.$lazyInstance$):(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then(()=>gN(t.$lazyInstance$))}})(this))}componentOnReady(){return pE.get(this).$onReadyPromise$}};o.$lazyBundleId$=e[0],i.includes(s)||a.get(s)||(r.push(s),a.define(s,gA(l,o,1)))})}),r.length>0&&(h&&(l.textContent+=pA),l.textContent+=r.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",l.innerHTML.length)){l.setAttribute("data-styles","");let e=null!=(n=pN.$nonce$)?n:p$(pI);null!=e&&l.setAttribute("nonce",e),o.insertBefore(l,s?s.nextSibling:o.firstChild)}u=!1,c.length?c.map(e=>e.connectedCallback()):pN.jmp(()=>d=setTimeout(gx,30))})([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],t)},setNonce:e=>pN.$nonce$=e});let gM={fontFamily:"Roboto, sans-serif"},gP=({className:e},t)=>p1("div",{style:gM,class:e},t),gR=({Icon:e,text:t})=>p1("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},p1("div",{class:"flexItem1"},p1(e,null)),p1("div",{class:"flexItem11"},p1("span",{style:{lineHeight:"2",color:"black"}},t))),gL=()=>p1("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p1("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),p1("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),gD=()=>p1("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p1("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),gj=()=>p1("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p1("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),gU=()=>p1("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p1("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),p1("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),p1("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function gB({version:e}){return p1("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",e?`v${e}`:"unknown")}let g$=()=>p1("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p1("rect",{width:"16",height:"16",fill:"white"}),p1("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),gW=()=>p1("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},p1("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function gK(e,t){return e.toString(2).padStart(t,"0")}function gH(e,t){let n=e%t;return n>=0?n:t+n}function gz(e,t){return Array(e).fill(t)}function gF(...e){let t=0;for(let n of e)t=Math.max(t,n.length);let n=[];for(let r=0;r<t;r++)for(let t of e)r>=t.length||n.push(t[r]);return new Uint8Array(n)}function gV(e,t,n){if(n<0||n+t.length>e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[n+r])return!1;return!0}function gq(e){return{has:t=>e.includes(t),decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw Error(`alphabet.decode: not string element=${t}`);let n=e.indexOf(t);if(-1===n)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})},encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("alphabet.encode input should be an array of numbers");return t.map(t=>{if(function(e){if(!Number.isSafeInteger(e))throw Error(`Wrong integer: ${e}`)}(t),t<0||t>=e.length)throw Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})}}}class gY{static size(e,t){if("number"==typeof e&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return void 0!==t&&(e={width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}),e}static fromString(e){let t,n=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split("\n"),r=n.length,i=Array(r);for(let e of n){let n=e.split("").map(e=>{if("X"===e)return!0;if(" "===e)return!1;if("?"!==e)throw Error(`Bitmap.fromString: unknown symbol=${e}`)});if(t&&n.length!==t)throw Error(`Bitmap.fromString different row sizes: width=${t} cur=${n.length}`);t=n.length,i.push(n)}return t||(t=0),new gY({height:r,width:t},i)}constructor(e,t){const{height:n,width:r}=gY.size(e);this.data=t||Array.from({length:n},()=>gz(r,void 0)),this.height=n,this.width=r}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};let{x:t,y:n}=this.xy(e);return{height:this.height-n,width:this.width-t}}xy(e){if("number"==typeof e&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw Error(`Bitmap: wrong y=${e.y}`);return e.x=gH(e.x,this.width),e.y=gH(e.y,this.height),e}rect(e,t,n){let{x:r,y:i}=this.xy(e),{height:a,width:o}=gY.size(t,this.size({x:r,y:i}));for(let e=0;e<a;e++)for(let t=0;t<o;t++)this.data[i+e][r+t]="function"==typeof n?n({x:t,y:e},this.data[i+e][r+t]):n;return this}rectRead(e,t,n){return this.rect(e,t,(e,t)=>(n(e,t),t))}hLine(e,t,n){return this.rect(e,{width:t,height:1},n)}vLine(e,t,n){return this.rect(e,{width:1,height:t},n)}border(e=2,t){let n=this.height+2*e,r=this.width+2*e,i=gz(e,t),a=Array.from({length:e},()=>gz(r,t));return new gY({height:n,width:r},[...a,...this.data.map(e=>[...i,...e,...i]),...a])}embed(e,t){return this.rect(e,t.size(),({x:e,y:n})=>t.data[n][e])}rectSlice(e,t=this.size()){let n=new gY(gY.size(t,this.size(this.xy(e))));return this.rect(e,t,({x:e,y:t},r)=>n.data[t][e]=r),n}inverse(){let{height:e,width:t}=this;return new gY({height:t,width:e}).rect({x:0,y:0},1/0,({x:e,y:t})=>this.data[e][t])}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw Error(`Wrong scale factor: ${e}`);let{height:t,width:n}=this;return new gY({height:e*t,width:e*n}).rect({x:0,y:0},1/0,({x:t,y:n})=>this.data[Math.floor(n/e)][Math.floor(t/e)])}clone(){return new gY(this.size()).rect({x:0,y:0},this.size(),({x:e,y:t})=>this.data[t][e])}assertDrawn(){this.rectRead(0,1/0,(e,t)=>{if("boolean"!=typeof t)throw Error("Invalid color type="+typeof t)})}toString(){return this.data.map(e=>e.map(e=>void 0===e?"?":e?"X":" ").join("")).join("\n")}toASCII(){let{height:e,width:t,data:n}=this,r="";for(let i=0;i<e;i+=2){for(let a=0;a<t;a++){let t=n[i][a],o=i+1>=e||n[i+1][a];t||o?!t&&o?r+="â–€":t&&!o?r+="â–„":t&&o&&(r+=" "):r+="â–ˆ"}r+="\n"}return r}toTerm(){let e="\x1b[0m",t=`[1;47m  ${e}`,n=`[40m  ${e}`;return this.data.map(e=>e.map(e=>e?n:t).join("")).join("\n")}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,({x:t,y:n},r)=>{r&&(e+=`<rect x="${t}" y="${n}" width="1" height="1" />`)}),e+="</svg>"}toGIF(){let e=e=>[255&e,e>>>8&255],t=[...e(this.width),...e(this.height)],n=[];this.rectRead(0,1/0,(e,t)=>n.push(+(!0===t)));let r=[71,73,70,56,55,97,...t,246,0,0,255,255,255,...gz(381,0),44,0,0,0,0,...t,0,7],i=Math.floor(n.length/126);for(let e=0;e<i;e++)r.push(127,128,...n.slice(126*e,126*(e+1)).map(e=>+e));return r.push(n.length%126+1,128,...n.slice(126*i).map(e=>+e)),r.push(1,129,0,59),new Uint8Array(r)}toImage(e=!1){let{height:t,width:n}=this.size(),r=new Uint8Array(t*n*(e?3:4)),i=0;for(let a=0;a<t;a++)for(let t=0;t<n;t++){let n=255*!this.data[a][t];r[i++]=n,r[i++]=n,r[i++]=n,e||(r[i++]=255)}return{height:t,width:n,data:r}}}let gG=["low","medium","quartile","high"],gJ=["numeric","alphanumeric","byte","kanji","eci"],gZ=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],gQ={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},gX={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},g0={size:{encode:e=>21+4*(e-1),decode:e=>(e-17)/4},sizeType:e=>Math.floor((e+7)/17),alignmentPatterns(e){if(1===e)return[];let t=g0.size.encode(e)-6-1,n=t-6,r=Math.ceil(n/28),i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);let a=[6];for(let e=1;e<r;e++)a.push(t-(r-e)*i);return a.push(t),a},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(e,t){let n=g0.ECCode[e]<<3|t,r=n;for(let e=0;e<10;e++)r=r<<1^1335*(r>>9);return(n<<10|r)^g0.formatMask},versionBits(e){let t=e;for(let e=0;e<12;e++)t=t<<1^7973*(t>>11);return e<<12|t},alphabet:{numeric:gq("0123456789"),alphanumerc:gq("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(e,t)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[t][g0.sizeType(e)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(e,t){let n=gZ[e-1],r=gQ[t][e-1],i=gX[t][e-1],a=Math.floor(n/i)-r,o=i-n%i;return{words:r,numBlocks:i,shortBlocks:o,blockLen:a,capacity:8*(n-r*i),total:(r+a)*i+i-o}}},g1=[(e,t)=>(e+t)%2==0,(e,t)=>t%2==0,(e,t)=>e%3==0,(e,t)=>(e+t)%3==0,(e,t)=>(Math.floor(t/2)+Math.floor(e/3))%2==0,(e,t)=>e*t%2+e*t%3==0,(e,t)=>(e*t%2+e*t%3)%2==0,(e,t)=>((e+t)%2+e*t%3)%2==0],g3={tables:(e=>{let t=gz(256,0),n=gz(256,0);for(let e=0,r=1;e<256;e++)t[e]=r,n[r]=e,256&(r<<=1)&&(r^=285);return{exp:t,log:n}})(),exp:e=>g3.tables.exp[e],log(e){if(0===e)throw Error(`GF.log: wrong arg=${e}`);return g3.tables.log[e]%255},mul:(e,t)=>0===e||0===t?0:g3.tables.exp[(g3.tables.log[e]+g3.tables.log[t])%255],add:(e,t)=>e^t,pow:(e,t)=>g3.tables.exp[g3.tables.log[e]*t%255],inv(e){if(0===e)throw Error(`GF.inverse: wrong arg=${e}`);return g3.tables.exp[255-g3.tables.log[e]]},polynomial(e){if(0==e.length)throw Error("GF.polymomial: wrong length");if(0!==e[0])return e;let t=0;for(;t<e.length-1&&0==e[t];t++);return e.slice(t)},monomial(e,t){if(e<0)throw Error(`GF.monomial: wrong degree=${e}`);if(0==t)return[0];let n=gz(e+1,0);return n[0]=t,g3.polynomial(n)},degree:e=>e.length-1,coefficient:(e,t)=>e[g3.degree(e)-t],mulPoly(e,t){if(0===e[0]||0===t[0])return[0];let n=gz(e.length+t.length-1,0);for(let r=0;r<e.length;r++)for(let i=0;i<t.length;i++)n[r+i]=g3.add(n[r+i],g3.mul(e[r],t[i]));return g3.polynomial(n)},mulPolyScalar(e,t){if(0==t)return[0];if(1==t)return e;let n=gz(e.length,0);for(let r=0;r<e.length;r++)n[r]=g3.mul(e[r],t);return g3.polynomial(n)},mulPolyMonomial(e,t,n){if(t<0)throw Error("GF.mulPolyMonomial: wrong degree");if(0==n)return[0];let r=gz(e.length+t,0);for(let t=0;t<e.length;t++)r[t]=g3.mul(e[t],n);return g3.polynomial(r)},addPoly(e,t){if(0===e[0])return t;if(0===t[0])return e;let n=e,r=t;n.length>r.length&&([n,r]=[r,n]);let i=gz(r.length,0),a=r.length-n.length,o=r.slice(0,a);for(let e=0;e<o.length;e++)i[e]=o[e];for(let e=a;e<r.length;e++)i[e]=g3.add(n[e-a],r[e]);return g3.polynomial(i)},remainderPoly(e,t){let n=Array.from(e);for(let r=0;r<e.length-t.length+1;r++){let e=n[r];if(0!==e)for(let i=1;i<t.length;i++)0!==t[i]&&(n[r+i]=g3.add(n[r+i],g3.mul(t[i],e)))}return n.slice(e.length-t.length+1,n.length)},divisorPoly(e){let t=[1];for(let n=0;n<e;n++)t=g3.mulPoly(t,[1,g3.pow(2,n)]);return t},evalPoly(e,t){if(0==t)return g3.coefficient(e,0);let n=e[0];for(let r=1;r<e.length;r++)n=g3.add(g3.mul(t,n),e[r]);return n},euclidian(e,t,n){g3.degree(e)<g3.degree(t)&&([e,t]=[t,e]);let r=e,i=t,a=[0],o=[1];for(;2*g3.degree(i)>=n;){let e=r,t=a;if(r=i,a=o,0===r[0])throw Error("rLast[0] === 0");i=e;let n=[0],s=g3.inv(r[0]);for(;g3.degree(i)>=g3.degree(r)&&0!==i[0];){let e=g3.degree(i)-g3.degree(r),t=g3.mul(i[0],s);n=g3.addPoly(n,g3.monomial(e,t)),i=g3.addPoly(i,g3.mulPolyMonomial(r,e,t))}if(n=g3.mulPoly(n,a),o=g3.addPoly(n,t),g3.degree(i)>=g3.degree(r))throw Error(`Division failed r: ${i}, rLast: ${r}`)}let s=g3.coefficient(o,0);if(0==s)throw Error("sigmaTilde(0) was zero");let l=g3.inv(s);return[g3.mulPolyScalar(o,l),g3.mulPolyScalar(i,l)]}};function g2(e,t,n,r){let i="",a=n.length;if("numeric"===r){let e=g0.alphabet.numeric.decode(n.split("")),t=e.length;for(let n=0;n<t-2;n+=3)i+=gK(100*e[n]+10*e[n+1]+e[n+2],10);t%3==1?i+=gK(e[t-1],4):t%3==2&&(i+=gK(10*e[t-2]+e[t-1],7))}else if("alphanumeric"===r){let e=g0.alphabet.alphanumerc.decode(n.split("")),t=e.length;for(let n=0;n<t-1;n+=2)i+=gK(45*e[n]+e[n+1],11);t%2==1&&(i+=gK(e[t-1],6))}else{if("byte"!==r)throw Error("encode: unsupported type");{let e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(n);a=e.length,i=Array.from(e).map(e=>gK(e,8)).join("")}}let{capacity:o}=g0.capacity(e,t),s=gK(a,g0.lengthBits(e,r)),l=g0.modeBits[r]+s+i;if(l.length>o)throw Error("Capacity overflow");(l+="0".repeat(Math.min(4,Math.max(0,o-l.length)))).length%8&&(l+="0".repeat(8-l.length%8));for(let e=0;l.length!==o;e++)l+="1110110000010001"[e%16];let c=Uint8Array.from(l.match(/(.{8})/g).map(e=>Number(`0b${e}`)));return(function(e,t){let{words:n,shortBlocks:r,numBlocks:i,blockLen:a,total:o}=g0.capacity(e,t),s={encode(e){let t=g3.divisorPoly(n),r=Array.from(e);return r.push(...t.slice(0,-1).fill(0)),Uint8Array.from(g3.remainderPoly(r,t))},decode(e){let t=e.slice(),r=g3.polynomial(Array.from(e)),i=gz(n,0),a=!1;for(let e=0;e<n;e++){let t=g3.evalPoly(r,g3.exp(e));i[i.length-1-e]=t,0!==t&&(a=!0)}if(!a)return t;i=g3.polynomial(i);let o=g3.monomial(n,1),[s,l]=g3.euclidian(o,i,n),c=gz(g3.degree(s),0),d=0;for(let e=1;e<256&&d<c.length;e++)0===g3.evalPoly(s,e)&&(c[d++]=g3.inv(e));if(d!==c.length)throw Error("RS.decode: wrong errors number");for(let e=0;e<c.length;e++){let n=t.length-1-g3.log(c[e]);if(n<0)throw Error("RS.decode: wrong error location");let r=g3.inv(c[e]),i=1;for(let t=0;t<c.length;t++)e!==t&&(i=g3.mul(i,g3.add(1,g3.mul(c[t],r))));t[n]=g3.add(t[n],g3.mul(g3.evalPoly(l,r),g3.inv(i)))}return t}};return{encode(e){let t=[],n=[];for(let o=0;o<i;o++){let i=a+(o<r?0:1);t.push(e.subarray(0,i)),n.push(s.encode(e.subarray(0,i))),e=e.subarray(i)}let o=gF(...t),l=gF(...n),c=new Uint8Array(o.length+l.length);return c.set(o),c.set(l,o.length),c},decode(e){if(e.length!==o)throw Error(`interleave.decode: len(data)=${e.length}, total=${o}`);let t=[];for(let e=0;e<i;e++){let i=e<r;t.push(new Uint8Array(n+a+ +!i))}let l=0;for(let n=0;n<a;n++)for(let r=0;r<i;r++)t[r][n]=e[l++];for(let n=r;n<i;n++)t[n][a]=e[l++];for(let o=a;o<a+n;o++)for(let n=0;n<i;n++){let i=n<r;t[n][o+ +!i]=e[l++]}let c=[];for(let e of t)c.push(...Array.from(s.decode(e)).slice(0,-n));return Uint8Array.from(c)}}})(e,t).encode(c)}function g5(e,t,n,r,i=!1){let a=function(e,t,n,r=!1){let i=g0.size.encode(e),a=new gY(i+2),o=new gY(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);a=(a=a.embed(0,o).embed({x:-o.width,y:0},o).embed({x:0,y:-o.height},o)).rectSlice(1,i);let s=new gY(1).rect(0,1,!0).border(1,!1).border(1,!0),l=g0.alignmentPatterns(e);for(let e of l)for(let t of l)void 0===a.data[e][t]&&a.embed({x:t-2,y:e-2},s);a=a.hLine({x:0,y:6},1/0,({x:e},t)=>void 0===t?e%2==0:t).vLine({x:6,y:0},1/0,({y:e},t)=>void 0===t?e%2==0:t);{let e=g0.formatBits(t,n),o=t=>!r&&1==(e>>t&1);for(let e=0;e<6;e++)a.data[e][8]=o(e);for(let e=6;e<8;e++)a.data[e+1][8]=o(e);for(let e=8;e<15;e++)a.data[i-15+e][8]=o(e);for(let e=0;e<8;e++)a.data[8][i-e-1]=o(e);for(let e=8;e<9;e++)a.data[8][15-e-1+1]=o(e);for(let e=9;e<15;e++)a.data[8][15-e-1]=o(e);a.data[i-8][8]=!r}if(e>=7){let t=g0.versionBits(e);for(let e=0;e<18;e+=1){let n=!r&&1==(t>>e&1),o=Math.floor(e/3),s=e%3+i-8-3;a.data[o][s]=n,a.data[s][o]=n}}return a}(e,t,r,i),o=0,s=8*n.length;if(function(e,t,n){let r=e.height,i=g1[t],a=-1,o=r-1;for(let t=r-1;t>0;t-=2){for(6==t&&(t=5);;o+=a){for(let r=0;r<2;r+=1){let a=t-r;void 0===e.data[o][a]&&n(a,o,i(a,o))}if(o+a<0||o+a>=r)break}a=-a}}(a,r,(e,t,r)=>{let i=!1;o<s&&(i=0!=(n[o>>>3]>>(7-o&7)&1),o++),a.data[t][e]=i!==r}),o!==s)throw Error("QR: bytes left after draw");return a}function g4(e,t="raw",n={}){let r=void 0!==n.ecc?n.ecc:"medium";if(!gG.includes(r))throw Error(`Invalid error correction mode=${r}. Expected: ${gG}`);let i=void 0!==n.encoding?n.encoding:function(e){let t="numeric";for(let n of e)if(!g0.alphabet.numeric.has(n)&&(t="alphanumeric",!g0.alphabet.alphanumerc.has(n)))return"byte";return t}(e);!function(e){if(!gJ.includes(e))throw Error(`Encoding: invalid mode=${e}. Expected: ${gJ}`);if("kanji"===e||"eci"===e)throw Error(`Encoding: ${e} is not supported (yet?).`)}(i),void 0!==n.mask&&function(e){if(![0,1,2,3,4,5,6,7].includes(e)||!g1[e])throw Error(`Invalid mask=${e}. Expected number [0..7]`)}(n.mask);let a,o=n.version,s=Error("Unknown error");if(void 0!==o)!function(e){if(!Number.isSafeInteger(e)||e<1||e>40)throw Error(`Invalid version=${e}. Expected number [1..40]`)}(o),a=g2(o,r,e,i);else for(let t=1;t<=40;t++)try{a=g2(t,r,e,i),o=t;break}catch(e){s=e}if(!o||!a)throw s;let l=function(e,t,n,r){if(void 0===r){let i,a,o=(a=1/0,{add(e,t){e>=a||(i=t,a=e)},get:()=>i,score:()=>a});for(let r=0;r<g1.length;r++)o.add(function(e){let t=e.inverse(),n=e=>{let t=0;for(let n,r=0,i=1;r<e.length;r++)n===e[r]&&(i++,r!==e.length-1)||(i>=5&&(t+=i-5+3),n=e[r],i=1);return t},r=0;e.data.forEach(e=>r+=n(e)),t.data.forEach(e=>r+=n(e));let i=0,a=e.data,o=e.width-1,s=e.height-1;for(let e=0;e<o;e++)for(let t=0;t<s;t++){let n=e+1,r=t+1;a[e][t]===a[n][t]&&a[n][t]===a[e][r]&&a[n][t]===a[n][r]&&(i+=3)}let l=e=>{let t=[!0,!1,!0,!0,!0,!1,!0],n=[!1,!1,!1,!1],r=[...t,...n],i=[...n,...t],a=0;for(let t=0;t<e.length;t++)gV(e,r,t)&&(a+=40),gV(e,i,t)&&(a+=40);return a},c=0;for(let t of e.data)c+=l(t);for(let e of t.data)c+=l(e);let d=0;e.rectRead(0,1/0,(e,t)=>d+=+!!t);let u=10*Math.floor(Math.abs(d/(e.height*e.width)*100-50)/5);return r+i+c+u}(g5(e,t,n,r,!0)),r);r=o.get()}if(void 0===r)throw Error("Cannot find mask");return g5(e,t,n,r)}(o,r,a,n.mask);l.assertDrawn();let c=void 0===n.border?2:n.border;if(!Number.isSafeInteger(c))throw Error("Wrong border type="+typeof c);if(l=l.border(c,!1),void 0!==n.scale&&(l=l.scale(n.scale)),"raw"===t)return l.data;if("ascii"===t)return l.toASCII();if("svg"===t)return l.toSVG();if("gif"===t)return l.toGIF();if("term"===t)return l.toTerm();throw Error(`Unknown output: ${t}`)}let g8={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}};class g6{constructor(e){var t;this.translations=g8,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=null!=(t=null==e?void 0:e.baseUrl)?t:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some(e=>e.toLowerCase().startsWith("en")))return"en";let e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}async init(e){let t=this.getBrowserLanguage()||e.fallbackLng;await this.loadTranslations(t)}async loadTranslations(e){let t=e.split("-")[0];if("en"!==t&&this.supportedLocales.includes(t))try{let e=`${this.baseUrl}/${t}.json`,n=await fetch(e);if(!n.ok)throw Error(`HTTP error! status: ${n.status}`);this.translations=await n.json()}catch(e){console.warn(`âŒ Failed to load ${t} translations, falling back to English:`,e),this.translations=g8}else this.translations=g8}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,t){let n=e.split("."),r=t;for(let e of n){if("object"!=typeof r)return"";r=r[e]}return"string"==typeof r?r:""}}(yB=yW||(yW={})).SDK_MODAL_VIEWED="sdk_modal_viewed",yB.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",yB.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed";let g9=class{constructor(e){pC(this,e),this.close=p9(this,"close",7),this.startDesktopOnboarding=p9(this,"startDesktopOnboarding",7),this.trackAnalytics=p9(this,"trackAnalytics",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new g6}componentDidLoad(){this.trackAnalytics.emit({event:yW.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:1===this.tab?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(e){e?this.setTab(1):this.setTab(2)}onClose(e=!1){this.close.emit({shouldTerminate:e})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:yW.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(e,t=!1){t&&this.trackAnalytics.emit({event:yW.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:1===this.tab?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=e,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;let e=e=>this.i18nInstance.t(e),t=this.isDefaultTab?this.preferDesktop?1:2:this.tab,n=g4(this.link,"svg",{ecc:"medium",scale:2});return p1(gP,{className:"install-model"},p1("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),p1("div",{class:"modal"},p1("div",{class:"closeButtonContainer"},p1("div",{class:"right"},p1("span",{class:"closeButton",onClick:()=>this.onClose(!0)},p1(g$,null)))),p1("div",{class:"logoContainer"},p1(gW,null)),p1("div",null,p1("div",{class:"tabcontainer"},p1("div",{class:"flexContainer"},p1("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(1===t?"tabactive":"")},e("DESKTOP")),p1("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(2===t?"tabactive":"")},e("MOBILE")))),p1("div",{style:{display:1===t?"none":"block"}},p1("div",{class:"flexContainer"},p1("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},n&&p1("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:n}),p1("div",{class:"connectMobileText"},e("SCAN_TO_CONNECT")," ",p1("br",null),p1("span",{class:"blue"},p1("b",null,e("META_MASK_MOBILE_APP"))))))),p1("div",{style:{display:2===t?"none":"block"}},p1("div",{class:"item"},p1(gR,{Icon:gD,text:e("INSTALL_MODAL.TRUSTED_BY_USERS")})),p1("div",{class:"item"},p1(gR,{Icon:gL,text:e("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),p1("div",{class:"item"},p1(gR,{Icon:gj,text:e("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),p1("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},p1(gU,null),p1("span",{class:"installExtensionText"},e("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),p1(gB,{version:this.sdkVersion})))}get el(){return p6(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};g9.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}";let g7=class{constructor(e){pC(this,e),this.close=p9(this,"close",7),this.disconnect=p9(this,"disconnect",7),this.updateOTPValue=p9(this,"updateOTPValue",7),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new g6}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(e){this.updateOTPValue.emit({otpValue:e})}disconnectedCallback(){this.onClose()}render(){var e;if(!this.translationsLoaded)return null;let t=null==(e=this.displayOTP)||e,n=this.sdkVersion,r=e=>this.i18nInstance.t(e);return p1(gP,{className:"pending-modal"},p1("div",{class:"backdrop",onClick:()=>this.onClose()}),p1("div",{class:"modal"},p1("div",{class:"closeButtonContainer"},p1("div",{class:"right"},p1("span",{class:"closeButton",onClick:()=>this.onClose()},p1(g$,null)))),p1("div",{class:"logoContainer"},p1(gW,null)),p1("div",null,p1("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},p1("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},r(t?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),p1("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),t&&p1("div",{class:"notice"},"* ",r("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),p1("div",{style:{marginTop:"20px"}},p1("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},r("PENDING_MODAL.DISCONNECT")))),p1(gB,{version:n})))}get el(){return p6(this)}};g7.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}";let me=()=>p1("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p1("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),mt=()=>p1("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},p1("rect",{width:"400",height:"300",fill:"white"}),p1("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),p1("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),p1("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),p1("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),p1("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),p1("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),p1("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),p1("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),p1("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),p1("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),p1("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),p1("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),p1("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),p1("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),p1("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),p1("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),p1("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),p1("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),p1("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),p1("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),p1("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),p1("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),mn=class{constructor(e){pC(this,e),this.close=p9(this,"close",7),this.connectWithExtension=p9(this,"connectWithExtension",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new g6,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(e=!1){this.close.emit({shouldTerminate:e})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(e){this.tab=e,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(e){e?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;let e=e=>this.i18nInstance.t(e),t=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=g4(this.link,"svg",{ecc:"medium",scale:2});return p1(gP,{className:"select-modal"},p1("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),p1("div",{class:"modal"},p1("div",{class:"closeButtonContainer"},p1("div",{class:"right"},p1("span",{class:"closeButton",onClick:()=>this.onClose(!0)},p1(g$,null)))),p1("div",{class:"logoContainer"},p1(gW,null)),p1("div",null,p1("div",{class:"tabcontainer"},p1("div",{class:"flexContainer"},p1("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(1===n?"tabactive":"")},e("DESKTOP")),p1("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(2===n?"tabactive":"")},e("MOBILE")))),p1("div",{style:{display:1===n?"none":"block"}},p1("div",{class:"flexContainer"},p1("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},p1("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),p1("div",{class:"connectMobileText"},e("SCAN_TO_CONNECT"),p1("br",null),p1("span",{class:"blue"},p1("b",null,e("META_MASK_MOBILE_APP"))))))),p1("div",{style:{display:2===n?"none":"block"}},p1("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},p1(mt,null)),p1("div",{class:"extensionLabel"},e("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),p1("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},p1(me,null),p1("span",{class:"installExtensionText"},e("CONNECT_WITH_EXTENSION"))))),p1(gB,{version:t})))}get el(){return p6(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};mn.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}";var mr=Object.freeze({__proto__:null,mm_install_modal:g9,mm_pending_modal:g7,mm_select_modal:mn}),mi=e.i(41008),ma=e.i(49604);class mo extends ma.BaseEvmConnector{constructor(e){super(e),(0,ej.default)(this,"connectorNamespace",nC.CONNECTOR_NAMESPACES.EIP155),(0,ej.default)(this,"currentChainNamespace",e$.CHAIN_NAMESPACES.EIP155),(0,ej.default)(this,"type",tt.CONNECTOR_CATEGORY.EXTERNAL),(0,ej.default)(this,"name",eR.WALLET_CONNECTORS.METAMASK),(0,ej.default)(this,"status",tt.CONNECTOR_STATUS.NOT_READY),(0,ej.default)(this,"metamaskProvider",null),(0,ej.default)(this,"metamaskSDK",null),(0,ej.default)(this,"metamaskOptions",void 0),(0,ej.default)(this,"analytics",void 0),this.metamaskOptions=e.connectorSettings,this.analytics=e.analytics}get provider(){return this.status!==tt.CONNECTOR_STATUS.NOT_READY&&this.metamaskProvider?this.metamaskProvider:null}set provider(e){throw Error("Not implemented")}async init(e){await super.init(e);let t=this.coreOptions.chains.find(t=>t.chainId===e.chainId);super.checkInitializationRequirements({chainConfig:t});let n=await (0,nb.getSiteIcon)(window),r={name:(0,nb.getSiteName)(window)||"web3auth",url:window.location.origin||"https://web3auth.io",iconUrl:null!=n?n:void 0},i=(0,e9.default)(this.metamaskOptions||{},{dappMetadata:r});this.metamaskSDK=new py((0,eD.default)((0,eD.default)({},i),{},{_source:"web3auth",preferDesktop:!0}));let a=await this.metamaskSDK.init();a&&(this.metamaskSDK=a),this.isInjected=this.metamaskSDK.isExtensionActive(),this.status=tt.CONNECTOR_STATUS.READY,this.emit(tt.CONNECTOR_EVENTS.READY,eR.WALLET_CONNECTORS.METAMASK);try{if(e.autoConnect&&(this.rehydrated=!0,!await this.connect({chainId:e.chainId,getIdentityToken:e.getIdentityToken})))throw this.rehydrated=!1,nx.WalletLoginError.connectionError("Failed to rehydrate.")}catch(e){this.emit(tt.CONNECTOR_EVENTS.REHYDRATION_ERROR,e)}}async connect({chainId:e,getIdentityToken:t}){var n,r,i,a,o;if(super.checkConnectionRequirements(),!this.metamaskSDK)throw nx.WalletLoginError.notConnectedError("Connector is not initialized");let s=this.coreOptions.chains.find(t=>t.chainId===e);if(!s)throw nx.WalletLoginError.connectionError("Chain config is not available");let l=!this.isInjected&&!this.rehydrated,c=Date.now(),d={connector:this.name,connector_type:this.type,is_injected:this.isInjected,chain_id:(0,tn.getCaipChainId)(s),chain_name:null==s?void 0:s.displayName,chain_namespace:null==s?void 0:s.chainNamespace};try{let e;if(this.status!==tt.CONNECTOR_STATUS.CONNECTING&&(this.status=tt.CONNECTOR_STATUS.CONNECTING,this.emit(tt.CONNECTOR_EVENTS.CONNECTING,{connector:eR.WALLET_CONNECTORS.METAMASK}),!this.metamaskSDK.isExtensionActive()&&null!=(n=this.metamaskOptions)&&n.headless&&this.metamaskSDK.getProvider().on("display_uri",e=>{this.updateConnectorData({uri:e})}),await this.metamaskSDK.connect()),this.metamaskProvider=this.metamaskSDK.getProvider(),!this.metamaskProvider)throw nx.WalletLoginError.notConnectedError("Failed to connect with provider");await this.metamaskProvider.request({method:"eth_chainId"})!==s.chainId&&await this.switchChain(s,!0);let a=e=>{0===e.length&&this.disconnect()};return this.metamaskProvider.on("accountsChanged",a),this.metamaskProvider.once("disconnect",()=>{this.disconnect()}),this.status=tt.CONNECTOR_STATUS.CONNECTED,l&&(null==(r=this.analytics)||r.track(te.ANALYTICS_EVENTS.CONNECTION_STARTED,d),null==(i=this.analytics)||i.track(te.ANALYTICS_EVENTS.CONNECTION_COMPLETED,(0,eD.default)((0,eD.default)({},d),{},{duration:Date.now()-c}))),t&&(e=await this.getIdentityToken()),this.emit(tt.CONNECTOR_EVENTS.CONNECTED,{connector:eR.WALLET_CONNECTORS.METAMASK,reconnected:this.rehydrated,provider:this.metamaskProvider,identityTokenInfo:e}),this.metamaskProvider}catch(e){if(this.status=tt.CONNECTOR_STATUS.READY,this.rehydrated||this.emit(tt.CONNECTOR_EVENTS.ERRORED,e),this.rehydrated=!1,l&&(null==(a=this.analytics)||a.track(te.ANALYTICS_EVENTS.CONNECTION_STARTED,d),null==(o=this.analytics)||o.track(te.ANALYTICS_EVENTS.CONNECTION_FAILED,(0,eD.default)((0,eD.default)((0,eD.default)({},d),(0,mi.getErrorAnalyticsProperties)(e)),{},{duration:Date.now()-c}))),e instanceof nx.Web3AuthError)throw e;throw nx.WalletLoginError.connectionError("Failed to login with MetaMask wallet",e)}}async disconnect(e={cleanup:!1}){if(!this.metamaskProvider)throw nx.WalletLoginError.connectionError("MetaMask provider is not available");await super.disconnectSession(),void 0!==this.metamaskProvider.removeAllListeners&&this.metamaskProvider.removeAllListeners(),await this.metamaskSDK.terminate(),e.cleanup?(this.status=tt.CONNECTOR_STATUS.NOT_READY,this.metamaskProvider=null):this.status=tt.CONNECTOR_STATUS.READY,await super.disconnect()}async getUserInfo(){if(!this.canAuthorize)throw nx.WalletLoginError.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async switchChain(e,t=!1){super.checkSwitchChainRequirements(e,t);let n=()=>this.metamaskProvider.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainId}]});try{await n()}catch(t){if((null==t?void 0:t.code)===4902){let t=this.coreOptions.chains.find(t=>t.chainId===e.chainId&&[e$.CHAIN_NAMESPACES.EIP155].includes(t.chainNamespace));await this.addChain(t),await n()}else throw t}}async enableMFA(){throw Error("Method Not implemented")}async manageMFA(){throw Error("Method Not implemented")}async addChain(e){if(!this.metamaskProvider)throw nx.WalletLoginError.connectionError("Injected provider is not available");await this.metamaskProvider.request({method:"wallet_addEthereumChain",params:[{chainId:e.chainId,chainName:e.displayName,rpcUrls:[e.rpcTarget],blockExplorerUrls:[e.blockExplorerUrl],nativeCurrency:{name:e.tickerName,symbol:e.ticker,decimals:e.decimals||18},iconUrls:[e.logo]}]})}}let ms=["walletScope"];class ml extends eW.SafeEventEmitter{constructor(e,t){if(super(),(0,ej.default)(this,"coreOptions",void 0),(0,ej.default)(this,"status",tt.CONNECTOR_STATUS.NOT_READY),(0,ej.default)(this,"aaProvider",null),(0,ej.default)(this,"connectors",[]),(0,ej.default)(this,"commonJRPCProvider",null),(0,ej.default)(this,"analytics",void 0),(0,ej.default)(this,"plugins",{}),(0,ej.default)(this,"storage",void 0),(0,ej.default)(this,"state",{connectedConnectorName:null,cachedConnector:null,currentChainId:null,idToken:null}),(0,ej.default)(this,"loginMode",e7.LOGIN_MODE.NO_MODAL),!e.clientId)throw nx.WalletInitializationError.invalidParams("Please provide a valid clientId in constructor");e.enableLogging?nS.log.enableAll():nS.log.setLevel("error"),e.storageType||(e.storageType="local"),this.coreOptions=e,this.storage=this.getStorageMethod(),this.analytics=new te.Analytics,this.analytics.setGlobalProperties({integration_type:te.ANALYTICS_INTEGRATION_TYPE.NATIVE_SDK}),this.loadState(t),this.state.idToken&&this.coreOptions.ssr&&(this.status=this.coreOptions.initialAuthenticationMode===tt.CONNECTOR_INITIAL_AUTHENTICATION_MODE.CONNECT_AND_SIGN?tt.CONNECTOR_STATUS.AUTHORIZED:tt.CONNECTOR_STATUS.CONNECTED)}get currentChain(){var e;if(this.currentChainId)return null==(e=this.coreOptions.chains)?void 0:e.find(e=>e.chainId===this.currentChainId)}get connected(){return!!this.connectedConnector}get provider(){return this.status!==tt.CONNECTOR_STATUS.NOT_READY&&this.commonJRPCProvider?this.commonJRPCProvider:null}get connectedConnectorName(){return this.state.connectedConnectorName}get cachedConnector(){return this.state.cachedConnector}get currentChainId(){var e;return this.state.currentChainId||this.coreOptions.defaultChainId||(null==(e=this.coreOptions.chains)||null==(e=e[0])?void 0:e.chainId)||null}get connectedConnector(){var e;return this.getConnector(this.connectedConnectorName,null==(e=this.currentChain)?void 0:e.chainNamespace)}get accountAbstractionProvider(){return this.aaProvider}get idToken(){return this.state.idToken||null}set provider(e){throw Error("Not implemented")}async init(e){let t=Date.now();this.analytics.init(),this.analytics.identify(this.coreOptions.clientId,{web3auth_client_id:this.coreOptions.clientId,web3auth_network:this.coreOptions.web3AuthNetwork}),this.analytics.setGlobalProperties({dapp_url:window.location.origin,sdk_name:te.ANALYTICS_SDK_TYPE.WEB_NO_MODAL,sdk_version:tn.sdkVersion,web3auth_client_id:this.coreOptions.clientId,web3auth_network:this.coreOptions.web3AuthNetwork});let n={};try{var r,i,a;let o,{signal:s}=e||{};try{o=await (0,tn.fetchProjectConfig)({clientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork,aaProvider:null==(a=this.coreOptions.accountAbstractionConfig)?void 0:a.smartAccountType,authBuildEnv:this.coreOptions.authBuildEnv})}catch(t){let e=await (0,eU.serializeError)(t);throw nS.log.error("Failed to fetch project configurations",e),nx.WalletInitializationError.notReady("failed to fetch project configurations",e)}this.initAccountAbstractionConfig(o),this.initChainsConfig(o),this.initCachedConnectorAndChainId(),this.initUIConfig(o),this.initWalletServicesConfig(o),this.initSessionTimeConfig(o),this.analytics.setGlobalProperties({team_id:o.teamId}),n=this.getInitializationTrackData(),await (0,tn.withAbort)(()=>this.setupCommonJRPCProvider(),s),this.on(tt.CONNECTOR_EVENTS.CONNECTORS_UPDATED,async({connectors:e})=>{let t=()=>{var e;(null==(e=this.connectors)?void 0:e.length)>0&&this.cleanup()};await (0,tn.withAbort)(()=>Promise.all(e.map(this.setupConnector.bind(this))),s,t),this.status===tt.CONNECTOR_STATUS.NOT_READY&&(this.status=tt.CONNECTOR_STATUS.READY,this.emit(tt.CONNECTOR_EVENTS.READY))}),await (0,tn.withAbort)(()=>this.loadConnectors({projectConfig:o}),s),await (0,tn.withAbort)(()=>this.initPlugins(),s);let l=this.getConnector(eR.WALLET_CONNECTORS.AUTH);n=(0,eD.default)((0,eD.default)({},n),{},{connectors:this.connectors.map(e=>e.name),plugins:Object.keys(this.plugins),auth_ux_mode:(null==l||null==(r=l.authInstance)||null==(r=r.options)?void 0:r.uxMode)||(null==(i=this.coreOptions.uiConfig)?void 0:i.uxMode)}),this.analytics.track(te.ANALYTICS_EVENTS.SDK_INITIALIZATION_COMPLETED,(0,eD.default)((0,eD.default)({},n),{},{duration:Date.now()-t}))}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;throw this.analytics.track(te.ANALYTICS_EVENTS.SDK_INITIALIZATION_FAILED,(0,eD.default)((0,eD.default)((0,eD.default)({},n),(0,tn.getErrorAnalyticsProperties)(e)),{},{duration:Date.now()-t})),nS.log.error("Failed to initialize modal",e),e}}getConnector(e,t){return this.connectors.find(n=>n.name===e&&(!t||n.connectorNamespace===nC.CONNECTOR_NAMESPACES.MULTICHAIN||n.connectorNamespace===t))||null}clearCache(){this.setState({connectedConnectorName:null,cachedConnector:null,currentChainId:null,idToken:null})}async cleanup(){for(let e of this.connectors)e.cleanup&&await e.cleanup()}async switchChain(e){var t;if(e.chainId!==(null==(t=this.currentChain)?void 0:t.chainId)){if(!this.coreOptions.chains.find(t=>t.chainId===e.chainId))throw nx.WalletInitializationError.invalidParams("Invalid chainId");if(n_.CONNECTED_STATUSES.includes(this.status)&&this.connectedConnector)return void await this.connectedConnector.switchChain(e);if(this.commonJRPCProvider)return void await this.commonJRPCProvider.switchChain(e);throw nx.WalletInitializationError.notReady("No wallet is ready")}}async connectTo(e,t,n){let r;this.loginMode=n||"no-modal";let i=this.getConnector(e,null==t?void 0:t.chainNamespace);if(!i||!this.commonJRPCProvider)throw nx.WalletInitializationError.notFound(`Please add wallet connector for ${e} wallet, before connecting`);let a=this.getInitialChainIdForConnector(i),o=(0,eD.default)((0,eD.default)({},t),{},{chainId:a.chainId,getIdentityToken:this.coreOptions.initialAuthenticationMode===tt.CONNECTOR_INITIAL_AUTHENTICATION_MODE.CONNECT_AND_SIGN}),s=Date.now();if(e===eR.WALLET_CONNECTORS.AUTH){var l;let n=i.getOAuthProviderConfig({authConnection:t.authConnection,authConnectionId:t.authConnectionId,groupedAuthConnectionId:t.groupedAuthConnectionId});r={connector:e,connector_type:i.type,chain_id:(0,tn.getCaipChainId)(a),chain_name:a.displayName,chain_namespace:a.chainNamespace,auth_connection:t.authConnection,auth_connection_id:t.authConnectionId,group_auth_connection_id:t.groupedAuthConnectionId,mfa_level:t.mfaLevel,wallet_key_enabled:t.getWalletKey,extra_login_options_enabled:!!t.extraLoginOptions,dapp_share_enabled:!!t.dappShare,curve:t.curve,auth_dapp_url:t.dappUrl,is_sfa:!!t.idToken,is_default_auth_connection:null==n?void 0:n.isDefault,auth_ux_mode:null==(l=i.authInstance)||null==(l=l.options)?void 0:l.uxMode}}else r={connector:e,connector_type:i.type,is_injected:i.isInjected,chain_id:(0,tn.getCaipChainId)(a),chain_name:a.displayName,chain_namespace:a.chainNamespace};return this.analytics.track(te.ANALYTICS_EVENTS.CONNECTION_STARTED,r),new Promise((e,t)=>{let n=!1,l=!1,c=()=>{this.removeListener(tt.CONNECTOR_EVENTS.CONNECTED,h),this.removeListener(tt.CONNECTOR_EVENTS.ERRORED,p),this.removeListener(tt.CONNECTOR_EVENTS.AUTHORIZED,f)},d=async()=>{o.getIdentityToken?n&&l&&await u():n&&await u()},u=async()=>{try{let t=await i.getUserInfo();this.analytics.track(te.ANALYTICS_EVENTS.CONNECTION_COMPLETED,(0,eD.default)((0,eD.default)({},r),{},{is_mfa_enabled:null==t?void 0:t.isMfaEnabled,duration:Date.now()-s})),c(),e(this.provider)}catch(e){c(),t(e)}},h=async()=>{n=!0,await d()},f=async()=>{l=!0,await d()},p=async e=>{this.analytics.track(te.ANALYTICS_EVENTS.CONNECTION_FAILED,(0,eD.default)((0,eD.default)((0,eD.default)({},r),(0,tn.getErrorAnalyticsProperties)(e)),{},{duration:Date.now()-s})),c(),t(e)};this.once(tt.CONNECTOR_EVENTS.CONNECTED,h),o.getIdentityToken&&this.once(tt.CONNECTOR_EVENTS.AUTHORIZED,f),this.once(tt.CONNECTOR_EVENTS.ERRORED,p),i.connect(o),this.setCurrentChain(a.chainId)})}async logout(e={cleanup:!1}){if(!n_.CONNECTED_STATUSES.includes(this.status)||!this.connectedConnector)throw nx.WalletLoginError.notConnectedError("No wallet is connected");this.connectedConnector.status!==tt.CONNECTOR_STATUS.DISCONNECTING&&await this.connectedConnector.disconnect(e)}async getUserInfo(){var e;if(nS.log.debug("Getting user info",this.status,null==(e=this.connectedConnector)?void 0:e.name),!n_.CAN_AUTHORIZE_STATUSES.includes(this.status)||!this.connectedConnector)throw nx.WalletLoginError.notConnectedError("No wallet is connected");return this.connectedConnector.getUserInfo()}async enableMFA(e){var t;if(!n_.CONNECTED_STATUSES.includes(this.status)||!this.connectedConnector)throw nx.WalletLoginError.notConnectedError("No wallet is connected");if(this.connectedConnector.name!==eR.WALLET_CONNECTORS.AUTH)throw nx.WalletLoginError.unsupportedOperation("EnableMFA is not supported for this connector.");let n=this.connectedConnector,r={connector:this.connectedConnector.name,auth_ux_mode:null==(t=n.authInstance)||null==(t=t.options)?void 0:t.uxMode};try{this.analytics.track(te.ANALYTICS_EVENTS.MFA_ENABLEMENT_STARTED,r),await this.connectedConnector.enableMFA(e)}catch(e){throw this.analytics.track(te.ANALYTICS_EVENTS.MFA_ENABLEMENT_FAILED,(0,eD.default)((0,eD.default)({},r),(0,tn.getErrorAnalyticsProperties)(e))),e}}async manageMFA(e){var t;if(!n_.CONNECTED_STATUSES.includes(this.status)||!this.connectedConnector)throw nx.WalletLoginError.notConnectedError("No wallet is connected");if(this.connectedConnector.name!==eR.WALLET_CONNECTORS.AUTH)throw nx.WalletLoginError.unsupportedOperation("ManageMFA is not supported for this connector.");let n=this.connectedConnector,r={connector:this.connectedConnector.name,auth_ux_mode:null==(t=n.authInstance)||null==(t=t.options)?void 0:t.uxMode};try{this.analytics.track(te.ANALYTICS_EVENTS.MFA_MANAGEMENT_SELECTED,r),await this.connectedConnector.manageMFA(e)}catch(e){throw this.analytics.track(te.ANALYTICS_EVENTS.MFA_MANAGEMENT_FAILED,(0,eD.default)((0,eD.default)({},r),(0,tn.getErrorAnalyticsProperties)(e))),e}}async getIdentityToken(){if(!n_.CAN_AUTHORIZE_STATUSES.includes(this.status)||!this.connectedConnector)throw nx.WalletLoginError.notConnectedError("No wallet is connected");let e={connector:this.connectedConnector.name};try{this.analytics.track(te.ANALYTICS_EVENTS.IDENTITY_TOKEN_STARTED,e);let t=await this.connectedConnector.getIdentityToken();return this.analytics.track(te.ANALYTICS_EVENTS.IDENTITY_TOKEN_COMPLETED,e),t}catch(t){throw this.analytics.track(te.ANALYTICS_EVENTS.IDENTITY_TOKEN_FAILED,(0,eD.default)((0,eD.default)({},e),(0,tn.getErrorAnalyticsProperties)(t))),t}}getPlugin(e){return this.plugins[e]||null}setAnalyticsProperties(e){this.analytics.setGlobalProperties(e)}initChainsConfig(e){let t=new Map;for(let n of[...e.chains||[],...this.coreOptions.chains||[]]){let e=t.get(n.chainId);e?t.set(n.chainId,(0,eD.default)((0,eD.default)({},e),n)):t.set(n.chainId,n)}if(this.coreOptions.chains=Array.from(t.values()),0===this.coreOptions.chains.length)throw nS.log.error("chain info not found. Please configure chains on dashboard at https://dashboard.web3auth.io"),nx.WalletInitializationError.invalidParams("Please configure chains on dashboard at https://dashboard.web3auth.io");let n=new Set(Object.values(e$.CHAIN_NAMESPACES));for(let e of this.coreOptions.chains){if(!e.chainNamespace||!n.has(e.chainNamespace))throw nS.log.error(`Please provide a valid chainNamespace in chains for chain ${e.chainId}`),nx.WalletInitializationError.invalidParams(`Please provide a valid chainNamespace in chains for chain ${e.chainId}`);if(e.chainNamespace!==e$.CHAIN_NAMESPACES.OTHER&&!(0,tn.isHexStrict)(e.chainId))throw nS.log.error(`Please provide a valid chainId in chains for chain ${e.chainId}`),nx.WalletInitializationError.invalidParams(`Please provide a valid chainId as hex string in chains for chain ${e.chainId}`);if(e.chainNamespace!==e$.CHAIN_NAMESPACES.OTHER)try{new URL(e.rpcTarget)}catch(t){throw nS.log.error(`Please provide a valid rpcTarget in chains for chain ${e.chainId}`,t),nx.WalletInitializationError.invalidParams(`Please provide a valid rpcTarget in chains for chain ${e.chainId}`)}}if(this.coreOptions.accountAbstractionConfig){if(0===this.coreOptions.accountAbstractionConfig.chains.length)throw nS.log.error("Please configure chains for smart accounts on dashboard at https://dashboard.web3auth.io"),nx.WalletInitializationError.invalidParams("Please configure chains for smart accounts on dashboard at https://dashboard.web3auth.io");for(let e of this.coreOptions.accountAbstractionConfig.chains){if(!(0,tn.isHexStrict)(e.chainId))throw nS.log.error(`Please provide a valid chainId in accountAbstractionConfig.chains for chain ${e.chainId}`),nx.WalletInitializationError.invalidParams(`Please provide a valid chainId in accountAbstractionConfig.chains for chain ${e.chainId}`);try{var r;new URL(null==(r=e.bundlerConfig)?void 0:r.url)}catch(t){throw nS.log.error(`Please provide a valid bundlerConfig.url in accountAbstractionConfig.chains for chain ${e.chainId}`,t),nx.WalletInitializationError.invalidParams(`Please provide a valid bundlerConfig.url in accountAbstractionConfig.chains for chain ${e.chainId}`)}if(!t.has(e.chainId))throw nS.log.error(`Please provide chain config for AA chain in accountAbstractionConfig.chains for chain ${e.chainId}`),nx.WalletInitializationError.invalidParams(`Please provide chain config for AA chain in accountAbstractionConfig.chains for chain ${e.chainId}`)}}}initAccountAbstractionConfig(e){var t;if(!(this.coreOptions.accountAbstractionConfig||(null==e?void 0:e.smartAccounts)))return;let n=(null==e?void 0:e.smartAccounts)||{},{walletScope:r}=n,i=(0,eB.default)(n,ms),a=new Map;for(let e of[...(null==i?void 0:i.chains)||[],...(null==(t=this.coreOptions.accountAbstractionConfig)?void 0:t.chains)||[]]){let t=a.get(e.chainId);t?a.set(e.chainId,(0,eD.default)((0,eD.default)({},t),e)):a.set(e.chainId,e)}this.coreOptions.accountAbstractionConfig=(0,eD.default)((0,eD.default)({},(0,e9.default)(i||{},this.coreOptions.accountAbstractionConfig||{})),{},{chains:Array.from(a.values())}),void 0===this.coreOptions.useAAWithExternalWallet&&(this.coreOptions.useAAWithExternalWallet=r===e7.SMART_ACCOUNT_WALLET_SCOPE.ALL)}initUIConfig(e){this.coreOptions.uiConfig=e9.default.all([{mode:"light",uxMode:eK.UX_MODE.POPUP},(0,eH.cloneDeep)(e.whitelabel||{}),this.coreOptions.uiConfig||{}])}initSessionTimeConfig(e){!this.coreOptions.sessionTime&&e.sessionTime&&(this.coreOptions.sessionTime=e.sessionTime)}initCachedConnectorAndChainId(){let e=this.state.currentChainId,t=e&&this.coreOptions.chains.some(t=>t.chainId===e);if(this.coreOptions.defaultChainId&&!(0,tn.isHexStrict)(this.coreOptions.defaultChainId))throw nx.WalletInitializationError.invalidParams("Please provide a valid defaultChainId in constructor");let n=t?e:this.coreOptions.defaultChainId||this.coreOptions.chains[0].chainId;this.setState({currentChainId:n})}initWalletServicesConfig(e){var t,n,r,i,a,o;let{enableKeyExport:s,walletUi:l}=e,{enablePortfolioWidget:c=!1,enableTokenDisplay:d=!0,enableNftDisplay:u=!0,enableWalletConnect:h=!0,enableBuyButton:f=!0,enableSendButton:p=!0,enableSwapButton:g=!0,enableReceiveButton:m=!0,enableShowAllTokensButton:w=!0,enableConfirmationModal:y=!1,enableDefiPositionsDisplay:v=!0,portfolioWidgetPosition:b="bottom-left",defaultPortfolio:E="token"}=l||{},C=e9.default.all([{showWidgetButton:c,hideNftDisplay:!u,hideTokenDisplay:!d,hideTransfers:!p,hideTopup:!f,hideReceive:!m,hideSwap:!g,hideShowAllTokens:!w,hideWalletConnect:!h,hideDefiPositionsDisplay:!v,buttonPosition:b,defaultPortfolio:E},(null==(t=this.coreOptions.walletServicesConfig)?void 0:t.whiteLabel)||{}]),x=null!=(n=null==(r=this.coreOptions.walletServicesConfig)?void 0:r.confirmationStrategy)?n:y?"modal":"auto-approve",S=null==(i=null!=(a=null==(o=this.coreOptions.walletServicesConfig)?void 0:o.enableKeyExport)?a:s)||i;this.coreOptions.walletServicesConfig=(0,eD.default)((0,eD.default)({},this.coreOptions.walletServicesConfig),{},{confirmationStrategy:x,whiteLabel:C,enableKeyExport:S})}getInitializationTrackData(){try{var e,t,n,r,i;let a=null==(e=this.coreOptions.chains)?void 0:e.find(e=>e.chainId===this.coreOptions.defaultChainId),o=Array.from(new Set(null==(t=this.coreOptions.chains)?void 0:t.map(e=>(0,tn.getHostname)(e.rpcTarget)))).filter(Boolean);return(0,eD.default)((0,eD.default)((0,eD.default)({chain_ids:null==(n=this.coreOptions.chains)?void 0:n.map(e=>(0,tn.getCaipChainId)(e)),chain_names:null==(r=this.coreOptions.chains)?void 0:r.map(e=>e.displayName),chain_rpc_targets:o,default_chain_id:a?(0,tn.getCaipChainId)(a):void 0,default_chain_name:null==a?void 0:a.displayName,logging_enabled:this.coreOptions.enableLogging,storage_type:this.coreOptions.storageType,session_time:this.coreOptions.sessionTime,sfa_key_enabled:this.coreOptions.useSFAKey,mipd_enabled:this.coreOptions.multiInjectedProviderDiscovery,private_key_provider_enabled:!!this.coreOptions.privateKeyProvider,ssr_enabled:this.coreOptions.ssr,auth_build_env:this.coreOptions.authBuildEnv,auth_ux_mode:null==(i=this.coreOptions.uiConfig)?void 0:i.uxMode,auth_mfa_level:this.coreOptions.mfaLevel,auth_mfa_settings:Object.keys(this.coreOptions.mfaSettings||{}),aa_enabled_for_external_wallets:this.coreOptions.accountAbstractionConfig?this.coreOptions.useAAWithExternalWallet:void 0},(0,tn.getWhitelabelAnalyticsProperties)(this.coreOptions.uiConfig)),(0,tn.getAaAnalyticsProperties)(this.coreOptions.accountAbstractionConfig)),(0,tn.getWalletServicesAnalyticsProperties)(this.coreOptions.walletServicesConfig))}catch(e){return nS.log.error("Failed to get initialization track data",e),{}}}async setupCommonJRPCProvider(){this.commonJRPCProvider=await tr.CommonJRPCProvider.getProviderInstance({chain:this.currentChain,chains:this.coreOptions.chains}),this.commonJRPCProvider.on("chainChanged",e=>this.setCurrentChain(e))}async setupConnector(e){this.subscribeToConnectorEvents(e);try{let t=this.getInitialChainIdForConnector(e),n=this.checkIfAutoConnect(e);await e.init({autoConnect:n,chainId:t.chainId,getIdentityToken:this.coreOptions.initialAuthenticationMode===tt.CONNECTOR_INITIAL_AUTHENTICATION_MODE.CONNECT_AND_SIGN})}catch(t){nS.log.error(t,e.name)}}async loadConnectors({projectConfig:t,modalMode:n}){var r;let i,a,o=[...this.coreOptions.connectors||[],({projectConfig:e,coreOptions:t})=>{var n,r,a,o;let s={},{whitelist:l,sessionTime:c}=e;l&&(s.originData=l.signed_urls),t.sessionTime?s.sessionTime=t.sessionTime:c&&(s.sessionTime=c),null!=(n=t.uiConfig)&&n.uxMode&&(s.uxMode=t.uiConfig.uxMode);let d=t.uiConfig||{};s.whiteLabel=d;let u=e9.default.all([{uxMode:eK.UX_MODE.POPUP,buildEnv:t.authBuildEnv||tD.BUILD_ENV.PRODUCTION},s,(null==i?void 0:i.connectorSettings)||{}]),h=e9.default.all([d,(null==(r=t.walletServicesConfig)?void 0:r.whiteLabel)||{}]),f=(0,eD.default)((0,eD.default)({},t.walletServicesConfig),{},{whiteLabel:h,accountAbstractionConfig:t.accountAbstractionConfig,enableLogging:t.enableLogging}),p=null==(a=null==(o=t.walletServicesConfig)?void 0:o.enableKeyExport)||a;return t.privateKeyProvider&&t.privateKeyProvider.setKeyExportFlag(p),new nT({connectorSettings:u,walletServicesSettings:f,loginSettings:(0,eD.default)((0,eD.default)({},(null==i?void 0:i.loginSettings)||{}),{},{mfaLevel:t.mfaLevel}),coreOptions:t,authConnectionConfig:e.embeddedWalletAuth})}],s={projectConfig:t,coreOptions:this.coreOptions,analytics:this.analytics},l=!!t.externalWalletAuth,c=l&&(null==(r=this.coreOptions.multiInjectedProviderDiscovery)||r),d=new Set(this.coreOptions.chains.map(e=>e.chainNamespace));if((0,tn.isBrowser)()&&d.has(e$.CHAIN_NAMESPACES.EIP155)&&o.push((a=n?{headless:!0}:void 0,({coreOptions:e,analytics:t})=>new mo({connectorSettings:a,coreOptions:e,analytics:t}))),c&&(0,tn.isBrowser)()){if(d.has(e$.CHAIN_NAMESPACES.SOLANA)){let{createSolanaMipd:t,hasSolanaWalletStandardFeatures:n,walletStandardConnector:r}=await e.A(51307),i=t();i.on("register",async(...e)=>{let t=e.filter(n).map(e=>r(e)(s));this.setConnectors(t)}),o.push(...i.get().filter(e=>n(e)).map(r))}if(d.has(e$.CHAIN_NAMESPACES.EIP155)){let{createMipd:t,injectedEvmConnector:n}=await e.A(2810),r=t();r.subscribe(e=>{let t=e.map(e=>n(e)(s));this.setConnectors(t)}),o.push(...r.getProviders().map(n))}}if((0,tn.isBrowser)()&&l&&(d.has(e$.CHAIN_NAMESPACES.SOLANA)||d.has(e$.CHAIN_NAMESPACES.EIP155))){let{walletConnectV2Connector:t}=await e.A(49657);o.push(t())}let u=o.map(e=>e(s));this.setConnectors(u)}async initPlugins(){let{chains:e,plugins:t}=this.coreOptions,n=t||[];for(let t of(e.some(e=>e.chainNamespace===e$.CHAIN_NAMESPACES.EIP155||e.chainNamespace===e$.CHAIN_NAMESPACES.SOLANA)&&n.push(()=>new nL),n)){let e=t();this.plugins[e.name]||(this.plugins[e.name]=e)}}setConnectors(e){let t=e=>`${e.connectorNamespace}-${e.name}`,n=new Set(this.connectors.map(t)),r=e.map(e=>{let r=t(e);return n.has(r)?null:(n.add(r),e)}).filter(e=>null!==e);r.length>0&&(this.connectors=[...this.connectors,...r],this.emit(tt.CONNECTOR_EVENTS.CONNECTORS_UPDATED,{connectors:r}))}subscribeToConnectorEvents(t){t.on(tt.CONNECTOR_EVENTS.CONNECTED,async n=>{var r,i,a;if(!this.commonJRPCProvider)throw nx.WalletInitializationError.notFound("CommonJrpcProvider not found");let{provider:o,identityTokenInfo:s}=n;if(s&&this.setState({idToken:s.idToken}),this.coreOptions.ssr)try{let e=await t.getIdentityToken();if(!e.idToken)throw nx.WalletLoginError.connectionError("No idToken found");this.setState({idToken:e.idToken})}catch(e){nS.log.error(e),this.status=tt.CONNECTOR_STATUS.ERRORED,this.emit(tt.CONNECTOR_EVENTS.ERRORED,e,this.loginMode);return}let l=o.provider||o,{accountAbstractionConfig:c}=this.coreOptions;if((null==(r=this.currentChain)?void 0:r.chainNamespace)===e$.CHAIN_NAMESPACES.EIP155&&(null==c||null==(i=c.chains)?void 0:i.some(e=>{var t;return e.chainId===(null==(t=this.currentChain)?void 0:t.chainId)}))&&(n.connector===eR.WALLET_CONNECTORS.AUTH||this.coreOptions.useAAWithExternalWallet)){let{accountAbstractionProvider:t,toEoaProvider:r}=await e.A(35451),i=n.connector===eR.WALLET_CONNECTORS.AUTH?await r(o):o,s=new Set((null==c||null==(a=c.chains)?void 0:a.map(e=>e.chainId))||[]),d=await t({accountAbstractionConfig:c,provider:i,chain:this.currentChain,chains:this.coreOptions.chains.filter(e=>s.has(e.chainId)),useProviderAsTransport:n.connector===eR.WALLET_CONNECTORS.AUTH});this.aaProvider=d,n.connector!==eR.WALLET_CONNECTORS.AUTH&&this.coreOptions.useAAWithExternalWallet&&(l=this.aaProvider)}this.commonJRPCProvider.updateProviderEngineProxy(l),this.setState({connectedConnectorName:n.connector}),this.cacheWallet(n.connector),this.status=tt.CONNECTOR_STATUS.CONNECTED,nS.log.debug("connected",this.status,this.connectedConnectorName),this.connectToPlugins((0,eD.default)((0,eD.default)({},n),{},{connector:n.connector})),this.emit(tt.CONNECTOR_EVENTS.CONNECTED,(0,eD.default)((0,eD.default)({},n),{},{loginMode:this.loginMode}))}),t.on(tt.CONNECTOR_EVENTS.DISCONNECTED,async()=>{this.commonJRPCProvider.removeAllListeners(),this.setupCommonJRPCProvider(),this.status=tt.CONNECTOR_STATUS.READY;let e=this.state.cachedConnector;this.connectedConnectorName===e&&this.clearCache(),nS.log.debug("disconnected",this.status,this.connectedConnectorName),await Promise.all(Object.values(this.plugins).map(async e=>{if(e.SUPPORTED_CONNECTORS.includes(t.name)&&e.status===nO.CONNECTED)return e.disconnect().catch(e=>{5211!==e.code&&nS.log.error(e)})})),this.setState({connectedConnectorName:null}),this.emit(tt.CONNECTOR_EVENTS.DISCONNECTED)}),t.on(tt.CONNECTOR_EVENTS.CONNECTING,e=>{this.status=tt.CONNECTOR_STATUS.CONNECTING,this.emit(tt.CONNECTOR_EVENTS.CONNECTING,e),nS.log.debug("connecting",this.status,this.connectedConnectorName)}),t.on(tt.CONNECTOR_EVENTS.ERRORED,e=>{this.status=tt.CONNECTOR_STATUS.ERRORED,this.clearCache(),this.emit(tt.CONNECTOR_EVENTS.ERRORED,e,this.loginMode),nS.log.debug("errored",this.status,this.connectedConnectorName)}),t.on(tt.CONNECTOR_EVENTS.REHYDRATION_ERROR,e=>{this.status=tt.CONNECTOR_STATUS.READY,this.clearCache(),this.emit(tt.CONNECTOR_EVENTS.REHYDRATION_ERROR,e)}),t.on(tt.CONNECTOR_EVENTS.CONNECTOR_DATA_UPDATED,e=>{nS.log.debug("connector data updated",e),this.emit(tt.CONNECTOR_EVENTS.CONNECTOR_DATA_UPDATED,e)}),t.on(tt.CONNECTOR_EVENTS.CACHE_CLEAR,e=>{nS.log.debug("connector cache clear",e),this.clearCache()}),t.on(tt.CONNECTOR_EVENTS.MFA_ENABLED,e=>{var t;nS.log.debug("mfa enabled",e);let n=this.connectedConnector;this.analytics.track(te.ANALYTICS_EVENTS.MFA_ENABLEMENT_COMPLETED,{connector:this.connectedConnector.name,auth_ux_mode:null==(t=n.authInstance)||null==(t=t.options)?void 0:t.uxMode,is_mfa_enabled:e}),this.emit(tt.CONNECTOR_EVENTS.MFA_ENABLED,e)}),t.on(tt.CONNECTOR_EVENTS.AUTHORIZING,e=>{this.status=tt.CONNECTOR_STATUS.AUTHORIZING,this.emit(tt.CONNECTOR_EVENTS.AUTHORIZING,e),nS.log.debug("authorizing",this.status,this.connectedConnectorName)}),t.on(tt.CONNECTOR_EVENTS.AUTHORIZED,e=>{this.status=tt.CONNECTOR_STATUS.AUTHORIZED,this.setState({idToken:e.identityTokenInfo.idToken}),this.emit(tt.CONNECTOR_EVENTS.AUTHORIZED,e),nS.log.debug("authorized",this.status,this.connectedConnectorName)})}checkInitRequirements(){if(this.status===tt.CONNECTOR_STATUS.READY)throw nx.WalletInitializationError.notReady("Connector is already initialized")}checkIfAutoConnect(e){var t;let n=this.cachedConnector===e.name;return n&&null!=(t=this.currentChain)&&t.chainNamespace&&(n=e.connectorNamespace===nC.CONNECTOR_NAMESPACES.MULTICHAIN||e.connectorNamespace===this.currentChain.chainNamespace),n}getInitialChainIdForConnector(e){var t;let n=this.currentChain;if((null==(t=n)?void 0:t.chainNamespace)!==e.connectorNamespace&&e.connectorNamespace!==nC.CONNECTOR_NAMESPACES.MULTICHAIN&&!(n=this.coreOptions.chains.find(t=>t.chainNamespace===e.connectorNamespace)))throw nx.WalletInitializationError.invalidParams(`No chain found for ${e.connectorNamespace}`);return n}cacheWallet(e){this.setState({cachedConnector:e})}setCurrentChain(e){if(e!==this.currentChainId){if(!this.coreOptions.chains.find(t=>t.chainId===e))throw nx.WalletInitializationError.invalidParams(`Invalid chainId: ${e}`);this.setState({currentChainId:e})}}connectToPlugins(e){Object.values(this.plugins).map(async t=>{try{var n;if(!t.SUPPORTED_CONNECTORS.includes(e.connector)||t.pluginNamespace!==nN.MULTICHAIN&&t.pluginNamespace!==(null==(n=this.currentChain)?void 0:n.chainNamespace)||t.status===nO.CONNECTED)return;await t.initWithWeb3Auth(this,this.coreOptions.uiConfig,this.analytics),await t.connect()}catch(e){if(5211===e.code)return;nS.log.error(e)}})}setState(e){this.state=(0,eD.default)((0,eD.default)({},this.state),e),this.storage.setItem(e7.WEB3AUTH_STATE_STORAGE_KEY,JSON.stringify(this.state))}loadState(e){if(e){this.state=e;return}let t=this.storage.getItem(e7.WEB3AUTH_STATE_STORAGE_KEY);t&&(this.state=JSON.parse(t,(e,t)=>{var n,r;let i=t;return(null==(n=i)?void 0:n.__type)==="bigint"&&(i=BigInt(i.value)),(null==(r=i)?void 0:r.__type)==="Map"&&(i=new Map(i.value)),i}))}getStorageMethod(){if(this.coreOptions.ssr||"cookies"===this.coreOptions.storageType){let e;return e={expiry:this.coreOptions.sessionTime},{getItem(e){if("undefined"==typeof window)return null;let t=function(e,t){let n=e.split("; ").find(e=>e.startsWith(`${t}=`));if(n)return n.substring(t.length+1)}(document.cookie,e);return null!=t?t:null},setItem(t,n){if("undefined"==typeof window)return;let r=`${t}=${n};path=/;samesite=Lax`;null!=e&&e.expiry&&"number"==typeof e.expiry&&(r+=`; expires=${new Date(Date.now()+e.expiry).toUTCString()}`),r+="; secure",document.cookie=r},removeItem(e){"undefined"!=typeof window&&(document.cookie=`${e}=;max-age=-1;path=/`)}}}return"session"===this.coreOptions.storageType&&(0,nD.storageAvailable)("sessionStorage")?window.sessionStorage:"local"===this.coreOptions.storageType&&(0,nD.storageAvailable)("localStorage")?window.localStorage:new e8}}let mc={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},md={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};mc.MAINNET,mc.TESTNET,mc.CYAN,mc.AQUA,mc.CELESTE,mc.AQUA,md.SAPPHIRE_MAINNET,mc.CELESTE,md.SAPPHIRE_MAINNET,mc.CYAN,md.SAPPHIRE_MAINNET,mc.MAINNET,md.SAPPHIRE_MAINNET,mc.TESTNET,md.SAPPHIRE_DEVNET,mc.MAINNET,mc.TESTNET,mc.CYAN,mc.AQUA,mc.CELESTE,md.SAPPHIRE_MAINNET,md.SAPPHIRE_DEVNET,mc.MAINNET,mc.TESTNET,mc.CYAN,mc.AQUA,mc.CELESTE,mc.MAINNET,mc.TESTNET,mc.CYAN,mc.AQUA,mc.CELESTE;let mu=(0,eD.default)((0,eD.default)({},md),mc),mh="production";function mf(e){return e.charAt(0).toUpperCase()+e.slice(1)}let mp=new Set([eK.AUTH_CONNECTION.CUSTOM,eK.AUTH_CONNECTION.PASSKEYS,eK.AUTH_CONNECTION.TELEGRAM,eK.AUTH_CONNECTION.AUTHENTICATOR]),mg=Object.values(eK.AUTH_CONNECTION).filter(e=>!mp.has(e)),mm=mg.reduce((e,t)=>("email_passwordless"===t?e[t]="Email":"sms_passwordless"===t?e[t]="Mobile":e[t]=mf(t),e),{}),mw={development:"https://api-develop.web3auth.io/passwordless-service",staging:"https://api.web3auth.io/passwordless-service",[mh]:"https://api.web3auth.io/passwordless-service",testing:"https://api-develop.web3auth.io/passwordless-service"},my="MODAL_VISIBILITY",mv="initialized",mb="connected",mE="connecting",mC="errored",mx="authorizing",mS="authorized",m_=((y$={}).SUCCESS="success",y$.ERROR="error",y$.WARNING="warning",y$.INFO="info",y$);!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap");.w3a-parent-container *,.w3a-parent-container :after,.w3a-parent-container :before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.w3a-parent-container ::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }\n/*! tailwindcss v3.4.18 | MIT License | https://tailwindcss.com*/.w3a-parent-container *,.w3a-parent-container :after,.w3a-parent-container :before{border:0 solid;box-sizing:border-box}.w3a-parent-container :after,.w3a-parent-container :before{--tw-content:""}.w3a-parent-container :host,.w3a-parent-container html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}.w3a-parent-container body{line-height:inherit;margin:0}.w3a-parent-container hr{border-top-width:1px;color:inherit;height:0}.w3a-parent-container abbr:where([title]){text-decoration:underline dotted}.w3a-parent-container h1,.w3a-parent-container h2,.w3a-parent-container h3,.w3a-parent-container h4,.w3a-parent-container h5,.w3a-parent-container h6{font-size:inherit;font-weight:inherit}.w3a-parent-container a{color:inherit;text-decoration:inherit}.w3a-parent-container b,.w3a-parent-container strong{font-weight:bolder}.w3a-parent-container code,.w3a-parent-container kbd,.w3a-parent-container pre,.w3a-parent-container samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}.w3a-parent-container small{font-size:80%}.w3a-parent-container sub,.w3a-parent-container sup{font-size:75%;line-height:0;position:relative;vertical-align:initial}.w3a-parent-container sub{bottom:-.25em}.w3a-parent-container sup{top:-.5em}.w3a-parent-container table{border-collapse:collapse;border-color:inherit;text-indent:0}.w3a-parent-container button,.w3a-parent-container input,.w3a-parent-container optgroup,.w3a-parent-container select,.w3a-parent-container textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}.w3a-parent-container button,.w3a-parent-container select{text-transform:none}.w3a-parent-container button,.w3a-parent-container input:where([type=button]),.w3a-parent-container input:where([type=reset]),.w3a-parent-container input:where([type=submit]){-webkit-appearance:button;background-color:initial;background-image:none}.w3a-parent-container :-moz-focusring{outline:auto}.w3a-parent-container :-moz-ui-invalid{box-shadow:none}.w3a-parent-container progress{vertical-align:initial}.w3a-parent-container ::-webkit-inner-spin-button,.w3a-parent-container ::-webkit-outer-spin-button{height:auto}.w3a-parent-container [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.w3a-parent-container ::-webkit-search-decoration{-webkit-appearance:none}.w3a-parent-container ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.w3a-parent-container summary{display:list-item}.w3a-parent-container blockquote,.w3a-parent-container dd,.w3a-parent-container dl,.w3a-parent-container figure,.w3a-parent-container h1,.w3a-parent-container h2,.w3a-parent-container h3,.w3a-parent-container h4,.w3a-parent-container h5,.w3a-parent-container h6,.w3a-parent-container hr,.w3a-parent-container p,.w3a-parent-container pre{margin:0}.w3a-parent-container fieldset{margin:0;padding:0}.w3a-parent-container legend{padding:0}.w3a-parent-container menu,.w3a-parent-container ol,.w3a-parent-container ul{list-style:none;margin:0;padding:0}.w3a-parent-container dialog{padding:0}.w3a-parent-container textarea{resize:vertical}.w3a-parent-container input::placeholder,.w3a-parent-container textarea::placeholder{color:#9ca3af;opacity:1}.w3a-parent-container [role=button],.w3a-parent-container button{cursor:pointer}.w3a-parent-container :disabled{cursor:default}.w3a-parent-container audio,.w3a-parent-container canvas,.w3a-parent-container embed,.w3a-parent-container iframe,.w3a-parent-container img,.w3a-parent-container object,.w3a-parent-container svg,.w3a-parent-container video{display:block;vertical-align:middle}.w3a-parent-container img,.w3a-parent-container video{height:auto;max-width:100%}.w3a-parent-container [hidden]:where(:not([hidden=until-found])){display:none}.w3a-parent-container{--app-on-primary:#fff;--app-primary-50:#ebf5ff;--app-primary-100:#e1effe;--app-primary-200:#c3ddfd;--app-primary-300:#a4cafe;--app-primary-400:#76a9fa;--app-primary-500:#3f83f8;--app-primary-600:#0346ff;--app-primary-700:#1a56db;--app-primary-800:#1e429f;--app-primary-900:#233876;--app-gray-50:#f9fafb;--app-gray-100:#f3f4f6;--app-gray-200:#e5e7eb;--app-gray-300:#d1d5db;--app-gray-400:#9ca3af;--app-gray-500:#6b7280;--app-gray-600:#4b5563;--app-gray-700:#374151;--app-gray-800:#1f2a37;--app-gray-900:#111928;--app-blue-50:#ebf5ff;--app-blue-100:#e1effe;--app-blue-200:#c3ddfd;--app-blue-300:#a4cafe;--app-blue-400:#76a9fa;--app-blue-500:#3f83f8;--app-blue-600:#0346ff;--app-blue-700:#1a56db;--app-blue-800:#1e429f;--app-blue-900:#233876;--app-red-50:#fdf2f2;--app-red-100:#fde8e8;--app-red-200:#fbd5d5;--app-red-300:#f8b4b4;--app-red-400:#f98080;--app-red-500:#f05252;--app-red-600:#e02424;--app-red-700:#c81e1e;--app-red-800:#9b1c1c;--app-red-900:#771d1d;--app-green-50:#f3faf7;--app-green-100:#def7ec;--app-green-200:#bcf0da;--app-green-300:#84e1bc;--app-green-400:#31c48d;--app-green-500:#0e9f6e;--app-green-600:#057a55;--app-green-700:#046c4e;--app-green-800:#03543f;--app-green-900:#014737;--app-yellow-50:#fdfdea;--app-yellow-100:#fdf6b2;--app-yellow-200:#fce96a;--app-yellow-300:#faca15;--app-yellow-400:#e3a008;--app-yellow-500:#c27803;--app-yellow-600:#9f580a;--app-yellow-700:#8e4b10;--app-yellow-800:#723b13;--app-yellow-900:#633112;--app-success:#30cca4;--app-warning:#fbc94a;--app-error:#fb4a61;--app-info:#d4d4d4;--app-white:#fff;--app-black:#000}.w3a-parent-container body{box-sizing:border-box;margin:0!important;padding:0!important}.w3a-parent-container{font-family:Inter;position:relative}.w3a-parent-container .w3a-parent-container>*{scrollbar-color:#e5e7eb!important}.w3a-parent-container .w3a--social-container{scroll-padding-right:10px;scrollbar-color:#e5e7eb!important}.w3a-parent-container .w3a--modal-curtain{background-color:initial;left:0;opacity:0;position:absolute;right:0;top:0;transition:opacity 50ms ease-in;z-index:1}.w3a-parent-container .w3a--fixed{position:fixed}.w3a-parent-container .w3a--absolute{position:absolute}.w3a-parent-container .w3a--relative{position:relative}.w3a-parent-container .w3a--inset-0{inset:0}.w3a-parent-container .w3a--inset-x-4{left:1rem;right:1rem}.w3a-parent-container .w3a--bottom-2{bottom:.5rem}.w3a-parent-container .w3a--bottom-4{bottom:1rem}.w3a-parent-container .w3a--bottom-8{bottom:2rem}.w3a-parent-container .w3a--bottom-\\[100\\%\\]{bottom:100%}.w3a-parent-container .w3a--left-0{left:0}.w3a-parent-container .w3a--left-2{left:.5rem}.w3a-parent-container .w3a--left-\\[50\\%\\]{left:50%}.w3a-parent-container .w3a--right-4{right:1rem}.w3a-parent-container .w3a--right-6{right:1.5rem}.w3a-parent-container .w3a--top-0{top:0}.w3a-parent-container .w3a--top-1\\/2{top:50%}.w3a-parent-container .w3a--top-4{top:1rem}.w3a-parent-container .w3a--top-8{top:2rem}.w3a-parent-container .w3a--top-\\[16px\\]{top:16px}.w3a-parent-container .w3a--top-\\[30px\\]{top:30px}.w3a-parent-container .w3a--z-10{z-index:10}.w3a-parent-container .w3a--z-20{z-index:20}.w3a-parent-container .w3a--z-50{z-index:50}.w3a-parent-container .w3a--z-\\[-1\\]{z-index:-1}.w3a-parent-container .w3a--z-\\[45\\]{z-index:45}.w3a-parent-container .w3a--z-\\[60\\]{z-index:60}.w3a-parent-container .w3a--mx-auto{margin-left:auto;margin-right:auto}.w3a-parent-container .w3a--my-2{margin-bottom:.5rem;margin-top:.5rem}.w3a-parent-container .w3a--my-4{margin-bottom:1rem;margin-top:1rem}.w3a-parent-container .w3a--my-6{margin-bottom:1.5rem;margin-top:1.5rem}.w3a-parent-container .-w3a--mt-10{margin-top:-2.5rem}.w3a-parent-container .-w3a--mt-2{margin-top:-.5rem}.w3a-parent-container .-w3a--mt-6{margin-top:-1.5rem}.w3a-parent-container .w3a--mb-2{margin-bottom:.5rem}.w3a-parent-container .w3a--ml-0{margin-left:0}.w3a-parent-container .w3a--ml-2{margin-left:.5rem}.w3a-parent-container .w3a--ml-4{margin-left:1rem}.w3a-parent-container .w3a--mr-2\\.5{margin-right:.625rem}.w3a-parent-container .w3a--mr-auto{margin-right:auto}.w3a-parent-container .w3a--mt-2{margin-top:.5rem}.w3a-parent-container .w3a--mt-3{margin-top:.75rem}.w3a-parent-container .w3a--mt-auto{margin-top:auto}.w3a-parent-container .w3a--block{display:block}.w3a-parent-container .w3a--flex{display:flex}.w3a-parent-container .w3a--inline-flex{display:inline-flex}.w3a-parent-container .w3a--grid{display:grid}.w3a-parent-container .w3a--contents{display:contents}.w3a-parent-container .w3a--hidden{display:none}.w3a-parent-container .w3a--size-10{height:2.5rem;width:2.5rem}.w3a-parent-container .w3a--size-3{height:.75rem;width:.75rem}.w3a-parent-container .w3a--size-5{height:1.25rem;width:1.25rem}.w3a-parent-container .w3a--size-\\[300px\\]{height:300px;width:300px}.w3a-parent-container .w3a--size-auto{height:auto;width:auto}.w3a-parent-container .w3a--size-full{height:100%;width:100%}.w3a-parent-container .w3a--h-0{height:0}.w3a-parent-container .w3a--h-11{height:2.75rem}.w3a-parent-container .w3a--h-12{height:3rem}.w3a-parent-container .w3a--h-9{height:2.25rem}.w3a-parent-container .w3a--h-\\[280px\\]{height:280px}.w3a-parent-container .w3a--h-\\[300px\\]{height:300px}.w3a-parent-container .w3a--h-\\[328px\\]{height:328px}.w3a-parent-container .w3a--h-\\[42px\\]{height:42px}.w3a-parent-container .w3a--h-\\[50px\\]{height:50px}.w3a-parent-container .w3a--h-auto{height:auto}.w3a-parent-container .w3a--h-full{height:100%}.w3a-parent-container .w3a--h-px{height:1px}.w3a-parent-container .w3a--h-screen{height:100vh}.w3a-parent-container .w3a--w-0{width:0}.w3a-parent-container .w3a--w-12{width:3rem}.w3a-parent-container .w3a--w-4\\/5{width:80%}.w3a-parent-container .w3a--w-\\[100px\\]{width:100px}.w3a-parent-container .w3a--w-\\[104px\\]{width:104px}.w3a-parent-container .w3a--w-\\[200px\\]{width:200px}.w3a-parent-container .w3a--w-\\[356px\\]{width:356px}.w3a-parent-container .w3a--w-\\[90\\%\\]{width:90%}.w3a-parent-container .w3a--w-\\[96\\%\\]{width:96%}.w3a-parent-container .w3a--w-auto{width:auto}.w3a-parent-container .w3a--w-full{width:100%}.w3a-parent-container .w3a--w-max{width:max-content}.w3a-parent-container .w3a--w-screen{width:100vw}.w3a-parent-container .w3a--max-w-\\[180px\\]{max-width:180px}.w3a-parent-container .w3a--flex-1{flex:1 1 0%}.w3a-parent-container .-w3a--translate-x-10{--tw-translate-x:-2.5rem}.w3a-parent-container .-w3a--translate-x-10,.w3a-parent-container .-w3a--translate-x-6{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .-w3a--translate-x-6{--tw-translate-x:-1.5rem}.w3a-parent-container .-w3a--translate-y-1\\/2{--tw-translate-y:-50%}.w3a-parent-container .-w3a--translate-y-1\\/2,.w3a-parent-container .w3a--translate-y-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .w3a--translate-y-0{--tw-translate-y:0px}.w3a-parent-container .w3a--translate-y-\\[100vh\\]{--tw-translate-y:100vh}.w3a-parent-container .w3a--translate-y-\\[100vh\\],.w3a-parent-container .w3a--translate-y-full{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .w3a--translate-y-full{--tw-translate-y:100%}@keyframes w3a--pulse{50%{opacity:.5}}.w3a-parent-container .w3a--animate-pulse{animation:w3a--pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes w3a--spin{to{transform:rotate(1turn)}}.w3a-parent-container .w3a--animate-spin{animation:w3a--spin 1s linear infinite}.w3a-parent-container .w3a--cursor-not-allowed{cursor:not-allowed}.w3a-parent-container .w3a--cursor-pointer{cursor:pointer}.w3a-parent-container .w3a--appearance-none{appearance:none}.w3a-parent-container .w3a--auto-rows-min{grid-auto-rows:min-content}.w3a-parent-container .w3a--grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.w3a-parent-container .w3a--grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.w3a-parent-container .w3a--grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.w3a-parent-container .w3a--grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.w3a-parent-container .w3a--flex-col{flex-direction:column}.w3a-parent-container .w3a--items-start{align-items:flex-start}.w3a-parent-container .w3a--items-end{align-items:flex-end}.w3a-parent-container .w3a--items-center{align-items:center}.w3a-parent-container .\\!w3a--justify-start{justify-content:flex-start!important}.w3a-parent-container .w3a--justify-start{justify-content:flex-start}.w3a-parent-container .\\!w3a--justify-center{justify-content:center!important}.w3a-parent-container .w3a--justify-center{justify-content:center}.w3a-parent-container .\\!w3a--justify-between{justify-content:space-between!important}.w3a-parent-container .w3a--justify-between{justify-content:space-between}.w3a-parent-container .w3a--justify-items-start{justify-items:start}.w3a-parent-container .w3a--gap-2{gap:.5rem}.w3a-parent-container .w3a--gap-3{gap:.75rem}.w3a-parent-container .w3a--gap-x-1{column-gap:.25rem}.w3a-parent-container .w3a--gap-x-2{column-gap:.5rem}.w3a-parent-container .w3a--gap-x-4{column-gap:1rem}.w3a-parent-container .w3a--gap-x-6{column-gap:1.5rem}.w3a-parent-container .w3a--gap-y-1{row-gap:.25rem}.w3a-parent-container .w3a--gap-y-2{row-gap:.5rem}.w3a-parent-container .w3a--gap-y-4{row-gap:1rem}.w3a-parent-container .w3a--gap-y-6{row-gap:1.5rem}.w3a-parent-container .w3a--space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.5rem*var(--tw-space-x-reverse))}.w3a-parent-container .w3a--overflow-hidden{overflow:hidden}.w3a-parent-container .w3a--overflow-y-auto{overflow-y:auto}.w3a-parent-container .w3a--truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.w3a-parent-container .w3a--rounded{border-radius:.25rem}.w3a-parent-container .w3a--rounded-2xl{border-radius:1rem}.w3a-parent-container .w3a--rounded-3xl{border-radius:1.5rem}.w3a-parent-container .w3a--rounded-\\[30px\\]{border-radius:30px}.w3a-parent-container .w3a--rounded-full{border-radius:9999px}.w3a-parent-container .w3a--rounded-lg{border-radius:.5rem}.w3a-parent-container .w3a--rounded-md{border-radius:.375rem}.w3a-parent-container .w3a--rounded-none{border-radius:0}.w3a-parent-container .w3a--rounded-xl{border-radius:.75rem}.w3a-parent-container .w3a--border{border-width:1px}.w3a-parent-container .\\!w3a--border-app-primary-600{border-color:var(--app-primary-600)!important}.w3a-parent-container .w3a--border-app-blue-200{border-color:var(--app-blue-200)}.w3a-parent-container .w3a--border-app-gray-100{border-color:var(--app-gray-100)}.w3a-parent-container .w3a--border-app-gray-200{border-color:var(--app-gray-200)}.w3a-parent-container .w3a--border-app-gray-300{border-color:var(--app-gray-300)}.w3a-parent-container .w3a--border-app-gray-800{border-color:var(--app-gray-800)}.w3a-parent-container .w3a--border-app-green-200{border-color:var(--app-green-200)}.w3a-parent-container .w3a--border-app-green-400{border-color:var(--app-green-400)}.w3a-parent-container .w3a--border-app-red-200{border-color:var(--app-red-200)}.w3a-parent-container .w3a--border-app-red-600{border-color:var(--app-red-600)}.w3a-parent-container .w3a--border-app-yellow-200{border-color:var(--app-yellow-200)}.w3a-parent-container .w3a--border-transparent{border-color:#0000}.w3a-parent-container .\\!w3a--bg-app-gray-800{background-color:var(--app-gray-800)!important}.w3a-parent-container .w3a--bg-app-blue-100{background-color:var(--app-blue-100)}.w3a-parent-container .w3a--bg-app-gray-100{background-color:var(--app-gray-100)}.w3a-parent-container .w3a--bg-app-gray-200{background-color:var(--app-gray-200)}.w3a-parent-container .w3a--bg-app-gray-400{background-color:var(--app-gray-400)}.w3a-parent-container .w3a--bg-app-gray-50{background-color:var(--app-gray-50)}.w3a-parent-container .w3a--bg-app-gray-500{background-color:var(--app-gray-500)}.w3a-parent-container .w3a--bg-app-gray-800{background-color:var(--app-gray-800)}.w3a-parent-container .w3a--bg-app-green-100{background-color:var(--app-green-100)}.w3a-parent-container .w3a--bg-app-light-surface1{background-color:var(--app-white)}.w3a-parent-container .w3a--bg-app-primary-100{background-color:var(--app-primary-100)}.w3a-parent-container .w3a--bg-app-red-100{background-color:var(--app-red-100)}.w3a-parent-container .w3a--bg-app-white{background-color:var(--app-white)}.w3a-parent-container .w3a--bg-app-yellow-100{background-color:var(--app-yellow-100)}.w3a-parent-container .w3a--bg-transparent{background-color:initial}.w3a-parent-container .w3a--object-contain{object-fit:contain}.w3a-parent-container .w3a--p-0{padding:0}.w3a-parent-container .w3a--p-2{padding:.5rem}.w3a-parent-container .w3a--p-3{padding:.75rem}.w3a-parent-container .w3a--p-4{padding:1rem}.w3a-parent-container .w3a--p-6{padding:1.5rem}.w3a-parent-container .w3a--px-2{padding-left:.5rem;padding-right:.5rem}.w3a-parent-container .w3a--px-2\\.5{padding-left:.625rem;padding-right:.625rem}.w3a-parent-container .w3a--px-4{padding-left:1rem;padding-right:1rem}.w3a-parent-container .w3a--px-5{padding-left:1.25rem;padding-right:1.25rem}.w3a-parent-container .w3a--px-\\[6px\\]{padding-left:6px;padding-right:6px}.w3a-parent-container .w3a--py-0\\.5{padding-bottom:.125rem;padding-top:.125rem}.w3a-parent-container .w3a--py-1{padding-bottom:.25rem;padding-top:.25rem}.w3a-parent-container .w3a--py-2{padding-bottom:.5rem;padding-top:.5rem}.w3a-parent-container .w3a--py-2\\.5{padding-bottom:.625rem;padding-top:.625rem}.w3a-parent-container .w3a--py-3{padding-bottom:.75rem;padding-top:.75rem}.w3a-parent-container .w3a--py-6{padding-bottom:1.5rem;padding-top:1.5rem}.w3a-parent-container .w3a--py-\\[3px\\]{padding-bottom:3px;padding-top:3px}.w3a-parent-container .w3a--pl-2{padding-left:.5rem}.w3a-parent-container .w3a--pl-6{padding-left:1.5rem}.w3a-parent-container .w3a--pr-1\\.5{padding-right:.375rem}.w3a-parent-container .w3a--pr-2\\.5{padding-right:.625rem}.w3a-parent-container .w3a--pr-3{padding-right:.75rem}.w3a-parent-container .w3a--pt-5{padding-top:1.25rem}.w3a-parent-container .w3a--pt-6{padding-top:1.5rem}.w3a-parent-container .w3a--text-left{text-align:left}.w3a-parent-container .w3a--text-center{text-align:center}.w3a-parent-container .w3a--text-start{text-align:start}.w3a-parent-container .w3a--text-3xl{font-size:1.875rem;line-height:2.25rem}.w3a-parent-container .w3a--text-base{font-size:1rem;line-height:1.5rem}.w3a-parent-container .w3a--text-lg{font-size:1.125rem;line-height:1.75rem}.w3a-parent-container .w3a--text-sm{font-size:.875rem;line-height:1.25rem}.w3a-parent-container .w3a--text-xl{font-size:1.25rem;line-height:1.75rem}.w3a-parent-container .w3a--text-xs{font-size:.75rem;line-height:1rem}.w3a-parent-container .w3a--font-bold{font-weight:700}.w3a-parent-container .w3a--font-medium{font-weight:500}.w3a-parent-container .w3a--font-normal{font-weight:400}.w3a-parent-container .w3a--font-semibold{font-weight:600}.w3a-parent-container .w3a--uppercase{text-transform:uppercase}.w3a-parent-container .w3a--text-app-blue-900{color:var(--app-blue-900)}.w3a-parent-container .w3a--text-app-gray-100{color:var(--app-gray-100)}.w3a-parent-container .w3a--text-app-gray-400{color:var(--app-gray-400)}.w3a-parent-container .w3a--text-app-gray-500{color:var(--app-gray-500)}.w3a-parent-container .w3a--text-app-gray-700{color:var(--app-gray-700)}.w3a-parent-container .w3a--text-app-gray-900{color:var(--app-gray-900)}.w3a-parent-container .w3a--text-app-green-400{color:var(--app-green-400)}.w3a-parent-container .w3a--text-app-green-500{color:var(--app-green-500)}.w3a-parent-container .w3a--text-app-green-900{color:var(--app-green-900)}.w3a-parent-container .w3a--text-app-primary-600{color:var(--app-primary-600)}.w3a-parent-container .w3a--text-app-primary-800{color:var(--app-primary-800)}.w3a-parent-container .w3a--text-app-red-400{color:var(--app-red-400)}.w3a-parent-container .w3a--text-app-red-500{color:var(--app-red-500)}.w3a-parent-container .w3a--text-app-red-900{color:var(--app-red-900)}.w3a-parent-container .w3a--text-app-yellow-900{color:var(--app-yellow-900)}.w3a-parent-container .w3a--opacity-0{opacity:0}.w3a-parent-container .w3a--shadow-2xl{--tw-shadow:0 25px 50px -12px #00000040;--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color)}.w3a-parent-container .w3a--shadow-2xl,.w3a-parent-container .w3a--shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container .w3a--shadow-lg{--tw-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a;--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.w3a-parent-container .w3a--shadow-xl{--tw-shadow:0 20px 25px -5px #0000001a,0 8px 10px -6px #0000001a;--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container .w3a--outline-none{outline:2px solid #0000;outline-offset:2px}.w3a-parent-container .w3a--transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.w3a-parent-container .w3a--transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.w3a-parent-container .w3a--transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.w3a-parent-container .w3a--delay-100{transition-delay:.1s}.w3a-parent-container .w3a--delay-300{transition-delay:.3s}.w3a-parent-container .w3a--delay-500{transition-delay:.5s}.w3a-parent-container .w3a--delay-700{transition-delay:.7s}.w3a-parent-container .w3a--duration-150{transition-duration:.15s}.w3a-parent-container .w3a--duration-300{transition-duration:.3s}.w3a-parent-container .w3a--duration-500{transition-duration:.5s}.w3a-parent-container .w3a--duration-\\[400ms\\]{transition-duration:.4s}.w3a-parent-container .w3a--ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.w3a-parent-container .w3a--ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.w3a-parent-container .w3a--bottom-sheet-bg{background-color:var(--app-gray-600);opacity:.5}.w3a-parent-container .w3a--connected-logo{color:var(--app-green-500);height:4rem;width:4rem}.w3a-parent-container .w3a--connected-logo:is(.w3a--dark *){color:var(--app-green-400)}.w3a-parent-container .w3a--error-logo{color:var(--app-red-500);height:4rem;width:4rem}.w3a-parent-container .w3a--error-logo:is(.w3a--dark *){color:var(--app-red-400)}.w3a-parent-container .w3a--btn{align-items:center;appearance:none;border-color:var(--app-gray-200);border-width:1px;color:var(--app-gray-700);column-gap:.5rem;display:flex;font-size:1rem;font-weight:400;justify-content:center;line-height:1.5rem;padding:.75rem 1.25rem;width:100%}.w3a-parent-container .w3a--btn:hover{--tw-translate-y:0.5px;--tw-shadow:0px 2px 8px 2px #e5e7eb;--tw-shadow-colored:0px 2px 8px 2px var(--tw-shadow-color);background-color:var(--app-gray-50);border-color:var(--app-gray-50);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .w3a--btn:is(.w3a--dark *){border-color:var(--app-gray-500)}.w3a-parent-container .w3a--btn:hover:is(.w3a--dark *){--tw-shadow:0px 2px 8px 2px #111928;--tw-shadow-colored:0px 2px 8px 2px var(--tw-shadow-color);background-color:var(--app-gray-800);border-color:var(--app-gray-800);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container .w3a--input{align-items:center;border-color:var(--app-gray-200);border-width:1px;column-gap:.5rem;display:flex;justify-content:space-between;padding:.75rem 1.25rem;width:100%}.w3a-parent-container .w3a--input:is(.w3a--dark *){border-color:var(--app-gray-500)}.w3a-parent-container .first-letter\\:w3a--capitalize:first-letter{text-transform:capitalize}.w3a-parent-container .placeholder\\:w3a--text-xs::placeholder{font-size:.75rem;line-height:1rem}.w3a-parent-container .placeholder\\:w3a--text-app-gray-400::placeholder{color:var(--app-gray-400)}.w3a-parent-container .hover\\:w3a--translate-y-\\[0\\.5px\\]:hover{--tw-translate-y:0.5px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .hover\\:w3a--border-app-gray-50:hover{border-color:var(--app-gray-50)}.w3a-parent-container .hover\\:w3a--border-transparent:hover{border-color:#0000}.w3a-parent-container .hover\\:\\!w3a--bg-app-gray-100:hover{background-color:var(--app-gray-100)!important}.w3a-parent-container .hover\\:w3a--bg-app-gray-200:hover{background-color:var(--app-gray-200)}.w3a-parent-container .hover\\:w3a--text-app-gray-900:hover{color:var(--app-gray-900)}.w3a-parent-container .hover\\:w3a--shadow-light:hover{--tw-shadow:0px 2px 8px 2px #e5e7eb;--tw-shadow-colored:0px 2px 8px 2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container .focus\\:w3a--outline-none:focus{outline:2px solid #0000;outline-offset:2px}.w3a-parent-container .active\\:w3a--scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .active\\:w3a--outline-none:active{outline:2px solid #0000;outline-offset:2px}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--block{display:block}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--hidden{display:none}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--translate-x-0{--tw-translate-x:0px}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--translate-x-0,.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--translate-x-6{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--translate-x-6{--tw-translate-x:1.5rem}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--opacity-0{opacity:0}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--opacity-100{opacity:1}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--delay-0{transition-delay:0s}.w3a-parent-container .dark\\:w3a--block:is(.w3a--dark *){display:block}.w3a-parent-container .dark\\:w3a--hidden:is(.w3a--dark *){display:none}.w3a-parent-container .dark\\:w3a--border:is(.w3a--dark *){border-width:1px}.w3a-parent-container .dark\\:w3a--border-app-gray-500:is(.w3a--dark *){border-color:var(--app-gray-500)}.w3a-parent-container .dark\\:w3a--border-app-gray-600:is(.w3a--dark *){border-color:var(--app-gray-600)}.w3a-parent-container .dark\\:w3a--border-app-gray-700:is(.w3a--dark *){border-color:var(--app-gray-700)}.w3a-parent-container .dark\\:w3a--border-app-gray-800:is(.w3a--dark *){border-color:var(--app-gray-800)}.w3a-parent-container .dark\\:w3a--border-app-green-500:is(.w3a--dark *){border-color:var(--app-green-500)}.w3a-parent-container .dark\\:w3a--border-app-primary-400:is(.w3a--dark *){border-color:var(--app-primary-400)}.w3a-parent-container .dark\\:w3a--border-app-primary-500:is(.w3a--dark *){border-color:var(--app-primary-500)}.w3a-parent-container .dark\\:w3a--border-app-red-500:is(.w3a--dark *){border-color:var(--app-red-500)}.w3a-parent-container .dark\\:w3a--bg-app-dark-surface-main:is(.w3a--dark *){background-color:var(--app-gray-900)}.w3a-parent-container .dark\\:w3a--bg-app-gray-200:is(.w3a--dark *){background-color:var(--app-gray-200)}.w3a-parent-container .dark\\:w3a--bg-app-gray-400:is(.w3a--dark *){background-color:var(--app-gray-400)}.w3a-parent-container .dark\\:w3a--bg-app-gray-500:is(.w3a--dark *){background-color:var(--app-gray-500)}.w3a-parent-container .dark\\:w3a--bg-app-gray-600:is(.w3a--dark *){background-color:var(--app-gray-600)}.w3a-parent-container .dark\\:w3a--bg-app-gray-700:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .dark\\:w3a--bg-app-gray-800:is(.w3a--dark *){background-color:var(--app-gray-800)}.w3a-parent-container .dark\\:w3a--bg-transparent:is(.w3a--dark *){background-color:initial}.w3a-parent-container .dark\\:w3a--text-app-gray-200:is(.w3a--dark *){color:var(--app-gray-200)}.w3a-parent-container .dark\\:w3a--text-app-gray-300:is(.w3a--dark *){color:var(--app-gray-300)}.w3a-parent-container .dark\\:w3a--text-app-gray-400:is(.w3a--dark *){color:var(--app-gray-400)}.w3a-parent-container .dark\\:w3a--text-app-gray-500:is(.w3a--dark *){color:var(--app-gray-500)}.w3a-parent-container .dark\\:w3a--text-app-green-400:is(.w3a--dark *){color:var(--app-green-400)}.w3a-parent-container .dark\\:w3a--text-app-primary-400:is(.w3a--dark *){color:var(--app-primary-400)}.w3a-parent-container .dark\\:w3a--text-app-primary-500:is(.w3a--dark *){color:var(--app-primary-500)}.w3a-parent-container .dark\\:w3a--text-app-red-400:is(.w3a--dark *){color:var(--app-red-400)}.w3a-parent-container .dark\\:w3a--text-app-white:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container .dark\\:placeholder\\:w3a--text-app-gray-500:is(.w3a--dark *)::placeholder{color:var(--app-gray-500)}.w3a-parent-container .dark\\:hover\\:w3a--border-app-gray-800:hover:is(.w3a--dark *){border-color:var(--app-gray-800)}.w3a-parent-container .dark\\:hover\\:w3a--border-transparent:hover:is(.w3a--dark *){border-color:#0000}.w3a-parent-container .dark\\:hover\\:\\!w3a--bg-app-gray-800:hover:is(.w3a--dark *){background-color:var(--app-gray-800)!important}.w3a-parent-container .dark\\:hover\\:w3a--bg-app-gray-600:hover:is(.w3a--dark *){background-color:var(--app-gray-600)}.w3a-parent-container .dark\\:hover\\:w3a--bg-app-gray-700:hover:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .dark\\:hover\\:w3a--text-app-white:hover:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container .dark\\:hover\\:w3a--shadow-dark:hover:is(.w3a--dark *){--tw-shadow:0px 2px 8px 2px #111928;--tw-shadow-colored:0px 2px 8px 2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}@media (min-width:640px){.w3a-parent-container .sm\\:w3a--left-8{left:2rem}.w3a-parent-container .sm\\:w3a--right-8{right:2rem}.w3a-parent-container .sm\\:w3a--justify-start{justify-content:flex-start}.w3a-parent-container .sm\\:w3a--justify-end{justify-content:flex-end}.w3a-parent-container .sm\\:w3a--shadow-lg{--tw-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a;--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}}@media (min-width:768px){.w3a-parent-container .md\\:w3a--hidden{display:none}}@media(min-width:375px){.w3a-parent-container .\\[\\@media\\(min-width\\:375px\\)\\]\\:w3a--w-\\[393px\\]{width:393px}}');let mA={en:"english",ja:"japanese",ko:"korean",de:"german",zh:"mandarin",es:"spanish",fr:"french",pt:"portuguese",nl:"dutch",tr:"turkish",am:"amharic"};function mT(e,t=3,n=50,r="black",i=0,a=20,o="#0346ff"){let s,l=[];for(s=0;s<t;s+=1)l.push(e(o).rotate(-((s+1)/t*i)).saturate((s+1)/t*(a/100)).mix(e(r),n/100*(s+1)/t).hex());return l}var mI=tG;function mN(e,t,n){try{Reflect.apply(e,t,n)}catch(e){setTimeout(()=>{throw e})}}class mO extends mI.EventEmitter{emit(e,...t){let n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;let n=Error(`Unhandled error.${e?` (${e.message})`:""}`);throw n.context=e,n}let i=r[e];if(void 0===i)return!1;if("function"==typeof i)mN(i,this,t);else{let e=i.length,n=function(e){let t=e.length,n=Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}(i);for(let r=0;r<e;r+=1)mN(n[r],this,t)}return!0}}var mk=e.i(88014);let mM="login",mP="connect_wallet",mR="Connect Your Wallet",mL="Selected Wallet",mD="https://images.web3auth.io/web3auth-logo-w.svg",mj="https://images.web3auth.io/web3auth-logo-w-light.svg",mU={app:{android:"io.metamask",chrome:"nkbihfbeogaeaoehlefnkodbefgpgknn",edge:"ejbalbakoplchlghecdalmeeeajnimhm",firefox:"ether-metamask",ios:"id1438144202"},chains:["eip155:1"],imgExtension:"webp",injected:[{injected_id:"isMetaMask",namespace:"eip155"}],mobile:{inAppBrowser:"https://metamask.app.link/dapp",native:"metamask://wc",universal:"https://metamask.app.link/wc"},name:"MetaMask",primaryColor:"#E2761B",walletConnect:{sdks:["sign_v1","sign_v2"]}},mB=eV.default.getLogger("http-helpers");mB.setLevel(eV.levels.INFO);let m$="torus-default";async function mW(e,t){try{new URL(e)}catch{}return fetch(e,t)}function mK(){let e={};return m$&&(e["x-api-key"]=m$),e}function mH(e){mB.info(`Response: ${e.status} ${e.statusText}`),mB.info(`Url: ${e.url}`)}let mz=async(e,t)=>{let n=null;try{let r=new Promise((t,r)=>{n=setTimeout(()=>{r(Error(`Timed out in ${e}ms`))},e)}),i=await Promise.race([t,r]);return null!=n&&clearTimeout(n),i}catch(e){throw null!=n&&clearTimeout(n),e}},mF=async(e,t={},n={})=>{let r={mode:"cors",headers:{}};n.useAPIKey&&(r.headers=(0,eD.default)((0,eD.default)({},r.headers),mK())),t.method="GET";let i=(0,e9.default)(r,t),a=await mW(e,i);if(a.ok){let e=a.headers.get("content-type");return null!=e&&e.includes("application/json")?a.json():a.text()}throw mH(a),a},mV=(e,t={},n={},r={})=>{let i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(i.headers=(0,eD.default)((0,eD.default)({},i.headers),mK())),n.method="POST";let a=(0,e9.default)(i,n);return r.isUrlEncodedData?(a.body=t,"application/json; charset=utf-8"===a.headers["Content-Type"]&&delete a.headers["Content-Type"]):a.body=JSON.stringify(t),mz(r.timeout||6e4,mW(e,a).then(e=>{let t;if(r.logTracingHeader&&(t=e.headers.get("x-web3-correlation-id"))&&mB.info(`Request tracing with traceID = ${t}`),e.ok){let t=e.headers.get("content-type");return null!=t&&t.includes("application/json")?e.json():e.text()}throw mH(e),e}))};var mq=e.i(7670),mY=e.i(19056);let mG=new Map;function mJ(...e){let t=JSON.stringify(e);if(mG.has(t))return mG.get(t);let n=(0,mY.twMerge)((0,mq.default)(e));return mG.set(t,n),n}let mZ=e=>`https://images.web3auth.io/login-modal/${e}.svg`,mQ="https://api.web3auth.io/passwordless-service",mX=async()=>{try{let e=await mF(`${mQ}/api/v3/user/location`);if(e&&e.data.country)return{country:e.data.country,dialCode:e.data.dial_code};return null}catch(e){return nS.log.error("error getting user country",e),null}},m0=async e=>{try{let t=await mV(`${mQ}/api/v3/phone_number/validate`,{phone_number:e});if(t&&t.success)return t;return{success:!1,parsed_number:"",country_flag:""}}catch(e){return nS.log.error("error validating phone number",e),e.status,{success:!1,parsed_number:"",country_flag:""}}},m1=e=>{let t=e;return t||(t=("undefined"!=typeof window&&(window.navigator.userLanguage||window.navigator.language)||"en-US").split("-")[0]),Object.prototype.hasOwnProperty.call(mA,t)?t:"en"};function m3(e){let{open:t=!0,padding:n=!0,shadow:r=!0,border:i=!1,showCloseIcon:o=!1,onClose:l,children:c,borderRadius:d="large"}=e,[u,h]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{t?setTimeout(()=>{h(!0)},50):h(!1)},[t]),u)?(0,a.jsxs)("div",{className:mJ("w3a--bg-app-light-surface1 dark:w3a--bg-app-dark-surface-main w3a--rounded-3xl w3a--w-[356px] [@media(min-width:375px)]:w3a--w-[393px] w3a--h-auto w3a--flex w3a--flex-col w3a--duration-500",{"w3a--translate-y-0 w3a--delay-100":u,"w3a--translate-y-[100vh]":!u,"w3a--p-4":n,"w3a--shadow-xl sm:w3a--shadow-lg":r,"w3a--border w3a--border-app-gray-100 dark:w3a--border-app-gray-800":i,"w3a--rounded-[30px]":"large"===d,"w3a--rounded-2xl":"medium"===d,"w3a--rounded-none":"small"===d}),children:[o&&(0,a.jsx)("div",{className:"w3a--absolute w3a--right-6 w3a--top-[30px] w3a--z-10 w3a--cursor-pointer",children:(0,a.jsx)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>{l&&l()},className:"w3a--text-app-gray-900 dark:w3a--text-app-white",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292787 1.29299C0.480314 1.10552 0.734622 1.0002 0.999786 1.0002C1.26495 1.0002 1.51926 1.10552 1.70679 1.29299L5.99979 5.58599L10.2928 1.29299C10.385 1.19748 10.4954 1.1213 10.6174 1.06889C10.7394 1.01648 10.8706 0.988893 11.0034 0.987739C11.1362 0.986585 11.2678 1.01189 11.3907 1.06217C11.5136 1.11245 11.6253 1.1867 11.7192 1.28059C11.8131 1.37449 11.8873 1.48614 11.9376 1.60904C11.9879 1.73193 12.0132 1.86361 12.012 1.99639C12.0109 2.12917 11.9833 2.26039 11.9309 2.38239C11.8785 2.5044 11.8023 2.61474 11.7068 2.70699L7.41379 6.99999L11.7068 11.293C11.8889 11.4816 11.9897 11.7342 11.9875 11.9964C11.9852 12.2586 11.88 12.5094 11.6946 12.6948C11.5092 12.8802 11.2584 12.9854 10.9962 12.9877C10.734 12.9899 10.4814 12.8891 10.2928 12.707L5.99979 8.41399L1.70679 12.707C1.51818 12.8891 1.26558 12.9899 1.00339 12.9877C0.741188 12.9854 0.490376 12.8802 0.304968 12.6948C0.11956 12.5094 0.0143906 12.2586 0.0121121 11.9964C0.00983372 11.7342 0.110629 11.4816 0.292787 11.293L4.58579 6.99999L0.292787 2.70699C0.105316 2.51946 0 2.26515 0 1.99999C0 1.73483 0.105316 1.48052 0.292787 1.29299V1.29299Z",fill:"currentColor"})})}),c]}):null}function m2(e){let{children:t,open:n,onClose:r,placement:i="center",padding:o=!0,shadow:l=!0,border:c=!1,showCloseIcon:d=!0,borderRadius:u="large"}=e,[h,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{n?(document.body.style.overflow="hidden",setTimeout(()=>{f(!0)},50)):(f(!1),document.body.style.overflow="")},[n]);let p=(0,s.useMemo)(()=>({center:"w3a--top-0 w3a--left-0 w3a--items-center w3a--justify-center","top-center":"w3a--top-8 w3a--left-0 w3a--items-start w3a--justify-center","bottom-center":"w3a--bottom-8 w3a--left-0 w3a--items-end w3a--justify-center",left:"sm:w3a--left-8 w3a--flex w3a--items-center w3a--justify-center sm:w3a--justify-start",right:"sm:w3a--right-8 w3a--flex w3a--items-center w3a--justify-center sm:w3a--justify-end"}),[]),g=(0,s.useMemo)(()=>p[i],[i,p]);return(0,a.jsx)("div",{className:mJ("w3a--fixed w3a--z-50 w3a--overflow-hidden w3a--flex w3a--transition-all",g,{"w3a--w-screen w3a--h-screen":h,"w3a--w-0 w3a--h-0 w3a--delay-500":!h}),children:(0,a.jsxs)("div",{className:mJ("w3a--bg-app-light-surface1 dark:w3a--bg-app-dark-surface-main w3a--w-[356px] [@media(min-width:375px)]:w3a--w-[393px] w3a--h-auto w3a--flex w3a--flex-col w3a--duration-500",{"w3a--translate-y-0 w3a--delay-100":h,"w3a--translate-y-[100vh]":!h,"w3a--p-4":o,"w3a--shadow-xl sm:w3a--shadow-lg":l,"w3a--border w3a--border-app-gray-100 dark:w3a--border-app-gray-800":c,"w3a--rounded-[30px]":"large"===u,"w3a--rounded-2xl":"medium"===u,"w3a--rounded-none":"small"===u}),children:[d&&(0,a.jsx)("div",{className:"w3a--absolute w3a--right-6 w3a--top-[30px] w3a--z-10 w3a--cursor-pointer",children:(0,a.jsx)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>{r&&r()},className:"w3a--text-app-gray-500 hover:w3a--text-app-gray-900 dark:w3a--text-app-gray-200 dark:hover:w3a--text-app-white",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292787 1.29299C0.480314 1.10552 0.734622 1.0002 0.999786 1.0002C1.26495 1.0002 1.51926 1.10552 1.70679 1.29299L5.99979 5.58599L10.2928 1.29299C10.385 1.19748 10.4954 1.1213 10.6174 1.06889C10.7394 1.01648 10.8706 0.988893 11.0034 0.987739C11.1362 0.986585 11.2678 1.01189 11.3907 1.06217C11.5136 1.11245 11.6253 1.1867 11.7192 1.28059C11.8131 1.37449 11.8873 1.48614 11.9376 1.60904C11.9879 1.73193 12.0132 1.86361 12.012 1.99639C12.0109 2.12917 11.9833 2.26039 11.9309 2.38239C11.8785 2.5044 11.8023 2.61474 11.7068 2.70699L7.41379 6.99999L11.7068 11.293C11.8889 11.4816 11.9897 11.7342 11.9875 11.9964C11.9852 12.2586 11.88 12.5094 11.6946 12.6948C11.5092 12.8802 11.2584 12.9854 10.9962 12.9877C10.734 12.9899 10.4814 12.8891 10.2928 12.707L5.99979 8.41399L1.70679 12.707C1.51818 12.8891 1.26558 12.9899 1.00339 12.9877C0.741188 12.9854 0.490376 12.8802 0.304968 12.6948C0.11956 12.5094 0.0143906 12.2586 0.0121121 11.9964C0.00983372 11.7342 0.110629 11.4816 0.292787 11.293L4.58579 6.99999L0.292787 2.70699C0.105316 2.51946 0 2.26515 0 1.99999C0 1.73483 0.105316 1.48052 0.292787 1.29299V1.29299Z",fill:"currentColor"})})}),t]})})}e.i(2008),Object.create(null);let m5={},m4=(e,t,n,r)=>{m7(n)&&m5[n]||(m7(n)&&(m5[n]=new Date),((e,t,n,r)=>{let i=[n,{code:t,...r||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);m7(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...i):console?.warn&&console.warn(...i)})(e,t,n,r))},m8=(e,t)=>()=>{if(e.isInitialized)t();else{let n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},m6=(e,t,n)=>{e.loadNamespaces(t,m8(e,n))},m9=(e,t,n,r)=>{if(m7(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return m6(e,n,r);n.forEach(t=>{0>e.options.ns.indexOf(t)&&e.options.ns.push(t)}),e.loadLanguages(t,m8(e,r))},m7=e=>"string"==typeof e,we=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,wt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"Â©","&#169;":"Â©","&reg;":"Â®","&#174;":"Â®","&hellip;":"â€¦","&#8230;":"â€¦","&#x2F;":"/","&#47;":"/"},wn=e=>wt[e],wr={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(we,wn)},wi=(0,s.createContext)();class wa{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}let wo=(e,t={})=>{var n,r,a,o;let l,{i18n:c}=t,{i18n:d,defaultNS:u}=(0,s.useContext)(wi)||{},h=c||d||i;if(h&&!h.reportNamespaces&&(h.reportNamespaces=new wa),!h){m4(h,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");let e=(e,t)=>{let n;return m7(t)?t:"object"==typeof(n=t)&&null!==n&&m7(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}h.options.react?.wait&&m4(h,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");let f={...wr,...h.options.react,...t},{useSuspense:p,keyPrefix:g}=f,m=e||u||h.options?.defaultNS;m=m7(m)?[m]:m||["translation"],h.reportNamespaces.addUsedNamespaces?.(m);let w=(h.isInitialized||h.initializedStoreOnce)&&m.every(e=>((e,t,n={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):(m4(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,h,f)),y=(n=t.lng||null,r="fallback"===f.nsMode?m:m[0],(0,s.useCallback)(h.getFixedT(n,r,g),[h,n,r,g])),v=()=>y,b=()=>{let e,n;return e=t.lng||null,n="fallback"===f.nsMode?m:m[0],h.getFixedT(e,n,g)},[E,C]=(0,s.useState)(v),x=m.join();t.lng&&(x=`${t.lng}${x}`);let S=(a=x,l=(0,s.useRef)(),(0,s.useEffect)(()=>{l.current=o?l.current:a},[a,o]),l.current),_=(0,s.useRef)(!0);(0,s.useEffect)(()=>{let{bindI18n:e,bindI18nStore:n}=f;_.current=!0,w||p||(t.lng?m9(h,t.lng,m,()=>{_.current&&C(b)}):m6(h,m,()=>{_.current&&C(b)})),w&&S&&S!==x&&_.current&&C(b);let r=()=>{_.current&&C(b)};return e&&h?.on(e,r),n&&h?.store.on(n,r),()=>{_.current=!1,h&&e&&e?.split(" ").forEach(e=>h.off(e,r)),n&&h&&n.split(" ").forEach(e=>h.store.off(e,r))}},[h,x]),(0,s.useEffect)(()=>{_.current&&w&&C(v)},[h,g,w]);let A=[E,h,w];if(A.t=E,A.i18n=h,A.ready=w,w||!w&&!p)return A;throw new Promise(e=>{t.lng?m9(h,t.lng,m,()=>e()):m6(h,m,()=>e())})},ws=(0,s.createContext)({bodyState:{metamaskQrCode:{show:!1,wallet:null},installLinks:{show:!1,wallet:null},multiChainSelector:{show:!1,wallet:null}},toast:{message:"",type:m_.SUCCESS},setBodyState:()=>{},setToast:()=>{}}),wl=(0,s.createContext)({isDark:!0}),wc=e=>"string"==typeof e,wd=()=>{let e,t,n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},wu=e=>null==e?"":""+e,wh=/###/g,wf=e=>e&&e.indexOf("###")>-1?e.replace(wh,"."):e,wp=e=>!e||wc(e),wg=(e,t,n)=>{let r=wc(t)?t.split("."):t,i=0;for(;i<r.length-1;){if(wp(e))return{};let t=wf(r[i]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return wp(e)?{}:{obj:e,k:wf(r[i])}},wm=(e,t,n)=>{let{obj:r,k:i}=wg(e,t,Object);if(void 0!==r||1===t.length){r[i]=n;return}let a=t[t.length-1],o=t.slice(0,t.length-1),s=wg(e,o,Object);for(;void 0===s.obj&&o.length;)a=`${o[o.length-1]}.${a}`,s=wg(e,o=o.slice(0,o.length-1),Object),s?.obj&&void 0!==s.obj[`${s.k}.${a}`]&&(s.obj=void 0);s.obj[`${s.k}.${a}`]=n},ww=(e,t)=>{let{obj:n,k:r}=wg(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},wy=(e,t,n)=>{for(let r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?wc(e[r])||e[r]instanceof String||wc(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):wy(e[r],t[r],n):e[r]=t[r]);return e};var wv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};let wb=e=>wc(e)?e.replace(/[&<>"'\/]/g,e=>wv[e]):e,wE=[" ",",","?","!",";"],wC=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){let t=this.regExpMap.get(e);if(void 0!==t)return t;let n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),wx=(e,t,n=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}let r=t.split(n),i=e;for(let e=0;e<r.length;){let t;if(!i||"object"!=typeof i)return;let a="";for(let o=e;o<r.length;++o)if(o!==e&&(a+=n),a+=r[o],void 0!==(t=i[a])){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<r.length-1)continue;e+=o-e+1;break}i=t}return i},wS=e=>e?.replace("_","-"),w_={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class wA{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||w_,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(wc(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new wA(this.logger,{...{prefix:`${this.prefix}:${e}:`},...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new wA(this.logger,e)}}var wT=new wA;class wI{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);let n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t)return void delete this.observers[e];this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([e,n])=>{for(let r=0;r<n;r++)e(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,r])=>{for(let i=0;i<r;i++)n.apply(n,[e,...t])})}}class wN extends wI{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){0>this.options.ns.indexOf(e)&&this.options.ns.push(e)}removeNamespaces(e){let t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,r={}){let i,a=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;e.indexOf(".")>-1?i=e.split("."):(i=[e,t],n&&(Array.isArray(n)?i.push(...n):wc(n)&&a?i.push(...n.split(a)):i.push(n)));let s=ww(this.data,i);return(!s&&!t&&!n&&e.indexOf(".")>-1&&(e=i[0],t=i[1],n=i.slice(2).join(".")),!s&&o&&wc(n))?wx(this.data?.[e]?.[t],n,a):s}addResource(e,t,n,r,i={silent:!1}){let a=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=[e,t];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),wm(this.data,o,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n,r={silent:!1}){for(let r in n)(wc(n[r])||Array.isArray(n[r]))&&this.addResource(e,t,r,n[r],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i,a={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=n,n=t,t=o[1]),this.addNamespaces(t);let s=ww(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?wy(s,n,i):s={...s,...n},wm(this.data,o,s),a.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){let t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var wO={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(e=>{t=this.processors[e]?.process(t,n,r,i)??t}),t}};let wk=Symbol("i18next/PATH_KEY");function wM(e,t){let n,r,i,{[wk]:a}=e((r=[],(i=Object.create(null)).get=(e,t)=>(n?.revoke?.(),t===wk)?r:(r.push(t),(n=Proxy.revocable(e,i)).proxy),Proxy.revocable(Object.create(null),i).proxy));return a.join(t?.keySeparator??".")}let wP={},wR=e=>!wc(e)&&"boolean"!=typeof e&&"number"!=typeof e;class wL extends wI{constructor(e,t={}){super(),((e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=wT.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){let n={...t};if(null==e)return!1;let r=this.resolve(e,n);if(r?.res===void 0)return!1;let i=wR(r.res);return!1!==n.returnObjects||!i}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");let r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS||[],a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";let r=wE.filter(e=>0>t.indexOf(e)&&0>n.indexOf(e));if(0===r.length)return!0;let i=wC.getRegExp(`(${r.map(e=>"?"===e?"\\?":e).join("|")})`),a=!i.test(e);if(!a){let t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(a=!0)}return a})(e,n,r);if(a&&!o){let t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:wc(i)?[i]:i};let a=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(i=a.shift()),e=a.join(r)}return{key:e,namespaces:wc(i)?[i]:i}}translate(e,t,n){let r="object"==typeof t?{...t}:t;if("object"!=typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof r&&(r={...r}),r||(r={}),null==e)return"";"function"==typeof e&&(e=wM(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);let i=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,a=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(e[e.length-1],r),l=s[s.length-1],c=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");let d=r.lng||this.language,u=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode")return u?i?{res:`${l}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${c}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:o;let h=this.resolve(e,r),f=h?.res,p=h?.usedKey||o,g=h?.exactUsedKey||o,m=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,y=void 0!==r.count&&!wc(r.count),v=wL.hasDefaultValue(r),b=y?this.pluralResolver.getSuffix(d,r.count,r):"",E=r.ordinal&&y?this.pluralResolver.getSuffix(d,r.count,{ordinal:!1}):"",C=y&&!r.ordinal&&0===r.count,x=C&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${b}`]||r[`defaultValue${E}`]||r.defaultValue,S=f;w&&!f&&v&&(S=x);let _=wR(S),A=Object.prototype.toString.apply(S);if(w&&S&&_&&0>["[object Number]","[object Function]","[object RegExp]"].indexOf(A)&&!(wc(m)&&Array.isArray(S))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,S,{...r,ns:s}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(h.res=e,h.usedParams=this.getUsedParamsDetails(r),h):e}if(a){let e=Array.isArray(S),t=e?[]:{},n=e?g:p;for(let e in S)if(Object.prototype.hasOwnProperty.call(S,e)){let i=`${n}${a}${e}`;v&&!f?t[e]=this.translate(i,{...r,defaultValue:wR(x)?x[e]:void 0,...{joinArrays:!1,ns:s}}):t[e]=this.translate(i,{...r,joinArrays:!1,ns:s}),t[e]===i&&(t[e]=S[e])}f=t}}else if(w&&wc(m)&&Array.isArray(f))(f=f.join(m))&&(f=this.extendTranslation(f,e,r,n));else{let t=!1,i=!1;!this.isValidLookup(f)&&v&&(t=!0,f=x),this.isValidLookup(f)||(i=!0,f=o);let s=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&i?void 0:f,u=v&&x!==f&&this.options.updateMissing;if(i||t||u){if(this.logger.log(u?"updateKey":"missingKey",d,l,o,u?x:f),a){let e=this.resolve(o,{...r,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[],t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);let n=(e,t,n)=>{let i=v&&n!==f?n:s;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,i,u,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,l,t,i,u,r),this.emit("missingKey",e,l,t,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&y?e.forEach(e=>{let t=this.pluralResolver.getSuffixes(e,r);C&&r[`defaultValue${this.options.pluralSeparator}zero`]&&0>t.indexOf(`${this.options.pluralSeparator}zero`)&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{n([e],o+t,r[`defaultValue${t}`]||x)})}):n(e,o,x))}f=this.extendTranslation(f,e,r,h,n),i&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${l}${c}${o}`),(i||t)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${o}`:o,t?f:void 0,r))}return i?(h.res=f,h.usedParams=this.getUsedParamsDetails(r),h):f}extendTranslation(e,t,n,r,i){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){let a;n.interpolation&&this.interpolator.init({...n,...{interpolation:{...this.options.interpolation,...n.interpolation}}});let o=wc(e)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(o){let t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let s=n.replace&&!wc(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),e=this.interpolator.interpolate(e,s,n.lng||this.language||r.usedLng,n),o){let t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(...e)=>i?.[0]!==e[0]||n.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),n)),n.interpolation&&this.interpolator.reset()}let a=n.postProcess||this.options.postProcess,o=wc(a)?[a]:a;return null!=e&&o?.length&&!1!==n.applyPostProcessor&&(e=wO.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,r,i,a,o;return wc(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(n))return;let s=this.extractFromKey(e,t),l=s.key;r=l;let c=s.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));let d=void 0!==t.count&&!wc(t.count),u=d&&!t.ordinal&&0===t.count,h=void 0!==t.context&&(wc(t.context)||"number"==typeof t.context)&&""!==t.context,f=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(e=>{this.isValidLookup(n)||(o=e,!wP[`${f[0]}-${e}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(o)&&(wP[`${f[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${f.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach(r=>{let o;if(this.isValidLookup(n))return;a=r;let s=[l];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(s,l,r,e,t);else{let e;d&&(e=this.pluralResolver.getSuffix(r,t.count,t));let n=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(t.ordinal&&0===e.indexOf(i)&&s.push(l+e.replace(i,this.options.pluralSeparator)),s.push(l+e),u&&s.push(l+n)),h){let r=`${l}${this.options.contextSeparator||"_"}${t.context}`;s.push(r),d&&(t.ordinal&&0===e.indexOf(i)&&s.push(r+e.replace(i,this.options.pluralSeparator)),s.push(r+e),u&&s.push(r+n))}}for(;o=s.pop();)this.isValidLookup(n)||(i=o,n=this.getResource(r,e,o,t))}))})}),{res:n,usedKey:r,exactUsedKey:i,usedLng:a,usedNS:o}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(e={}){let t=e.replace&&!wc(e.replace),n=t?e.replace:e;if(t&&void 0!==e.count&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!t)for(let e of(n={...n},["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"]))delete n[e];return n}static hasDefaultValue(e){let t="defaultValue";for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}class wD{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=wT.create("languageUtils")}getScriptPartFromCode(e){if(!(e=wS(e))||0>e.indexOf("-"))return null;let t=e.split("-");return 2===t.length||(t.pop(),"x"===t[t.length-1].toLowerCase())?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(!(e=wS(e))||0>e.indexOf("-"))return e;let t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(wc(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(e){}return(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)?t:this.options.lowerCaseLng?e.toLowerCase():e}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){let t;return e?(e.forEach(e=>{if(t)return;let n=this.formatLanguageCode(e);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;let n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;let r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>{if(e===r||!(0>e.indexOf("-")&&0>r.indexOf("-"))&&(e.indexOf("-")>0&&0>r.indexOf("-")&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1))return e})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),wc(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){let n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return wc(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):wc(e)&&i(this.formatLanguageCode(e)),n.forEach(e=>{0>r.indexOf(e)&&i(this.formatLanguageCode(e))}),r}}let wj={zero:0,one:1,two:2,few:3,many:4,other:5},wU={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class wB{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=wT.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){let n,r=wS("dev"===e?"en":e),i=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];try{n=new Intl.PluralRules(r,{type:i})}catch(i){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),wU;if(!e.match(/-|_/))return wU;let r=this.languageUtils.getLanguagePartFromCode(e);n=this.getRule(r,t)}return this.pluralRulesCache[a]=n,n}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return(n||(n=this.getRule("dev",t)),n)?n.resolvedOptions().pluralCategories.sort((e,t)=>wj[e]-wj[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,n={}){let r=this.getRule(e,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}let w$=(e,t,n,r=".",i=!0)=>{let a,o=void 0!==(a=ww(e,n))?a:ww(t,n);return!o&&i&&wc(n)&&void 0===(o=wx(e,n,r))&&(o=wx(t,n,r)),o};class wW{constructor(e={}){this.logger=wT.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});let{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:a,suffix:o,suffixEscaped:s,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:h,nestingSuffix:f,nestingSuffixEscaped:p,nestingOptionsSeparator:g,maxReplaces:m,alwaysFormat:w}=e.interpolation;this.escape=void 0!==t?t:wb,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):a||"{{",this.suffix=o?o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):s||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=u?u.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):h||"$t(".replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),this.nestingSuffix=f?f.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):p||")".replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),this.nestingOptionsSeparator=g||",",this.maxReplaces=m||1e3,this.alwaysFormat=void 0!==w&&w,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let e=(e,t)=>e?.source===t?(e.lastIndex=0,e):RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,r){let i,a,o,s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(0>e.indexOf(this.formatSeparator)){let i=w$(t,s,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,{...r,...t,interpolationkey:e}):i}let i=e.split(this.formatSeparator),a=i.shift().trim(),o=i.join(this.formatSeparator).trim();return this.format(w$(t,s,a,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,{...r,...t,interpolationkey:a})};this.resetRegExp();let c=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>e.replace(/\$/g,"$$$$")},{regex:this.regexp,safeValue:e=>this.escapeValue?this.escape(e).replace(/\$/g,"$$$$"):e.replace(/\$/g,"$$$$")}].forEach(t=>{for(o=0;i=t.regex.exec(e);){let n=i[1].trim();if(void 0===(a=l(n)))if("function"==typeof c){let t=c(e,i,r);a=wc(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))a="";else if(d){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),a="";else wc(a)||this.useRawValueToEscape||(a=wu(a));let s=t.safeValue(a);if(e=e.replace(i[0],s),d?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,++o>=this.maxReplaces)break}}),e}nest(e,t,n={}){let r,i,a,o=(e,t)=>{let n=this.nestingOptionsSeparator;if(0>e.indexOf(n))return e;let r=e.split(RegExp(`${n}[ ]*{`)),i=`{${r[1]}`;e=r[0];let o=(i=this.interpolate(i,a)).match(/'/g),s=i.match(/"/g);((o?.length??0)%2!=0||s)&&s.length%2==0||(i=i.replace(/'/g,'"'));try{a=JSON.parse(i),t&&(a={...t,...a})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${n}${i}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let s=[];(a=(a={...n}).replace&&!wc(a.replace)?a.replace:a).applyPostProcessor=!1,delete a.defaultValue;let l=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(-1!==l&&(s=r[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),r[1]=r[1].slice(0,l)),(i=t(o.call(this,r[1].trim(),a),a))&&r[0]===e&&!wc(i))return i;wc(i)||(i=wu(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),s.length&&(i=s.reduce((e,t)=>this.format(e,t,n.lng,{...n,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}let wK=e=>{let t={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});let o=r+JSON.stringify(a),s=t[o];return s||(s=e(wS(r),i),t[o]=s),s(n)}},wH=e=>(t,n,r)=>e(wS(n),r)(t);class wz{constructor(e={}){this.logger=wT.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";let n=t.cacheInBuiltFormats?wK:wH;this.formats={number:n((e,t)=>{let n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)}),currency:n((e,t)=>{let n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)}),datetime:n((e,t)=>{let n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)}),relativetime:n((e,t)=>{let n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")}),list:n((e,t)=>{let n=new Intl.ListFormat(e,{...t});return e=>n.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=wK(t)}format(e,t,n,r={}){let i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&0>i[0].indexOf(")")&&i.find(e=>e.indexOf(")")>-1)){let e=i.findIndex(e=>e.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}return i.reduce((e,t)=>{let{formatName:i,formatOptions:a}=(e=>{let t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){let r=e.split("(");t=r[0].toLowerCase().trim();let i=r[1].substring(0,r[1].length-1);"currency"===t&&0>i.indexOf(":")?n.currency||(n.currency=i.trim()):"relativetime"===t&&0>i.indexOf(":")?n.range||(n.range=i.trim()):i.split(";").forEach(e=>{if(e){let[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),a=t.trim();n[a]||(n[a]=i),"false"===i&&(n[a]=!1),"true"===i&&(n[a]=!0),isNaN(i)||(n[a]=parseInt(i,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{let o=r?.formatParams?.[r.interpolationkey]||{},s=o.locale||o.lng||r.locale||r.lng||n;t=this.formats[i](e,s,{...a,...r,...o})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${i}`),e},e)}}class wF extends wI{constructor(e,t,n,r={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=wT.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,r.backend,r)}queueLoad(e,t,n,r){let i={},a={},o={},s={};return e.forEach(e=>{let r=!0;t.forEach(t=>{let o=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===a[o]&&(a[o]=!0):(this.state[o]=1,r=!1,void 0===a[o]&&(a[o]=!0),void 0===i[o]&&(i[o]=!0),void 0===s[t]&&(s[t]=!0)))}),r||(o[e]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(s)}}loaded(e,t,n){let r=e.split("|"),i=r[0],a=r[1];t&&this.emit("failedLoading",i,a,t),!t&&n&&this.store.addResourceBundle(i,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);let o={};this.queue.forEach(n=>{((e,t,n,r)=>{let{obj:i,k:a}=wg(e,t,Object);i[a]=i[a]||[],i[a].push(n)})(n.loaded,[i],a),void 0!==n.pending[e]&&(delete n.pending[e],n.pendingCount--),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{o[e]||(o[e]={});let t=n.loaded[e];t.length&&t.forEach(t=>{void 0===o[e][t]&&(o[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n,r=0,i=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:a});this.readingCalls++;let o=(o,s)=>{if(this.readingCalls--,this.waitingReads.length>0){let e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&s&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,r+1,2*i,a)},i):a(o,s)},s=this.backend[n].bind(this.backend);if(2===s.length){try{let n=s(e,t);n&&"function"==typeof n.then?n.then(e=>o(null,e)).catch(o):o(null,n)}catch(e){o(e)}return}return s(e,t,o)}prepareLoading(e,t,n={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();wc(e)&&(e=this.languageUtils.toResolveHierarchy(e)),wc(t)&&(t=[t]);let i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){let n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,(n,a)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,n),!n&&a&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,a),this.loaded(e,n,a)})}saveMissing(e,t,n,r,i,a={},o=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t))return void this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");if(null!=n&&""!==n){if(this.backend?.create){let s={...a,isUpdate:i},l=this.backend.create.bind(this.backend);if(l.length<6)try{let i;(i=5===l.length?l(e,t,n,r,s):l(e,t,n,r))&&"function"==typeof i.then?i.then(e=>o(null,e)).catch(o):o(null,i)}catch(e){o(e)}else l(e,t,n,r,o,s)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}let wV=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),wc(e[1])&&(t.defaultValue=e[1]),wc(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){let n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),wq=e=>(wc(e.ns)&&(e.ns=[e.ns]),wc(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),wc(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e),wY=()=>{};class wG extends wI{constructor(e={},t){if(super(),this.options=wq(e),this.services={},this.logger=wT,this.modules={external:[]},(e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(t=>{"function"==typeof e[t]&&(e[t]=e[t].bind(e))})})(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(wc(e.ns)?e.defaultNS=e.ns:0>e.ns.indexOf("translation")&&(e.defaultNS=e.ns[0]));let n=wV();this.options={...n,...this.options,...wq(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator),"function"!=typeof this.options.overloadTranslationOptionHandler&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler);let r=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?wT.init(r(this.modules.logger),this.options):wT.init(null,this.options),e=this.modules.formatter?this.modules.formatter:wz;let t=new wD(this.options);this.store=new wN(this.options.resources,this.options);let i=this.services;i.logger=wT,i.resourceStore=this.store,i.languageUtils=t,i.pluralResolver=new wB(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),e&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(i.formatter=r(e),i.formatter.init&&i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new wW(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new wF(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new wL(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=wY),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});let i=wd(),a=()=>{let e=(e,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),i.resolve(n),t(e,n)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?a():setTimeout(a,0),i}loadResources(e,t=wY){let n=t,r=wc(e)?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||0===this.options.preload.length))return n();let e=[],t=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&0>e.indexOf(t)&&e.push(t)})};r?t(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e)),this.options.preload?.forEach?.(e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),n(e)})}else n(null)}reloadResources(e,t,n){let r=wd();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=wY),this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&wO.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){let t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&0>this.languages.indexOf(e)&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;let n=wd();this.emit("languageChanging",e);let r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(i,a)=>{a?this.isLanguageChangingTo===e&&(r(a),this.translator.changeLanguage(a),this.isLanguageChangingTo=void 0,this.emit("languageChanged",a),this.logger.log("languageChanged",a)):this.isLanguageChangingTo=void 0,n.resolve((...e)=>this.t(...e)),t&&t(i,(...e)=>this.t(...e))},a=t=>{e||t||!this.services.languageDetector||(t=[]);let n=wc(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(wc(t)?[t]:t);a&&(this.language||r(a),this.translator.language||this.translator.changeLanguage(a),this.services.languageDetector?.cacheUserLanguage?.(a)),this.loadResources(a,e=>{i(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),n}getFixedT(e,t,n){let r=(e,t,...i)=>{let a,o;(a="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(i)):{...t}).lng=a.lng||r.lng,a.lngs=a.lngs||r.lngs,a.ns=a.ns||r.ns,""!==a.keyPrefix&&(a.keyPrefix=a.keyPrefix||n||r.keyPrefix);let s=this.options.keySeparator||".";return a.keyPrefix&&Array.isArray(e)?o=e.map(e=>("function"==typeof e&&(e=wM(e,{...this.options,...t})),`${a.keyPrefix}${s}${e}`)):("function"==typeof e&&(e=wM(e,{...this.options,...t})),o=a.keyPrefix?`${a.keyPrefix}${s}${e}`:e),this.t(o,a)};return wc(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=n,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;let a=(e,t)=>{let n=this.services.backendConnector.state[`${e}|${t}`];return -1===n||0===n||2===n};if(t.precheck){let e=t.precheck(this,a);if(void 0!==e)return e}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!r||a(i,e)))}loadNamespaces(e,t){let n=wd();return this.options.ns?(wc(e)&&(e=[e]),e.forEach(e=>{0>this.options.ns.indexOf(e)&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){let n=wd();wc(e)&&(e=[e]);let r=this.options.preload||[],i=e.filter(e=>0>r.indexOf(e)&&this.services.languageUtils.isSupportedCode(e));return i.length?(this.options.preload=r.concat(i),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{let t=new Intl.Locale(e);if(t&&t.getTextInfo){let e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(e){}let t=this.services?.languageUtils||new wD(wV());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){let n=new wG(e,t);return n.createInstance=wG.createInstance,n}cloneInstance(e={},t=wY){let n=e.forkResourceStore;n&&delete e.forkResourceStore;let r={...this.options,...e,isClone:!0},i=new wG(r);if((void 0!==e.debug||void 0!==e.prefix)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(e=>{i[e]=this[e]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new wN(Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((n,r)=>(n[r]={...e[t][r]},n),e[t]),e),{}),r),i.services.resourceStore=i.store),e.interpolation){let t={...wV().interpolation,...this.options.interpolation,...e.interpolation},n={...r,interpolation:t};i.services.interpolator=new wW(n)}return i.translator=new wL(i.services,r),i.translator.on("*",(e,...t)=>{i.emit(e,...t)}),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}let wJ=wG.createInstance();wJ.createInstance,wJ.dir,wJ.init,wJ.loadResources,wJ.reloadResources,wJ.use,wJ.changeLanguage,wJ.getFixedT,wJ.t,wJ.exists,wJ.setDefaultNamespace,wJ.hasLoadedNamespace,wJ.loadNamespaces,wJ.loadLanguages;var wZ=e.i(19225);let wQ=wJ.createInstance();function wX({isShown:e,onClose:t,children:n,uiConfig:r,sheetClassName:i,showCloseButton:o=!0}){let{borderRadiusType:s="large"}=r;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:mJ("w3a--bottom-sheet-bg w3a--fixed w3a--left-0 w3a--top-0 w3a--size-full w3a--transition-opacity w3a--duration-300",{"w3a--rounded-[30px]":"large"===s,"w3a--rounded-2xl":"medium"===s,"w3a--rounded-none":"small"===s}),onClick:t,"aria-hidden":"true",role:"button"}),(0,a.jsxs)("div",{className:mJ(`w3a--fixed w3a--bottom-2 w3a--left-2 w3a--mx-auto w3a--flex w3a--w-[96%] w3a--flex-col 
      w3a--gap-y-2 w3a--border w3a--border-app-gray-100 w3a--bg-app-white w3a--p-4 w3a--shadow-lg w3a--transition-transform w3a--duration-500 
      w3a--ease-out dark:w3a--border-app-gray-600 dark:w3a--bg-app-dark-surface-main
      ${e?"w3a--translate-y-0 w3a--delay-700":"w3a--translate-y-full"}`,{"w3a--rounded-[30px]":"large"===s,"w3a--rounded-2xl":"medium"===s,"w3a--rounded-none":"small"===s},i),children:[o&&(0,a.jsx)("div",{className:"w3a--absolute w3a--right-4 w3a--top-[16px] w3a--z-10 w3a--cursor-pointer",children:(0,a.jsx)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:t,className:"w3a--text-app-gray-500 hover:w3a--text-app-gray-900 dark:w3a--text-app-gray-200 dark:hover:w3a--text-app-white",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292787 1.29299C0.480314 1.10552 0.734622 1.0002 0.999786 1.0002C1.26495 1.0002 1.51926 1.10552 1.70679 1.29299L5.99979 5.58599L10.2928 1.29299C10.385 1.19748 10.4954 1.1213 10.6174 1.06889C10.7394 1.01648 10.8706 0.988893 11.0034 0.987739C11.1362 0.986585 11.2678 1.01189 11.3907 1.06217C11.5136 1.11245 11.6253 1.1867 11.7192 1.28059C11.8131 1.37449 11.8873 1.48614 11.9376 1.60904C11.9879 1.73193 12.0132 1.86361 12.012 1.99639C12.0109 2.12917 11.9833 2.26039 11.9309 2.38239C11.8785 2.5044 11.8023 2.61474 11.7068 2.70699L7.41379 6.99999L11.7068 11.293C11.8889 11.4816 11.9897 11.7342 11.9875 11.9964C11.9852 12.2586 11.88 12.5094 11.6946 12.6948C11.5092 12.8802 11.2584 12.9854 10.9962 12.9877C10.734 12.9899 10.4814 12.8891 10.2928 12.707L5.99979 8.41399L1.70679 12.707C1.51818 12.8891 1.26558 12.9899 1.00339 12.9877C0.741188 12.9854 0.490376 12.8802 0.304968 12.6948C0.11956 12.5094 0.0143906 12.2586 0.0121121 11.9964C0.00983372 11.7342 0.110629 11.4816 0.292787 11.293L4.58579 6.99999L0.292787 2.70699C0.105316 2.51946 0 2.26515 0 1.99999C0 1.73483 0.105316 1.48052 0.292787 1.29299V1.29299Z",fill:"currentColor"})})}),n]})]})}wQ.use({type:"3rdParty",init(e){((e={})=>{wr={...wr,...e}})(e.options.react),i=e}}).init({resources:{en:{translation:wZ.default}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1},debug:!1,react:{useSuspense:!0}});let w0=(0,s.createContext)({analytics:void 0});function w1(e){let{isDark:t,isLoading:n,selectedChain:r,setSelectedChain:i,chainNamespace:o}=e,[l]=wo(void 0,{i18n:wQ}),c=(0,s.useMemo)(()=>{let e=[{id:"all",name:"modal.allChains",icon:""}];for(let t of o)(t===e$.CHAIN_NAMESPACES.EIP155||t===e$.CHAIN_NAMESPACES.SOLANA)&&e.push({id:t,name:t===e$.CHAIN_NAMESPACES.EIP155?"EVM":t,icon:t===e$.CHAIN_NAMESPACES.EIP155?"ethereum":t});return e},[o]);return n?(0,a.jsx)("div",{className:"w3a--flex w3a--items-center w3a--justify-between w3a--gap-x-2",children:Array.from({length:c.length}).map((e,t)=>(0,a.jsx)("div",{className:"w3a--h-12 w3a--w-[100px] w3a--animate-pulse w3a--rounded-2xl w3a--bg-app-gray-200 dark:w3a--bg-app-gray-700"},`chain-loader-${t}`))}):(0,a.jsx)("div",{className:"w3a--flex w3a--items-center w3a--justify-items-start w3a--gap-x-4",children:c.map(e=>(0,a.jsxs)("button",{type:"button",className:mJ("w3a--flex w3a--w-[104px] w3a--items-center w3a--justify-center w3a--gap-x-1 w3a--text-xs w3a--font-medium w3a--px-4 w3a--py-3 w3a--text-app-gray-500 dark:w3a--text-app-gray-300 hover:w3a--bg-app-gray-200 dark:hover:w3a--bg-app-gray-700 w3a--h-12 w3a--rounded-2xl w3a--border w3a--border-transparent",{"w3a--bg-app-gray-100 dark:w3a--bg-app-gray-800 w3a--border-app-gray-200 dark:w3a--border-app-gray-700 w3a--text-app-gray-900 dark:w3a--text-app-white hover:!w3a--bg-app-gray-100 dark:hover:!w3a--bg-app-gray-800":r===e.id}),onClick:()=>i(e.id),children:[e.icon&&(0,a.jsx)("img",{src:mZ(t?`${e.icon}-dark`:`${e.icon}-light`),alt:e.name,className:"w3a--size-5 w3a--object-contain"}),(0,a.jsx)("span",{className:"first-letter:w3a--capitalize",children:l(e.name)})]},e.id))})}function w3(e){let{disableBackButton:t,onBackClick:n,currentPage:r,selectedButton:i}=e,[o]=wo(void 0,{i18n:wQ});return(0,a.jsxs)("div",{className:"w3a--flex w3a--items-center w3a--justify-between",children:[t?(0,a.jsx)("div",{}):(0,a.jsx)("button",{type:"button",className:"w3a--z-20 w3a--flex w3a--size-5 w3a--cursor-pointer w3a--items-center w3a--justify-center w3a--rounded-full",onClick:()=>{n&&n()},children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",className:"w3a--text-app-gray-500 hover:w3a--text-app-gray-900 dark:w3a--text-app-gray-200 dark:hover:w3a--text-app-white",children:(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.707 16.707a1 1 0 0 1-1.414 0l-6-6a1 1 0 0 1 0-1.414l6-6a1 1 0 0 1 1.414 1.414L5.414 9H17a1 1 0 1 1 0 2H5.414l4.293 4.293a1 1 0 0 1 0 1.414",clipRule:"evenodd"})})}),(0,a.jsx)("p",{className:"w3a--text-base w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:r===mL?null==i?void 0:i.displayName:r===mR?o("modal.connectYourWallet"):r}),(0,a.jsx)("div",{className:"w3a--z-[-1] w3a--size-5"})]})}let w2="social",w5="wallet";function w4(e){let{id:t="",isButton:n=!1,imageData:r="",height:i="auto",width:o="auto",extension:l="svg",darkImageId:c="",darkHoverImageId:d="",imageId:u,hoverImageId:h,fallbackImageId:f}=e,{isDark:p}=(0,s.useContext)(wl),g=(0,s.useMemo)(()=>p&&c?c:u,[p,c,u]),m=(0,s.useMemo)(()=>p&&d?d:h,[p,d,h]);return n?r?(0,a.jsx)("img",{id:t,src:r,height:i,width:o,alt:h,className:mJ("w3a--object-contain",`w3a--h-${i} w3a--w-${o}`)}):(0,a.jsx)("img",{id:t,src:`https://images.web3auth.io/${m}.${l}`,height:i,width:o,alt:h,className:mJ("w3a--rounded w3a--object-contain",`w3a--h-${i} w3a--w-${o}`)}):r?(0,a.jsx)("img",{id:t,src:r,height:i,width:o,alt:u,className:mJ("w3a--object-contain",`w3a--h-${i} w3a--w-${o}`),onError:({currentTarget:e})=>{f&&(e.onerror=null,e.src=`https://images.web3auth.io/${f}.svg`)}}):(0,a.jsx)("img",{id:t,src:`https://images.web3auth.io/${g}.${l}`,height:i,width:o,alt:u,className:mJ("w3a--rounded w3a--object-contain",`w3a--h-${i} w3a--w-${o}`),onError:({currentTarget:e})=>{f&&(e.onerror=null,e.src=`https://images.web3auth.io/${f}.svg`)}})}function w8(e){let t,n,{text:r,showIcon:i,showText:o,method:s,isDark:l,isPrimaryBtn:c,onClick:d,children:u,btnStyle:h,buttonRadius:f="pill"}=e;return(0,a.jsxs)("button",{type:"button",onClick:e=>d&&d(e),className:mJ("w3a--btn",h,{"w3a--rounded-full":"pill"===f,"w3a--rounded-lg":"rounded"===f,"w3a--rounded-none":"square"===f}),children:[i&&(t=s===eK.AUTH_CONNECTION.TWITTER?`login-X${l?"-light":"-dark"}`:`login-${s}${l?"-light":"-dark"}`,n=s===eK.AUTH_CONNECTION.APPLE||s===eK.AUTH_CONNECTION.GITHUB||s===eK.AUTH_CONNECTION.TWITTER?t:`login-${s}-active`,c?(0,a.jsx)(w4,{width:"20",imageId:n,hoverImageId:n,isButton:!0}):(0,a.jsx)(w4,{width:"20",imageId:t,hoverImageId:n})),o&&(0,a.jsx)("p",{className:"w3a--text-sm w3a--font-normal w3a--text-app-gray-900 dark:w3a--text-app-white",children:r}),u]})}var w6=e.i(43794);function w9(e){let[t]=wo(void 0,{i18n:wQ}),{deviceDetails:n,button:r,walletConnectUri:i,onClick:o,label:l,buttonRadius:c}=e,d=(0,s.useContext)(wl),u=(0,s.useMemo)(()=>"desktop"!==n.platform&&r.href&&r.hasWalletConnect&&!r.isInstalled,[n,r]),h=(0,s.useMemo)(()=>{var e;let t;return r.href?(t=encodeURIComponent((e={uri:i,link:r.href}).uri),e.link.startsWith("http")?`${e.link}/wc?uri=${t}`:e.link?`${e.link}wc?uri=${t}`:""):i},[r,i]);return(0,a.jsxs)("button",{type:"button",className:(0,w6.default)(`w3a--group w3a--relative w3a--overflow-hidden w3a--flex w3a--w-full w3a--items-center w3a--justify-between w3a--bg-app-gray-50 w3a--p-3 hover:w3a--bg-app-gray-200 
        hover:w3a--text-app-gray-900 dark:w3a--bg-app-gray-800 dark:hover:w3a--bg-app-gray-600 active:w3a--scale-95 w3a--transition-all w3a--duration-150`,{"w3a--rounded-full":"pill"===c,"w3a--rounded-lg":"rounded"===c,"w3a--rounded-none":"square"===c}),onClick:()=>{h&&u?window.open(h,"_blank"):o&&o()},children:[(0,a.jsxs)("div",{className:"w3a--flex w3a--items-center w3a--gap-x-2",children:[(0,a.jsx)("figure",{className:"w3a--size-5",children:(0,a.jsx)(w4,{imageData:r.icon,imageId:`login-${r.name}`,hoverImageId:`login-${r.name}`,fallbackImageId:"wallet",height:"24",width:"24",isButton:!0,extension:r.imgExtension||"webp"})}),(0,a.jsx)("p",{className:"w3a--max-w-[180px] w3a--truncate w3a--text-base w3a--font-normal w3a--text-app-gray-700 dark:w3a--text-app-white",children:l})]}),r.hasInjectedWallet&&(0,a.jsx)("span",{className:"w3a--absolute w3a--right-4 w3a--top-1/2 w3a--flex w3a--w-auto -w3a--translate-y-1/2 w3a--items-center w3a--rounded-md w3a--bg-app-primary-100 w3a--px-2 w3a--py-1 w3a--text-xs w3a--font-medium w3a--text-app-primary-800 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-6 group-hover:w3a--opacity-0  dark:w3a--border dark:w3a--border-app-primary-400 dark:w3a--bg-transparent dark:w3a--text-app-primary-400",children:t("modal.external.installed")}),(0,a.jsx)("img",{id:"injected-wallet-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-10 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:mZ(d?"chevron-right-light":"chevron-right-dark"),alt:"arrow"})]})}function w7(e){let{type:t,props:n}=e,{text:r,showIcon:i,showText:o,method:s,isDark:l,isPrimaryBtn:c,onClick:d,children:u,btnStyle:h,buttonRadius:f}=n,{label:p,onClick:g,button:m,deviceDetails:w,walletConnectUri:y,buttonRadius:v}=n;return(0,a.jsxs)(a.Fragment,{children:[t===w2&&(0,a.jsx)(w8,{text:r,showIcon:i,showText:o,method:s,isDark:l,isPrimaryBtn:c,onClick:d,btnStyle:h,buttonRadius:f,children:u}),t===w5&&(0,a.jsx)(w9,{label:p,walletConnectUri:y,onClick:g,button:m,deviceDetails:w,buttonRadius:v})]})}function ye(){let[e]=wo(void 0,{i18n:wQ});return(0,a.jsx)("div",{className:"w3a--flex w3a--w-full w3a--items-center w3a--justify-center w3a--py-6 w3a--text-center w3a--text-app-gray-400 dark:w3a--text-app-gray-500",children:e("modal.external.no-wallets-found")})}function yt(e){let{externalButtons:t,isLoading:n,handleWalletClick:r,deviceDetails:i,walletConnectUri:o,buttonRadius:s}=e;return n?(0,a.jsx)("div",{className:"w3a--flex w3a--flex-col w3a--gap-y-2",children:Array.from({length:6}).map((e,t)=>(0,a.jsx)("div",{className:mJ("w3a--h-12 w3a--w-full w3a--animate-pulse w3a--rounded-2xl w3a--bg-app-gray-200 dark:w3a--bg-app-gray-700",{"w3a--rounded-full":"pill"===s,"w3a--rounded-lg":"rounded"===s,"w3a--rounded-none":"square"===s})},`loader-${t}`))}):(0,a.jsx)("div",{className:"w3a--flex w3a--flex-col w3a--gap-y-2 w3a--pr-1.5",children:t.map(e=>(0,a.jsx)(w7,{type:w5,props:{label:e.displayName,onClick:()=>r(e),button:e,deviceDetails:i,walletConnectUri:o,buttonRadius:s}},e.name))})}function yn(e){let{totalExternalWalletsCount:t,initialWalletCount:n,handleMoreWallets:r,isLoading:i,isDark:o,buttonRadius:s}=e,[l]=wo(void 0,{i18n:wQ});return i&&n<t?(0,a.jsx)("div",{className:mJ("w3a--h-12 w3a--w-full w3a--animate-pulse w3a--bg-app-gray-200 dark:w3a--bg-app-gray-700",{"w3a--rounded-full":"pill"===s,"w3a--rounded-lg":"rounded"===s,"w3a--rounded-none":"square"===s})}):(0,a.jsxs)("button",{type:"button",className:mJ("w3a--flex w3a--items-center w3a--justify-start w3a--gap-x-2 w3a--bg-app-gray-50 w3a--p-3 hover:w3a--bg-app-gray-200 dark:w3a--bg-app-gray-800 dark:hover:w3a--bg-app-gray-600 active:w3a--scale-95 w3a--transition-all w3a--duration-150 w3a--mr-2.5",{"w3a--rounded-full":"pill"===s,"w3a--rounded-lg":"rounded"===s,"w3a--rounded-none":"square"===s}),onClick:()=>{r&&r()},children:[(0,a.jsx)("img",{src:mZ(o?"view-dark":"view-light"),alt:"view",height:"24",width:"24"}),(0,a.jsx)("p",{className:"w3a--text-base w3a--font-normal w3a--text-app-gray-700 dark:w3a--text-app-white",children:l("modal.connect-wallet.more-wallets")}),(0,a.jsx)("span",{className:"w3a--inline-flex w3a--items-center w3a--rounded-full w3a--bg-app-primary-100 w3a--px-2 w3a--py-1 w3a--text-xs w3a--font-medium w3a--text-app-primary-800  dark:w3a--border dark:w3a--border-app-primary-400 dark:w3a--bg-transparent dark:w3a--text-app-primary-400",children:t-n})]})}function yr(e){let{externalButtons:t,isLoading:n,totalExternalWalletsCount:r,initialWalletCount:i,handleWalletClick:o,handleMoreWallets:s,isDark:l,deviceDetails:c,walletConnectUri:d,buttonRadius:u,isShowAllWallets:h}=e,f=!h;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("ul",{className:mJ("w3a--overflow-y-auto w3a--flex w3a--flex-col w3a--gap-y-2 w3a--h-[280px] w3a--social-container w3a--pr-2.5",{"w3a--h-[328px]":!f}),children:0===t.length?(0,a.jsx)(ye,{}):(0,a.jsx)(yt,{externalButtons:t,isLoading:n,handleWalletClick:o,deviceDetails:c,walletConnectUri:d,buttonRadius:u})}),f&&!n&&i<r&&(0,a.jsx)(yn,{totalExternalWalletsCount:r,initialWalletCount:i,handleMoreWallets:()=>{s()},isLoading:n,isDark:l,buttonRadius:u})]})}var yi=e.i(34549);function ya(e){var t;let[n]=wo(void 0,{i18n:wQ}),{bodyState:r,setBodyState:i,setToast:o}=(0,s.useContext)(ws),{qrCodeValue:l,isDark:c,selectedButton:d,logoImage:u,primaryColor:h}=e,f=(0,s.useMemo)(()=>"undefined"!=typeof window&&"desktop"===eF.default.getParser(window.navigator.userAgent).getPlatformType(),[]),p=document.documentElement,g="#FFFFFF",m=(null==(t=getComputedStyle(p))||null==(t=t.getPropertyValue("--app-gray-800"))?void 0:t.trim())||"#1f2a37",w=h&&"#ffffff"===h.toLowerCase()?"#000000":h;return(0,a.jsxs)("div",{className:"w3a--contents",children:[l?(0,a.jsxs)("div",{className:"w3a--flex w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4 w3a--rounded-2xl w3a--border w3a--border-app-gray-200 w3a--p-4 dark:w3a--border-app-gray-700",children:[(0,a.jsx)("button",{type:"button",className:"w3a--relative w3a--flex w3a--size-[300px] w3a--appearance-none w3a--items-center w3a--justify-center w3a--rounded-2xl",onClick:()=>{navigator.clipboard.writeText(l),o({message:n("modal.external.qr-code-copied-to-clipboard"),type:m_.SUCCESS})},children:(0,a.jsx)(yi.QRCode,{size:f?300:260,eyeRadius:5,qrStyle:"dots",removeQrCodeBehindLogo:!0,logoImage:u||"https://images.web3auth.io/login-wallet-connect.svg",value:l,logoHeight:32,logoWidth:32,logoPadding:10,eyeColor:c?g:w,bgColor:c?m:g,fgColor:c?g:"#000000"})}),(0,a.jsx)("p",{className:"w3a--text-center w3a--text-sm w3a--font-normal w3a--text-app-gray-500 dark:w3a--text-app-gray-300",children:n("modal.external.walletconnect-copy")})]}):(0,a.jsx)("div",{className:"w3a--mx-auto w3a--flex w3a--size-[300px] w3a--animate-pulse w3a--items-center w3a--justify-center w3a--rounded-lg w3a--bg-app-gray-200 w3a--p-2 dark:w3a--bg-app-gray-700",children:(0,a.jsx)(w4,{imageId:`login-${d.name}`,hoverImageId:`login-${d.name}`,fallbackImageId:"wallet",height:"30",width:"30",isButton:!0,extension:d.imgExtension})}),(0,a.jsxs)("div",{className:"w3a--flex w3a--w-full w3a--items-center w3a--justify-between w3a--rounded-2xl w3a--bg-app-gray-50  w3a--px-4 w3a--py-2 w3a--text-app-gray-900 dark:w3a--bg-app-gray-800 dark:w3a--text-app-white",children:[(0,a.jsxs)("p",{className:"w3a--text-sm w3a--text-app-gray-900 dark:w3a--text-app-white",children:[n("modal.external.dont-have")," ",(0,a.jsx)("span",{children:null==d?void 0:d.displayName}),"?"]}),(0,a.jsx)("button",{type:"button",className:"w3a--appearance-none w3a--rounded-full w3a--border w3a--border-app-gray-200 w3a--bg-transparent w3a--px-5 w3a--py-2 w3a--text-base w3a--font-normal w3a--text-app-gray-700 w3a--transition-all w3a--duration-150 hover:w3a--border-transparent hover:w3a--shadow-light active:w3a--scale-95 dark:w3a--border-app-gray-700 dark:w3a--text-app-gray-300 dark:hover:w3a--border-transparent dark:hover:w3a--shadow-dark",onClick:()=>{i((0,eD.default)((0,eD.default)({},r),{},{installLinks:{show:!0,wallet:d}}))},children:n("modal.external.get-wallet")})]})]})}function yo(e){let{totalExternalWalletCount:t,isLoading:n,walletSearch:r,handleWalletSearch:i,buttonRadius:o}=e,[l,c]=(0,s.useState)(!1),[d]=wo(void 0,{i18n:wQ});return(0,a.jsx)("input",{type:"text",value:r,onInput:e=>{i(e),c(!0)},onFocus:e=>{e.target.placeholder="",c(!0)},onBlur:e=>{e.target.placeholder=d("modal.external.search-wallet",{count:t}),c(!1)},placeholder:n?d("modal.external.search-wallet-loading"):d("modal.external.search-wallet",{count:t}),disabled:n,className:mJ("w3a--input w3a--appearance-none w3a--outline-none active:w3a--outline-none focus:w3a--outline-none w3a--bg-transparent placeholder:w3a--text-app-gray-400 dark:placeholder:w3a--text-app-gray-500 w3a--text-app-gray-900 dark:w3a--text-app-white",l&&"!w3a--border-app-primary-600",{"w3a--rounded-full":"pill"===o,"w3a--rounded-lg":"rounded"===o,"w3a--rounded-none":"square"===o})})}function ys(e){var t;let{isDark:n,config:r,walletConnectUri:i,metamaskConnectUri:o,walletRegistry:l,allRegistryButtons:c,customConnectorButtons:d,connectorVisibilityMap:u,deviceDetails:h,buttonRadius:f="pill",chainNamespace:p,isExternalWalletModeOnly:g,onBackClick:m,handleExternalWalletClick:w,handleWalletDetailsHeight:y}=e,{bodyState:v,setBodyState:b}=(0,s.useContext)(ws),{analytics:E}=(0,s.useContext)(w0),[C,x]=(0,s.useState)(mR),[S,_]=(0,s.useState)(!1),[A]=(0,s.useState)(!1),[T,I]=(0,s.useState)(null),[N,O]=(0,s.useState)(""),[k,M]=(0,s.useState)("all"),[P,R]=(0,s.useState)(!1),L=(0,s.useMemo)(()=>l&&(Object.keys(l.default||{}).length>0||Object.keys(l.others||{}).length>0),[l]),D=(0,s.useMemo)(()=>{let e=new Set;return d.concat(c).filter(t=>!e.has(t.name)&&(e.add(t.name),!0))},[c,d]),j=(0,s.useMemo)(()=>new Set(Object.keys(l.default)),[l]),U=(0,s.useMemo)(()=>{let e=[...c.filter(e=>e.hasInjectedWallet&&j.has(e.name)),...d,...c.filter(e=>!e.hasInjectedWallet&&j.has(e.name))].sort((e,t)=>e.name===eR.WALLET_CONNECTORS.METAMASK&&t.name===eR.WALLET_CONNECTORS.METAMASK?e.isInstalled?-1:t.isInstalled?1:e.hasInjectedWallet?-1:+!!t.hasInjectedWallet:e.name===eR.WALLET_CONNECTORS.METAMASK?-1:+(t.name===eR.WALLET_CONNECTORS.METAMASK)),t=new Set;return e.filter(e=>!t.has(e.name)&&(t.add(e.name),!0)).filter(e=>{var t;return"all"===k||(null==(t=e.chainNamespaces)?void 0:t.includes(k))})},[c,d,j,k]),B=(0,s.useMemo)(()=>Object.keys(r).reduce((e,t)=>(t!==eR.WALLET_CONNECTORS.WALLET_CONNECT_V2&&u[t]&&e.push({name:t,displayName:r[t].label||t,hasInjectedWallet:r[t].isInjected,hasWalletConnect:!1,hasInstallLinks:!1}),e),[]),[u,r]),$=(0,s.useMemo)(()=>L?[...D.filter(e=>e.hasInjectedWallet),...D.filter(e=>!e.hasInjectedWallet)].sort((e,t)=>e.name===eR.WALLET_CONNECTORS.METAMASK?-1:1).filter(e=>"all"===k||e.chainNamespaces.includes(k)).filter(e=>e.name.toLowerCase().includes(N.toLowerCase())):B,[L,B,N,D,k]),W=(0,s.useMemo)(()=>!L||N||P?$:U,[L,N,$,U,P]),K=(0,s.useMemo)(()=>$.length,[$]),H=(0,s.useMemo)(()=>P?K:L?U.length:B.length,[L,U,B,P,K]);(0,s.useEffect)(()=>{L&&K<=15?R(!0):R(!1)},[L,k,K]);let z=(0,s.useMemo)(()=>S?T.name!==eR.WALLET_CONNECTORS.METAMASK||T.hasInjectedWallet?i:o:null,[o,T,S,i]),F=(0,s.useMemo)(()=>!S&&!!g,[S,g]);return(0,a.jsxs)("div",{className:"w3a--relative w3a--flex w3a--flex-1 w3a--flex-col w3a--gap-y-4",children:[(0,a.jsx)(w3,{disableBackButton:F,onBackClick:()=>{!S&&C===mR&&m?m(!1):S&&(x(mR),_(!1),y())},currentPage:C,selectedButton:T}),S?(0,a.jsx)(ya,{qrCodeValue:z,isDark:n,selectedButton:T,primaryColor:null==(t=T.walletRegistryItem)?void 0:t.primaryColor,logoImage:`https://images.web3auth.io/login-${T.name}.${T.imgExtension}`}):(0,a.jsxs)("div",{className:"w3a--flex w3a--flex-col w3a--gap-y-2",children:[p.length>1&&(0,a.jsx)(w1,{isDark:n,isLoading:A,selectedChain:k,setSelectedChain:e=>{M(e)},chainNamespace:p}),(0,a.jsx)(yo,{totalExternalWalletCount:K,isLoading:A,walletSearch:N,handleWalletSearch:e=>{O(e.target.value)},buttonRadius:f}),(0,a.jsx)(yr,{externalButtons:W,isLoading:A,totalExternalWalletsCount:K,initialWalletCount:H,handleWalletClick:e=>{if(null==E||E.track(te.ANALYTICS_EVENTS.EXTERNAL_WALLET_SELECTED,{connector:e.isInstalled?e.name:e.hasWalletConnect?eR.WALLET_CONNECTORS.WALLET_CONNECT_V2:"",wallet_name:e.displayName,is_installed:e.isInstalled,is_injected:e.hasInjectedWallet,chain_namespaces:e.chainNamespaces,has_wallet_connect:e.hasWalletConnect,has_install_links:e.hasInstallLinks,has_wallet_registry_item:!!e.walletRegistryItem,total_external_wallets:D.length}),nS.log.info("handleWalletClick",e),e.isInstalled){var t;if(e.name===eR.WALLET_CONNECTORS.METAMASK&&!e.hasInjectedWallet&&"desktop"===h.platform){w({connector:e.name}),I(e),_(!0),x(mL),y();return}return(null==(t=e.chainNamespaces)?void 0:t.length)>1?void b((0,eD.default)((0,eD.default)({},v),{},{multiChainSelector:{show:!0,wallet:e}})):void w({connector:e.name})}e.hasWalletConnect?(I(e),_(!0),x(mL),y()):b((0,eD.default)((0,eD.default)({},v),{},{installLinks:{show:!0,wallet:e}}))},handleMoreWallets:()=>{R(!0)},isDark:n,deviceDetails:h,walletConnectUri:i,buttonRadius:f,isShowAllWallets:P})]})]})}let yl=e=>{let{isDark:t,wallet:n,handleExternalWalletClick:r}=e,[i]=wo(void 0,{i18n:wQ}),o=n.chainNamespaces.sort().map(e=>({chainNamespace:e,displayName:"eip155"===e?"EVM":e,imageId:`chain-${"eip155"===e?"evm":e}`}));return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"w3a--flex w3a--items-center w3a--justify-center",children:(0,a.jsx)("p",{className:"w3a--text-base w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:i("modal.external.select-chain")})}),(0,a.jsx)("div",{className:"w3a--my-6 w3a--flex w3a--justify-center",children:(0,a.jsx)(w4,{imageId:`login-${n.name}`,hoverImageId:`login-${n.name}`,fallbackImageId:"wallet",height:"100",width:"100",isButton:!0,extension:n.imgExtension})}),(0,a.jsx)("p",{className:"w3a--my-6 w3a--text-center w3a--text-sm w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:i("modal.external.select-chain-description",{wallet:n.displayName})}),(0,a.jsx)("ul",{className:"w3a--flex w3a--flex-col w3a--gap-3",children:o.map(({chainNamespace:e,displayName:i,imageId:o})=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{type:"button",className:"w3a--btn w3a--group w3a--relative w3a--h-11 w3a--w-full w3a--items-center !w3a--justify-between w3a--overflow-hidden w3a--rounded-full",onClick:()=>r({connector:n.name,chainNamespace:e}),children:[(0,a.jsxs)("div",{className:"w3a--flex w3a--items-center",children:[(0,a.jsx)(w4,{imageId:o,hoverImageId:o,fallbackImageId:"wallet",height:"24",width:"24",isButton:!0,extension:"svg"}),(0,a.jsx)("p",{className:"w3a--ml-2 w3a--text-left w3a--text-sm w3a--text-app-gray-900 first-letter:w3a--capitalize dark:w3a--text-app-gray-200",children:i})]}),(0,a.jsx)("img",{id:"chain-namespace-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-6 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:mZ(t?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})},e))})]})};function yc({privacyPolicy:e,termsOfService:t}){let[n]=wo(void 0,{i18n:wQ});return(0,a.jsxs)("div",{className:"w3a--mx-auto w3a--mt-auto w3a--flex w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4 w3a--pt-5",children:[(e||t)&&(0,a.jsxs)("p",{className:"w3a--mx-auto w3a--w-4/5 w3a--text-center w3a--text-xs w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:[n("modal.footer.by-signing-in")," ",t&&(0,a.jsxs)("a",{href:t,className:"w3a--text-app-primary-600 dark:w3a--text-app-primary-500",children:[n("modal.footer.terms-of-service")," "]}),e&&(0,a.jsxs)(a.Fragment,{children:[n("modal.footer.and")," ",(0,a.jsx)("a",{href:e,className:"w3a--text-app-primary-600 dark:w3a--text-app-primary-500",children:n("modal.footer.privacy-policy")})]})]}),(0,a.jsxs)("div",{className:"w3a--flex w3a--items-center w3a--justify-center w3a--gap-2",children:[(0,a.jsx)("img",{height:"36",src:"https://images.web3auth.io/metamask-footer-logo-light.svg",alt:"Web3Auth Logo Light",className:"w3a--block w3a--h-9 dark:w3a--hidden"}),(0,a.jsx)("img",{height:"36",src:"https://images.web3auth.io/metamask-footer-logo-dark.svg",alt:"Web3Auth Logo Dark",className:"w3a--hidden w3a--h-9 dark:w3a--block"})]})]})}function yd(e,t=160){return null!=e?e:t}let yu=e=>{let{width:t,height:n,thickness:r=12,className:i="",children:o,showChildren:s=!0,trackColor:l="rgba(226, 232, 240, 1)",gradient:c,arcSizeDeg:d=36,arcColors:u}=e,h=yd(t,160),f=yd(n,160),p=`radial-gradient(farthest-side, transparent calc(100% - ${r}px), #000 calc(100% - ${r}px))`;function g(e,t){if(!e)return e;let n=e.trim().toLowerCase();if(n.startsWith("#")){let e,r,i,a,o;return i=parseInt((r=3===(e=n.replace("#","")).length?e.split("").map(e=>e+e).join(""):e).substring(0,2),16),a=parseInt(r.substring(2,4),16),o=parseInt(r.substring(4,6),16),`rgba(${i}, ${a}, ${o}, ${t})`}if(n.startsWith("rgba("))return e;if(n.startsWith("rgb(")){let e=n.slice(4,-1);return`rgba(${e}, ${t})`}return e}let m=c||(u?`radial-gradient(210.91% 85.29% at 14.56% 18.67%, ${g(u[0],0)} 9.5%, ${u[1]} 41.82%, ${u[1]} 64.83%, ${g(u[0],.44)} 100%)`:"radial-gradient(210.91% 85.29% at 14.56% 18.67%, rgba(255, 98, 58, 0.00) 9.5%, #FF623A 41.82%, #FF623A 64.83%, rgba(255, 98, 58, 0.44) 100%)"),w=`conic-gradient(#000 0deg ${d}deg, transparent ${d}deg 360deg)`;return(0,a.jsxs)("div",{className:mJ("w3a--relative w3a--inline-flex w3a--items-center w3a--justify-center",i),style:{width:h,height:f},children:[(0,a.jsx)("div",{className:"w3a--absolute w3a--inset-0 w3a--rounded-full",style:{background:l,WebkitMaskImage:p,maskImage:p,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat"}}),(0,a.jsx)("div",{className:"w3a--absolute w3a--inset-0 w3a--animate-spin",style:{WebkitMaskImage:w,maskImage:w,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat"},children:(0,a.jsx)("div",{className:"w3a--absolute w3a--inset-0 w3a--rounded-full",style:{background:m,WebkitMaskImage:p,maskImage:p,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat"}})}),s&&o?(0,a.jsx)("div",{className:"w3a--relative",children:o}):null]})},yh=()=>(0,a.jsxs)("div",{className:"w3a--flex w3a--items-center w3a--justify-center w3a--gap-x-2",children:[(0,a.jsx)("div",{className:"w3a--size-3 w3a--animate-pulse w3a--rounded-full w3a--bg-app-gray-500 dark:w3a--bg-app-gray-200"}),(0,a.jsx)("div",{className:"w3a--size-3 w3a--animate-pulse w3a--rounded-full w3a--bg-app-gray-400 dark:w3a--bg-app-gray-400"}),(0,a.jsx)("div",{className:"w3a--size-3 w3a--animate-pulse w3a--rounded-full w3a--bg-app-gray-200 dark:w3a--bg-app-gray-600"})]});function yf(e){let[t]=wo(void 0,{i18n:wQ}),{connector:n,appLogo:r,connectorName:i}=e,o=(0,s.useMemo)(()=>"twitter"===n?(0,a.jsx)(w4,{imageId:"login-x-dark"}):(0,a.jsx)(w4,{imageId:`login-${n}`,height:"40",width:"40"}),[n]);return(0,a.jsxs)("div",{className:"w3a--flex w3a--h-full w3a--flex-1 w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4",children:[(0,a.jsxs)("div",{className:"w3a--flex w3a--items-center w3a--justify-center w3a--gap-x-6",children:[(0,a.jsx)("figure",{className:"w3a--flex w3a--size-10 w3a--items-center w3a--justify-center w3a--overflow-hidden",children:(0,a.jsx)("img",{src:r,alt:"",className:"w3a--size-full w3a--object-contain"})}),(0,a.jsx)(yh,{}),o]}),(0,a.jsxs)("div",{className:"w3a--flex w3a--flex-col w3a--gap-y-1",children:[(0,a.jsx)("div",{className:"w3a--text-center w3a--text-sm w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:t("modal.adapter-loader.message1",{adapter:i})}),(0,a.jsx)("div",{className:"w3a--text-center w3a--text-sm w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:t("modal.adapter-loader.message2",{adapter:i})})]})]})}function yp(e){let{message:t}=e;return(0,a.jsxs)("div",{className:"w3a--flex w3a--flex-col w3a--items-center w3a--gap-y-2",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",className:"w3a--connected-logo",children:(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.267 3.455a3.07 3.07 0 0 0 1.745-.723 3.066 3.066 0 0 1 3.976 0 3.07 3.07 0 0 0 1.745.723 3.066 3.066 0 0 1 2.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 0 1 0 3.976 3.07 3.07 0 0 0-.723 1.745 3.066 3.066 0 0 1-2.812 2.812 3.07 3.07 0 0 0-1.745.723 3.066 3.066 0 0 1-3.976 0 3.07 3.07 0 0 0-1.745-.723 3.066 3.066 0 0 1-2.812-2.812 3.07 3.07 0 0 0-.723-1.745 3.066 3.066 0 0 1 0-3.976 3.07 3.07 0 0 0 .723-1.745 3.066 3.066 0 0 1 2.812-2.812m7.44 5.252a1 1 0 0 0-1.414-1.414L9 10.586 7.707 9.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 0 0 1.414 0z",clipRule:"evenodd"})}),(0,a.jsx)("p",{className:"w3a--text-center w3a--text-sm w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:t})]})}function yg(e){let{message:t}=e;return(0,a.jsxs)("div",{className:"w3a--flex w3a--flex-col w3a--items-center w3a--gap-y-2",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",className:"w3a--error-logo",children:(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16.001 0A8 8 0 0 1 18 10m-7 4a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-1-9a1 1 0 0 0-1 1v4a1 1 0 1 0 2 0V6a1 1 0 0 0-1-1",clipRule:"evenodd"})}),(0,a.jsx)("p",{className:"w3a--text-center w3a--text-sm w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:t})]})}function ym(e){var t,n;let[r]=wo(void 0,{i18n:wQ}),{connector:i,externalWalletsConfig:o,walletRegistry:s,handleMobileVerifyConnect:l}=e,c=(null==s||null==(t=s.default)?void 0:t[i])||(null==s||null==(n=s.others)?void 0:n[i]),d=(null==c?void 0:c.primaryColor)||"";return(0,a.jsxs)("div",{className:"w3a--flex w3a--size-full w3a--flex-col w3a--items-center w3a--justify-between w3a--gap-y-6",children:[(0,a.jsx)("p",{className:"w3a--p-2 w3a--text-center w3a--text-base w3a--font-semibold w3a--text-app-gray-900 dark:w3a--text-app-white",children:r("modal.loader.authorizing-header",{connector:o[i].label})}),(0,a.jsx)("div",{className:"w3a--flex w3a--justify-center",children:(0,a.jsx)(yu,{width:95,height:95,thickness:6,arcSizeDeg:100,arcColors:d?[d,d]:void 0,children:(0,a.jsx)(w4,{imageId:`login-${i}`,hoverImageId:`login-${i}`,height:"45",width:"45"})})}),(0,a.jsx)("p",{className:"w3a--text-center w3a--text-sm w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:r("modal.loader.authorizing-message")}),(0,a.jsx)("button",{onClick:()=>{l({connector:i})},className:"w3a--w-full w3a--rounded-xl w3a--bg-app-gray-100 w3a--p-2 w3a--py-3 w3a--text-center w3a--text-sm w3a--text-app-gray-900 dark:w3a--bg-app-gray-800 dark:w3a--text-app-white md:w3a--hidden",children:r("modal.loader.authorizing-verify-btn")})]})}function yw(e){let{connector:t,connectorName:n,modalStatus:r,onClose:i,appLogo:o,message:l,isConnectAndSignAuthenticationMode:c,externalWalletsConfig:d,walletRegistry:u,handleMobileVerifyConnect:h}=e,f=(0,s.useMemo)(()=>!c&&r===mb||c&&r===mS,[r,c]);return(0,s.useEffect)(()=>{if(f){let e=setTimeout(()=>{i()},1e3);return()=>clearTimeout(e)}},[f,i]),(0,a.jsxs)("div",{className:"w3a--flex w3a--h-full w3a--flex-1 w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4",children:[r===mE&&(0,a.jsx)(yf,{connector:t,connectorName:n,appLogo:o}),f&&(0,a.jsx)(yp,{message:l}),r===mC&&(0,a.jsx)(yg,{message:l}),r===mx&&(0,a.jsx)(ym,{connector:t,externalWalletsConfig:d,walletRegistry:u,handleMobileVerifyConnect:h})]})}function yy(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yv(e,t){return(yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var yb=Object.defineProperty,yE=Object.defineProperties,yC=Object.getOwnPropertyDescriptors,yx=Object.getOwnPropertySymbols,yS=Object.prototype.hasOwnProperty,y_=Object.prototype.propertyIsEnumerable,yA=(e,t,n)=>t in e?yb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yT=(e,t)=>{for(var n in t||(t={}))yS.call(t,n)&&yA(e,n,t[n]);if(yx)for(var n of yx(t))y_.call(t,n)&&yA(e,n,t[n]);return e},yI=(e,t,n)=>(yA(e,"symbol"!=typeof t?t+"":t,n),n),yN=(e,t,n)=>new Promise((r,i)=>{var a=e=>{try{s(n.next(e))}catch(e){i(e)}},o=e=>{try{s(n.throw(e))}catch(e){i(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,o);s((n=n.apply(e,t)).next())}),yO="hCaptchaOnLoad",yk="script-error",yM="@hCaptcha/loader";function yP(e){let t=e&&e.ownerDocument||document,n=t.defaultView||t.parentWindow||window;return{document:t,window:n}}function yR(e){return e||document.head}var yL=class e{constructor(e){yI(this,"_parent"),yI(this,"breadcrumbs",[]),yI(this,"context",{}),yI(this,"extra",{}),yI(this,"tags",{}),yI(this,"request"),yI(this,"user"),this._parent=e}get parent(){return this._parent}child(){return new e(this)}setRequest(e){return this.request=e,this}removeRequest(){return this.request=void 0,this}addBreadcrumb(e){return typeof e.timestamp>"u"&&(e.timestamp=new Date().toISOString()),this.breadcrumbs.push(e),this}setExtra(e,t){return this.extra[e]=t,this}removeExtra(e){return delete this.extra[e],this}setContext(e,t){return typeof t.type>"u"&&(t.type=e),this.context[e]=t,this}removeContext(e){return delete this.context[e],this}setTags(e){return this.tags=yT(yT({},this.tags),e),this}setTag(e,t){return this.tags[e]=t,this}removeTag(e){return delete this.tags[e],this}setUser(e){return this.user=e,this}removeUser(){return this.user=void 0,this}toBody(){let e=[],t=this;for(;t;)e.push(t),t=t.parent;return e.reverse().reduce((e,t)=>{var n;return e.breadcrumbs=[...null!=(n=e.breadcrumbs)?n:[],...t.breadcrumbs],e.extra=yT(yT({},e.extra),t.extra),e.contexts=yT(yT({},e.contexts),t.context),e.tags=yT(yT({},e.tags),t.tags),t.user&&(e.user=t.user),t.request&&(e.request=t.request),e},{breadcrumbs:[],extra:{},contexts:{},tags:{},request:void 0,user:void 0})}clear(){this.breadcrumbs=[],this.context={},this.tags={},this.user=void 0}},yD=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,yj="An unknown error occurred";function yU(e){return(e+256).toString(16).substring(1)}var yB,y$,yW,yK,yH=[[/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,"chrome"],[/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,"winjs"],[/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,"gecko"]],yz=(yK=class{constructor(e){var t,n,r,i,a;yI(this,"apiURL"),yI(this,"dsn"),yI(this,"environment"),yI(this,"release"),yI(this,"sampleRate"),yI(this,"debug"),yI(this,"_scope"),yI(this,"shouldBuffer",!1),yI(this,"bufferlimit",20),yI(this,"buffer",[]),this.environment=e.environment,this.release=e.release,this.sampleRate=null!=(t=e.sampleRate)?t:1,this.debug=null!=(n=e.debug)&&n,this._scope=null!=(r=e.scope)?r:new yL,this.apiURL=function(e){let t=yD.exec(e),n=t?t.slice(1):[];if(6!==n.length)throw Error("Invalid DSN");let r=n[5].split("/"),i=r.slice(0,-1).join("/");return n[0]+"://"+n[3]+(n[4]?":"+n[4]:"")+(i?"/"+i:"")+"/api/"+r.pop()+"/envelope/?sentry_version=7&sentry_key="+n[1]+(n[2]?"&sentry_secret="+n[2]:"")}(e.dsn),this.dsn=e.dsn,this.shouldBuffer=null!=(i=e.buffer)&&i,this.bufferlimit=null!=(a=e.bufferLimit)?a:20}static init(e){yK._instance||(yK._instance=new yK(e))}static get instance(){if(!yK._instance)throw Error("Sentry has not been initialized");return yK._instance}log(...e){this.debug&&console.log(...e)}get scope(){return this._scope}static get scope(){return yK.instance.scope}withScope(e){e(this._scope.child())}static withScope(e){yK.instance.withScope(e)}captureException(e,t){this.captureEvent({type:"exception",level:"error",error:function(e){if(e instanceof Error)return e;if("string"==typeof e)return Error(e);if("object"==typeof e&&null!==e&&!Array.isArray(e)){let{message:t}=e,n=((e,t)=>{var n={};for(var r in e)yS.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&yx)for(var r of yx(e))0>t.indexOf(r)&&y_.call(e,r)&&(n[r]=e[r]);return n})(e,["message"]);return Object.assign(Error("string"==typeof t?t:yj),n)}return Object.assign(Error(yj),{cause:e})}(e),scope:null!=t?t:this._scope})}static captureException(e,t){yK.instance.captureException(e,t)}captureMessage(e,t="info",n){this.captureEvent({type:"message",level:t,message:e,scope:null!=n?n:this._scope})}static captureMessage(e,t="info",n){yK.instance.captureMessage(e,t,n)}captureEvent(e){if(Math.random()>=this.sampleRate)return void this.log("Dropped event due to sample rate");if(this.shouldBuffer){if(this.buffer.length>=this.bufferlimit)return;this.buffer.push(e)}else this.sendEvent(e)}sendEvent(e,t=5e3){return yN(this,null,function*(){try{this.log("Sending sentry event",e);let n=function(e,t,n){var r,i,a;let o,s=yT({event_id:((o=function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e}(Array(16)))[6]=15&o[6]|64,o[8]=63&o[8]|128,yU(o[0])+yU(o[1])+yU(o[2])+yU(o[3])+"-"+yU(o[4])+yU(o[5])+"-"+yU(o[6])+yU(o[7])+"-"+yU(o[8])+yU(o[9])+"-"+yU(o[10])+yU(o[11])+yU(o[12])+yU(o[13])+yU(o[14])+yU(o[15])).replaceAll("-",""),platform:"javascript",sdk:{name:"@hcaptcha/sentry",version:"0.0.4"},environment:t,release:n,timestamp:Date.now()/1e3},e.scope.toBody());if("exception"===e.type){let t;s.message=null!=(i=null==(r=e.error)?void 0:r.message)?i:"Unknown error",s.fingerprint=[s.message];let n=[],o=e.error;for(let e=0;e<5&&o&&(n.push((t=function(e){var t,n,r,i;if(!e.stack)return null;let a=[],o=null!=(r=null==(n=(t=e.stack).split)?void 0:n.call(t,`
`))?r:[];for(let t=0;t<o.length;++t){let n=null,r=null,s=null;for(let[e,n]of yH)if(r=e.exec(o[t])){s=n;break}if(!(!r||!s)){if("chrome"===s)n={filename:null!=(i=r[2])&&i.startsWith("address at ")?r[2].substring(11):r[2],function:r[1]||"?",lineno:r[3]?+r[3]:null,colno:r[4]?+r[4]:null};else if("winjs"===s)n={filename:r[2],function:r[1]||"?",lineno:+r[3],colno:r[4]?+r[4]:null};else{if("gecko"!==s)continue;0===t&&!r[5]&&void 0!==e.columnNumber&&a.length>0&&(a[0].column=e.columnNumber+1),n={filename:r[3],function:r[1]||"?",lineno:r[4]?+r[4]:null,colno:r[5]?+r[5]:null}}!n.function&&n.lineno&&(n.function="?"),a.push(n)}}return a.length?a.reverse():null}(a=o),{type:a.name,value:a.message,stacktrace:{frames:null!=t?t:[]}})),!(!o.cause||!(o.cause instanceof Error)));e++)o=o.cause;s.exception={values:n.reverse()}}return"message"===e.type&&(s.message=e.message,s.level=e.level),s}(e,this.environment,this.release),r={event_id:n.event_id,dsn:this.dsn},i=JSON.stringify(r)+`
`+JSON.stringify({type:"event"})+`
`+JSON.stringify(n),a=yield function(e,t,n){return yN(this,null,function*(){var r,i;try{if("u">typeof fetch&&"u">typeof AbortSignal){let r,i,a;if(n){let e=new AbortController;r=e.signal,setTimeout(()=>e.abort(),n)}let o=yield fetch(e,(i=yT({},t),a={signal:r},yE(i,yC(a)))),s=yield o.text();return{status:o.status,body:s}}return yield new Promise((r,i)=>{var a,o;let s=new XMLHttpRequest;if(s.open(null!=(a=null==t?void 0:t.method)?a:"GET",e),s.onload=()=>r({status:s.status,body:s.responseText}),s.onerror=()=>i(Error("XHR Network Error")),null==t?void 0:t.headers)for(let[e,n]of Object.entries(t.headers))s.setRequestHeader(e,n);if(n){let e=setTimeout(()=>{s.abort(),i(Error("Request timed out"))},n);s.onloadend=()=>{clearTimeout(e)}}s.send(null==(o=null==t?void 0:t.body)?void 0:o.toString())})}catch(e){return{status:0,body:null!=(i=null==(r=null==e?void 0:e.toString)?void 0:r.call(e))?i:"Unknown error"}}})}(this.apiURL,{method:"POST",headers:{"Content-Type":"application/x-sentry-envelope"},body:i},t);this.log("Sentry response",a.status),200!==a.status&&(console.log(a.body),console.error("Failed to send event to Sentry",a))}catch(e){console.error("Failed to send event",e)}})}flush(e=5e3){return yN(this,null,function*(){try{this.log("Flushing sentry events",this.buffer.length);let t=this.buffer.splice(0,this.buffer.length).map(t=>this.sendEvent(t,e));yield Promise.all(t),this.log("Flushed all events")}catch(e){console.error("Failed to flush events",e)}})}static flush(e=5e3){return yK.instance.flush(e)}static reset(){yK._instance=void 0}},yI(yK,"_instance"),yK);function yF(e=null){return{addBreadcrumb:t=>{e&&e.addBreadcrumb(t)},captureRequest:t=>{e&&e.setRequest(t)},captureException:t=>{e&&yz.captureException(t,e)}}}var yV=[];function yq(e){var t=e&&e.ownerDocument||document,n=t.defaultView||t.parentWindow||window;return{document:t,window:n}}function yY(e){return e||document.head}var yG=function(e){function t(t){var n;return(n=e.call(this,t)||this)._hcaptcha=void 0,n.renderCaptcha=n.renderCaptcha.bind(yy(n)),n.resetCaptcha=n.resetCaptcha.bind(yy(n)),n.removeCaptcha=n.removeCaptcha.bind(yy(n)),n.isReady=n.isReady.bind(yy(n)),n._onReady=null,n.loadCaptcha=n.loadCaptcha.bind(yy(n)),n.handleOnLoad=n.handleOnLoad.bind(yy(n)),n.handleSubmit=n.handleSubmit.bind(yy(n)),n.handleExpire=n.handleExpire.bind(yy(n)),n.handleError=n.handleError.bind(yy(n)),n.handleOpen=n.handleOpen.bind(yy(n)),n.handleClose=n.handleClose.bind(yy(n)),n.handleChallengeExpired=n.handleChallengeExpired.bind(yy(n)),n.ref=s.createRef(),n.apiScriptRequested=!1,n.sentryHub=null,n.captchaId="",n._pendingExecute=null,n.state={isApiReady:!1,isRemoved:!1,elementId:t.id},n}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,yv(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=yq(yY(this.props.scriptLocation));(this._hcaptcha=t.window.hcaptcha||void 0,void 0!==this._hcaptcha)?this.setState({isApiReady:!0},function(){e.renderCaptcha()}):this.loadCaptcha()},n.componentWillUnmount=function(){var e=this._hcaptcha,t=this.captchaId;this._cancelPendingExecute("react-component-unmounted"),this.isReady()&&(e.reset(t),e.remove(t))},n.shouldComponentUpdate=function(e,t){return this.state.isApiReady===t.isApiReady&&this.state.isRemoved===t.isRemoved},n.componentDidUpdate=function(e){var t=this;["sitekey","size","theme","tabindex","languageOverride","endpoint"].every(function(n){return e[n]===t.props[n]})||this.removeCaptcha(function(){t.renderCaptcha()})},n.loadCaptcha=function(){if(!this.apiScriptRequested){var e=this.props,t=e.apihost,n=e.assethost,r=e.endpoint,i=e.host,a=e.imghost,o=e.languageOverride,s=e.reCaptchaCompat,l=e.reportapi,c=e.sentry,d=e.custom,u=e.loadAsync,h=e.scriptLocation,f=e.scriptSource,p=e.secureApi,g=e.cleanup,m=e.userJourneys;(function(){return yN(this,arguments,function*(e={}){let t=function(e=!0){var t,n,r,i,a,o,s;let l,c,d,u,h;if(!e)return yF();yz.init({dsn:"https://d233059272824702afc8c43834c4912d@sentry.hcaptcha.com/6",release:"2.3.0",environment:"production"});let f=yz.scope;return f.setTag("source",yM),f.setTag("url",document.URL),f.setContext("os",{UA:navigator.userAgent}),f.setContext("browser",yT({},(-1!==(l=navigator.userAgent).indexOf("Firefox")?(c="Firefox",d=null==(n=l.match(/Firefox\/([\d.]+)/))?void 0:n[1]):-1!==l.indexOf("Edg")?(c="Microsoft Edge",d=null==(r=l.match(/Edg\/([\d.]+)/))?void 0:r[1]):-1!==l.indexOf("Chrome")&&-1!==l.indexOf("Safari")?(c="Chrome",d=null==(i=l.match(/Chrome\/([\d.]+)/))?void 0:i[1]):-1!==l.indexOf("Safari")&&-1===l.indexOf("Chrome")?(c="Safari",d=null==(a=l.match(/Version\/([\d.]+)/))?void 0:a[1]):-1!==l.indexOf("Opera")||-1!==l.indexOf("OPR")?(c="Opera",d=null==(o=l.match(/(Opera|OPR)\/([\d.]+)/))?void 0:o[2]):-1!==l.indexOf("MSIE")||-1!==l.indexOf("Trident")?(c="Internet Explorer",d=null==(s=l.match(/(MSIE |rv:)([\d.]+)/))?void 0:s[2]):(c="Unknown",d="Unknown"),{name:c,version:d}))),f.setContext("device",yE(yT({},{model:h=-1!==(u=navigator.userAgent).indexOf("Win")?"Windows":-1!==u.indexOf("Mac")?"Mac":-1!==u.indexOf("Linux")?"Linux":-1!==u.indexOf("Android")?"Android":-1!==u.indexOf("like Mac")||-1!==u.indexOf("iPhone")||-1!==u.indexOf("iPad")?"iOS":"Unknown",family:h,device:/Mobile|iPhone|iPod|Android/i.test(u)?"Mobile":/Tablet|iPad/i.test(u)?"Tablet":"Desktop"}),yC({screen_width_pixels:screen.width,screen_height_pixels:screen.height,language:navigator.language,orientation:(null==(t=screen.orientation)?void 0:t.type)||"Unknown",processor_count:navigator.hardwareConcurrency,platform:navigator.platform}))),yF(f)}(e.sentry);return yield function e(t,n,r=0){return yN(this,null,function*(){var i,a;let o=null!=(i=t.maxRetries)?i:2,s=null!=(a=t.retryDelay)?a:1e3,l=r<o?"Retry loading hCaptcha Api":"Exceeded maximum retries";try{return yield function(e={cleanup:!1},t){try{t.addBreadcrumb({category:yM,message:"hCaptcha loader params",data:e});let n=yR(e.scriptLocation),r=yP(n),i=yV.find(({scope:e})=>e===r.window);if(i)return t.addBreadcrumb({category:yM,message:"hCaptcha already loaded"}),i.promise;let a=new Promise((n,a)=>yN(this,null,function*(){try{var o;r.window[yO]=()=>{t.addBreadcrumb({category:yM,message:"hCaptcha script called onload function"}),n(r.window.hcaptcha)};let a=(o={custom:e.custom,render:e.render,sentry:e.sentry,assethost:e.assethost,imghost:e.imghost,reportapi:e.reportapi,endpoint:e.endpoint,host:e.host,recaptchacompat:e.recaptchacompat,hl:e.hl,uj:e.uj},Object.entries(o).filter(([,e])=>e||!1===e).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(String(t))}`).join("&"));yield function({scriptLocation:e,query:t,loadAsync:n=!0,crossOrigin:r="anonymous",apihost:i="https://js.hcaptcha.com",cleanup:a=!1,secureApi:o=!1,scriptSource:s=""}={},l){let c=yR(e),d=yP(c);return new Promise((e,u)=>{let h=d.document.createElement("script");h.id="hCaptcha-script",s?h.src=`${s}?onload=${yO}`:o?h.src=`${i}/1/secure-api.js?onload=${yO}`:h.src=`${i}/1/api.js?onload=${yO}`,h.crossOrigin=r,h.async=n;let f=(e,t)=>{try{!o&&a&&c.removeChild(h),t(e)}catch(e){u(e)}};h.onload=t=>f(t,e),h.onerror=e=>{l&&l(h.src),f(e,u)},h.src+=""!==t?`&${t}`:"",c.appendChild(h)})}(yT({query:a},e),e=>{t.captureRequest({url:e,method:"GET"})}),t.addBreadcrumb({category:yM,message:"hCaptcha loaded",data:i})}catch(n){t.addBreadcrumb({category:yM,message:"hCaptcha failed to load"});let e=yV.findIndex(e=>e.scope===r.window);-1!==e&&yV.splice(e,1),a(Error(yk))}}));return yV.push({promise:a,scope:r.window}),a}catch(e){return t.captureException(e),Promise.reject(Error(yk))}}(t,n)}catch(i){return n.addBreadcrumb({category:yM,message:l}),r>=o?(n.captureException(i),Promise.reject(i)):(n.addBreadcrumb({category:yM,message:`Waiting ${s}ms before retry attempt ${r+1}`}),yield new Promise(e=>setTimeout(e,s)),e(t,n,r+=1))}})}(e,t)})})({render:"explicit",apihost:t,assethost:n,endpoint:r,hl:o,host:i,imghost:a,recaptchacompat:!1===s?"off":null,reportapi:l,sentry:c,custom:d,loadAsync:u,scriptLocation:h,scriptSource:f,secureApi:p,cleanup:void 0===g||g,uj:void 0!==m&&m}).then(this.handleOnLoad,this.handleError).catch(this.handleError),this.apiScriptRequested=!0}},n.renderCaptcha=function(e){var t=this,n=this.props.onReady,r=this.state.isApiReady,i=this.captchaId;if(r&&!i){var a=Object.assign({"open-callback":this.handleOpen,"close-callback":this.handleClose,"error-callback":this.handleError,"chalexpired-callback":this.handleChallengeExpired,"expired-callback":this.handleExpire,callback:this.handleSubmit},this.props,{hl:this.props.hl||this.props.languageOverride,languageOverride:void 0}),o=this._hcaptcha.render(this.ref.current,a);this.captchaId=o,this.setState({isRemoved:!1},function(){e&&e(),n&&n(),t._onReady&&t._onReady(o)})}},n.resetCaptcha=function(){var e=this._hcaptcha,t=this.captchaId;this.isReady()&&(e.reset(t),this._cancelPendingExecute("hcaptcha-reset"))},n.removeCaptcha=function(e){var t=this,n=this._hcaptcha,r=this.captchaId;this._cancelPendingExecute("hcaptcha-removed"),this.isReady()&&this.setState({isRemoved:!0},function(){t.captchaId="",n.remove(r),e&&e()})},n.handleOnLoad=function(){var e=this;this.setState({isApiReady:!0},function(){var t=yq(yY(e.props.scriptLocation));e._hcaptcha=t.window.hcaptcha,e.renderCaptcha(function(){var t=e.props.onLoad;t&&t()})})},n.handleSubmit=function(e){var t=this.props.onVerify,n=this.state.isRemoved,r=this._hcaptcha,i=this.captchaId;if(void 0!==r&&!n){var a=r.getResponse(i),o=r.getRespKey(i);t&&t(a,o)}},n.handleExpire=function(){var e=this.props.onExpire,t=this._hcaptcha,n=this.captchaId;this.isReady()&&(t.reset(n),e&&e())},n.handleError=function(e){var t=this.props.onError,n=this._hcaptcha,r=this.captchaId;this.isReady()&&n.reset(r),t&&t(e)},n.isReady=function(){var e=this.state,t=e.isApiReady,n=e.isRemoved;return t&&!n},n._cancelPendingExecute=function(e){if(this._pendingExecute){var t=this._pendingExecute;this._pendingExecute=null;var n=Error(e);t.reject(n)}},n.handleOpen=function(){this.isReady()&&this.props.onOpen&&this.props.onOpen()},n.handleClose=function(){this.isReady()&&this.props.onClose&&this.props.onClose()},n.handleChallengeExpired=function(){this.isReady()&&this.props.onChalExpired&&this.props.onChalExpired()},n.execute=function(e){var t=this;void 0===e&&(e=null),e="object"==typeof e?e:null;try{var n=this._hcaptcha,r=this.captchaId;if(e&&e.async&&this._pendingExecute&&this._cancelPendingExecute("hcaptcha-execute-replaced"),!this.isReady())if(e&&e.async)return new Promise(function(r,i){t._pendingExecute={resolve:r,reject:i},t._onReady=function(a){if(t._pendingExecute)try{var o=n.execute(a,e);o&&"function"==typeof o.then?o.then(function(e){t._pendingExecute=null,r(e)}).catch(function(e){t._pendingExecute=null,i(e)}):(t._pendingExecute=null,i(Error("hcaptcha-execute-no-promise")))}catch(e){t._pendingExecute=null,i(e)}}});else return this._onReady=function(t){n.execute(t,e)},null;var i=n.execute(r,e);if(e&&e.async&&i&&"function"==typeof i.then)return new Promise(function(e,n){t._pendingExecute={resolve:e,reject:n},i.then(function(n){t._pendingExecute=null,e(n)}).catch(function(e){t._pendingExecute=null,n(e)})});return i}catch(t){if(e&&e.async)return Promise.reject(t);return null}},n.close=function(){var e=this._hcaptcha,t=this.captchaId;if(this._cancelPendingExecute("hcaptcha-closed"),this.isReady())return e.close(t)},n.setData=function(e){var t=this._hcaptcha,n=this.captchaId;this.isReady()&&(e&&"object"!=typeof e&&(e=null),t.setData(n,e))},n.getResponse=function(){return this._hcaptcha.getResponse(this.captchaId)},n.getRespKey=function(){return this._hcaptcha.getRespKey(this.captchaId)},n.render=function(){var e=this.state.elementId;return s.createElement("div",{ref:this.ref,id:e})},t}(s.Component);class yJ{constructor(e){if((0,ej.default)(this,"authBaseApiUrl",void 0),(0,ej.default)(this,"passwordlessParams",void 0),(0,ej.default)(this,"trackingIdentifier",void 0),(0,ej.default)(this,"version",`web3auth-${"10.11.0".split(".")[0]}`),!e.authConnection)throw nx.WalletInitializationError.invalidParams("authConnection is required");if(!e.web3authClientId)throw nx.WalletInitializationError.invalidParams("web3authClientId is required");if(!e.loginHint)throw nx.WalletInitializationError.invalidParams("loginHint is required");if(!e.network)throw nx.WalletInitializationError.invalidParams("network is required");e.authBuildEnv||(e.authBuildEnv=mh),this.authBaseApiUrl=`${mw[e.authBuildEnv]}/api/v3/auth`,this.passwordlessParams=e}get name(){if(this.passwordlessParams.authConnection===eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS)return"Email";if(this.passwordlessParams.authConnection===eK.AUTH_CONNECTION.SMS_PASSWORDLESS)return"Mobile";throw nx.WalletInitializationError.invalidParams("Invalid authConnection")}get connection(){if(this.passwordlessParams.authConnection===eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS)return"email";if(this.passwordlessParams.authConnection===eK.AUTH_CONNECTION.SMS_PASSWORDLESS)return"sms";throw nx.WalletInitializationError.invalidParams("Invalid authConnection")}get trackingId(){return this.trackingIdentifier}get sessionStorageAvailable(){return e0("sessionStorage")}get whiteLabelParams(){var e;let{uiConfig:t}=this.passwordlessParams;if(!t)return{};let{appName:n,appUrl:r,defaultLanguage:i,mode:a,logoLight:o,logoDark:s,theme:l}=t,c=null!=(e="dark"===a?s:o)?e:"";return{mode:null!=a?a:"light",name:null!=n?n:"",url:null!=r?r:"",language:null!=i?i:"en",logo:c.includes(".svg")?"":c,theme:null!=l?l:{}}}set trackingId(e){this.trackingIdentifier=e}async start(e){try{let n=await mV(`${this.authBaseApiUrl}/passwordless/start`,e);if(n&&n.success){var t;this.trackingId=null==(t=n.data)?void 0:t.trackingId,this.sessionStorageAvailable&&window.sessionStorage.setItem("trackingId",this.trackingId)}return n}catch(e){return this.handleError(e)}}async verify(e){try{let t=await mV(`${this.authBaseApiUrl}/passwordless/verify`,e);if(t.success)return this.sessionStorageAvailable&&window.sessionStorage.removeItem("trackingId"),{success:!0,data:{id_token:t.id_token}};return{success:!1,error:t.message}}catch(e){return this.handleError(e)}}async handleError(e){let t;if(429===e.status)t="passwordless.error-too-many-requests";else try{let n=await e.json();t=n.error_code?(e=>{if(!e)return"passwordless.something-wrong-error";switch(e){case"E001":return"passwordless.error-invalid-params";case"E002":return"passwordless.error-invalid-origin";case"E201":return"passwordless.error-sending-sms-failed";case"E300":return"passwordless.error-no-mail-generated";case"E301":return"passwordless.error-invalid-link";case"E302":return"passwordless.error-new-link-generated-heading";case"E304":case"E403":return"passwordless.error-max-retry-limit-reached";case"E305":case"E401":return"passwordless.error-invalid-otp";case"E306":return"passwordless.error-otp-expired";case"E400":return"passwordless.error-no-sms-generated";case"E411":return"passwordless.error-plan-limit-reached";case"E412":return"passwordless.error-recaptcha-verification-failed";case"E502":return"passwordless.error-invalid-test-account";default:return"passwordless.something-wrong-error"}})(n.error_code):n.message}catch{t="passwordless.something-wrong-error"}return{success:!1,error:t}}}class yZ extends yJ{constructor(e){var t;super(e),(0,ej.default)(this,"mailSent",void 0),this.mailSent=!1,this.sessionStorageAvailable&&(this.trackingId=null!=(t=window.sessionStorage.getItem("trackingId"))?t:void 0)}async sendVerificationCode({captchaToken:e}){let{loginHint:t,network:n,web3authClientId:r}=this.passwordlessParams,i={client_id:r,web3auth_client_id:r,connection:this.connection,login_hint:t,tracking_id:this.trackingId,whitelabel:this.whiteLabelParams,version:this.version,network:n,flow_type:ny,captcha_token:e};return super.start(i)}async verifyCode(e){let{loginHint:t,network:n,web3authClientId:r}=this.passwordlessParams,i={client_id:r,login_hint:t,code:e,connection:"email",tracking_id:this.trackingId,version:this.version,network:n,flow_type:ny};return super.verify(i)}}class yQ extends yJ{constructor(e){if(super(e),this.sessionStorageAvailable){var t;this.trackingId=null!=(t=window.sessionStorage.getItem("trackingId"))?t:void 0}}async sendVerificationCode({captchaToken:e}){let{loginHint:t,network:n,web3authClientId:r}=this.passwordlessParams,i=(0,eD.default)({client_id:r,web3auth_client_id:r,connection:this.connection,login_hint:t,tracking_id:this.trackingId,whitelabel:this.whiteLabelParams,version:this.version,network:n},e&&{captcha_token:e});return super.start(i)}async verifyCode(e){let{loginHint:t,network:n,web3authClientId:r}=this.passwordlessParams,i={client_id:r,login_hint:t,code:e,connection:this.connection,tracking_id:this.trackingId,version:this.version,network:n};return super.verify(i)}}let yX=({children:e,content:t,isDark:n=!1,hideHint:r=!1})=>{let[i,o]=(0,s.useState)(!1),l=()=>{o(!0)},c=()=>{o(!1)},d=(0,s.useMemo)(()=>{let e=n?"#ffffff":"#1f2a37";return{borderTop:"8px solid transparent",borderRight:"none",borderBottom:"8px solid transparent",borderLeft:`8px solid ${e}`,left:"0%",top:"calc(100% - 8px)"}},[n]);return(0,a.jsxs)("div",{className:"w3a--relative","aria-hidden":!0,onMouseEnter:l,onMouseLeave:c,onFocus:l,onBlur:c,onClick:c,children:[e,i&&!r&&(0,a.jsxs)("div",{"data-popover":!0,role:"tooltip",className:mJ("w3a--absolute w3a--z-[45] w3a--shadow-2xl w3a--rounded-lg w3a--bottom-[100%] w3a--left-[50%] w3a--w-max w3a--text-xs w3a--px-[6px] w3a--py-[3px]",n?"w3a--bg-app-white w3a--text-app-gray-900":"w3a--bg-app-gray-800 w3a--text-app-gray-100"),children:[t,(0,a.jsx)("div",{className:"w3a--absolute",style:d})]})]})};function y0(e,t,n){let r=e===eK.AUTH_CONNECTION.TWITTER?`login-X${t?"-light":"-dark"}`:`login-${e}${t?"-light":"-dark"}`,i=e===eK.AUTH_CONNECTION.APPLE||e===eK.AUTH_CONNECTION.GITHUB||e===eK.AUTH_CONNECTION.TWITTER?r:`login-${e}-active`;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{id:"active-login-img",src:`https://images.web3auth.io/${i}${n}`,alt:"active-login-img",className:"w3a--hidden w3a--size-5 w3a--object-contain group-hover:w3a--block"}),(0,a.jsx)("img",{id:"login-img",src:`https://images.web3auth.io/${r}${n}`,alt:"login-img",className:"w3a--block w3a--size-5 w3a--object-contain group-hover:w3a--hidden"})]})}function y1(e){let{visibleRow:t,otherRow:n,isDark:r,canShowMore:i,handleSocialLoginClick:o,handleExpandSocialLogins:s,buttonRadius:l}=e;return 0!==t.length&&(null==n?void 0:n.length)===0?(0,a.jsx)("div",{className:"w3a--flex w3a--w-full w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-2",children:(0,a.jsxs)("div",{className:mJ("w3a--grid w3a--w-full w3a--gap-x-2",1===t.length?"w3a--grid-cols-1":2===t.length?"w3a--grid-cols-2":3===t.length?"w3a--grid-cols-3":"w3a--grid-cols-4"),children:[t.filter((e,n)=>4===t.length?n<=3:n<3).map(e=>(0,a.jsx)(yX,{content:"Last Login",isDark:r,hideHint:!0,children:(0,a.jsx)(w7,{type:w2,props:{showText:!1,method:e.method,isDark:r,isPrimaryBtn:!1,btnStyle:"w3a--flex w3a--items-center !w3a--justify-center w3a--w-full w3a--h-11 w3a--group",children:(0,a.jsx)(a.Fragment,{children:y0(e.method,r,".svg")}),onClick:()=>o({connector:e.connector,loginParams:e.loginParams}),buttonRadius:l}},e.method)},e.method)),i&&t.length>4&&(0,a.jsx)(w7,{type:w2,props:{showIcon:!1,onClick:s,btnStyle:"w3a--flex w3a--items-center !w3a--justify-center w3a--w-full w3a--h-11",children:(0,a.jsx)("img",{src:mZ(r?"dots-dark-horizontal":"dots-light-horizontal"),alt:"Logo",className:"w3a--object-contain"}),buttonRadius:l}})]})}):(0,a.jsxs)("div",{className:"w3a--flex w3a--w-full w3a--flex-col w3a--items-start w3a--justify-start w3a--gap-y-4",children:[(0,a.jsx)("button",{type:"button",className:"w3a--appearance-none",onClick:()=>s(),children:(0,a.jsx)("img",{src:mZ(r?"arrow-left-dark":"arrow-left-light"),alt:"Logo",className:"w3a--object-contain"})}),(0,a.jsx)("div",{className:"w3a--social-container w3a--grid w3a--h-[300px] w3a--w-full w3a--auto-rows-min w3a--grid-cols-1 w3a--gap-y-2 w3a--overflow-y-auto w3a--pl-2 w3a--pr-3",children:n.map(e=>(0,a.jsx)("div",{className:"w3a--h-11 w3a--w-full",children:(0,a.jsx)(w7,{type:w2,props:{method:e.method,isDark:r,isPrimaryBtn:!1,onClick:()=>o({connector:e.connector,loginParams:e.loginParams}),btnStyle:"w3a--group w3a--relative w3a--overflow-hidden w3a--flex w3a--items-center !w3a--justify-start w3a--w-full w3a--h-11",buttonRadius:l,children:(0,a.jsxs)(a.Fragment,{children:[y0(e.method,r,".svg"),(0,a.jsx)("p",{className:"w3a--text-sm w3a--font-normal w3a--text-app-gray-900 dark:w3a--text-app-white",children:e.name}),(0,a.jsx)("img",{id:"login-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-10 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:mZ(r?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})}})},e.method))})]})}let y3=(0,s.forwardRef)(({length:e,loading:t,resendTimer:n=60,onComplete:r,onChange:i,error:o=!1,success:l=!1,disabled:c=!1,classes:d,helperText:u="",onResendTimer:h,showCta:f=!0,showTimer:p=!0,autoFocus:g=!1,placeholder:m="",autoComplete:w="one-time-code",type:y="text",resendBtnText:v=""},b)=>{let[E,C]=(0,s.useState)(Array(e).fill("")),[x,S]=(0,s.useState)(null!=n?n:0),[_]=wo(void 0,{i18n:wQ}),A=(0,s.useRef)([]),T=e=>/^\d$/.test(e)&&1===e.trim().length,I=t=>{t.preventDefault();let n=t.clipboardData.getData("text").slice(0,e);if(n&&/^\d+$/.test(n)){var i;let t=n.split(""),a=[...E];t.forEach((e,t)=>{a[t]=e}),C(a),null==(i=A.current[t.length===e?e-1:t.length])||i.focus(),r&&e===a.length&&r(a.join(""))}};(0,s.useEffect)(()=>{let e=null;return f&&p&&(e=window.setInterval(()=>{x>0?S(e=>e-1):clearInterval(e)},1e3)),()=>{clearInterval(e)}},[x]),(0,s.useEffect)(()=>{if(A&&g){var e;null==(e=A.current)||e[0].focus()}},[g]);let N=mJ("w3a--text-xs w3a--font-normal w3a--text-app-gray-500 dark:w3a--text-app-white w3a--mt-2",{"w3a--text-app-red-500 dark:w3a--text-app-red-400":o,"w3a--text-app-green-500 dark:w3a--text-app-green-400":l},null==d?void 0:d.helperText),O=new Date().getFullYear();return(0,a.jsxs)("div",{className:mJ("w3a--flex w3a--flex-col w3a--items-center",null==d?void 0:d.root),ref:b,children:[(0,a.jsx)("form",{className:mJ("w3a--flex w3a--space-x-2",null==d?void 0:d.inputContainer),children:E.map((t,n)=>{var s,u,h;return(0,a.jsx)("input",{id:`${O+n}`,type:y,value:t,autoComplete:w,placeholder:Array.isArray(m)?m[n]:m,inputMode:"numeric",onInput:t=>((t,n)=>{var a,o;t.preventDefault();let{value:s}=t.target;if(s&&s.length>1&&s.length===e){let t=s.split(""),n=[...E];t.forEach((e,t)=>{n[t]=e}),C(n),null==(a=A.current[t.length===e?e-1:t.length])||a.focus(),r&&e===n.length&&r(n.join(""))}else if(T(s)){let t=[...E].slice(0,e);t[n]=s,C(t);let a=t.join("");n<e-1&&A.current[n+1]&&(null==(o=A.current[n+1])||o.focus()),i&&i(s),r&&e===a.length&&r(a)}})(t,n),onKeyUp:e=>((e,t)=>{var n,r,a;if("Backspace"===e.key||"Delete"===e.key){e.preventDefault();let r=[...E];""!==E[t]?r[t]="":t>0&&(null==(n=A.current[t-1])||n.focus(),r[t-1]=""),C(r),i&&i(r.join(""))}else"ArrowLeft"===e.key?(e.preventDefault(),null==(r=A.current[t-1])||r.focus()):"ArrowRight"===e.key?(e.preventDefault(),null==(a=A.current[t+1])||a.focus()):(" "===e.key||"Spacebar"===e.key||"Space"===e.key||!T(e.key)&&A.current[t+1])&&(e.preventDefault(),A.current[t+1].value="")})(e,n),onPaste:I,className:mJ("w3a--w-12 w3a--h-[42px] w3a--rounded-full w3a--border w3a--text-center w3a--text-xl w3a--focus:outline-none w3a--active:outline-none w3a--focus:border-app-primary-600 dark:w3a--focus:border-app-primary-500 w3a--border-app-gray-300 dark:w3a--border-app-gray-500 w3a--bg-app-gray-50 dark:w3a--bg-app-gray-700 w3a--text-app-gray-900 dark:w3a--text-app-white",l&&(null!=(s=null==d?void 0:d.success)?s:"w3a--border-app-green-400 dark:w3a--border-app-green-500 w3a--focus:w3a--border-app-green-400 dark:w3a--focus:w3a--border-app-green-500"),o&&(null!=(u=null==d?void 0:d.error)?u:"w3a--border-app-red-600 dark:w3a--border-app-red-500 w3a--focus:w3a--border-app-red-600 dark:w3a--focus:w3a--border-app-red-500"),c&&(null!=(h=null==d?void 0:d.disabled)?h:"w3a--border-app-gray-200 w3a--bg-app-gray-200 dark:w3a--border-app-gray-700 w3a--focus:w3a--border-app-gray-200 dark:w3a--focus:w3a--border-app-gray-700 w3a--cursor-not-allowed"),null==d?void 0:d.input),ref:e=>{A.current[n]=e},disabled:c},`${O+n}`)})}),u&&(0,a.jsx)("p",{className:N,children:u}),t&&(0,a.jsx)("div",{className:"w3a--mt-3",children:(0,a.jsx)(yh,{})}),f&&!t&&(0,a.jsx)("div",{className:mJ("w3a--flex w3a--items-center w3a--mt-3",null==d?void 0:d.ctaContainer),children:x>0&&p?(0,a.jsx)("span",{className:mJ("w3a--text-xs w3a--text-app-gray-500 dark:w3a--text-app-gray-400",null==d?void 0:d.timerText),children:_("modal.resendTimer",{timer:x})}):(0,a.jsx)("button",{type:"button",className:mJ("w3a--text-xs w3a--p-0 w3a--text-app-primary-600 dark:w3a--text-app-primary-500",null==d?void 0:d.resendBtnText),onClick:()=>{S(n||0),h&&h()},disabled:x>0&&p,children:v||_("modal.resendCode")})})]})});function y2(e){let{setShowOtpFlow:t,handleOtpComplete:n,authConnection:r,loginHint:i="",errorMessage:o,otpLoading:l,countryFlag:c}=e,d=(0,s.useMemo)(()=>r===eK.AUTH_CONNECTION.SMS_PASSWORDLESS,[r]),[u]=wo(void 0,{i18n:wQ}),h=(0,s.useMemo)(()=>{if(r===eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS)return i;let[e,t]=i.includes("-")?i.split("-"):["",i],n=`${t}`.slice(-Math.floor(t.length/2)).padStart(`${t}`.length,"*");return`${c} ${e} ${n}`},[i,r,c]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w3a--mr-auto w3a--flex w3a--w-full w3a--items-start w3a--justify-start",children:(0,a.jsx)("button",{type:"button",className:"w3a--z-20 w3a--flex w3a--size-5 w3a--cursor-pointer w3a--items-center w3a--justify-center w3a--rounded-full",onClick:()=>t(!1),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",className:"w3a--text-app-gray-900 dark:w3a--text-app-white",children:(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.707 16.707a1 1 0 0 1-1.414 0l-6-6a1 1 0 0 1 0-1.414l6-6a1 1 0 0 1 1.414 1.414L5.414 9H17a1 1 0 1 1 0 2H5.414l4.293 4.293a1 1 0 0 1 0 1.414",clipRule:"evenodd"})})})}),(0,a.jsxs)("div",{className:"-w3a--mt-10 w3a--flex w3a--size-full w3a--flex-1 w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4",children:[(0,a.jsx)("img",{src:mZ(d?"sms-otp-light":"email-otp-light"),alt:"otp",className:"w3a--size-auto"}),(0,a.jsxs)("div",{className:"w3a--mx-auto -w3a--mt-6 w3a--flex w3a--w-full w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-2",children:[(0,a.jsx)("p",{className:"w3a--text-lg w3a--font-bold w3a--text-app-gray-900 dark:w3a--text-app-white",children:u(d?"modal.otp.mobile-title":"modal.otp.email-title")}),(0,a.jsxs)("div",{className:"w3a--mx-auto w3a--flex w3a--w-full w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-1",children:[(0,a.jsx)("p",{className:"w3a--text-center w3a--text-sm w3a--font-normal w3a--text-app-gray-500 dark:w3a--text-app-gray-300",children:u(d?"modal.otp.mobile-subtext":"modal.otp.email-subtext")}),(0,a.jsx)("p",{className:"w3a--text-center w3a--text-sm w3a--font-normal w3a--text-app-gray-500 dark:w3a--text-app-gray-300",children:d?h:u("modal.otp.email-subtext-example",{email:h})})]})]}),(0,a.jsx)(y3,{length:6,onComplete:n,error:!!o,helperText:o,loading:l,disabled:l})]})]})}function y5(e){let{otpLoading:t,setShowOtpFlow:n,handleOtpComplete:r,authConnection:i,loginHint:o,errorMessage:s,countryFlag:l}=e;return(0,a.jsx)("div",{className:"w3a--flex w3a--size-full w3a--flex-1 w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4",children:(0,a.jsx)(y2,{errorMessage:s,setShowOtpFlow:n,handleOtpComplete:r,authConnection:i,loginHint:o,otpLoading:t,countryFlag:l})})}function y4(e){let{isModalVisible:t,isPasswordLessCtaClicked:n,setIsPasswordLessCtaClicked:r,title:i,placeholder:o,handleFormSubmit:l,errorMessage:c,isDark:d,isPasswordLessLoading:u,buttonRadius:h}=e,[f]=wo(void 0,{i18n:wQ}),p=(0,s.useRef)(null),[g,m]=(0,s.useState)(""),[w,y]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{t||r(!1)},[t,r]),(0,s.useEffect)(()=>{if(n){var e;null==(e=p.current)||e.focus()}},[n]),n)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:mJ("w3a--input",w&&"!w3a--border-app-primary-600",{"w3a--rounded-full":"pill"===h,"w3a--rounded-lg":"rounded"===h,"w3a--rounded-none":"square"===h}),children:[(0,a.jsx)("input",{ref:p,onInput:e=>{m(e.target.value),y(!0)},value:g,placeholder:o,onFocus:()=>{y(!0)},onBlur:e=>{e.target.placeholder=`${o}`,y(!1)},type:"text",className:mJ("w3a--w-full w3a--appearance-none w3a--bg-transparent w3a--text-app-gray-900 w3a--outline-none placeholder:w3a--text-xs placeholder:w3a--text-app-gray-400 focus:w3a--outline-none active:w3a--outline-none dark:w3a--text-app-white dark:placeholder:w3a--text-app-gray-500"),onKeyDown:e=>(e=>{let{key:t}=e;"Enter"===t&&(l(g),y(!1))})(e),disabled:u}),u&&(0,a.jsx)(yh,{}),g&&!u&&(0,a.jsx)("button",{type:"button",className:"w3a--appearance-none",onClick:e=>{e.preventDefault(),e.stopPropagation(),l(g),y(!1)},children:(0,a.jsx)("img",{src:mZ(d?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})})]}),c&&!w&&n&&(0,a.jsx)("p",{className:"w3a--w-full w3a--pl-6 w3a--text-start w3a--text-xs w3a--font-normal w3a--text-app-red-500 dark:w3a--text-app-red-400",children:c})]}):(0,a.jsxs)("button",{type:"button",className:mJ("w3a--btn !w3a--justify-between w3a--relative w3a--group w3a--overflow-hidden",{"w3a--rounded-full":"pill"===h,"w3a--rounded-lg":"rounded"===h,"w3a--rounded-none":"square"===h}),onClick:()=>{r(!0)},children:[(0,a.jsx)("p",{className:"w3a--text-app-gray-900 dark:w3a--text-app-white",children:f("modal.passwordless.title",{title:i})}),(0,a.jsx)("img",{id:"passwordless-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-6 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:mZ(d?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})}y3.displayName="OtpInput";let y8=[eK.AUTH_CONNECTION.SMS_PASSWORDLESS,eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS,eK.AUTH_CONNECTION.AUTHENTICATOR,eK.AUTH_CONNECTION.PASSKEYS,eK.AUTH_CONNECTION.TELEGRAM,eK.AUTH_CONNECTION.CUSTOM];function y6(e){let{web3authClientId:t,web3authNetwork:n,authBuildEnv:r,appLogo:i,isModalVisible:o,handleSocialLoginHeight:l,socialLoginsConfig:c,installedExternalWalletConfig:d,isDark:u,handleSocialLoginClick:h,totalExternalWallets:f,remainingUndisplayedWallets:p,isEmailPasswordLessLoginVisible:g,isSmsPasswordLessLoginVisible:m,handleExternalWalletBtnClick:w,handleExternalWalletClick:y,areSocialLoginsVisible:v,showPasswordLessInput:b,showExternalWalletButton:E,showExternalWalletCount:C,showInstalledExternalWallets:x,logoAlignment:S="center",buttonRadius:_="pill",deviceDetails:A}=e,[T]=wo(void 0,{i18n:wQ}),{bodyState:I,setBodyState:N}=(0,s.useContext)(ws),{analytics:O}=(0,s.useContext)(w0),[k,M]=(0,s.useState)(""),[P,R]=(0,s.useState)(""),[L,D]=(0,s.useState)(""),[j,U]=(0,s.useState)(""),[B,$]=(0,s.useState)(!1),[W,K]=(0,s.useState)(!1),[H,z]=(0,s.useState)([]),[F,V]=(0,s.useState)([]),[q,Y]=(0,s.useState)(!1),[G,J]=(0,s.useState)(!1),[Z,Q]=(0,s.useState)(void 0),[X,ee]=(0,s.useState)(void 0),[et,en]=(0,s.useState)(!1),[er,ei]=(0,s.useState)(!1),[ea,eo]=(0,s.useState)(!1),[es,el]=(0,s.useState)(""),ec=(0,s.useRef)(null),ed=()=>{$(e=>!e),Y(!1),l()};(0,s.useEffect)(()=>{let e=Object.keys(c.loginMethods).filter(e=>c.loginMethods[e].showOnModal&&!y8.includes(e)),t=[],n=[],r=(c.loginMethodsOrder||[]).reduce((e,t,n)=>(e[t]=n,e),{}),i=Object.keys(c.loginMethods).filter(e=>!1==!c.loginMethods[e].showOnModal&&!y8.includes(e)).sort((e,t)=>{var n,i;let a=(c.loginMethodsOrder||[]).length,o=null!=(n=r[e])?n:a,s=null!=(i=r[t])?i:a,{mainOption:l}=c.loginMethods[e]||{},{mainOption:d}=c.loginMethods[t]||{};return l&&d?o-s:l?-1:d?1:o-s});i.forEach((e,r)=>{var a;let o=c.loginMethods[e],s=mf(o.name||e),l=r+1,d=(null==c||null==(a=c.uiConfig)?void 0:a.primaryButton)==="socialLogin"&&1===l,h=i.length;(h>=4?l>0&&l<=h:l>0&&l<4)&&t.push({method:e,isDark:u,isPrimaryBtn:d,name:s,connector:c.connector,loginParams:{authConnection:o.authConnection||e,authConnectionId:o.authConnectionId,groupedAuthConnectionId:o.groupedAuthConnectionId,extraLoginOptions:o.extraLoginOptions,name:s,login_hint:""},order:l}),n.push({method:e,isDark:u,isPrimaryBtn:d,name:"Twitter"===s?"X":s,connector:c.connector,loginParams:{authConnection:e,authConnectionId:o.authConnectionId,groupedAuthConnectionId:o.groupedAuthConnectionId,extraLoginOptions:o.extraLoginOptions,name:s,login_hint:""},order:l})}),z(t),V(n),K(e.length>4)},[c,u,_]);let eu=async(e,i)=>{try{let o,s=((e,t)=>{switch(e){case eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS:return new yZ(t);case eK.AUTH_CONNECTION.SMS_PASSWORDLESS:return new yQ(t);default:throw nx.WalletInitializationError.invalidParams(`Unsupported auth connection: ${e}`)}})(e,{loginHint:i,web3authClientId:t,network:n,uiConfig:c.uiConfig,authConnection:e,authBuildEnv:r});if(!((e,t)=>{if(e===eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS)return t.startsWith("test_account_")&&t.endsWith("@example.com");if(e===eK.AUTH_CONNECTION.SMS_PASSWORDLESS)return t.startsWith("+1-555");throw nx.WalletInitializationError.invalidParams(`Unsupported auth connection: ${e}`)})(e,i)){var a;let e=await (null==(a=ec.current)?void 0:a.execute({async:!0}));if(!e)throw nx.WalletLoginError.connectionError("Captcha token is required");o=e.response}let l=await s.sendVerificationCode({captchaToken:o});if(null!=l&&l.error)return void D(T(l.error));Q(e),J(!0),ee(s)}catch(e){nS.log.error(e)}finally{en(!1)}},eh=async e=>{if(en(!0),g&&e.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)){let t=c.loginMethods[eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS];return t.isDefault?h({connector:c.connector,loginParams:{authConnection:eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS,authConnectionId:t.authConnectionId,groupedAuthConnectionId:t.groupedAuthConnectionId,extraLoginOptions:t.extraLoginOptions,loginHint:e,name:"Email"}}):eu(eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS,e)}if(m){let t=e.startsWith("+")?e:`${k}${e}`,n=await m0(t);if(n.success){let e="string"==typeof n.parsed_number?n.parsed_number:t,r=c.loginMethods[eK.AUTH_CONNECTION.SMS_PASSWORDLESS];return r.isDefault?h({connector:c.connector,loginParams:{authConnection:eK.AUTH_CONNECTION.SMS_PASSWORDLESS,authConnectionId:r.authConnectionId,groupedAuthConnectionId:r.groupedAuthConnectionId,extraLoginOptions:r.extraLoginOptions,loginHint:e,name:"Mobile"}}):(R(n.country_flag),eu(eK.AUTH_CONNECTION.SMS_PASSWORDLESS,e))}}D(eg),en(!1)},ef=(0,s.useMemo)(()=>g&&m?T("modal.social.passwordless-title"):g?T("modal.social.email"):T("modal.social.phone"),[g,m,T]),ep=(0,s.useMemo)(()=>g&&m?"+(00)123456/name@example.com":g?"name@example.com":"+(00)123456",[g,m]),eg=(0,s.useMemo)(()=>g&&m?T("modal.errors-invalid-number-email"):g?T("modal.errors-invalid-email"):T("modal.errors-invalid-number"),[g,m,T]);(0,s.useEffect)(()=>{let e=async()=>{let e=await mX();e&&e.dialCode&&M(e.dialCode)};m&&e()},[m]);let em=async e=>{ei(!0),j&&U("");try{var t,n;let r=c.loginMethods[Z],i=await (null==X?void 0:X.verifyCode(e));if(null!=i&&i.error)return void U(T(i.error));if(null!=i&&null!=(t=i.data)&&t.id_token)return h({connector:c.connector,loginParams:{authConnection:Z,authConnectionId:r.authConnectionId,groupedAuthConnectionId:r.groupedAuthConnectionId,extraLoginOptions:(0,eD.default)((0,eD.default)({},r.extraLoginOptions),{},{id_token:null==(n=i.data)?void 0:n.id_token}),loginHint:X.passwordlessParams.loginHint,name:X.name}})}catch(e){nS.log.error(e)}finally{ei(!1)}},ew=(0,s.useMemo)(()=>x?d:d.filter(e=>e.name===eR.WALLET_CONNECTORS.METAMASK),[d,x]),ey=(0,s.useCallback)(e=>{null==O||O.track(te.ANALYTICS_EVENTS.EXTERNAL_WALLET_LIST_EXPANDED,{total_external_wallets:f,installed_external_wallets:ew.length}),Y(!1),null==e||e.preventDefault(),w&&w(!0)},[O,w,ew.length,f]);if((0,s.useEffect)(()=>{!E||v||b||ey()},[E,v,b,ey]),G)return(0,a.jsx)(y5,{otpLoading:er,loginHint:null==X?void 0:X.passwordlessParams.loginHint,setShowOtpFlow:J,authConnection:Z,handleOtpComplete:em,errorMessage:j,countryFlag:P});let ev=(e=[])=>(0,a.jsx)(y1,{otherRow:e,isDark:u,visibleRow:H,canShowMore:W,handleSocialLoginClick:h,socialLoginsConfig:c,handleExpandSocialLogins:ed,buttonRadius:_},"social-login-section"),eb=()=>(0,a.jsx)(y4,{isModalVisible:o,isPasswordLessCtaClicked:q,setIsPasswordLessCtaClicked:Y,title:ef,placeholder:ep,handleFormSubmit:eh,errorMessage:L,isDark:u,buttonRadius:_,isPasswordLessLoading:et},"passwordless-section"),eE=()=>(0,a.jsxs)("div",{className:mJ("w3a--flex w3a--w-full w3a--flex-col w3a--items-start w3a--justify-start w3a--gap-y-2"),children:[ew.length>0&&ew.map(e=>(0,a.jsxs)("button",{type:"button",className:mJ("w3a--btn !w3a--justify-between w3a--group w3a--relative w3a--overflow-hidden",{"w3a--rounded-full":"pill"===_,"w3a--rounded-lg":"rounded"===_,"w3a--rounded-none":"square"===_}),onClick:()=>(e=>{var t;if(null==O||O.track(te.ANALYTICS_EVENTS.EXTERNAL_WALLET_SELECTED,{connector:e.name,wallet_name:e.displayName,is_installed:e.isInstalled,is_injected:e.hasInjectedWallet,chain_namespaces:e.chainNamespaces,has_wallet_connect:e.hasWalletConnect,has_install_links:e.hasInstallLinks,has_wallet_registry_item:!!e.walletRegistryItem,total_external_wallets:f}),nS.log.info("handleInstalledWalletClick",e),e.name===eR.WALLET_CONNECTORS.METAMASK&&!e.hasInjectedWallet&&"desktop"===A.platform){y({connector:e.name}),N((0,eD.default)((0,eD.default)({},I),{},{metamaskQrCode:{show:!0,wallet:e}}));return}(null==(t=e.chainNamespaces)?void 0:t.length)>1?N((0,eD.default)((0,eD.default)({},I),{},{multiChainSelector:{show:!0,wallet:e}})):y({connector:e.name})})(e),children:[(0,a.jsx)("p",{className:"w3a--max-w-[180px] w3a--truncate w3a--text-base w3a--font-normal w3a--text-app-gray-700 dark:w3a--text-app-white",children:e.displayName}),(0,a.jsxs)("div",{className:"w3a--absolute w3a--right-4 w3a--top-1/2 w3a--flex w3a--w-auto -w3a--translate-y-1/2 w3a--items-center w3a--gap-x-2 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-6 group-hover:w3a--opacity-0",children:[e.hasInjectedWallet&&(0,a.jsx)("span",{className:"w3a--inline-flex w3a--items-center w3a--rounded-md w3a--bg-app-primary-100 w3a--px-2 w3a--py-1 w3a--text-xs w3a--font-medium w3a--text-app-primary-800  dark:w3a--border dark:w3a--border-app-primary-400 dark:w3a--bg-transparent dark:w3a--text-app-primary-400",children:T("modal.external.installed")}),(0,a.jsx)("figure",{className:"w3a--size-5",children:(0,a.jsx)(w4,{imageData:e.icon,imageId:`login-${e.name}`,hoverImageId:`login-${e.name}`,fallbackImageId:"wallet",height:"24",width:"24",isButton:!0,extension:e.imgExtension||"webp"})})]}),(0,a.jsx)("img",{id:"injected-wallet-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-10 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:mZ(u?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]},e.name)),p>0&&(0,a.jsxs)("button",{type:"button",className:mJ("w3a--btn !w3a--justify-between w3a--group w3a--relative w3a--overflow-hidden",{"w3a--rounded-full":"pill"===_,"w3a--rounded-lg":"rounded"===_,"w3a--rounded-none":"square"===_}),onClick:ey,children:[(0,a.jsx)("p",{className:"w3a--text-base w3a--font-normal w3a--text-app-gray-900 dark:w3a--text-app-white",children:T("modal.external.all-wallets")}),C&&(0,a.jsx)("div",{id:"external-wallet-count",className:"w3a--absolute w3a--right-4 w3a--top-1/2 w3a--w-auto -w3a--translate-y-1/2 w3a--rounded-full w3a--bg-app-primary-100 w3a--px-2.5 w3a--py-0.5 w3a--text-xs w3a--font-medium w3a--text-app-primary-800 w3a--transition-all w3a--delay-300 w3a--duration-300 group-hover:w3a--translate-x-6 group-hover:w3a--opacity-0 group-hover:w3a--delay-0 dark:w3a--border dark:w3a--border-app-primary-500 dark:w3a--bg-transparent dark:w3a--text-app-primary-500",children:p}),(0,a.jsx)("img",{id:"external-wallet-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-10 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:mZ(u?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})]},"external-wallets-section"),eC=[mj,mD].includes(i)?"":i,ex=e=>(0,a.jsxs)("div",{className:mJ("w3a--flex w3a--w-full w3a--items-center w3a--gap-x-2",eC?"w3a--my-2":"w3a--my-4"),children:[(0,a.jsx)("div",{className:"w3a--h-px w3a--w-full w3a--bg-app-gray-200 dark:w3a--bg-app-gray-500"}),(0,a.jsx)("p",{className:"w3a--text-xs w3a--font-normal w3a--uppercase w3a--text-app-gray-400 dark:w3a--text-app-gray-400",children:"or"}),(0,a.jsx)("div",{className:"w3a--h-px w3a--w-full w3a--bg-app-gray-200 dark:w3a--bg-app-gray-500"})]},`section-delimiter-${e}`);return(0,a.jsxs)("div",{className:"w3a--flex w3a--flex-col w3a--items-center w3a--gap-y-4 w3a--p-2",children:[(0,a.jsxs)("div",{className:mJ("w3a--flex w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-2 w3a--pt-6","center"===S?"":"w3a--w-full"),children:[eC&&(0,a.jsx)("figure",{className:mJ("w3a--mx-auto w3a--h-12 w3a--w-[200px]","center"===S?"w3a--flex w3a--justify-center w3a--items-center":"w3a--ml-0 w3a--w-auto"),children:(0,a.jsx)("img",{src:eC,alt:"Logo",className:"w3a--size-full w3a--object-contain"})}),(0,a.jsx)("p",{className:mJ("w3a--text-app-gray-900 dark:w3a--text-app-white","center"===S?"w3a--text-center":"w3a--text-left w3a--w-full w3a--ml-4",eC?"w3a--text-lg w3a--font-semibold":"w3a--text-3xl w3a--font-medium"),children:T("modal.social.sign-in")})]}),(0,a.jsx)(yG,{ref:ec,sitekey:"d5f0c15c-eeda-4f9c-934a-d8e0348e83b2",size:"invisible",languageOverride:c.uiConfig.defaultLanguage,theme:c.uiConfig.theme,onOpen:()=>eo(!0),onClose:()=>eo(!1),onError:()=>el("passwordless.captcha-default-error"),onChalExpired:()=>el("passwordless.captcha-default-error")}),es&&ea&&(0,a.jsx)("p",{className:"-w3a--mt-2 w3a--w-full w3a--pl-6 w3a--text-start w3a--text-xs w3a--font-normal w3a--text-app-red-500 dark:w3a--text-app-red-400",children:T(es)}),!ea&&(0,a.jsxs)("div",{className:"w3a--flex w3a--w-full w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-2",children:[!B&&(()=>{var e;let t={social:ev,passwordless:eb,externalWallets:eE},n={social:v,passwordless:b,externalWallets:E},r=(null==(e=c.uiConfig)?void 0:e.signInMethods)||["social","passwordless","externalWallets"];Object.entries(n).forEach(([e,t])=>{t&&!r.includes(e)&&r.push(e)});let i=r.map(e=>n[e]&&t[e]()).filter(Boolean);if(3===i.length){let e=r.findIndex(e=>"externalWallets"===e);0===e?i.splice(1,0,ex(1)):1===e?(i.splice(1,0,ex(1)),i.splice(3,0,ex(2))):2===e&&i.splice(2,0,ex(1))}else 2===i.length&&n.externalWallets&&i.splice(1,0,ex(1));return i})(),B&&ev(F)]})]})}let y9=()=>{let{toast:e,setToast:t}=(0,s.useContext)(ws);return((0,s.useEffect)(()=>{e.message&&setTimeout(()=>{t({message:"",type:m_.SUCCESS})},3e3)},[e.message,t]),e.message)?(0,a.jsxs)("div",{className:`w3a--absolute w3a--inset-x-4 w3a--bottom-4 w3a--z-[60] w3a--mx-auto w3a--w-[90%] w3a--rounded-md w3a--border w3a--p-4 w3a--text-sm ${{success:"w3a--border-app-green-200 w3a--bg-app-green-100 w3a--text-app-green-900",error:"w3a--border-app-red-200 w3a--bg-app-red-100 w3a--text-app-red-900",warning:"w3a--border-app-yellow-200 w3a--bg-app-yellow-100 w3a--text-app-yellow-900",info:"w3a--border-app-blue-200 w3a--bg-app-blue-100 w3a--text-app-blue-900"}[e.type]}`,children:[(0,a.jsx)("div",{className:"w3a--absolute w3a--right-4 w3a--top-4 w3a--z-10 w3a--cursor-pointer",children:(0,a.jsx)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>t({message:"",type:m_.SUCCESS}),className:{success:"w3a--text-app-green-900",error:"w3a--text-app-red-900",warning:"w3a--text-app-yellow-900",info:"w3a--text-app-blue-900"}[e.type],children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292787 1.29299C0.480314 1.10552 0.734622 1.0002 0.999786 1.0002C1.26495 1.0002 1.51926 1.10552 1.70679 1.29299L5.99979 5.58599L10.2928 1.29299C10.385 1.19748 10.4954 1.1213 10.6174 1.06889C10.7394 1.01648 10.8706 0.988893 11.0034 0.987739C11.1362 0.986585 11.2678 1.01189 11.3907 1.06217C11.5136 1.11245 11.6253 1.1867 11.7192 1.28059C11.8131 1.37449 11.8873 1.48614 11.9376 1.60904C11.9879 1.73193 12.0132 1.86361 12.012 1.99639C12.0109 2.12917 11.9833 2.26039 11.9309 2.38239C11.8785 2.5044 11.8023 2.61474 11.7068 2.70699L7.41379 6.99999L11.7068 11.293C11.8889 11.4816 11.9897 11.7342 11.9875 11.9964C11.9852 12.2586 11.88 12.5094 11.6946 12.6948C11.5092 12.8802 11.2584 12.9854 10.9962 12.9877C10.734 12.9899 10.4814 12.8891 10.2928 12.707L5.99979 8.41399L1.70679 12.707C1.51818 12.8891 1.26558 12.9899 1.00339 12.9877C0.741188 12.9854 0.490376 12.8802 0.304968 12.6948C0.11956 12.5094 0.0143906 12.2586 0.0121121 11.9964C0.00983372 11.7342 0.110629 11.4816 0.292787 11.293L4.58579 6.99999L0.292787 2.70699C0.105316 2.51946 0 2.26515 0 1.99999C0 1.73483 0.105316 1.48052 0.292787 1.29299V1.29299Z",fill:"currentColor"})})}),(0,a.jsx)("div",{className:"w3a--flex w3a--items-center w3a--gap-2",children:(0,a.jsx)("p",{children:e.message})})]}):null};function y7(e){var t,n,r,i,o,l,c;let{setModalState:d,modalState:u,handleExternalWalletBtnClick:h,handleMobileVerifyConnect:f,chainNamespaces:p,walletRegistry:g,appLogo:m,onCloseLoader:w,handleSocialLoginClick:y,showPasswordLessInput:v,showExternalWalletButton:b,socialLoginsConfig:E,areSocialLoginsVisible:C,isEmailPrimary:x,isExternalPrimary:S,showExternalWalletPage:_,isEmailPasswordLessLoginVisible:A,isSmsPasswordLessLoginVisible:T,preHandleExternalWalletClick:I,uiConfig:N,deviceDetails:O,isConnectAndSignAuthenticationMode:k}=e,{logoAlignment:M="center",buttonRadiusType:P="pill",privacyPolicy:R="",tncLink:L="",displayInstalledExternalWallets:D=!0,displayExternalWalletsCount:j=!0}=N,[U]=wo(void 0,{i18n:wQ}),{isDark:B}=(0,s.useContext)(wl),[$,W]=(0,s.useState)({metamaskQrCode:{show:!1,wallet:null},installLinks:{show:!1,wallet:null},multiChainSelector:{show:!1,wallet:null}}),[K,H]=(0,s.useState)({message:"",type:m_.SUCCESS}),[z,F]=(0,s.useState)(!1),[V,q]=(0,s.useState)(!1),Y=(0,s.useMemo)(()=>!v&&!C,[C,v]),G=(0,s.useMemo)(()=>{var e;if("desktop"===O.platform)return[];let t=(null==(e=$.installLinks)||null==(e=e.wallet)||null==(e=e.walletRegistryItem)?void 0:e.app)||{};return Object.keys(t).reduce((e,n)=>{if(!["android","ios"].includes(n))return e;let r=t[n];if(!r)return e;let i=((e,t)=>{if(null!=t&&t.includes("https://"))return t;switch(e){case"android":return`https://play.google.com/store/apps/details?id=${t}`;case"ios":return`https://apps.apple.com/app/safepal-wallet/${t}`;default:return""}})(n,r);if(!i)return e;let o=`${n}-light`,s=`${n}-dark`;return e.push((0,a.jsx)("li",{className:"w3a--w-full",children:(0,a.jsx)("a",{href:i,rel:"noopener noreferrer",target:"_blank",children:(0,a.jsxs)("button",{type:"button",className:mJ("w3a--group w3a--relative w3a--overflow-hidden w3a--h-11 w3a--flex w3a--w-full w3a--items-center w3a--justify-start w3a--gap-x-2 w3a--border w3a--border-app-gray-200 w3a--bg-app-gray-50 w3a--px-5 w3a--py-2.5 hover:w3a--translate-y-[0.5px] hover:w3a--border-app-gray-50 dark:w3a--border-app-gray-500 dark:w3a--bg-app-gray-800 dark:hover:w3a--border-app-gray-800",{"w3a--rounded-full":"pill"===P,"w3a--rounded-lg":"rounded"===P,"w3a--rounded-none":"square"===P}),children:[(0,a.jsx)(w4,{imageId:o,darkImageId:s,hoverImageId:o,darkHoverImageId:s,height:"28",width:"28",isButton:!0}),(0,a.jsx)("span",{className:"w3a--text-sm w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:U("modal.external.install-mobile-app",{os:(e=>{switch(e){case"ios":return"iOS";case"android":return"Android";default:return""}})(n)})}),(0,a.jsx)("img",{id:"install-links-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-6 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:mZ(B?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})})},i)),e},[])},[null==(t=$.installLinks)||null==(t=t.wallet)||null==(t=t.walletRegistryItem)?void 0:t.app,O.platform,B,U,P]),J=(0,s.useMemo)(()=>{var e;let t;if("desktop"!==O.platform)return[];let n="brave"===O.browser?"chrome":O.browser,r=(null==(e=$.installLinks)||null==(e=e.wallet)||null==(e=e.walletRegistryItem)?void 0:e.app)||{},i=r.browser&&r.browser.includes(n)?r.browser:void 0,o=r[n]||i,s=o?((e,t)=>{if(null!=t&&t.startsWith("https://"))return t;switch(e){case"chrome":return`https://chrome.google.com/webstore/detail/${t}`;case"firefox":return`https://addons.mozilla.org/firefox/addon/${t}`;case"edge":return`https://microsoftedge.microsoft.com/addons/detail/${t}`;default:return null}})(n,o):null;return[s?(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:s,rel:"noopener noreferrer",target:"_blank",children:(0,a.jsxs)("button",{type:"button",className:mJ("w3a--group w3a--relative w3a--overflow-hidden w3a--h-11 w3a--flex w3a--w-full w3a--items-center w3a--justify-start w3a--gap-x-2 w3a--border w3a--border-app-gray-200 w3a--bg-app-gray-50 w3a--px-5 w3a--py-2.5 hover:w3a--translate-y-[0.5px] hover:w3a--border-app-gray-50 dark:w3a--border-app-gray-500 dark:w3a--bg-app-gray-800 dark:hover:w3a--border-app-gray-800",{"w3a--rounded-full":"pill"===P,"w3a--rounded-lg":"rounded"===P,"w3a--rounded-none":"square"===P}),children:[(0,a.jsx)(w4,{imageId:O.browser,darkImageId:O.browser,hoverImageId:O.browser,darkHoverImageId:O.browser,height:"30",width:"30",isButton:!0}),(0,a.jsx)("span",{className:"w3a--text-sm w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:U("modal.external.install-browser-extension",{browser:(t=O.browser).charAt(0).toUpperCase()+t.slice(1)})}),(0,a.jsx)("img",{id:"install-links-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-6 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:mZ(B?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})})},s):null,...G]},[null==(n=$.installLinks)||null==(n=n.wallet)||null==(n=n.walletRegistryItem)?void 0:n.app,O.browser,O.platform,B,G,P,U]),Z=(0,s.useMemo)(()=>u.externalWalletsConfig,[u.externalWalletsConfig]),Q=(0,s.useMemo)(()=>{let e={};return Object.keys(Z).forEach(t=>{var n;e[t]=!!(null==(n=Z[t])?void 0:n.showOnModal)}),e},[Z]),X=(0,s.useMemo)(()=>Object.keys((null==g?void 0:g.default)||{}).length>0||Object.keys((null==g?void 0:g.others)||{}).length>0,[g]),ee=(0,s.useCallback)(e=>Object.keys(e).reduce((t,n)=>{var r,i,a,o,s;if(!1===Q[n])return t;let l=e[n],c="";if("desktop"!==O.platform){let e=null==l||null==(o=l.mobile)?void 0:o.universal,t=null==l||null==(s=l.mobile)?void 0:s.native;c=e||t}let d=Z[n],u=(null==d?void 0:d.chainNamespaces)||[],h=new Set(null==(r=l.chains)?void 0:r.map(e=>e.split(":")[0])),f=new Set(null==(i=l.injected)?void 0:i.map(e=>e.namespace)),g=p.filter(e=>h.has(e)||f.has(e)||u.includes(e)),m={name:n,displayName:l.name,href:c,hasInjectedWallet:(null==d?void 0:d.isInjected)||!1,isInstalled:!!d,hasWalletConnect:X&&(null==(a=l.walletConnect)||null==(a=a.sdks)?void 0:a.includes("sign_v2")),hasInstallLinks:Object.keys(l.app||{}).length>0,walletRegistryItem:l,imgExtension:l.imgExtension||"svg",icon:null==d?void 0:d.icon,chainNamespaces:g};return(m.hasInjectedWallet||m.hasWalletConnect||m.hasInstallLinks)&&0!==g.length&&t.push(m),t},[]),[Q,p,Z,O.platform,X]),et=(0,s.useMemo)(()=>[...ee(g.default),...ee(g.others)],[ee,g.default,g.others]),en=(0,s.useMemo)(()=>{let e=Object.keys(Z).reduce((e,t)=>{if(t===eR.WALLET_CONNECTORS.WALLET_CONNECT_V2||!Q[t])return e;let n=Z[t];return e.push({name:t,displayName:(null==n?void 0:n.label)||t,hasInjectedWallet:(null==n?void 0:n.isInjected)||!1,isInstalled:!0,hasWalletConnect:!1,hasInstallLinks:!1,icon:null==n?void 0:n.icon,chainNamespaces:(null==n?void 0:n.chainNamespaces)||[]}),e},[]),t=e.findIndex(e=>e.name===eR.WALLET_CONNECTORS.METAMASK&&!e.hasInjectedWallet);if(-1!==t){let n=e[t],r=et.find(e=>e.name===eR.WALLET_CONNECTORS.METAMASK);r||(r=ee({[eR.WALLET_CONNECTORS.METAMASK]:mU})[0]),r&&e.splice(t,1,(0,eD.default)((0,eD.default)({},r),{},{chainNamespaces:n.chainNamespaces,isInstalled:!0}))}return e},[et,Z,Q,ee]),er=(0,s.useMemo)(()=>en.filter(e=>!e.hasInjectedWallet),[en]),ei=(0,s.useMemo)(()=>en.sort((e,t)=>e.name===eR.WALLET_CONNECTORS.METAMASK?-1:1).slice(0,D?3:1),[en,D]),ea=(0,s.useMemo)(()=>{let e=new Set;return en.concat(et).filter(t=>!e.has(t.name)&&(e.add(t.name),!0))},[et,en]),eo=(0,s.useMemo)(()=>ea.filter(e=>!ei.includes(e)).length,[ea,ei]),es=(0,s.useMemo)(()=>{var e;let t=R||L;if(u.status!==mv)return"530px";if(V||null!=(e=$.metamaskQrCode)&&e.show)return t?"640px":"588px";if(u.currentPage===mP)return t?"640px":"580px";if(z)return t?"644px":"588px";if(1===ei.length)return t?"560px":"530px";if(ei.length>1){let e=500+(ei.length-1)*58;return t?`${e+60}px`:`${e+16}px`}return"539px"},[R,L,u.status,u.currentPage,V,null==(r=$.metamaskQrCode)?void 0:r.show,z,ei.length]),el=(0,s.useMemo)(()=>({bodyState:$,setBodyState:W,toast:K,setToast:H}),[$,W,K,H]),ec=(0,s.useMemo)(()=>u.status!==mv,[u.status]);return(0,a.jsx)(ws.Provider,{value:el,children:(0,a.jsxs)("div",{className:"w3a--relative w3a--flex w3a--flex-col",children:[(0,a.jsxs)("div",{className:"w3a--relative w3a--h-screen w3a--overflow-hidden w3a--transition-all w3a--duration-[400ms] w3a--ease-in-out",style:{maxHeight:es},children:[(0,a.jsx)("div",{className:"w3a--modal-curtain"}),(0,a.jsxs)("div",{className:"w3a--relative w3a--flex w3a--h-full w3a--flex-1 w3a--flex-col w3a--p-6",children:[ec?(0,a.jsx)(yw,{connector:u.detailedLoaderConnector,connectorName:u.detailedLoaderConnectorName,modalStatus:u.status,onClose:w,appLogo:m,isConnectAndSignAuthenticationMode:k,externalWalletsConfig:u.externalWalletsConfig,walletRegistry:g,handleMobileVerifyConnect:f}):(0,a.jsx)(a.Fragment,{children:null!=(i=$.metamaskQrCode)&&i.show?(0,a.jsxs)("div",{className:"w3a--relative w3a--flex w3a--flex-1 w3a--flex-col w3a--gap-y-4",children:[(0,a.jsx)(w3,{onBackClick:()=>W((0,eD.default)((0,eD.default)({},$),{},{metamaskQrCode:{show:!1,wallet:null}})),currentPage:mL,selectedButton:$.metamaskQrCode.wallet}),(0,a.jsx)(ya,{qrCodeValue:u.metamaskConnectUri,isDark:B,selectedButton:$.metamaskQrCode.wallet,primaryColor:null==(o=$.metamaskQrCode.wallet.walletRegistryItem)?void 0:o.primaryColor,logoImage:`https://images.web3auth.io/login-${$.metamaskQrCode.wallet.name}.${$.metamaskQrCode.wallet.imgExtension}`})]}):(0,a.jsxs)(a.Fragment,{children:[u.currentPage===mM&&_&&u.status===mv&&(0,a.jsx)(y6,{web3authClientId:u.web3authClientId,web3authNetwork:u.web3authNetwork,authBuildEnv:u.authBuildEnv,isModalVisible:u.modalVisibility,isDark:B,appLogo:m,showPasswordLessInput:v,showExternalWalletButton:b,showExternalWalletCount:j,showInstalledExternalWallets:D,socialLoginsConfig:E,areSocialLoginsVisible:C,isEmailPrimary:x,isExternalPrimary:S,installedExternalWalletConfig:ei,isEmailPasswordLessLoginVisible:A,isSmsPasswordLessLoginVisible:T,totalExternalWallets:ea.length,remainingUndisplayedWallets:eo,logoAlignment:M,buttonRadius:P,deviceDetails:O,handleSocialLoginClick:y,handleExternalWalletBtnClick:e=>{d((0,eD.default)((0,eD.default)({},u),{},{currentPage:mP})),h&&h(e)},handleSocialLoginHeight:()=>{F(e=>!e)},handleExternalWalletClick:I}),u.currentPage===mP&&!_&&u.status===mv&&(0,a.jsx)(ys,{isDark:B,walletConnectUri:u.walletConnectUri,metamaskConnectUri:u.metamaskConnectUri,config:u.externalWalletsConfig,walletRegistry:g,allRegistryButtons:et,connectorVisibilityMap:Q,customConnectorButtons:er,deviceDetails:O,chainNamespace:p,buttonRadius:P,handleWalletDetailsHeight:()=>{q(e=>!e)},isExternalWalletModeOnly:Y,onBackClick:e=>{d((0,eD.default)((0,eD.default)({},u),{},{currentPage:mM})),h&&h(e)},handleExternalWalletClick:I})]})}),(0,a.jsx)(yc,{privacyPolicy:R,termsOfService:L}),(null==(l=$.multiChainSelector)?void 0:l.show)&&(0,a.jsx)(wX,{uiConfig:N,isShown:$.multiChainSelector.show,onClose:()=>W((0,eD.default)((0,eD.default)({},$),{},{multiChainSelector:{show:!1,wallet:null}})),children:(0,a.jsx)(yl,{isDark:B,wallet:$.multiChainSelector.wallet,handleExternalWalletClick:e=>{I(e),W((0,eD.default)((0,eD.default)({},$),{},{multiChainSelector:{show:!1,wallet:null}}))}})}),(null==(c=$.installLinks)?void 0:c.show)&&(0,a.jsxs)(wX,{uiConfig:N,isShown:$.installLinks.show,onClose:()=>W((0,eD.default)((0,eD.default)({},$),{},{installLinks:{show:!1,wallet:null}})),children:[(0,a.jsx)("p",{className:"w3a--mb-2 w3a--text-center w3a--text-base w3a--font-semibold w3a--text-app-gray-900 dark:w3a--text-app-white",children:U("modal.getWallet")}),(0,a.jsx)("div",{className:"w3a--my-4 w3a--flex w3a--justify-center",children:(0,a.jsx)(w4,{imageId:`login-${$.installLinks.wallet.name}`,hoverImageId:`login-${$.installLinks.wallet.name}`,fallbackImageId:"wallet",height:"80",width:"80",isButton:!0,extension:$.installLinks.wallet.imgExtension})}),(0,a.jsx)("ul",{className:"w3a--flex w3a--flex-col w3a--gap-y-2",children:"desktop"===O.platform?J:G})]})]})]}),(0,a.jsx)(y9,{})]})})}function ve(e){let{stateListener:t,handleSocialLoginClick:n,handleExternalWalletClick:r,handleMobileVerifyConnect:i,handleShowExternalWallets:o,closeModal:l,appLogo:c,appName:d,chainNamespaces:u,walletRegistry:h,uiConfig:f,deviceDetails:p,initialAuthenticationMode:g}=e,{widgetType:m}=f,w=(0,s.useMemo)(()=>m===e7.WIDGET_TYPE.EMBED,[m]),[y,v]=(0,s.useState)({externalWalletsVisibility:!1,status:mv,hasExternalWallets:!1,externalWalletsInitialized:!1,modalVisibility:!1,modalVisibilityDelayed:!1,postLoadingMessage:"",walletConnectUri:"",metamaskConnectUri:"",socialLoginsConfig:{loginMethods:{},loginMethodsOrder:[],connector:"",uiConfig:{}},externalWalletsConfig:{},showExternalWalletsOnly:!1,currentPage:mM,detailedLoaderConnector:"",detailedLoaderConnectorName:"",web3authClientId:"",web3authNetwork:mu.SAPPHIRE_MAINNET,authBuildEnv:mh}),b=(0,s.useMemo)(()=>g===tt.CONNECTOR_INITIAL_AUTHENTICATION_MODE.CONNECT_AND_SIGN,[g]);(0,s.useEffect)(()=>{v(e=>(0,eD.default)((0,eD.default)({},e),{},{modalVisibility:w}))},[w]),(0,s.useEffect)(()=>{t.on("STATE_UPDATED",e=>{nS.log.debug("state updated",e),v(t=>nA((0,e9.default)(t,e,{arrayMerge:(e,t)=>t})))}),t.emit("MOUNTED")},[t]);let E=e=>{let{connector:t}=e;v(e=>(0,eD.default)((0,eD.default)({},e),{},{detailedLoaderConnector:t,detailedLoaderAdapterName:eR.CONNECTOR_NAMES[t]})),r&&r(e)},C=e=>{let{loginParams:t}=e;v(e=>(0,eD.default)((0,eD.default)({},e),{},{detailedLoaderConnector:t.authConnection,detailedLoaderConnectorName:t.name})),n(e)},x=(0,s.useMemo)(()=>{var e,t;return!y.showExternalWalletsOnly&&0!==Object.keys((null==(e=y.socialLoginsConfig)?void 0:e.loginMethods)||{}).length&&Object.entries((null==(t=y.socialLoginsConfig)?void 0:t.loginMethods)||{}).some(([e,t])=>![eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS,eK.AUTH_CONNECTION.SMS_PASSWORDLESS].includes(e)&&!1!==t.showOnModal)},[y]),S=(0,s.useMemo)(()=>{var e;return null==(e=y.socialLoginsConfig)||null==(e=e.loginMethods[eK.AUTH_CONNECTION.EMAIL_PASSWORDLESS])?void 0:e.showOnModal},[y.socialLoginsConfig]),_=(0,s.useMemo)(()=>{var e;return null==(e=y.socialLoginsConfig)||null==(e=e.loginMethods[eK.AUTH_CONNECTION.SMS_PASSWORDLESS])?void 0:e.showOnModal},[y.socialLoginsConfig]),A=(0,s.useMemo)(()=>{var e;return(null==(e=y.socialLoginsConfig)||null==(e=e.uiConfig)?void 0:e.primaryButton)==="emailLogin"},[y.socialLoginsConfig]),T=(0,s.useMemo)(()=>{var e;return(null==(e=y.socialLoginsConfig)||null==(e=e.uiConfig)?void 0:e.primaryButton)==="externalLogin"},[y.socialLoginsConfig]),I=(0,s.useMemo)(()=>S||_,[S,_]),N=(0,s.useMemo)(()=>y.hasExternalWallets||!!y.externalWalletsConfig[eR.WALLET_CONNECTORS.METAMASK],[y]),O=(0,s.useMemo)(()=>(x||I||!!y.externalWalletsConfig[eR.WALLET_CONNECTORS.METAMASK])&&!y.externalWalletsVisibility,[x,I,y]),k=e=>{v(t=>(0,eD.default)((0,eD.default)({},t),{},{externalWalletsVisibility:e})),e&&o&&o(y.externalWalletsInitialized)},M=()=>{v(e=>(0,eD.default)((0,eD.default)({},e),{},{externalWalletsVisibility:!1,modalVisibility:!1,currentPage:mM})),l()},P=()=>{b||y.status!==mb||v((0,eD.default)((0,eD.default)({},y),{},{modalVisibility:!1,externalWalletsVisibility:!1})),b&&y.status===mS&&v((0,eD.default)((0,eD.default)({},y),{},{modalVisibility:!1,externalWalletsVisibility:!1})),y.status===mC&&v((0,eD.default)((0,eD.default)({},y),{},{modalVisibility:!0,status:mv}))},R=(0,s.useMemo)(()=>y.status===mv||y.status===mb||y.status===mC||y.status===mS,[y.status]);return((0,s.useEffect)(()=>{if(y.modalVisibility&&"object"==typeof y.externalWalletsConfig){var e;!1===((null==(e=y.externalWalletsConfig[eR.WALLET_CONNECTORS.WALLET_CONNECT_V2])?void 0:e.showOnModal)||!1)||y.walletConnectUri||"function"!=typeof r||r({connector:eR.WALLET_CONNECTORS.WALLET_CONNECT_V2})}},[y,r]),m===e7.WIDGET_TYPE.MODAL)?(0,a.jsx)(m2,{open:y.modalVisibility,placement:"center",padding:!1,showCloseIcon:R,onClose:M,borderRadius:f.borderRadiusType,children:y.modalVisibility&&(0,a.jsx)(y7,{appLogo:c,appName:d,chainNamespaces:u,walletRegistry:h,showPasswordLessInput:I,showExternalWalletButton:N,handleSocialLoginClick:e=>C(e),socialLoginsConfig:y.socialLoginsConfig,areSocialLoginsVisible:x,isEmailPrimary:A,isExternalPrimary:T,showExternalWalletPage:O,handleExternalWalletBtnClick:k,modalState:y,preHandleExternalWalletClick:E,setModalState:v,onCloseLoader:P,isEmailPasswordLessLoginVisible:S,isSmsPasswordLessLoginVisible:_,uiConfig:f,deviceDetails:p,isConnectAndSignAuthenticationMode:b,handleMobileVerifyConnect:i})}):(0,a.jsx)(m3,{open:y.modalVisibility,padding:!1,onClose:M,borderRadius:f.borderRadiusType,children:y.modalVisibility&&(0,a.jsx)(y7,{chainNamespaces:u,walletRegistry:h,appLogo:c,appName:d,showPasswordLessInput:I,showExternalWalletButton:N,handleSocialLoginClick:e=>C(e),socialLoginsConfig:y.socialLoginsConfig,areSocialLoginsVisible:x,isEmailPrimary:A,isExternalPrimary:T,showExternalWalletPage:O,handleExternalWalletBtnClick:k,modalState:y,preHandleExternalWalletClick:E,setModalState:v,onCloseLoader:P,isEmailPasswordLessLoginVisible:S,isSmsPasswordLessLoginVisible:_,uiConfig:f,deviceDetails:p,isConnectAndSignAuthenticationMode:b,handleMobileVerifyConnect:i})})}class vt{constructor(t,n){if((0,ej.default)(this,"uiConfig",void 0),(0,ej.default)(this,"stateEmitter",void 0),(0,ej.default)(this,"chainNamespaces",void 0),(0,ej.default)(this,"walletRegistry",void 0),(0,ej.default)(this,"callbacks",void 0),(0,ej.default)(this,"externalWalletsConfig",void 0),(0,ej.default)(this,"analytics",void 0),(0,ej.default)(this,"initModal",async()=>{let t={isDark:this.isDark},n=this.uiConfig.defaultLanguage||"en";return"de"===n?e.A(90087).then(e=>(wQ.addResourceBundle(n,"translation",e.default),wQ.changeLanguage(n))).catch(e=>{nS.log.error(e)}):"ja"===n?e.A(55793).then(e=>(wQ.addResourceBundle(n,"translation",e.default),wQ.changeLanguage(n))).catch(e=>{nS.log.error(e)}):"ko"===n?e.A(55108).then(e=>(wQ.addResourceBundle(n,"translation",e.default),wQ.changeLanguage(n))).catch(e=>{nS.log.error(e)}):"zh"===n?e.A(71521).then(e=>(wQ.addResourceBundle(n,"translation",e.default),wQ.changeLanguage(n))).catch(e=>{nS.log.error(e)}):"es"===n?e.A(6234).then(e=>(wQ.addResourceBundle(n,"translation",e.default),wQ.changeLanguage(n))).catch(e=>{nS.log.error(e)}):"fr"===n?e.A(74070).then(e=>(wQ.addResourceBundle(n,"translation",e.default),wQ.changeLanguage(n))).catch(e=>{nS.log.error(e)}):"pt"===n?e.A(11932).then(e=>(wQ.addResourceBundle(n,"translation",e.default),wQ.changeLanguage(n))).catch(e=>{nS.log.error(e)}):"nl"===n?e.A(47260).then(e=>(wQ.addResourceBundle(n,"translation",e.default),wQ.changeLanguage(n))).catch(e=>{nS.log.error(e)}):"tr"===n?e.A(12305).then(e=>(wQ.addResourceBundle(n,"translation",e.default),wQ.changeLanguage(n))).catch(e=>{nS.log.error(e)}):"en"===n&&e.A(6176).then(e=>(wQ.addResourceBundle(n,"translation",e.default),wQ.changeLanguage(n))).catch(e=>{nS.log.error(e)}),new Promise(n=>{var r,i,o,s,l;if(this.stateEmitter.once("MOUNTED",()=>(nS.log.info("rendered"),this.setState({status:mv,web3authClientId:this.uiConfig.web3authClientId,web3authNetwork:this.uiConfig.web3authNetwork,authBuildEnv:this.uiConfig.authBuildEnv}),n())),this.uiConfig.widgetType===e7.WIDGET_TYPE.MODAL){let e,t;s=this.uiConfig.modalZIndex,(e=document.getElementById("w3a-parent-container"))&&e.remove(),(t=document.createElement("section")).classList.add("w3a-parent-container"),t.setAttribute("id","w3a-parent-container"),t.style.zIndex=s,t.style.position="relative",document.body.appendChild(t)}else if(this.uiConfig.widgetType===e7.WIDGET_TYPE.EMBED){let e;l=this.uiConfig.targetId,(e=document.getElementById(l))?e.innerHTML='<div id="w3a-parent-container" class="w3a-parent-container"></div>':nS.log.error(`Element with ID ${l} not found`)}else throw nx.WalletInitializationError.invalidParams(`Invalid widget type: ${this.uiConfig.widgetType}`);let c=document.getElementById("w3a-parent-container");t.isDark?c.classList.add("w3a--dark"):c.classList.remove("w3a--dark"),(0,mk.createRoot)(c).render((0,a.jsx)(wl.Provider,{value:t,children:(0,a.jsx)(w0.Provider,{value:{analytics:this.analytics},children:(0,a.jsx)(ve,{stateListener:this.stateEmitter,appLogo:t.isDark?this.uiConfig.logoDark:this.uiConfig.logoLight,appName:this.uiConfig.appName,chainNamespaces:this.chainNamespaces,walletRegistry:this.walletRegistry,deviceDetails:this.deviceDetails,handleShowExternalWallets:this.handleShowExternalWallets,handleExternalWalletClick:this.handleExternalWalletClick,handleMobileVerifyConnect:this.handleMobileVerifyConnect,handleSocialLoginClick:this.handleSocialLoginClick,closeModal:this.closeModal,uiConfig:this.uiConfig,initialAuthenticationMode:this.uiConfig.initialAuthenticationMode})})}));let d=(null==(r=this.uiConfig)||null==(r=r.theme)?void 0:r.primary)==="#0364FF"&&(null==(i=this.uiConfig.theme)?void 0:i.onPrimary)==="#FFFFFF";null!=(o=this.uiConfig)&&o.theme&&!d&&e.A(33426).then(({default:e})=>{!function(e,t,n){if(n.primary){var r;let i,a,o=(i=mT(e,3,50,"black",0,20,r=n.primary),a=mT(e,6,85,"white",0,20,r),[...i.reverse(),r,...a]);t.style.setProperty("--app-primary-900",o[0]),t.style.setProperty("--app-primary-800",o[1]),t.style.setProperty("--app-primary-700",o[2]),t.style.setProperty("--app-primary-600",o[3]),t.style.setProperty("--app-primary-500",o[4]),t.style.setProperty("--app-primary-400",o[5]),t.style.setProperty("--app-primary-300",o[6]),t.style.setProperty("--app-primary-200",o[7]),t.style.setProperty("--app-primary-100",o[8]),t.style.setProperty("--app-primary-50",o[9])}n.onPrimary&&t.style.setProperty("--app-on-primary",n.onPrimary)}(e,document.getElementById("w3a-parent-container"),this.uiConfig.theme)}).catch(e=>{nS.log.error(e)})})}),(0,ej.default)(this,"addSocialLogins",(e,t,n,r)=>{this.setState({socialLoginsConfig:{connector:e,loginMethods:t,loginMethodsOrder:n,uiConfig:r}}),nS.log.info("addSocialLogins",e,t,n,r)}),(0,ej.default)(this,"addWalletLogins",(e,t)=>{this.externalWalletsConfig=e;let n=!!e[eR.WALLET_CONNECTORS.METAMASK];this.setState({externalWalletsConfig:e,externalWalletsInitialized:!!t.externalWalletsInitialized,showExternalWalletsOnly:!!t.showExternalWalletsOnly,externalWalletsVisibility:!n&&!!t.externalWalletsVisibility})}),(0,ej.default)(this,"open",()=>{var e,t,n;let r;this.setState({modalVisibility:!0}),null==(e=this.analytics)||e.track(te.ANALYTICS_EVENTS.LOGIN_MODAL_OPENED,(0,eD.default)((0,eD.default)({chain_namespaces:this.chainNamespaces,wallet_registry_count:Object.keys(null==(t=this.walletRegistry)?void 0:t.default).length+Object.keys(null==(n=this.walletRegistry)?void 0:n.others).length,external_wallet_connectors:Object.keys(this.externalWalletsConfig||{})},(0,tn.getWhitelabelAnalyticsProperties)(this.uiConfig)),{ui_modal_login_methods_order:null==(r=this.uiConfig)?void 0:r.loginMethodsOrder,ui_modal_z_index:null==r?void 0:r.modalZIndex,ui_modal_display_errors_on_modal:null==r?void 0:r.displayErrorsOnModal,ui_modal_login_grid_col:null==r?void 0:r.loginGridCol,ui_modal_primary_button:null==r?void 0:r.primaryButton,ui_modal_widget_type:null==r?void 0:r.widgetType,ui_modal_target_id_used:!!(null==r?void 0:r.targetId),ui_modal_logo_alignment:null==r?void 0:r.logoAlignment,ui_modal_border_radius_type:null==r?void 0:r.borderRadiusType,ui_modal_button_radius_type:null==r?void 0:r.buttonRadiusType,ui_modal_sign_in_methods:null==r?void 0:r.signInMethods,ui_modal_add_previous_login_hint:null==r?void 0:r.addPreviousLoginHint,ui_modal_display_installed_external_wallets:null==r?void 0:r.displayInstalledExternalWallets,ui_modal_display_external_wallets_count:null==r?void 0:r.displayExternalWalletsCount})),this.callbacks.onModalVisibility&&this.callbacks.onModalVisibility(!0)}),(0,ej.default)(this,"closeModal",()=>{var e;this.setState({modalVisibility:!1,externalWalletsVisibility:!1}),null==(e=this.analytics)||e.track(te.ANALYTICS_EVENTS.LOGIN_MODAL_CLOSED),this.callbacks.onModalVisibility&&this.callbacks.onModalVisibility(!1)}),(0,ej.default)(this,"initExternalWalletContainer",()=>{this.setState({hasExternalWallets:!0})}),(0,ej.default)(this,"handleShowExternalWallets",e=>{this.callbacks.onInitExternalWallets&&this.callbacks.onInitExternalWallets({externalWalletsInitialized:e})}),(0,ej.default)(this,"handleExternalWalletClick",e=>{nS.log.info("external wallet clicked",e);let{connector:t,chainNamespace:n}=e;this.callbacks.onExternalWalletLogin&&this.callbacks.onExternalWalletLogin({connector:t,loginParams:{chainNamespace:n}})}),(0,ej.default)(this,"handleMobileVerifyConnect",e=>{nS.log.info("mobile verify connect clicked",e);let{connector:t}=e;this.callbacks.onMobileVerifyConnect&&this.callbacks.onMobileVerifyConnect({connector:t})}),(0,ej.default)(this,"handleSocialLoginClick",e=>{var t;nS.log.info("social login clicked",e);let{connector:n,loginParams:r}=e;null==(t=this.analytics)||t.track(te.ANALYTICS_EVENTS.SOCIAL_LOGIN_SELECTED,{connector:n,auth_connection:r.authConnection,auth_connection_id:r.authConnectionId,group_auth_connection_id:r.groupedAuthConnectionId}),this.callbacks.onSocialLogin&&this.callbacks.onSocialLogin({connector:n,loginParams:r})}),(0,ej.default)(this,"setState",e=>{this.stateEmitter.emit("STATE_UPDATED",e)}),(0,ej.default)(this,"handleConnectorData",e=>{if(e.connectorName===eR.WALLET_CONNECTORS.WALLET_CONNECT_V2){let t=e.data;t.uri&&this.setState({walletConnectUri:t.uri})}if(e.connectorName===eR.WALLET_CONNECTORS.METAMASK){let t=e.data;t.uri&&this.setState({metamaskConnectUri:t.uri})}}),(0,ej.default)(this,"subscribeCoreEvents",e=>{e.on(tt.CONNECTOR_EVENTS.CONNECTING,e=>{var t;if(nS.log.info("connecting with connector",e),(null==e?void 0:e.connector)===eR.WALLET_CONNECTORS.WALLET_CONNECT_V2)return;let n=null==(t=this.externalWalletsConfig)||null==(t=t[eR.WALLET_CONNECTORS.METAMASK])?void 0:t.isInjected;((null==e?void 0:e.connector)!==eR.WALLET_CONNECTORS.METAMASK||n||"desktop"!==this.deviceDetails.platform)&&this.setState({status:mE})}),e.on(tt.CONNECTOR_EVENTS.CONNECTED,e=>{nS.log.debug("connected with connector",e),e.reconnected||e.loginMode!==e7.LOGIN_MODE.MODAL?this.setState({status:mb}):this.setState({status:mb,modalVisibility:!0,postLoadingMessage:"modal.post-loading.connected",currentPage:mM})}),e.on(tt.CONNECTOR_EVENTS.ERRORED,(e,t)=>{nS.log.error("error",e,e.message),t!==e7.LOGIN_MODE.NO_MODAL&&(5e3===e.code?this.uiConfig.displayErrorsOnModal?this.setState({modalVisibility:!0,postLoadingMessage:e.message||"modal.post-loading.something-wrong",status:mC}):this.setState({modalVisibility:!1}):this.setState({modalVisibility:!0,status:mv}))}),e.on(tt.CONNECTOR_EVENTS.DISCONNECTED,()=>{this.setState({status:mv,externalWalletsVisibility:!1})}),e.on(tt.CONNECTOR_EVENTS.CONNECTOR_DATA_UPDATED,e=>{this.handleConnectorData(e)}),e.on(tt.CONNECTOR_EVENTS.AUTHORIZING,()=>{this.setState({status:mx})}),e.on(tt.CONNECTOR_EVENTS.AUTHORIZED,()=>{this.setState({status:mS})})}),this.uiConfig=t,t.logoDark||(this.uiConfig.logoDark=mj),t.logoLight||(this.uiConfig.logoLight=mD),t.mode||(this.uiConfig.mode="light"),t.modalZIndex||(this.uiConfig.modalZIndex="99998"),void 0===t.displayErrorsOnModal&&(this.uiConfig.displayErrorsOnModal=!0),t.appName||(this.uiConfig.appName="Web3Auth"),t.loginGridCol||(this.uiConfig.loginGridCol=3),t.primaryButton||(this.uiConfig.primaryButton="socialLogin"),t.defaultLanguage||(this.uiConfig.defaultLanguage=m1(t.defaultLanguage)),t.widgetType||(this.uiConfig.widgetType=e7.WIDGET_TYPE.MODAL),t.initialAuthenticationMode||(this.uiConfig.initialAuthenticationMode=tt.CONNECTOR_INITIAL_AUTHENTICATION_MODE.CONNECT_ONLY),t.widgetType===e7.WIDGET_TYPE.EMBED&&!t.targetId)throw nS.log.error("targetId is required for embed widget"),nx.WalletInitializationError.invalidParams("targetId is required for embed widget");this.stateEmitter=new mO,this.chainNamespaces=t.chainNamespaces,this.walletRegistry=t.walletRegistry,this.callbacks=n,this.analytics=t.analytics,this.subscribeCoreEvents(this.uiConfig.connectorListener)}get isDark(){return"dark"===this.uiConfig.mode||"auto"===this.uiConfig.mode&&window.matchMedia("(prefers-color-scheme: dark)").matches}get deviceDetails(){if("undefined"==typeof window)return{platform:"mobile",browser:"chrome",os:"ios"};let e=eF.default.getParser(window.navigator.userAgent);return{platform:e.getPlatformType(),browser:e.getBrowserName().toLowerCase(),os:e.getOSName()}}}class vn extends ml{constructor(e,t){super(e,t),(0,ej.default)(this,"loginModal",void 0),(0,ej.default)(this,"options",void 0),(0,ej.default)(this,"modalConfig",nA(eL)),(0,ej.default)(this,"onInitExternalWallets",async e=>{e.externalWalletsInitialized||await this.initExternalConnectors(this.connectors.filter(e=>e.name===eR.WALLET_CONNECTORS.WALLET_CONNECT_V2),{externalWalletsInitialized:!0,externalWalletsVisibility:!0})}),(0,ej.default)(this,"onSocialLogin",async e=>{try{await this.connectTo(eR.WALLET_CONNECTORS.AUTH,e.loginParams,e7.LOGIN_MODE.MODAL)}catch(t){nS.log.error(`Error while connecting to connector: ${e.connector}`,t)}}),(0,ej.default)(this,"onExternalWalletLogin",async e=>{try{var t;let n=this.getConnector(e.connector,null==(t=e.loginParams)?void 0:t.chainNamespace);if(n.name===eR.WALLET_CONNECTORS.WALLET_CONNECT_V2){let e=this.getInitialChainIdForConnector(n);await n.connect({chainId:e.chainId})}else await this.connectTo(e.connector,e.loginParams,e7.LOGIN_MODE.MODAL)}catch(t){nS.log.error(`Error while connecting to connector: ${e.connector}`,t)}}),(0,ej.default)(this,"onModalVisibility",async e=>{nS.log.debug("is login modal visible",e),this.emit(my,e);let t=this.getConnector(eR.WALLET_CONNECTORS.WALLET_CONNECT_V2);if(t){let n=null==t?void 0:t.status;if(nS.log.debug("trying refreshing wc session",e,n),e&&(n===tt.CONNECTOR_STATUS.READY||n===tt.CONNECTOR_STATUS.CONNECTING)){nS.log.debug("refreshing wc session");try{let e=this.getInitialChainIdForConnector(t);t.connect({chainId:e.chainId})}catch(e){nS.log.error("Error while disconnecting to wallet connect in core",e)}}!e&&n_.CONNECTED_STATUSES.includes(this.status)&&(n===tt.CONNECTOR_STATUS.READY||n===tt.CONNECTOR_STATUS.CONNECTING)&&(nS.log.debug("this stops wc connector from trying to reconnect once proposal expires"),t.status=tt.CONNECTOR_STATUS.READY)}}),(0,ej.default)(this,"onMobileVerifyConnect",async e=>{try{let t=this.getConnector(e.connector);await t.getIdentityToken()}catch(t){nS.log.error(`Error while connecting to connector: ${e.connector}`,t)}}),(0,ej.default)(this,"getChainNamespaces",()=>{var e;return[...new Set((null==(e=this.coreOptions.chains)?void 0:e.map(e=>e.chainNamespace))||[])]}),this.options=(0,eD.default)({},e),this.options.uiConfig||(this.options.uiConfig={}),this.options.modalConfig&&(this.modalConfig=this.options.modalConfig),nS.log.info("modalConfig",this.modalConfig)}async init(e){let t=Date.now();this.analytics.init(),this.analytics.identify(this.options.clientId,{web3auth_client_id:this.options.clientId,web3auth_network:this.options.web3AuthNetwork}),this.analytics.setGlobalProperties({dapp_url:window.location.origin,sdk_name:te.ANALYTICS_SDK_TYPE.WEB_MODAL,sdk_version:tn.sdkVersion,web3auth_client_id:this.options.clientId,web3auth_network:this.options.web3AuthNetwork});let n={};try{var r,i;let{signal:a}=e||{};super.checkInitRequirements();let{projectConfig:o,walletRegistry:s}=await this.getProjectAndWalletConfig();this.initUIConfig(o),super.initAccountAbstractionConfig(o),super.initChainsConfig(o),super.initCachedConnectorAndChainId(),super.initWalletServicesConfig(o),super.initSessionTimeConfig(o),this.analytics.setGlobalProperties({team_id:o.teamId}),n=this.getInitializationTrackData();let{filteredWalletRegistry:l,disabledExternalWallets:c}=this.filterWalletRegistry(s,o);this.loginModal=new vt((0,eD.default)((0,eD.default)({},this.options.uiConfig),{},{connectorListener:this,web3authClientId:this.options.clientId,web3authNetwork:this.options.web3AuthNetwork,authBuildEnv:this.options.authBuildEnv,chainNamespaces:this.getChainNamespaces(),walletRegistry:l,analytics:this.analytics,initialAuthenticationMode:this.options.initialAuthenticationMode}),{onInitExternalWallets:this.onInitExternalWallets,onSocialLogin:this.onSocialLogin,onExternalWalletLogin:this.onExternalWalletLogin,onModalVisibility:this.onModalVisibility,onMobileVerifyConnect:this.onMobileVerifyConnect}),await (0,tn.withAbort)(()=>this.loginModal.initModal(),a),await (0,tn.withAbort)(()=>this.setupCommonJRPCProvider(),a),this.on(tt.CONNECTOR_EVENTS.CONNECTORS_UPDATED,({connectors:e})=>{let t=()=>{var e;nS.log.debug("init aborted"),(null==(e=this.connectors)?void 0:e.length)>0&&super.cleanup()};(0,tn.withAbort)(()=>this.initConnectors({connectors:e,projectConfig:o,disabledExternalWallets:c}),a,t)}),await (0,tn.withAbort)(()=>super.loadConnectors({projectConfig:o,modalMode:!0}),a),await (0,tn.withAbort)(()=>super.initPlugins(),a);let d=this.getConnector(eR.WALLET_CONNECTORS.AUTH);n=(0,eD.default)((0,eD.default)({},n),{},{connectors:this.connectors.map(e=>e.name),plugins:Object.keys(this.plugins),auth_ux_mode:(null==d||null==(r=d.authInstance)||null==(r=r.options)?void 0:r.uxMode)||(null==(i=this.coreOptions.uiConfig)?void 0:i.uxMode)}),this.analytics.track(te.ANALYTICS_EVENTS.SDK_INITIALIZATION_COMPLETED,(0,eD.default)((0,eD.default)({},n),{},{duration:Date.now()-t}))}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;throw this.analytics.track(te.ANALYTICS_EVENTS.SDK_INITIALIZATION_FAILED,(0,eD.default)((0,eD.default)((0,eD.default)({},n),(0,tn.getErrorAnalyticsProperties)(e)),{},{duration:Date.now()-t})),nS.log.error("Failed to initialize modal",e),e}}async connect(){if(!this.loginModal)throw nx.WalletInitializationError.notReady("Login modal is not initialized");return this.connectedConnectorName&&n_.CONNECTED_STATUSES.includes(this.status)&&this.provider?this.provider:(this.loginModal.open(),new Promise((e,t)=>{let n=()=>(this.removeListener(tt.CONNECTOR_EVENTS.ERRORED,r),this.removeListener(my,i),e(this.provider)),r=e=>(this.removeListener(tt.CONNECTOR_EVENTS.CONNECTED,n),this.removeListener(tt.CONNECTOR_EVENTS.AUTHORIZED,n),this.removeListener(my,i),t(e)),i=e=>{if(!e&&!n_.CONNECTED_STATUSES.includes(this.status))return this.removeListener(tt.CONNECTOR_EVENTS.CONNECTED,n),this.removeListener(tt.CONNECTOR_EVENTS.ERRORED,r),this.removeListener(tt.CONNECTOR_EVENTS.AUTHORIZED,n),t(Error("User closed the modal"))};this.coreOptions.initialAuthenticationMode===tt.CONNECTOR_INITIAL_AUTHENTICATION_MODE.CONNECT_AND_SIGN?this.once(tt.CONNECTOR_EVENTS.AUTHORIZED,n):this.once(tt.CONNECTOR_EVENTS.CONNECTED,n),this.once(tt.CONNECTOR_EVENTS.ERRORED,r),this.once(my,i)}))}initUIConfig(e){super.initUIConfig(e),this.options.uiConfig=(0,e9.default)(nA(e.whitelabel||{}),this.options.uiConfig||{}),this.options.uiConfig.defaultLanguage||(this.options.uiConfig.defaultLanguage=m1(this.options.uiConfig.defaultLanguage)),this.options.uiConfig.mode||(this.options.uiConfig.mode="light"),this.options.uiConfig=(0,e9.default)(e.loginModal||{},this.options.uiConfig,{arrayMerge:(e,t)=>t});let t=e.embeddedWalletAuth.filter(e=>e.isDefault).map(e=>e.authConnection),n=[...this.options.uiConfig.loginMethodsOrder||[],...t],r=[],i=new Set;for(let e of n)i.has(e)||(i.add(e),r.push(e));this.options.uiConfig.loginMethodsOrder=r}getInitializationTrackData(){var e,t,n,r,i,a,o,s,l,c,d,u,h,f,p,g,m;return(0,eD.default)((0,eD.default)({},super.getInitializationTrackData()),{},{modal_hide_wallet_discovery:null==(e=this.modalConfig)?void 0:e.hideWalletDiscovery,modal_connectors:Object.keys((null==(t=this.modalConfig)?void 0:t.connectors)||{}),modal_auth_connector_login_methods:Object.keys((null==(n=this.modalConfig)||null==(n=n.connectors)||null==(n=n[eR.WALLET_CONNECTORS.AUTH])?void 0:n.loginMethods)||{}),ui_login_methods_order:null==(r=this.options.uiConfig)?void 0:r.loginMethodsOrder,ui_modal_z_index:null==(i=this.options.uiConfig)?void 0:i.modalZIndex,ui_display_errors_on_modal:null==(a=this.options.uiConfig)?void 0:a.displayErrorsOnModal,ui_login_grid_col:null==(o=this.options.uiConfig)?void 0:o.loginGridCol,ui_primary_button:null==(s=this.options.uiConfig)?void 0:s.primaryButton,ui_modal_widget_type:null==(l=this.options.uiConfig)?void 0:l.widgetType,ui_modal_target_id_used:!!(null==(c=this.options.uiConfig)?void 0:c.targetId),ui_modal_logo_alignment:null==(d=this.options.uiConfig)?void 0:d.logoAlignment,ui_modal_border_radius_type:null==(u=this.options.uiConfig)?void 0:u.borderRadiusType,ui_modal_button_radius_type:null==(h=this.options.uiConfig)?void 0:h.buttonRadiusType,ui_modal_sign_in_methods:null==(f=this.options.uiConfig)?void 0:f.signInMethods,ui_modal_add_previous_login_hint:null==(p=this.options.uiConfig)?void 0:p.addPreviousLoginHint,ui_modal_display_installed_external_wallets:null==(g=this.options.uiConfig)?void 0:g.displayInstalledExternalWallets,ui_modal_display_external_wallets_count:null==(m=this.options.uiConfig)?void 0:m.displayExternalWalletsCount})}filterWalletRegistry(e,t){let{disableAllRecommendedWallets:n,disableAllOtherWallets:r,disabledWallets:i}=t.externalWalletAuth||{},a=new Set(i||[]);n&&Object.keys(e.default).forEach(e=>a.add(e)),r&&Object.keys(e.others).forEach(e=>a.add(e)),a.delete(eR.WALLET_CONNECTORS.METAMASK);let o=nA(e);return a.forEach(e=>{delete o.default[e],delete o.others[e]}),{disabledExternalWallets:a,filteredWalletRegistry:o}}async getProjectAndWalletConfig(){var e,t;let[n,r]=await Promise.allSettled([(0,tn.fetchProjectConfig)({clientId:this.options.clientId,web3AuthNetwork:this.options.web3AuthNetwork,aaProvider:null==(e=this.options.accountAbstractionConfig)?void 0:e.smartAccountType,authBuildEnv:this.options.authBuildEnv}),(0,tn.fetchWalletRegistry)(e7.WALLET_REGISTRY_URL)]);if("rejected"===n.status){let e=await (0,eU.serializeError)(n.reason);throw nS.log.error("Failed to fetch project configurations",e),nx.WalletInitializationError.notReady("failed to fetch project configurations",e)}let i=n.value,a={others:{},default:{}};return i.externalWalletAuth&&!(null!=(t=this.modalConfig)&&t.hideWalletDiscovery)&&("fulfilled"===r.status?a=r.value:nS.log.error("Failed to fetch wallet registry",r.reason)),{projectConfig:i,walletRegistry:a}}async initConnectors({connectors:e,projectConfig:t,disabledExternalWallets:n}){let r=await this.filterConnectors({projectConfig:t,disabledExternalWallets:n}),{hasInAppConnectors:i,hasExternalConnectors:a}=await this.checkConnectorAvailability(r),o=e.filter(e=>r.includes(e.name));await this.initInAppAndCachedConnectors(o),a&&(i?(this.loginModal.initExternalWalletContainer(),this.initExternalConnectors(o.filter(e=>e.type===tt.CONNECTOR_CATEGORY.EXTERNAL&&e.name!==eR.WALLET_CONNECTORS.WALLET_CONNECT_V2),{externalWalletsInitialized:!1,showExternalWalletsOnly:!1,externalWalletsVisibility:!1})):await this.initExternalConnectors(o.filter(e=>e.type===tt.CONNECTOR_CATEGORY.EXTERNAL),{externalWalletsInitialized:!0,showExternalWalletsOnly:!0,externalWalletsVisibility:!0})),this.status===tt.CONNECTOR_STATUS.NOT_READY&&(this.status=tt.CONNECTOR_STATUS.READY,this.emit(tt.CONNECTOR_EVENTS.READY))}async filterConnectors({projectConfig:e,disabledExternalWallets:t}){var n;let r={},i=new Map;for(let t of e.embeddedWalletAuth||[]){let{isDefault:e,authConnection:n,groupedAuthConnectionId:a,authConnectionId:o}=t;e&&(r[n]={name:mm[n],authConnection:n,authConnectionId:o,groupedAuthConnectionId:a,extraLoginOptions:t.jwtParameters,isDefault:!0,showOnModal:!0});let s=this.getCombinedConnectionId(o,a);i.set(s,t)}let a={[eR.WALLET_CONNECTORS.AUTH]:{label:eR.WALLET_CONNECTORS.AUTH,loginMethods:r}};null!=(n=this.modalConfig)&&null!=(n=n.connectors)&&n[eR.WALLET_CONNECTORS.AUTH]&&!this.modalConfig.connectors[eR.WALLET_CONNECTORS.AUTH].loginMethods&&(this.modalConfig.connectors[eR.WALLET_CONNECTORS.AUTH].loginMethods={});let o=new Set(mg);return Object.keys(this.modalConfig.connectors[eR.WALLET_CONNECTORS.AUTH].loginMethods).forEach(e=>{let t=this.modalConfig.connectors[eR.WALLET_CONNECTORS.AUTH].loginMethods[e],{authConnectionId:n,groupedAuthConnectionId:r}=t;if(!o.has(e))throw nx.WalletInitializationError.invalidParams(`Invalid auth connection: ${e}`);if(r||n){let a=this.getCombinedConnectionId(n,r);if(!i.has(a))throw nx.WalletInitializationError.invalidParams(`Invalid auth connection config, authConnection: ${e}. Missing AuthConnectionConfig from the dashboard.`);let o=i.get(a);this.modalConfig.connectors[eR.WALLET_CONNECTORS.AUTH].loginMethods[e]=(0,eD.default)((0,eD.default)({},t),{},{authConnection:o.authConnection,authConnectionId:o.authConnectionId,groupedAuthConnectionId:o.groupedAuthConnectionId,isDefault:o.isDefault||!1,extraLoginOptions:(0,eD.default)((0,eD.default)({},o.jwtParameters),t.extraLoginOptions)})}}),this.modalConfig.connectors=(0,e9.default)(a,nA(this.modalConfig.connectors||{})),[...new Set([...Object.keys(this.modalConfig.connectors||{}),...this.connectors.map(e=>e.name)])].map(n=>{var r,i,a,o;let s={label:eR.CONNECTOR_NAMES[n]||n.split("-").map(mf).join(" "),showOnModal:!0};this.modalConfig.connectors[n]=(0,eD.default)((0,eD.default)({},s),(null==(r=this.modalConfig)||null==(r=r.connectors)?void 0:r[n])||{});let l=this.getConnector(n);nS.log.debug("connector config",n,null==(i=this.modalConfig.connectors)||null==(i=i[n])?void 0:i.showOnModal,l);let c=null==(a=this.modalConfig.connectors)?void 0:a[n];if(!l){if(c.showOnModal)throw nx.WalletInitializationError.invalidParams(`Connector ${n} is not configured`);return}if(!c.showOnModal)return;let d=!!e.externalWalletAuth;if(!(l.type===tt.CONNECTOR_CATEGORY.EXTERNAL&&l.name!==eR.WALLET_CONNECTORS.METAMASK&&(!d||t.has(n)))){if(n!==eR.WALLET_CONNECTORS.WALLET_CONNECT_V2||d&&(null==(o=this.modalConfig)||!o.hideWalletDiscovery))return this.modalConfig.connectors[n]=c,n}}).filter(e=>void 0!==e)}async checkConnectorAvailability(e){let t=this.connectors.some(e=>{var t,n;return e.type===tt.CONNECTOR_CATEGORY.IN_APP&&(null==(t=this.modalConfig.connectors)||null==(t=t[e.name])?void 0:t.showOnModal)===!0&&!!(!(null!=(n=this.modalConfig.connectors)&&null!=(n=n[e.name])&&n.loginMethods)||Object.values(this.modalConfig.connectors[e.name].loginMethods).some(e=>e.showOnModal))});return nS.log.debug(t,this.connectors,e,"hasInAppWallets"),{hasInAppConnectors:t,hasExternalConnectors:e.some(e=>{var t,n;return e===eR.WALLET_CONNECTORS.WALLET_CONNECT_V2||(null==(t=this.getConnector(e))?void 0:t.type)===tt.CONNECTOR_CATEGORY.EXTERNAL&&(null==(n=this.modalConfig.connectors)||null==(n=n[e])?void 0:n.showOnModal)})}}async initInAppAndCachedConnectors(e){await Promise.all(e.map(async e=>{let t=e.name;try{if(e.status!==tt.CONNECTOR_STATUS.NOT_READY||this.cachedConnector!==t&&e.type===tt.CONNECTOR_CATEGORY.EXTERNAL)return;this.subscribeToConnectorEvents(e);let o=this.getInitialChainIdForConnector(e),s=super.checkIfAutoConnect(e);if(await e.init({autoConnect:s,chainId:o.chainId,getIdentityToken:this.options.initialAuthenticationMode===tt.CONNECTOR_INITIAL_AUTHENTICATION_MODE.CONNECT_AND_SIGN}),e.type===tt.CONNECTOR_CATEGORY.IN_APP){var n,r,i,a;nS.log.info("connectorInitResults",t);let e=(null==(n=this.modalConfig.connectors[t])?void 0:n.loginMethods)||{};this.loginModal.addSocialLogins(t,e,(null==(r=this.options.uiConfig)?void 0:r.loginMethodsOrder)||mg,(0,eD.default)((0,eD.default)({},this.options.uiConfig),{},{loginGridCol:(null==(i=this.options.uiConfig)?void 0:i.loginGridCol)||3,primaryButton:(null==(a=this.options.uiConfig)?void 0:a.primaryButton)||"socialLogin"}))}}catch(e){nS.log.error(e,"error while initializing connector ",t)}}))}async initExternalConnectors(e,t){let n={},r={};e.forEach(async e=>{let i=e.name;if(nS.log.debug("init external wallet",this.cachedConnector,i,e.status),r[i]||(r[i]=new Set),e.connectorNamespace===nC.CONNECTOR_NAMESPACES.MULTICHAIN?this.getChainNamespaces().forEach(e=>r[i].add(e)):r[i].add(e.connectorNamespace),e.status===tt.CONNECTOR_STATUS.NOT_READY&&this.cachedConnector!==i)try{this.subscribeToConnectorEvents(e);let t=this.getInitialChainIdForConnector(e);await e.init({autoConnect:this.cachedConnector===i,chainId:t.chainId,getIdentityToken:this.options.initialAuthenticationMode===tt.CONNECTOR_INITIAL_AUTHENTICATION_MODE.CONNECT_AND_SIGN})}catch(e){nS.log.error(e,"error while initializing connector",i)}if([tt.CONNECTOR_STATUS.NOT_READY,tt.CONNECTOR_STATUS.READY,tt.CONNECTOR_STATUS.CONNECTING,tt.CONNECTOR_STATUS.CONNECTED,tt.CONNECTOR_STATUS.AUTHORIZING,tt.CONNECTOR_STATUS.AUTHORIZED].includes(e.status)){let a=this.modalConfig.connectors[i];n[i]=(0,eD.default)((0,eD.default)({},a),{},{isInjected:e.isInjected,icon:e.icon,chainNamespaces:Array.from(r[i])}),this.loginModal.addWalletLogins(n,{showExternalWalletsOnly:!!t.showExternalWalletsOnly,externalWalletsVisibility:!!t.externalWalletsVisibility,externalWalletsInitialized:!!t.externalWalletsInitialized})}})}getCombinedConnectionId(e,t){let n=e;return t&&(n=`${t}_${e}`),n}}let vr="solana",vi={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},va={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};vi.MAINNET,vi.TESTNET,vi.CYAN,vi.AQUA,vi.CELESTE,vi.AQUA,va.SAPPHIRE_MAINNET,vi.CELESTE,va.SAPPHIRE_MAINNET,vi.CYAN,va.SAPPHIRE_MAINNET,vi.MAINNET,va.SAPPHIRE_MAINNET,vi.TESTNET,va.SAPPHIRE_DEVNET,vi.MAINNET,vi.TESTNET,vi.CYAN,vi.AQUA,vi.CELESTE,va.SAPPHIRE_MAINNET,va.SAPPHIRE_DEVNET,vi.MAINNET,vi.TESTNET,vi.CYAN,vi.AQUA,vi.CELESTE,vi.MAINNET,vi.TESTNET,vi.CYAN,vi.AQUA,vi.CELESTE;let vo=(0,eD.default)((0,eD.default)({},va),vi);var vs=e.i(84723);let vl=-32600,vc=-32601,vd=-32602,vu=-32603,vh={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},vf=vu;function vp(e){return Number.isInteger(e)}function vg(e){return"string"==typeof e&&e.length>0}function vm(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function vw(e){return!!e&&!!vp(e.code)&&!!vg(e.message)&&(!e.stack||!!vg(e.stack))}function vy(e,t="Unspecified error message. This is a bug, please report it."){if(vp(e)){let t=e.toString();if(Object.hasOwn(vh,t))return vh[t].message;if(e>=-32099&&e<=-32e3)return"Unspecified server error."}return t}let vv={code:vf,message:vy(vf)};function vb(e){try{JSON.parse(JSON.stringify(e,(e,t)=>{if("__proto__"===e||"constructor"===e||"function"==typeof t||"symbol"==typeof t)throw Error("Not valid json");return t}),(e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t})}catch(e){return!1}return!0}function vE(e){return Object.getOwnPropertyNames(e).reduce((t,n)=>{let r=e[n];return vb(r)&&(t[n]=r),t},{})}function vC(e){return Array.isArray(e)?e.map(e=>vb(e)?e:vm(e)?vE(e):null):vm(e)?vE(e):vb(e)?e:null}function vx(e,{fallbackError:t=vv,shouldIncludeStack:n=!0}={}){if(!vw(t))throw Error("Must provide fallback error with integer number code and string message.");let r=function(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if(vw(e))return e;let n=vC(e);return(0,eD.default)((0,eD.default)({},t),{},{data:{cause:n}})}(e,t);return n||delete r.stack,r}function vS(e,t){if("[Circular]"!==t)return t}class v_ extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw Error('"message" must be a non-empty string.');!function(e){return vm(e)&&Object.hasOwn(e,"cause")&&vm(e.cause)}(n)?(super(t),(0,ej.default)(this,"cause",void 0),(0,ej.default)(this,"code",void 0),(0,ej.default)(this,"data",void 0)):(super(t,{cause:n.cause}),(0,ej.default)(this,"cause",void 0),(0,ej.default)(this,"code",void 0),(0,ej.default)(this,"data",void 0),Object.hasOwn(this,"cause")||Object.assign(this,{cause:n.cause})),void 0!==n&&(this.data=n),this.code=e,this.cause=null==n?void 0:n.cause}serialize(){let e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}}(this.data)&&(e.data.cause=vC(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return(0,vs.default)(this.serialize(),{replacer:vS,space:2})}}class vA extends v_{constructor(e,t,n){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,n)}}function vT(e){if(e){if("string"==typeof e)return[e];else if("object"==typeof e&&!Array.isArray(e)){let{message:t,data:n}=e;if(t&&"string"!=typeof t)throw Error("Must specify string message.");return[null!=t?t:void 0,n]}}return[]}function vI(e,t){let[n,r]=vT(t);return new v_(e,null!=n?n:vy(e),r)}let vN=e=>vI(vc,e),vO=e=>vI(vu,e),vk=e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Error("Ethereum Provider custom errors must provide single object argument.");let{code:t,message:n,data:r}=e;if(!n||"string"!=typeof n)throw Error('"message" must be a nonempty string');return new vA(t,n,r)};var vM=e.i(63394);let vP=vM.default.lowlevel;e.i(56227);let vR=eV.default.getLogger("auth");vR.setLevel("error");var vL=tG;function vD(e,t,n){try{Reflect.apply(e,t,n)}catch(e){setTimeout(()=>{throw e})}}class vj extends vL.EventEmitter{emit(e,...t){let n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;let n=Error(`Unhandled error.${e?` (${e.message})`:""}`);throw n.context=e,n}let i=r[e];if(void 0===i)return!1;if("function"==typeof i)vD(i,this,t);else{let e=i.length,n=function(e){let t=e.length,n=Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}(i);for(let r=0;r<e;r+=1)vD(n[r],this,t)}return!0}}class vU extends Error{constructor({code:e,message:t,data:n}){if(!Number.isInteger(e))throw Error("code must be an integer");if(!t||"string"!=typeof t)throw Error("message must be string");super(t),(0,ej.default)(this,"code",void 0),(0,ej.default)(this,"data",void 0),this.code=e,void 0!==n&&(this.data=n)}toString(){return(0,vs.default)({code:this.code,message:this.message,data:this.data,stack:this.stack})}}function vB(e){let{message:t="",code:n=-32603,stack:r="Stack trace is not available.",data:i=""}=e,a=parseInt((null==n?void 0:n.toString())||"-32603");return{message:t||(null==e?void 0:e.toString())||vy(a),code:a,stack:r,data:i||t||(null==e?void 0:e.toString())}}class v$ extends vj{constructor(){super(),(0,ej.default)(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,n){let r=[],i=null,a=!1;for(let o of n)if([i,a]=await v$._runMiddleware(e,t,o,r),a)break;return[i,a,r.reverse()]}static _runMiddleware(e,t,n,r){return new Promise(i=>{let a=e=>{let n=e||t.error;n&&("object"==typeof n&&!1===Object.keys(n).includes("stack")&&(n.stack="Stack trace is not available."),vR.error(n),t.error=vx(n,{shouldIncludeStack:!0,fallbackError:vB(n)})),i([n,!0])};try{n(e,t,e=>{t.error?a(t.error):(e&&("function"!=typeof e&&a(new vU({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),r.push(e)),i([null,!1]))},a)}catch(e){a(e)}})}static async _runReturnHandlers(e){for(let t of e)await new Promise((e,n)=>{t(t=>t?n(t):e())})}static _checkForCompletion(e,t,n){if(!("result"in t)&&!("error"in t))throw new vU({code:-32603,message:"Response has no error or result for request"});if(!n)throw new vU({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,n,r)=>{try{let[i,a,o]=await v$._runAllMiddleware(e,t,this._middleware);if(a)return await v$._runReturnHandlers(o),r(i);return n(async e=>{try{await v$._runReturnHandlers(o)}catch(t){return e(t)}return e()})}catch(e){return r(e)}}}async _handleBatch(e,t){try{let n=await Promise.all(e.map(this._promiseHandle.bind(this)));if(t)return t(null,n);return n}catch(e){if(t)return t(e);throw e}}_promiseHandle(e){return new Promise((t,n)=>{this._handle(e,(e,r)=>{e&&void 0===r?n(e):t(r)}).catch(n)})}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){let e=new vU({code:-32603,message:"request must be plain object"});return t(e,{id:void 0,jsonrpc:"2.0",error:e})}if("string"!=typeof e.method){let n=new vU({code:-32603,message:"method must be string"});return t(n,{id:e.id,jsonrpc:"2.0",error:n})}let n=(0,eD.default)({},e),r={id:n.id,jsonrpc:n.jsonrpc},i=null;try{await this._processRequest(n,r)}catch(e){i=e}return i&&(delete r.result,r.error||("object"==typeof i&&!1===Object.keys(i).includes("stack")&&(i.stack="Stack trace is not available."),vR.error(i),r.error=vx(i,{shouldIncludeStack:!0,fallbackError:vB(i)}))),t(i,r)}async _processRequest(e,t){let[n,r,i]=await v$._runAllMiddleware(e,t,this._middleware);if(v$._checkForCompletion(e,t,r),await v$._runReturnHandlers(i),n)throw n}}function vW(e){let t=new v$;return e.forEach(e=>{t.push(e)}),t.asMiddleware()}var vK=tF;class vH extends vK.CustomError{constructor(e,t,n){super(t),(0,ej.default)(this,"code",void 0),(0,ej.default)(this,"message",void 0),(0,ej.default)(this,"cause",void 0),this.code=e,this.message=t||"",this.cause=n,Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:function(e){let t,n=e.findIndex(e=>e instanceof Error),r=e.findIndex(e=>"string"==typeof e),i=e.findIndex(e=>e&&"object"==typeof e&&"status"in e&&"type"in e);if(-1!==i){let n=e[i];t=Error(`${n.status} ${n.type.toString()} ${n.statusText}`)}else t=-1!==n?e.splice(n,1)[0]:-1!==r?Error(e.splice(r,1)[0]):Error("Unknown error");return[t,e]}([this.cause])}}toString(){return JSON.stringify(this.toJSON())}}class vz extends vH{constructor(e,t,n){super(e,t,n),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e,t="",n){return new vz(e,`${vz.messages[e]}, ${t}`,n)}static notFound(e="",t){return vz.fromCode(5001,e,t)}static notInstalled(e="",t){return vz.fromCode(5002,e,t)}static notReady(e="",t){return vz.fromCode(5003,e,t)}static windowBlocked(e="",t){return vz.fromCode(5004,e,t)}static windowClosed(e="",t){return vz.fromCode(5005,e,t)}static incompatibleChainNameSpace(e="",t){return vz.fromCode(5006,e,t)}static duplicateAdapterError(e="",t){return vz.fromCode(5007,e,t)}static invalidProviderConfigError(e="",t){return vz.fromCode(5008,e,t)}static providerNotReadyError(e="",t){return vz.fromCode(5009,e,t)}static rpcConnectionError(e="",t){return vz.fromCode(5010,e,t)}static invalidParams(e="",t){return vz.fromCode(5011,e,t)}static invalidNetwork(e="",t){return vz.fromCode(5013,e,t)}}(0,ej.default)(vz,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class vF extends vH{constructor(e,t,n){super(e,t,n),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e,t="",n){return new vF(e,`${vF.messages[e]}. ${t}`,n)}static connectionError(e="",t){return vF.fromCode(5111,e,t)}static disconnectionError(e="",t){return vF.fromCode(5112,e,t)}static notConnectedError(e="",t){return vF.fromCode(5113,e,t)}static popupClosed(e="",t){return vF.fromCode(5114,e,t)}static mfaEnabled(e="",t){return vF.fromCode(5115,e,t)}static chainConfigNotAdded(e="",t){return vF.fromCode(5116,e,t)}static unsupportedOperation(e="",t){return vF.fromCode(5117,e,t)}static coreKitKeyNotFound(e="",t){return vF.fromCode(5118,e,t)}static userNotLoggedIn(e="",t){return vF.fromCode(5119,e,t)}}(0,ej.default)(vF,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa",5116:"Chain config has not been added. Please add the chain config before calling switchChain",5117:"Unsupported operation",5118:"useCoreKitKey flag is enabled but coreKitKey is not available",5119:"User not logged in."});class vV extends vH{constructor(e,t,n){super(e,t,n),Object.defineProperty(this,"name",{value:"WalletOperationsError"})}static fromCode(e,t="",n){return new vV(e,`${vV.messages[e]}, ${t}`,n)}static chainIDNotAllowed(e="",t){return vV.fromCode(5201,e,t)}static operationNotAllowed(e="",t){return vV.fromCode(5202,e,t)}static chainNamespaceNotAllowed(e="",t){return vV.fromCode(5203,e,t)}}(0,ej.default)(vV,"messages",{5e3:"Custom",5201:"Provided chainId is not allowed",5202:"This operation is not allowed"});class vq extends vH{constructor(e,t,n){super(e,t,n),Object.defineProperty(this,"name",{value:"WalletProviderError"})}static fromCode(e,t="",n){return new vV(e,`${vq.messages[e]}, ${t}`,n)}static invalidRequestArgs(e="",t){return vV.fromCode(5301,e,t)}static invalidRequestMethod(e="",t){return vV.fromCode(5302,e,t)}static invalidRequestParams(e="",t){return vV.fromCode(5303,e,t)}}(0,ej.default)(vq,"messages",{5e3:"Custom",5301:"Expected a single, non-array, object argument.",5302:"'args.method' must be a non-empty string.",5303:"'args.params' must be an object or array if provided."});class vY extends vj{constructor({config:e={},state:t={}}){super(),(0,ej.default)(this,"defaultConfig",{}),(0,ej.default)(this,"defaultState",{}),(0,ej.default)(this,"disabled",!1),(0,ej.default)(this,"name","BaseController"),(0,ej.default)(this,"initialConfig",void 0),(0,ej.default)(this,"initialState",void 0),(0,ej.default)(this,"internalConfig",this.defaultConfig),(0,ej.default)(this,"internalState",this.defaultState),this.initialState=t,this.initialConfig=e}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,n=!0){if(n)for(let n in this.internalConfig=t?e:Object.assign(this.internalConfig,e),this.internalConfig)void 0!==this.internalConfig[n]&&(this[n]=this.internalConfig[n]);else for(let t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}update(e,t=!1){this.internalState=t?(0,eD.default)({},e):(0,eD.default)((0,eD.default)({},this.internalState),e),this.emit("store",this.internalState)}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}}let vG=()=>!0,vJ=["newListener","removeListener"],vZ=e=>!vJ.includes(e);class vQ extends vY{constructor({config:e,state:t}){if(super({config:e,state:t}),(0,ej.default)(this,"_providerEngineProxy",null),(0,ej.default)(this,"keyExportFlagSetByCode",!1),!e.chainConfig)throw vz.invalidProviderConfigError("Please provide chainConfig");if(!e.chainConfig.chainId)throw vz.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!e.chainConfig.rpcTarget)throw vz.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");"boolean"==typeof e.keyExportEnabled&&(this.keyExportFlagSetByCode=!0),this.defaultState={chainId:"loading"},this.defaultConfig={chainConfig:e.chainConfig,networks:{[e.chainConfig.chainId]:e.chainConfig},keyExportEnabled:"boolean"!=typeof e.keyExportEnabled||e.keyExportEnabled},super.initialize()}get currentChainConfig(){return this.config.chainConfig}get provider(){return this._providerEngineProxy}get chainId(){return this.state.chainId}set provider(e){throw Error("Method not implemented.")}async request(e){var t;if(!e||"object"!=typeof e||Array.isArray(e)){let t;throw t={message:vq.invalidRequestArgs().message,data:(0,eD.default)((0,eD.default)({},e||{}),{},{cause:vq.invalidRequestArgs().message})},vI(vl,t)}let{method:n,params:r}=e;if("string"!=typeof n||0===n.length){let t;throw t={message:vq.invalidRequestMethod().message,data:(0,eD.default)((0,eD.default)({},e||{}),{},{cause:vq.invalidRequestMethod().message})},vI(vl,t)}if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r)){let t;throw t={message:vq.invalidRequestParams().message,data:(0,eD.default)((0,eD.default)({},e||{}),{},{cause:vq.invalidRequestParams().message})},vI(vl,t)}return null==(t=this.provider)?void 0:t.request(e)}sendAsync(e,t){return t?this.send(e,t):this.request(e)}send(e,t){this.request(e).then(e=>t(null,{result:e})).catch(e=>t(e,null))}addChain(e){if(!e.chainId||!e.rpcTarget){let e;throw e="chainId is required",vI(vd,e)}this.configure({networks:(0,eD.default)((0,eD.default)({},this.config.networks),{},{[e.chainId]:e})})}getChainConfig(e){var t;let n=null==(t=this.config.networks)?void 0:t[e];if(!n){let t;throw t=`Chain ${e} is not supported, please add chainConfig for it`,vI(vl,t)}return n}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=function(e,t){let n=vG;if("string"==typeof n&&"skipInternal"===n&&(n=vZ),"function"!=typeof n)throw Error("createEventEmitterProxy - Invalid eventFilter");let r=e,i=e=>{if(r===e)return;let t=r;r=e,t.eventNames().filter(n).forEach(n=>{(void 0!==t.rawListeners?t.rawListeners(n):t.listeners(n)).forEach(t=>{e.on(n,t)})}),t.removeAllListeners()};return new Proxy({},{get:(e,t)=>"setTarget"===t?i:r[t],set:(e,t,n)=>("setTarget"===t?i=n:r[t]=n,!0),has:(e,t)=>"_"!==t[0]&&t in r})}(e)}setKeyExportFlag(e){this.keyExportFlagSetByCode||this.configure({keyExportEnabled:e})}getProviderEngineProxy(){return this._providerEngineProxy}}function vX(e){return async(t,n,r,i)=>{let a,o=new Promise(e=>{a=e}),s=null,l=!1,c=async()=>{l=!0,r(e=>{s=e,a()}),await o};try{await e(t,n,c),l?(await o,s(null)):i(null)}catch(e){s?s(e):i(e)}}}let v0=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function v1(e,t){return vX(async(n,r,i)=>{let{method:a}=n;if(a!==e)return i();if(!t)throw Error(`WalletMiddleware - ${e} not provided`);r.result=await t(n)})}async function v3({privKey:e,keyExportEnabled:t,getProviderEngineProxy:n}){if("string"!=typeof e)throw vz.invalidParams("privKey must be a string");let r=l.Keypair.fromSecretKey(eP.Buffer.from(e,"hex"));return{requestAccounts:async()=>[r.publicKey.toBase58()],getAccounts:async()=>[r.publicKey.toBase58()],getPublicKey:async()=>r.publicKey.toBase58(),getPrivateKey:async()=>{if(!t)throw vk({message:"Private key export is disabled",code:4902});return e},getSecretKey:async()=>W.default.encode(r.secretKey),signTransaction:async e=>{var t;if(!(null!=(t=e.params)&&t.message)){let e;throw e="message",vI(vd,e)}let n=e.params.message;return void 0!==n.version||n instanceof l.VersionedTransaction?n.sign([r]):n.partialSign(r),n},signMessage:async e=>{var t;if(!(null!=(t=e.params)&&t.message)){let e;throw e="message",vI(vd,e)}return vM.default.sign.detached(e.params.message,r.secretKey)},signAndSendTransaction:async e=>{var t;if(!(null!=(t=e.params)&&t.message)){let e;throw e="message",vI(vd,e)}let i=n();if(!i)throw vk({message:"Provider is not initialized",code:4902});let a=e.params.message;return void 0!==a.version||a instanceof l.VersionedTransaction?a.sign([r]):a.partialSign(r),{signature:await i.request({method:"sendTransaction",params:[eP.Buffer.from(a.serialize()).toString("base64"),{encoding:"base64",preflightCommitment:"confirmed"}]})}},signAllTransactions:async e=>{var t,n,i;if(!(null!=(t=e.params)&&t.message)||!(null!=(n=e.params)&&n.message.length)){let e;throw e="message",vI(vd,e)}let a=null==(i=e.params)?void 0:i.message;for(let e of a||[])void 0!==e.version||e instanceof l.VersionedTransaction?e.sign([r]):e.partialSign(r);return a}}}class v2 extends vQ{constructor({config:e,state:t}){super({config:e,state:t}),(0,ej.default)(this,"PROVIDER_CHAIN_NAMESPACE",vr)}async enable(){if(!this.state.privateKey)throw vk({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}getEd25519Key(e){return(function(e){let t;t="string"==typeof e?eP.Buffer.from(e,"hex"):e;let n=new Uint8Array(64),r=[vP.gf(),vP.gf(),vP.gf(),vP.gf()],i=new Uint8Array([...new Uint8Array(t),...new Uint8Array(32)]),a=new Uint8Array(32);vP.crypto_hash(n,i,32),n[0]&=248,n[31]&=127,n[31]|=64,vP.scalarbase(r,n),vP.pack(a,r);for(let e=0;e<32;e+=1)i[e+32]=a[e];return{sk:eP.Buffer.from(i),pk:eP.Buffer.from(a)}})(e).sk.toString("hex").padStart(128,"0")}async setupProvider(e){let t,{chainNamespace:n}=this.config.chainConfig;if(n!==this.PROVIDER_CHAIN_NAMESPACE)throw vz.incompatibleChainNameSpace("Invalid chain namespace");let r=function(e){let{getAccounts:t,requestAccounts:n,signTransaction:r,signAndSendTransaction:i,signAllTransactions:a,signMessage:o,getPrivateKey:s,getSecretKey:l,getPublicKey:c}=e;return vW([function({requestAccounts:e}){return vX(async(t,n,r)=>{let{method:i}=t;if("requestAccounts"!==i)return r();if(!e)throw Error("WalletMiddleware - opts.requestAccounts not provided");n.result=await e(t)})}({requestAccounts:n}),function({getAccounts:e}){return vX(async(t,n,r)=>{let{method:i}=t;if("getAccounts"!==i)return r();if(!e)throw Error("WalletMiddleware - opts.getAccounts not provided");n.result=await e(t)})}({getAccounts:t}),v1("signTransaction",r),v1("signAndSendTransaction",i),v1("signAllTransactions",a),v1("signMessage",o),v1("solanaPrivateKey",s),v1("private_key",s),v1("public_key",c),v1("solanaPublicKey",c),v1("solanaSecretKey",l)])}(await v3({privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this),keyExportEnabled:this.config.keyExportEnabled})),i=new v$,{networkMiddleware:a}=function(e){let{rpcTarget:t}=e,n=function({rpcTarget:e,originHttpHeaderKey:t}){return vX(async(n,r,i)=>{let{fetchUrl:a,fetchParams:o}=function({req:e,rpcTarget:t,originHttpHeaderKey:n}){let r=new URL(t),i={id:e.id,jsonrpc:e.jsonrpc,method:e.method,params:e.params},a=e.origin,o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)};return n&&a&&(o.headers[n]=a),{fetchUrl:r.href,fetchParams:o}}({req:n,rpcTarget:e,originHttpHeaderKey:t});for(let e=0;e<5;e++){try{let e=await fetch(a,o);switch(e.status){case 405:throw vN();case 418:throw vO({message:"Request is being rate limited.",data:{cause:e}});case 503:case 504:throw vO({message:"Gateway timeout. The request took too long to process.This can happen when querying over too wide a block range.",data:{cause:e}})}let t=await e.json();r.result=function(e,t){if(200!==e.status)throw vO({message:`Non-200 status code: '${e.status}'`,data:t});if(t.error){var n;throw vO({data:t.error,message:null==(n=t.error)?void 0:n.message})}return t.result}(e,t);return}catch(t){let e=(t.message||t).toString();if(!v0.some(t=>e.includes(t)))throw t}await new Promise(e=>{setTimeout(e,1e3)})}})}({rpcTarget:t});return{networkMiddleware:vW([function(e){let{chainId:t}=e;return vW([(e,n,r,i)=>"solana_chainId"===e.method?(n.result=t,i()):r(),(t,n,r,i)=>"solana_provider_config"===t.method?(n.result=e,i()):r()])}(e),n]),fetchMiddleware:n}}(this.config.chainConfig);i.push(this.getChainSwitchMiddleware()),i.push(this.getAccountMiddleware()),i.push(r),i.push(a);let o=((t=new vj).sendAsync=async e=>{let t=await i.handle(e);if(t.error)throw"object"==typeof t.error&&!1===Object.keys(t.error).includes("stack")&&(t.error.stack="Stack trace is not available."),vR.error(t.error),vO(vx(t.error,{fallbackError:vB(t.error),shouldIncludeStack:!0}));return t.result},t.send=(e,t)=>{if("function"!=typeof t)throw Error('Must provide callback to "send" method.');i.handle(e,t)},i.on&&i.on("notification",e=>{t.emit("data",null,e)}),t.request=async e=>{let n=(0,eD.default)((0,eD.default)({},e),{},{id:Math.random().toString(36).slice(2),jsonrpc:"2.0"});return await t.sendAsync(n)},t);this.updateProviderEngineProxy(o),await this.lookupNetwork()}async updateAccount(e){if(!this._providerEngineProxy)throw vk({message:"Provider is not initialized",code:4902});if(await this._providerEngineProxy.request({method:"solanaPrivateKey"})!==e.privateKey){await this.setupProvider(e.privateKey);let t=await this._providerEngineProxy.request({method:"requestAccounts"});this.emit("accountsChanged",t)}}async switchChain(e){if(!this._providerEngineProxy)throw vk({message:"Provider is not initialized",code:4902});let t=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:t});let n=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(n)}async lookupNetwork(){if(!this._providerEngineProxy)throw vk({message:"Provider is not initialized",code:4902});let e=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:t}=this.config;if("ok"!==e)throw vz.rpcConnectionError(`Failed to lookup network for following rpc target: ${t.rpcTarget}`);return this.update({chainId:t.chainId}),this.state.chainId!==t.chainId&&(this.emit("chainChanged",this.state.chainId),this.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){return function({addNewChainConfig:e,switchSolanaChain:t}){return vW([v1("addSolanaChain",e),v1("switchSolanaChain",t)])}({addNewChainConfig:async e=>{if(!e.params){let e;throw e="Missing request params",vI(vd,e)}let{chainId:t,chainName:n,rpcUrls:r,blockExplorerUrls:i,nativeCurrency:a,iconUrls:o}=e.params;if(!t){let e;throw e="Missing chainId in chainParams",vI(vd,e)}if(!r||0===r.length){let e;throw e="Missing rpcUrls in chainParams",vI(vd,e)}if(!a){let e;throw e="Missing nativeCurrency in chainParams",vI(vd,e)}this.addChain({chainNamespace:vr,chainId:t,ticker:(null==a?void 0:a.symbol)||"SOL",tickerName:(null==a?void 0:a.name)||"Solana",displayName:n,rpcTarget:r[0],blockExplorerUrl:(null==i?void 0:i[0])||"",decimals:(null==a?void 0:a.decimals)||9,logo:(null==o?void 0:o[0])||"https://images.toruswallet.io/sol.svg"})},switchSolanaChain:async e=>{if(!e.params){let e;throw e="Missing request params",vI(vd,e)}if(!e.params.chainId){let e;throw e="Missing chainId",vI(vd,e)}await this.switchChain(e.params)}})}getAccountMiddleware(){return function({updatePrivatekey:e}){return vW([v1("updateAccount",e)])}({updatePrivatekey:async e=>{if(!e.params){let e;throw e="Missing request params",vI(vd,e)}if(!e.params.privateKey){let e;throw e="Missing privateKey",vI(vd,e)}let{privateKey:t}=e.params;await this.updateAccount({privateKey:t})}})}}(0,ej.default)(v2,"getProviderInstance",async e=>{let t=new v2({config:{chainConfig:e.chainConfig}});return await t.setupProvider(e.privKey),t});class v5 extends g{name="Web3Auth";url="https://web3auth.io";supportedTransactionVersions=new Set(["legacy",0]);icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHJ4PSI4IiBmaWxsPSIjMDM2NEZGIi8+PHBhdGggZD0iTTIwIDEwQzE0LjQ3NyAxMCAxMCAxNC40NzcgMTAgMjBDMTAgMjUuNTIzIDE0LjQ3NyAzMCAyMCAzMEMyNS41MjMgMzAgMzAgMjUuNTIzIDMwIDIwQzMwIDE0LjQ3NyAyNS41MjMgMTAgMjAgMTBaTTIwIDI2QzE2LjY4NiAyNiAxNCAxMy4zMTQgMTQgMjBDMTQgMTYuNjg2IDE2LjY4NiAxNCAyMCAxNEMyMy4zMTQgMTQgMjYgMTYuNjg2IDI2IDIwQzI2IDIzLjMxNCAyMy4zMTQgMjYgMjAgMjZaIiBmaWxsPSJ3aGl0ZSIvPjwvc3ZnPg==";_connecting=!1;_publicKey=null;_web3auth=null;_provider=null;_readyState=u.WalletReadyState.NotDetected;_clientId;constructor(e){super(),this._clientId=e,this._readyState=e?u.WalletReadyState.Loadable:u.WalletReadyState.NotDetected}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._publicKey}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==u.WalletReadyState.Loadable)throw new h.WalletConnectionError("Web3Auth not configured");if(this._connecting=!0,!this._web3auth){let e=new v2({config:{chainConfig:{chainNamespace:vr,chainId:"0x1",rpcTarget:"https://broken-solitary-meme.solana-mainnet.quiknode.pro/5f9aee0d3c7a616d84b7e0b45f66c95c3582051a/",displayName:"Solana Mainnet",blockExplorerUrl:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}}});this._web3auth=new vn({clientId:this._clientId,web3AuthNetwork:vo.SAPPHIRE_MAINNET,privateKeyProvider:e}),await this._web3auth.init()}let e=await this._web3auth.connect();if(!e)throw new h.WalletConnectionError("Failed to connect");this._provider=e;let t=await e.request({method:"getAccounts"});if(!t||0===t.length)throw new h.WalletConnectionError("No accounts found");this._publicKey=new l.PublicKey(t[0]),this._readyState=u.WalletReadyState.Installed,this.emit("connect",this._publicKey)}catch(t){let e=t instanceof h.WalletConnectionError?t:new h.WalletConnectionError(t.message);throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){try{this._web3auth&&await this._web3auth.logout()}catch(t){let e=new h.WalletDisconnectionError(t.message);this.emit("error",e)}finally{this._publicKey=null,this._provider=null,this.emit("disconnect")}}async signTransaction(e){try{let t;if(!this._provider||!this._publicKey)throw new h.WalletNotConnectedError;t=e instanceof l.VersionedTransaction?e.message.serialize():e.serializeMessage();let n=await this._provider.request({method:"signTransaction",params:{message:eP.Buffer.from(t).toString("base64")}});if(!n?.signature)throw new h.WalletSignTransactionError("Failed to sign transaction");let r=eP.Buffer.from(n.signature);return e instanceof l.VersionedTransaction,e.addSignature(this._publicKey,r),e}catch(t){let e=t instanceof h.WalletSignTransactionError?t:new h.WalletSignTransactionError(t.message);throw this.emit("error",e),e}}async signAllTransactions(e){return Promise.all(e.map(e=>this.signTransaction(e)))}async signMessage(e){try{if(!this._provider||!this._publicKey)throw new h.WalletNotConnectedError;let t=await this._provider.request({method:"signMessage",params:{message:eP.Buffer.from(e).toString("base64")}});if(!t?.signature)throw new h.WalletSignTransactionError("Failed to sign message");return new Uint8Array(t.signature)}catch(t){let e=t instanceof h.WalletSignTransactionError?t:new h.WalletSignTransactionError(t.message);throw this.emit("error",e),e}}}let v4=o.default.env.NEXT_PUBLIC_WEB3AUTH_CLIENT_ID||"";function v8({children:e}){let t=(0,s.useMemo)(()=>eM.SOLANA_RPC_URL,[]),n=(0,s.useMemo)(()=>{let e=[];return v4&&e.push(new v5(v4)),e},[]);return(0,a.jsx)(d,{endpoint:t,children:(0,a.jsx)(eO,{wallets:n,autoConnect:!0,children:(0,a.jsx)(ek.WalletModalProvider,{children:e})})})}var v6=e.i(19273),v9=e.i(86491),v7=e.i(40143),be=e.i(15823),bt=class extends be.Subscribable{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){let r=t.queryKey,i=t.queryHash??(0,v6.hashQueryKeyByOptions)(r,t),a=this.get(i);return a||(a=new v9.Query({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){v7.notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,v6.matchQuery)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,v6.matchQuery)(e,t)):t}notify(e){v7.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){v7.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){v7.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},bn=e.i(88587),br=e.i(36553),bi=class extends bn.Removable{#t;#n;#r;#i;constructor(e){super(),this.#t=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#n=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#n.includes(e)||(this.#n.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#n=this.#n.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#n.length||("pending"===this.state.status?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#a({type:"continue"})},n={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=(0,br.createRetryer)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#a({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#a({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});let r="pending"===this.state.status,i=!this.#i.canStart();try{if(r)t();else{this.#a({type:"pending",variables:e,isPaused:i}),await this.#r.config.onMutate?.(e,this,n);let t=await this.options.onMutate?.(e,n);t!==this.state.context&&this.#a({type:"pending",context:t,variables:e,isPaused:i})}let a=await this.#i.start();return await this.#r.config.onSuccess?.(a,e,this.state.context,this,n),await this.options.onSuccess?.(a,e,this.state.context,n),await this.#r.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,e,this.state.context,n),this.#a({type:"success",data:a}),a}catch(t){try{await this.#r.config.onError?.(t,e,this.state.context,this,n)}catch(e){Promise.reject(e)}try{await this.options.onError?.(t,e,this.state.context,n)}catch(e){Promise.reject(e)}try{await this.#r.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,n)}catch(e){Promise.reject(e)}try{await this.options.onSettled?.(void 0,t,e,this.state.context,n)}catch(e){Promise.reject(e)}throw this.#a({type:"error",error:t}),t}finally{this.#r.runNext(this)}}#a(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),v7.notifyManager.batch(()=>{this.#n.forEach(t=>{t.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}},ba=be,bo=class extends ba.Subscribable{constructor(e={}){super(),this.config=e,this.#o=new Set,this.#s=new Map,this.#l=0}#o;#s;#l;build(e,t,n){let r=new bi({client:e,mutationCache:this,mutationId:++this.#l,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#o.add(e);let t=bs(e);if("string"==typeof t){let n=this.#s.get(t);n?n.push(e):this.#s.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#o.delete(e)){let t=bs(e);if("string"==typeof t){let n=this.#s.get(t);if(n)if(n.length>1){let t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#s.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=bs(e);if("string"!=typeof t)return!0;{let n=this.#s.get(t),r=n?.find(e=>"pending"===e.state.status);return!r||r===e}}runNext(e){let t=bs(e);if("string"!=typeof t)return Promise.resolve();{let n=this.#s.get(t)?.find(t=>t!==e&&t.state.isPaused);return n?.continue()??Promise.resolve()}}clear(){v7.notifyManager.batch(()=>{this.#o.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#o.clear(),this.#s.clear()})}getAll(){return Array.from(this.#o)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,v6.matchMutation)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,v6.matchMutation)(e,t))}notify(e){v7.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return v7.notifyManager.batch(()=>Promise.all(e.map(e=>e.continue().catch(v6.noop))))}};function bs(e){return e.options.scope?.id}var bl=e.i(75555),bc=e.i(14448);function bd(e){return{onFetch:(t,n)=>{let r=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],o=t.state.data?.pageParams||[],s={pages:[],pageParams:[]},l=0,c=async()=>{let n=!1,c=(0,v6.ensureQueryFn)(t.options,t.fetchOptions),d=async(e,r,i)=>{let a;if(n)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);let o=(a={client:t.client,queryKey:t.queryKey,pageParam:r,direction:i?"backward":"forward",meta:t.options.meta},(0,v6.addConsumeAwareSignal)(a,()=>t.signal,()=>n=!0),a),s=await c(o),{maxPages:l}=t.options,d=i?v6.addToStart:v6.addToEnd;return{pages:d(e.pages,s,l),pageParams:d(e.pageParams,r,l)}};if(i&&a.length){let e="backward"===i,t={pages:a,pageParams:o},n=(e?function(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}:bu)(r,t);s=await d(t,n,e)}else{let t=e??a.length;do{let e=0===l?o[0]??r.initialPageParam:bu(r,s);if(l>0&&null==e)break;s=await d(s,e),l++}while(l<t)}return s};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=c}}}function bu(e,{pages:t,pageParams:n}){let r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}var bh=class{#c;#r;#d;#u;#h;#f;#p;#g;constructor(e={}){this.#c=e.queryCache||new bt,this.#r=e.mutationCache||new bo,this.#d=e.defaultOptions||{},this.#u=new Map,this.#h=new Map,this.#f=0}mount(){this.#f++,1===this.#f&&(this.#p=bl.focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#c.onFocus())}),this.#g=bc.onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#c.onOnline())}))}unmount(){this.#f--,0===this.#f&&(this.#p?.(),this.#p=void 0,this.#g?.(),this.#g=void 0)}isFetching(e){return this.#c.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#r.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#c.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),n=this.#c.build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime((0,v6.resolveStaleTime)(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#c.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){let r=this.defaultQueryOptions({queryKey:e}),i=this.#c.get(r.queryHash),a=i?.state.data,o=(0,v6.functionalUpdate)(t,a);if(void 0!==o)return this.#c.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return v7.notifyManager.batch(()=>this.#c.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#c.get(t.queryHash)?.state}removeQueries(e){let t=this.#c;v7.notifyManager.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let n=this.#c;return v7.notifyManager.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let n={revert:!0,...t};return Promise.all(v7.notifyManager.batch(()=>this.#c.findAll(e).map(e=>e.cancel(n)))).then(v6.noop).catch(v6.noop)}invalidateQueries(e,t={}){return v7.notifyManager.batch(()=>(this.#c.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let n={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(v7.notifyManager.batch(()=>this.#c.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(v6.noop)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(v6.noop)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let n=this.#c.build(this,t);return n.isStaleByTime((0,v6.resolveStaleTime)(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(v6.noop).catch(v6.noop)}fetchInfiniteQuery(e){return e.behavior=bd(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(v6.noop).catch(v6.noop)}ensureInfiniteQueryData(e){return e.behavior=bd(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return bc.onlineManager.isOnline()?this.#r.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#c}getMutationCache(){return this.#r}getDefaultOptions(){return this.#d}setDefaultOptions(e){this.#d=e}setQueryDefaults(e,t){this.#u.set((0,v6.hashKey)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#u.values()],n={};return t.forEach(t=>{(0,v6.partialMatchKey)(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){this.#h.set((0,v6.hashKey)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#h.values()],n={};return t.forEach(t=>{(0,v6.partialMatchKey)(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#d.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,v6.hashQueryKeyByOptions)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===v6.skipToken&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#d.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#c.clear(),this.#r.clear()}},bf=e.i(12598);function bp({children:e}){let[t]=(0,s.useState)(()=>new bh({defaultOptions:{queries:{staleTime:3e4,retry:2,refetchOnWindowFocus:!1}}}));return(0,a.jsx)(bf.QueryClientProvider,{client:t,children:e})}function bg({children:e}){return(0,a.jsx)(bp,{children:(0,a.jsx)(v8,{children:e})})}e.s(["Providers",()=>bg],37997)},67585,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"BailoutToCSR",{enumerable:!0,get:function(){return i}});let r=e.r(32061);function i({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new r.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,n)=>{"use strict";function r(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"encodeURIPath",{enumerable:!0,get:function(){return r}})},52157,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"PreloadChunks",{enumerable:!0,get:function(){return l}});let r=e.r(43476),i=e.r(74080),a=e.r(63599),o=e.r(9885),s=e.r(43369);function l({moduleIds:e}){if("undefined"!=typeof window)return null;let t=a.workAsyncStorage.getStore();if(void 0===t)return null;let n=[];if(t.reactLoadableManifest&&e){let r=t.reactLoadableManifest;for(let t of e){if(!r[t])continue;let e=r[t].files;n.push(...e)}}if(0===n.length)return null;let l=(0,s.getDeploymentIdQueryOrEmptyString)();return(0,r.jsx)(r.Fragment,{children:n.map(e=>{let n=`${t.assetPrefix}/_next/${(0,o.encodeURIPath)(e)}${l}`;return e.endsWith(".css")?(0,r.jsx)("link",{precedence:"dynamic",href:n,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,i.preload)(n,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return c}});let r=e.r(43476),i=e.r(71645),a=e.r(67585),o=e.r(52157);function s(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},n=(0,i.lazy)(()=>t.loader().then(s)),c=t.loading;function d(e){let s=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,d=l?i.Suspense:i.Fragment,u=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(o.PreloadChunks,{moduleIds:t.modules}):null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(d,{...l?{fallback:s}:{},children:u})}return d.displayName="LoadableComponent",d}},70703,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return i}});let r=e.r(55682)._(e.r(69093));function i(e,t){let n={};"function"==typeof e&&(n.loader=e);let i={...n,...t};return(0,r.default)({...i,modules:i.loadableGenerated?.modules})}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},3374,e=>{"use strict";var t=e.i(43476),n=e.i(18143);let r=(0,e.i(70703).default)(()=>e.A(53036).then(e=>e.WalletMultiButton),{loadableGenerated:{modules:[32211]},ssr:!1});function i(){return(0,t.jsx)(r,{})}function a(){return(0,t.jsx)("header",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-surface-200",children:(0,t.jsxs)("div",{className:"max-w-lg mx-auto px-4 h-14 flex items-center justify-between",children:[(0,t.jsx)(n.default,{href:"/",className:"text-xl font-bold text-primary-600",children:"xStocks"}),(0,t.jsx)(i,{})]})})}e.s(["Header",()=>a],3374)},44065,e=>{"use strict";var t=e.i(43476),n=e.i(18143),r=e.i(18566),i=e.i(49838);let a=[{href:"/",label:"Home",icon:e=>(0,t.jsx)("svg",{className:(0,i.cn)("w-6 h-6",e?"text-primary-600":"text-surface-500"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{href:"/invest",label:"Invest",icon:e=>(0,t.jsx)("svg",{className:(0,i.cn)("w-6 h-6",e?"text-primary-600":"text-surface-500"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})},{href:"/ai-advisor",label:"AI Advisor",icon:e=>(0,t.jsx)("svg",{className:(0,i.cn)("w-6 h-6",e?"text-primary-600":"text-surface-500"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}];function o(){let e=(0,r.usePathname)();return(0,t.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-surface-200 pb-safe",children:(0,t.jsx)("div",{className:"flex items-center justify-around h-16 max-w-lg mx-auto",children:a.map(r=>{let a=e===r.href;return(0,t.jsxs)(n.default,{href:r.href,className:"flex flex-col items-center justify-center flex-1 h-full",children:[r.icon(a),(0,t.jsx)("span",{className:(0,i.cn)("text-xs mt-1",a?"text-primary-600 font-medium":"text-surface-500"),children:r.label})]},r.href)})})})}e.s(["BottomNav",()=>o])}]);