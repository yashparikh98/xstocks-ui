(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35354,e=>{"use strict";e.s([],56530),e.i(56530);var t=e.i(9428),a=e.i(11577),r=e.i(76245),s=e.i(71488),i=e.i(4521),n=e.i(38463),o=e.i(9682),c=e.i(10163),l=e.i(57159),d=e.i(11347),u=e.i(44603),p=e.i(39426),m=e.i(3589);async function h({eoaProvider:e,handlers:a}){let[s]=await e.request({method:r.METHOD_TYPES.GET_ACCOUNTS});async function n(e,t){if("string"==typeof e&&e.length>0){let r=(await a.getAccounts(t)).map(e=>e.toLowerCase()),s=e.toLowerCase();if(r.includes(s))return s}throw i.rpcErrors.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}async function o(e,t){if(e.toLowerCase()===s.toLowerCase())return s;let[r]=await a.getAccounts(t);if(e.toLowerCase()===r.toLowerCase())return s;throw i.rpcErrors.invalidParams({message:"Invalid parameters: must provide valid sender address."})}async function c(e,t){t.result=await a.getAccounts(e)}async function l(e,t){if(!a.getPrivateKey)throw i.rpcErrors.methodNotSupported();t.result=await a.getPrivateKey(e)}async function d(e,t){if(!a.processTransaction)throw i.rpcErrors.methodNotSupported();let r=e.params[0]||{from:""};r.from=await n(r.from,e),t.result=a.processTransaction(r,e)}async function u(e,t){let r=e.params[0]||{from:""};r.from&&(r.from=await o(r.from,e)),t.result=await a.processSignTransaction(r,e)}async function p(e,r){let s=e.params,i=e.params[2]||{};if(Array.isArray(e.params)){if(2!==e.params.length)throw Error(`WalletMiddleware - incorrect params for ${e.method} method. expected [address, message]`);let t=e.params;s={from:t[0],data:t[1]}}s=(0,t.default)((0,t.default)({},i),s),r.result=await a.processEthSignMessage(s,e)}async function h(e,t){if(!(null!=e&&e.params))throw Error("WalletMiddleware - missing params");let r=e.params;if(Array.isArray(e.params)){if(2!==e.params.length)throw Error(`WalletMiddleware - incorrect params for ${e.method} method. expected [address, typedData]`);let t=e.params;r={from:t[0],data:t[1]}}t.result=await a.processTypedMessageV4(r,e)}async function f(e,r){let s=e.params,i=e.params[2]||{};if(Array.isArray(e.params)){if(!(e.params.length>=2))throw Error(`WalletMiddleware - incorrect params for ${e.method} method. expected [message, address]`);let t=e.params;if("object"==typeof t[0]){let{challenge:e,address:a}=t[0];s={from:a,data:e}}else{let e=t[0];s={from:t[1],data:e}}}s=(0,t.default)((0,t.default)({},i),s),r.result=await a.processPersonalMessage(s,e)}async function y(e,t){if(!a.getPublicKey)throw i.rpcErrors.methodNotSupported();t.result=await a.getPublicKey(e)}return(0,m.createScaffoldMiddleware)({eth_accounts:(0,m.createAsyncMiddleware)(c),eth_requestAccounts:(0,m.createAsyncMiddleware)(c),eth_private_key:(0,m.createAsyncMiddleware)(l),private_key:(0,m.createAsyncMiddleware)(l),eth_public_key:(0,m.createAsyncMiddleware)(y),public_key:(0,m.createAsyncMiddleware)(y),eth_sendTransaction:(0,m.createAsyncMiddleware)(d),eth_signTransaction:(0,m.createAsyncMiddleware)(u),eth_sign:(0,m.createAsyncMiddleware)(p),eth_signTypedData_v4:(0,m.createAsyncMiddleware)(h),personal_sign:(0,m.createAsyncMiddleware)(f)})}async function f({aaProvider:e}){async function t(t,a){let[,s]=await e.request({method:r.METHOD_TYPES.GET_ACCOUNTS});a.result=[s]}async function a(t,a){let[,s]=await e.request({method:r.METHOD_TYPES.ETH_REQUEST_ACCOUNTS});a.result=[s]}return(0,m.createScaffoldMiddleware)({eth_accounts:(0,m.createAsyncMiddleware)(t),eth_requestAccounts:(0,m.createAsyncMiddleware)(a)})}function y(e){return async(t,a,r,s)=>{try{return a.result=await e.request(t),s()}catch(e){return s(e)}}}e.i(52537);var w=e.i(99240),A=e.i(70459),g=e.i(11810),v=e.i(61690),C=e.i(79383),P=e.i(69146);class E extends v.BaseProvider{constructor({config:e,state:t}){super({config:e,state:t}),(0,a.default)(this,"PROVIDER_CHAIN_NAMESPACE",C.CHAIN_NAMESPACES.EIP155),(0,a.default)(this,"_smartAccount",void 0),(0,a.default)(this,"_publicClient",void 0),(0,a.default)(this,"_bundlerClient",void 0),(0,a.default)(this,"_paymasterClient",void 0),(0,a.default)(this,"_useProviderAsTransport",void 0),this.update({chainId:e.chain.chainId})}get smartAccount(){return this._smartAccount}get bundlerClient(){return this._bundlerClient}get paymasterClient(){return this._paymasterClient}get publicClient(){return this._publicClient}async enable(){if(!this.state.eoaProvider)throw i.providerErrors.custom({message:"eoaProvider is not found in state, please pass it",code:4902});return await this.setupProvider(this.state.eoaProvider),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(e){var a,m;let{currentChain:f}=this,{chainNamespace:v}=f;if(v!==this.PROVIDER_CHAIN_NAMESPACE)throw P.WalletInitializationError.incompatibleChainNameSpace("Invalid chain namespace");let C=this.config.smartAccountChainsConfig.find(e=>e.chainId===f.chainId);if(!C)throw P.WalletInitializationError.invalidProviderConfigError(`Bundler and paymaster config not found for chain ${f.chainId}`);let{bundlerConfig:E,paymasterConfig:T}=C,_=(0,n.defineChain)({id:Number.parseInt(f.chainId,16),name:f.displayName,rpcUrls:{default:{http:[f.rpcTarget],webSocket:[f.wsTarget]}},blockExplorers:f.blockExplorerUrl?{default:{name:"explorer",url:f.blockExplorerUrl}}:void 0,nativeCurrency:{name:f.tickerName,symbol:f.ticker,decimals:f.decimals||18}});this._publicClient=(0,o.createPublicClient)({chain:_,transport:(0,c.http)(f.rpcTarget)});let[S]=await e.request({method:r.METHOD_TYPES.ETH_REQUEST_ACCOUNTS}),M=(0,l.createWalletClient)({account:S,chain:_,transport:(0,d.custom)(e)});this._smartAccount=await this.config.smartAccountInit.getSmartAccount({walletClient:M,client:this._publicClient}),T&&(this._paymasterClient=(0,u.createPaymasterClient)((0,t.default)((0,t.default)({},T),{},{transport:this._useProviderAsTransport?(0,d.custom)(e):null!=(m=T.transport)?m:(0,c.http)(T.url)}))),this._bundlerClient=(0,p.createBundlerClient)((0,t.default)((0,t.default)({},E),{},{account:this.smartAccount,client:this._publicClient,transport:this._useProviderAsTransport?(0,d.custom)(e):null!=(a=E.transport)?a:(0,c.http)(E.url),paymaster:this._paymasterClient}));let b=function({bundlerClient:e,smartAccount:a,chain:r,eoaProvider:s}){let n=(0,l.createWalletClient)({account:a,chain:r,transport:(0,c.http)()});return{getAccounts:async e=>{let[t,r]=await Promise.all([a.getAddress(),s.request({method:"eth_accounts"})]);return g.log.info("smartAccounts",t),g.log.info("eoaAccounts",r),[t,...r]},getPrivateKey:async e=>{throw i.providerErrors.custom({message:"Smart accounts do not have private key",code:4903})},getPublicKey:async e=>{throw i.providerErrors.custom({message:"Smart accounts do not have a public key. Use address instead.",code:4903})},processTransaction:async t=>{t.input&&!t.data&&(t.data=(0,A.addHexPrefix)(t.input));let{to:r,value:s,data:n}=t,o={account:a,calls:[{to:r,value:BigInt(s),data:n}]},c=await e.sendUserOperation(o),l=await e.waitForUserOperationReceipt({hash:c});if(!l.success)throw i.providerErrors.custom({message:l.reason,code:4905});return l.receipt.transactionHash},processSignTransaction:async t=>{let{to:r,value:s,data:i}=t,n=await e.prepareUserOperation({account:a,calls:[{to:r,value:BigInt(s),data:i}]});return await a.signUserOperation({callData:n.callData,callGasLimit:n.callGasLimit,maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas,nonce:n.nonce,preVerificationGas:n.preVerificationGas,verificationGasLimit:n.verificationGasLimit,signature:n.signature})},processEthSignMessage:async(e,t)=>s.request(t),processPersonalMessage:async(e,t)=>{let r=e.data;return n.signMessage({account:a,message:(0,w.isHexString)(r)?{raw:r}:r})},processTypedMessageV4:async(e,r)=>{try{let r="string"==typeof e.data?JSON.parse(e.data):e.data;return await n.signTypedData({account:a,domain:(0,t.default)((0,t.default)({},r.domain),{},{verifyingContract:r.domain.verifyingContract,salt:r.domain.salt,chainId:Number(r.domain.chainId)}),primaryType:r.primaryType,types:r.types,message:r.message})}catch(e){throw i.providerErrors.custom({message:e instanceof Error?e.message:"Failed to sign typed data",code:4905})}}}}({bundlerClient:this._bundlerClient,smartAccount:this._smartAccount,chain:_,eoaProvider:e}),N=new s.JRPCEngine,I=await h({eoaProvider:e,handlers:b});N.push(I);let O=y(e);N.push(O);let k=(0,s.providerFromEngine)(N);this.updateProviderEngineProxy(k),e.once("chainChanged",e=>{this.update({chainId:e}),this.setupChainSwitchMiddleware(),this.emit("chainChanged",e)})}async updateAccount(e){throw i.providerErrors.unsupportedMethod("updateAccount. Please call it on eoaProvider")}async switchChain(e){throw i.providerErrors.unsupportedMethod("switchChain. Please call it on eoaProvider")}async lookupNetwork(){throw i.providerErrors.unsupportedMethod("lookupNetwork. Please call it on eoaProvider")}async setupChainSwitchMiddleware(){return this.setupProvider(this.state.eoaProvider)}}(0,a.default)(E,"getProviderInstance",async e=>{let t=new E({config:e});return t._useProviderAsTransport=e.useProviderAsTransport,await t.setupProvider(e.eoaProvider),t.update({eoaProvider:e.eoaProvider}),t});let T=async({accountAbstractionConfig:t,chain:a,chains:s,provider:i,useProviderAsTransport:n})=>{let o,{smartAccountType:c,chains:l}=t,{smartAccountConfig:d}=l.find(e=>e.chainId===a.chainId)||{};switch(c){case r.SMART_ACCOUNT.BICONOMY:{let{BiconomySmartAccount:t}=await e.A(15709);o=new t(d);break}case r.SMART_ACCOUNT.KERNEL:{let{KernelSmartAccount:t}=await e.A(15709);o=new t(d);break}case r.SMART_ACCOUNT.NEXUS:{let{NexusSmartAccount:t}=await e.A(15709);o=new t(d);break}case r.SMART_ACCOUNT.SAFE:{let{SafeSmartAccount:t}=await e.A(15709);o=new t(d);break}case r.SMART_ACCOUNT.TRUST:{let{TrustSmartAccount:t}=await e.A(15709);o=new t(d);break}case r.SMART_ACCOUNT.METAMASK:{let{MetamaskSmartAccount:t}=await e.A(15709);o=new t(d);break}default:throw Error("Smart account type not supported")}return E.getProviderInstance({eoaProvider:i,smartAccountInit:o,chain:a,chains:s,smartAccountChainsConfig:l,useProviderAsTransport:n})},_=async e=>{let t=new s.JRPCEngine,a=await f({aaProvider:e});return t.push(a),t.push(y(e)),(0,s.providerFromEngine)(t)};var S=e.i(95310),M=e.i(45907),b=e.i(86626),N=e.i(45949),I=e.i(49130),O=e.i(15603);e.s(["BiconomySmartAccount",()=>S.BiconomySmartAccount,"KernelSmartAccount",()=>M.KernelSmartAccount,"MetamaskSmartAccount",()=>b.MetamaskSmartAccount,"NexusSmartAccount",()=>N.NexusSmartAccount,"SMART_ACCOUNT",()=>r.SMART_ACCOUNT,"SafeSmartAccount",()=>I.SafeSmartAccount,"TrustSmartAccount",()=>O.TrustSmartAccount,"accountAbstractionProvider",()=>T,"toEoaProvider",()=>_],35354)},1139,e=>{e.v(t=>Promise.all(["static/chunks/8d2a37f99775993c.js"].map(t=>e.l(t))).then(()=>t(9963)))},89892,e=>{e.v(e=>Promise.resolve().then(()=>e(37575)))},15709,e=>{e.v(t=>Promise.all(["static/chunks/1119b2942d2f8e1d.js"].map(t=>e.l(t))).then(()=>t(90752)))}]);