{"version":3,"sources":["../../../../node_modules/obj-case/index.js","../../../../node_modules/%40segment/facade/lib/address.js","../../../../node_modules/%40segment/facade/lib/clone.js","../../../../node_modules/%40segment/facade/lib/is-enabled.js","../../../../node_modules/%40segment/isodate/lib/index.js","../../../../node_modules/new-date/lib/milliseconds.js","../../../../node_modules/new-date/lib/seconds.js","../../../../node_modules/new-date/lib/index.js","../../../../node_modules/%40segment/isodate-traverse/lib/index.js","../../../../node_modules/%40segment/facade/lib/facade.js","../../../../node_modules/%40segment/facade/lib/alias.js","../../../../node_modules/%40segment/facade/lib/is-email.js","../../../../node_modules/%40segment/facade/lib/group.js","../../../../node_modules/%40segment/facade/lib/identify.js","../../../../node_modules/%40segment/facade/lib/track.js","../../../../node_modules/%40segment/facade/lib/page.js","../../../../node_modules/%40segment/facade/lib/screen.js","../../../../node_modules/%40segment/facade/lib/delete.js","../../../../node_modules/%40segment/facade/lib/index.js","../../../../node_modules/%40lukeed/uuid/dist/index.mjs","../../../../node_modules/%40segment/analytics-next/src/lib/to-facade.ts","../../../../node_modules/dset/dist/index.mjs","../../../../node_modules/%40segment/analytics-core/src/stats/index.ts","../../../../node_modules/%40segment/analytics-core/src/context/index.ts","../../../../node_modules/%40segment/analytics-next/src/plugins/middleware/index.ts","../../../../node_modules/%40segment/analytics-core/src/logger/index.ts"],"sourcesContent":["\nvar identity = function(_){ return _; };\n\n\n/**\n * Module exports, export\n */\n\nmodule.exports = multiple(find);\nmodule.exports.find = module.exports;\n\n\n/**\n * Export the replacement function, return the modified object\n */\n\nmodule.exports.replace = function (obj, key, val, options) {\n  multiple(replace).call(this, obj, key, val, options);\n  return obj;\n};\n\n\n/**\n * Export the delete function, return the modified object\n */\n\nmodule.exports.del = function (obj, key, options) {\n  multiple(del).call(this, obj, key, null, options);\n  return obj;\n};\n\n\n/**\n * Compose applying the function to a nested key\n */\n\nfunction multiple (fn) {\n  return function (obj, path, val, options) {\n    var normalize = options && isFunction(options.normalizer) ? options.normalizer : defaultNormalize;\n    path = normalize(path);\n\n    var key;\n    var finished = false;\n\n    while (!finished) loop();\n\n    function loop() {\n      for (key in obj) {\n        var normalizedKey = normalize(key);\n        if (0 === path.indexOf(normalizedKey)) {\n          var temp = path.substr(normalizedKey.length);\n          if (temp.charAt(0) === '.' || temp.length === 0) {\n            path = temp.substr(1);\n            var child = obj[key];\n\n            // we're at the end and there is nothing.\n            if (null == child) {\n              finished = true;\n              return;\n            }\n\n            // we're at the end and there is something.\n            if (!path.length) {\n              finished = true;\n              return;\n            }\n\n            // step into child\n            obj = child;\n\n            // but we're done here\n            return;\n          }\n        }\n      }\n\n      key = undefined;\n      // if we found no matching properties\n      // on the current object, there's no match.\n      finished = true;\n    }\n\n    if (!key) return;\n    if (null == obj) return obj;\n\n    // the `obj` and `key` is one above the leaf object and key, so\n    // start object: { a: { 'b.c': 10 } }\n    // end object: { 'b.c': 10 }\n    // end key: 'b.c'\n    // this way, you can do `obj[key]` and get `10`.\n    return fn(obj, key, val);\n  };\n}\n\n\n/**\n * Find an object by its key\n *\n * find({ first_name : 'Calvin' }, 'firstName')\n */\n\nfunction find (obj, key) {\n  if (obj.hasOwnProperty(key)) return obj[key];\n}\n\n\n/**\n * Delete a value for a given key\n *\n * del({ a : 'b', x : 'y' }, 'X' }) -> { a : 'b' }\n */\n\nfunction del (obj, key) {\n  if (obj.hasOwnProperty(key)) delete obj[key];\n  return obj;\n}\n\n\n/**\n * Replace an objects existing value with a new one\n *\n * replace({ a : 'b' }, 'a', 'c') -> { a : 'c' }\n */\n\nfunction replace (obj, key, val) {\n  if (obj.hasOwnProperty(key)) obj[key] = val;\n  return obj;\n}\n\n/**\n * Normalize a `dot.separated.path`.\n *\n * A.HELL(!*&#(!)O_WOR   LD.bar => ahelloworldbar\n *\n * @param {String} path\n * @return {String}\n */\n\nfunction defaultNormalize(path) {\n  return path.replace(/[^a-zA-Z0-9\\.]+/g, '').toLowerCase();\n}\n\n/**\n * Check if a value is a function.\n *\n * @param {*} val\n * @return {boolean} Returns `true` if `val` is a function, otherwise `false`.\n */\n\nfunction isFunction(val) {\n  return typeof val === 'function';\n}\n","\"use strict\";\n\nimport get from \"obj-case\";\n\nfunction trait(a, b) {\n  return function () {\n    // @ts-ignore\n    let traits = this.traits();\n    // @ts-ignore\n    let props = this.properties ? this.properties() : {};\n\n    return (\n      get(traits, \"address.\" + a) ||\n      get(traits, a) ||\n      (b ? get(traits, \"address.\" + b) : null) ||\n      (b ? get(traits, b) : null) ||\n      get(props, \"address.\" + a) ||\n      get(props, a) ||\n      (b ? get(props, \"address.\" + b) : null) ||\n      (b ? get(props, b) : null)\n    );\n  };\n}\n\n/**\n * Add address getters to `proto`.\n *\n * @ignore\n * @param {Function} proto\n */\nexport default function (proto) {\n  proto.zip = trait(\"postalCode\", \"zip\");\n  proto.country = trait(\"country\");\n  proto.street = trait(\"street\");\n  proto.state = trait(\"state\");\n  proto.city = trait(\"city\");\n  proto.region = trait(\"region\");\n}\n","export function clone(properties) {\n  if (typeof properties !== 'object') return properties\n\n  if (Object.prototype.toString.call(properties) === '[object Object]') {\n    const temp = {};\n    for (const key in properties) {\n      if (Object.prototype.hasOwnProperty.call(properties, key)) {\n        temp[key] = clone(properties[key]);\n      }\n    }\n    return temp;\n  } else if (Array.isArray(properties)) {\n    return properties.map(clone);\n  } else {\n    // this is dangerous because it means this is not cloned\n    return properties;\n  }\n}\n","\"use strict\";\n\n// A few integrations are disabled by default. They must be explicitly enabled\n// by setting options[Provider] = true.\nlet disabled = {\n  Salesforce: true,\n};\n\n/**\n * Check whether an integration should be enabled by default.\n *\n * @ignore\n * @param {string} integration\n * @return {boolean}\n */\nexport default function (integration) {\n  return !disabled[integration];\n}\n","'use strict';\n\n/**\n * Matcher, slightly modified from:\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n */\n\nvar matcher = /^(\\d{4})(?:-?(\\d{2})(?:-?(\\d{2}))?)?(?:([ T])(\\d{2}):?(\\d{2})(?::?(\\d{2})(?:[,\\.](\\d{1,}))?)?(?:(Z)|([+\\-])(\\d{2})(?::?(\\d{2}))?)?)?$/;\n\n/**\n * Convert an ISO date string to a date. Fallback to native `Date.parse`.\n *\n * https://github.com/csnover/js-iso8601/blob/lax/iso8601.js\n *\n * @param {String} iso\n * @return {Date}\n */\n\nexports.parse = function(iso) {\n  var numericKeys = [1, 5, 6, 7, 11, 12];\n  var arr = matcher.exec(iso);\n  var offset = 0;\n\n  // fallback to native parsing\n  if (!arr) {\n    return new Date(iso);\n  }\n\n  /* eslint-disable no-cond-assign */\n  // remove undefined values\n  for (var i = 0, val; val = numericKeys[i]; i++) {\n    arr[val] = parseInt(arr[val], 10) || 0;\n  }\n  /* eslint-enable no-cond-assign */\n\n  // allow undefined days and months\n  arr[2] = parseInt(arr[2], 10) || 1;\n  arr[3] = parseInt(arr[3], 10) || 1;\n\n  // month is 0-11\n  arr[2]--;\n\n  // allow abitrary sub-second precision\n  arr[8] = arr[8] ? (arr[8] + '00').substring(0, 3) : 0;\n\n  // apply timezone if one exists\n  if (arr[4] === ' ') {\n    offset = new Date().getTimezoneOffset();\n  } else if (arr[9] !== 'Z' && arr[10]) {\n    offset = arr[11] * 60 + arr[12];\n    if (arr[10] === '+') {\n      offset = 0 - offset;\n    }\n  }\n\n  var millis = Date.UTC(arr[1], arr[2], arr[3], arr[5], arr[6] + offset, arr[7], arr[8]);\n  return new Date(millis);\n};\n\n\n/**\n * Checks whether a `string` is an ISO date string. `strict` mode requires that\n * the date string at least have a year, month and date.\n *\n * @param {String} string\n * @param {Boolean} strict\n * @return {Boolean}\n */\n\nexports.is = function(string, strict) {\n  if (typeof string !== 'string') {\n    return false;\n  }\n  if (strict && (/^\\d{4}-\\d{2}-\\d{2}/).test(string) === false) {\n    return false;\n  }\n  return matcher.test(string);\n};\n","\"use strict\";\n\n/**\n * Matcher.\n */\n\nvar matcher = /\\d{13}/;\n\n/**\n * Check whether a string is a millisecond date string.\n *\n * @param {string} string\n * @return {boolean}\n */\nexports.is = function (string) {\n  return matcher.test(string);\n};\n\n/**\n * Convert a millisecond string to a date.\n *\n * @param {string} millis\n * @return {Date}\n */\nexports.parse = function (millis) {\n  millis = parseInt(millis, 10);\n  return new Date(millis);\n};\n","\"use strict\";\n\n/**\n * Matcher.\n */\n\nvar matcher = /\\d{10}/;\n\n/**\n * Check whether a string is a second date string.\n *\n * @param {string} string\n * @return {Boolean}\n */\nexports.is = function (string) {\n  return matcher.test(string);\n};\n\n/**\n * Convert a second string to a date.\n *\n * @param {string} seconds\n * @return {Date}\n */\nexports.parse = function (seconds) {\n  var millis = parseInt(seconds, 10) * 1000;\n  return new Date(millis);\n};\n","\"use strict\";\n\nvar isodate = require(\"@segment/isodate\");\nvar milliseconds = require(\"./milliseconds\");\nvar seconds = require(\"./seconds\");\n\nvar objProto = Object.prototype;\nvar toStr = objProto.toString;\n\nfunction isDate(value) {\n  return toStr.call(value) === \"[object Date]\";\n}\n\nfunction isNumber(value) {\n  return toStr.call(value) === \"[object Number]\";\n}\n\n/**\n * Returns a new Javascript Date object, allowing a variety of extra input types\n * over the native Date constructor.\n *\n * @param {Date|string|number} val\n */\nmodule.exports = function newDate(val) {\n  if (isDate(val)) return val;\n  if (isNumber(val)) return new Date(toMs(val));\n\n  // date strings\n  if (isodate.is(val)) {\n    return isodate.parse(val);\n  }\n  if (milliseconds.is(val)) {\n    return milliseconds.parse(val);\n  }\n  if (seconds.is(val)) {\n    return seconds.parse(val);\n  }\n\n  // fallback to Date.parse\n  return new Date(val);\n};\n\n/**\n * If the number passed val is seconds from the epoch, turn it into milliseconds.\n * Milliseconds would be greater than 31557600000 (December 31, 1970).\n *\n * @param {number} num\n */\nfunction toMs(num) {\n  if (num < 31557600000) return num * 1000;\n  return num;\n}\n","'use strict';\n\nvar isodate = require('@segment/isodate');\n\n/**\n * Expose `traverse`.\n */\nmodule.exports = traverse;\n\n/**\n * Recursively traverse an object or array, and convert\n * all ISO date strings parse into Date objects.\n *\n * @param {Object} input - object, array, or string to convert\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverse(input, strict) {\n  if (strict === undefined) strict = true;\n  if (input && typeof input === 'object') {\n    return traverseObject(input, strict);\n  } else if (Array.isArray(input)) {\n    return traverseArray(input, strict);\n  } else if (isodate.is(input, strict)) {\n    return isodate.parse(input);\n  }\n  return input;\n}\n\n/**\n * Object traverser helper function.\n *\n * @param {Object} obj - object to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Object}\n */\nfunction traverseObject(obj, strict) {\n  Object.keys(obj).forEach(function(key) {\n    obj[key] = traverse(obj[key], strict);\n  });\n  return obj;\n}\n\n/**\n * Array traverser helper function\n *\n * @param {Array} arr - array to traverse\n * @param {Boolean} strict - only convert strings with year, month, and date\n * @return {Array}\n */\nfunction traverseArray(arr, strict) {\n  arr.forEach(function(value, index) {\n    arr[index] = traverse(value, strict);\n  });\n  return arr;\n}\n","\"use strict\";\n\nimport address from \"./address\";\nimport { clone } from \"./clone\";\nimport isEnabled from \"./is-enabled\";\nimport newDate from \"new-date\";\nimport objCase from \"obj-case\";\nimport traverse from \"@segment/isodate-traverse\";\n\n/**\n * A *Facade* is an object meant for creating convience wrappers around\n * objects. When developing integrations, you probably want to look at its\n * subclasses, such as {@link Track} or {@link Identify}, rather than this\n * general-purpose class.\n *\n * This letructor will initialize a new `Facade` with an `obj` of arguments.\n *\n * If the inputted `obj` doesn't have a `timestamp` property, one will be added\n * with the value `new Date()`. Otherwise, the `timestamp` property will be\n * converted to a Date using the `new-date` package.\n *\n * By default, the inputted object will be defensively copied, and all ISO\n * strings present in the string will be converted into Dates.\n *\n * @param {Object} obj - The object to wrap.\n * @param {Object} opts - Options about what kind of Facade to create.\n * @param {boolean} [opts.clone=true] - Whether to make defensive clones. If enabled,\n * the inputted object will be cloned, and any objects derived from this facade\n * will be cloned before being returned.\n * @param {boolean} [opts.traverse=true] - Whether to perform ISODate-Traverse\n * on the inputted object.\n *\n * @see {@link https://github.com/segmentio/new-date|new-date}\n * @see {@link https://github.com/segmentio/isodate-traverse|isodate-traverse}\n */\nexport function Facade (obj, opts) {\n  opts = opts || {};\n  this.raw = clone(obj);\n  if (!(\"clone\" in opts)) opts.clone = true;\n  if (opts.clone) obj = clone(obj);\n  if (!(\"traverse\" in opts)) opts.traverse = true;\n  if (!(\"timestamp\" in obj)) obj.timestamp = new Date();\n  else obj.timestamp = newDate(obj.timestamp);\n  if (opts.traverse) traverse(obj);\n  this.opts = opts;\n  this.obj = obj;\n}\n\nconst f = Facade.prototype;\n\n/**\n * Get a potentially-nested field in this facade. `field` should be a\n * period-separated sequence of properties.\n *\n * If the first field passed in points to a function (e.g. the `field` passed\n * in is `a.b.c` and this facade's `obj.a` is a function), then that function\n * will be called, and then the deeper fields will be fetched (using obj-case)\n * from what that function returns. If the first field isn't a function, then\n * this function works just like obj-case.\n *\n * Because this function uses obj-case, the camel- or snake-case of the input\n * is irrelevant.\n *\n * @example\n * YourClass.prototype.height = function() {\n *   return this.proxy('getDimensions.height') ||\n *     this.proxy('props.size.side_length');\n * }\n * @param {string} field - A sequence of properties, joined by periods (`.`).\n * @return {*} - A property of the inputted object.\n * @see {@link https://github.com/segmentio/obj-case|obj-case}\n */\nf.proxy = function(field) {\n  let fields = field.split(\".\");\n  field = fields.shift();\n\n  // Call a function at the beginning to take advantage of facaded fields\n  let obj = this[field] || this.obj[field];\n  if (!obj) return obj;\n  if (typeof obj === \"function\") obj = obj.call(this) || {};\n  if (fields.length === 0) return this.opts.clone ? transform(obj) : obj;\n\n  obj = objCase(obj, fields.join(\".\"));\n  return this.opts.clone ? transform(obj) : obj;\n};\n\n/**\n * Directly access a specific `field` from the underlying object. Only\n * \"top-level\" fields will work with this function. \"Nested\" fields *will not\n * work* with this function.\n *\n * @param {string} field\n * @return {*}\n */\nf.field = function(field) {\n  let obj = this.obj[field];\n  return this.opts.clone ? transform(obj) : obj;\n};\n\n/**\n * Utility method to always proxy a particular `field`. In other words, it\n * returns a function that will always return `this.proxy(field)`.\n *\n * @example\n * MyClass.prototype.height = Facade.proxy('options.dimensions.height');\n *\n * @param {string} field\n * @return {Function}\n */\nFacade.proxy = function(field) {\n  return function() {\n    return this.proxy(field);\n  };\n};\n\n/**\n * Utility method to always access a `field`. In other words, it returns a\n * function that will always return `this.field(field)`.\n *\n * @param {string} field\n * @return {Function}\n */\nFacade.field = function(field) {\n  return function() {\n    return this.field(field);\n  };\n};\n\n/**\n * Create a helper function for fetching a \"plural\" thing.\n *\n * The generated method will take the inputted `path` and append an \"s\" to it\n * and calls `this.proxy` with this \"pluralized\" path. If that produces an\n * array, that will be returned. Otherwise, a one-element array containing\n * `this.proxy(path)` will be returned.\n *\n * @example\n * MyClass.prototype.birds = Facade.multi('animals.bird');\n *\n * @param {string} path\n * @return {Function}\n */\nFacade.multi = function(path) {\n  return function() {\n    let multi = this.proxy(path + \"s\");\n    if (Array.isArray(multi)) return multi;\n    let one = this.proxy(path);\n    if (one) one = [this.opts.clone ? clone(one) : one];\n    return one || [];\n  };\n};\n\n/**\n * Create a helper function for getting a \"singular\" thing.\n *\n * The generated method will take the inputted path and call\n * `this.proxy(path)`. If a truthy thing is produced, it will be returned.\n * Otherwise, `this.proxy(path + 's')` will be called, and if that produces an\n * array the first element of that array will be returned. Otherwise,\n * `undefined` is returned.\n *\n * @example\n * MyClass.prototype.bird = Facade.one('animals.bird');\n *\n * @param {string} path\n * @return {Function}\n */\nFacade.one = function(path) {\n  return function() {\n    let one = this.proxy(path);\n    if (one) return one;\n    let multi = this.proxy(path + \"s\");\n    if (Array.isArray(multi)) return multi[0];\n  };\n};\n\n/**\n * Gets the underlying object this facade wraps around.\n *\n * If this facade has a property `type`, it will be invoked as a function and\n * will be assigned as the property `type` of the outputted object.\n *\n * @return {Object}\n */\nf.json = function() {\n  let ret = this.opts.clone ? clone(this.obj) : this.obj;\n  if (this.type) ret.type = this.type();\n  return ret;\n};\n\n/**\n * Gets a copy of the unmodified input object this facade wraps around.\n * \n * Unlike the `json` method which does make some subtle modifications \n * to datetime values and the `type` property. This method returns a copy of \n * the unmodified input object\n * \n * @return {Object}\n */\nf.rawEvent = function() {\n  return this.raw;\n};\n\n/**\n * Get the options of a call. If an integration is passed, only the options for\n * that integration are included. If the integration is not enabled, then\n * `undefined` is returned.\n *\n * Options are taken from the `options` property of the underlying object,\n * falling back to the object's `context` or simply `{}`.\n *\n * @param {string} integration - The name of the integration to get settings\n * for. Casing does not matter.\n * @return {Object|undefined}\n */\nf.options = function(integration) {\n  let obj = this.obj.options || this.obj.context || {};\n  let options = this.opts.clone ? clone(obj) : obj;\n  if (!integration) return options;\n  if (!this.enabled(integration)) return;\n  let integrations = this.integrations();\n  let value = integrations[integration] || objCase(integrations, integration);\n  if (typeof value !== \"object\") value = objCase(this.options(), integration);\n  return typeof value === \"object\" ? value : {};\n};\n\n/**\n * An alias for {@link Facade#options}.\n */\nf.context = f.options;\n\n/**\n * Check whether an integration is enabled.\n *\n * Basically, this method checks whether this integration is explicitly\n * enabled. If it isn'texplicitly mentioned, it checks whether it has been\n * enabled at the global level. Some integrations (e.g. Salesforce), cannot\n * enabled by these global event settings.\n *\n * More concretely, the deciding factors here are:\n *\n * 1. If `this.integrations()` has the integration set to `true`, return `true`.\n * 2. If `this.integrations().providers` has the integration set to `true`, return `true`.\n * 3. If integrations are set to default-disabled via global parameters (i.e.\n * `options.providers.all`, `options.all`, or `integrations.all`), then return\n * false.\n * 4. If the integration is one of the special default-deny integrations\n * (currently, only Salesforce), then return false.\n * 5. Else, return true.\n *\n * @param {string} integration\n * @return {boolean}\n */\nf.enabled = function(integration) {\n  let allEnabled = this.proxy(\"options.providers.all\");\n  if (typeof allEnabled !== \"boolean\") allEnabled = this.proxy(\"options.all\");\n  if (typeof allEnabled !== \"boolean\")\n    allEnabled = this.proxy(\"integrations.all\");\n  if (typeof allEnabled !== \"boolean\") allEnabled = true;\n\n  let enabled = allEnabled && isEnabled(integration);\n  let options = this.integrations();\n\n  // If the integration is explicitly enabled or disabled, use that\n  // First, check options.providers for backwards compatibility\n  if (options.providers && options.providers.hasOwnProperty(integration)) {\n    enabled = options.providers[integration];\n  }\n\n  // Next, check for the integration's existence in 'options' to enable it.\n  // If the settings are a boolean, use that, otherwise it should be enabled.\n  if (options.hasOwnProperty(integration)) {\n    let settings = options[integration];\n    if (typeof settings === \"boolean\") {\n      enabled = settings;\n    } else {\n      enabled = true;\n    }\n  }\n\n  return !!enabled;\n};\n\n/**\n * Get all `integration` options.\n *\n * @ignore\n * @param {string} integration\n * @return {Object}\n */\nf.integrations = function() {\n  return (\n    this.obj.integrations || this.proxy(\"options.providers\") || this.options()\n  );\n};\n\n/**\n * Check whether the user is active.\n *\n * @return {boolean}\n */\nf.active = function() {\n  let active = this.proxy(\"options.active\");\n  if (active === null || active === undefined) active = true;\n  return active;\n};\n\n/**\n * Get `sessionId / anonymousId`.\n *\n * @return {*}\n */\nf.anonymousId = function() {\n  return this.field(\"anonymousId\") || this.field(\"sessionId\");\n};\n\n/**\n * An alias for {@link Facade#anonymousId}.\n *\n * @function\n * @return {string}\n */\nf.sessionId = f.anonymousId;\n\n/**\n * Get `groupId` from `context.groupId`.\n *\n * @function\n * @return {string}\n */\nf.groupId = Facade.proxy(\"options.groupId\");\n\n/**\n * Get the call's \"traits\". All event types can pass in traits, though {@link\n * Identify} and {@link Group} override this implementation.\n *\n * Traits are gotten from `options.traits`, augmented with a property `id` with\n * the event's `userId`.\n *\n * The parameter `aliases` is meant to transform keys in `options.traits` into\n * new keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx`\n * in the traits, and move it to `yyy`. If `xxx` is a method of this facade,\n * it'll be called as a function instead of treated as a key into the traits.\n *\n * @example\n * let obj = { options: { traits: { foo: \"bar\" } }, anonymousId: \"xxx\" }\n * let facade = new Facade(obj)\n *\n * facade.traits() // { \"foo\": \"bar\" }\n * facade.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * facade.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\nf.traits = function(aliases) {\n  let ret = this.proxy(\"options.traits\") || {};\n  let id = this.userId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (const alias in aliases) {\n    if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n      const value = this[alias] == null\n        ? this.proxy(\"options.traits.\" + alias)\n        : this[alias]();\n      if (value == null) continue;\n      ret[aliases[alias]] = value;\n      delete ret[alias];\n    }\n  }\n\n  return ret;\n};\n\n/**\n * The library and version of the client used to produce the message.\n *\n * If the library name cannot be determined, it is set to `\"unknown\"`. If the\n * version cannot be determined, it is set to `null`.\n *\n * @return {{name: string, version: string}}\n */\nf.library = function() {\n  let library = this.proxy(\"options.library\");\n  if (!library) return { name: \"unknown\", version: null };\n  if (typeof library === \"string\") return { name: library, version: null };\n  return library;\n};\n\n/**\n * Return the device information, falling back to an empty object.\n *\n * Interesting values of `type` are `\"ios\"` and `\"android\"`, but other values\n * are possible if the client is doing something unusual with `context.device`.\n *\n * @return {{type: string}}\n */\nf.device = function() {\n  let device = this.proxy(\"context.device\");\n  if (typeof device !== \"object\" || device === null) {\n    device = {};\n  }\n  let library = this.library().name;\n  if (device.type) return device;\n\n  if (library.indexOf(\"ios\") > -1) device.type = \"ios\";\n  if (library.indexOf(\"android\") > -1) device.type = \"android\";\n  return device;\n};\n\n/**\n * Get the User-Agent from `context.userAgent`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nf.userAgent = Facade.proxy(\"context.userAgent\");\n\n/**\n * Get the timezone from `context.timezone`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nf.timezone = Facade.proxy(\"context.timezone\");\n\n/**\n * Get the timestamp from `context.timestamp`.\n *\n * @function\n * @return string\n */\nf.timestamp = Facade.field(\"timestamp\");\n\n/**\n * Get the channel from `channel`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nf.channel = Facade.field(\"channel\");\n\n/**\n * Get the IP address from `context.ip`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nf.ip = Facade.proxy(\"context.ip\");\n\n/**\n * Get the user ID from `userId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return string\n */\nf.userId = Facade.field(\"userId\");\n\n/**\n * Get the ZIP/Postal code from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name zip\n * @function\n * @memberof f\n * @return {string}\n */\n\n/**\n * Get the country from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name country\n * @function\n * @memberof f\n * @return {string}\n */\n\n/**\n * Get the street from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name street\n * @function\n * @memberof f\n * @return {string}\n */\n\n/**\n * Get the state from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name state\n * @function\n * @memberof f\n * @return {string}\n */\n\n/**\n * Get the city from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name city\n * @function\n * @memberof f\n * @return {string}\n */\n\n/**\n * Get the region from `traits`, `traits.address`, `properties`, or\n * `properties.address`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @name region\n * @function\n * @memberof f\n * @return {string}\n */\n\naddress(f);\n\n/**\n * Return the cloned and traversed object\n *\n * @ignore\n * @param {*} obj\n * @return {*}\n */\nfunction transform (obj) {\n  return clone(obj);\n}\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport { Facade } from \"./facade\";\n\n/**\n * Initialize a new `Alias` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.from] - The previous ID of the user.\n * @param {string} [dictionary.to] - The new ID of the user.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Alias(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Alias, Facade);\n\n/**\n * Return the type of facade this is. This will always return `\"alias\"`.\n *\n * @return {string}\n */\nAlias.prototype.action = function () {\n  return \"alias\";\n};\n\n/**\n * An alias for {@link Alias#action}.\n *\n * @function\n * @return {string}\n */\nAlias.prototype.type = Alias.prototype.action;\n\n/**\n * Get the user's previous ID from `previousId` or `from`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nAlias.prototype.previousId = function () {\n  return this.field(\"previousId\") || this.field(\"from\");\n};\n\n/**\n * An alias for {@link Alias#previousId}.\n *\n * @function\n * @return {string}\n */\nAlias.prototype.from = Alias.prototype.previousId;\n\n/**\n * Get the user's new ID from `userId` or `to`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nAlias.prototype.userId = function () {\n  return this.field(\"userId\") || this.field(\"to\");\n};\n\n/**\n * An alias for {@link Alias#userId}.\n *\n * @function\n * @return {string}\n */\nAlias.prototype.to = Alias.prototype.userId;\n","const matcher = /.+\\@.+\\..+/;\n\nexport default function isEmail(string) {\n  return matcher.test(string);\n}\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport isEmail from \"./is-email\";\nimport newDate from \"new-date\";\nimport { Facade } from \"./facade\";\n\n/**\n * Initialize a new `Group` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.userId] - The user to add to the group.\n * @param {string} [dictionary.groupId] - The ID of the group.\n * @param {Object} [dictionary.traits] - The traits of the group.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Group(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Group, Facade);\n\nconst g = Group.prototype;\n\n/**\n * Return the type of facade this is. This will always return `\"group\"`.\n *\n * @return {string}\n */\ng.action = function () {\n  return \"group\";\n};\n\n/**\n * An alias for {@link Group#action}.\n *\n * @function\n * @return {string}\n */\ng.type = g.action;\n\n/**\n * Get the group ID from `groupId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ng.groupId = Facade.field(\"groupId\");\n\n/**\n * Get the time of creation of the group from `traits.createdAt`,\n * `traits.created`, `properties.createdAt`, or `properties.created`.\n *\n * @return {Date}\n */\ng.created = function () {\n  var created =\n    this.proxy(\"traits.createdAt\") ||\n    this.proxy(\"traits.created\") ||\n    this.proxy(\"properties.createdAt\") ||\n    this.proxy(\"properties.created\");\n\n  if (created) return newDate(created);\n};\n\n/**\n * Get the group's email from `traits.email`, falling back to `groupId` only if\n * it looks like a valid email.\n *\n * @return {string}\n */\ng.email = function () {\n  var email = this.proxy(\"traits.email\");\n  if (email) return email;\n  var groupId = this.groupId();\n  if (isEmail(groupId)) return groupId;\n};\n\n/**\n * Get the group's traits. This is identical to how {@link Facade#traits}\n * works, except it looks at `traits.*` instead of `options.traits.*`.\n *\n * Traits are gotten from `traits`, augmented with a property `id` with\n * the event's `groupId`.\n *\n * The parameter `aliases` is meant to transform keys in `traits` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * var obj = { traits: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * var group = new Group(obj)\n *\n * group.traits() // { \"foo\": \"bar\" }\n * group.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * group.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\ng.traits = function (aliases) {\n  var ret = this.properties();\n  var id = this.groupId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (const alias in aliases) {\n    if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n      const value = this[alias] == null\n        ? this.proxy(\"traits.\" + alias)\n        : this[alias]();\n      if (value == null) continue;\n      ret[aliases[alias]] = value;\n      delete ret[alias];\n    }\n  }\n\n  return ret;\n};\n\n/**\n * Get the group's name from `traits.name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ng.name = Facade.proxy(\"traits.name\");\n\n/**\n * Get the group's industry from `traits.industry`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ng.industry = Facade.proxy(\"traits.industry\");\n\n/**\n * Get the group's employee count from `traits.employees`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\ng.employees = Facade.proxy(\"traits.employees\");\n\n/**\n * Get the group's properties from `traits` or `properties`, falling back to\n * simply an empty object.\n *\n * @return {Object}\n */\ng.properties = function () {\n  // TODO remove this function\n  return this.field(\"traits\") || this.field(\"properties\") || {};\n};\n","\"use strict\";\n\nimport { Facade } from \"./facade\";\nimport get from \"obj-case\";\nimport inherit from \"inherits\";\nimport isEmail from \"./is-email\";\nimport newDate from \"new-date\";\n\nlet trim = (str) => str.trim();\n\n/**\n * Initialize a new `Identify` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.userId] - The ID of the user.\n * @param {string} [dictionary.anonymousId] - The anonymous ID of the user.\n * @param {string} [dictionary.traits] - The user's traits.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Identify(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Identify, Facade);\n\nconst i = Identify.prototype;\n\n/**\n * Return the type of facade this is. This will always return `\"identify\"`.\n *\n * @return {string}\n */\ni.action = function () {\n  return \"identify\";\n};\n\n/**\n * An alias for {@link Identify#action}.\n *\n * @function\n * @return {string}\n */\ni.type = i.action;\n\n/**\n * Get the user's traits. This is identical to how {@link Facade#traits} works,\n * except it looks at `traits.*` instead of `options.traits.*`.\n *\n * Traits are gotten from `traits`, augmented with a property `id` with\n * the event's `userId`.\n *\n * The parameter `aliases` is meant to transform keys in `traits` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * let obj = { traits: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * let identify = new Identify(obj)\n *\n * identify.traits() // { \"foo\": \"bar\" }\n * identify.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * identify.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\ni.traits = function (aliases) {\n  let ret = this.field(\"traits\") || {};\n  let id = this.userId();\n  aliases = aliases || {};\n\n  if (id) ret.id = id;\n\n  for (let alias in aliases) {\n    let value =\n      this[alias] == null ? this.proxy(\"traits.\" + alias) : this[alias]();\n    if (value == null) continue;\n    ret[aliases[alias]] = value;\n    if (alias !== aliases[alias]) delete ret[alias];\n  }\n\n  return ret;\n};\n\n/**\n * Get the user's email from `traits.email`, falling back to `userId` only if\n * it looks like a valid email.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.email = function () {\n  let email = this.proxy(\"traits.email\");\n  if (email) return email;\n\n  let userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the time of creation of the user from `traits.created` or\n * `traits.createdAt`.\n *\n * @return {Date}\n */\ni.created = function () {\n  let created = this.proxy(\"traits.created\") || this.proxy(\"traits.createdAt\");\n  if (created) return newDate(created);\n};\n\n/**\n * Get the time of creation of the user's company from `traits.company.created`\n * or `traits.company.createdAt`.\n *\n * @return {Date}\n */\ni.companyCreated = function () {\n  let created =\n    this.proxy(\"traits.company.created\") ||\n    this.proxy(\"traits.company.createdAt\");\n\n  if (created) {\n    return newDate(created);\n  }\n};\n\n/**\n * Get the user's company name from `traits.company.name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.companyName = function () {\n  return this.proxy(\"traits.company.name\");\n};\n\n/**\n * Get the user's name `traits.name`, falling back to combining {@link\n * Identify#firstName} and {@link Identify#lastName} if possible.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.name = function () {\n  let name = this.proxy(\"traits.name\");\n  if (typeof name === \"string\") {\n    return trim(name);\n  }\n\n  let firstName = this.firstName();\n  let lastName = this.lastName();\n  if (firstName && lastName) {\n    return trim(firstName + \" \" + lastName);\n  }\n};\n\n/**\n * Get the user's first name from `traits.firstName`, optionally splitting it\n * out of a the full name if that's all that was provided.\n *\n * Splitting the full name works on the assumption that the full name is of the\n * form \"FirstName LastName\"; it will not work for non-Western names.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.firstName = function () {\n  let firstName = this.proxy(\"traits.firstName\");\n  if (typeof firstName === \"string\") {\n    return trim(firstName);\n  }\n\n  let name = this.proxy(\"traits.name\");\n  if (typeof name === \"string\") {\n    return trim(name).split(\" \")[0];\n  }\n};\n\n/**\n * Get the user's last name from `traits.lastName`, optionally splitting it out\n * of a the full name if that's all that was provided.\n *\n * Splitting the full name works on the assumption that the full name is of the\n * form \"FirstName LastName\"; it will not work for non-Western names.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.lastName = function () {\n  let lastName = this.proxy(\"traits.lastName\");\n  if (typeof lastName === \"string\") {\n    return trim(lastName);\n  }\n\n  let name = this.proxy(\"traits.name\");\n  if (typeof name !== \"string\") {\n    return;\n  }\n\n  let space = trim(name).indexOf(\" \");\n  if (space === -1) {\n    return;\n  }\n\n  return trim(name.substr(space + 1));\n};\n\n/**\n * Get the user's \"unique id\" from `userId`, `traits.username`, or\n * `traits.email`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.uid = function () {\n  return this.userId() || this.username() || this.email();\n};\n\n/**\n * Get the user's description from `traits.description` or `traits.background`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.description = function () {\n  return this.proxy(\"traits.description\") || this.proxy(\"traits.background\");\n};\n\n/**\n * Get the user's age from `traits.age`, falling back to computing it from\n * `traits.birthday` and the current time.\n *\n * @return {number}\n */\ni.age = function () {\n  let date = this.birthday();\n  let age = get(this.traits(), \"age\");\n  if (age != null) return age;\n  if (!(date instanceof Date)) return;\n  let now = new Date();\n  return now.getFullYear() - date.getFullYear();\n};\n\n/**\n * Get the URL of the user's avatar from `traits.avatar`, `traits.photoUrl`, or\n * `traits.avatarUrl`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.avatar = function () {\n  let traits = this.traits();\n  return (\n    get(traits, \"avatar\") || get(traits, \"photoUrl\") || get(traits, \"avatarUrl\")\n  );\n};\n\n/**\n * Get the user's job position from `traits.position` or `traits.jobTitle`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\ni.position = function () {\n  let traits = this.traits();\n  return get(traits, \"position\") || get(traits, \"jobTitle\");\n};\n\n/**\n * Get the user's username from `traits.username`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ni.username = Facade.proxy(\"traits.username\");\n\n/**\n * Get the user's website from `traits.website`, or if there are multiple in\n * `traits.websites`, return the first one.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ni.website = Facade.one(\"traits.website\");\n\n/**\n * Get the user's websites from `traits.websites`, or if there is only one in\n * `traits.website`, then wrap it in an array.\n *\n * This *should* be an array of strings, but may not be if the client isn't\n * adhering to the spec.\n *\n * @function\n * @return {array}\n */\ni.websites = Facade.multi(\"traits.website\");\n\n/**\n * Get the user's phone number from `traits.phone`, or if there are multiple in\n * `traits.phones`, return the first one.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ni.phone = Facade.one(\"traits.phone\");\n\n/**\n * Get the user's phone numbers from `traits.phones`, or if there is only one\n * in `traits.phone`, then wrap it in an array.\n *\n * This *should* be an array of strings, but may not be if the client isn't\n * adhering to the spec.\n *\n * @function\n * @return {array}\n */\ni.phones = Facade.multi(\"traits.phone\");\n\n/**\n * Get the user's address from `traits.address`.\n *\n * This *should* be an object, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {object}\n */\ni.address = Facade.proxy(\"traits.address\");\n\n/**\n * Get the user's gender from `traits.gender`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\ni.gender = Facade.proxy(\"traits.gender\");\n\n/**\n * Get the user's birthday from `traits.birthday`.\n *\n * This *should* be a Date if `opts.traverse` was enabled (it is by default)\n * when letructing this Identify. Otherwise, it should be a string. But it\n * may be neither if the client isn't adhering to the spec.\n * spec.\n *\n * @function\n * @return {object}\n */\ni.birthday = Facade.proxy(\"traits.birthday\");\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport { Facade } from \"./facade\";\nimport { Identify } from \"./identify\";\nimport isEmail from \"./is-email\";\nimport get from \"obj-case\";\n\n/**\n * Initialize a new `Track` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.event] - The name of the event being tracked.\n * @param {string} [dictionary.userId] - The ID of the user being tracked.\n * @param {string} [dictionary.anonymousId] - The anonymous ID of the user.\n * @param {string} [dictionary.properties] - Properties of the track event.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Track(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Track, Facade);\n\nlet t = Track.prototype;\n\n/**\n * Return the type of facade this is. This will always return `\"track\"`.\n *\n * @return {string}\n */\nt.action = function () {\n  return \"track\";\n};\n\n/**\n * An alias for {@link Track#action}.\n *\n * @function\n * @return {string}\n */\nt.type = t.action;\n\n/**\n * Get the event name from `event`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.event = Facade.field(\"event\");\n\n/**\n * Get the event value, usually the monetary value, from `properties.value`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.value = Facade.proxy(\"properties.value\");\n\n/**\n * Get the event cateogry from `properties.category`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.category = Facade.proxy(\"properties.category\");\n\n/**\n * Get the event ID from `properties.id`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.id = Facade.proxy(\"properties.id\");\n\n/**\n * Get the product ID from `properties.productId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.productId = function () {\n  return (\n    this.proxy(\"properties.product_id\") || this.proxy(\"properties.productId\")\n  );\n};\n\n/**\n * Get the promotion ID from `properties.promotionId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.promotionId = function () {\n  return (\n    this.proxy(\"properties.promotion_id\") ||\n    this.proxy(\"properties.promotionId\")\n  );\n};\n\n/**\n * Get the cart ID from `properties.cartId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.cartId = function () {\n  return this.proxy(\"properties.cart_id\") || this.proxy(\"properties.cartId\");\n};\n\n/**\n * Get the checkout ID from `properties.checkoutId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.checkoutId = function () {\n  return (\n    this.proxy(\"properties.checkout_id\") || this.proxy(\"properties.checkoutId\")\n  );\n};\n\n/**\n * Get the payment ID from `properties.paymentId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.paymentId = function () {\n  return (\n    this.proxy(\"properties.payment_id\") || this.proxy(\"properties.paymentId\")\n  );\n};\n\n/**\n * Get the coupon ID from `properties.couponId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.couponId = function () {\n  return (\n    this.proxy(\"properties.coupon_id\") || this.proxy(\"properties.couponId\")\n  );\n};\n\n/**\n * Get the wishlist ID from `properties.wishlistId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.wishlistId = function () {\n  return (\n    this.proxy(\"properties.wishlist_id\") || this.proxy(\"properties.wishlistId\")\n  );\n};\n\n/**\n * Get the review ID from `properties.reviewId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.reviewId = function () {\n  return (\n    this.proxy(\"properties.review_id\") || this.proxy(\"properties.reviewId\")\n  );\n};\n\n/**\n * Get the order ID from `properties.id` or `properties.orderId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.orderId = function () {\n  // doesn't follow above convention since this fallback order was how it used to be\n  return (\n    this.proxy(\"properties.id\") ||\n    this.proxy(\"properties.order_id\") ||\n    this.proxy(\"properties.orderId\")\n  );\n};\n\n/**\n * Get the SKU from `properties.sku`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.sku = Facade.proxy(\"properties.sku\");\n\n/**\n * Get the amount of tax for this purchase from `properties.tax`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.tax = Facade.proxy(\"properties.tax\");\n\n/**\n * Get the name of this event from `properties.name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.name = Facade.proxy(\"properties.name\");\n\n/**\n * Get the price of this purchase from `properties.price`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.price = Facade.proxy(\"properties.price\");\n\n/**\n * Get the total for this purchase from `properties.total`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.total = Facade.proxy(\"properties.total\");\n\n/**\n * Whether this is a repeat purchase from `properties.repeat`.\n *\n * This *should* be a boolean, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {boolean}\n */\nt.repeat = Facade.proxy(\"properties.repeat\");\n\n/**\n * Get the coupon for this purchase from `properties.coupon`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.coupon = Facade.proxy(\"properties.coupon\");\n\n/**\n * Get the shipping for this purchase from `properties.shipping`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.shipping = Facade.proxy(\"properties.shipping\");\n\n/**\n * Get the discount for this purchase from `properties.discount`.\n *\n * This *should* be a number, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {number}\n */\nt.discount = Facade.proxy(\"properties.discount\");\n\n/**\n * Get the shipping method for this purchase from `properties.shippingMethod`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.shippingMethod = function () {\n  return (\n    this.proxy(\"properties.shipping_method\") ||\n    this.proxy(\"properties.shippingMethod\")\n  );\n};\n\n/**\n * Get the payment method for this purchase from `properties.paymentMethod`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.paymentMethod = function () {\n  return (\n    this.proxy(\"properties.payment_method\") ||\n    this.proxy(\"properties.paymentMethod\")\n  );\n};\n\n/**\n * Get a description for this event from `properties.description`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.description = Facade.proxy(\"properties.description\");\n\n/**\n * Get a plan, as in the plan the user is on, for this event from\n * `properties.plan`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string}\n */\nt.plan = Facade.proxy(\"properties.plan\");\n\n/**\n * Get the subtotal for this purchase from `properties.subtotal`.\n *\n * If `properties.subtotal` isn't available, then fall back to computing the\n * total from `properties.total` or `properties.revenue`, and then subtracting\n * tax, shipping, and discounts.\n *\n * If neither subtotal, total, nor revenue are available, then return 0.\n *\n * @return {number}\n */\nt.subtotal = function () {\n  let subtotal = get(this.properties(), \"subtotal\");\n  let total = this.total() || this.revenue();\n\n  if (subtotal) return subtotal;\n  if (!total) return 0;\n\n  if (this.total()) {\n    let n = this.tax();\n    if (n) total -= n;\n    n = this.shipping();\n    if (n) total -= n;\n    n = this.discount();\n    if (n) total += n;\n  }\n\n  return total;\n};\n\n/**\n * Get the products for this event from `properties.products` if it's an\n * array, falling back to an empty array.\n *\n * @return {Array}\n */\nt.products = function () {\n  let props = this.properties();\n  let products = get(props, \"products\");\n  if (Array.isArray(products)) {\n    return products.filter(item => item !== null)\n  }\n  return [];\n};\n\n/**\n * Get the quantity for this event from `properties.quantity`, falling back to\n * a quantity of one.\n *\n * @return {number}\n */\nt.quantity = function () {\n  let props = this.obj.properties || {};\n  return props.quantity || 1;\n};\n\n/**\n * Get the currency for this event from `properties.currency`, falling back to\n * \"USD\".\n *\n * @return {string}\n */\nt.currency = function () {\n  let props = this.obj.properties || {};\n  return props.currency || \"USD\";\n};\n\n/**\n * Get the referrer for this event from `context.referrer.url`,\n * `context.page.referrer`, or `properties.referrer`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\nt.referrer = function () {\n  // TODO re-examine whether this function is necessary\n  return (\n    this.proxy(\"context.referrer.url\") ||\n    this.proxy(\"context.page.referrer\") ||\n    this.proxy(\"properties.referrer\")\n  );\n};\n\n/**\n * Get the query for this event from `options.query`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @function\n * @return {string|object}\n */\nt.query = Facade.proxy(\"options.query\");\n\n/**\n * Get the page's properties. This is identical to how {@link Facade#traits}\n * works, except it looks at `properties.*` instead of `options.traits.*`.\n *\n * Properties are gotten from `properties`.\n *\n * The parameter `aliases` is meant to transform keys in `properties` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * let obj = { properties: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * let track = new Track(obj)\n *\n * track.traits() // { \"foo\": \"bar\" }\n * track.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * track.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\nt.properties = function (aliases) {\n  let ret = this.field(\"properties\") || {};\n  aliases = aliases || {};\n\n  for (const alias in aliases) {\n    if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n      const value = this[alias] == null\n        ? this.proxy(\"properties.\" + alias)\n        : this[alias]();\n      if (value == null) continue;\n      ret[aliases[alias]] = value;\n      delete ret[alias];\n    }\n  }\n\n  return ret;\n};\n\n/**\n * Get the username of the user for this event from `traits.username`,\n * `properties.username`, `userId`, or `anonymousId`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string|undefined}\n */\nt.username = function () {\n  return (\n    this.proxy(\"traits.username\") ||\n    this.proxy(\"properties.username\") ||\n    this.userId() ||\n    this.sessionId()\n  );\n};\n\n/**\n * Get the email of the user for this event from `trais.email`,\n * `properties.email`, or `options.traits.email`, falling back to `userId` if\n * it looks like a valid email.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string|undefined}\n */\nt.email = function () {\n  let email =\n    this.proxy(\"traits.email\") ||\n    this.proxy(\"properties.email\") ||\n    this.proxy(\"options.traits.email\");\n  if (email) return email;\n\n  let userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the revenue for this event.\n *\n * If this is an \"Order Completed\" event, this will be the `properties.total`\n * falling back to the `properties.revenue`. For all other events, this is\n * simply taken from `properties.revenue`.\n *\n * If there are dollar signs in these properties, they will be removed. The\n * result will be parsed into a number.\n *\n * @return {number}\n */\nt.revenue = function () {\n  let revenue = this.proxy(\"properties.revenue\");\n  let event = this.event();\n  let orderCompletedRegExp = /^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;\n\n  // it's always revenue, unless it's called during an order completion.\n  if (!revenue && event && event.match(orderCompletedRegExp)) {\n    revenue = this.proxy(\"properties.total\");\n  }\n\n  return currency(revenue);\n};\n\n/**\n * Get the revenue for this event in \"cents\" -- in other words, multiply the\n * {@link Track#revenue} by 100, or return 0 if there isn't a numerical revenue\n * for this event.\n *\n * @return {number}\n */\nt.cents = function () {\n  let revenue = this.revenue();\n  return typeof revenue !== \"number\" ? this.value() || 0 : revenue * 100;\n};\n\n/**\n * Convert this event into an {@link Identify} facade.\n *\n * This works by taking this event's underlying object and creating an Identify\n * from it. This event's traits, taken from `options.traits`, will be used as\n * the Identify's traits.\n *\n * @return {Identify}\n */\nt.identify = function () {\n  // TODO: remove me.\n  let json = this.json();\n  json.traits = this.traits();\n  return new Identify(json, this.opts);\n};\n\n/**\n * Get float from currency value.\n *\n * @ignore\n * @param {*} val\n * @return {number}\n */\nfunction currency(val) {\n  if (!val) return;\n  if (typeof val === \"number\") {\n    return val;\n  }\n  if (typeof val !== \"string\") {\n    return;\n  }\n\n  val = val.replace(/\\$/g, \"\");\n  val = parseFloat(val);\n\n  if (!isNaN(val)) {\n    return val;\n  }\n}\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport { Facade } from \"./facade\";\nimport { Track } from \"./track\";\nimport isEmail from \"./is-email\";\n\n/**\n * Initialize a new `Page` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.category] - The page category.\n * @param {string} [dictionary.name] - The page name.\n * @param {string} [dictionary.properties] - The page properties.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Page(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Page, Facade);\n\nconst p = Page.prototype;\n\n/**\n * Return the type of facade this is. This will always return `\"page\"`.\n *\n * @return {string}\n */\np.action = function () {\n  return \"page\";\n};\n\n/**\n * An alias for {@link Page#action}.\n *\n * @function\n * @return {string}\n */\np.type = p.action;\n\n/**\n * Get the page category from `category`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.category = Facade.field(\"category\");\n\n/**\n * Get the page name from `name`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.name = Facade.field(\"name\");\n\n/**\n * Get the page title from `properties.title`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.title = Facade.proxy(\"properties.title\");\n\n/**\n * Get the page path from `properties.path`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.path = Facade.proxy(\"properties.path\");\n\n/**\n * Get the page URL from `properties.url`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.url = Facade.proxy(\"properties.url\");\n\n/**\n * Get the HTTP referrer from `context.referrer.url`, `context.page.referrer`,\n * or `properties.referrer`.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.referrer = function () {\n  return (\n    this.proxy(\"context.referrer.url\") ||\n    this.proxy(\"context.page.referrer\") ||\n    this.proxy(\"properties.referrer\")\n  );\n};\n\n/**\n * Get the page's properties. This is identical to how {@link Facade#traits}\n * works, except it looks at `properties.*` instead of `options.traits.*`.\n *\n * Properties are gotten from `properties`, augmented with the page's `name`\n * and `category`.\n *\n * The parameter `aliases` is meant to transform keys in `properties` into new\n * keys. Each alias like `{ \"xxx\": \"yyy\" }` will take whatever is at `xxx` in\n * the traits, and move it to `yyy`. If `xxx` is a method of this facade, it'll\n * be called as a function instead of treated as a key into the traits.\n *\n * @example\n * let obj = { properties: { foo: \"bar\" }, anonymousId: \"xxx\" }\n * let page = new Page(obj)\n *\n * page.traits() // { \"foo\": \"bar\" }\n * page.traits({ \"foo\": \"asdf\" }) // { \"asdf\": \"bar\" }\n * page.traits({ \"sessionId\": \"rofl\" }) // { \"rofl\": \"xxx\" }\n *\n * @param {Object} aliases - A mapping from keys to the new keys they should be\n * transformed to.\n * @return {Object}\n */\np.properties = function (aliases) {\n  let props = this.field(\"properties\") || {};\n  let category = this.category();\n  let name = this.name();\n  aliases = aliases || {};\n\n  if (category) props.category = category;\n  if (name) props.name = name;\n\n  for (const alias in aliases) {\n    if (Object.prototype.hasOwnProperty.call(aliases, alias)) {\n      const value = this[alias] == null\n        ? this.proxy(\"properties.\" + alias)\n        : this[alias]();\n      if (value == null) continue;\n      props[aliases[alias]] = value;\n      if (alias !== aliases[alias]) delete props[alias];\n    }\n  }\n\n  return props;\n};\n\n/**\n * Get the user's email from `context.traits.email` or `properties.email`,\n * falling back to `userId` if it's a valid email.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.email = function () {\n  let email =\n    this.proxy(\"context.traits.email\") || this.proxy(\"properties.email\");\n  if (email) return email;\n\n  let userId = this.userId();\n  if (isEmail(userId)) return userId;\n};\n\n/**\n * Get the page fullName. This is `$category $name` if both are present, and\n * just `name` otherwiser.\n *\n * This *should* be a string, but may not be if the client isn't adhering to\n * the spec.\n *\n * @return {string}\n */\np.fullName = function () {\n  let category = this.category();\n  let name = this.name();\n  return name && category ? category + \" \" + name : name;\n};\n\n/**\n * Get an event name from this page call. If `name` is present, this will be\n * `Viewed $name Page`; otherwise, it will be `Loaded a Page`.\n *\n * @param {string} name - The name of this page.\n * @return {string}\n */\np.event = function (name) {\n  return name ? \"Viewed \" + name + \" Page\" : \"Loaded a Page\";\n};\n\n/**\n * Convert this Page to a {@link Track} facade. The inputted `name` will be\n * converted to the Track's event name via {@link Page#event}.\n *\n * @param {string} name\n * @return {Track}\n */\np.track = function (name) {\n  let json = this.json();\n  json.event = this.event(name);\n  json.timestamp = this.timestamp();\n  json.properties = this.properties();\n  return new Track(json, this.opts);\n};\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport { Page } from \"./page\";\nimport { Track } from \"./track\";\n\n/**\n * Initialize a new `Screen` facade with a `dictionary` of arguments.\n *\n * Note that this class extends {@link Page}, so its methods are available to\n * instances of this class as well.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.category] - The page category.\n * @param {string} [dictionary.name] - The page name.\n * @param {string} [dictionary.properties] - The page properties.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Page\n */\nexport function Screen(dictionary, opts) {\n  Page.call(this, dictionary, opts);\n}\n\ninherit(Screen, Page);\n\n/**\n * Return the type of facade this is. This will always return `\"screen\"`.\n *\n * @return {string}\n */\nScreen.prototype.action = function () {\n  return \"screen\";\n};\n\n/**\n * An alias for {@link Screen#action}.\n *\n * @function\n * @return {string}\n */\nScreen.prototype.type = Screen.prototype.action;\n\n/**\n * Get an event name from this screen call. If `name` is present, this will be\n * `Viewed $name Screen`; otherwise, it will be `Loaded a Screen`.\n *\n * @param {string} name - The name of this screen.\n * @return {string}\n */\nScreen.prototype.event = function (name) {\n  return name ? \"Viewed \" + name + \" Screen\" : \"Loaded a Screen\";\n};\n\n/**\n * Convert this Screen to a {@link Track} facade. The inputted `name` will be\n * converted to the Track's event name via {@link Screen#event}.\n *\n * @param {string} name\n * @return {Track}\n */\nScreen.prototype.track = function (name) {\n  let json = this.json();\n  json.event = this.event(name);\n  json.timestamp = this.timestamp();\n  json.properties = this.properties();\n  return new Track(json, this.opts);\n};\n","\"use strict\";\n\nimport inherit from \"inherits\";\nimport { Facade } from \"./facade\";\n\n/**\n * Initialize a new `Delete` facade with a `dictionary` of arguments.\n *\n * @param {Object} dictionary - The object to wrap.\n * @param {string} [dictionary.category] - The delete category.\n * @param {string} [dictionary.name] - The delete name.\n * @param {string} [dictionary.properties] - The delete properties.\n * @param {Object} opts - Options about what kind of Facade to create.\n *\n * @augments Facade\n */\nexport function Delete(dictionary, opts) {\n  Facade.call(this, dictionary, opts);\n}\n\ninherit(Delete, Facade);\n\n/**\n * Return the type of facade this is. This will always return `\"delete\"`.\n *\n * @return {string}\n */\nDelete.prototype.type = function () {\n  return \"delete\";\n};\n","\"use strict\";\n\nimport { Facade } from \"./facade\";\nimport { Alias } from \"./alias\";\nimport { Group } from \"./group\";\nimport { Identify } from \"./identify\";\nimport { Track } from \"./track\";\nimport { Page } from \"./page\";\nimport { Screen } from \"./screen\";\nimport { Delete } from \"./delete\";\n\nexport default {\n  ...Facade,\n  Alias,\n  Group,\n  Identify,\n  Track,\n  Page,\n  Screen,\n  Delete,\n};\n\nexport { Facade, Alias, Group, Identify, Track, Page, Screen, Delete };\n","var IDX=256, HEX=[], BUFFER;\nwhile (IDX--) HEX[IDX] = (IDX + 256).toString(16).substring(1);\n\nexport function v4() {\n\tvar i=0, num, out='';\n\n\tif (!BUFFER || ((IDX + 16) > 256)) {\n\t\tBUFFER = Array(i=256);\n\t\twhile (i--) BUFFER[i] = 256 * Math.random() | 0;\n\t\ti = IDX = 0;\n\t}\n\n\tfor (; i < 16; i++) {\n\t\tnum = BUFFER[IDX + i];\n\t\tif (i==6) out += HEX[num & 15 | 64];\n\t\telse if (i==8) out += HEX[num & 63 | 128];\n\t\telse out += HEX[num];\n\n\t\tif (i & 1 && i > 1 && i < 11) out += '-';\n\t}\n\n\tIDX++;\n\treturn out;\n}\n","import {\n  Alias,\n  Facade,\n  Group,\n  Identify,\n  Options,\n  Page,\n  Screen,\n  Track,\n} from '@segment/facade'\nimport { SegmentEvent } from '../core/events'\n\nexport type SegmentFacade = Facade<SegmentEvent> & {\n  obj: SegmentEvent\n}\n\nexport function toFacade(evt: SegmentEvent, options?: Options): SegmentFacade {\n  let fcd = new Facade(evt, options)\n\n  if (evt.type === 'track') {\n    fcd = new Track(evt, options)\n  }\n\n  if (evt.type === 'identify') {\n    fcd = new Identify(evt, options)\n  }\n\n  if (evt.type === 'page') {\n    fcd = new Page(evt, options)\n  }\n\n  if (evt.type === 'alias') {\n    fcd = new Alias(evt, options)\n  }\n\n  if (evt.type === 'group') {\n    fcd = new Group(evt, options)\n  }\n\n  if (evt.type === 'screen') {\n    fcd = new Screen(evt, options)\n  }\n\n  Object.defineProperty(fcd, 'obj', {\n    value: evt,\n    writable: true,\n  })\n\n  return fcd as SegmentFacade\n}\n","export function dset(obj, keys, val) {\n\tkeys.split && (keys=keys.split('.'));\n\tvar i=0, l=keys.length, t=obj, x, k;\n\twhile (i < l) {\n\t\tk = ''+keys[i++];\n\t\tif (k === '__proto__' || k === 'constructor' || k === 'prototype') break;\n\t\tt = t[k] = (i === l) ? val : (typeof(x=t[k])===typeof(keys)) ? x : (keys[i]*0 !== 0 || !!~(''+keys[i]).indexOf('.')) ? {} : [];\n\t}\n}\n","type CompactMetricType = 'g' | 'c'\n\nexport type CoreMetricType = 'gauge' | 'counter'\n\nexport interface CoreMetric {\n  metric: string\n  value: number\n  type: CoreMetricType\n  tags: string[]\n  timestamp: number // unit milliseconds\n}\n\nexport interface CompactMetric {\n  m: string // metric name\n  v: number // value\n  k: CompactMetricType\n  t: string[] // tags\n  e: number // timestamp in unit milliseconds\n}\n\nconst compactMetricType = (type: CoreMetricType): CompactMetricType => {\n  const enums: Record<CoreMetricType, CompactMetricType> = {\n    gauge: 'g',\n    counter: 'c',\n  }\n  return enums[type]\n}\n\nexport abstract class CoreStats {\n  metrics: CoreMetric[] = []\n  increment(metric: string, by = 1, tags?: string[]): void {\n    this.metrics.push({\n      metric,\n      value: by,\n      tags: tags ?? [],\n      type: 'counter',\n      timestamp: Date.now(),\n    })\n  }\n\n  gauge(metric: string, value: number, tags?: string[]): void {\n    this.metrics.push({\n      metric,\n      value,\n      tags: tags ?? [],\n      type: 'gauge',\n      timestamp: Date.now(),\n    })\n  }\n\n  flush(): void {\n    const formatted = this.metrics.map((m) => ({\n      ...m,\n      tags: m.tags.join(','),\n    }))\n    // ie doesn't like console.table\n    if (console.table) {\n      console.table(formatted)\n    } else {\n      console.log(formatted)\n    }\n    this.metrics = []\n  }\n\n  /**\n   * compact keys for smaller payload\n   */\n  serialize(): CompactMetric[] {\n    return this.metrics.map((m) => {\n      return {\n        m: m.metric,\n        v: m.value,\n        t: m.tags,\n        k: compactMetricType(m.type),\n        e: m.timestamp,\n      }\n    })\n  }\n}\n\nexport class NullStats extends CoreStats {\n  override gauge(..._args: Parameters<CoreStats['gauge']>) {}\n  override increment(..._args: Parameters<CoreStats['increment']>) {}\n  override flush(..._args: Parameters<CoreStats['flush']>) {}\n  override serialize(..._args: Parameters<CoreStats['serialize']>) {\n    return []\n  }\n}\n","import { CoreSegmentEvent } from '../events/interfaces'\n\nimport { v4 as uuid } from '@lukeed/uuid'\nimport { dset } from 'dset'\nimport { CoreLogger, LogLevel, LogMessage } from '../logger'\nimport { CoreStats, CoreMetric, NullStats } from '../stats'\n\nexport interface SerializedContext {\n  id: string\n  event: CoreSegmentEvent\n  logs: LogMessage[]\n  metrics?: CoreMetric[]\n}\n\nexport interface ContextFailedDelivery {\n  reason: unknown\n}\n\nexport interface CancelationOptions {\n  retry?: boolean\n  reason?: string\n  type?: string\n}\n\nexport class ContextCancelation {\n  retry: boolean\n  type: string\n  reason?: string\n\n  constructor(options: CancelationOptions) {\n    this.retry = options.retry ?? true\n    this.type = options.type ?? 'plugin Error'\n    this.reason = options.reason ?? ''\n  }\n}\n\nexport abstract class CoreContext<\n  Event extends CoreSegmentEvent = CoreSegmentEvent\n> {\n  event: Event\n  logger: CoreLogger\n  stats: CoreStats\n  attempts = 0\n\n  private _failedDelivery?: ContextFailedDelivery\n  private _id: string\n\n  constructor(\n    event: Event,\n    id = uuid(),\n    stats: CoreStats = new NullStats(),\n    logger = new CoreLogger()\n  ) {\n    this.event = event\n    this._id = id\n    this.logger = logger\n    this.stats = stats\n  }\n\n  static system(): void {\n    // This should be overridden by the subclass to return an instance of the subclass.\n  }\n\n  isSame(other: CoreContext): boolean {\n    return other.id === this.id\n  }\n\n  cancel(error?: Error | ContextCancelation): never {\n    if (error) {\n      throw error\n    }\n\n    throw new ContextCancelation({ reason: 'Context Cancel' })\n  }\n\n  log(level: LogLevel, message: string, extras?: object): void {\n    this.logger.log(level, message, extras)\n  }\n\n  get id(): string {\n    return this._id\n  }\n\n  updateEvent(path: string, val: unknown): Event {\n    // Don't allow integrations that are set to false to be overwritten with integration settings.\n    if (path.split('.')[0] === 'integrations') {\n      const integrationName = path.split('.')[1]\n\n      if (this.event.integrations?.[integrationName] === false) {\n        return this.event\n      }\n    }\n\n    dset(this.event, path, val)\n    return this.event\n  }\n\n  failedDelivery(): ContextFailedDelivery | undefined {\n    return this._failedDelivery\n  }\n\n  setFailedDelivery(options: ContextFailedDelivery) {\n    this._failedDelivery = options\n  }\n\n  logs(): LogMessage[] {\n    return this.logger.logs\n  }\n\n  flush(): void {\n    this.logger.flush()\n    this.stats.flush()\n  }\n\n  toJSON(): SerializedContext {\n    return {\n      id: this._id,\n      event: this.event,\n      logs: this.logger.logs,\n      metrics: this.stats.metrics,\n    }\n  }\n}\n","import { Context, ContextCancelation } from '../../core/context'\nimport { SegmentEvent } from '../../core/events'\nimport { Plugin } from '../../core/plugin'\nimport { SegmentFacade, toFacade } from '../../lib/to-facade'\n\nexport interface MiddlewareParams {\n  payload: SegmentFacade\n\n  integrations?: SegmentEvent['integrations']\n  next: (payload: MiddlewareParams['payload'] | null) => void\n}\n\nexport interface DestinationMiddlewareParams {\n  payload: SegmentFacade\n  integration: string\n  next: (payload: MiddlewareParams['payload'] | null) => void\n}\n\nexport type MiddlewareFunction = (\n  middleware: MiddlewareParams\n) => void | Promise<void>\n\nexport type DestinationMiddlewareFunction = (\n  middleware: DestinationMiddlewareParams\n) => void | Promise<void>\n\nexport async function applyDestinationMiddleware(\n  destination: string,\n  evt: SegmentEvent,\n  middleware: DestinationMiddlewareFunction[]\n): Promise<SegmentEvent | null> {\n  // Clone the event so mutations are localized to a single destination.\n  let modifiedEvent = toFacade(evt, {\n    clone: true,\n    traverse: false,\n  }).rawEvent() as SegmentEvent\n  async function applyMiddleware(\n    event: SegmentEvent,\n    fn: DestinationMiddlewareFunction\n  ): Promise<SegmentEvent | null> {\n    let nextCalled = false\n    let returnedEvent: SegmentEvent | null = null\n\n    await fn({\n      payload: toFacade(event, {\n        clone: true,\n        traverse: false,\n      }),\n      integration: destination,\n      next(evt) {\n        nextCalled = true\n\n        if (evt === null) {\n          returnedEvent = null\n        }\n\n        if (evt) {\n          returnedEvent = evt.obj\n        }\n      },\n    })\n\n    if (!nextCalled && returnedEvent !== null) {\n      returnedEvent = returnedEvent as SegmentEvent\n      returnedEvent.integrations = {\n        ...event.integrations,\n        [destination]: false,\n      }\n    }\n\n    return returnedEvent\n  }\n\n  for (const md of middleware) {\n    const result = await applyMiddleware(modifiedEvent, md)\n    if (result === null) {\n      return null\n    }\n    modifiedEvent = result\n  }\n\n  return modifiedEvent\n}\n\nexport function sourceMiddlewarePlugin(\n  fn: MiddlewareFunction,\n  integrations: SegmentEvent['integrations']\n): Plugin {\n  async function apply(ctx: Context): Promise<Context> {\n    let nextCalled = false\n\n    await fn({\n      payload: toFacade(ctx.event, {\n        clone: true,\n        traverse: false,\n      }),\n      integrations: integrations ?? {},\n      next(evt) {\n        nextCalled = true\n        if (evt) {\n          ctx.event = evt.obj\n        }\n      },\n    })\n\n    if (!nextCalled) {\n      throw new ContextCancelation({\n        retry: false,\n        type: 'middleware_cancellation',\n        reason: 'Middleware `next` function skipped',\n      })\n    }\n\n    return ctx\n  }\n\n  return {\n    name: `Source Middleware ${fn.name}`,\n    type: 'before',\n    version: '0.1.0',\n\n    isLoaded: (): boolean => true,\n    load: (ctx): Promise<Context> => Promise.resolve(ctx),\n\n    track: apply,\n    page: apply,\n    screen: apply,\n    identify: apply,\n    alias: apply,\n    group: apply,\n  }\n}\n","export type LogLevel = 'debug' | 'info' | 'warn' | 'error'\nexport type LogMessage = {\n  level: LogLevel\n  message: string\n  time?: Date\n  extras?: Record<string, any>\n}\n\nexport interface GenericLogger {\n  log(level: LogLevel, message: string, extras?: object): void\n  flush(): void\n  logs: LogMessage[]\n}\n\nexport class CoreLogger implements GenericLogger {\n  private _logs: LogMessage[] = []\n\n  log(level: LogLevel, message: string, extras?: object) {\n    const time = new Date()\n    this._logs.push({\n      level,\n      message,\n      time,\n      extras,\n    })\n  }\n\n  public get logs(): LogMessage[] {\n    return this._logs\n  }\n\n  public flush(): void {\n    if (this.logs.length > 1) {\n      const formatted = this._logs.reduce((logs, log) => {\n        const line = {\n          ...log,\n          json: JSON.stringify(log.extras, null, ' '),\n          extras: log.extras,\n        }\n\n        delete line['time']\n\n        let key = log.time?.toISOString() ?? ''\n        if (logs[key]) {\n          key = `${key}-${Math.random()}`\n        }\n\n        return {\n          ...logs,\n          [key]: line,\n        }\n      }, {} as Record<string, LogMessage>)\n\n      // ie doesn't like console.table\n      if (console.table) {\n        console.table(formatted)\n      } else {\n        console.log(formatted)\n      }\n    } else {\n      this.logs.forEach((logEntry) => {\n        const { level, message, extras } = logEntry\n\n        if (level === 'info' || level === 'debug') {\n          console.log(message, extras ?? '')\n        } else {\n          console[level](message, extras ?? '')\n        }\n      })\n    }\n\n    this._logs = []\n  }\n}\n"],"names":[],"mappings":"gCAoCA,SAAS,EAAU,CAAE,EACnB,OAAO,SAAU,CAAG,CAAE,CAAI,CAAE,CAAG,CAAE,CAAO,EACtC,IAGI,EAHA,EAAY,GAgHI,QAhHO,IAgHtB,OAhHiC,AAgH1B,EAhHkC,UAAU,CAAI,EAAQ,UAAU,CAAG,EACjF,EAAO,EAAU,GAKjB,IAFA,IAAI,GAAW,EAER,CAAC,IAAU,AAElB,SAAS,EACP,IAAK,KAAO,EAAK,CACf,IAAI,EAAgB,EAAU,GAC9B,GAAI,IAAM,EAAK,OAAO,CAAC,GAAgB,CACrC,IAAI,EAAO,EAAK,MAAM,CAAC,EAAc,MAAM,EAC3C,GAAuB,MAAnB,EAAK,MAAM,CAAC,IAA8B,IAAhB,EAAK,MAAM,CAAQ,CAC/C,EAAO,EAAK,MAAM,CAAC,GACnB,IAAI,EAAQ,CAAG,CAAC,EAAI,CAGpB,GAAI,MAAQ,GAMR,CAAC,EAAK,MAAM,CANG,CAMD,AALhB,EAAW,GACX,MACF,CASA,EAAM,EAGN,MACF,CACF,CACF,CAEA,EAAM,OAGN,GAAW,CACb,IAEA,GAAK,CAAD,IAAM,IACN,AAAJ,MAAY,EAAY,EAOjB,CAPU,CAOP,EAAK,EAAK,EACtB,CACF,CAoBA,SAAS,EAAK,CAAG,CAAE,CAAG,EAEpB,OADI,EAAI,cAAc,CAAC,IAAM,OAAO,CAAG,CAAC,EAAI,CACrC,CACT,CASA,SAAS,EAAS,CAAG,CAAE,CAAG,CAAE,CAAG,EAE7B,OADI,EAAI,cAAc,CAAC,KAAM,CAAG,CAAC,EAAI,CAAG,CAAA,EACjC,CACT,CAWA,SAAS,EAAiB,CAAI,EAC5B,OAAO,EAAK,OAAO,CAAC,mBAAoB,IAAI,WAAW,EACzD,CApIA,EAAO,OAAO,CAAG,EA6FjB,OA7F0B,EA6FjB,AAAM,CAAG,CAAE,CAAG,EACrB,GAAI,EAAI,cAAc,CAAC,GAAM,OAAO,CAAG,CAAC,EAAI,AAC9C,GA9FA,EAAO,OAAO,CAAC,IAAI,CAAG,EAAO,OAAO,CAOpC,EAAO,OAAO,CAAC,OAAO,CAAG,SAAU,CAAG,CAAE,CAAG,CAAE,CAAG,CAAE,CAAO,EAEvD,OADA,EAAS,GAAS,IAAI,CAAC,IAAI,CAAE,EAAK,EAAK,EAAK,GACrC,CACT,EAOA,EAAO,OAAO,CAAC,GAAG,CAAG,SAAU,CAAG,CAAE,CAAG,CAAE,CAAO,EAE9C,OADA,EAAS,GAAK,IAAI,CAAC,IAAI,CAAE,EAAK,EAAK,KAAM,GAClC,CACT,mKC3BA,IAAA,EAAA,EAAA,EAA2B,CAAA,CAAA,QAE3B,SAF2B,AAElB,EAAM,CAAC,CAAE,CAAC,AAAL,EACZ,OAAO,WAEL,IAAI,EAAS,IAAI,AAAP,CAAQ,MAAM,EAAE,CAEtB,AAFuB,EAEf,GAAH,CAAO,CAAC,UAAU,CAAC,AAAE,CAAD,GAAK,CAAC,UAAU,EAAE,CAAC,AAAE,CAAD,AAAC,CAAE,CAAC,AAErD,OACE,EAAA,OAAG,CAAC,EAAQ,IAAF,MAAY,CAAG,CAAC,CAAC,EAC3B,EAAA,OAAG,CAAC,EAAQ,CAAC,CAAC,EAAJ,CACT,CAAC,AAAF,CAAG,AAAE,CAAD,CAAC,OAAG,CAAC,EAAQ,IAAF,MAAY,CAAG,CAAC,CAAC,CAAC,AAAE,CAAD,GAAC,CAAI,CAAC,CACvC,CAAC,CAAC,CAAC,AAAC,AAAL,EAAK,OAAG,CAAC,EAAQ,CAAC,CAAC,CAAC,AAAE,CAAP,AAAM,GAAC,CAAI,CAAC,CAC3B,EAAA,OAAG,CAAC,EAAO,GAAF,OAAY,CAAG,CAAC,CAAC,EAC1B,EAAA,OAAG,CAAC,EAAO,CAAC,CAAC,CAAJ,EACR,CAAD,AAAE,CAAC,AAAE,CAAD,CAAC,OAAG,CAAC,EAAO,GAAF,OAAY,CAAG,CAAC,CAAC,CAAG,AAAF,CAAC,GAAC,CAAI,CAAC,EACtC,CAAC,CAAF,AAAG,AAAE,CAAD,CAAC,OAAG,CAAC,EAAO,CAAC,CAAC,CAAJ,AAAK,AAAE,CAAD,GAAC,CAEzB,AAF6B,CAAC,AAE7B,AACH,CAFK,AACD,AACH,AAQD,CAVM,CAUN,OAAA,CAAA,EAAA,OAAA,AAAyB,CAAK,EAO7B,AANC,EAAM,GAAG,AAAJ,CAAO,EAAM,GAAD,SAAa,CAAE,KAAK,CAAC,CAAC,AACvC,EAAM,GAAD,IAAQ,CAAG,EAAM,GAAD,MAAU,CAAC,CAAC,AACjC,EAAM,GAAD,GAAO,CAAG,EAAM,GAAD,KAAS,CAAC,CAAC,AAC/B,EAAM,GAAD,EAAM,CAAG,EAAM,GAAD,IAAQ,CAAC,CAAC,AAC7B,EAAM,GAAD,CAAK,CAAG,EAAM,GAAD,GAAO,CAAC,CAAC,AAC3B,EAAM,GAAD,GAAO,CAAG,EAAM,GAAD,KAAS,CAAC,AAChC,CADiC,AAChC,+FCrCD,EAAA,KAAA,CAAA,EAAA,MAiBC,CAjBe,EAAM,CAAU,EAAX,AACnB,GAAI,AAAsB,QAAQ,SAAvB,EAAyB,OAAO,CAAtB,CAErB,GAAmD,KAFE,CAAA,WAEe,GAAhE,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAmC,CACpE,IAAM,EADqC,AAC9B,CAD+B,AAC/B,CAAH,AAAK,CACf,AADgB,IACX,IAAM,GAAG,EAAI,EACZ,MAAM,CAAC,CADe,CAAE,OACR,CAAC,cAAc,CAAC,IAAI,CAAC,EAAY,GAAG,CAAC,CACvD,CADyD,AACrD,CAAC,CAD4C,CACxC,CAAD,AAAI,EAAM,CAAU,CAAC,CAAZ,EAAgB,AAAD,CAAE,CAAC,AAGvC,OAAO,EACR,EADY,CAAC,IACP,AAAI,KAAK,CAAC,OAAO,CAAC,GAChB,EAAW,GAAG,CAAC,CADW,CAAC,CAI3B,CAJ6B,AACnB,AAKrB,CAAC,AAL8B,CAAC,CAAC,MAGZ,CAAC,uECXtB,IAAI,EAAW,CACb,KADU,KACA,EAAE,EACb,CAAC,AASF,CAVkB,CAUlB,OAAA,CAAA,EAAA,OAAA,AAAyB,CAAW,EAClC,AACD,MADQ,CAAC,CAAQ,CAAC,EACnB,AAD+B,CAAC,AAC/B,QAD6B,uBCR9B,IAAI,EAAU,wIAWd,EAAQ,KAAK,CAAG,SAAS,CAAG,EAC1B,IAAI,EAAc,CAAC,EAAG,EAAG,EAAG,EAAG,GAAI,GAAG,CAClC,EAAM,EAAQ,IAAI,CAAC,GACnB,EAAS,EAGb,GAAI,CAAC,EACH,GADQ,IACD,IAAI,KAAK,GAKlB,IAAK,IAAW,EAAP,EAAI,EAAQ,EAAM,CAAW,CAAC,EAAE,CAAE,IAAK,AAC9C,CAAG,CAAC,EAAI,CAAG,SAAS,CAAG,CAAC,EAAI,CAAE,KAAO,EAyBvC,OApBA,CAAG,CAAC,EAAE,CAAG,SAAS,CAAG,CAAC,EAAE,CAAE,KAAO,EACjC,CAAG,CAAC,EAAE,CAAG,SAAS,CAAG,CAAC,EAAE,CAAE,KAAO,EAGjC,CAAG,CAAC,EAAE,GAGN,CAAG,CAAC,EAAE,CAAG,CAAG,CAAC,EAAE,CAAG,CAAC,CAAG,CAAC,EAAE,CAAG,IAAA,CAAI,CAAE,SAAS,CAAC,EAAG,GAAK,EAGrC,KAAK,CAAhB,CAAG,CAAC,EAAE,CACR,EAAS,IAAI,OAAO,iBAAiB,GACjB,MAAX,CAAG,CAAC,EAAE,EAAY,CAAG,CAAC,GAAG,EAAE,CACpC,EAAmB,GAAV,CAAG,CAAC,GAAG,CAAQ,CAAG,CAAC,GAAG,CACf,KAAK,CAAjB,CAAG,CAAC,GAAG,EACT,GAAS,EAAI,CAAA,GAKV,IAAI,KADE,AACG,KADE,GAAG,CAAC,CAAG,CAAC,EAAE,CAAE,CAAG,CAAC,EAAE,CAAE,CAAG,CAAC,EAAE,CAAE,CAAG,CAAC,EAAE,CAAE,CAAG,CAAC,EAAE,CAAG,EAAQ,CAAG,CAAC,EAAE,CAAE,CAAG,CAAC,EAAE,EAEvF,EAYA,EAAQ,EAAE,CAAG,SAAS,CAAM,CAAE,CAAM,QAClC,AAAsB,UAAlB,AAA4B,OAArB,KAGP,IAAkD,IAAvC,qBAAsB,IAAI,CAAC,EAAY,GAAO,AAGtD,EAAQ,IAAI,CAAC,EACtB,+BCxEA,IAAI,EAAU,SAQd,EAAQ,EAAE,CAAG,SAAU,CAAM,EAC3B,OAAO,EAAQ,IAAI,CAAC,EACtB,EAQA,EAAQ,KAAK,CAAG,SAAU,CAAM,EAE9B,OAAO,IAAI,KADX,AACgB,EADP,SAAS,EAAQ,IAE5B,gCCrBA,IAAI,EAAU,QAQd,GAAQ,EAAE,CAAG,SAAU,CAAM,EAC3B,OAAO,EAAQ,IAAI,CAAC,EACtB,EAQA,EAAQ,KAAK,CAAG,SAAU,CAAO,EAE/B,OAAO,IAAI,KAD0B,AACrB,IADH,SAAS,EAAS,IAEjC,gCCzBA,IAAI,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OAGA,EADW,AACH,OADU,SAAS,CACV,QAAQ,CAgB7B,EAAO,OAAO,CAAG,SAAS,AAAQ,CAAG,QACnC,GAd6B,CAczB,iBAdG,EAAM,IAAI,CAAC,AAcP,GAAM,OAAO,QACxB,AAX6B,IAWzB,gBAXG,EAAM,IAAI,CAWJ,AAXK,GAWQ,GAAP,CAAW,KAAK,AAwBnC,AAAI,CADQ,EAvB4B,CAuBzB,EACL,SAA0B,IAAb,AAAO,EACvB,GAtBH,EAAQ,EAAE,CAAC,GACN,EAAQ,CADI,IACC,CAAC,GAEnB,EAAa,EAAE,CAAC,GACX,EAAa,CADI,IACC,CAAC,GAExB,EAAQ,EAAE,CAAC,GACN,EAAQ,CADI,IACC,CAAC,GAIhB,IAAI,KAAK,EAClB,gCCtCA,IAAI,EAAA,EAAA,CAAA,CAAA,OAKJ,EAAO,OAAO,CAUd,EAViB,OAUR,EAAS,CAAK,CAAE,CAAM,MAmBP,GAAG,KAjBzB,QADe,IAAX,IAAsB,GAAS,CAAA,EAC/B,GAA0B,UAAjB,AAA2B,OAApB,GAClB,OAAO,EAAe,EAgBG,EAhBI,EAiB/B,EADiC,KAC1B,IAAI,CAAC,GAAK,OAAO,CAAC,SAAS,CAAG,EACnC,CAAG,CAAC,EAAI,CAAG,EAAS,CAAG,CAAC,EAAI,CAAE,EAChC,GACO,CApBwB,CACxB,GAAI,MAAM,OAAO,CAAC,IACvB,IAD+B,GACxB,AA4BY,EA5BE,CA4BC,CAAE,EA5BI,EA6B9B,EADgC,AAC5B,OAAO,CAAC,SAAS,CAAK,CAAE,CAAK,EAC/B,CAAG,CAAC,EAAM,CAAG,EAAS,EAAO,EAC/B,GACO,CAhCuB,QACnB,AAAJ,EAAY,EAAE,CAAC,EAAO,GACpB,EAAQ,IADqB,CAChB,CAAC,GAEhB,CACT,mLCzBA,IAAA,EAAA,EAAA,EAAgC,CAAA,CAAA,QAChC,EAAA,EAAgC,CAAA,CAAA,OAChC,EAAA,EAAA,EAAA,CAAA,CADgC,AAChC,CAAqC,OACrC,EAAA,EAAA,EAA+B,CAAA,CAAA,QAC/B,EAAA,EAAA,EAA+B,CAAA,CAAA,CADA,OAE/B,EAAA,EAAA,EAAA,CAAA,CAAA,CAD+B,OA6B/B,MA5BiD,GA4BjC,EAAQ,CAAG,CAAE,CAAI,CAAX,CACpB,EAAO,EAAH,CAAW,CAAJ,AAAI,CAAE,CAAC,AAClB,IAAI,CAAC,GAAG,CAAG,EAAA,KAAK,CAAC,GAAG,AAChB,AAAE,CADe,AAChB,CADiB,KACT,GAAI,GAAO,CAAH,CAAC,CAAO,CAAD,IAAM,EAAG,CAAA,CAAI,CAAC,AACtC,EAAK,EAAD,GAAM,GAAE,EAAM,CAAH,CAAG,KAAK,CAAC,EAAG,CAAC,CAAC,AAC7B,AAAE,CAAD,SAAW,GAAI,IAAO,AAAH,CAAC,CAAO,EAAD,MAAS,EAAG,CAAA,CAAI,CAAC,AAC1C,WAAW,GAAI,EAChB,CADmB,CACf,AADgB,CACjB,QAAU,CAAG,EAAA,OAAO,CAAC,EAAI,CAAD,QAAU,CAAC,CAAC,AADjB,EAAI,CAAD,QAAU,CAAG,IAAI,IAAI,CAE/C,CAFiD,CAAC,AAE7C,EAAD,MAAS,EAAE,EAAA,OAAQ,CAAC,GAAG,AAC/B,CADgC,CAAC,EAC7B,CAAC,IAAI,CAAG,EACZ,EADgB,CAAC,CACb,CAAC,GAAG,CAAG,CACb,CAAC,AAXD,CAUgB,CAAC,AAVjB,MAAA,CAAA,EAaA,IAAM,CAFL,AAEM,CAAG,EAAO,IAAD,KAAU,CAAC,AAmgB3B,SAAS,EAAW,CAAG,EACrB,IADgB,GACT,EAAA,KAAK,CAAC,EACf,CA7eA,AA4ekB,AACjB,CA7eA,AA4ekB,CA5ejB,AA4ekB,KA5eb,CAAG,SAAS,CAAK,EACtB,IAAI,EAAS,EAAM,EAAT,CAAQ,EAAM,CAAC,GAAG,CAAC,CAAC,AAI1B,EAAM,CAAH,GAAO,CAAC,AAHf,EAAQ,EAAO,CAAV,AAGe,GAHN,CAAM,EAAE,CAAC,AAGF,EAAI,IAAI,CAAC,GAAG,CAAC,EAAM,CAAC,EAAF,KAClC,AAAL,GAAQ,AACW,CADf,CAAM,QACmB,EAAzB,OAAO,GAAG,CAAiB,EAAM,CAAH,CAAO,CAAD,GAAK,CAAC,IAAI,CAAC,EAAI,EAAA,CAAE,CACnC,AADoC,CACnC,EAAE,CAArB,EAAO,IAAD,EAAO,GAEjB,EAAM,CAAH,CAAG,OAAO,CAAC,EAAK,CAAF,CAAS,IAAD,AAAK,CAAC,GAAG,EAAC,CAAC,CAAC,AAFL,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,AAAE,CAAD,CAAW,GAAG,AAAI,CAAH,CAAC,CAFhD,AAEiD,AAAI,CAAX,AAAY,AAIzE,CAAC,CAUD,AAhBsB,AAMpB,CAUD,AAhBsB,CAgBrB,KAAK,CAAG,SAAS,CAAK,EACtB,IAAI,EAAM,CAAH,GAAO,CAAC,GAAG,CAAC,EAAM,CAAC,AAC1B,EADwB,KACjB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAG,AAAF,CAAC,CAAW,GAAG,AAAI,CAAH,AACzC,CAD0C,AACzC,CAD0C,AAAI,AAC7C,AAYF,CAboC,AAAY,CAazC,IAAD,CAAM,CAAG,SAAS,CAAK,EAC3B,OAAO,WACL,OAAO,IAAI,CAAC,KAAK,CAAC,EACpB,CAAC,AACH,CADI,AACH,CASD,AAX2B,AAEzB,CAF0B,CAWrB,AAXsB,IAWvB,CAAM,CAAG,SAAS,CAAK,EAC3B,OAAO,WACL,OAAO,IAAI,CAAC,KAAK,CAAC,EACpB,CAAC,AACH,CADI,AACH,CAF0B,AAEzB,AAgBF,CAlB4B,CAAC,AAkBtB,IAAD,CAAM,CAAG,SAAS,CAAI,EAC1B,OAAO,WACL,IAAI,EAAQ,GAAH,CAAO,CAAC,KAAK,CAAC,EAAO,EAAH,CAAM,CAAC,CAAC,AACnC,GAAI,KAAK,CAAC,OAAO,CAAC,GAAQ,EAAH,CAAC,IAAS,EACjC,GADsC,CAAC,AACnC,EAAM,CAAH,GAAO,CAAC,KAAK,CAAC,GAErB,CAFyB,CAAC,CAAC,IACvB,GAAG,CAAE,EAAM,CAAH,AAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,AAAE,CAAD,CAAC,KAAK,CAAC,GAAG,AAAI,CAAH,CAAO,AAAN,CAAO,AAAN,AAAI,CAC3C,GAAG,AAAI,EAAE,AAClB,CADmB,AAClB,AACH,CADI,AACH,CAAC,AAiBF,EAAO,GAAG,CAAJ,AAAO,SAAS,CAAI,EACxB,OAAO,WACL,IAAI,EAAM,CAAH,GAAO,CAAC,KAAK,CAAC,GACrB,CADyB,CAAC,CAAC,AACvB,EAAK,CAAF,MAAS,EAChB,CADmB,CAAC,EAChB,EAAQ,GAAH,CAAO,CAAC,KAAK,CAAC,EAAO,EAAH,CAAM,CAAC,CAAC,AACnC,GAAI,KAAK,CAAC,OAAO,CAAC,GAAQ,EAAH,CAAC,IAAS,CAAK,CAAC,CAAC,CAAC,AAC3C,CAD4C,AAC3C,AACH,CADI,AACH,CAAC,AAUF,CAAC,CAAC,IAAI,CAAG,WACP,IAAI,EAAM,CAAH,GAAO,CAAC,IAAI,CAAC,KAAK,CAAC,AAAE,CAAD,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,AAAE,CAAD,GAAK,CAAC,GAAG,CAAC,AAEvD,OADI,IAAI,CAAC,IAAI,GAAE,EAAI,CAAD,GAAK,CAAG,IAAI,CAAC,IAAI,EAAA,CAAE,CAAC,AAC/B,CACT,CAAC,CADW,AACV,AAWF,CAAC,AAZY,CAYX,QAAQ,CAAG,WACX,OAAO,IAAI,CAAC,GAAG,AACjB,CADkB,AACjB,CAAC,AAcF,CAAC,CAAC,OAAO,CAAG,SAAS,CAAW,EAC9B,IAAI,EAAM,CAAH,GAAO,CAAC,GAAG,CAAC,OAAO,EAAI,IAAI,CAAC,GAAG,CAAC,OAAO,EAAI,CAAA,CAAE,CAAC,AACjD,EAAU,IAAI,CAAP,AAAQ,IAAI,CAAC,KAAK,CAAC,AAAE,CAAD,CAAC,KAAK,CAAC,GAAG,AAAI,CAAH,CAAC,AAC3C,CAD4C,AAAI,CAAC,CAC7C,CAAC,EAAa,OAAO,EACzB,AADgB,GACX,CAAD,CAD4B,CAAC,CACxB,CAAC,OAAO,CAAC,IAClB,IAAI,EAAe,CADU,CAAC,EAAE,AACT,CAAC,KAAR,CADuB,MACH,EAAE,CAAC,AACnC,EAAQ,CAAY,CAAC,CAAhB,CAA4B,EAAI,EAAA,KAAL,EAAY,CAAC,EAAc,GAE/D,MADqB,CADwC,CAAa,CAAC,CAAC,IAC/C,EAAzB,OAAO,IAAoB,CAAf,CAAuB,EAAA,CAAH,MAAU,CAAC,IAAI,CAAC,OAAO,EAAE,CAAE,EAAW,CAAC,CAAC,AACpD,QAAQ,CAAC,CAA1B,AAA2B,OAApB,EAAqB,EAAQ,CAAA,AAAxB,CAA0B,CAAC,AAChD,AAD0C,CACzC,AAD0C,CACzC,AAKF,AAN4C,CAM3C,CAAC,OAAO,CAAG,CAAC,CAAC,OAAO,CAAC,AAwBtB,CAAC,CAAC,OAAO,CAAG,SAAS,CAAW,EAC9B,IAAI,EAAa,IAAI,CAAC,GAAR,EAAa,CAAC,uBAAuB,CAAC,CAAC,AAC3B,SAAS,EAA/B,OAAO,IAA0B,EAAa,IAA7B,AAAiC,CAAC,GAAR,EAAa,CAAC,cAAa,CAAC,CAAC,AAClD,SAAS,EAA/B,OAAO,GACT,GAAa,IADM,AACF,CAAC,EAAR,GAAa,CAAC,mBAAkB,CAAC,CAAC,AACpB,SAAS,EAA/B,OAAO,IAA0B,GAAa,CAAA,CAAI,CAAjC,AAAkC,AAEvD,IAF+C,AAE3C,EAAU,GAAc,EAAA,AAAjB,KAAa,EAAa,CAAC,GAClC,EAAU,IAAI,CAAP,AAAQ,CAD8B,CAAC,CAAC,SACpB,EAAE,CAUjC,AAVkC,GAI9B,EAAQ,KAAD,IAAU,EAAI,EAAQ,KAAD,IAAU,CAAC,cAAc,CAAC,KACxD,EAAU,EAAQ,EADiD,CAAC,AAC7D,EAAU,AADqD,IAC3C,CAAC,EAAY,AAAD,CAAE,CAKvC,EAAQ,KAAD,SAAe,CAAC,GAAc,CACvC,IAAI,EAAW,CADqB,AACd,CADe,AACd,EAAY,CAAC,AAElC,CAFU,CACY,KACf,CAFyB,GACD,EAA7B,AAA+B,OAAxB,GACC,EAIb,AAED,GAPqB,GACC,AAMf,CANgB,AAMf,CAAC,CACX,CAAC,CAAC,AASF,CAAC,CAAC,EAVgB,CAAC,SAUL,CAAG,WACf,OACE,IAAI,CAAC,GAAG,CAAC,YAAY,EAAI,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,EAAI,IAAI,CAAC,OAAO,EAAE,AAE9E,CADG,AACF,CADG,AACF,AAOF,CAAC,CAAC,MAAM,CAAG,WACT,IAAI,EAAS,IAAH,AAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAEzC,AAF0C,aACtC,IAAyC,EAAnC,CAA4C,CAAA,CAAI,CAAC,AAAR,AAC5C,CACT,AAFiB,CAEhB,CAAC,AAOF,CAAC,CAAC,AATmB,CACN,CAAC,EADS,MAAM,CASlB,CAAG,GAToB,QAUlC,CAV2C,MAUpC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,AAC7D,CAD8D,AAC7D,CAAC,AAQF,CAAC,CAAC,SAAS,CAAG,CAAC,CAAC,WAAW,CAAC,AAQ5B,CAAC,CAAC,OAAO,CAAG,EAAO,IAAD,CAAM,CAAC,iBAAiB,CAAC,CAAC,AA0B5C,CAAC,CAAC,MAAM,CAAG,SAAS,CAAO,EACzB,IAAI,EAAM,CAAH,GAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,EAAI,CAAA,CAAE,CAAC,AACzC,EAAE,AAAG,IAAI,CAAC,MAAM,EAAE,CAKtB,AALuB,IAKlB,IAAM,KAAK,AAJhB,EAAU,GAAW,CAAA,CAAd,AAAgB,CAEnB,AAFoB,CAAP,CAEX,EAAE,EAAI,CAAD,CAAG,CAAG,CAAA,CAAE,CAAC,AAEA,EAClB,GAAI,EADqB,CAAE,GACjB,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAS,GAAQ,CACxD,CAD8C,AAAO,CAAC,EAChD,EAAuB,GAAlB,CAAsB,EAAnB,IAAI,CAAC,EAAM,CACrB,EADoB,EAChB,CAAC,KAAK,CAAC,iBAAiB,CAAG,GAC/B,EADoC,CAAC,CACjC,CAAC,EAAM,EAAE,CAAC,AAClB,AADc,GACD,IAAI,EAAb,EAAe,GAAV,MAAmB,AAC5B,CAAG,CAAC,CAAO,CAAC,EAAM,CAAC,CAAG,CAAL,CACjB,GAD2B,CAAC,GACrB,CAAG,CAAC,EAAM,CAClB,AAGH,AAJsB,EAAF,KAIb,CACT,CAAC,CADW,AACV,AAUF,CAXa,AAWZ,CAAC,OAAO,CAAG,WACV,IAAI,EAAU,IAAI,CAAP,AAAQ,KAAK,CAAC,iBAAiB,CAAC,CAAC,OACvC,AAAL,EACuB,EADnB,GAAQ,EAAE,CACiB,EAA3B,AAA6B,OAAtB,EAA6B,CAAE,IAAI,AAA5B,CAA8B,EAAS,KAAF,EAAS,CAAE,IAAI,CAAE,CAAC,AAClE,EAFc,CAAE,IAET,AAFa,CAEZ,AAFc,SAAS,CAAE,OAAO,CAAE,IAAI,CAAE,AAGzD,CAH0D,AAGzD,CAAC,AAUF,CAAC,CAAC,MAAM,CAAG,WACT,IAAI,EAAS,IAAH,AAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,CACpB,QAAQ,EAA1B,OAAO,GAAkC,GAA5B,IAAiB,CAAW,CAAI,EAAE,CACjD,CADsC,CAC7B,CAAA,CAAE,CAAC,CAAN,AAER,IAAI,EAAU,IAAI,CAAP,AAAQ,OAAO,EAAE,CAAC,IAAI,CAAC,OAC9B,EAAO,IAAI,AAAL,EAAO,CAEb,EAAQ,KAAD,EAAQ,CAAC,KAAK,CAAC,CAAG,CAAC,CAAC,GAAE,EAAO,IAAD,AAAK,CAAG,KAAA,CAAK,CAAC,AACjD,EAAQ,KAAD,EAAQ,CAAC,SAAS,CAAC,CAAG,CAAC,CAAC,GAAE,EAAO,IAAD,AAAK,CAAG,SAAA,CAAS,CAAC,CAHrC,CAK1B,CAAC,CAAC,AAWF,CAAC,CAAC,CAhB8B,CAAC,OAgBtB,CAAG,EAAO,IAAD,CAAM,CAAC,mBAAmB,CAAC,CAAC,AAWhD,CAAC,CAAC,QAAQ,CAAG,EAAO,IAAD,CAAM,CAAC,kBAAkB,CAAC,CAAC,AAQ9C,CAAC,CAAC,SAAS,CAAG,EAAO,IAAD,CAAM,CAAC,WAAW,CAAC,CAWvC,AAXwC,CAWvC,CAAC,OAAO,CAAG,EAAO,IAAD,CAAM,CAAC,SAAS,CAAC,CAAC,AAWpC,CAAC,CAAC,EAAE,CAAG,EAAO,IAAD,CAAM,CAAC,YAAY,CAAC,CAAC,AAWlC,CAAC,CAAC,MAAM,CAAG,EAAO,IAAD,CAAM,CAAC,QAAQ,CAAC,CAAC,AAgFlC,EAAA,OAAO,CAAC,CAAC,CAAC,CAAC,+KCxiBX,IAAA,EAAA,EAAA,EAA+B,CAAA,CAAA,QAC/B,EAAA,EAAkC,CAAA,CAAA,GADH,IAa/B,SAZkC,AAYlB,EAAM,CAAU,CAAE,CAAb,AAAiB,EACpC,EAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAE,EAAY,EAChC,CAFA,AAEC,CADmC,CADpC,AACqC,CAAC,EAAR,EAD9B,CAAA,EAIA,EAAA,EAFC,KAEM,CAAC,EAAO,EAAA,CAAF,KAAQ,CAAC,CAAC,AAOvB,EAAM,GAAD,MAAU,CAAC,MAAM,CAAG,WACvB,MAAO,OAAO,AAChB,CAAC,AADgB,CACf,AAQF,EAAM,GAAD,MAAU,CAAC,IAAI,CAAG,EAAM,GAAD,MAAU,CAAC,MAAM,CAAC,AAU9C,EAAM,GAAD,MAAU,CAAC,UAAU,CAAG,WAC3B,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CACtD,AADuD,CACtD,AADuD,CACtD,AAQF,EAAM,GAAD,MAAU,CAAC,IAAI,CAAG,EAAM,GAAD,MAAU,CAAC,UAAU,CAAC,AAUlD,EAAM,GAAD,MAAU,CAAC,MAAM,CAAG,WACvB,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAChD,AADiD,CAChD,AADiD,CAChD,AAQF,EAAM,GAAD,MAAU,CAAC,EAAE,CAAG,EAAM,GAAD,MAAU,CAAC,MAAM,CAAC,+EC5E5C,IAAM,EAAU,KAAH,OAAe,CAAC,AAE7B,EAAA,OAAA,CAAA,EAAA,OAAgC,AAAR,CAAc,AAErC,EADC,IAD6B,GACtB,EAAQ,IAAI,CAAL,AAAM,EACtB,CAAC,GAD2B,CAAC,CAAC,4KCD9B,IAAA,EAAA,EAAA,EAA+B,CAAA,CAAA,QAC/B,EAAA,EAAA,EAAA,CAAiC,CAAA,CADF,OAE/B,EAAA,EAAA,EAA+B,CAAA,CAAA,QAC/B,EAAA,EAAkC,CAAA,CAAA,GADH,IAc/B,SAbkC,AAalB,EAAM,CAAU,CAAE,CAAb,AAAiB,EACpC,EAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAE,EAAY,EAChC,CAAC,AAFD,CACoC,CAAC,AADrC,CACsC,EAAR,EAD9B,CAAA,EAIA,EAAA,EAFC,KAEM,CAAC,EAAO,EAAA,CAAF,KAAQ,CAAC,CAAC,AAEvB,IAAM,CAAC,CAAG,EAAM,GAAD,MAAU,CAAC,AAO1B,CAAC,CAAC,MAAM,CAAG,WACT,MAAO,OAAO,AAChB,CADiB,AAChB,CAAC,AAQF,CAAC,CAAC,IAAI,CAAG,CAAC,CAAC,MAAM,CAAC,AAUlB,CAAC,CAAC,OAAO,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAQnC,AARoC,CAQnC,CAAC,OAAO,CAAG,WACV,IAAI,EACF,IAAI,CADK,AACJ,KAAK,CAAC,kBAAkB,CAAC,EAC9B,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,EAC5B,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,EAClC,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC,AAEnC,GAAI,EAAS,KAAF,EAAS,EAAA,OAAO,CAAC,EAC9B,CAAC,CAAC,AAQF,CAAC,CAAC,CATmC,CAAC,CAAC,EAShC,CAAG,WACR,IAAI,EAAQ,GAAH,CAAO,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,AACvC,GAAI,EAAO,GAAF,IAAS,EAClB,GADuB,CAAC,AACpB,EAAU,IAAI,CAAP,AAAQ,OAAO,EAAE,CAAC,AAC7B,GAAI,EAAA,OAAO,CAAC,GAAU,IAAH,CAAC,EAAS,CAC/B,CAAC,CAAC,AA0BF,CAAC,CAAC,EA3BoC,CAAC,GA2B/B,CAAG,SAAU,CAAO,EAC1B,IAAI,EAAM,CAAH,GAAO,CAAC,UAAU,EAAE,CACvB,AADwB,EACtB,AAAG,IAAI,CAAC,OAAO,EAAE,CAAC,AAKxB,IAAK,IAAM,KAJX,AAIgB,EAJN,GAAW,CAAA,CAAd,AAAgB,CAAC,AAEpB,CAFa,CAEX,EAAE,EAAI,CAAD,CAAG,CAAG,CAAA,CAAE,CAAC,AAEA,EAClB,GAAI,EADqB,CAAE,GACjB,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAS,GAAQ,CACxD,CAD8C,AAAO,CAAC,EAChD,EAAuB,GAAlB,CAAsB,EAAnB,IAAI,CAAC,EAAM,CACrB,EADoB,EAChB,CAAC,KAAK,CAAC,SAAS,CAAG,GACvB,EAD4B,CAAC,CACzB,CAAC,EAAM,EAAE,CAAH,AAAI,AAClB,GAAa,IAAI,EAAb,EAAe,GAAV,MACT,AAD4B,CACzB,CAAC,CAAO,CAAC,EAAM,CAAC,CAAG,CAAL,CACjB,GAD2B,CAAC,GACrB,CAAG,CAAC,EAAM,CAAC,AACnB,AAGH,EAJoB,KAIb,CACT,CAAC,CAWD,AAXE,AADU,CAAC,AAYZ,CAAC,IAAI,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,AAWrC,CAAC,CAAC,QAAQ,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAW5C,AAX6C,CAW5C,CAAC,SAAS,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,AAQ/C,CAAC,CAAC,UAAU,CAAG,WAEb,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,EAAI,CAAA,CAAE,AAC/D,CADgE,AAC/D,CAAC,mLCvKF,IAAA,EAAA,EAAkC,CAAA,CAAA,OAClC,EAAA,EAAA,EAA2B,CAAA,CAAA,CADO,OAElC,EAAA,EAAA,EAA+B,CAAA,CAAA,CADJ,OAE3B,EAAA,EAAA,EAAA,CAAiC,CAAA,CADF,OAE/B,EAAA,EAAA,EAA+B,CAAA,CAAA,QAE3B,EAAO,EAAH,KAFuB,EAEnB,CAAG,EAAK,OAAA,EAAI,CAAD,GAAK,EAAE,AAAV,CAAU,CAAC,AAa/B,SAAgB,EAAS,CAAU,CAAE,CAAI,EACvC,CADsB,CACtB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAE,EAAY,EAChC,CAAC,AAFD,CACoC,CAAC,AADrC,CACsC,EAAR,KAD9B,CAAA,EAIA,EAAA,KAFC,EAEM,CAAC,EAAU,EAAA,IAAF,EAAQ,CAAC,CAAC,AAE1B,IAAM,CAAC,CAAG,EAAS,MAAD,GAAU,CAAC,AAO7B,CAAC,CAAC,MAAM,CAAG,WACT,MAAO,UAAU,AACnB,CADoB,AACnB,CAAC,AAQF,CAAC,CAAC,IAAI,CAAG,CAAC,CAAC,MAAM,CAAC,AA0BlB,CAAC,CAAC,MAAM,CAAG,SAAU,CAAO,EAC1B,IAAI,EAAM,CAAH,GAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAI,CAAA,CAAE,CAAC,AACjC,EAAE,AAAG,IAAI,CAAC,MAAM,EAAE,CAAC,AAKvB,IAAK,IAAI,KAAK,AAJd,EAAU,GAAW,CAAA,CAAd,AAAgB,CAAC,AAEpB,CAFa,CAEX,EAAE,EAAI,CAAD,CAAG,CAAG,CAAA,CAAE,CAAC,AAEF,EAAS,CACzB,IADuB,AACnB,EACa,GADR,CACY,CAAC,CAAC,AAArB,IAAI,CAAC,EAAM,CAAW,EAAZ,EAAgB,CAAC,KAAK,CAAC,SAAS,CAAG,GAAS,EAAJ,CAAC,CAAC,AAAM,CAAL,AAAM,EAAM,EAAE,AACxD,CADqD,AAAI,GACrD,EAAE,CAAf,IACJ,CAAG,AADM,CACL,CAAO,CADiB,AAChB,EAAM,CAAC,CAAG,CAAL,CACb,GADuB,CAAC,AACd,CAAL,AAAY,CAAC,EAAM,EAAE,CAAH,MAAU,CAAG,CAAC,EAAM,CAAC,CAGlD,AAFC,CAD+C,MAGzC,CACT,CAAC,CADW,AACV,AAWF,CAZa,AAYZ,CAAC,KAAK,CAAG,WACR,IAAI,EAAQ,GAAH,CAAO,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,AACvC,GAAI,EAAO,GAAF,IAAS,EAElB,GAFuB,CAAC,AAEpB,EAAS,IAAH,AAAO,CAAC,MAAM,EAAE,CAAC,AAC3B,GAAI,EAAA,OAAO,CAAC,GAAS,GAAH,CAAC,GAAS,CAC9B,CAAC,CAAC,AAQF,CAAC,CAAC,CATkC,CAAC,KAS5B,CAAG,WACV,IAAI,EAAU,IAAI,CAAC,AAAR,KAAa,CAAC,gBAAgB,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,AAC7E,GAAI,EAAS,KAAF,EAAS,EAAA,OAAO,CAAC,EAC9B,CAAC,CAAC,AAQF,CAAC,CAAC,CATmC,CAAC,CAAC,WASvB,CAAG,WACjB,IAAI,EACF,IAAI,CADK,AACJ,KAAK,CAAC,wBAAwB,CAAC,EACpC,IAAI,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC,AAEzC,GAAI,EACF,KADS,EACF,AADI,EACJ,OAAO,CAAC,EAEnB,CAAC,CAAC,AAUF,CAAC,CAAC,CAZwB,CAAC,CAAC,QAYf,CAAG,WACd,OAAO,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,AAC1C,CAD2C,AAC1C,CAAC,AAWF,CAAC,CAAC,IAAI,CAAG,WACP,IAAI,EAAO,EAAH,EAAO,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,AACrC,GAAoB,QAAQ,EAAxB,AAA0B,OAAnB,EACT,EADa,KACN,EAAK,EAAD,CAGb,CAHkB,CAAC,CAAC,CAGhB,EAAY,IAAI,CAAC,EAAR,OAAiB,EAAE,CAAC,AAC7B,EAAW,IAAI,CAAC,CAAR,OAAgB,EAAE,CAAC,AAC/B,GAAI,GAAa,EACf,IADW,EAAY,CAChB,CADkB,CACb,EAAD,AAAa,GAAG,CAAG,EAElC,CAFyB,AAExB,CAAC,AAcF,CAAC,CAAC,EAhBwC,CAAC,CAAC,KAgBjC,CAAG,WACZ,IAAI,EAAY,IAAI,CAAC,EAAR,GAAa,CAAC,kBAAkB,CAAC,CAAC,AAC/C,GAAyB,QAAQ,EAA7B,AAA+B,OAAxB,EACT,OADkB,AACX,EAAK,EAAD,CAGb,IAAI,EAHmB,AAGZ,CAHa,CAAC,AAGjB,EAAO,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,AACrC,GAAoB,QAAQ,EAAxB,AAA0B,OAAnB,EACT,EADa,KACN,EAAK,EAAD,CAAO,CAAF,CAAC,GAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,AAEnC,CAAC,AAFmC,CAElC,AAcF,CAAC,CAAC,QAAQ,CAAG,WACX,IAAI,EAAW,IAAI,CAAC,CAAR,IAAa,CAAC,iBAAiB,CAAC,CAAC,AAC7C,GAAI,AAAoB,QAAQ,EAAE,OAAvB,EACT,MADiB,CACV,EAAK,EAAD,CAGb,IAAI,CAHkB,CAAC,AAGZ,CAHa,CAGhB,EAAO,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,AACrC,GAAoB,QAAQ,EAAxB,AAA0B,OAAnB,GAIX,CAJe,GAIX,EAAQ,EAAK,CAAR,CAAO,CAAO,CAAF,CAAC,KAAQ,CAAC,GAAG,CAAC,CAAC,AACpC,GAAc,CAAC,CAAC,EAAE,CAAd,EAIJ,GAJS,IAIF,EAAK,EAAD,AAAM,EAAD,IAAO,CAAC,EAAQ,CAAC,CAAC,CAAL,AAAM,CAAC,AACtC,CAAC,CAAC,AAWF,CAAC,CAAC,GAAG,CAAG,WACN,OAAO,IAAI,CAAC,MAAM,EAAE,EAAI,IAAI,CAAC,QAAQ,EAAE,EAAI,IAAI,CAAC,KAAK,EAAE,AACzD,CAD0D,AACzD,CAAC,AAUF,CAAC,CAAC,WAAW,CAAG,WACd,OAAO,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,AAC5E,CAD6E,AAC5E,CAAC,AAQF,CAAC,CAAC,GAAG,CAAG,WACN,IAAI,EAAO,EAAH,EAAO,CAAC,QAAQ,EAAE,CAAC,AACvB,EAAM,CAAH,CAAG,OAAG,CAAC,IAAI,CAAC,MAAM,EAAE,CAAE,KAAK,CAAC,CAAC,OACpC,AAAW,IAAI,EAAX,AAAa,EAAO,CAAjB,CACD,CADqB,CAAC,EAClB,SAAY,IAAI,CAChB,AACH,AAFoB,EAAE,CAEnB,CADI,IAAI,CADkB,CAChB,CAAC,AACV,WAAW,EAAE,CAAG,EAAK,EAAD,SAAY,EAAE,CAAC,MAChD,CAAC,CAAC,AAWF,CAAC,CAAC,MAAM,CAAG,WACT,IAAI,EAAS,IAAH,AAAO,CAAC,MAAM,EAAE,CAAC,AAC3B,OACE,EAAA,OAAG,CAAC,EAAQ,IAAF,IAAU,CAAC,EAAI,EAAA,OAAG,CAAC,EAAQ,IAAF,MAAY,CAAC,EAAI,EAAA,OAAG,CAAC,EAAQ,IAAF,OAAa,CAE/E,AAFgF,CAE/E,AADE,CACD,AAUF,AAXI,CAWH,CAAC,QAAQ,CAAG,WACX,IAAI,EAAS,IAAH,AAAO,CAAC,MAAM,EAAE,CAAC,AAC3B,OAAO,EAAA,OAAG,CAAC,EAAQ,IAAF,MAAY,CAAC,EAAI,EAAA,OAAG,CAAC,EAAQ,IAAF,MAAY,CAAC,AAC3D,CAD4D,AAC3D,CAAC,AAWF,CAAC,CAAC,QAAQ,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,AAY7C,CAAC,CAAC,OAAO,CAAG,EAAA,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC,AAYzC,CAAC,CAAC,QAAQ,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,AAY5C,CAAC,CAAC,KAAK,CAAG,EAAA,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,AAYrC,CAAC,CAAC,MAAM,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,AAWxC,CAAC,CAAC,OAAO,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,AAW3C,CAAC,CAAC,MAAM,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,AAazC,CAAC,CAAC,QAAQ,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,gLC5X7C,IAAA,EAAA,EAAA,EAA+B,CAAA,CAAA,QAC/B,EAAA,EAAkC,CAAA,CAAA,GADH,IAE/B,EAAA,EAAsC,CAAA,CAAA,GADJ,IAElC,EAAA,EAAA,EAAA,CAAiC,CAAA,QACjC,EAAA,EAAA,EAA2B,CAAA,CAAA,QAc3B,SAAgB,AAdW,EAcL,CAAU,CAAE,CAAb,AAAiB,EACpC,EAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAE,EAAY,EAChC,CAAC,AAFD,CACoC,CAAC,AADrC,CACsC,EAAR,EAD9B,CAAA,EAIA,EAAA,EAFC,KAEM,CAAC,EAAO,EAAA,CAAF,KAAQ,CAAC,CAAC,AAEvB,IAAI,CAAC,CAAG,EAAM,GAAD,MAAU,CAAC,AAOxB,CAAC,CAAC,MAAM,CAAG,WACT,MAAO,OAAO,AAChB,CADiB,AAChB,CAAC,AAQF,CAAC,CAAC,IAAI,CAAG,CAAC,CAAC,MAAM,CAAC,AAWlB,CAAC,CAAC,KAAK,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,AAWhC,CAAC,CAAC,KAAK,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,AAW3C,CAAC,CAAC,QAAQ,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC,AAWjD,CAAC,CAAC,EAAE,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,AAUrC,CAAC,CAAC,SAAS,CAAG,WACZ,OACE,IAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,AAE7E,CAAC,AADE,CACD,AAUF,AAXI,CAWH,CAAC,WAAW,CAAG,WACd,OACE,IAAI,CAAC,KAAK,CAAC,yBAAyB,CAAC,EACrC,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAEvC,AAFwC,CAEvC,AADE,CAAC,AACF,AAUF,CAAC,CAAC,MAAM,CAAG,WACT,OAAO,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,AAC5E,CAD6E,AAC5E,CAAC,AAUF,CAAC,CAAC,UAAU,CAAG,WACb,OACE,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC,AAE/E,CADG,AACF,CADG,AACF,AAUF,CAAC,CAAC,SAAS,CAAG,WACZ,OACE,IAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAE5E,AAF6E,CAE5E,AADE,CACD,AAUF,AAXI,CAWH,CAAC,QAAQ,CAAG,WACX,OACE,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,AAE3E,CAAC,AADE,CAWH,AAXI,AACF,CAUD,CAAC,UAAU,CAAG,WACb,OACE,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC,AAE/E,CADG,AACF,CAAC,AADE,AAWJ,CAAC,CAAC,QAAQ,CAAG,WACX,OACE,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,AAE3E,CADG,AACF,CAAC,AADE,AAWJ,CAAC,CAAC,OAAO,CAAG,WAEV,OACE,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,EAC3B,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,EACjC,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,AAEpC,CADG,AACF,CADG,AACF,AAWF,CAAC,CAAC,GAAG,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAWtC,AAXuC,CAWtC,CAAC,GAAG,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,AAWvC,CAAC,CAAC,IAAI,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,AAWzC,CAAC,CAAC,KAAK,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,AAW3C,CAAC,CAAC,KAAK,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,AAW3C,CAAC,CAAC,MAAM,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAW5C,AAX6C,CAW5C,CAAC,MAAM,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC,AAW7C,CAAC,CAAC,QAAQ,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAWhD,AAXiD,CAWhD,CAAC,QAAQ,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC,AAUjD,CAAC,CAAC,cAAc,CAAG,WACjB,OACE,IAAI,CAAC,KAAK,CAAC,4BAA4B,CAAC,EACxC,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,AAE3C,CAAC,AADE,CAWH,AAVE,AADE,CAWH,CAAC,aAAa,CAAG,WAChB,OACE,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,EACvC,IAAI,CAAC,KAAK,CAAC,0BAA0B,CAAC,AAE1C,CAAC,AADE,CACD,AAWF,AAZI,CAYH,CAAC,WAAW,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAYtD,AAZuD,CAYtD,CAAC,IAAI,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,AAazC,CAAC,CAAC,QAAQ,CAAG,WACX,IAAI,EAAW,EAAA,IAAH,GAAM,CAAC,IAAI,CAAC,UAAU,EAAE,CAAE,UAAU,CAAC,CAAC,AAC9C,EAAQ,GAAH,CAAO,CAAC,KAAK,EAAE,EAAI,IAAI,CAAC,OAAO,EAAE,CAAC,AAE3C,GAAI,EAAU,MAAF,CAAS,EACrB,GAAI,CAAC,EAAO,AADiB,CAAC,EACpB,IAAS,CAAC,CAAC,AAErB,GAAI,IAAI,CAAC,KAAK,EAAE,CAAE,CAChB,IAAI,CAAC,CAAG,IAAI,CAAC,GAAG,EAAE,CAAC,AACf,CAAC,GAAE,IAAS,CAAJ,AAAK,CAEb,AAFc,CAEb,AADL,CAAC,CAAG,IAAI,CAAC,QAAQ,EAAA,CAAE,CAAC,CACb,KAAK,AAAI,CAAC,CAAC,AAEd,CADJ,AACK,CADJ,CAAG,IAAI,CAAC,QAAQ,EAAA,CAAE,CAAC,EACb,IAAS,CAAJ,AAAK,CAAC,AACnB,AAED,OAAO,CACT,CAAC,CAAC,AAQF,CAAC,CATa,AASZ,CATa,OASL,CAAG,WACX,IAAI,EAAQ,GAAH,CAAO,CAAC,UAAU,EAAE,CAAC,AAC1B,EAAW,EAAA,IAAH,GAAM,CAAC,EAAO,GAAF,OAAY,CAAC,CAAC,OACtC,AAAI,KAAK,CAAC,OAAO,CAAC,GACT,EAAS,GADQ,CAAC,EAAE,AACZ,AAAO,CAAC,SAAA,CAAI,EAAI,OAAS,IAAI,GAAb,CAAA,CAAa,CAAC,CAAV,AAAU,AAExC,EAAE,AACX,CADY,AACX,CAAC,AAQF,CAAC,CAAC,QAAQ,CAAG,WAEX,MAAO,CADK,IAAI,AACJ,CADK,GAAG,CAAC,UAAU,EAAI,EAAA,CAAE,CAAC,AACzB,QAAQ,EAAI,CAC3B,AAD4B,CAC3B,AAD4B,CAC3B,AAQF,CAAC,CAAC,QAAQ,CAAG,WAEX,MAAO,CADK,IAAI,AACJ,CADK,GAAG,CAAC,UAAU,EAAI,EAAA,CAAE,CAAC,AACzB,QAAQ,EAAI,KAAK,AAChC,CADiC,AAChC,CAAC,AAWF,CAAC,CAAC,QAAQ,CAAG,WAEX,OACE,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,EAClC,IAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC,EACnC,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,AAErC,CAAC,AADE,CAAC,AACF,AAWF,CAAC,CAAC,KAAK,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,AAyBxC,CAAC,CAAC,UAAU,CAAG,SAAU,CAAO,EAC9B,IAAI,EAAM,CAAH,GAAO,CAAC,KAAK,CAAC,YAAY,CAAC,EAAI,CAAA,CAAE,CAAC,AAGzC,IAAK,IAAM,KAFX,AAEgB,EAFN,EAEU,CAFC,CAAA,CAAE,AAAhB,CAGL,AAHsB,CAAP,EAGX,AADqB,CAAE,KACjB,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAS,GAAQ,CACxD,CAD8C,AAAO,CAAC,EAChD,EAAuB,GAAlB,CAAsB,EAAnB,IAAI,CAAC,EAAM,CACrB,EADoB,EAChB,CAAC,KAAK,CAAC,aAAa,CAAG,GAC3B,EADgC,CAAC,CAC7B,CAAC,EAAM,EAAE,CAAH,AAAI,AAClB,GAAa,IAAI,EAAb,EAAe,GAAV,MAAmB,AAC5B,CAAG,CAAC,CAAO,CAAC,EAAM,CAAC,CAAG,CAAL,CACjB,GAD2B,CAAC,GACrB,CAAG,CAAC,EAAM,CAAC,AACnB,AAGH,EAJoB,KAIb,CACT,CAAC,CADW,AAYZ,AAXE,CAWD,AAZY,CAYX,QAAQ,CAAG,WACX,OACE,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,EAC7B,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,EACjC,IAAI,CAAC,MAAM,EAAE,EACb,IAAI,CAAC,SAAS,EAAE,AAEpB,CADG,AACF,CADG,AACF,AAYF,CAAC,CAAC,KAAK,CAAG,WACR,IAAI,EACF,GADO,CACH,CAAC,KAAK,CAAC,cAAc,CAAC,EAC1B,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,EAC9B,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAC,AACrC,GAAI,EAAO,GAAF,IAAS,EAElB,GAFuB,CAAC,AAEpB,EAAS,IAAH,AAAO,CAAC,MAAM,EAAE,CAAC,AAC3B,GAAI,EAAA,OAAO,CAAC,GAAS,GAAH,CAAC,GAAS,CAC9B,CAAC,CAAC,AAcF,CAAC,CAAC,CAfkC,CAAC,KAe5B,CAAG,WACV,IAAI,EAAU,IAAI,CAAP,AAAQ,KAAK,CAAC,oBAAoB,CAAC,CAAC,AAC3C,EAAQ,GAAH,CAAO,CAAC,KAAK,EAAE,CAAC,AAQzB,MAJI,CAAC,GAAW,GAAS,CAAb,CAAmB,AAAV,GAAS,EAAM,CAAC,AAHV,oBAG8B,CAAC,EAAE,0CAHgC,CAAC,EAI3F,GAAU,IAAH,AAAO,CAAC,KAAK,CAAC,mBAAkB,CAAC,CAAC,AAGpC,AAsCT,QAtCiB,CAsCR,AAAS,CAAG,EACnB,GAAK,CAAD,CADW,CACP,CACW,CADT,OAAO,AACU,EAAvB,AAAyB,OAAlB,GAAG,AAGK,QAAQ,EAAvB,AAAyB,OAAlB,GAAG,AAOV,CAAC,KAAK,CAFV,AAEW,EAFL,CAAH,AAEW,CAAC,EAAE,MAFD,CADhB,AACiB,EADX,CAAH,AACiB,CADV,AACW,CAAC,AADb,MAAQ,CAAC,KAAK,CAAE,EAAE,CAAC,CAAC,GAN3B,OAAO,CAYX,CAAC,CArDiB,AAyCJ,CAAC,CAxCf,CAAC,CAAC,AASF,CAAC,CAAC,CAVuB,CAAC,CAAC,EAUpB,CAAG,WACR,IAAI,EAAU,IAAI,CAAC,AAAR,OAAe,EAAE,CAAC,AAC7B,MAA0B,QAAQ,CAAC,CAA5B,AAA6B,OAAtB,EAAuB,IAAI,CAApB,AAAqB,KAAK,EAAE,EAAI,CAAC,CAAa,AAAZ,CAAC,EAAc,CAAb,AAAc,CACzE,CAAC,CAAC,AAWF,CAAC,CAAC,EAZgE,MAYxD,CAAG,WAEX,IAAI,EAAO,EAAH,EAAO,CAAC,IAAI,EAAE,CAEtB,AAFuB,OACvB,EAAK,EAAD,IAAO,CAAG,IAAI,CAAC,MAAM,EAAE,CAAC,AACrB,IAAI,EAAA,QAAQ,CAAC,EAAM,EAAF,EAAM,CAAC,IAAI,CAAC,AACtC,CADuC,AACtC,CAAC,+KCllBF,IAAA,EAAA,EAAA,EAA+B,CAAA,CAAA,QAC/B,EAAA,EAAkC,CAAA,CAAA,GADH,IAE/B,EAAA,EAAgC,CAAA,CAAA,GADE,IAElC,EAAA,EAAA,EAAA,CAAiC,CADD,AACC,QAajC,SAAgB,EAAK,CAAU,CAAX,AAAa,CAAI,EACnC,EAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAE,EAAY,EAChC,CAFA,AAEC,CADmC,CADpC,AACqC,CAAC,EAAR,CAD9B,CAAA,EAIA,EAAA,CAFC,MAEM,CAAC,EAAM,EAAF,AAAE,MAAM,CAAC,CAAC,AAEtB,IAAM,CAAC,CAAG,EAAK,EAAD,OAAU,CAAC,AAOzB,CAAC,CAAC,MAAM,CAAG,WACT,MAAO,MAAM,AACf,CAAC,AADe,CACd,AAQF,CAAC,CAAC,IAAI,CAAG,CAAC,CAAC,MAAM,CAAC,AAUlB,CAAC,CAAC,QAAQ,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,AAUtC,CAAC,CAAC,IAAI,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,AAU9B,CAAC,CAAC,KAAK,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,AAU3C,CAAC,CAAC,IAAI,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC,AAUzC,CAAC,CAAC,GAAG,CAAG,EAAA,MAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,AAWvC,CAAC,CAAC,QAAQ,CAAG,WACX,OACE,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,EAClC,IAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC,EACnC,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,AAErC,CADG,AACF,CADG,AACF,AA0BF,CAAC,CAAC,UAAU,CAAG,SAAU,CAAO,EAC9B,IAAI,EAAQ,GAAH,CAAO,CAAC,KAAK,CAAC,YAAY,CAAC,EAAI,CAAA,CAAE,CAAC,AACvC,EAAW,IAAI,CAAC,CAAR,OAAgB,EAAE,CAAC,AAC3B,EAAO,EAAH,EAAO,CAAC,IAAI,EAAE,CAAC,AAMvB,IAAK,IAAM,KALX,AAKgB,EALN,GAAW,CAAA,CAAd,AAAgB,CAAC,AAEpB,CAFa,GAEH,EAAM,EAAR,CAAO,KAAS,CAAG,CAAA,CAAQ,CAAC,AACpC,IAAI,AAAE,EAAM,GAAD,CAAK,CAAG,CAAA,CAAI,CAEP,AAFQ,EAG1B,GAAI,EADqB,CAAE,GACjB,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAS,GAAQ,CACxD,CAD8C,AAAO,CAAC,EAChD,EAAuB,GAAlB,CAAsB,EAAnB,IAAI,CAAC,EAAM,CACrB,EADoB,EAChB,CAAC,KAAK,CAAC,aAAa,CAAG,GAC3B,EADgC,CAAC,CAC7B,CAAC,EAAM,EAAE,CAAH,AAAI,AAClB,GAAa,IAAI,EAAb,EAAe,GAAV,MAAmB,AAC5B,CAAK,CAAC,CAAO,CAAC,EAAM,CAAC,CAAG,CAAL,CACf,GADyB,CAAC,AAChB,CAAL,AAAY,CAAC,EAAM,EAAE,CAAH,MAAU,CAAK,CAAC,EAAM,CAAC,AACnD,AAGH,EAJoD,KAI7C,CACT,CAAC,CAAC,AAWF,CAAC,CAAC,AAZY,CAAC,IAYR,CAAG,WACR,IAAI,EACF,GADO,CACH,CAAC,KAAK,CAAC,sBAAsB,CAAC,EAAI,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CACtE,AADuE,GACnE,EAAO,GAAF,IAAS,EAElB,GAFuB,CAAC,AAEpB,EAAS,IAAH,AAAO,CAAC,MAAM,EAAE,CAAC,AAC3B,GAAI,EAAA,OAAO,CAAC,GAAS,GAAH,CAAC,GAAS,CAC9B,CAAC,CAAC,AAWF,CAAC,CAAC,CAZkC,CAAC,MAY3B,CAAG,WACX,IAAI,EAAW,IAAI,CAAC,CAAR,OAAgB,EAAE,CAAC,AAC3B,EAAO,EAAH,EAAO,CAAC,IAAI,EAAE,CACtB,AADuB,OAChB,GAAQ,CAAJ,CAAe,EAAW,GAAG,CAAjB,AAAoB,CAAnB,CAAC,AAAS,AAAgB,CACpD,CAAC,AADgD,CAAC,AAChD,AASF,CAVmD,AAUlD,AAVuD,CAAC,AAUvD,KAAK,CAAG,SAAU,CAAI,EACtB,OAAO,EAAO,EAAH,CAAC,CAAC,KAAU,CAAG,EAAO,EAAH,KAAU,CAAG,AAAF,CAAC,cAC5C,AAD4D,CAC3D,AAD4D,CAC3D,AASF,CAAC,CAAC,KAAK,CAAG,SAAU,CAAI,EACtB,IAAI,EAAO,EAAH,EAAO,CAAC,IAAI,EAAE,CAAC,AAIvB,OAHA,EAAK,EAAD,GAAM,CAAG,IAAI,CAAC,KAAK,CAAC,GACxB,CAD4B,CACvB,AADwB,CAAC,CAC1B,OAAU,CAAG,IAAI,CAAC,SAAS,EAAE,CAAC,AAClC,EAAK,EAAD,QAAW,CAAG,IAAI,CAAC,UAAU,EAAE,CAC5B,AAD6B,IACzB,EAAA,KAAK,CAAC,EAAM,EAAF,EAAM,CAAC,IAAI,CAAC,AACnC,CADoC,AACnC,CAAC,iLCpNF,IAAA,EAAA,EAAA,EAA+B,CAAA,CAAA,QAC/B,EAAA,EAA8B,CAAA,CAAA,GADC,IAE/B,EAAA,EAAgC,CAAA,CAAA,CADF,MAiB9B,QAhBgC,CAgBhB,EAAO,CAAU,CAAE,CAAI,CAAjB,CACpB,EAAA,IAAI,CAAC,IAAI,CAAC,IAAI,CAAE,EAAY,EAC9B,CAAC,AAFD,CACkC,CADlC,AACmC,CAAC,EAAR,GAD5B,CAAA,EAIA,EAAA,GAFC,IAEM,CAAC,EAAQ,EAAA,EAAF,EAAM,CAAC,CAOrB,AAPsB,EAOf,IAAD,KAAU,CAAC,MAAM,CAAG,WACxB,MAAO,QAAQ,AACjB,CADkB,AACjB,CAAC,AAQF,EAAO,IAAD,KAAU,CAAC,IAAI,CAAG,EAAO,IAAD,KAAU,CAAC,MAAM,CAS/C,AATgD,EASzC,IAAD,KAAU,CAAC,KAAK,CAAG,SAAU,CAAI,EACrC,OAAO,EAAO,EAAH,CAAC,CAAC,KAAU,CAAG,EAAO,EAAH,OAAY,CAAC,AAAE,CAAD,gBAAkB,AAChE,CADiE,AAChE,CAAC,AASF,EAAO,IAAD,KAAU,CAAC,KAAK,CAAG,SAAU,CAAI,EACrC,IAAI,EAAO,EAAH,EAAO,CAAC,IAAI,EAAE,CAAC,AAIvB,OAHA,EAAK,EAAD,GAAM,CAAG,IAAI,CAAC,KAAK,CAAC,GACxB,CAD4B,CAAC,AACxB,CADyB,CAC1B,OAAU,CAAG,IAAI,CAAC,SAAS,EAAE,CAAC,AAClC,EAAK,EAAD,QAAW,CAAG,IAAI,CAAC,UAAU,EAAE,CAAC,AAC7B,IAAI,EAAA,KAAK,CAAC,EAAM,EAAF,EAAM,CAAC,IAAI,CAAC,AACnC,CAAC,AADmC,CAClC,iLCjEF,IAAA,EAAA,EAAA,EAA+B,CAAA,CAAA,QAC/B,EAAA,EAAkC,CAAA,CAAA,GADH,IAc/B,SAbkC,AAalB,EAAO,CAAU,CAAE,CAAI,CAAjB,CACpB,EAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAE,EAAY,EAChC,CAAC,AAFD,CACoC,CAAC,AADrC,CACsC,EAAR,GAD9B,CAAA,EAIA,EAAA,GAFC,IAEM,CAAC,EAAQ,EAAA,EAAF,IAAQ,CAAC,CAAC,AAOxB,EAAO,IAAD,KAAU,CAAC,IAAI,CAAG,WACtB,MAAO,QAAQ,AACjB,CADkB,AACjB,CAAC,gYC3BF,IAAA,EAAA,EAAkC,CAAA,CAAA,OAoBzB,OAAA,EApByB,YAoBzB,CAAA,EAAA,SAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OApBA,EAAA,MAAM,CAAA,GACf,AAmBe,IAnBf,EAAA,EAAgC,CAAA,CAAA,MAmBf,OAAA,EAnBe,YAmBf,CAAA,EAAA,QAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAnBR,EAAA,KAAK,CAAA,GAmBQ,AAlBtB,IAAA,EAAA,EAAgC,CAAA,CAAA,OAkBR,OAAA,CAlBQ,aAkBR,CAAA,EAAA,QAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAlBf,EAAA,KAAK,CAAA,GAkBe,AAjB7B,IAAA,EAAA,EAAsC,CAAA,CAAA,OAiBP,OAAA,cAAA,CAAA,EAAA,WAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAjBtB,EAAA,QAAQ,CAAA,GAiBsB,AAhBvC,IAAA,EAAA,EAAgC,CAAA,CAAA,OAgBS,OAAA,CAhBT,aAgBS,CAAA,EAAA,QAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAhBhC,EAAA,KAAK,CAAA,GAgBgC,AAf9C,IAAA,EAAA,EAA8B,CAAA,CAAA,OAekB,OAflB,AAekB,cAAA,CAAA,EAAA,OAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAfvC,EAAA,IAAI,CAAA,GAeuC,AAdpD,IAAA,EAAA,EAAkC,CAAA,CAAA,OAcoB,OAAA,EAdpB,YAcoB,CAAA,EAAA,SAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAd7C,EAAA,MAAM,CAAA,GAc6C,AAb5D,IAAA,EAAA,EAAkC,CAAA,CAAA,OAa4B,OAAA,EAb5B,YAa4B,CAAA,EAAA,SAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAbrD,EAAA,MAAM,CAAA,GAEf,AAWoE,EAXpE,OAAA,CAAA,EAAA,EAAA,CAAA,EACK,EAAA,MAAM,EAAA,CACT,KAAK,CAAA,EAAA,KAAA,CACL,KAAK,CAAA,EAAA,KAAA,CACL,QAAQ,CAAA,EAAA,QAAA,CACR,KAAK,CAAA,EAAA,KAAA,CACL,IAAI,CAAA,EAAA,IAAA,CACJ,MAAM,CAAA,EAAA,MAAA,CACN,MAAM,CAAA,EAAA,MAAA,GACN,oDCnBF,QADqB,eAAjB,EAAI,IAAK,EAAI,EAAE,CACZ,KAAO,CAAG,CAAC,EAAI,CAAG,CAAC,EAAM,GAAA,CAAG,CAAE,QAAQ,CAAC,IAAI,SAAS,CAAC,GAErD,SAAS,IACf,IAAS,EAAL,EAAE,EAAQ,EAAI,GAElB,GAAI,CAAC,GAAY,EAAM,GAAM,IAAM,CAElC,IADA,EAAS,MAAM,EAAE,KACV,KAAK,CAAM,CAAC,EAAE,CAAG,IAAM,KAAK,MAAM,GAAK,EAC9C,EAAI,EAAM,CACX,CAEA,KAAO,EAAI,GAAI,IACd,AADmB,EACb,CAAM,CAAC,EAAM,EAAE,CACd,GAAH,EAAM,GAAO,CAAG,CAAO,GAAN,EAAW,GAAG,CACvB,GAAH,EAAM,GAAO,CAAG,CAAC,AAAM,KAAK,IAAI,CACpC,GAAO,CAAG,CAAC,EAAI,CAEZ,EAAJ,GAAS,EAAI,GAAK,EAAI,KAAI,GAAO,GAAA,EAItC,OADA,IACO,CACR,CEvBO,SAAS,EAAK,CAAG,CAAE,CAAI,CAAE,CAAG,EAClC,EAAK,KAAK,GAAK,CAAD,CAAM,EAAK,KAAK,CAAC,IAAA,CAAI,CAEnC,IADA,IAA+B,EAAG,EAA9B,EAAE,EAAG,EAAE,EAAK,MAAM,CAAE,EAAE,EAGzB,AAFM,EAAI,EAAG,CAET,AAAM,cADV,EAAI,GAAG,CAAI,CAAC,IAAA,AAAI,GACe,gBAAN,GAA6B,aAAa,CAAnB,GAChD,EAAI,CAAC,CAAC,EAAE,CAAI,IAAM,EAAK,EAAO,OAAM,AAAC,EAAE,CAAC,CAAC,EAAE,AAAF,GAAM,OAAO,EAAS,EAAa,EAAR,CAAI,CAAC,EAAE,EAAO,GAAO,CAAC,CAAH,AAAI,CAAH,EAAM,CAAI,CAAC,EAAA,AAAE,EAAE,OAAO,CAAC,KAAQ,CAAC,EAAI,EAAE,AAEhI,0FIOe,CFV4B,CAAA,CEUT,CAAA,EFVe,EHcvB,kBKFrB,CAAH,SAAI,CAAe,CAAE,CAAe,CAAE,CAAe,qBAE/C,CAAA,KAAA,CAAO,IAAI,CAAC,CACd,MAAK,EACL,QAAA,SAEA,MAAM,CAAA,GAEV,CAAC,0CAEc,iCAEf,CAAC,kDAEW,CAAZ,GLYgC,eKXtB,CAAC,CLYC,GKZG,CAAA,MAAO,CAAG,EAAG,KAClB,EAAY,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAC,CDoBpB,CCpB0B,CDoBnB,CAAA,WCnBhB,EHUE,AGVE,CAAA,CAAA,CAAA,EAAA,QAAA,EAAA,CAAA,EAAA,EAAA,QAAA,EAAA,CAAA,EACL,GAAG,oBACc,CAAC,EAAI,CAAD,KAAO,CAAE,KAAM,GAAG,CAAC,CAC3C,MAAM,CAAE,EAAI,CAAD,KAAO,EACnB,CAAA,OAEM,EHKI,AGLC,EAAD,EAAQ,CAAA,CAAD,GAEd,CHIG,CGJG,MAAA,CAAA,EAAA,MAAA,CAAA,EAAA,EAAI,CAAD,GAAC,AAAI,EAAA,KAAA,EAAA,EAAE,WAAW,EAAA,CAAE,CAAA,EAAI,EAAE,CAAN,AAAM,AAKvC,CFqBK,MEzBD,CAAI,AADyB,CACxB,EAAI,EAAE,CACb,CAF+B,CAEzB,CAAH,EAAG,CAFyB,KAEzB,CAAG,EAAG,CAAA,IAAA,MAAA,CAAI,IAAI,CAAC,MAAM,GAAE,CAAE,CAAA,AFwB5B,CAAA,EAAA,EAAA,QAAA,EAAA,CAAA,EAAA,EAAA,QAAA,EAAA,CAAA,EEpBA,GAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EACQ,CAAA,CAAA,GAEZ,CAAA,CAAgC,EAG/B,QAAQ,KAAA,CACV,CADiB,IHGI,CAAC,ACeE,CEjBjB,CAAC,KAAK,CAAC,GAEd,OAAO,CAAC,GAAG,CAAC,SAAS,AAElB,CAFmB,CAAA,CAGpB,CAAC,IAAI,CAAC,OAAO,CAAC,SAAC,CAAQ,MACjB,EAA2B,EAAQ,KAA9B,CAA8B,AAA5B,EAAoB,EAAQ,GAArB,GAAqB,CAArB,CAAE,EAAW,EAAQ,EAAb,IAE9B,AAF2C,AAAb,CAEhB,AAF6B,SAE3C,GD/BsB,SC+BqB,CAAnB,ID/BF,MCgCZ,CD/BT,EAAA,CC+Ba,GD/BP,IC+Bc,CAAE,EAAA,EAAU,EAAE,CAAC,CAAP,AAAO,GAAP,IAEpB,CAAA,EAAO,CAFO,AAEN,MAFY,CAEL,CAAE,EAAA,CAFG,CAEO,EAAE,AAAN,CAAO,CAAP,AAAO,AAFV,CDSR,CCFzB,IAAI,CAAA,IAL0B,CAKpB,CAAG,CDEF,CAAA,ACDb,CAAC,CANqC,CAOxC,CAAC,AA3DD,GAoDwC,AHtCxC,CFHG,CAAA,GKyCqC,QHtCxC,SAAA,IACE,GFDK,CAAA,CAAA,OAAA,CECmB,EAAE,AAiD5B,CFlDsB,AECM,AAiD3B,AFjDE,AEiDH,CGLC,2BH3CU,CAAT,EEUgB,OAAA,CFVQ,CAAE,CAAM,CAAE,CAAe,UAAvB,OAAA,CAAM,CFEF,CED5B,IAAA,CAAK,OAAO,CAAC,IAAA,CAAA,CACX,OAAM,eAEA,QAAI,CAAA,CAAI,EAAE,KAAV,CACA,GADI,iBAEC,KAAA,GAAQ,EAAE,EAEzB,CAAC,CAED,EAAA,SAAA,CAAA,KAAK,CAAA,SAAC,CAAc,CAAE,CAAa,CEYb,AFZe,CAAe,OAC7C,OAAO,CAAA,IAAA,CAAA,CACV,OAAM,EACN,EFKuB,CAAA,CENjB,EACD,EACL,WAAM,EAAA,EAAA,EAAU,CAChB,KAAM,KADA,GAEN,UAAA,KAAgB,GAAG,MAIvB,EAAA,SAAA,CAAA,KAAK,CAAA,iBACe,IAAA,CAAK,OAAO,CAAC,GAAG,CAAA,SAAE,CAAA,EAAM,MAAA,CAAA,EAAA,EAAA,QAAA,EAAA,CAAA,EAAA,EAAA,QAAA,EAAA,CAAA,EACrC,CAAC,EAAA,CACJ,IAAI,CAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAFkB,CAGxC,CAAC,ACgBF,CDhBE,ACgBF,QDdW,KAAK,EAAE,OACT,GGHG,EHGE,CAAC,sBAIZ,CAAA,OAAQ,CAAG,EAAE,AACnB,CAAC,CAKD,EAAA,SAAA,CAAA,SAAA,CAAA,WACE,OAAO,IAAI,CAAC,OAAO,CAAA,GAAA,CAAA,SAAM,CAAC,EACxB,EGL+B,IHKxB,CACL,CAAC,CAAE,EAAA,MAAQ,CACX,CAAC,CAAE,EAAE,KAAK,GACP,EAAE,IAAI,CCaK,GDZX,AApDgD,OAChD,YACE,MAkDgB,AAhDd,CC6DmB,ADbJ,CAAA,IAAK,CAhDf,GAiDT,EAAE,SAAS,CAElB,CAAC,CAAC,CAAA,CGHL,CHKD,CAlDA,AAkDC,GAED,CAFC,CAED,SAAA,CAAA,EAAA,CCmBG,QAAA,kDDZH,CAAC,AAAD,SAP+B,EAAA,SAAA,EAAA,EAAA,GACpB,CCsBR,CAAA,SAAA,CAAA,KDtBa,CAAd,eAAe,IAAA,EAAA,EAAA,CAAwC,AAAxC,EAAA,EAAA,EAAA,UAAA,MAAwC,CAAxC,IAAwC,AAAxC,CAAwC,AAAxC,CAAA,EAAA,CAAA,SAAA,CAAA,EAAA,AAA2C,CAAC,AAAJ,CAC9C,EEEL,SAAA,CAAA,SFFc,CAAlB,EEEoC,aFFjB,IAAA,EAAA,EAAA,CAAA,EAAA,CAA4C,CAAA,EAA5C,UAAA,MAA4C,CAA5C,IAA4C,AAA5C,CAA4C,AAA5C,CAAA,EAAA,CAAA,SAAA,CAAA,EAAA,AAA+C,CAAC,CAC1D,EAAA,SAAA,CAAA,KAAK,CAAd,eAAe,IAAA,EAAA,EAAA,CAAA,EAAA,CAAwC,CAAxC,EAAA,UAAA,MAAwC,CEQ7C,AFRK,IAAwC,AAAxC,CAAwC,AAAxC,CAAA,EAAA,CAAA,SAAA,CAAA,EAA2C,AAA3C,CCuChB,ADvC4D,CAClD,EAAA,SAAA,CAAA,SAAA,CAAT,eAAmB,IAAA,EAAA,EAAA,CAA4C,AAA5C,EAAA,CAA4C,CAA5C,EAAA,UAAA,MAA4C,CAAA,IAA5C,CAA4C,AAA5C,CAAA,EAAA,CAAA,SAAA,CAAA,EAAA,CACjB,MAAO,EAAE,AACX,CADW,AACV,CACH,CAAA,CAAC,AAPD,CAA+B,MAO9B,GAPuC,GAOvC,uCC/DD,IAAA,EAKE,CHRC,AEGA,QCKW,CAA2B,uBACxB,OAAA,EAAA,EAAQ,CHNC,IAAS,GAAA,EGO/B,GAD8B,CAC9B,CAAK,EAD6B,CAAA,CAC7B,CAAO,OAAA,EAAA,EAAQ,IAAI,AAAJ,EAAI,EAAI,EAAJ,QAAA,IAAkB,CAAA,EAAlB,KAAA,KACV,OAAA,EAAA,EAAQ,MAAA,AAAM,EAAA,EAAI,EAAJ,AAAM,AACpC,CADoC,AACnC,CAGH,EAAA,IAJgC,OAAA,KAAA,MAgB5B,CDhBQ,ACgBI,CACZ,CAAA,CAAA,CACkC,CAAA,CACT,EHftB,EIQgB,GJRhB,IAAA,MGaE,EHbuB,CAAC,CGapB,AHboB,SGc7B,KAAA,EAAA,IAAuB,CCJX,EDKZ,CCLY,IDKZ,GAAA,CAAA,IAAA,EAAA,IAAa,CAAU,CAAE,QAAF,MATjB,CAAA,MAWF,CAAC,KAAK,CAAG,EACb,EHXI,CGUc,CAAA,AACd,CAAC,GAAG,CAAG,EAAE,CAAA,GACT,CAAC,MAAM,CAAA,YACD,CAAA,EAkEd,eA/De,CAAb,WAEA,CAAC,CAED,EAAA,SAAA,CAAA,MAAM,CAAN,SAAO,CAAkB,EACvB,CDjBC,CAAC,CAAA,ICiBK,EAAM,EAAE,GAAK,IAAA,CAAA,EAAA,8BAGf,CAAkC,EACvC,GAAI,EACF,CElBC,IFiBQ,CEjBR,CFqBH,ADrBe,OCqBT,IAAI,CDfD,CAAA,CCesB,MAAM,CAAE,gBAAgB,CAAE,CAC3D,AAD4D,CAAA,AAC3D,CAED,EAAA,SAAA,CAAA,GAAG,CAAH,SAAI,CAAe,CAAE,CAAe,CAAE,CAAe,EACnD,IAAA,CAAK,MAAM,CAAC,GAAA,CAAA,EAAW,EAAS,ADjBT,CAAC,CAAA,ACkB1B,CAAC,CAED,CAHgC,CAAQ,CAAC,CAAA,GAGzC,cAAA,CAAI,EAAA,SAAA,CAAA,IAAE,CAAA,KAAN,WACE,OAAO,IAAI,CAAC,GAAA,AACd,CAAC,iCAAA,AAED,EAAA,SAAA,CAAA,WAAW,CAAX,CCjDiB,QDiDL,CAAY,CAAE,CAAY,QAEpC,GAA2B,cAAc,GAArC,EAAA,KAAU,CAAA,IAAK,CAAA,EAAG,CAAqB,OACjB,EDbF,KAAA,CCaa,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA,AAE1C,GAAA,CAAA,MAAA,CAAA,EAAI,IAAI,CAAC,KAAK,CAAC,YAAY,AAAZ,EAAY,KAAA,EAAA,CAAA,CAAG,EAAe,AAAC,IAAK,GACjD,EADsD,EAAE,GACjD,CElBI,GFkBA,CAAC,KAAK,CAAA,AAKrB,OADA,EAAK,IAAI,CAAC,KAAK,CAAE,CCnBL,CDmBW,GAChB,IAAI,CAAA,KAAM,AACnB,CAAC,AADkB,CAGnB,EAAA,CCtBY,QDsBZ,CAAA,cAAc,CAAd,WACE,OAAO,IAAI,CAAA,eAAgB,EAG7B,EAAA,SAAA,CAAA,iBAAiB,CAAjB,SAAkB,CAA8B,EAC9C,IAAI,CAAC,eAAe,CAAG,GAGzB,EAAA,EAHgC,CAAA,MAGhC,CAAA,IAAI,CAAJ,WACE,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,AACzB,CADyB,AACxB,GAED,SAAA,CAAA,KAAK,CAAL,WACE,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAA,AACnB,IAAI,CAAC,KAAK,CAAC,KAAA,IAGb,EAAA,SAAA,CAAA,MAAM,CAAN,WACE,MAAO,IACD,IAAI,CAAC,GAAG,CACZ,MAAO,IAAI,CAAA,KAAM,CACjB,KAAM,IAAI,CAAA,MAAA,CAAQ,IAAI,SACb,IAAI,CAAC,KAAK,CAAC,EC9BR,KD8Be,CAC5B,AACH,CADG,AACF,CChCuB,ADiC1B,CCjC0B,ADiC1B,CAAC,AAtFD,SAsFC,sDH1HD,IAAA,EAAA,EAAA,CAAA,CAAA,eAgBgB,EAAA,CAAA,CAA4B,CAAA,QAChC,IAAI,CGbG,ACDe,CDCS,CAAA,KHarB,CAAA,EAAM,SAET,AIOb,SJPsB,CIOtB,EAAA,GDrBqD,CCqBrD,ADrBqD,KCqBX,AJNtC,IAAA,EAAA,KAAS,CAAC,EAAK,EAAA,EAGvB,aAAA,EAAA,IAAA,KACQ,IAAA,EAAA,QAAY,CAAA,EAAA,EAAA,UAGK,YACjB,EKNA,ELMI,EAAA,IAAI,CAAA,EAAA,EAAA,WAGU,gBACd,EAAA,KAAK,CAAA,EAAA,EAAA,EAGA,gBAAL,KACJ,IAAI,EAAA,KAAK,CAAA,EAAA,EAAA,EAGjB,AAAiB,WAAjB,EAAA,IAAA,KACQ,IAAI,EAAA,MAAM,CAAC,CGEP,CDNO,AFIK,EAAA,SAGjB,cAAc,CAAC,EAAK,CAAF,KAAS,OACzB,gBAIF,CACT,CAAC,WItBC,CAAmB,CACnB,CAAiB,CACjB,CAA2C,oIAGvC,EAAgB,EAAS,EAAK,CAAF,AAC9B,MC8B6C,CD9BtC,EACP,UAAU,IACT,QAAQ,EAAkB,CAAA,IAsCZ,ECPI,GAAA,oBDOJ,CAAA,EAAA,EAAA,MAAA,AAAU,CAAA,CAAA,MAAA,CAAA,EAAA,EAAA,CACV,IADU,GAAhB,EAAA,CAAA,CAAA,EAAA,CACM,CAAA,EAAM,AAtCvB,AAsCiB,OAAA,EAtCF,AACb,CAAmB,CACnB,CAAiC,GAoCG,6HA/BpC,OAHI,GAAa,EACb,EAAqC,IAAI,CAAA,AAE7C,CAAA,EAAA,AAAM,EAAE,AAAC,CACP,CCjBW,GDgBb,IACW,EAAS,EAAO,CACvB,EADqB,KACd,IAAI,QACD,IAEZ,CJR2B,CAAC,CAAA,QIQjB,CAAE,EACb,IAAI,CAAA,IADoB,KACnB,CAAG,EACN,GAAa,EAED,EAFK,CAAA,EAAP,CAEQ,CAAd,GAAG,CACL,EAAgB,IAAA,EAGd,GAAG,EAAE,CACS,CCrBZ,CDqBgB,GAAA,AAAG,CAE3B,CAAC,WAWH,OA3BA,EAAA,IAAA,GAmBI,AAAC,GAAgC,GCb3B,GDaiC,CAAxB,ECdN,CDgBX,GAAc,YAAY,CAAA,CAAA,EAAA,EAAA,QAAA,EAAA,CAAA,EAAA,EAAA,QAAA,EAAA,CAAA,EACrB,EAAM,GAAD,SAAa,GAAA,CAAA,EAAA,EAAA,CAAA,CACpB,EAAW,EAAG,EAAK,CAAA,CAAA,CAAA,CACrB,CADa,AACb,AAGH,GAAO,EAAa,CAAA,MAIiB,EAAe,EAJhC,AAIkC,CAAC,CAAA,OACvD,AADkD,GAC9C,AAAW,IAAI,EAAE,EADf,EAAS,EAAA,IAAA,EAAA,EAEb,MAAA,CAAA,EAAA,AAAO,IAAI,CAAA,CAAA,AAEb,EAAgB,AAFd,MAEoB,CAAA,mBALP,IAAU,CAAA,YAQ3B,MAAA,GAAO,EAAa,CAAA,KAGhB,AAFL,KADqB,IAGN,EACd,CAAsB,CACtB,CAA0C,WAE3B,EAAM,CAAA,EAAD,0HAGlB,OAFI,GAAa,EAEjB,GAAM,EAAA,CACJ,QAAS,EAAS,EAAI,CAAD,GAAJ,CAAU,CAAE,CAC3B,KAAK,EAAE,EACP,EADW,MACH,CAAE,KAAK,AAEjB,YAAY,OAAE,EAAA,EAAgB,CAAA,CAAE,CAChC,IAAI,CAAA,AADsB,EAAA,GAAA,IACrB,CAAG,CFbmD,CEczD,CAFY,EAEC,EACT,EADa,CAAA,AACV,CACL,CADO,CACH,CAAD,CAJmB,GAIb,CAAG,CAJU,CAIN,CAAD,EAAI,AAAH,CAAG,AAEvB,AAN0B,CAMzB,GACD,CAAA,OAEF,GAdA,EAAA,IAAA,EAYE,CAAA,AAEE,CAAC,EACH,MAAM,EADO,EAAE,AACL,EAAmB,CAC3B,KAAK,EAAE,EACP,GADY,CACR,CAAE,CAFoB,wBAEK,CAC/B,MAAM,CAAE,oCAAoC,CAC7C,CAAC,CAAA,AAGJ,MAAA,CAAA,EAAA,AAAO,EAAG,CAAA,KAAV,AACD,AAED,MAAO,CACL,IAAI,CAAE,qBAAA,MAAA,CAAqB,EAAE,AAAC,IAAI,CAAE,CACpC,IAAI,CAAE,QAAQ,CACd,OAAO,CAAE,OAAO,CAEhB,QAAQ,CAAE,WAAe,MAAA,EAAA,CAAI,CAAA,AAC7B,IAAI,CAAE,SAAC,CAAG,EAAuB,OAAA,OAAO,CAAC,OAAO,CAAC,EAAhB,CAAmB,AAAC,CAAA,AAErD,KAAK,CAAE,EACP,GADY,CACR,CAAE,EACN,GADW,GACL,CAAE,EACR,GADa,KACL,CAAE,EACV,GADe,EACV,CAAE,EACP,GADY,EACP,CAAE,EACR,AACH,CADG,AACF,EAFe","ignoreList":[0,4,5,6,7,8,19,20,21,22,23,24,25]}