{"version":3,"sources":["../../../../node_modules/%40toruslabs/bs58/dist/lib.esm/bs58.js","../../../../node_modules/%40web3auth/no-modal/dist/lib.esm/providers/solana-provider/rpc/solanaRpcMiddlewares.js","../../../../node_modules/%40web3auth/no-modal/dist/lib.esm/providers/solana-provider/rpc/JrpcClient.js"],"sourcesContent":["const base = ALPHABET => {\n  if (ALPHABET.length >= 255) {\n    throw new TypeError(\"Alphabet too long\");\n  }\n  const BASE_MAP = new Uint8Array(256);\n  for (let j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255;\n  }\n  for (let i = 0; i < ALPHABET.length; i++) {\n    const x = ALPHABET.charAt(i);\n    const xc = x.charCodeAt(0);\n    if (BASE_MAP[xc] !== 255) {\n      throw new TypeError(`${x} is ambiguous`);\n    }\n    BASE_MAP[xc] = i;\n  }\n  const BASE = ALPHABET.length;\n  const LEADER = ALPHABET.charAt(0);\n  const FACTOR = Math.log(BASE) / Math.log(256); // log(BASE) / log(256), rounded up\n  const iFACTOR = Math.log(256) / Math.log(BASE); // log(256) / log(BASE), rounded up\n  function encode(source) {\n    // eslint-disable-next-line no-empty\n    if (source instanceof Uint8Array) ; else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength);\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source);\n    }\n    if (!(source instanceof Uint8Array)) {\n      throw new TypeError(\"Expected Uint8Array\");\n    }\n    if (source.length === 0) {\n      return \"\";\n    }\n    // Skip & count leading zeroes.\n    let zeroes = 0;\n    let length = 0;\n    let pbegin = 0;\n    const pend = source.length;\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++;\n      zeroes++;\n    }\n    // Allocate enough space in big-endian base58 representation.\n    const size = (pend - pbegin) * iFACTOR + 1 >>> 0;\n    const b58 = new Uint8Array(size);\n    // Process the bytes.\n    while (pbegin !== pend) {\n      let carry = source[pbegin];\n      // Apply \"b58 = b58 * 256 + ch\".\n      let i = 0;\n      for (let it1 = size - 1; (carry !== 0 || i < length) && it1 !== -1; it1--, i++) {\n        carry += 256 * b58[it1] >>> 0;\n        b58[it1] = carry % BASE >>> 0;\n        carry = carry / BASE >>> 0;\n      }\n      if (carry !== 0) {\n        throw new Error(\"Non-zero carry\");\n      }\n      length = i;\n      pbegin++;\n    }\n    // Skip leading zeroes in base58 result.\n    let it2 = size - length;\n    while (it2 !== size && b58[it2] === 0) {\n      it2++;\n    }\n    // Translate the result into a string.\n    let str = LEADER.repeat(zeroes);\n    for (; it2 < size; ++it2) {\n      str += ALPHABET.charAt(b58[it2]);\n    }\n    return str;\n  }\n  function decodeUnsafe(source) {\n    if (typeof source !== \"string\") {\n      throw new TypeError(\"Expected String\");\n    }\n    if (source.length === 0) {\n      return new Uint8Array();\n    }\n    let psz = 0;\n    // Skip and count leading '1's.\n    let zeroes = 0;\n    let length = 0;\n    while (source[psz] === LEADER) {\n      zeroes++;\n      psz++;\n    }\n    // Allocate enough space in big-endian base256 representation.\n    const size = (source.length - psz) * FACTOR + 1 >>> 0; // log(58) / log(256), rounded up.\n    const b256 = new Uint8Array(size);\n    // Process the characters.\n    while (source[psz]) {\n      // Decode character\n      let carry = BASE_MAP[source.charCodeAt(psz)];\n      // Invalid character\n      if (carry === 255) {\n        return;\n      }\n      let i = 0;\n      for (let it3 = size - 1; (carry !== 0 || i < length) && it3 !== -1; it3--, i++) {\n        carry += BASE * b256[it3] >>> 0;\n        b256[it3] = carry % 256 >>> 0;\n        carry = carry / 256 >>> 0;\n      }\n      if (carry !== 0) {\n        throw new Error(\"Non-zero carry\");\n      }\n      length = i;\n      psz++;\n    }\n    // Skip leading zeroes in b256.\n    let it4 = size - length;\n    while (it4 !== size && b256[it4] === 0) {\n      it4++;\n    }\n    const vch = new Uint8Array(zeroes + (size - it4));\n    let j = zeroes;\n    while (it4 !== size) {\n      vch[j++] = b256[it4++];\n    }\n    return vch;\n  }\n  function decode(s) {\n    const buffer = decodeUnsafe(s);\n    if (buffer) {\n      return buffer;\n    }\n    throw new Error(`Non-base${BASE} character`);\n  }\n  return {\n    encode,\n    decodeUnsafe,\n    decode\n  };\n};\nconst ALPHABET = \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\";\nconst bs58 = base(ALPHABET);\n\nexport { bs58 };\n","import { createAsyncMiddleware, mergeMiddleware } from '@web3auth/auth';\nimport { SOLANA_METHOD_TYPES } from '@web3auth/ws-embed';\n\nfunction createGetAccountsMiddleware({\n  getAccounts\n}) {\n  return createAsyncMiddleware(async (request, response, next) => {\n    const {\n      method\n    } = request;\n    if (method !== SOLANA_METHOD_TYPES.GET_ACCOUNTS) return next();\n    if (!getAccounts) throw new Error(\"WalletMiddleware - opts.getAccounts not provided\");\n    // This calls from the prefs controller\n    const accounts = await getAccounts(request);\n    response.result = accounts;\n    return undefined;\n  });\n}\nfunction createGetPublicKeyMiddleware({\n  getPublicKey\n}) {\n  return createAsyncMiddleware(async (request, response, next) => {\n    const {\n      method\n    } = request;\n    if (method !== \"getPublicKey\") return next();\n    if (!getPublicKey) throw new Error(\"WalletMiddleware - opts.getPublicKey not provided\");\n    const publicKey = await getPublicKey(request);\n    response.result = publicKey;\n    return undefined;\n  });\n}\nfunction createRequestAccountsMiddleware({\n  requestAccounts\n}) {\n  return createAsyncMiddleware(async (request, response, next) => {\n    const {\n      method\n    } = request;\n    if (method !== SOLANA_METHOD_TYPES.SOLANA_REQUEST_ACCOUNTS) return next();\n    if (!requestAccounts) throw new Error(\"WalletMiddleware - opts.requestAccounts not provided\");\n    // This calls the UI login function\n    const accounts = await requestAccounts(request);\n    response.result = accounts;\n    return undefined;\n  });\n}\nfunction createGenericJRPCMiddleware(targetMethod, handler) {\n  return createAsyncMiddleware(async (request, response, next) => {\n    const {\n      method\n    } = request;\n    if (method !== targetMethod) return next();\n    if (!handler) throw new Error(`WalletMiddleware - ${targetMethod} not provided`);\n    const result = await handler(request);\n    response.result = result;\n    return undefined;\n  });\n}\nfunction createSolanaMiddleware(providerHandlers) {\n  const {\n    getAccounts,\n    requestAccounts,\n    signTransaction,\n    signAndSendTransaction,\n    signAllTransactions,\n    signMessage,\n    getPrivateKey,\n    getSecretKey,\n    getPublicKey\n  } = providerHandlers;\n  return mergeMiddleware([createRequestAccountsMiddleware({\n    requestAccounts\n  }), createGetAccountsMiddleware({\n    getAccounts\n  }), createGenericJRPCMiddleware(SOLANA_METHOD_TYPES.SIGN_TRANSACTION, signTransaction), createGenericJRPCMiddleware(SOLANA_METHOD_TYPES.SEND_TRANSACTION, signAndSendTransaction), createGenericJRPCMiddleware(SOLANA_METHOD_TYPES.SIGN_ALL_TRANSACTIONS, signAllTransactions), createGenericJRPCMiddleware(SOLANA_METHOD_TYPES.SIGN_MESSAGE, signMessage), createGenericJRPCMiddleware(SOLANA_METHOD_TYPES.SOLANA_PRIVATE_KEY, getPrivateKey), createGenericJRPCMiddleware(SOLANA_METHOD_TYPES.PRIVATE_KEY, getPrivateKey), createGenericJRPCMiddleware(\"public_key\", getPublicKey), createGenericJRPCMiddleware(\"solanaPublicKey\", getPublicKey), createGenericJRPCMiddleware(\"solanaSecretKey\", getSecretKey)]);\n}\nfunction createSolanaChainSwitchMiddleware({\n  switchSolanaChain\n}) {\n  return mergeMiddleware([createGenericJRPCMiddleware(\"switchSolanaChain\", switchSolanaChain)]);\n}\nfunction createSolanaAccountMiddleware({\n  updatePrivatekey\n}) {\n  return mergeMiddleware([createGenericJRPCMiddleware(\"updateAccount\", updatePrivatekey)]);\n}\n\nexport { createGenericJRPCMiddleware, createGetAccountsMiddleware, createGetPublicKeyMiddleware, createRequestAccountsMiddleware, createSolanaAccountMiddleware, createSolanaChainSwitchMiddleware, createSolanaMiddleware };\n","import { createFetchMiddleware } from '@toruslabs/base-controllers';\nimport { mergeMiddleware } from '@web3auth/auth';\n\nfunction createSolanaChainIdMiddleware(chainId) {\n  return (req, res, next, end) => {\n    if (req.method === \"solana_chainId\") {\n      res.result = chainId;\n      return end();\n    }\n    return next();\n  };\n}\nfunction createSolanaProviderConfigMiddleware(providerConfig) {\n  return (req, res, next, end) => {\n    if (req.method === \"solana_provider_config\") {\n      res.result = providerConfig;\n      return end();\n    }\n    return next();\n  };\n}\nfunction createConfigMiddleware(providerConfig) {\n  const {\n    chainId\n  } = providerConfig;\n  return mergeMiddleware([createSolanaChainIdMiddleware(chainId), createSolanaProviderConfigMiddleware(providerConfig)]);\n}\nfunction createSolanaJsonRpcClient(providerConfig) {\n  const {\n    rpcTarget\n  } = providerConfig;\n  const fetchMiddleware = createFetchMiddleware({\n    rpcTarget\n  });\n  const networkMiddleware = mergeMiddleware([createConfigMiddleware(providerConfig), fetchMiddleware]);\n  return {\n    networkMiddleware,\n    fetchMiddleware\n  };\n}\n\nexport { createConfigMiddleware, createSolanaChainIdMiddleware, createSolanaJsonRpcClient, createSolanaProviderConfigMiddleware };\n"],"names":[],"mappings":"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","ignoreList":[0,1,2]}