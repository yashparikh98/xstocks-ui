{"version":3,"sources":["../../../../node_modules/%40segment/analytics-page-tools/dist/esm/index.mjs","../../../../node_modules/js-cookie/dist/js.cookie.mjs","../../../../node_modules/%40web3auth/no-modal/dist/lib.esm/base/analytics.js","../../../../node_modules/%40segment/analytics-next/src/core/storage/types.ts","../../../../node_modules/%40segment/analytics-next/src/core/user/tld.ts","../../../../node_modules/%40segment/analytics-next/src/lib/bind-all.ts","../../../../node_modules/%40segment/analytics-next/src/plugins/segmentio/fetch-dispatcher.ts","../../../../node_modules/%40segment/analytics-core/src/validation/assertions.ts","../../../../node_modules/%40segment/analytics-next/src/core/storage/settings.ts","../../../../node_modules/%40segment/analytics-core/src/utils/pick.ts","../../../../node_modules/%40segment/analytics-next/src/core/arguments-resolver/index.ts","../../../../node_modules/%40segment/analytics-next/src/core/storage/index.ts","../../../../node_modules/%40segment/analytics-next/src/core/plugin/index.ts","../../../../node_modules/%40segment/analytics-core/src/task/task-group.ts","../../../../node_modules/%40segment/analytics-next/src/core/storage/universalStorage.ts","../../../../node_modules/%40segment/analytics-next/src/core/page/add-page-context.ts","../../../../node_modules/%40segment/analytics-core/src/events/index.ts","../../../../node_modules/%40segment/analytics-next/src/plugins/segmentio/batched-dispatcher.ts","../../../../node_modules/%40segment/analytics-next/src/core/user/index.ts","../../../../node_modules/%40segment/analytics-next/src/core/events/index.ts","../../../../node_modules/%40segment/analytics-next/src/core/buffer/index.ts","../../../../node_modules/%40segment/analytics-next/src/plugins/remote-loader/index.ts","../../../../node_modules/%40segment/analytics-next/src/lib/client-hints/index.ts","../../../../node_modules/%40segment/analytics-next/src/plugins/segmentio/normalize.ts","../../../../node_modules/%40segment/analytics-next/src/core/analytics/index.ts","../../../../node_modules/%40segment/analytics-next/src/plugins/segmentio/schedule-flush.ts","../../../../node_modules/%40segment/analytics-next/src/plugins/segmentio/index.ts","../../../../node_modules/%40segment/analytics-next/src/plugins/segmentio/shared-dispatcher.ts","../../../../node_modules/%40segment/analytics-core/src/analytics/dispatch.ts","../../../../node_modules/%40segment/analytics-next/src/plugins/segmentio/ratelimit-error.ts","../../../../node_modules/%40segment/analytics-core/src/validation/errors.ts","../../../../node_modules/%40segment/analytics-core/src/queue/event-queue.ts","../../../../node_modules/%40segment/analytics-next/src/browser/index.ts","../../../../node_modules/%40segment/analytics-next/src/lib/is-thenable.ts","../../../../node_modules/%40segment/analytics-next/src/core/inspector/index.ts","../../../../node_modules/%40segment/analytics-next/src/core/storage/memoryStorage.ts","../../../../node_modules/%40segment/analytics-next/src/lib/get-process-env.ts","../../../../node_modules/%40segment/analytics-core/src/utils/group-by.ts","../../../../node_modules/%40segment/analytics-next/src/core/queue/event-queue.ts","../../../../node_modules/%40segment/analytics-next/src/core/storage/localStorage.ts","../../../../node_modules/%40segment/analytics-core/src/utils/is-thenable.ts","../../../../node_modules/%40segment/analytics-next/src/lib/pick.ts","../../../../node_modules/%40segment/analytics-next/src/core/storage/cookieStorage.ts","../../../../node_modules/%40segment/analytics-next/src/lib/on-page-change.ts","../../../../node_modules/%40segment/analytics-next/src/plugins/env-enrichment/index.ts","../../../../node_modules/%40web3auth/no-modal/dist/lib.esm/connectors/utils.js"],"sourcesContent":["// src/page-context.ts\nfunction isPlainObject(obj) {\n    return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() === \"object\";\n}\nvar BufferedPageContextDiscriminant = \"bpc\";\nvar createBufferedPageContext = function(url, canonicalUrl, search, path, title, referrer) {\n    return {\n        __t: BufferedPageContextDiscriminant,\n        c: canonicalUrl,\n        p: path,\n        u: url,\n        s: search,\n        t: title,\n        r: referrer\n    };\n};\nvar BUFFERED_PAGE_CONTEXT_KEYS = Object.keys(createBufferedPageContext(\"\", \"\", \"\", \"\", \"\", \"\"));\nfunction isBufferedPageContext(bufferedPageCtx) {\n    if (!isPlainObject(bufferedPageCtx)) return false;\n    if (bufferedPageCtx.__t !== BufferedPageContextDiscriminant) return false;\n    for(var k in bufferedPageCtx){\n        if (!BUFFERED_PAGE_CONTEXT_KEYS.includes(k)) {\n            return false;\n        }\n    }\n    return true;\n}\nvar createCanonicalURL = function(canonicalUrl, searchParams) {\n    return canonicalUrl.indexOf(\"?\") > -1 ? canonicalUrl : canonicalUrl + searchParams;\n};\nvar removeHash = function(href) {\n    var hashIdx = href.indexOf(\"#\");\n    return hashIdx === -1 ? href : href.slice(0, hashIdx);\n};\nvar parseCanonicalPath = function(canonicalUrl) {\n    try {\n        return new URL(canonicalUrl).pathname;\n    } catch (_e) {\n        return canonicalUrl[0] === \"/\" ? canonicalUrl : \"/\" + canonicalUrl;\n    }\n};\nvar createPageContext = function(param) {\n    var canonicalUrl = param.c, pathname = param.p, search = param.s, url = param.u, referrer = param.r, title = param.t;\n    var newPath = canonicalUrl ? parseCanonicalPath(canonicalUrl) : pathname;\n    var newUrl = canonicalUrl ? createCanonicalURL(canonicalUrl, search) : removeHash(url);\n    return {\n        path: newPath,\n        referrer: referrer,\n        search: search,\n        title: title,\n        url: newUrl\n    };\n};\nvar getDefaultBufferedPageContext = function() {\n    var c = document.querySelector(\"link[rel='canonical']\");\n    return createBufferedPageContext(location.href, c && c.getAttribute(\"href\") || void 0, location.search, location.pathname, document.title, document.referrer);\n};\nvar getDefaultPageContext = function() {\n    return createPageContext(getDefaultBufferedPageContext());\n};\nexport { BufferedPageContextDiscriminant, createBufferedPageContext, createPageContext, getDefaultBufferedPageContext, getDefaultPageContext, isBufferedPageContext };\n","/*! js-cookie v3.0.1 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (key, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    key = encodeURIComponent(key)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      key + '=' + converter.write(value, key) + stringifiedAttributes)\n  }\n\n  function get (key) {\n    if (typeof document === 'undefined' || (arguments.length && !key)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var foundKey = decodeURIComponent(parts[0]);\n        jar[foundKey] = converter.read(value, foundKey);\n\n        if (key === foundKey) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return key ? jar[key] : jar\n  }\n\n  return Object.create(\n    {\n      set: set,\n      get: get,\n      remove: function (key, attributes) {\n        set(\n          key,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport default api;\n","import _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { AnalyticsBrowser } from '@segment/analytics-next';\nimport { log } from './loglevel.js';\n\nconst SEGMENT_WRITE_KEY = \"f6LbNqCeVRf512ggdME4b6CyflhF1tsX\";\nclass Analytics {\n  constructor() {\n    _defineProperty(this, \"segment\", void 0);\n    _defineProperty(this, \"globalProperties\", {});\n    _defineProperty(this, \"enabled\", true);\n  }\n  init() {\n    if (this.isSkipped()) {\n      return;\n    }\n    if (this.segment) {\n      throw new Error(\"Analytics already initialized\");\n    }\n    this.segment = new AnalyticsBrowser();\n    this.segment.load({\n      writeKey: SEGMENT_WRITE_KEY\n    }, {\n      user: {\n        cookie: {\n          key: \"web3auth_ajs_user_id\"\n        },\n        localStorage: {\n          key: \"web3auth_ajs_user_traits\"\n        }\n      },\n      globalAnalyticsKey: \"web3auth_analytics\"\n    }).then(() => {\n      log.debug(\"Analytics initialized\");\n      return true;\n    }).catch(error => {\n      log.error(\"Failed to initialize Analytics\", error);\n    });\n  }\n  enable() {\n    this.enabled = true;\n  }\n  disable() {\n    this.enabled = false;\n  }\n  setGlobalProperties(properties) {\n    this.globalProperties = _objectSpread(_objectSpread({}, this.globalProperties), properties);\n  }\n  async identify(userId, traits) {\n    if (!this.enabled) return;\n    if (this.isSkipped()) return;\n    try {\n      return this.getSegment().identify(userId, _objectSpread({}, traits));\n    } catch (error) {\n      log.error(`Failed to identify user ${userId} in analytics`, error);\n    }\n  }\n  async track(event, properties) {\n    if (!this.enabled) return;\n    if (this.isSkipped()) return;\n    try {\n      return this.getSegment().track(event, _objectSpread(_objectSpread({}, properties), this.globalProperties));\n    } catch (error) {\n      log.error(`Failed to track event ${event}`, error);\n    }\n  }\n  getSegment() {\n    if (!this.segment) {\n      log.error(\"Analytics not initialized. Call Analytics.init() first.\");\n      throw new Error(\"Analytics not initialized. Call Analytics.init() first.\");\n    }\n    return this.segment;\n  }\n  isSkipped() {\n    const dappOrigin = window.location.origin;\n\n    // skip if the protocol is not http or https\n    if (dappOrigin.startsWith(\"http://\")) {\n      return true;\n    }\n    // skip if dapp contains localhost\n    if (dappOrigin.includes(\"localhost\")) {\n      return true;\n    }\n    return false;\n  }\n}\nconst ANALYTICS_EVENTS = {\n  // SDK Initialization\n  SDK_INITIALIZATION_COMPLETED: \"SDK Initialization Completed\",\n  SDK_INITIALIZATION_FAILED: \"SDK Initialization Failed\",\n  // Connection\n  CONNECTION_STARTED: \"Connection Started\",\n  CONNECTION_COMPLETED: \"Connection Completed\",\n  CONNECTION_FAILED: \"Connection Failed\",\n  // Identity Token\n  IDENTITY_TOKEN_STARTED: \"Identity Token Started\",\n  IDENTITY_TOKEN_COMPLETED: \"Identity Token Completed\",\n  IDENTITY_TOKEN_FAILED: \"Identity Token Failed\",\n  // MFA\n  MFA_ENABLEMENT_STARTED: \"MFA Enablement Started\",\n  MFA_ENABLEMENT_COMPLETED: \"MFA Enablement Completed\",\n  MFA_ENABLEMENT_FAILED: \"MFA Enablement Failed\",\n  MFA_MANAGEMENT_SELECTED: \"MFA Management Selected\",\n  MFA_MANAGEMENT_FAILED: \"MFA Management Failed\",\n  // Login Modal\n  LOGIN_MODAL_OPENED: \"Login Modal Opened\",\n  LOGIN_MODAL_CLOSED: \"Login Modal Closed\",\n  SOCIAL_LOGIN_SELECTED: \"Social Login Selected\",\n  EXTERNAL_WALLET_SELECTED: \"External Wallet Selected\",\n  EXTERNAL_WALLET_LIST_EXPANDED: \"External Wallet List Expanded\",\n  // Wallet Plugin\n  WALLET_UI_CLICKED: \"Wallet UI Clicked\",\n  WALLET_CONNECT_SCANNER_CLICKED: \"Wallet Connect Scanner Clicked\",\n  WALLET_FUNDING_CLICKED: \"Wallet Funding Clicked\",\n  WALLET_CHECKOUT_CLICKED: \"Wallet Checkout Clicked\",\n  WALLET_RECEIVE_CLICKED: \"Wallet Receive Clicked\",\n  WALLET_SWAP_CLICKED: \"Wallet Swap Clicked\"\n};\nconst ANALYTICS_INTEGRATION_TYPE = {\n  REACT_HOOKS: \"React Hooks\",\n  VUE_COMPOSABLES: \"Vue Composables\",\n  NATIVE_SDK: \"Native SDK\"\n};\nconst ANALYTICS_SDK_TYPE = {\n  WEB_NO_MODAL: \"Web NoModal\",\n  WEB_MODAL: \"Web Modal\"\n};\n\nexport { ANALYTICS_EVENTS, ANALYTICS_INTEGRATION_TYPE, ANALYTICS_SDK_TYPE, Analytics };\n","import { CookieOptions } from './cookieStorage'\n\nexport const StoreType = {\n  Cookie: 'cookie',\n  LocalStorage: 'localStorage',\n  Memory: 'memory',\n} as const\n\n/**\n * Known Storage Types\n *\n * Convenience settings for storage systems that AJS includes support for\n */\nexport type StoreType = typeof StoreType[keyof typeof StoreType]\n\nexport type StorageObject = Record<string, unknown>\n\n/**\n * Defines a Storage object for use in AJS Client.\n */\nexport interface Store<Data extends StorageObject = StorageObject> {\n  /**\n   * get value for the key from the stores. it will return the first value found in the stores\n   * @param key key for the value to be retrieved\n   * @returns value for the key or null if not found\n   */\n  get<K extends keyof Data>(key: K): Data[K] | null\n\n  /**\n   * it will set the value for the key in all the stores\n   * @param key key for the value to be stored\n   * @param value value to be stored\n   * @returns value that was stored\n   */\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void\n  /**\n   * remove the value for the key from all the stores\n   * @param key key for the value to be removed\n   * @param storeTypes optional array of store types to be used for removing the value\n   */\n  remove<K extends keyof Data>(key: K): void\n}\n\nexport interface StoreTypeWithSettings<T extends StoreType = StoreType> {\n  name: T\n  settings?: T extends 'cookie' ? CookieOptions : never\n}\n\nexport type InitializeStorageArgs = (StoreTypeWithSettings | StoreType)[]\n","import cookie from 'js-cookie'\n\n/**\n * Levels returns all levels of the given url.\n *\n * @param {string} url\n * @return {Array}\n * @api public\n */\nfunction levels(url: URL): string[] {\n  const host = url.hostname\n  const parts = host.split('.')\n  const last = parts[parts.length - 1]\n  const levels: string[] = []\n\n  // Ip address.\n  if (parts.length === 4 && parseInt(last, 10) > 0) {\n    return levels\n  }\n\n  // Localhost.\n  if (parts.length <= 1) {\n    return levels\n  }\n\n  // Create levels.\n  for (let i = parts.length - 2; i >= 0; --i) {\n    levels.push(parts.slice(i).join('.'))\n  }\n\n  return levels\n}\n\nfunction parseUrl(url: string): URL | undefined {\n  try {\n    return new URL(url)\n  } catch {\n    return\n  }\n}\n\nexport function tld(url: string): string | undefined {\n  const parsedUrl = parseUrl(url)\n  if (!parsedUrl) return\n\n  const lvls = levels(parsedUrl)\n\n  // Lookup the real top level one.\n  for (let i = 0; i < lvls.length; ++i) {\n    const cname = '__tld__'\n    const domain = lvls[i]\n    const opts = { domain: '.' + domain }\n\n    try {\n      // cookie access throw an error if the library is ran inside a sandboxed environment (e.g. sandboxed iframe)\n      cookie.set(cname, '1', opts)\n      if (cookie.get(cname)) {\n        cookie.remove(cname, opts)\n        return domain\n      }\n    } catch (_) {\n      return\n    }\n  }\n}\n","export default function bindAll<\n  ObjType extends { [key: string]: any },\n  KeyType extends keyof ObjType\n>(obj: ObjType): ObjType {\n  const proto = obj.constructor.prototype\n  for (const key of Object.getOwnPropertyNames(proto)) {\n    if (key !== 'constructor') {\n      const desc = Object.getOwnPropertyDescriptor(\n        obj.constructor.prototype,\n        key\n      )\n      if (!!desc && typeof desc.value === 'function') {\n        obj[key as KeyType] = obj[key].bind(obj)\n      }\n    }\n  }\n\n  return obj\n}\n","import { fetch } from '../../lib/fetch'\nimport { RateLimitError } from './ratelimit-error'\nimport { createHeaders, StandardDispatcherConfig } from './shared-dispatcher'\nexport type Dispatcher = (url: string, body: object) => Promise<unknown>\n\nexport default function (config?: StandardDispatcherConfig): {\n  dispatch: Dispatcher\n} {\n  function dispatch(url: string, body: object): Promise<unknown> {\n    return fetch(url, {\n      credentials: config?.credentials,\n      keepalive: config?.keepalive,\n      headers: createHeaders(config?.headers),\n      method: 'post',\n      body: JSON.stringify(body),\n      // @ts-ignore - not in the ts lib yet\n      priority: config?.priority,\n    }).then((res) => {\n      if (res.status >= 500) {\n        throw new Error(`Bad response from server: ${res.status}`)\n      }\n      if (res.status === 429) {\n        const retryTimeoutStringSecs = res.headers?.get('x-ratelimit-reset')\n        const retryTimeoutMS = retryTimeoutStringSecs\n          ? parseInt(retryTimeoutStringSecs) * 1000\n          : 5000\n        throw new RateLimitError(\n          `Rate limit exceeded: ${res.status}`,\n          retryTimeoutMS\n        )\n      }\n    })\n  }\n\n  return {\n    dispatch,\n  }\n}\n","import { CoreSegmentEvent } from '../events'\nimport { ValidationError } from './errors'\nimport { isString, isPlainObject, exists } from './helpers'\n\nconst stringError = 'is not a string'\nconst objError = 'is not an object'\nconst nilError = 'is nil'\n\n// user identity check could hypothetically could be used in the browser event factory, but not 100% sure -- so this is node only for now\nexport function assertUserIdentity(event: CoreSegmentEvent): void {\n  const USER_FIELD_NAME = '.userId/anonymousId/previousId/groupId'\n\n  const getAnyUserId = (event: CoreSegmentEvent) =>\n    event.userId ?? event.anonymousId ?? event.groupId ?? event.previousId\n\n  const id = getAnyUserId(event)\n  if (!exists(id)) {\n    throw new ValidationError(USER_FIELD_NAME, nilError)\n  } else if (!isString(id)) {\n    throw new ValidationError(USER_FIELD_NAME, stringError)\n  }\n}\n\nexport function assertEventExists(\n  event?: CoreSegmentEvent | null\n): asserts event is CoreSegmentEvent {\n  if (!exists(event)) {\n    throw new ValidationError('Event', nilError)\n  }\n  if (typeof event !== 'object') {\n    throw new ValidationError('Event', objError)\n  }\n}\n\nexport function assertEventType(event: CoreSegmentEvent): void {\n  if (!isString(event.type)) {\n    throw new ValidationError('.type', stringError)\n  }\n}\n\nexport function assertTrackEventName(event: CoreSegmentEvent): void {\n  if (!isString(event.event)) {\n    throw new ValidationError('.event', stringError)\n  }\n}\n\nexport function assertTrackEventProperties(event: CoreSegmentEvent): void {\n  if (!isPlainObject(event.properties)) {\n    throw new ValidationError('.properties', objError)\n  }\n}\n\nexport function assertTraits(event: CoreSegmentEvent): void {\n  if (!isPlainObject(event.traits)) {\n    throw new ValidationError('.traits', objError)\n  }\n}\n\nexport function assertMessageId(event: CoreSegmentEvent): void {\n  if (!isString(event.messageId)) {\n    throw new ValidationError('.messageId', stringError)\n  }\n}\n\nexport function validateEvent(event?: CoreSegmentEvent | null) {\n  assertEventExists(event)\n  assertEventType(event)\n  assertMessageId(event)\n\n  if (event.type === 'track') {\n    assertTrackEventName(event)\n    assertTrackEventProperties(event)\n  }\n\n  if (['group', 'identify'].includes(event.type)) {\n    assertTraits(event)\n  }\n}\n","import { StoreType, StoreTypeWithSettings } from './types'\n\nexport type UniversalStorageSettings = { stores: StoreType[] }\n\n// This is setup this way to permit eventually a different set of settings for custom storage\nexport type StorageSettings = UniversalStorageSettings\n\nexport function isArrayOfStoreType(\n  s: StorageSettings\n): s is UniversalStorageSettings {\n  return (\n    s &&\n    s.stores &&\n    Array.isArray(s.stores) &&\n    s.stores.every((e) => Object.values(StoreType).includes(e))\n  )\n}\n\nexport function isStoreTypeWithSettings(\n  s: StoreTypeWithSettings | StoreType\n): s is StoreTypeWithSettings {\n  return typeof s === 'object' && s.name !== undefined\n}\n","export const pickBy = <T extends object, K extends keyof T>(\n  obj: T,\n  fn: (key: K, v: T[K]) => boolean\n) => {\n  return (Object.keys(obj) as K[])\n    .filter((k) => fn(k, obj[k]))\n    .reduce((acc, key) => ((acc[key] = obj[key]), acc), {} as Partial<T>)\n}\n","import {\n  isFunction,\n  isPlainObject,\n  isString,\n  isNumber,\n} from '@segment/analytics-core'\nimport { Context } from '../context'\nimport {\n  Callback,\n  Options,\n  EventProperties,\n  SegmentEvent,\n  Traits,\n  GroupTraits,\n  UserTraits,\n} from '../events'\nimport { ID, WithId } from '../user'\n\n/**\n * Helper for the track method\n */\nexport function resolveArguments(\n  eventName: string | SegmentEvent,\n  properties?: EventProperties | Callback,\n  options?: Options | Callback,\n  callback?: Callback\n): [string, EventProperties | Callback, Options, Callback | undefined] {\n  const args = [eventName, properties, options, callback]\n\n  const name = isPlainObject(eventName) ? eventName.event : eventName\n  if (!name || !isString(name)) {\n    throw new Error('Event missing')\n  }\n\n  const data = isPlainObject(eventName)\n    ? eventName.properties ?? {}\n    : isPlainObject(properties)\n    ? properties\n    : {}\n\n  let opts: Options = {}\n  if (!isFunction(options)) {\n    opts = options ?? {}\n  }\n\n  if (isPlainObject(eventName) && !isFunction(properties)) {\n    opts = properties ?? {}\n  }\n\n  const cb = args.find(isFunction) as Callback | undefined\n  return [name, data, opts, cb]\n}\n\n/**\n * Helper for page, screen methods\n */\nexport function resolvePageArguments(\n  category?: string | object | null,\n  name?: string | object | Callback | null,\n  properties?: EventProperties | Options | Callback | null,\n  options?: Options | Callback,\n  callback?: Callback\n): [\n  string | null,\n  string | null,\n  EventProperties,\n  Options,\n  Callback | undefined\n] {\n  let resolvedProperties: EventProperties\n  let resolvedOptions: Options\n  let resolvedCategory: string | undefined | null = null\n  let resolvedName: string | undefined | null = null\n  const args = [category, name, properties, options, callback]\n\n  // The legacy logic is basically:\n  // - If there is a string, it's the name\n  // - If there are two strings, it's category and name\n  const strings = args.filter(isString)\n  if (strings.length === 1) {\n    if (isString(args[1])) {\n      resolvedName = args[1]\n      resolvedCategory = null\n    } else {\n      resolvedName = strings[0]\n      resolvedCategory = null\n    }\n  } else if (strings.length === 2) {\n    if (typeof args[0] === 'string') {\n      resolvedCategory = args[0]\n    }\n    if (typeof args[1] === 'string') {\n      resolvedName = args[1]\n    }\n  }\n\n  // handle: analytics.page('category', 'name', properties, options, callback)\n  const resolvedCallback = args.find(isFunction) as Callback | undefined\n\n  // handle:\n  // - analytics.page('name')\n  // - analytics.page('category', 'name')\n  // - analytics.page(properties)\n  // - analytics.page(properties, options)\n  // - analytics.page('name', properties)\n  // - analytics.page('name', properties, options)\n  // - analytics.page('category', 'name', properties, options)\n  // - analytics.page('category', 'name', properties, options, callback)\n  // - analytics.page('category', 'name', callback)\n  // - analytics.page(callback), etc\n\n  // The legacy logic is basically:\n  // - If there is a plain object, it's the properties\n  // - If there are two plain objects, it's properties and options\n  const objects = args.filter(isPlainObject)\n  if (objects.length === 1) {\n    if (isPlainObject(args[2])) {\n      resolvedOptions = {}\n      resolvedProperties = args[2]\n    } else if (isPlainObject(args[3])) {\n      resolvedProperties = {}\n      resolvedOptions = args[3]\n    } else {\n      resolvedProperties = objects[0]\n      resolvedOptions = {}\n    }\n  } else if (objects.length === 2) {\n    resolvedProperties = objects[0]\n    resolvedOptions = objects[1]\n  }\n\n  return [\n    resolvedCategory,\n    resolvedName,\n    (resolvedProperties ??= {}),\n    (resolvedOptions ??= {}),\n    resolvedCallback,\n  ]\n}\n\n/**\n * Helper for group, identify methods\n */\nexport const resolveUserArguments = <T extends Traits, U extends WithId>(\n  user: U\n): ResolveUser<T> => {\n  return (...args): ReturnType<ResolveUser<T>> => {\n    const values: {\n      id?: ID\n      traits?: T | null\n      options?: Options\n      callback?: Callback\n    } = {}\n    // It's a stack so it's reversed so that we go through each of the expected arguments\n    const orderStack: Array<keyof typeof values> = [\n      'callback',\n      'options',\n      'traits',\n      'id',\n    ]\n\n    // Read each argument and eval the possible values here\n    for (const arg of args) {\n      let current = orderStack.pop()\n      if (current === 'id') {\n        if (isString(arg) || isNumber(arg)) {\n          values.id = arg.toString()\n          continue\n        }\n        if (arg === null || arg === undefined) {\n          continue\n        }\n        // First argument should always be the id, if it is not a valid value we can skip it\n        current = orderStack.pop()\n      }\n\n      // Traits and Options\n      if (\n        (current === 'traits' || current === 'options') &&\n        (arg === null || arg === undefined || isPlainObject(arg))\n      ) {\n        values[current] = arg as T\n      }\n\n      // Callback\n      if (isFunction(arg)) {\n        values.callback = arg as Callback\n        break // This is always the last argument\n      }\n    }\n\n    return [\n      values.id ?? user.id(),\n      (values.traits ?? {}) as T,\n      values.options ?? {},\n      values.callback,\n    ]\n  }\n}\n\n/**\n * Helper for alias method\n */\nexport function resolveAliasArguments(\n  to: string | number,\n  from?: string | number | Options,\n  options?: Options | Callback,\n  callback?: Callback\n): [string, string | null, Options, Callback | undefined] {\n  if (isNumber(to)) to = to.toString() // Legacy behaviour - allow integers for alias calls\n  if (isNumber(from)) from = from.toString()\n  const args = [to, from, options, callback]\n\n  const [aliasTo = to, aliasFrom = null] = args.filter(isString)\n  const [opts = {}] = args.filter(isPlainObject)\n  const resolvedCallback = args.find(isFunction) as Callback | undefined\n\n  return [aliasTo, aliasFrom, opts, resolvedCallback]\n}\n\ntype ResolveUser<T extends Traits> = (\n  id?: ID | object,\n  traits?: T | Callback | null,\n  options?: Options | Callback,\n  callback?: Callback\n) => [ID, T, Options, Callback | undefined]\n\nexport type IdentifyParams = Parameters<ResolveUser<UserTraits>>\nexport type GroupParams = Parameters<ResolveUser<GroupTraits>>\nexport type EventParams = Parameters<typeof resolveArguments>\nexport type PageParams = Parameters<typeof resolvePageArguments>\nexport type AliasParams = Parameters<typeof resolveAliasArguments>\n\nexport type DispatchedEvent = Context\n","import { CookieOptions, CookieStorage } from './cookieStorage'\nimport { LocalStorage } from './localStorage'\nimport { MemoryStorage } from './memoryStorage'\nimport { isStoreTypeWithSettings } from './settings'\nimport { StoreType, Store, InitializeStorageArgs } from './types'\n\nexport * from './types'\nexport * from './localStorage'\nexport * from './cookieStorage'\nexport * from './memoryStorage'\nexport * from './universalStorage'\nexport * from './settings'\n\n/**\n * Creates multiple storage systems from an array of StoreType and options\n * @param args StoreType and options\n * @returns Storage array\n */\nexport function initializeStorages(args: InitializeStorageArgs): Store[] {\n  const storages = args.map((s) => {\n    let type: StoreType\n    let settings\n\n    if (isStoreTypeWithSettings(s)) {\n      type = s.name\n      settings = s.settings\n    } else {\n      type = s\n    }\n\n    switch (type) {\n      case StoreType.Cookie:\n        return new CookieStorage(settings)\n      case StoreType.LocalStorage:\n        return new LocalStorage()\n      case StoreType.Memory:\n        return new MemoryStorage()\n      default:\n        throw new Error(`Unknown Store Type: ${s}`)\n    }\n  })\n  return storages\n}\n\n/**\n * Injects the CookieOptions into a the arguments for initializeStorage\n * @param storeTypes list of storeType\n * @param cookieOptions cookie Options\n * @returns arguments for initializeStorage\n */\nexport function applyCookieOptions(\n  storeTypes: StoreType[],\n  cookieOptions?: CookieOptions\n): InitializeStorageArgs {\n  return storeTypes.map((s) => {\n    if (cookieOptions && s === StoreType.Cookie) {\n      return {\n        name: s,\n        settings: cookieOptions,\n      }\n    }\n    return s\n  })\n}\n","import type { CorePlugin } from '@segment/analytics-core'\nimport type { DestinationMiddlewareFunction } from '../../plugins/middleware'\nimport type { Analytics } from '../analytics'\nimport type { Context } from '../context'\n\nexport interface Plugin extends CorePlugin<Context, Analytics> {}\n\nexport interface InternalPluginWithAddMiddleware extends Plugin {\n  addMiddleware: (...fns: DestinationMiddlewareFunction[]) => void\n}\n\nexport interface InternalDestinationPluginWithAddMiddleware\n  extends InternalPluginWithAddMiddleware {\n  type: 'destination'\n}\n\nexport const isDestinationPluginWithAddMiddleware = (\n  plugin: Plugin\n): plugin is InternalDestinationPluginWithAddMiddleware => {\n  // FYI: segment's plugin does not currently have an 'addMiddleware' method\n  return 'addMiddleware' in plugin && plugin.type === 'destination'\n}\n","import { isThenable } from '../utils/is-thenable'\n\nexport type TaskGroup = {\n  done: () => Promise<void>\n  run: <Operation extends (...args: any[]) => any>(\n    op: Operation\n  ) => ReturnType<Operation>\n}\n\nexport const createTaskGroup = (): TaskGroup => {\n  let taskCompletionPromise: Promise<void>\n  let resolvePromise: () => void\n  let count = 0\n\n  return {\n    done: () => taskCompletionPromise,\n    run: (op) => {\n      const returnValue = op()\n\n      if (isThenable(returnValue)) {\n        if (++count === 1) {\n          taskCompletionPromise = new Promise((res) => (resolvePromise = res))\n        }\n\n        returnValue.finally(() => --count === 0 && resolvePromise())\n      }\n\n      return returnValue\n    },\n  }\n}\n","import { Store, StorageObject } from './types'\n\n// not adding to private method because those method names do not get minified atm, and does not use 'this'\nconst _logStoreKeyError = (\n  store: Store,\n  action: 'set' | 'get' | 'remove',\n  key: string,\n  err: unknown\n) => {\n  console.warn(\n    `${store.constructor.name}: Can't ${action} key \"${key}\" | Err: ${err}`\n  )\n}\n\n/**\n * Uses multiple storages in a priority list to get/set values in the order they are specified.\n */\nexport class UniversalStorage<Data extends StorageObject = StorageObject> {\n  private stores: Store[]\n\n  constructor(stores: Store[]) {\n    this.stores = stores\n  }\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    let val: Data[K] | null = null\n\n    for (const store of this.stores) {\n      try {\n        val = store.get(key) as Data[K] | null\n        if (val !== undefined && val !== null) {\n          return val\n        }\n      } catch (e) {\n        _logStoreKeyError(store, 'get', key, e)\n      }\n    }\n    return null\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    this.stores.forEach((store) => {\n      try {\n        store.set(key, value)\n      } catch (e) {\n        _logStoreKeyError(store, 'set', key, e)\n      }\n    })\n  }\n\n  clear<K extends keyof Data>(key: K): void {\n    this.stores.forEach((store) => {\n      try {\n        store.remove(key)\n      } catch (e) {\n        _logStoreKeyError(store, 'remove', key, e)\n      }\n    })\n  }\n\n  /*\n    This is to support few scenarios where:\n    - value exist in one of the stores ( as a result of other stores being cleared from browser ) and we want to resync them\n    - read values in AJS 1.0 format ( for customers after 1.0 --> 2.0 migration ) and then re-write them in AJS 2.0 format\n  */\n  getAndSync<K extends keyof Data>(key: K): Data[K] | null {\n    const val = this.get(key)\n\n    // legacy behavior, getAndSync can change the type of a value from number to string (AJS 1.0 stores numerical values as a number)\n    const coercedValue = (typeof val === 'number' ? val.toString() : val) as\n      | Data[K]\n      | null\n\n    this.set(key, coercedValue)\n\n    return coercedValue\n  }\n}\n","import { pick } from '../../lib/pick'\nimport { EventProperties, SegmentEvent } from '../events'\nimport { getDefaultPageContext } from '@segment/analytics-page-tools'\n\n/**\n * Augments a segment event with information about the current page.\n * Page information like URL changes frequently, so this is meant to be captured as close to the event call as possible.\n * Things like `userAgent` do not change, so they can be added later in the flow.\n * We prefer not to add this information to this function, as it increases the main bundle size.\n */\nexport const addPageContext = (\n  event: SegmentEvent,\n  pageCtx = getDefaultPageContext()\n): void => {\n  const evtCtx = event.context! // Context should be set earlier in the flow\n  let pageContextFromEventProps: Pick<EventProperties, string> | undefined\n  if (event.type === 'page') {\n    pageContextFromEventProps =\n      event.properties && pick(event.properties, Object.keys(pageCtx))\n\n    event.properties = {\n      ...pageCtx,\n      ...event.properties,\n      ...(event.name ? { name: event.name } : {}),\n    }\n  }\n\n  evtCtx.page = {\n    ...pageCtx,\n    ...pageContextFromEventProps,\n    ...evtCtx.page,\n  }\n}\n","export * from './interfaces'\nimport { dset } from 'dset'\nimport { ID } from '../user'\nimport {\n  IntegrationsOptions,\n  EventProperties,\n  CoreSegmentEvent,\n  CoreOptions,\n  CoreExtraContext,\n  UserTraits,\n  GroupTraits,\n} from './interfaces'\nimport { pickBy } from '../utils/pick'\nimport type { RemoveIndexSignature } from '../utils/ts-helpers'\nimport { validateEvent } from '../validation/assertions'\n\nexport type EventMethodCallHook = ({\n  type,\n  options,\n}: {\n  type: 'track' | 'identify' | 'page' | 'group' | 'alias' | 'screen'\n  options?: CoreOptions\n}) => void\n\nexport type EventHook = (event: CoreSegmentEvent) => void\n\nexport interface EventFactorySettings {\n  /**\n   * Universal `messageId` builder for all events (these must be unique)\n   */\n  createMessageId: () => string\n  /**\n   * Hook to do something with an event right before they are returned from the factory.\n   * This includes event modification or additional validation.\n   */\n  onFinishedEvent?: EventHook\n  /**\n   * Hook whenever an event method is called (track, page, etc.)\n   * Can be used to update Options (or just listen)\n   */\n  onEventMethodCall?: EventMethodCallHook\n}\n\n/**\n * Internal settings object that is used internally by the factory\n */\nclass InternalEventFactorySettings {\n  public createMessageId: EventFactorySettings['createMessageId']\n  public onEventMethodCall: EventMethodCallHook\n  public onFinishedEvent: EventHook\n\n  constructor(public settings: EventFactorySettings) {\n    this.createMessageId = settings.createMessageId\n    this.onEventMethodCall = settings.onEventMethodCall ?? (() => {})\n    this.onFinishedEvent = settings.onFinishedEvent ?? (() => {})\n  }\n}\n\nexport abstract class CoreEventFactory {\n  private settings: InternalEventFactorySettings\n\n  constructor(settings: EventFactorySettings) {\n    this.settings = new InternalEventFactorySettings(settings)\n  }\n\n  track(\n    event: string,\n    properties?: EventProperties,\n    options?: CoreOptions,\n    integrationOptions?: IntegrationsOptions\n  ) {\n    this.settings.onEventMethodCall({ type: 'track', options })\n    return this.normalize({\n      ...this.baseEvent(),\n      event,\n      type: 'track',\n      properties: properties ?? {}, // TODO: why is this not a shallow copy like everywhere else?\n      options: { ...options },\n      integrations: { ...integrationOptions },\n    })\n  }\n\n  page(\n    category: string | null,\n    page: string | null,\n    properties?: EventProperties,\n    options?: CoreOptions,\n    integrationOptions?: IntegrationsOptions\n  ): CoreSegmentEvent {\n    this.settings.onEventMethodCall({ type: 'page', options })\n    const event: CoreSegmentEvent = {\n      type: 'page',\n      properties: { ...properties },\n      options: { ...options },\n      integrations: { ...integrationOptions },\n    }\n\n    if (category !== null) {\n      event.category = category\n      event.properties = event.properties ?? {}\n      event.properties.category = category\n    }\n\n    if (page !== null) {\n      event.name = page\n    }\n\n    return this.normalize({\n      ...this.baseEvent(),\n      ...event,\n    })\n  }\n\n  screen(\n    category: string | null,\n    screen: string | null,\n    properties?: EventProperties,\n    options?: CoreOptions,\n    integrationOptions?: IntegrationsOptions\n  ): CoreSegmentEvent {\n    this.settings.onEventMethodCall({ type: 'screen', options })\n    const event: CoreSegmentEvent = {\n      type: 'screen',\n      properties: { ...properties },\n      options: { ...options },\n      integrations: { ...integrationOptions },\n    }\n\n    if (category !== null) {\n      event.category = category\n    }\n\n    if (screen !== null) {\n      event.name = screen\n    }\n\n    return this.normalize({\n      ...this.baseEvent(),\n      ...event,\n    })\n  }\n\n  identify(\n    userId: ID,\n    traits?: UserTraits,\n    options?: CoreOptions,\n    integrationsOptions?: IntegrationsOptions\n  ): CoreSegmentEvent {\n    this.settings.onEventMethodCall({ type: 'identify', options })\n    return this.normalize({\n      ...this.baseEvent(),\n      type: 'identify',\n      userId,\n      traits: traits ?? {},\n      options: { ...options },\n      integrations: integrationsOptions,\n    })\n  }\n\n  group(\n    groupId: ID,\n    traits?: GroupTraits,\n    options?: CoreOptions,\n    integrationOptions?: IntegrationsOptions\n  ): CoreSegmentEvent {\n    this.settings.onEventMethodCall({ type: 'group', options })\n    return this.normalize({\n      ...this.baseEvent(),\n      type: 'group',\n      traits: traits ?? {},\n      options: { ...options }, // this spreading is intentional\n      integrations: { ...integrationOptions }, //\n      groupId,\n    })\n  }\n\n  alias(\n    to: string,\n    from: string | null, // TODO: can we make this undefined?\n    options?: CoreOptions,\n    integrationOptions?: IntegrationsOptions\n  ): CoreSegmentEvent {\n    this.settings.onEventMethodCall({ type: 'alias', options })\n    const base: CoreSegmentEvent = {\n      userId: to,\n      type: 'alias',\n      options: { ...options },\n      integrations: { ...integrationOptions },\n    }\n\n    if (from !== null) {\n      base.previousId = from\n    }\n\n    if (to === undefined) {\n      return this.normalize({\n        ...base,\n        ...this.baseEvent(),\n      })\n    }\n\n    return this.normalize({\n      ...this.baseEvent(),\n      ...base,\n    })\n  }\n\n  private baseEvent(): Partial<CoreSegmentEvent> {\n    return {\n      integrations: {},\n      options: {},\n    }\n  }\n\n  /**\n   * Builds the context part of an event based on \"foreign\" keys that\n   * are provided in the `Options` parameter for an Event\n   */\n  private context(\n    options: CoreOptions\n  ): [CoreExtraContext, Partial<CoreSegmentEvent>] {\n    type CoreOptionKeys = keyof RemoveIndexSignature<CoreOptions>\n    /**\n     * If the event options are known keys from this list, we move them to the top level of the event.\n     * Any other options are moved to context.\n     */\n    const eventOverrideKeys: CoreOptionKeys[] = [\n      'userId',\n      'anonymousId',\n      'timestamp',\n      'messageId',\n    ]\n\n    delete options['integrations']\n    const providedOptionsKeys = Object.keys(options) as Exclude<\n      CoreOptionKeys,\n      'integrations'\n    >[]\n\n    const context = options.context ?? {}\n    const eventOverrides = {}\n\n    providedOptionsKeys.forEach((key) => {\n      if (key === 'context') {\n        return\n      }\n\n      if (eventOverrideKeys.includes(key)) {\n        dset(eventOverrides, key, options[key])\n      } else {\n        dset(context, key, options[key])\n      }\n    })\n\n    return [context, eventOverrides]\n  }\n\n  private normalize(event: CoreSegmentEvent): CoreSegmentEvent {\n    const integrationBooleans = Object.keys(event.integrations ?? {}).reduce(\n      (integrationNames, name) => {\n        return {\n          ...integrationNames,\n          [name]: Boolean(event.integrations?.[name]),\n        }\n      },\n      {} as Record<string, boolean>\n    )\n\n    // filter out any undefined options\n    event.options = pickBy(event.options || {}, (_, value) => {\n      return value !== undefined\n    })\n\n    // This is pretty trippy, but here's what's going on:\n    // - a) We don't pass initial integration options as part of the event, only if they're true or false\n    // - b) We do accept per integration overrides (like integrations.Amplitude.sessionId) at the event level\n    // Hence the need to convert base integration options to booleans, but maintain per event integration overrides\n    const allIntegrations = {\n      // Base config integrations object as booleans\n      ...integrationBooleans,\n\n      // Per event overrides, for things like amplitude sessionId, for example\n      ...event.options?.integrations,\n    }\n\n    const [context, overrides] = event.options\n      ? this.context(event.options)\n      : []\n\n    const { options, ...rest } = event\n\n    const evt: CoreSegmentEvent = {\n      timestamp: new Date(),\n      ...rest,\n      context,\n      integrations: allIntegrations,\n      ...overrides,\n      messageId: options.messageId || this.settings.createMessageId(),\n    }\n\n    this.settings.onFinishedEvent(evt)\n    validateEvent(evt)\n\n    return evt\n  }\n}\n","import { SegmentEvent } from '../../core/events'\nimport { fetch } from '../../lib/fetch'\nimport { onPageChange } from '../../lib/on-page-change'\nimport { SegmentFacade } from '../../lib/to-facade'\nimport { RateLimitError } from './ratelimit-error'\nimport { Context } from '../../core/context'\nimport { BatchingDispatchConfig, createHeaders } from './shared-dispatcher'\n\nconst MAX_PAYLOAD_SIZE = 500\nconst MAX_KEEPALIVE_SIZE = 64\n\nfunction kilobytes(buffer: unknown): number {\n  const size = encodeURI(JSON.stringify(buffer)).split(/%..|./).length - 1\n  return size / 1024\n}\n\n/**\n * Checks if the payload is over or close to\n * the maximum payload size allowed by tracking\n * API.\n */\nfunction approachingTrackingAPILimit(buffer: unknown): boolean {\n  return kilobytes(buffer) >= MAX_PAYLOAD_SIZE - 50\n}\n\n/**\n * Checks if payload is over or approaching the limit for keepalive\n * requests. If keepalive is enabled we want to avoid\n * going over this to prevent data loss.\n */\nfunction passedKeepaliveLimit(buffer: unknown): boolean {\n  return kilobytes(buffer) >= MAX_KEEPALIVE_SIZE - 10\n}\n\nfunction chunks(batch: object[]): Array<object[]> {\n  const result: object[][] = []\n  let index = 0\n\n  batch.forEach((item) => {\n    const size = kilobytes(result[index])\n    if (size >= 64) {\n      index++\n    }\n\n    if (result[index]) {\n      result[index].push(item)\n    } else {\n      result[index] = [item]\n    }\n  })\n\n  return result\n}\n\nexport default function batch(\n  apiHost: string,\n  config?: BatchingDispatchConfig\n) {\n  let buffer: object[] = []\n  let pageUnloaded = false\n\n  const limit = config?.size ?? 10\n  const timeout = config?.timeout ?? 5000\n  let rateLimitTimeout = 0\n\n  function sendBatch(batch: object[]) {\n    if (batch.length === 0) {\n      return\n    }\n\n    const writeKey = (batch[0] as SegmentEvent)?.writeKey\n\n    // Remove sentAt from every event as batching only needs a single timestamp\n    const updatedBatch = batch.map((event) => {\n      const { sentAt, ...newEvent } = event as SegmentEvent\n      return newEvent\n    })\n\n    return fetch(`https://${apiHost}/b`, {\n      credentials: config?.credentials,\n      keepalive: config?.keepalive || pageUnloaded,\n      headers: createHeaders(config?.headers),\n      method: 'post',\n      body: JSON.stringify({\n        writeKey,\n        batch: updatedBatch,\n        sentAt: new Date().toISOString(),\n      }),\n      // @ts-ignore - not in the ts lib yet\n      priority: config?.priority,\n    }).then((res) => {\n      if (res.status >= 500) {\n        throw new Error(`Bad response from server: ${res.status}`)\n      }\n      if (res.status === 429) {\n        const retryTimeoutStringSecs = res.headers?.get('x-ratelimit-reset')\n        const retryTimeoutMS =\n          typeof retryTimeoutStringSecs == 'string'\n            ? parseInt(retryTimeoutStringSecs) * 1000\n            : timeout\n        throw new RateLimitError(\n          `Rate limit exceeded: ${res.status}`,\n          retryTimeoutMS\n        )\n      }\n    })\n  }\n\n  async function flush(attempt = 1): Promise<unknown> {\n    if (buffer.length) {\n      const batch = buffer\n      buffer = []\n      return sendBatch(batch)?.catch((error) => {\n        const ctx = Context.system()\n        ctx.log('error', 'Error sending batch', error)\n        if (attempt <= (config?.maxRetries ?? 10)) {\n          if (error.name === 'RateLimitError') {\n            rateLimitTimeout = error.retryTimeout\n          }\n          buffer.push(...batch)\n          buffer.map((event) => {\n            if ('_metadata' in event) {\n              const segmentEvent = event as ReturnType<SegmentFacade['json']>\n              segmentEvent._metadata = {\n                ...segmentEvent._metadata,\n                retryCount: attempt,\n              }\n            }\n          })\n          scheduleFlush(attempt + 1)\n        }\n      })\n    }\n  }\n\n  let schedule: NodeJS.Timeout | undefined\n\n  function scheduleFlush(attempt = 1): void {\n    if (schedule) {\n      return\n    }\n\n    schedule = setTimeout(\n      () => {\n        schedule = undefined\n        flush(attempt).catch(console.error)\n      },\n      rateLimitTimeout ? rateLimitTimeout : timeout\n    )\n    rateLimitTimeout = 0\n  }\n\n  onPageChange((unloaded) => {\n    pageUnloaded = unloaded\n\n    if (pageUnloaded && buffer.length) {\n      const reqs = chunks(buffer).map(sendBatch)\n      Promise.all(reqs).catch(console.error)\n    }\n  })\n\n  async function dispatch(_url: string, body: object): Promise<unknown> {\n    buffer.push(body)\n\n    const bufferOverflow =\n      buffer.length >= limit ||\n      approachingTrackingAPILimit(buffer) ||\n      (config?.keepalive && passedKeepaliveLimit(buffer))\n\n    return bufferOverflow || pageUnloaded ? flush() : scheduleFlush()\n  }\n\n  return {\n    dispatch,\n  }\n}\n","import { v4 as uuid } from '@lukeed/uuid'\nimport autoBind from '../../lib/bind-all'\nimport { Traits } from '../events'\nimport {\n  CookieOptions,\n  UniversalStorage,\n  MemoryStorage,\n  StorageObject,\n  StorageSettings,\n  StoreType,\n  applyCookieOptions,\n  initializeStorages,\n  isArrayOfStoreType,\n} from '../storage'\n\nexport type ID = string | null | undefined\n\nexport interface UserOptions {\n  /**\n   * Disables storing any data about the user.\n   */\n  disable?: boolean\n  localStorageFallbackDisabled?: boolean\n  persist?: boolean\n\n  cookie?: {\n    key?: string\n    oldKey?: string\n  }\n\n  localStorage?: {\n    key: string\n  }\n\n  /**\n   * Store priority\n   * @example stores: [StoreType.Cookie, StoreType.Memory]\n   */\n  storage?: StorageSettings\n}\n\nconst defaults = {\n  persist: true,\n  cookie: {\n    key: 'ajs_user_id',\n    oldKey: 'ajs_user',\n  },\n  localStorage: {\n    key: 'ajs_user_traits',\n  },\n}\n\nexport interface WithId {\n  id(id?: ID): ID\n}\n\nexport class User implements WithId {\n  static defaults = defaults\n\n  private idKey: string\n  private traitsKey: string\n  private anonKey: string\n  private cookieOptions?: CookieOptions\n\n  private legacyUserStore: UniversalStorage<{\n    [k: string]:\n      | {\n          id?: string\n          traits?: Traits\n        }\n      | string\n  }>\n  private traitsStore: UniversalStorage<{\n    [k: string]: Traits\n  }>\n\n  private identityStore: UniversalStorage<{\n    [k: string]: string\n  }>\n\n  options: UserOptions = {}\n\n  constructor(options: UserOptions = defaults, cookieOptions?: CookieOptions) {\n    this.options = { ...defaults, ...options }\n    this.cookieOptions = cookieOptions\n\n    this.idKey = options.cookie?.key ?? defaults.cookie.key\n    this.traitsKey = options.localStorage?.key ?? defaults.localStorage.key\n    this.anonKey = 'ajs_anonymous_id'\n\n    this.identityStore = this.createStorage(this.options, cookieOptions)\n\n    // using only cookies for legacy user store\n    this.legacyUserStore = this.createStorage(\n      this.options,\n      cookieOptions,\n      (s) => s === StoreType.Cookie\n    )\n\n    // using only localStorage / memory for traits store\n    this.traitsStore = this.createStorage(\n      this.options,\n      cookieOptions,\n      (s) => s !== StoreType.Cookie\n    )\n\n    const legacyUser = this.legacyUserStore.get(defaults.cookie.oldKey)\n    if (legacyUser && typeof legacyUser === 'object') {\n      legacyUser.id && this.id(legacyUser.id)\n      legacyUser.traits && this.traits(legacyUser.traits)\n    }\n    autoBind(this)\n  }\n\n  id = (id?: ID): ID => {\n    if (this.options.disable) {\n      return null\n    }\n\n    const prevId = this.identityStore.getAndSync(this.idKey)\n\n    if (id !== undefined) {\n      this.identityStore.set(this.idKey, id)\n\n      const changingIdentity = id !== prevId && prevId !== null && id !== null\n      if (changingIdentity) {\n        this.anonymousId(null)\n      }\n    }\n\n    const retId = this.identityStore.getAndSync(this.idKey)\n    if (retId) return retId\n\n    const retLeg = this.legacyUserStore.get(defaults.cookie.oldKey)\n    return retLeg ? (typeof retLeg === 'object' ? retLeg.id : retLeg) : null\n  }\n\n  private legacySIO(): [string, string] | null {\n    const val = this.legacyUserStore.get('_sio') as string\n    if (!val) {\n      return null\n    }\n    const [anon, user] = val.split('----')\n    return [anon, user]\n  }\n\n  anonymousId = (id?: ID): ID => {\n    if (this.options.disable) {\n      return null\n    }\n\n    if (id === undefined) {\n      const val =\n        this.identityStore.getAndSync(this.anonKey) ?? this.legacySIO()?.[0]\n\n      if (val) {\n        return val\n      }\n    }\n\n    if (id === null) {\n      this.identityStore.set(this.anonKey, null)\n      return this.identityStore.getAndSync(this.anonKey)\n    }\n\n    this.identityStore.set(this.anonKey, id ?? uuid())\n    return this.identityStore.getAndSync(this.anonKey)\n  }\n\n  traits = (traits?: Traits | null): Traits | undefined => {\n    if (this.options.disable) {\n      return\n    }\n\n    if (traits === null) {\n      traits = {}\n    }\n\n    if (traits) {\n      this.traitsStore.set(this.traitsKey, traits ?? {})\n    }\n\n    return this.traitsStore.get(this.traitsKey) ?? {}\n  }\n\n  identify(id?: ID, traits?: Traits): void {\n    if (this.options.disable) {\n      return\n    }\n\n    traits = traits ?? {}\n    const currentId = this.id()\n\n    if (currentId === null || currentId === id) {\n      traits = {\n        ...this.traits(),\n        ...traits,\n      }\n    }\n\n    if (id) {\n      this.id(id)\n    }\n\n    this.traits(traits)\n  }\n\n  logout(): void {\n    this.anonymousId(null)\n    this.id(null)\n    this.traits({})\n  }\n\n  reset(): void {\n    this.logout()\n    this.identityStore.clear(this.idKey)\n    this.identityStore.clear(this.anonKey)\n    this.traitsStore.clear(this.traitsKey)\n  }\n\n  load(): User {\n    return new User(this.options, this.cookieOptions)\n  }\n\n  save(): boolean {\n    return true\n  }\n\n  /**\n   * Creates the right storage system applying all the user options, cookie options and particular filters\n   * @param options UserOptions\n   * @param cookieOpts CookieOptions\n   * @param filterStores filter function to apply to any StoreTypes (skipped if options specify using a custom storage)\n   * @returns a Storage object\n   */\n  private createStorage<T extends StorageObject = StorageObject>(\n    options: UserOptions,\n    cookieOpts?: CookieOptions,\n    filterStores?: (value: StoreType) => boolean\n  ): UniversalStorage<T> {\n    let stores: StoreType[] = [\n      StoreType.LocalStorage,\n      StoreType.Cookie,\n      StoreType.Memory,\n    ]\n\n    // If disabled we won't have any storage functionality\n    if (options.disable) {\n      return new UniversalStorage<T>([])\n    }\n\n    // If persistance is disabled we will always fallback to Memory Storage\n    if (!options.persist) {\n      return new UniversalStorage<T>([new MemoryStorage<T>()])\n    }\n\n    if (options.storage !== undefined && options.storage !== null) {\n      if (isArrayOfStoreType(options.storage)) {\n        // If the user only specified order of stores we will still apply filters and transformations e.g. not using localStorage if localStorageFallbackDisabled\n        stores = options.storage.stores\n      }\n    }\n\n    // Disable LocalStorage\n    if (options.localStorageFallbackDisabled) {\n      stores = stores.filter((s) => s !== StoreType.LocalStorage)\n    }\n\n    // Apply Additional filters\n    if (filterStores) {\n      stores = stores.filter(filterStores)\n    }\n\n    return new UniversalStorage(\n      initializeStorages(applyCookieOptions(stores, cookieOpts))\n    )\n  }\n}\n\nconst groupDefaults: UserOptions = {\n  persist: true,\n  cookie: {\n    key: 'ajs_group_id',\n  },\n  localStorage: {\n    key: 'ajs_group_properties',\n  },\n}\n\nexport class Group extends User {\n  constructor(options: UserOptions = groupDefaults, cookie?: CookieOptions) {\n    super({ ...groupDefaults, ...options }, cookie)\n    autoBind(this)\n  }\n\n  anonymousId = (_id?: ID): ID => {\n    return undefined\n  }\n}\n","import { v4 as uuid } from '@lukeed/uuid'\nimport { ID, User } from '../user'\nimport { Options, EventProperties, Traits, SegmentEvent } from './interfaces'\nimport { addPageContext, PageContext } from '../page'\nimport { CoreEventFactory, IntegrationsOptions } from '@segment/analytics-core'\n\nexport * from './interfaces'\n\nexport class EventFactory extends CoreEventFactory {\n  user: User\n  constructor(user: User) {\n    super({\n      createMessageId: () => `ajs-next-${Date.now()}-${uuid()}`,\n      onEventMethodCall: ({ options }) => {\n        this.maybeUpdateAnonId(options)\n      },\n      onFinishedEvent: (event) => {\n        this.addIdentity(event)\n        return event\n      },\n    })\n    this.user = user\n  }\n\n  /**\n   * Updates the anonymousId *globally* if it's provided in the options.\n   * This should generally be done in the identify method, but some customers rely on this.\n   */\n  private maybeUpdateAnonId(options: Options | undefined): void {\n    options?.anonymousId && this.user.anonymousId(options.anonymousId)\n  }\n\n  /**\n   * add user id / anonymous id to the event\n   */\n  private addIdentity(event: SegmentEvent) {\n    if (this.user.id()) {\n      event.userId = this.user.id()\n    }\n\n    if (this.user.anonymousId()) {\n      event.anonymousId = this.user.anonymousId()\n    }\n  }\n\n  override track(\n    event: string,\n    properties?: EventProperties,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.track(event, properties, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override page(\n    category: string | null,\n    page: string | null,\n    properties?: EventProperties,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.page(\n      category,\n      page,\n      properties,\n      options,\n      integrationsOptions\n    )\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override screen(\n    category: string | null,\n    screen: string | null,\n    properties?: EventProperties,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.screen(\n      category,\n      screen,\n      properties,\n      options,\n      integrationsOptions\n    )\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override identify(\n    userId: ID,\n    traits?: Traits,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.identify(userId, traits, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override group(\n    groupId: ID,\n    traits?: Traits,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.group(groupId, traits, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n\n  override alias(\n    to: string,\n    from: string | null,\n    options?: Options,\n    integrationsOptions?: IntegrationsOptions,\n    pageCtx?: PageContext\n  ): SegmentEvent {\n    const ev = super.alias(to, from, options, integrationsOptions)\n    addPageContext(ev, pageCtx)\n    return ev\n  }\n}\n","import { Analytics } from '../analytics'\nimport { Context } from '../context'\nimport { isThenable } from '../../lib/is-thenable'\nimport { AnalyticsBrowserCore } from '../analytics/interfaces'\nimport { version } from '../../generated/version'\nimport { getGlobalAnalytics } from '../../lib/global-analytics-helper'\nimport {\n  isBufferedPageContext,\n  getDefaultBufferedPageContext,\n  createPageContext,\n  BufferedPageContext,\n  PageContext,\n} from '../page'\nimport { getVersionType } from '../../lib/version-type'\n\n/**\n * The names of any AnalyticsBrowser methods that also exist on Analytics\n */\nexport type PreInitMethodName =\n  | 'screen'\n  | 'register'\n  | 'deregister'\n  | 'user'\n  | 'trackSubmit'\n  | 'trackClick'\n  | 'trackLink'\n  | 'trackForm'\n  | 'pageview'\n  | 'identify'\n  | 'reset'\n  | 'group'\n  | 'track'\n  | 'ready'\n  | 'alias'\n  | 'debug'\n  | 'page'\n  | 'once'\n  | 'off'\n  | 'on'\n  | 'addSourceMiddleware'\n  | 'setAnonymousId'\n  | 'addDestinationMiddleware'\n\n// Union of all analytics methods that _do not_ return a Promise\ntype SyncPreInitMethodName = {\n  [MethodName in PreInitMethodName]: ReturnType<\n    Analytics[MethodName]\n  > extends Promise<any>\n    ? never\n    : MethodName\n}[PreInitMethodName]\n\nconst flushSyncAnalyticsCalls = (\n  name: SyncPreInitMethodName,\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n): void => {\n  buffer.getAndRemove(name).forEach((c) => {\n    // While the underlying methods are synchronous, the callAnalyticsMethod returns a promise,\n    // which normalizes success and error states between async and non-async methods, with no perf penalty.\n    callAnalyticsMethod(analytics, c).catch(console.error)\n  })\n}\n\nexport const flushAddSourceMiddleware = async (\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n) => {\n  for (const c of buffer.getAndRemove('addSourceMiddleware')) {\n    await callAnalyticsMethod(analytics, c).catch(console.error)\n  }\n}\n\n/**\n *  Flush register plugin\n */\nexport const flushRegister = async (\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n) => {\n  for (const c of buffer.getAndRemove('register')) {\n    await callAnalyticsMethod(analytics, c).catch(console.error)\n  }\n}\n\nexport const flushOn = flushSyncAnalyticsCalls.bind(this, 'on')\n\nexport const flushSetAnonymousID = flushSyncAnalyticsCalls.bind(\n  this,\n  'setAnonymousId'\n)\n\nexport const flushAnalyticsCallsInNewTask = (\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n): void => {\n  ;(Object.keys(buffer.calls) as (keyof typeof buffer.calls)[]).forEach((m) => {\n    buffer.getAndRemove(m).forEach((c) => {\n      // No one remembers why this event loop optimization is/was neccessary. Lost to history.\n      setTimeout(() => {\n        callAnalyticsMethod(analytics, c).catch(console.error)\n      }, 0)\n    })\n  })\n}\n\nexport const popPageContext = (args: unknown[]): PageContext | undefined => {\n  if (hasBufferedPageContextAsLastArg(args)) {\n    const ctx = args.pop() as BufferedPageContext\n    return createPageContext(ctx)\n  }\n}\n\nexport const hasBufferedPageContextAsLastArg = (\n  args: unknown[]\n): args is [...unknown[], BufferedPageContext] | [BufferedPageContext] => {\n  const lastArg = args[args.length - 1]\n  return isBufferedPageContext(lastArg)\n}\n\n/**\n *  Represents a buffered method call that occurred before initialization.\n */\nexport class PreInitMethodCall<\n  MethodName extends PreInitMethodName = PreInitMethodName\n> {\n  method: MethodName\n  args: PreInitMethodParams<MethodName>\n  called: boolean\n  resolve: (v: ReturnType<Analytics[MethodName]>) => void\n  reject: (reason: any) => void\n  constructor(\n    method: PreInitMethodCall<MethodName>['method'],\n    args: PreInitMethodParams<MethodName>,\n    resolve: PreInitMethodCall<MethodName>['resolve'] = () => {},\n    reject: PreInitMethodCall<MethodName>['reject'] = console.error\n  ) {\n    this.method = method\n    this.resolve = resolve\n    this.reject = reject\n    this.called = false\n    this.args = args\n  }\n}\n\nexport type PreInitMethodParams<MethodName extends PreInitMethodName> =\n  | [...Parameters<Analytics[MethodName]>, BufferedPageContext]\n  | Parameters<Analytics[MethodName]>\n\n/**\n * Infer return type; if return type is promise, unwrap it.\n */\ntype ReturnTypeUnwrap<Fn> = Fn extends (...args: any[]) => infer ReturnT\n  ? ReturnT extends PromiseLike<infer Unwrapped>\n    ? Unwrapped\n    : ReturnT\n  : never\n\ntype MethodCallMap = Partial<Record<PreInitMethodName, PreInitMethodCall[]>>\n\ntype SnippetWindowBufferedMethodCall<\n  MethodName extends PreInitMethodName = PreInitMethodName\n> = [MethodName, ...PreInitMethodParams<MethodName>]\n\n/**\n * A list of the method calls before initialization for snippet users\n * For example, [[\"track\", \"foo\", {bar: 123}], [\"page\"], [\"on\", \"ready\", function(){..}]\n */\ntype SnippetBuffer = SnippetWindowBufferedMethodCall[]\n\n/**\n *  Represents any and all the buffered method calls that occurred before initialization.\n */\nexport class PreInitMethodCallBuffer {\n  private _callMap: MethodCallMap = {}\n\n  constructor(...calls: PreInitMethodCall[]) {\n    this.add(...calls)\n  }\n\n  /**\n   * Pull any buffered method calls from the window object, and use them to hydrate the instance buffer.\n   */\n  public get calls() {\n    this._pushSnippetWindowBuffer()\n    return this._callMap\n  }\n\n  private set calls(calls: MethodCallMap) {\n    this._callMap = calls\n  }\n\n  get<T extends PreInitMethodName>(methodName: T): PreInitMethodCall<T>[] {\n    return (this.calls[methodName] ?? []) as PreInitMethodCall<T>[]\n  }\n\n  /**\n   * Get all buffered method calls for a given method name, and clear them from the buffer.\n   */\n  getAndRemove<T extends PreInitMethodName>(\n    methodName: T\n  ): PreInitMethodCall<T>[] {\n    const calls = this.get(methodName)\n    this.calls[methodName] = []\n    return calls\n  }\n\n  add(...calls: PreInitMethodCall[]): void {\n    calls.forEach((call) => {\n      const eventsExpectingPageContext: PreInitMethodName[] = [\n        'track',\n        'screen',\n        'alias',\n        'group',\n        'page',\n        'identify',\n      ]\n      if (\n        eventsExpectingPageContext.includes(call.method) &&\n        !hasBufferedPageContextAsLastArg(call.args)\n      ) {\n        call.args = [...call.args, getDefaultBufferedPageContext()]\n      }\n\n      if (this.calls[call.method]) {\n        this.calls[call.method]!.push(call)\n      } else {\n        this.calls[call.method] = [call]\n      }\n    })\n  }\n\n  clear(): void {\n    // clear calls in the global snippet buffered array.\n    this._pushSnippetWindowBuffer()\n    // clear calls in this instance\n    this.calls = {}\n  }\n\n  toArray(): PreInitMethodCall[] {\n    return ([] as PreInitMethodCall[]).concat(...Object.values(this.calls))\n  }\n\n  /**\n   * Fetch the buffered method calls from the window object,\n   * normalize them, and use them to hydrate the buffer.\n   * This removes existing buffered calls from the window object.\n   */\n  private _pushSnippetWindowBuffer(): void {\n    // if this is the npm version, we don't want to read from the window object.\n    // This avoids namespace conflicts if there is a seperate analytics library on the page.\n    if (getVersionType() === 'npm') {\n      return undefined\n    }\n    const wa = getGlobalAnalytics()\n    if (!Array.isArray(wa)) return undefined\n    const buffered: SnippetBuffer = wa.splice(0, wa.length)\n    const calls = buffered.map(\n      ([methodName, ...args]) => new PreInitMethodCall(methodName, args)\n    )\n    this.add(...calls)\n  }\n}\n\n/**\n *  Call method and mark as \"called\"\n *  This function should never throw an error\n */\nexport async function callAnalyticsMethod<T extends PreInitMethodName>(\n  analytics: Analytics,\n  call: PreInitMethodCall<T>\n): Promise<void> {\n  try {\n    if (call.called) {\n      return undefined\n    }\n    call.called = true\n\n    const result: ReturnType<Analytics[T]> = (\n      analytics[call.method] as Function\n    )(...call.args)\n\n    if (isThenable(result)) {\n      // do not defer for non-async methods\n      await result\n    }\n\n    call.resolve(result)\n  } catch (err) {\n    call.reject(err)\n  }\n}\n\nexport type AnalyticsLoader = (\n  preInitBuffer: PreInitMethodCallBuffer\n) => Promise<[Analytics, Context]>\n\nexport class AnalyticsBuffered\n  implements PromiseLike<[Analytics, Context]>, AnalyticsBrowserCore\n{\n  instance?: Analytics\n  ctx?: Context\n  private _preInitBuffer: PreInitMethodCallBuffer\n  private _promise: Promise<[Analytics, Context]>\n  constructor(loader: AnalyticsLoader) {\n    this._preInitBuffer = new PreInitMethodCallBuffer()\n    this._promise = loader(this._preInitBuffer)\n    this._promise\n      .then(([ajs, ctx]) => {\n        this.instance = ajs\n        this.ctx = ctx\n      })\n      .catch(() => {\n        // intentionally do nothing...\n        // this result of this promise will be caught by the 'catch' block on this class.\n      })\n  }\n\n  then<T1, T2 = never>(\n    ...args: [\n      onfulfilled:\n        | ((instance: [Analytics, Context]) => T1 | PromiseLike<T1>)\n        | null\n        | undefined,\n      onrejected?: (reason: unknown) => T2 | PromiseLike<T2>\n    ]\n  ) {\n    return this._promise.then(...args)\n  }\n\n  catch<TResult = never>(\n    ...args: [\n      onrejected?:\n        | ((reason: any) => TResult | PromiseLike<TResult>)\n        | undefined\n        | null\n    ]\n  ) {\n    return this._promise.catch(...args)\n  }\n\n  finally(...args: [onfinally?: (() => void) | undefined | null]) {\n    return this._promise.finally(...args)\n  }\n\n  trackSubmit = this._createMethod('trackSubmit')\n  trackClick = this._createMethod('trackClick')\n  trackLink = this._createMethod('trackLink')\n  pageView = this._createMethod('pageview')\n  identify = this._createMethod('identify')\n  reset = this._createMethod('reset')\n  group = this._createMethod('group') as AnalyticsBrowserCore['group']\n  track = this._createMethod('track')\n  ready = this._createMethod('ready')\n  alias = this._createMethod('alias')\n  debug = this._createChainableMethod('debug')\n  page = this._createMethod('page')\n  once = this._createChainableMethod('once')\n  off = this._createChainableMethod('off')\n  on = this._createChainableMethod('on')\n  addSourceMiddleware = this._createMethod('addSourceMiddleware')\n  setAnonymousId = this._createMethod('setAnonymousId')\n  addDestinationMiddleware = this._createMethod('addDestinationMiddleware')\n\n  screen = this._createMethod('screen')\n  register = this._createMethod('register')\n  deregister = this._createMethod('deregister')\n  user = this._createMethod('user')\n  readonly VERSION = version\n\n  private _createMethod<T extends PreInitMethodName>(methodName: T) {\n    return (\n      ...args: Parameters<Analytics[T]>\n    ): Promise<ReturnTypeUnwrap<Analytics[T]>> => {\n      if (this.instance) {\n        const result = (this.instance[methodName] as Function)(...args)\n        return Promise.resolve(result)\n      }\n      return new Promise((resolve, reject) => {\n        this._preInitBuffer.add(\n          new PreInitMethodCall(methodName, args, resolve as any, reject)\n        )\n      })\n    }\n  }\n\n  /**\n   *  These are for methods that where determining when the method gets \"flushed\" is not important.\n   *  These methods will resolve when analytics is fully initialized, and return type (other than Analytics)will not be available.\n   */\n  private _createChainableMethod<T extends PreInitMethodName>(methodName: T) {\n    return (...args: Parameters<Analytics[T]>): AnalyticsBuffered => {\n      if (this.instance) {\n        void (this.instance[methodName] as Function)(...args)\n        return this\n      } else {\n        this._preInitBuffer.add(new PreInitMethodCall(methodName, args))\n      }\n\n      return this\n    }\n  }\n}\n","import { CDNSettings } from '../../browser'\nimport { JSONObject, JSONValue } from '../../core/events'\nimport { Plugin, InternalPluginWithAddMiddleware } from '../../core/plugin'\nimport { loadScript } from '../../lib/load-script'\nimport { getCDN } from '../../lib/parse-cdn'\nimport {\n  applyDestinationMiddleware,\n  DestinationMiddlewareFunction,\n} from '../middleware'\nimport { Context, ContextCancelation } from '../../core/context'\nimport { recordIntegrationMetric } from '../../core/stats/metric-helpers'\nimport { Analytics, InitOptions } from '../../core/analytics'\nimport { createDeferred } from '@segment/analytics-generic-utils'\nimport { IntegrationsInitOptions } from '../../browser/settings'\n\nexport interface RemotePlugin {\n  /** The name of the remote plugin */\n  name: string\n  /** The creation name of the remote plugin */\n  creationName: string\n  /** The url of the javascript file to load */\n  url: string\n  /** The UMD/global name the plugin uses. Plugins are expected to exist here with the `PluginFactory` method signature */\n  libraryName: string\n  /** The settings related to this plugin. */\n  settings: JSONObject\n}\n\nexport class ActionDestination implements InternalPluginWithAddMiddleware {\n  name: string // destination name\n  version = '1.0.0'\n  /**\n   * The lifecycle name of the wrapped plugin.\n   * This does not need to be 'destination', and can be 'enrichment', etc.\n   */\n  type: Plugin['type']\n\n  alternativeNames: string[] = []\n\n  private loadPromise = createDeferred<unknown>()\n\n  middleware: DestinationMiddlewareFunction[] = []\n\n  action: Plugin\n\n  constructor(name: string, action: Plugin) {\n    this.action = action\n    this.name = name\n    this.type = action.type\n    this.alternativeNames.push(action.name)\n  }\n\n  addMiddleware(...fn: DestinationMiddlewareFunction[]): void {\n    /** Make sure we only apply destination filters to actions of the \"destination\" type to avoid causing issues for hybrid destinations */\n    if (this.type === 'destination') {\n      this.middleware.push(...fn)\n    }\n  }\n\n  private async transform(ctx: Context): Promise<Context> {\n    const modifiedEvent = await applyDestinationMiddleware(\n      this.name,\n      ctx.event,\n      this.middleware\n    )\n\n    if (modifiedEvent === null) {\n      ctx.cancel(\n        new ContextCancelation({\n          retry: false,\n          reason: 'dropped by destination middleware',\n        })\n      )\n    }\n\n    return new Context(modifiedEvent!)\n  }\n\n  private _createMethod(\n    methodName: 'track' | 'page' | 'identify' | 'alias' | 'group' | 'screen'\n  ) {\n    return async (ctx: Context): Promise<Context> => {\n      if (!this.action[methodName]) return ctx\n\n      let transformedContext: Context = ctx\n      // Transformations only allowed for destination plugins. Other plugin types support mutating events.\n      if (this.type === 'destination') {\n        transformedContext = await this.transform(ctx)\n      }\n\n      try {\n        if (!(await this.ready())) {\n          throw new Error(\n            'Something prevented the destination from getting ready'\n          )\n        }\n\n        recordIntegrationMetric(ctx, {\n          integrationName: this.action.name,\n          methodName,\n          type: 'action',\n        })\n\n        await this.action[methodName]!(transformedContext)\n      } catch (error) {\n        recordIntegrationMetric(ctx, {\n          integrationName: this.action.name,\n          methodName,\n          type: 'action',\n          didError: true,\n        })\n        throw error\n      }\n\n      return ctx\n    }\n  }\n\n  alias = this._createMethod('alias')\n  group = this._createMethod('group')\n  identify = this._createMethod('identify')\n  page = this._createMethod('page')\n  screen = this._createMethod('screen')\n  track = this._createMethod('track')\n\n  /* --- PASSTHROUGH METHODS --- */\n  isLoaded(): boolean {\n    return this.action.isLoaded()\n  }\n\n  async ready(): Promise<boolean> {\n    try {\n      await this.loadPromise.promise\n      return true\n    } catch {\n      return false\n    }\n  }\n\n  async load(ctx: Context, analytics: Analytics): Promise<unknown> {\n    if (this.loadPromise.isSettled()) {\n      return this.loadPromise.promise\n    }\n\n    try {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.action.name,\n        methodName: 'load',\n        type: 'action',\n      })\n\n      const loadP = this.action.load(ctx, analytics)\n\n      this.loadPromise.resolve(await loadP)\n      return loadP\n    } catch (error) {\n      recordIntegrationMetric(ctx, {\n        integrationName: this.action.name,\n        methodName: 'load',\n        type: 'action',\n        didError: true,\n      })\n\n      this.loadPromise.reject(error)\n      throw error\n    }\n  }\n\n  unload(ctx: Context, analytics: Analytics): Promise<unknown> | unknown {\n    return this.action.unload?.(ctx, analytics)\n  }\n}\n\nexport type PluginFactory = {\n  (settings: JSONValue): Plugin | Plugin[] | Promise<Plugin | Plugin[]>\n  pluginName: string\n}\n\nfunction validate(pluginLike: unknown): pluginLike is Plugin[] {\n  if (!Array.isArray(pluginLike)) {\n    throw new Error('Not a valid list of plugins')\n  }\n\n  const required = ['load', 'isLoaded', 'name', 'version', 'type']\n  pluginLike.forEach((plugin) => {\n    required.forEach((method) => {\n      if (plugin[method] === undefined) {\n        throw new Error(\n          `Plugin: ${\n            plugin.name ?? 'unknown'\n          } missing required function ${method}`\n        )\n      }\n    })\n  })\n\n  return true\n}\n\nfunction isPluginDisabled(\n  userIntegrations: IntegrationsInitOptions,\n  remotePlugin: RemotePlugin\n) {\n  const creationNameEnabled = userIntegrations[remotePlugin.creationName]\n  const currentNameEnabled = userIntegrations[remotePlugin.name]\n\n  // Check that the plugin isn't explicitly enabled when All: false\n  if (\n    userIntegrations.All === false &&\n    !creationNameEnabled &&\n    !currentNameEnabled\n  ) {\n    return true\n  }\n\n  // Check that the plugin isn't explicitly disabled\n  if (creationNameEnabled === false || currentNameEnabled === false) {\n    return true\n  }\n\n  return false\n}\n\nasync function loadPluginFactory(\n  remotePlugin: RemotePlugin,\n  obfuscate?: boolean\n): Promise<void | PluginFactory> {\n  try {\n    const defaultCdn = new RegExp('https://cdn.segment.(com|build)')\n    const cdn = getCDN()\n\n    if (obfuscate) {\n      const urlSplit = remotePlugin.url.split('/')\n      const name = urlSplit[urlSplit.length - 2]\n      const obfuscatedURL = remotePlugin.url.replace(\n        name,\n        btoa(name).replace(/=/g, '')\n      )\n      try {\n        await loadScript(obfuscatedURL.replace(defaultCdn, cdn))\n      } catch (error) {\n        // Due to syncing concerns it is possible that the obfuscated action destination (or requested version) might not exist.\n        // We should use the unobfuscated version as a fallback.\n        await loadScript(remotePlugin.url.replace(defaultCdn, cdn))\n      }\n    } else {\n      await loadScript(remotePlugin.url.replace(defaultCdn, cdn))\n    }\n\n    // @ts-expect-error\n    if (typeof window[remotePlugin.libraryName] === 'function') {\n      // @ts-expect-error\n      return window[remotePlugin.libraryName] as PluginFactory\n    }\n  } catch (err) {\n    console.error('Failed to create PluginFactory', remotePlugin)\n    throw err\n  }\n}\n\nexport async function remoteLoader(\n  settings: CDNSettings,\n  integrations: IntegrationsInitOptions,\n  mergedIntegrations: Record<string, JSONObject>,\n  options?: InitOptions,\n  routingMiddleware?: DestinationMiddlewareFunction,\n  pluginSources?: PluginFactory[]\n): Promise<Plugin[]> {\n  const allPlugins: Plugin[] = []\n\n  const routingRules = settings.middlewareSettings?.routingRules ?? []\n\n  const pluginPromises = (settings.remotePlugins ?? []).map(\n    async (remotePlugin) => {\n      if (isPluginDisabled(integrations, remotePlugin)) return\n\n      try {\n        const pluginFactory =\n          pluginSources?.find(\n            ({ pluginName }) => pluginName === remotePlugin.name\n          ) || (await loadPluginFactory(remotePlugin, options?.obfuscate))\n\n        if (pluginFactory) {\n          const intg = mergedIntegrations[remotePlugin.name]\n          const plugin = await pluginFactory({\n            ...remotePlugin.settings,\n            ...intg,\n          })\n          const plugins = Array.isArray(plugin) ? plugin : [plugin]\n\n          validate(plugins)\n\n          const routing = routingRules.filter(\n            (rule) => rule.destinationName === remotePlugin.creationName\n          )\n\n          plugins.forEach((plugin) => {\n            const wrapper = new ActionDestination(\n              remotePlugin.creationName,\n              plugin\n            )\n\n            if (routing.length && routingMiddleware) {\n              wrapper.addMiddleware(routingMiddleware)\n            }\n\n            allPlugins.push(wrapper)\n          })\n        }\n      } catch (error) {\n        console.warn('Failed to load Remote Plugin', error)\n      }\n    }\n  )\n\n  await Promise.all(pluginPromises)\n  return allPlugins.filter(Boolean)\n}\n","import { HighEntropyHint, NavigatorUAData, UADataValues } from './interfaces'\n\nexport async function clientHints(\n  hints?: HighEntropyHint[]\n): Promise<UADataValues | undefined> {\n  const userAgentData = (navigator as any).userAgentData as\n    | NavigatorUAData\n    | undefined\n\n  if (!userAgentData) return undefined\n\n  if (!hints) return userAgentData.toJSON()\n  return userAgentData\n    .getHighEntropyValues(hints)\n    .catch(() => userAgentData.toJSON())\n}\n","import { Analytics } from '../../core/analytics'\nimport { CDNSettings } from '../../browser'\nimport { SegmentFacade } from '../../lib/to-facade'\nimport { SegmentioSettings } from './index'\nimport { Context } from '../../core/context'\n\nexport function normalize(\n  analytics: Analytics,\n  json: ReturnType<SegmentFacade['json']>,\n  settings?: SegmentioSettings,\n  integrations?: CDNSettings['integrations'],\n  ctx?: Context\n): object {\n  const user = analytics.user()\n\n  delete json.options\n\n  json.writeKey = settings?.apiKey\n\n  json.userId = json.userId || user.id()\n  json.anonymousId = json.anonymousId || user.anonymousId()\n\n  json.sentAt = new Date()\n\n  const failed = analytics.queue.failedInitializations || []\n  if (failed.length > 0) {\n    json._metadata = { failedInitializations: failed }\n  }\n\n  if (ctx != null) {\n    if (ctx.attempts > 1) {\n      json._metadata = {\n        ...json._metadata,\n        retryCount: ctx.attempts,\n      }\n    }\n    ctx.attempts++\n  }\n\n  const bundled: string[] = []\n  const unbundled: string[] = []\n\n  for (const key in integrations) {\n    const integration = integrations[key]\n    if (key === 'Segment.io') {\n      bundled.push(key)\n    }\n    if (integration.bundlingStatus === 'bundled') {\n      bundled.push(key)\n    }\n    if (integration.bundlingStatus === 'unbundled') {\n      unbundled.push(key)\n    }\n  }\n\n  // This will make sure that the disabled cloud mode destinations will be\n  // included in the unbundled list.\n  for (const settingsUnbundled of settings?.unbundledIntegrations || []) {\n    if (!unbundled.includes(settingsUnbundled)) {\n      unbundled.push(settingsUnbundled)\n    }\n  }\n\n  const configIds = settings?.maybeBundledConfigIds ?? {}\n  const bundledConfigIds: string[] = []\n\n  bundled.sort().forEach((name) => {\n    ;(configIds[name] ?? []).forEach((id) => {\n      bundledConfigIds.push(id)\n    })\n  })\n\n  if (settings?.addBundledMetadata !== false) {\n    json._metadata = {\n      ...json._metadata,\n      bundled: bundled.sort(),\n      unbundled: unbundled.sort(),\n      bundledIds: bundledConfigIds,\n    }\n  }\n\n  return json\n}\n","import {\n  AliasParams,\n  DispatchedEvent,\n  EventParams,\n  GroupParams,\n  PageParams,\n  resolveAliasArguments,\n  resolveArguments,\n  resolvePageArguments,\n  resolveUserArguments,\n  IdentifyParams,\n} from '../arguments-resolver'\nimport type { FormArgs, LinkArgs } from '../auto-track'\nimport { isOffline } from '../connection'\nimport { Context } from '../context'\nimport { dispatch } from '@segment/analytics-core'\nimport { Emitter } from '@segment/analytics-generic-utils'\nimport {\n  Callback,\n  EventFactory,\n  EventProperties,\n  SegmentEvent,\n} from '../events'\nimport { isDestinationPluginWithAddMiddleware, Plugin } from '../plugin'\nimport { EventQueue } from '../queue/event-queue'\nimport { Group, ID, User } from '../user'\nimport autoBind from '../../lib/bind-all'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport type { LegacyIntegration } from '../../plugins/ajs-destination/types'\nimport type {\n  DestinationMiddlewareFunction,\n  MiddlewareFunction,\n} from '../../plugins/middleware'\nimport { version } from '../../generated/version'\nimport { PriorityQueue } from '../../lib/priority-queue'\nimport { getGlobal } from '../../lib/get-global'\nimport { AnalyticsClassic, AnalyticsCore } from './interfaces'\nimport type { CDNSettings } from '../../browser'\nimport {\n  CookieOptions,\n  MemoryStorage,\n  UniversalStorage,\n  StoreType,\n  applyCookieOptions,\n  initializeStorages,\n  isArrayOfStoreType,\n} from '../storage'\nimport { setGlobalAnalytics } from '../../lib/global-analytics-helper'\nimport { popPageContext } from '../buffer'\nimport {\n  isSegmentPlugin,\n  SegmentIOPluginMetadata,\n} from '../../plugins/segmentio'\nimport {\n  AnalyticsSettings,\n  IntegrationsInitOptions,\n  InitOptions,\n} from '../../browser/settings'\n\nexport type { InitOptions, AnalyticsSettings }\n\nconst deprecationWarning =\n  'This is being deprecated and will be not be available in future releases of Analytics JS'\n\n// reference any pre-existing \"analytics\" object so a user can restore the reference\nconst global: any = getGlobal()\nconst _analytics = global?.analytics\n\nfunction createDefaultQueue(\n  name: string,\n  retryQueue = false,\n  disablePersistance = false\n) {\n  const maxAttempts = retryQueue ? 10 : 1\n  const priorityQueue = disablePersistance\n    ? new PriorityQueue(maxAttempts, [])\n    : new PersistedPriorityQueue(maxAttempts, name)\n  return new EventQueue(priorityQueue)\n}\n\n/**\n * The public settings that are set on the analytics instance\n */\nexport class AnalyticsInstanceSettings {\n  readonly writeKey: string\n  /**\n   * This is an unstable API, it may change in the future without warning.\n   */\n  readonly cdnSettings: CDNSettings\n  readonly cdnURL?: string\n  get apiHost(): string | undefined {\n    return this._getSegmentPluginMetadata?.()?.apiHost\n  }\n  private _getSegmentPluginMetadata?: () => SegmentIOPluginMetadata | undefined\n\n  /**\n   * Auto-track specific timeout setting for legacy purposes.\n   */\n  timeout = 300\n\n  constructor(settings: AnalyticsSettings, queue: EventQueue) {\n    this._getSegmentPluginMetadata = () =>\n      queue.plugins.find(isSegmentPlugin)?.metadata\n    this.writeKey = settings.writeKey\n\n    // this is basically just to satisfy typescript / so we don't need to change the function sig of every test.\n    // when loadAnalytics is called, cdnSettings will always be available.\n    const emptyCDNSettings: CDNSettings = {\n      integrations: {\n        'Segment.io': {\n          apiKey: '',\n        },\n      },\n    }\n    this.cdnSettings = settings.cdnSettings ?? emptyCDNSettings\n    this.cdnURL = settings.cdnURL\n  }\n}\n\n/* analytics-classic stubs */\nfunction _stub(this: never) {\n  console.warn(deprecationWarning)\n}\n\nexport class Analytics\n  extends Emitter\n  implements AnalyticsCore, AnalyticsClassic\n{\n  settings: AnalyticsInstanceSettings\n  private _user: User\n  private _group: Group\n  private eventFactory: EventFactory\n  private _debug = false\n  private _universalStorage: UniversalStorage\n\n  initialized = false\n  integrations: IntegrationsInitOptions\n  options: InitOptions\n  queue: EventQueue\n\n  constructor(\n    settings: AnalyticsSettings,\n    options?: InitOptions,\n    queue?: EventQueue,\n    user?: User,\n    group?: Group\n  ) {\n    super()\n    const cookieOptions = options?.cookie\n    const disablePersistance = options?.disableClientPersistence ?? false\n\n    this.queue =\n      queue ??\n      createDefaultQueue(\n        `${settings.writeKey}:event-queue`,\n        options?.retryQueue,\n        disablePersistance\n      )\n    this.settings = new AnalyticsInstanceSettings(settings, this.queue)\n\n    const storageSetting = options?.storage\n    this._universalStorage = this.createStore(\n      disablePersistance,\n      storageSetting,\n      cookieOptions\n    )\n\n    this._user =\n      user ??\n      new User(\n        {\n          persist: !disablePersistance,\n          storage: options?.storage,\n          // Any User specific options override everything else\n          ...options?.user,\n        },\n        cookieOptions\n      ).load()\n    this._group =\n      group ??\n      new Group(\n        {\n          persist: !disablePersistance,\n          storage: options?.storage,\n          // Any group specific options override everything else\n          ...options?.group,\n        },\n        cookieOptions\n      ).load()\n    this.eventFactory = new EventFactory(this._user)\n    this.integrations = options?.integrations ?? {}\n    this.options = options ?? {}\n    autoBind(this)\n  }\n\n  user = (): User => {\n    return this._user\n  }\n\n  /**\n   * Creates the storage system based on the settings received\n   * @returns Storage\n   */\n  private createStore(\n    disablePersistance: boolean,\n    storageSetting: InitOptions['storage'],\n    cookieOptions?: CookieOptions | undefined\n  ): UniversalStorage {\n    // DisablePersistance option overrides all, no storage will be used outside of memory even if specified\n    if (disablePersistance) {\n      return new UniversalStorage([new MemoryStorage()])\n    } else {\n      if (storageSetting) {\n        if (isArrayOfStoreType(storageSetting)) {\n          // We will create the store with the priority for customer settings\n          return new UniversalStorage(\n            initializeStorages(\n              applyCookieOptions(storageSetting.stores, cookieOptions)\n            )\n          )\n        }\n      }\n    }\n    // We default to our multi storage with priority\n    return new UniversalStorage(\n      initializeStorages([\n        StoreType.LocalStorage,\n        {\n          name: StoreType.Cookie,\n          settings: cookieOptions,\n        },\n        StoreType.Memory,\n      ])\n    )\n  }\n\n  get storage(): UniversalStorage {\n    return this._universalStorage\n  }\n\n  async track(...args: EventParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [name, data, opts, cb] = resolveArguments(...args)\n\n    const segmentEvent = this.eventFactory.track(\n      name,\n      data as EventProperties,\n      opts,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, cb).then((ctx) => {\n      this.emit('track', name, ctx.event.properties, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async page(...args: PageParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [category, page, properties, options, callback] =\n      resolvePageArguments(...args)\n\n    const segmentEvent = this.eventFactory.page(\n      category,\n      page,\n      properties,\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('page', category, page, ctx.event.properties, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async identify(...args: IdentifyParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [id, _traits, options, callback] = resolveUserArguments(this._user)(\n      ...args\n    )\n\n    this._user.identify(id, _traits)\n    const segmentEvent = this.eventFactory.identify(\n      this._user.id(),\n      this._user.traits(),\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit(\n        'identify',\n        ctx.event.userId,\n        ctx.event.traits,\n        ctx.event.options\n      )\n      return ctx\n    })\n  }\n\n  group(): Group\n  group(...args: GroupParams): Promise<DispatchedEvent>\n  group(...args: GroupParams): Promise<DispatchedEvent> | Group {\n    const pageCtx = popPageContext(args)\n    if (args.length === 0) {\n      return this._group\n    }\n\n    const [id, _traits, options, callback] = resolveUserArguments(this._group)(\n      ...args\n    )\n\n    this._group.identify(id, _traits)\n    const groupId = this._group.id()\n    const groupTraits = this._group.traits()\n\n    const segmentEvent = this.eventFactory.group(\n      groupId,\n      groupTraits,\n      options,\n      this.integrations,\n      pageCtx\n    )\n\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('group', ctx.event.groupId, ctx.event.traits, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async alias(...args: AliasParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [to, from, options, callback] = resolveAliasArguments(...args)\n    const segmentEvent = this.eventFactory.alias(\n      to,\n      from,\n      options,\n      this.integrations,\n      pageCtx\n    )\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit('alias', to, from, ctx.event.options)\n      return ctx\n    })\n  }\n\n  async screen(...args: PageParams): Promise<DispatchedEvent> {\n    const pageCtx = popPageContext(args)\n    const [category, page, properties, options, callback] =\n      resolvePageArguments(...args)\n\n    const segmentEvent = this.eventFactory.screen(\n      category,\n      page,\n      properties,\n      options,\n      this.integrations,\n      pageCtx\n    )\n    return this._dispatch(segmentEvent, callback).then((ctx) => {\n      this.emit(\n        'screen',\n        category,\n        page,\n        ctx.event.properties,\n        ctx.event.options\n      )\n      return ctx\n    })\n  }\n\n  async trackClick(...args: LinkArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.link.call(this, ...args)\n  }\n\n  async trackLink(...args: LinkArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.link.call(this, ...args)\n  }\n\n  async trackSubmit(...args: FormArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.form.call(this, ...args)\n  }\n\n  async trackForm(...args: FormArgs): Promise<Analytics> {\n    const autotrack = await import(\n      /* webpackChunkName: \"auto-track\" */ '../auto-track'\n    )\n    return autotrack.form.call(this, ...args)\n  }\n\n  async register(...plugins: Plugin[]): Promise<Context> {\n    const ctx = Context.system()\n\n    const registrations = plugins.map((xt) =>\n      this.queue.register(ctx, xt, this)\n    )\n    await Promise.all(registrations)\n\n    return ctx\n  }\n\n  async deregister(...plugins: string[]): Promise<Context> {\n    const ctx = Context.system()\n\n    const deregistrations = plugins.map((pl) => {\n      const plugin = this.queue.plugins.find((p) => p.name === pl)\n      if (plugin) {\n        return this.queue.deregister(ctx, plugin, this)\n      } else {\n        ctx.log('warn', `plugin ${pl} not found`)\n      }\n    })\n\n    await Promise.all(deregistrations)\n\n    return ctx\n  }\n\n  debug(toggle: boolean): Analytics {\n    // Make sure legacy ajs debug gets turned off if it was enabled before upgrading.\n    if (toggle === false && localStorage.getItem('debug')) {\n      localStorage.removeItem('debug')\n    }\n    this._debug = toggle\n    return this\n  }\n\n  reset(): void {\n    this._user.reset()\n    this._group.reset()\n    this.emit('reset')\n  }\n\n  timeout(timeout: number): void {\n    this.settings.timeout = timeout\n  }\n\n  private async _dispatch(\n    event: SegmentEvent,\n    callback?: Callback\n  ): Promise<DispatchedEvent> {\n    const ctx = new Context(event)\n    ctx.stats.increment('analytics_js.invoke', 1, [event.type])\n    if (isOffline() && !this.options.retryQueue) {\n      return ctx\n    }\n    return dispatch(ctx, this.queue, this, {\n      callback,\n      debug: this._debug,\n      timeout: this.settings.timeout,\n    })\n  }\n\n  async addSourceMiddleware(fn: MiddlewareFunction): Promise<Analytics> {\n    await this.queue.criticalTasks.run(async () => {\n      const { sourceMiddlewarePlugin } = await import(\n        /* webpackChunkName: \"middleware\" */ '../../plugins/middleware'\n      )\n\n      const integrations: Record<string, boolean> = {}\n      this.queue.plugins.forEach((plugin) => {\n        if (plugin.type === 'destination') {\n          return (integrations[plugin.name] = true)\n        }\n      })\n\n      const plugin = sourceMiddlewarePlugin(fn, integrations)\n      await this.register(plugin)\n    })\n\n    return this\n  }\n\n  /* TODO: This does not have to return a promise? */\n  addDestinationMiddleware(\n    integrationName: string,\n    ...middlewares: DestinationMiddlewareFunction[]\n  ): Promise<Analytics> {\n    this.queue.plugins\n      .filter(isDestinationPluginWithAddMiddleware)\n      .forEach((p) => {\n        if (\n          integrationName === '*' ||\n          p.name.toLowerCase() === integrationName.toLowerCase()\n        ) {\n          p.addMiddleware(...middlewares)\n        }\n      })\n\n    return Promise.resolve(this)\n  }\n\n  setAnonymousId(id?: string): ID {\n    return this._user.anonymousId(id)\n  }\n\n  async queryString(query: string): Promise<Context[]> {\n    if (this.options.useQueryString === false) {\n      return []\n    }\n\n    const { queryString } = await import(\n      /* webpackChunkName: \"queryString\" */ '../query-string'\n    )\n    return queryString(this, query)\n  }\n\n  /**\n   * @deprecated This function does not register a destination plugin.\n   *\n   * Instantiates a legacy Analytics.js destination.\n   *\n   * This function does not register the destination as an Analytics.JS plugin,\n   * all the it does it to invoke the factory function back.\n   */\n  use(legacyPluginFactory: (analytics: Analytics) => void): Analytics {\n    legacyPluginFactory(this)\n    return this\n  }\n\n  async ready(\n    callback: Function = (res: Promise<unknown>[]): Promise<unknown>[] => res\n  ): Promise<unknown> {\n    return Promise.all(\n      this.queue.plugins.map((i) => (i.ready ? i.ready() : Promise.resolve()))\n    ).then((res) => {\n      callback(res)\n      return res\n    })\n  }\n\n  // analytics-classic api\n\n  noConflict(): Analytics {\n    console.warn(deprecationWarning)\n    setGlobalAnalytics(_analytics ?? this)\n    return this\n  }\n\n  normalize(msg: SegmentEvent): SegmentEvent {\n    console.warn(deprecationWarning)\n    return this.eventFactory['normalize'](msg)\n  }\n\n  get failedInitializations(): string[] {\n    console.warn(deprecationWarning)\n    return this.queue.failedInitializations\n  }\n\n  get VERSION(): string {\n    return version\n  }\n\n  /* @deprecated - noop */\n  async initialize(\n    _settings?: AnalyticsSettings,\n    _options?: InitOptions\n  ): Promise<Analytics> {\n    console.warn(deprecationWarning)\n    return Promise.resolve(this)\n  }\n\n  init = this.initialize.bind(this)\n\n  async pageview(url: string): Promise<Analytics> {\n    console.warn(deprecationWarning)\n    await this.page({ path: url })\n    return this\n  }\n\n  get plugins() {\n    console.warn(deprecationWarning)\n    // @ts-expect-error\n    return this._plugins ?? {}\n  }\n\n  get Integrations() {\n    console.warn(deprecationWarning)\n    const integrations = this.queue.plugins\n      .filter((plugin) => plugin.type === 'destination')\n      .reduce((acc, plugin) => {\n        const name = `${plugin.name\n          .toLowerCase()\n          .replace('.', '')\n          .split(' ')\n          .join('-')}Integration`\n\n        // @ts-expect-error\n        const integration = window[name] as\n          | (LegacyIntegration & { Integration?: LegacyIntegration })\n          | undefined\n\n        if (!integration) {\n          return acc\n        }\n\n        const nested = integration.Integration // hack - Google Analytics function resides in the \"Integration\" field\n        if (nested) {\n          acc[plugin.name] = nested\n          return acc\n        }\n\n        acc[plugin.name] = integration as LegacyIntegration\n        return acc\n      }, {} as Record<string, LegacyIntegration>)\n\n    return integrations\n  }\n\n  log = _stub\n  addIntegrationMiddleware = _stub\n  listeners = _stub\n  addEventListener = _stub\n  removeAllListeners = _stub\n  removeListener = _stub\n  removeEventListener = _stub\n  hasListeners = _stub\n  add = _stub\n  addIntegration = _stub\n\n  // snippet function\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  push(args: any[]) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const an = this as any\n    const method = args.shift()\n    if (method) {\n      if (!an[method]) return\n    }\n    an[method].apply(this, args)\n  }\n}\n\n/**\n * @returns a no-op analytics instance that does not create cookies or localstorage, or send any events to segment.\n */\nexport class NullAnalytics extends Analytics {\n  constructor() {\n    super({ writeKey: '' }, { disableClientPersistence: true })\n    this.initialized = true\n  }\n}\n","import { isOffline } from '../../core/connection'\nimport { Context } from '../../core/context'\nimport { Plugin } from '../../core/plugin'\nimport { attempt } from '@segment/analytics-core'\nimport { pWhile } from '../../lib/p-while'\nimport { PriorityQueue } from '../../lib/priority-queue'\n\nasync function flushQueue(\n  xt: Plugin,\n  queue: PriorityQueue<Context>\n): Promise<PriorityQueue<Context>> {\n  const failedQueue: Context[] = []\n  if (isOffline()) {\n    return queue\n  }\n\n  await pWhile(\n    () => queue.length > 0 && !isOffline(),\n    async () => {\n      const ctx = queue.pop()\n      if (!ctx) {\n        return\n      }\n\n      const result = await attempt(ctx, xt)\n      const success = result instanceof Context\n      if (!success) {\n        failedQueue.push(ctx)\n      }\n    }\n  )\n  // re-add failed tasks\n  failedQueue.map((failed) => queue.pushWithBackoff(failed))\n  return queue\n}\n\nexport function scheduleFlush(\n  flushing: boolean,\n  buffer: PriorityQueue<Context>,\n  xt: Plugin,\n  scheduleFlush: Function\n): void {\n  if (flushing) {\n    return\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-misused-promises\n  setTimeout(async () => {\n    let isFlushing = true\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    const newBuffer = await flushQueue(xt, buffer)\n    isFlushing = false\n\n    if (buffer.todo > 0) {\n      scheduleFlush(isFlushing, newBuffer, xt, scheduleFlush)\n    }\n  }, Math.random() * 5000)\n}\n","import { Facade } from '@segment/facade'\nimport { Analytics } from '../../core/analytics'\nimport { CDNSettings } from '../../browser'\nimport { isOffline } from '../../core/connection'\nimport { Context } from '../../core/context'\nimport { Plugin } from '../../core/plugin'\nimport { PriorityQueue } from '../../lib/priority-queue'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport { toFacade } from '../../lib/to-facade'\nimport batch from './batched-dispatcher'\nimport standard from './fetch-dispatcher'\nimport { normalize } from './normalize'\nimport { scheduleFlush } from './schedule-flush'\nimport { SEGMENT_API_HOST } from '../../core/constants'\nimport { DeliveryStrategy } from './shared-dispatcher'\n\nexport type SegmentioSettings = {\n  apiKey: string\n  apiHost?: string\n  protocol?: 'http' | 'https'\n\n  addBundledMetadata?: boolean\n  unbundledIntegrations?: string[]\n  bundledConfigIds?: string[]\n  unbundledConfigIds?: string[]\n\n  maybeBundledConfigIds?: Record<string, string[]>\n\n  deliveryStrategy?: DeliveryStrategy\n}\n\ntype JSON = ReturnType<Facade['json']>\n\nfunction onAlias(analytics: Analytics, json: JSON): JSON {\n  const user = analytics.user()\n  json.previousId =\n    json.previousId ?? json.from ?? user.id() ?? user.anonymousId()\n  json.userId = json.userId ?? json.to\n  delete json.from\n  delete json.to\n  return json\n}\n\nexport type SegmentIOPluginMetadata = {\n  writeKey: string\n  apiHost: string\n  protocol: string\n}\nexport interface SegmentIOPlugin extends Plugin {\n  metadata: SegmentIOPluginMetadata\n}\n\nexport const isSegmentPlugin = (plugin: Plugin): plugin is SegmentIOPlugin => {\n  return plugin.name === 'Segment.io'\n}\n\nexport function segmentio(\n  analytics: Analytics,\n  settings?: SegmentioSettings,\n  integrations?: CDNSettings['integrations']\n): Plugin {\n  // Attach `pagehide` before buffer is created so that inflight events are added\n  // to the buffer before the buffer persists events in its own `pagehide` handler.\n  window.addEventListener('pagehide', () => {\n    buffer.push(...Array.from(inflightEvents))\n    inflightEvents.clear()\n  })\n\n  const writeKey = settings?.apiKey ?? ''\n\n  const buffer = analytics.options.disableClientPersistence\n    ? new PriorityQueue<Context>(analytics.queue.queue.maxAttempts, [])\n    : new PersistedPriorityQueue(\n        analytics.queue.queue.maxAttempts,\n        `${writeKey}:dest-Segment.io`\n      )\n\n  const inflightEvents = new Set<Context>()\n  const flushing = false\n\n  const apiHost = settings?.apiHost ?? SEGMENT_API_HOST\n  const protocol = settings?.protocol ?? 'https'\n  const remote = `${protocol}://${apiHost}`\n\n  const deliveryStrategy = settings?.deliveryStrategy\n  const client =\n    deliveryStrategy &&\n    'strategy' in deliveryStrategy &&\n    deliveryStrategy.strategy === 'batching'\n      ? batch(apiHost, deliveryStrategy.config)\n      : standard(deliveryStrategy?.config)\n\n  async function send(ctx: Context): Promise<Context> {\n    if (isOffline()) {\n      buffer.push(ctx)\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      scheduleFlush(flushing, buffer, segmentio, scheduleFlush)\n      return ctx\n    }\n\n    inflightEvents.add(ctx)\n\n    const path = ctx.event.type.charAt(0)\n\n    let json = toFacade(ctx.event).json()\n\n    if (ctx.event.type === 'track') {\n      delete json.traits\n    }\n\n    if (ctx.event.type === 'alias') {\n      json = onAlias(analytics, json)\n    }\n\n    if (buffer.getAttempts(ctx) >= buffer.maxAttempts) {\n      inflightEvents.delete(ctx)\n      return ctx\n    }\n\n    return client\n      .dispatch(\n        `${remote}/${path}`,\n        normalize(analytics, json, settings, integrations, ctx)\n      )\n      .then(() => ctx)\n      .catch((error) => {\n        ctx.log('error', 'Error sending event', error)\n        if (error.name === 'RateLimitError') {\n          const timeout = error.retryTimeout\n          buffer.pushWithBackoff(ctx, timeout)\n        } else {\n          buffer.pushWithBackoff(ctx)\n        }\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        scheduleFlush(flushing, buffer, segmentio, scheduleFlush)\n        return ctx\n      })\n      .finally(() => {\n        inflightEvents.delete(ctx)\n      })\n  }\n\n  const segmentio: SegmentIOPlugin = {\n    metadata: {\n      writeKey,\n      apiHost,\n      protocol,\n    },\n    name: 'Segment.io',\n    type: 'destination',\n    version: '0.1.0',\n    isLoaded: (): boolean => true,\n    load: (): Promise<void> => Promise.resolve(),\n    track: send,\n    identify: send,\n    page: send,\n    alias: send,\n    group: send,\n    screen: send,\n  }\n\n  // Buffer may already have items if they were previously stored in localStorage.\n  // Start flushing them immediately.\n  if (buffer.todo) {\n    scheduleFlush(flushing, buffer, segmentio, scheduleFlush)\n  }\n\n  return segmentio\n}\n","export const createHeaders = (\n  headerSettings: AdditionalHeaders | undefined\n): Record<string, string> => {\n  return {\n    'Content-Type': 'text/plain',\n    ...(typeof headerSettings === 'function'\n      ? headerSettings()\n      : headerSettings),\n  }\n}\n\n/**\n * Additional headers to be sent with the request.\n * Default is `Content-Type: text/plain`. This can be overridden.\n * If a function is provided, it will be called before each request.\n */\nexport type AdditionalHeaders =\n  | Record<string, string>\n  | (() => Record<string, string>)\n\nexport type RequestPriority = 'high' | 'low' | 'auto'\nexport type RequestCredentials = 'include' | 'same-origin' | 'omit'\n\n/**\n * These are the options that can be passed to the fetch dispatcher.\n * They more/less map to the Fetch RequestInit type.\n */\ninterface DispatchFetchConfig {\n  /**\n   * Request credentials configuration\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials\n   */\n  credentials?: RequestCredentials\n  /**\n   * This is useful for ensuring that an event is sent even if the user navigates away from the page.\n   * However, it may increase the likelihood of events being lost, as there is a 64kb limit for *all* fetch requests (not just ones to segment) with keepalive (which is why it's disabled by default). So, if you're sending a lot of data, this will likely cause events to be dropped.\n\n   * @default false\n   */\n  keepalive?: boolean\n  /**\n   * Additional headers to be sent with the request.\n   * Default is `Content-Type: text/plain`. This can be overridden.\n   * If a function is provided, it will be called before each request.\n   * @example { 'Content-Type': 'application/json' } or () => { 'Content-Type': 'application/json' }\n   */\n  headers?: AdditionalHeaders\n  /**\n   * 'Request Priority' of the request\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/RequestInit#priority\n   */\n  priority?: RequestPriority\n}\n\nexport interface BatchingDispatchConfig extends DispatchFetchConfig {\n  /**\n   * If strategy = 'batching', the maximum number of events to send in a single request. If the batch reaches this size, a request will automatically be sent.\n   *\n   * @default 10\n   */\n  size?: number\n  /**\n   * If strategy = 'batching', the maximum time, in milliseconds, to wait before sending a request.\n   * This won't alaways be relevant, as the request will be sent when the size is reached.\n   * However, if the size is never reached, the request will be sent after this time.\n   * When it comes to retries, if there is a rate limit timeout header, that will be respected over the value here.\n   *\n   * @default 5000\n   */\n  timeout?: number\n  /**\n   * If strategy = 'batching', the maximum number of retries to attempt before giving up.\n   * @default 10\n   */\n  maxRetries?: number\n}\n\nexport interface StandardDispatcherConfig extends DispatchFetchConfig {}\n\nexport type DeliveryStrategy =\n  | {\n      strategy?: 'standard'\n      config: StandardDispatcherConfig\n    }\n  | {\n      strategy: 'batching'\n      config?: BatchingDispatchConfig\n    }\n","import { CoreContext } from '../context'\nimport { Callback } from '../events/interfaces'\nimport { CoreEventQueue } from '../queue/event-queue'\nimport { invokeCallback } from '../callback'\nimport { Emitter } from '@segment/analytics-generic-utils'\n\nexport type DispatchOptions<Ctx extends CoreContext = CoreContext> = {\n  timeout?: number\n  debug?: boolean\n  callback?: Callback<Ctx>\n}\n\n/* The amount of time in ms to wait before invoking the callback. */\nexport const getDelay = (startTimeInEpochMS: number, timeoutInMS?: number) => {\n  const elapsedTime = Date.now() - startTimeInEpochMS\n  // increasing the timeout increases the delay by almost the same amount -- this is weird legacy behavior.\n  return Math.max((timeoutInMS ?? 300) - elapsedTime, 0)\n}\n/**\n * Push an event into the dispatch queue and invoke any callbacks.\n *\n * @param event - Segment event to enqueue.\n * @param queue - Queue to dispatch against.\n * @param emitter - This is typically an instance of \"Analytics\" -- used for metrics / progress information.\n * @param options\n */\nexport async function dispatch<\n  Ctx extends CoreContext,\n  EQ extends CoreEventQueue<Ctx>\n>(\n  ctx: Ctx,\n  queue: EQ,\n  emitter: Emitter,\n  options?: DispatchOptions<Ctx>\n): Promise<Ctx> {\n  emitter.emit('dispatch_start', ctx)\n\n  const startTime = Date.now()\n  let dispatched: Ctx\n  if (queue.isEmpty()) {\n    dispatched = await queue.dispatchSingle(ctx)\n  } else {\n    dispatched = await queue.dispatch(ctx)\n  }\n\n  if (options?.callback) {\n    dispatched = await invokeCallback(\n      dispatched,\n      options.callback,\n      getDelay(startTime, options.timeout)\n    )\n  }\n  if (options?.debug) {\n    dispatched.flush()\n  }\n\n  return dispatched\n}\n","export class RateLimitError extends Error {\n  retryTimeout: number\n\n  constructor(message: string, retryTimeout: number) {\n    super(message)\n    this.retryTimeout = retryTimeout\n    this.name = 'RateLimitError'\n  }\n}\n","export class ValidationError extends Error {\n  field: string\n\n  constructor(field: string, message: string) {\n    super(`${field} ${message}`)\n    this.field = field\n  }\n}\n","import { CoreAnalytics } from '../analytics'\nimport { groupBy } from '../utils/group-by'\nimport { ON_REMOVE_FROM_FUTURE, PriorityQueue } from '../priority-queue'\n\nimport { CoreContext, ContextCancelation } from '../context'\nimport { Emitter } from '@segment/analytics-generic-utils'\nimport { IntegrationsOptions } from '../events/interfaces'\nimport { CorePlugin } from '../plugins'\nimport { createTaskGroup, TaskGroup } from '../task/task-group'\nimport { attempt, ensure } from './delivery'\n\nexport type EventQueueEmitterContract<Ctx extends CoreContext> = {\n  message_delivered: [ctx: Ctx]\n  message_enriched: [ctx: Ctx, plugin: CorePlugin<Ctx>]\n  delivery_success: [ctx: Ctx]\n  delivery_retry: [ctx: Ctx]\n  delivery_failure: [ctx: Ctx, err: Ctx | Error | ContextCancelation]\n  flush: [ctx: Ctx, delivered: boolean]\n  initialization_failure: [CorePlugin<Ctx>]\n}\n\nexport abstract class CoreEventQueue<\n  Ctx extends CoreContext = CoreContext,\n  Plugin extends CorePlugin<Ctx> = CorePlugin<Ctx>\n> extends Emitter<EventQueueEmitterContract<Ctx>> {\n  /**\n   * All event deliveries get suspended until all the tasks in this task group are complete.\n   * For example: a middleware that augments the event object should be loaded safely as a\n   * critical task, this way, event queue will wait for it to be ready before sending events.\n   *\n   * This applies to all the events already in the queue, and the upcoming ones\n   */\n  criticalTasks: TaskGroup = createTaskGroup()\n  queue: PriorityQueue<Ctx>\n  plugins: Plugin[] = []\n  failedInitializations: string[] = []\n  private flushing = false\n\n  constructor(priorityQueue: PriorityQueue<Ctx>) {\n    super()\n\n    this.queue = priorityQueue\n    this.queue.on(ON_REMOVE_FROM_FUTURE, () => {\n      this.scheduleFlush(0)\n    })\n  }\n\n  async register(\n    ctx: Ctx,\n    plugin: Plugin,\n    instance: CoreAnalytics\n  ): Promise<void> {\n    this.plugins.push(plugin)\n\n    const handleLoadError = (err: any) => {\n      this.failedInitializations.push(plugin.name)\n      this.emit('initialization_failure', plugin)\n      console.warn(plugin.name, err)\n\n      ctx.log('warn', 'Failed to load destination', {\n        plugin: plugin.name,\n        error: err,\n      })\n\n      // Filter out the failed plugin by excluding it from the list\n      this.plugins = this.plugins.filter((p) => p !== plugin)\n    }\n\n    if (plugin.type === 'destination' && plugin.name !== 'Segment.io') {\n      plugin.load(ctx, instance).catch(handleLoadError)\n    } else {\n      // for non-destinations plugins, we do need to wait for them to load\n      // reminder: action destinations can require plugins that are not of type \"destination\".\n      // For example, GA4 loads a type 'before' plugins and addition to a type 'destination' plugin\n      try {\n        await plugin.load(ctx, instance)\n      } catch (err) {\n        handleLoadError(err)\n      }\n    }\n  }\n\n  async deregister(\n    ctx: Ctx,\n    plugin: CorePlugin<Ctx>,\n    instance: CoreAnalytics\n  ): Promise<void> {\n    try {\n      if (plugin.unload) {\n        await Promise.resolve(plugin.unload(ctx, instance))\n      }\n\n      this.plugins = this.plugins.filter((p) => p.name !== plugin.name)\n    } catch (e) {\n      ctx.log('warn', 'Failed to unload destination', {\n        plugin: plugin.name,\n        error: e,\n      })\n    }\n  }\n\n  async dispatch(ctx: Ctx): Promise<Ctx> {\n    ctx.log('debug', 'Dispatching')\n    ctx.stats.increment('message_dispatched')\n\n    this.queue.push(ctx)\n    const willDeliver = this.subscribeToDelivery(ctx)\n    this.scheduleFlush(0)\n    return willDeliver\n  }\n\n  private async subscribeToDelivery(ctx: Ctx): Promise<Ctx> {\n    return new Promise((resolve) => {\n      const onDeliver = (flushed: Ctx, delivered: boolean): void => {\n        if (flushed.isSame(ctx)) {\n          this.off('flush', onDeliver)\n          if (delivered) {\n            resolve(flushed)\n          } else {\n            resolve(flushed)\n          }\n        }\n      }\n\n      this.on('flush', onDeliver)\n    })\n  }\n\n  async dispatchSingle(ctx: Ctx): Promise<Ctx> {\n    ctx.log('debug', 'Dispatching')\n    ctx.stats.increment('message_dispatched')\n\n    this.queue.updateAttempts(ctx)\n    ctx.attempts = 1\n\n    return this.deliver(ctx).catch((err) => {\n      const accepted = this.enqueuRetry(err, ctx)\n      if (!accepted) {\n        ctx.setFailedDelivery({ reason: err })\n        return ctx\n      }\n\n      return this.subscribeToDelivery(ctx)\n    })\n  }\n\n  isEmpty(): boolean {\n    return this.queue.length === 0\n  }\n\n  private scheduleFlush(timeout = 500): void {\n    if (this.flushing) {\n      return\n    }\n\n    this.flushing = true\n\n    setTimeout(() => {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      this.flush().then(() => {\n        setTimeout(() => {\n          this.flushing = false\n\n          if (this.queue.length) {\n            this.scheduleFlush(0)\n          }\n        }, 0)\n      })\n    }, timeout)\n  }\n\n  private async deliver(ctx: Ctx): Promise<Ctx> {\n    await this.criticalTasks.done()\n\n    const start = Date.now()\n    try {\n      ctx = await this.flushOne(ctx)\n      const done = Date.now() - start\n      this.emit('delivery_success', ctx)\n      ctx.stats.gauge('delivered', done)\n      ctx.log('debug', 'Delivered', ctx.event)\n      return ctx\n    } catch (err: any) {\n      const error = err as Ctx | Error | ContextCancelation\n      ctx.log('error', 'Failed to deliver', error)\n      this.emit('delivery_failure', ctx, error)\n      ctx.stats.increment('delivery_failed')\n      throw err\n    }\n  }\n\n  private enqueuRetry(err: Error, ctx: Ctx): boolean {\n    const retriable = !(err instanceof ContextCancelation) || err.retry\n    if (!retriable) {\n      return false\n    }\n\n    return this.queue.pushWithBackoff(ctx)\n  }\n\n  async flush(): Promise<Ctx[]> {\n    if (this.queue.length === 0) {\n      return []\n    }\n\n    let ctx = this.queue.pop()\n    if (!ctx) {\n      return []\n    }\n\n    ctx.attempts = this.queue.getAttempts(ctx)\n\n    try {\n      ctx = await this.deliver(ctx)\n      this.emit('flush', ctx, true)\n    } catch (err: any) {\n      const accepted = this.enqueuRetry(err, ctx)\n\n      if (!accepted) {\n        ctx.setFailedDelivery({ reason: err })\n        this.emit('flush', ctx, false)\n      }\n\n      return []\n    }\n\n    return [ctx]\n  }\n\n  private isReady(): boolean {\n    // return this.plugins.every((p) => p.isLoaded())\n    // should we wait for every plugin to load?\n    return true\n  }\n\n  private availableExtensions(denyList: IntegrationsOptions) {\n    const available = this.plugins.filter((p) => {\n      // Only filter out destination plugins or the Segment.io plugin\n      if (p.type !== 'destination' && p.name !== 'Segment.io') {\n        return true\n      }\n\n      let alternativeNameMatch: boolean | Record<string, unknown> | undefined =\n        undefined\n      p.alternativeNames?.forEach((name) => {\n        if (denyList[name] !== undefined) {\n          alternativeNameMatch = denyList[name]\n        }\n      })\n\n      // Explicit integration option takes precedence, `All: false` does not apply to Segment.io\n      return (\n        denyList[p.name] ??\n        alternativeNameMatch ??\n        (p.name === 'Segment.io' ? true : denyList.All) !== false\n      )\n    })\n\n    const {\n      before = [],\n      enrichment = [],\n      destination = [],\n      after = [],\n    } = groupBy(available, 'type')\n\n    return {\n      before,\n      enrichment,\n      destinations: destination,\n      after,\n    }\n  }\n\n  private async flushOne(ctx: Ctx): Promise<Ctx> {\n    if (!this.isReady()) {\n      throw new Error('Not ready')\n    }\n\n    if (ctx.attempts > 1) {\n      this.emit('delivery_retry', ctx)\n    }\n\n    const { before, enrichment } = this.availableExtensions(\n      ctx.event.integrations ?? {}\n    )\n\n    for (const beforeWare of before) {\n      const temp = await ensure(ctx, beforeWare)\n      if (temp instanceof CoreContext) {\n        ctx = temp\n      }\n\n      this.emit('message_enriched', ctx, beforeWare)\n    }\n\n    for (const enrichmentWare of enrichment) {\n      const temp = await attempt(ctx, enrichmentWare)\n      if (temp instanceof CoreContext) {\n        ctx = temp\n      }\n\n      this.emit('message_enriched', ctx, enrichmentWare)\n    }\n\n    // Enrichment and before plugins can re-arrange the deny list dynamically\n    // so we need to pluck them at the end\n    const { destinations, after } = this.availableExtensions(\n      ctx.event.integrations ?? {}\n    )\n\n    await new Promise((resolve, reject) => {\n      setTimeout(() => {\n        const attempts = destinations.map((destination) =>\n          attempt(ctx, destination)\n        )\n        Promise.all(attempts).then(resolve).catch(reject)\n      }, 0)\n    })\n\n    ctx.stats.increment('message_delivered')\n\n    this.emit('message_delivered', ctx)\n\n    const afterCalls = after.map((after) => attempt(ctx, after))\n    await Promise.all(afterCalls)\n\n    return ctx\n  }\n}\n","import { getProcessEnv } from '../lib/get-process-env'\nimport { getCDN, setGlobalCDNUrl } from '../lib/parse-cdn'\nimport { Analytics, NullAnalytics } from '../core/analytics'\nimport { Context } from '../core/context'\nimport { Plugin } from '../core/plugin'\nimport { mergedOptions } from '../lib/merged-options'\nimport { createDeferred } from '@segment/analytics-generic-utils'\nimport { envEnrichment } from '../plugins/env-enrichment'\nimport { PluginFactory, remoteLoader } from '../plugins/remote-loader'\nimport { segmentio, SegmentioSettings } from '../plugins/segmentio'\nimport {\n  AnalyticsBuffered,\n  PreInitMethodCallBuffer,\n  flushAnalyticsCallsInNewTask,\n  flushAddSourceMiddleware,\n  flushSetAnonymousID,\n  flushOn,\n  PreInitMethodCall,\n  flushRegister,\n} from '../core/buffer'\nimport { ClassicIntegrationSource } from '../plugins/ajs-destination/types'\nimport { attachInspector } from '../core/inspector'\nimport { Stats } from '../core/stats'\nimport { setGlobalAnalyticsKey } from '../lib/global-analytics-helper'\nimport { CDNSettings, AnalyticsBrowserSettings, InitOptions } from './settings'\nimport { fetch } from '../lib/fetch'\n\nexport type { CDNSettings, AnalyticsBrowserSettings }\n\nexport function loadCDNSettings(\n  writeKey: string,\n  baseUrl: string\n): Promise<CDNSettings> {\n  return fetch(`${baseUrl}/v1/projects/${writeKey}/settings`)\n    .then((res) => {\n      if (!res.ok) {\n        return res.text().then((errorResponseMessage) => {\n          throw new Error(errorResponseMessage)\n        })\n      }\n      return res.json()\n    })\n    .catch((err) => {\n      console.error(err.message)\n      throw err\n    })\n}\n\nfunction hasLegacyDestinations(settings: CDNSettings): boolean {\n  return (\n    getProcessEnv().NODE_ENV !== 'test' &&\n    // just one integration means segmentio\n    Object.keys(settings.integrations).length > 1\n  )\n}\n\nfunction hasTsubMiddleware(settings: CDNSettings): boolean {\n  return (\n    getProcessEnv().NODE_ENV !== 'test' &&\n    (settings.middlewareSettings?.routingRules?.length ?? 0) > 0\n  )\n}\n\n/**\n * With AJS classic, we allow users to call setAnonymousId before the library initialization.\n * This is important because some of the destinations will use the anonymousId during the initialization,\n * and if we set anonId afterwards, that wouldnt impact the destination.\n *\n * Also Ensures events can be registered before library initialization.\n * This is important so users can register to 'initialize' and any events that may fire early during setup.\n */\nfunction flushPreBuffer(\n  analytics: Analytics,\n  buffer: PreInitMethodCallBuffer\n): void {\n  flushSetAnonymousID(analytics, buffer)\n  flushOn(analytics, buffer)\n}\n\n/**\n * Finish flushing buffer and cleanup.\n */\nasync function flushFinalBuffer(\n  analytics: Analytics,\n  queryString: string,\n  buffer: PreInitMethodCallBuffer\n): Promise<void> {\n  await flushQueryString(analytics, queryString)\n  flushAnalyticsCallsInNewTask(analytics, buffer)\n}\n\nconst getQueryString = (): string => {\n  const hash = window.location.hash ?? ''\n  const search = window.location.search ?? ''\n  const term = search.length ? search : hash.replace(/(?=#).*(?=\\?)/, '')\n  return term\n}\n\nconst flushQueryString = async (\n  analytics: Analytics,\n  queryString: string\n): Promise<void> => {\n  if (queryString.includes('ajs_')) {\n    await analytics.queryString(queryString).catch(console.error)\n  }\n}\n\nasync function registerPlugins(\n  writeKey: string,\n  cdnSettings: CDNSettings,\n  analytics: Analytics,\n  options: InitOptions,\n  pluginLikes: (Plugin | PluginFactory)[] = [],\n  legacyIntegrationSources: ClassicIntegrationSource[],\n  preInitBuffer: PreInitMethodCallBuffer\n): Promise<Context> {\n  flushPreBuffer(analytics, preInitBuffer)\n  const pluginsFromSettings = pluginLikes?.filter(\n    (pluginLike) => typeof pluginLike === 'object'\n  ) as Plugin[]\n\n  const pluginSources = pluginLikes?.filter(\n    (pluginLike) =>\n      typeof pluginLike === 'function' &&\n      typeof pluginLike.pluginName === 'string'\n  ) as PluginFactory[]\n\n  const tsubMiddleware = hasTsubMiddleware(cdnSettings)\n    ? await import(\n        /* webpackChunkName: \"tsub-middleware\" */ '../plugins/routing-middleware'\n      ).then((mod) => {\n        return mod.tsubMiddleware(cdnSettings.middlewareSettings!.routingRules)\n      })\n    : undefined\n\n  const legacyDestinations =\n    hasLegacyDestinations(cdnSettings) || legacyIntegrationSources.length > 0\n      ? await import(\n          /* webpackChunkName: \"ajs-destination\" */ '../plugins/ajs-destination'\n        ).then((mod) => {\n          return mod.ajsDestinations(\n            writeKey,\n            cdnSettings,\n            analytics.integrations,\n            options,\n            tsubMiddleware,\n            legacyIntegrationSources\n          )\n        })\n      : []\n\n  if (cdnSettings.legacyVideoPluginsEnabled) {\n    await import(\n      /* webpackChunkName: \"legacyVideos\" */ '../plugins/legacy-video-plugins'\n    ).then((mod) => {\n      return mod.loadLegacyVideoPlugins(analytics)\n    })\n  }\n\n  const schemaFilter = options.plan?.track\n    ? await import(\n        /* webpackChunkName: \"schemaFilter\" */ '../plugins/schema-filter'\n      ).then((mod) => {\n        return mod.schemaFilter(options.plan?.track, cdnSettings)\n      })\n    : undefined\n\n  const mergedSettings = mergedOptions(cdnSettings, options)\n  const remotePlugins = await remoteLoader(\n    cdnSettings,\n    analytics.integrations,\n    mergedSettings,\n    options,\n    tsubMiddleware,\n    pluginSources\n  ).catch(() => [])\n\n  const basePlugins = [envEnrichment, ...legacyDestinations, ...remotePlugins]\n\n  if (schemaFilter) {\n    basePlugins.push(schemaFilter)\n  }\n\n  const shouldIgnoreSegmentio =\n    (options.integrations?.All === false &&\n      !options.integrations['Segment.io']) ||\n    (options.integrations && options.integrations['Segment.io'] === false)\n\n  if (!shouldIgnoreSegmentio) {\n    basePlugins.push(\n      await segmentio(\n        analytics,\n        mergedSettings['Segment.io'],\n        cdnSettings.integrations\n      )\n    )\n  }\n\n  // order is important here, (for example, if there are multiple enrichment plugins, the last registered plugin will have access to the last context.)\n  const ctx = await analytics.register(\n    // register 'core' plugins and those via destinations\n    ...basePlugins,\n    // register user-defined plugins passed into AnalyticsBrowser.load({ plugins: [plugin1, plugin2] }) -- relevant to npm-only\n    ...pluginsFromSettings\n  )\n  // register user-defined plugins registered via analytics.register()\n  await flushRegister(analytics, preInitBuffer)\n\n  if (\n    Object.entries(cdnSettings.enabledMiddleware ?? {}).some(\n      ([, enabled]) => enabled\n    )\n  ) {\n    await import(\n      /* webpackChunkName: \"remoteMiddleware\" */ '../plugins/remote-middleware'\n    ).then(async ({ remoteMiddlewares }) => {\n      const middleware = await remoteMiddlewares(\n        ctx,\n        cdnSettings,\n        options.obfuscate\n      )\n      const promises = middleware.map((mdw) =>\n        analytics.addSourceMiddleware(mdw)\n      )\n      return Promise.all(promises)\n    })\n  }\n\n  // register any user-defined plugins added via analytics.addSourceMiddleware()\n  await flushAddSourceMiddleware(analytics, preInitBuffer)\n\n  return ctx\n}\n\nasync function loadAnalytics(\n  settings: AnalyticsBrowserSettings,\n  options: InitOptions = {},\n  preInitBuffer: PreInitMethodCallBuffer\n): Promise<[Analytics, Context]> {\n  // return no-op analytics instance if disabled\n  if (options.disable === true) {\n    return [new NullAnalytics(), Context.system()]\n  }\n\n  if (options.globalAnalyticsKey)\n    setGlobalAnalyticsKey(options.globalAnalyticsKey)\n  // this is an ugly side-effect, but it's for the benefits of the plugins that get their cdn via getCDN()\n  if (settings.cdnURL) setGlobalCDNUrl(settings.cdnURL)\n\n  if (options.initialPageview) {\n    // capture the page context early, so it's always up-to-date\n    preInitBuffer.add(new PreInitMethodCall('page', []))\n  }\n\n  // reading the query string as early as possible in case the URL changes\n  const queryString = getQueryString()\n\n  const cdnURL = settings.cdnURL ?? getCDN()\n  let cdnSettings =\n    settings.cdnSettings ?? (await loadCDNSettings(settings.writeKey, cdnURL))\n\n  if (options.updateCDNSettings) {\n    cdnSettings = options.updateCDNSettings(cdnSettings)\n  }\n\n  // if options.disable is a function, we allow user to disable analytics based on CDN Settings\n  if (typeof options.disable === 'function') {\n    const disabled = await options.disable(cdnSettings)\n    if (disabled) {\n      return [new NullAnalytics(), Context.system()]\n    }\n  }\n\n  const retryQueue: boolean =\n    cdnSettings.integrations['Segment.io']?.retryQueue ?? true\n\n  options = {\n    retryQueue,\n    ...options,\n  }\n\n  const analytics = new Analytics({ ...settings, cdnSettings, cdnURL }, options)\n\n  attachInspector(analytics)\n\n  const plugins = settings.plugins ?? []\n\n  const classicIntegrations = settings.classicIntegrations ?? []\n\n  const segmentLoadOptions = options.integrations?.['Segment.io'] as\n    | SegmentioSettings\n    | undefined\n\n  Stats.initRemoteMetrics({\n    ...cdnSettings.metrics,\n    host: segmentLoadOptions?.apiHost ?? cdnSettings.metrics?.host,\n    protocol: segmentLoadOptions?.protocol,\n  })\n\n  const ctx = await registerPlugins(\n    settings.writeKey,\n    cdnSettings,\n    analytics,\n    options,\n    plugins,\n    classicIntegrations,\n    preInitBuffer\n  )\n\n  analytics.initialized = true\n  analytics.emit('initialize', settings, options)\n  await flushFinalBuffer(analytics, queryString, preInitBuffer)\n\n  return [analytics, ctx]\n}\n\n/**\n * The public browser interface for Segment Analytics\n *\n * @example\n * ```ts\n *  export const analytics = new AnalyticsBrowser()\n *  analytics.load({ writeKey: 'foo' })\n * ```\n * @link https://github.com/segmentio/analytics-next/#readme\n */\nexport class AnalyticsBrowser extends AnalyticsBuffered {\n  private _resolveLoadStart: (\n    settings: AnalyticsBrowserSettings,\n    options: InitOptions\n  ) => void\n\n  constructor() {\n    const { promise: loadStart, resolve: resolveLoadStart } =\n      createDeferred<Parameters<AnalyticsBrowser['load']>>()\n\n    super((buffer) =>\n      loadStart.then(([settings, options]) =>\n        loadAnalytics(settings, options, buffer)\n      )\n    )\n\n    this._resolveLoadStart = (settings, options) =>\n      resolveLoadStart([settings, options])\n  }\n\n  /**\n   * Fully initialize an analytics instance, including:\n   *\n   * * Fetching settings from the segment CDN (by default).\n   * * Fetching all remote destinations configured by the user (if applicable).\n   * * Flushing buffered analytics events.\n   * * Loading all middleware.\n   *\n   * Note:  This method should only be called *once* in your application.\n   *\n   * @example\n   * ```ts\n   * export const analytics = new AnalyticsBrowser()\n   * analytics.load({ writeKey: 'foo' })\n   * ```\n   */\n  load(\n    settings: AnalyticsBrowserSettings,\n    options: InitOptions = {}\n  ): AnalyticsBrowser {\n    this._resolveLoadStart(settings, options)\n    return this\n  }\n\n  /**\n   * Instantiates an object exposing Analytics methods.\n   *\n   * @example\n   * ```ts\n   * const ajs = AnalyticsBrowser.load({ writeKey: '<YOUR_WRITE_KEY>' })\n   *\n   * ajs.track(\"foo\")\n   * ...\n   * ```\n   */\n  static load(\n    settings: AnalyticsBrowserSettings,\n    options: InitOptions = {}\n  ): AnalyticsBrowser {\n    return new AnalyticsBrowser().load(settings, options)\n  }\n\n  static standalone(\n    writeKey: string,\n    options?: InitOptions\n  ): Promise<Analytics> {\n    return AnalyticsBrowser.load({ writeKey }, options).then((res) => res[0])\n  }\n}\n","/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nexport const isThenable = (value: unknown): boolean =>\n  typeof value === 'object' &&\n  value !== null &&\n  'then' in value &&\n  typeof (value as any).then === 'function'\n","import { getGlobal } from '../../lib/get-global'\nimport type { Analytics } from '../analytics'\n\nconst env = getGlobal()\n\n// The code below assumes the inspector extension will use Object.assign\n// to add the inspect interface on to this object reference (unless the\n// extension code ran first and has already set up the variable)\nconst inspectorHost: {\n  attach: (analytics: Analytics) => void\n} = ((env as any)['__SEGMENT_INSPECTOR__'] ??= {})\n\nexport const attachInspector = (analytics: Analytics) =>\n  inspectorHost.attach?.(analytics as any)\n","import { Store, StorageObject } from './types'\n\n/**\n * Data Storage using in memory object\n */\nexport class MemoryStorage<Data extends StorageObject = StorageObject>\n  implements Store<Data>\n{\n  private cache: Record<string, unknown> = {}\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    return (this.cache[key] ?? null) as Data[K] | null\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    this.cache[key] = value\n  }\n\n  remove<K extends keyof Data>(key: K): void {\n    delete this.cache[key]\n  }\n}\n","/**\n * Returns `process.env` if it is available in the environment.\n * Always returns an object make it similarly easy to use as `process.env`.\n */\nexport function getProcessEnv(): { [key: string]: string | undefined } {\n  if (typeof process === 'undefined' || !process.env) {\n    return {}\n  }\n\n  return process.env\n}\n","type Grouper<T> = (obj: T) => string | number\n\nexport function groupBy<T>(\n  collection: T[],\n  grouper: keyof T | Grouper<T>\n): Record<string, T[]> {\n  const results: Record<string, T[]> = {}\n\n  collection.forEach((item) => {\n    let key: string | number | undefined = undefined\n\n    if (typeof grouper === 'string') {\n      const suggestedKey = item[grouper]\n      key =\n        typeof suggestedKey !== 'string'\n          ? JSON.stringify(suggestedKey)\n          : suggestedKey\n    } else if (grouper instanceof Function) {\n      key = grouper(item)\n    }\n\n    if (key === undefined) {\n      return\n    }\n\n    results[key] = [...(results[key] ?? []), item]\n  })\n\n  return results\n}\n","import { PriorityQueue } from '../../lib/priority-queue'\nimport { PersistedPriorityQueue } from '../../lib/priority-queue/persisted'\nimport { Context } from '../context'\nimport { Plugin } from '../plugin'\nimport { CoreEventQueue } from '@segment/analytics-core'\nimport { isOffline } from '../connection'\n\nexport class EventQueue extends CoreEventQueue<Context, Plugin> {\n  constructor(name: string)\n  constructor(priorityQueue: PriorityQueue<Context>)\n  constructor(nameOrQueue: string | PriorityQueue<Context>) {\n    super(\n      typeof nameOrQueue === 'string'\n        ? new PersistedPriorityQueue(4, nameOrQueue)\n        : nameOrQueue\n    )\n  }\n  async flush(): Promise<Context[]> {\n    if (isOffline()) return []\n    return super.flush()\n  }\n}\n","import { StorageObject, Store } from './types'\n\n/**\n * Data storage using browser's localStorage\n */\nexport class LocalStorage<Data extends StorageObject = StorageObject>\n  implements Store<Data>\n{\n  private localStorageWarning(key: keyof Data, state: 'full' | 'unavailable') {\n    console.warn(`Unable to access ${key}, localStorage may be ${state}`)\n  }\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    try {\n      const val = localStorage.getItem(key)\n      if (val === null) {\n        return null\n      }\n      try {\n        return JSON.parse(val) ?? null\n      } catch (e) {\n        return (val ?? null) as unknown as Data[K] | null\n      }\n    } catch (err) {\n      this.localStorageWarning(key, 'unavailable')\n      return null\n    }\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    try {\n      localStorage.setItem(key, JSON.stringify(value))\n    } catch {\n      this.localStorageWarning(key, 'full')\n    }\n  }\n\n  remove<K extends keyof Data>(key: K): void {\n    try {\n      return localStorage.removeItem(key)\n    } catch (err) {\n      this.localStorageWarning(key, 'unavailable')\n    }\n  }\n}\n","/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nexport const isThenable = (value: unknown): boolean =>\n  typeof value === 'object' &&\n  value !== null &&\n  'then' in value &&\n  typeof (value as any).then === 'function'\n","export function pick<T extends Record<string, any>, K extends keyof T>(\n  object: T,\n  keys: readonly K[]\n): Pick<T, K>\n\nexport function pick<T extends Record<string, any>>(\n  object: T,\n  keys: string[]\n): Partial<T>\n\n/**\n * @example\n * pick({ 'a': 1, 'b': '2', 'c': 3 }, ['a', 'c'])\n * => { 'a': 1, 'c': 3 }\n */\nexport function pick<T extends Record<string, any>, K extends keyof T>(\n  object: T,\n  keys: string[] | K[] | readonly K[]\n) {\n  return Object.assign(\n    {},\n    ...keys.map((key) => {\n      if (object && Object.prototype.hasOwnProperty.call(object, key)) {\n        return { [key]: object[key] }\n      }\n    })\n  )\n}\n","import { Store, StorageObject } from './types'\nimport jar from 'js-cookie'\nimport { tld } from '../user/tld'\n\nconst ONE_YEAR = 365\n\nexport interface CookieOptions {\n  maxage?: number\n  domain?: string\n  path?: string\n  secure?: boolean\n  sameSite?: string\n}\n\n/**\n * Data storage using browser cookies\n */\nexport class CookieStorage<Data extends StorageObject = StorageObject>\n  implements Store<Data>\n{\n  static get defaults(): CookieOptions {\n    return {\n      maxage: ONE_YEAR,\n      domain: tld(window.location.href),\n      path: '/',\n      sameSite: 'Lax',\n    }\n  }\n\n  private options: Required<CookieOptions>\n\n  constructor(options: CookieOptions = CookieStorage.defaults) {\n    this.options = {\n      ...CookieStorage.defaults,\n      ...options,\n    } as Required<CookieOptions>\n  }\n\n  private opts(): jar.CookieAttributes {\n    return {\n      sameSite: this.options.sameSite as jar.CookieAttributes['sameSite'],\n      expires: this.options.maxage,\n      domain: this.options.domain,\n      path: this.options.path,\n      secure: this.options.secure,\n    }\n  }\n\n  get<K extends keyof Data>(key: K): Data[K] | null {\n    try {\n      const value = jar.get(key)\n\n      if (value === undefined || value === null) {\n        return null\n      }\n\n      try {\n        return JSON.parse(value) ?? null\n      } catch (e) {\n        return (value ?? null) as unknown as Data[K] | null\n      }\n    } catch (e) {\n      return null\n    }\n  }\n\n  set<K extends keyof Data>(key: K, value: Data[K] | null): void {\n    if (typeof value === 'string') {\n      jar.set(key, value, this.opts())\n    } else if (value === null) {\n      jar.remove(key, this.opts())\n    } else {\n      jar.set(key, JSON.stringify(value), this.opts())\n    }\n  }\n\n  remove<K extends keyof Data>(key: K): void {\n    return jar.remove(key, this.opts())\n  }\n}\n","/**\n * Register event listener on document that fires when:\n * * tab change or tab close (in mobile or desktop)\n * * click back / forward button\n * * click any link or perform any other navigation action\n * * soft refresh / hard refresh\n *\n * adapted from https://stackoverflow.com/questions/3239834/window-onbeforeunload-not-working-on-the-ipad/52864508#52864508,\n */\nexport const onPageChange = (cb: (unloaded: boolean) => void) => {\n  let unloaded = false // prevents double firing if both are supported\n\n  window.addEventListener('pagehide', () => {\n    if (unloaded) return\n    unloaded = true\n    cb(unloaded)\n  })\n\n  // using document instead of window because of bug affecting browsers before safari 14 (detail in footnotes https://caniuse.com/?search=visibilitychange)\n  document.addEventListener('visibilitychange', () => {\n    if (document.visibilityState == 'hidden') {\n      if (unloaded) return\n      unloaded = true\n    } else {\n      unloaded = false\n    }\n    cb(unloaded)\n  })\n}\n","import jar from 'js-cookie'\nimport type { Context } from '../../core/context'\nimport type { Plugin } from '../../core/plugin'\nimport { version } from '../../generated/version'\nimport { SegmentEvent } from '../../core/events'\nimport { Campaign, PluginType } from '@segment/analytics-core'\nimport { getVersionType } from '../../lib/version-type'\nimport { tld } from '../../core/user/tld'\nimport { gracefulDecodeURIComponent } from '../../core/query-string/gracefulDecodeURIComponent'\nimport { CookieStorage, UniversalStorage } from '../../core/storage'\nimport { Analytics } from '../../core/analytics'\nimport { clientHints } from '../../lib/client-hints'\nimport { UADataValues } from '../../lib/client-hints/interfaces'\n\nlet cookieOptions: jar.CookieAttributes | undefined\nfunction getCookieOptions(): jar.CookieAttributes {\n  if (cookieOptions) {\n    return cookieOptions\n  }\n\n  const domain = tld(window.location.href)\n  cookieOptions = {\n    expires: 31536000000, // 1 year\n    secure: false,\n    path: '/',\n  }\n  if (domain) {\n    cookieOptions.domain = domain\n  }\n\n  return cookieOptions\n}\n\ntype Ad = { id: string; type: string }\n\nfunction ads(query: string): Ad | undefined {\n  const queryIds: Record<string, string> = {\n    btid: 'dataxu',\n    urid: 'millennial-media',\n  }\n\n  if (query.startsWith('?')) {\n    query = query.substring(1)\n  }\n  query = query.replace(/\\?/g, '&')\n  const parts = query.split('&')\n\n  for (const part of parts) {\n    const [k, v] = part.split('=')\n    if (queryIds[k]) {\n      return {\n        id: v,\n        type: queryIds[k],\n      }\n    }\n  }\n}\n\nexport function utm(query: string): Campaign {\n  if (query.startsWith('?')) {\n    query = query.substring(1)\n  }\n  query = query.replace(/\\?/g, '&')\n\n  return query.split('&').reduce((acc, str) => {\n    const [k, v = ''] = str.split('=')\n    if (k.includes('utm_') && k.length > 4) {\n      let utmParam = k.slice(4) as keyof Campaign\n      if (utmParam === 'campaign') {\n        utmParam = 'name'\n      }\n      acc[utmParam] = gracefulDecodeURIComponent(v)\n    }\n    return acc\n  }, {} as Campaign)\n}\n\nexport function ampId(): string | undefined {\n  const ampId = jar.get('_ga')\n  if (ampId && ampId.startsWith('amp')) {\n    return ampId\n  }\n}\n\nfunction referrerId(\n  query: string,\n  ctx: SegmentEvent['context'],\n  disablePersistance: boolean\n): void {\n  const storage = new UniversalStorage<{\n    's:context.referrer': Ad\n  }>(disablePersistance ? [] : [new CookieStorage(getCookieOptions())])\n\n  const stored = storage.get('s:context.referrer')\n\n  const ad = ads(query) ?? stored\n\n  if (!ad) {\n    return\n  }\n\n  if (ctx) {\n    ctx.referrer = { ...ctx.referrer, ...ad }\n  }\n\n  storage.set('s:context.referrer', ad)\n}\n\n/**\n *\n * @param obj e.g. { foo: 'b', bar: 'd', baz: ['123', '456']}\n * @returns e.g. 'foo=b&bar=d&baz=123&baz=456'\n */\nconst objectToQueryString = (\n  obj: Record<string, string | string[]>\n): string => {\n  try {\n    const searchParams = new URLSearchParams()\n    Object.entries(obj).forEach(([k, v]) => {\n      if (Array.isArray(v)) {\n        v.forEach((value) => searchParams.append(k, value))\n      } else {\n        searchParams.append(k, v)\n      }\n    })\n    return searchParams.toString()\n  } catch {\n    return ''\n  }\n}\n\nclass EnvironmentEnrichmentPlugin implements Plugin {\n  private instance!: Analytics\n  private userAgentData: UADataValues | undefined\n\n  name = 'Page Enrichment'\n  type: PluginType = 'before'\n  version = '0.1.0'\n  isLoaded = () => true\n  load = async (_ctx: Context, instance: Analytics) => {\n    this.instance = instance\n    try {\n      this.userAgentData = await clientHints(\n        this.instance.options.highEntropyValuesClientHints\n      )\n    } catch (_) {\n      // if client hints API doesn't return anything leave undefined\n    }\n    return Promise.resolve()\n  }\n\n  private enrich = (ctx: Context): Context => {\n    // Note: Types are off - context should never be undefined here, since it is set as part of event creation.\n    const evtCtx = ctx.event.context!\n\n    const search = evtCtx.page!.search || ''\n\n    const query =\n      typeof search === 'object' ? objectToQueryString(search) : search\n\n    evtCtx.userAgent = navigator.userAgent\n    evtCtx.userAgentData = this.userAgentData\n\n    // @ts-ignore\n    const locale = navigator.userLanguage || navigator.language\n\n    if (typeof evtCtx.locale === 'undefined' && typeof locale !== 'undefined') {\n      evtCtx.locale = locale\n    }\n\n    evtCtx.library ??= {\n      name: 'analytics.js',\n      version: `${getVersionType() === 'web' ? 'next' : 'npm:next'}-${version}`,\n    }\n\n    if (query && !evtCtx.campaign) {\n      evtCtx.campaign = utm(query)\n    }\n\n    const amp = ampId()\n    if (amp) {\n      evtCtx.amp = { id: amp }\n    }\n\n    referrerId(\n      query,\n      evtCtx,\n      this.instance.options.disableClientPersistence ?? false\n    )\n\n    try {\n      evtCtx.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone\n    } catch (_) {\n      // If browser doesn't have support leave timezone undefined\n    }\n\n    return ctx\n  }\n\n  track = this.enrich\n  identify = this.enrich\n  page = this.enrich\n  group = this.enrich\n  alias = this.enrich\n  screen = this.enrich\n}\n\nexport const envEnrichment = new EnvironmentEnrichmentPlugin()\n","import { safeatob } from '@web3auth/auth';\n\n/**\n * Extracts a name for the site from the DOM\n */\nconst getSiteName = window => {\n  const {\n    document\n  } = window;\n  const siteName = document.querySelector('head > meta[property=\"og:site_name\"]');\n  if (siteName) {\n    return siteName.content;\n  }\n  const metaTitle = document.querySelector('head > meta[name=\"title\"]');\n  if (metaTitle) {\n    return metaTitle.content;\n  }\n  if (document.title && document.title.length > 0) {\n    return document.title;\n  }\n  return window.location.hostname;\n};\n\n/**\n * Returns whether the given image URL exists\n * @param url - the url of the image\n * @returns - whether the image exists\n */\nfunction imgExists(url) {\n  return new Promise((resolve, reject) => {\n    try {\n      const img = document.createElement(\"img\");\n      img.onload = () => resolve(true);\n      img.onerror = () => resolve(false);\n      img.src = url;\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\n/**\n * Extracts an icon for the site from the DOM\n */\nasync function getSiteIcon(window) {\n  const {\n    document\n  } = window;\n\n  // Use the site's favicon if it exists\n  let icon = document.querySelector('head > link[rel=\"shortcut icon\"]');\n  if (icon && (await imgExists(icon.href))) {\n    return icon.href;\n  }\n\n  // Search through available icons in no particular order\n  icon = Array.from(document.querySelectorAll('head > link[rel=\"icon\"]')).find(_icon => Boolean(_icon.href)) || null;\n  if (icon && (await imgExists(icon.href))) {\n    return icon.href;\n  }\n  return undefined;\n}\nfunction parseToken(token) {\n  const [header, payload] = token.split(\".\");\n  return {\n    header: JSON.parse(safeatob(header)),\n    payload: JSON.parse(safeatob(payload))\n  };\n}\n\nexport { getSiteIcon, getSiteName, parseToken };\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]}