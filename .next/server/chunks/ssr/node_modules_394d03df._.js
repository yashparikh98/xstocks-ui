module.exports=[51386,(a,b,c)=>{function d(a){return function(b,c,d,e){var f,h=e&&"function"==typeof e.normalizer?e.normalizer:g;c=h(c);for(var i=!1;!i;)!function(){for(f in b){var a=h(f);if(0===c.indexOf(a)){var d=c.substr(a.length);if("."===d.charAt(0)||0===d.length){c=d.substr(1);var e=b[f];if(null==e||!c.length){i=!0;return}b=e;return}}}f=void 0,i=!0}();if(f)return null==b?b:a(b,f,d)}}function e(a,b){return a.hasOwnProperty(b)&&delete a[b],a}function f(a,b,c){return a.hasOwnProperty(b)&&(a[b]=c),a}function g(a){return a.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}b.exports=d(function(a,b){if(a.hasOwnProperty(b))return a[b]}),b.exports.find=b.exports,b.exports.replace=function(a,b,c,e){return d(f).call(this,a,b,c,e),a},b.exports.del=function(a,b,c){return d(e).call(this,a,b,null,c),a}},41085,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0});var e=d(a.r(51386));function f(a,b){return function(){var c=this.traits(),d=this.properties?this.properties():{};return e.default(c,"address."+a)||e.default(c,a)||(b?e.default(c,"address."+b):null)||(b?e.default(c,b):null)||e.default(d,"address."+a)||e.default(d,a)||(b?e.default(d,"address."+b):null)||(b?e.default(d,b):null)}}c.default=function(a){a.zip=f("postalCode","zip"),a.country=f("country"),a.street=f("street"),a.state=f("state"),a.city=f("city"),a.region=f("region")}},35841,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.clone=void 0,c.clone=function a(b){if("object"!=typeof b)return b;if("[object Object]"===Object.prototype.toString.call(b)){var c={};for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=a(b[d]));return c}return Array.isArray(b)?b.map(a):b}},96665,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={Salesforce:!0};c.default=function(a){return!d[a]}},22821,(a,b,c)=>{"use strict";var d=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;c.parse=function(a){var b=[1,5,6,7,11,12],c=d.exec(a),e=0;if(!c)return new Date(a);for(var f,g=0;f=b[g];g++)c[f]=parseInt(c[f],10)||0;return c[2]=parseInt(c[2],10)||1,c[3]=parseInt(c[3],10)||1,c[2]--,c[8]=c[8]?(c[8]+"00").substring(0,3):0," "===c[4]?e=new Date().getTimezoneOffset():"Z"!==c[9]&&c[10]&&(e=60*c[11]+c[12],"+"===c[10]&&(e=0-e)),new Date(Date.UTC(c[1],c[2],c[3],c[5],c[6]+e,c[7],c[8]))},c.is=function(a,b){return"string"==typeof a&&(!b||!1!==/^\d{4}-\d{2}-\d{2}/.test(a))&&d.test(a)}},2244,(a,b,c)=>{"use strict";var d=/\d{13}/;c.is=function(a){return d.test(a)},c.parse=function(a){return new Date(a=parseInt(a,10))}},58798,(a,b,c)=>{"use strict";var d=/\d{10}/;c.is=function(a){return d.test(a)},c.parse=function(a){return new Date(1e3*parseInt(a,10))}},43670,(a,b,c)=>{"use strict";var d=a.r(22821),e=a.r(2244),f=a.r(58798),g=Object.prototype.toString;b.exports=function(a){var b;if("[object Date]"===g.call(a))return a;return"[object Number]"===g.call(a)?new Date((b=a)<315576e5?1e3*b:b):d.is(a)?d.parse(a):e.is(a)?e.parse(a):f.is(a)?f.parse(a):new Date(a)}},80503,(a,b,c)=>{"use strict";var d=a.r(22821);b.exports=function a(b,c){var e,f,g,h;if(void 0===c&&(c=!0),b&&"object"==typeof b){return e=b,f=c,Object.keys(e).forEach(function(b){e[b]=a(e[b],f)}),e}if(Array.isArray(b)){return g=b,h=c,g.forEach(function(b,c){g[c]=a(b,h)}),g}return d.is(b,c)?d.parse(b):b}},20019,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.Facade=void 0;var e=d(a.r(41085)),f=a.r(35841),g=d(a.r(96665)),h=d(a.r(43670)),i=d(a.r(51386)),j=d(a.r(80503));function k(a,b){b=b||{},this.raw=f.clone(a),"clone"in b||(b.clone=!0),b.clone&&(a=f.clone(a)),"traverse"in b||(b.traverse=!0),"timestamp"in a?a.timestamp=h.default(a.timestamp):a.timestamp=new Date,b.traverse&&j.default(a),this.opts=b,this.obj=a}c.Facade=k;var l=k.prototype;function m(a){return f.clone(a)}l.proxy=function(a){var b=a.split("."),c=this[a=b.shift()]||this.obj[a];return c?("function"==typeof c&&(c=c.call(this)||{}),0===b.length||(c=i.default(c,b.join("."))),this.opts.clone?m(c):c):c},l.field=function(a){var b=this.obj[a];return this.opts.clone?m(b):b},k.proxy=function(a){return function(){return this.proxy(a)}},k.field=function(a){return function(){return this.field(a)}},k.multi=function(a){return function(){var b=this.proxy(a+"s");if(Array.isArray(b))return b;var c=this.proxy(a);return c&&(c=[this.opts.clone?f.clone(c):c]),c||[]}},k.one=function(a){return function(){var b=this.proxy(a);if(b)return b;var c=this.proxy(a+"s");if(Array.isArray(c))return c[0]}},l.json=function(){var a=this.opts.clone?f.clone(this.obj):this.obj;return this.type&&(a.type=this.type()),a},l.rawEvent=function(){return this.raw},l.options=function(a){var b=this.obj.options||this.obj.context||{},c=this.opts.clone?f.clone(b):b;if(!a)return c;if(this.enabled(a)){var d=this.integrations(),e=d[a]||i.default(d,a);return"object"!=typeof e&&(e=i.default(this.options(),a)),"object"==typeof e?e:{}}},l.context=l.options,l.enabled=function(a){var b=this.proxy("options.providers.all");"boolean"!=typeof b&&(b=this.proxy("options.all")),"boolean"!=typeof b&&(b=this.proxy("integrations.all")),"boolean"!=typeof b&&(b=!0);var c=b&&g.default(a),d=this.integrations();if(d.providers&&d.providers.hasOwnProperty(a)&&(c=d.providers[a]),d.hasOwnProperty(a)){var e=d[a];c="boolean"!=typeof e||e}return!!c},l.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},l.active=function(){var a=this.proxy("options.active");return null==a&&(a=!0),a},l.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},l.sessionId=l.anonymousId,l.groupId=k.proxy("options.groupId"),l.traits=function(a){var b=this.proxy("options.traits")||{},c=this.userId();for(var d in a=a||{},c&&(b.id=c),a)if(Object.prototype.hasOwnProperty.call(a,d)){var e=null==this[d]?this.proxy("options.traits."+d):this[d]();if(null==e)continue;b[a[d]]=e,delete b[d]}return b},l.library=function(){var a=this.proxy("options.library");return a?"string"==typeof a?{name:a,version:null}:a:{name:"unknown",version:null}},l.device=function(){var a=this.proxy("context.device");("object"!=typeof a||null===a)&&(a={});var b=this.library().name;return a.type||(b.indexOf("ios")>-1&&(a.type="ios"),b.indexOf("android")>-1&&(a.type="android")),a},l.userAgent=k.proxy("context.userAgent"),l.timezone=k.proxy("context.timezone"),l.timestamp=k.field("timestamp"),l.channel=k.field("channel"),l.ip=k.proxy("context.ip"),l.userId=k.field("userId"),e.default(l)},3605,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.Alias=void 0;var e=d(a.r(18919)),f=a.r(20019);function g(a,b){f.Facade.call(this,a,b)}c.Alias=g,e.default(g,f.Facade),g.prototype.action=function(){return"alias"},g.prototype.type=g.prototype.action,g.prototype.previousId=function(){return this.field("previousId")||this.field("from")},g.prototype.from=g.prototype.previousId,g.prototype.userId=function(){return this.field("userId")||this.field("to")},g.prototype.to=g.prototype.userId},86014,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=/.+\@.+\..+/;c.default=function(a){return d.test(a)}},67478,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.Group=void 0;var e=d(a.r(18919)),f=d(a.r(86014)),g=d(a.r(43670)),h=a.r(20019);function i(a,b){h.Facade.call(this,a,b)}c.Group=i,e.default(i,h.Facade);var j=i.prototype;j.action=function(){return"group"},j.type=j.action,j.groupId=h.Facade.field("groupId"),j.created=function(){var a=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(a)return g.default(a)},j.email=function(){var a=this.proxy("traits.email");if(a)return a;var b=this.groupId();if(f.default(b))return b},j.traits=function(a){var b=this.properties(),c=this.groupId();for(var d in a=a||{},c&&(b.id=c),a)if(Object.prototype.hasOwnProperty.call(a,d)){var e=null==this[d]?this.proxy("traits."+d):this[d]();if(null==e)continue;b[a[d]]=e,delete b[d]}return b},j.name=h.Facade.proxy("traits.name"),j.industry=h.Facade.proxy("traits.industry"),j.employees=h.Facade.proxy("traits.employees"),j.properties=function(){return this.field("traits")||this.field("properties")||{}}},17368,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.Identify=void 0;var e=a.r(20019),f=d(a.r(51386)),g=d(a.r(18919)),h=d(a.r(86014)),i=d(a.r(43670)),j=function(a){return a.trim()};function k(a,b){e.Facade.call(this,a,b)}c.Identify=k,g.default(k,e.Facade);var l=k.prototype;l.action=function(){return"identify"},l.type=l.action,l.traits=function(a){var b=this.field("traits")||{},c=this.userId();for(var d in a=a||{},c&&(b.id=c),a){var e=null==this[d]?this.proxy("traits."+d):this[d]();null!=e&&(b[a[d]]=e,d!==a[d]&&delete b[d])}return b},l.email=function(){var a=this.proxy("traits.email");if(a)return a;var b=this.userId();if(h.default(b))return b},l.created=function(){var a=this.proxy("traits.created")||this.proxy("traits.createdAt");if(a)return i.default(a)},l.companyCreated=function(){var a=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(a)return i.default(a)},l.companyName=function(){return this.proxy("traits.company.name")},l.name=function(){var a=this.proxy("traits.name");if("string"==typeof a)return j(a);var b=this.firstName(),c=this.lastName();if(b&&c)return j(b+" "+c)},l.firstName=function(){var a=this.proxy("traits.firstName");if("string"==typeof a)return j(a);var b=this.proxy("traits.name");if("string"==typeof b)return j(b).split(" ")[0]},l.lastName=function(){var a=this.proxy("traits.lastName");if("string"==typeof a)return j(a);var b=this.proxy("traits.name");if("string"==typeof b){var c=j(b).indexOf(" ");if(-1!==c)return j(b.substr(c+1))}},l.uid=function(){return this.userId()||this.username()||this.email()},l.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},l.age=function(){var a=this.birthday(),b=f.default(this.traits(),"age");return null!=b?b:a instanceof Date?new Date().getFullYear()-a.getFullYear():void 0},l.avatar=function(){var a=this.traits();return f.default(a,"avatar")||f.default(a,"photoUrl")||f.default(a,"avatarUrl")},l.position=function(){var a=this.traits();return f.default(a,"position")||f.default(a,"jobTitle")},l.username=e.Facade.proxy("traits.username"),l.website=e.Facade.one("traits.website"),l.websites=e.Facade.multi("traits.website"),l.phone=e.Facade.one("traits.phone"),l.phones=e.Facade.multi("traits.phone"),l.address=e.Facade.proxy("traits.address"),l.gender=e.Facade.proxy("traits.gender"),l.birthday=e.Facade.proxy("traits.birthday")},57018,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.Track=void 0;var e=d(a.r(18919)),f=a.r(20019),g=a.r(17368),h=d(a.r(86014)),i=d(a.r(51386));function j(a,b){f.Facade.call(this,a,b)}c.Track=j,e.default(j,f.Facade);var k=j.prototype;k.action=function(){return"track"},k.type=k.action,k.event=f.Facade.field("event"),k.value=f.Facade.proxy("properties.value"),k.category=f.Facade.proxy("properties.category"),k.id=f.Facade.proxy("properties.id"),k.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},k.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},k.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},k.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},k.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},k.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},k.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},k.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},k.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},k.sku=f.Facade.proxy("properties.sku"),k.tax=f.Facade.proxy("properties.tax"),k.name=f.Facade.proxy("properties.name"),k.price=f.Facade.proxy("properties.price"),k.total=f.Facade.proxy("properties.total"),k.repeat=f.Facade.proxy("properties.repeat"),k.coupon=f.Facade.proxy("properties.coupon"),k.shipping=f.Facade.proxy("properties.shipping"),k.discount=f.Facade.proxy("properties.discount"),k.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},k.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},k.description=f.Facade.proxy("properties.description"),k.plan=f.Facade.proxy("properties.plan"),k.subtotal=function(){var a=i.default(this.properties(),"subtotal"),b=this.total()||this.revenue();if(a)return a;if(!b)return 0;if(this.total()){var c=this.tax();c&&(b-=c),(c=this.shipping())&&(b-=c),(c=this.discount())&&(b+=c)}return b},k.products=function(){var a=this.properties(),b=i.default(a,"products");return Array.isArray(b)?b.filter(function(a){return null!==a}):[]},k.quantity=function(){return(this.obj.properties||{}).quantity||1},k.currency=function(){return(this.obj.properties||{}).currency||"USD"},k.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},k.query=f.Facade.proxy("options.query"),k.properties=function(a){var b=this.field("properties")||{};for(var c in a=a||{})if(Object.prototype.hasOwnProperty.call(a,c)){var d=null==this[c]?this.proxy("properties."+c):this[c]();if(null==d)continue;b[a[c]]=d,delete b[c]}return b},k.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},k.email=function(){var a=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(a)return a;var b=this.userId();if(h.default(b))return b},k.revenue=function(){var a=this.proxy("properties.revenue"),b=this.event();return!a&&b&&b.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(a=this.proxy("properties.total")),function(a){if(a&&("number"==typeof a||"string"==typeof a&&!isNaN(a=parseFloat(a=a.replace(/\$/g,"")))))return a}(a)},k.cents=function(){var a=this.revenue();return"number"!=typeof a?this.value()||0:100*a},k.identify=function(){var a=this.json();return a.traits=this.traits(),new g.Identify(a,this.opts)}},87556,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.Page=void 0;var e=d(a.r(18919)),f=a.r(20019),g=a.r(57018),h=d(a.r(86014));function i(a,b){f.Facade.call(this,a,b)}c.Page=i,e.default(i,f.Facade);var j=i.prototype;j.action=function(){return"page"},j.type=j.action,j.category=f.Facade.field("category"),j.name=f.Facade.field("name"),j.title=f.Facade.proxy("properties.title"),j.path=f.Facade.proxy("properties.path"),j.url=f.Facade.proxy("properties.url"),j.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},j.properties=function(a){var b=this.field("properties")||{},c=this.category(),d=this.name();for(var e in a=a||{},c&&(b.category=c),d&&(b.name=d),a)if(Object.prototype.hasOwnProperty.call(a,e)){var f=null==this[e]?this.proxy("properties."+e):this[e]();if(null==f)continue;b[a[e]]=f,e!==a[e]&&delete b[e]}return b},j.email=function(){var a=this.proxy("context.traits.email")||this.proxy("properties.email");if(a)return a;var b=this.userId();if(h.default(b))return b},j.fullName=function(){var a=this.category(),b=this.name();return b&&a?a+" "+b:b},j.event=function(a){return a?"Viewed "+a+" Page":"Loaded a Page"},j.track=function(a){var b=this.json();return b.event=this.event(a),b.timestamp=this.timestamp(),b.properties=this.properties(),new g.Track(b,this.opts)}},37090,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.Screen=void 0;var e=d(a.r(18919)),f=a.r(87556),g=a.r(57018);function h(a,b){f.Page.call(this,a,b)}c.Screen=h,e.default(h,f.Page),h.prototype.action=function(){return"screen"},h.prototype.type=h.prototype.action,h.prototype.event=function(a){return a?"Viewed "+a+" Screen":"Loaded a Screen"},h.prototype.track=function(a){var b=this.json();return b.event=this.event(a),b.timestamp=this.timestamp(),b.properties=this.properties(),new g.Track(b,this.opts)}},80353,(a,b,c)=>{"use strict";var d=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.Delete=void 0;var e=d(a.r(18919)),f=a.r(20019);function g(a,b){f.Facade.call(this,a,b)}c.Delete=g,e.default(g,f.Facade),g.prototype.type=function(){return"delete"}},5237,(a,b,c)=>{"use strict";var d=a.e&&a.e.__assign||function(){return(d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};Object.defineProperty(c,"__esModule",{value:!0}),c.Delete=c.Screen=c.Page=c.Track=c.Identify=c.Group=c.Alias=c.Facade=void 0;var e=a.r(20019);Object.defineProperty(c,"Facade",{enumerable:!0,get:function(){return e.Facade}});var f=a.r(3605);Object.defineProperty(c,"Alias",{enumerable:!0,get:function(){return f.Alias}});var g=a.r(67478);Object.defineProperty(c,"Group",{enumerable:!0,get:function(){return g.Group}});var h=a.r(17368);Object.defineProperty(c,"Identify",{enumerable:!0,get:function(){return h.Identify}});var i=a.r(57018);Object.defineProperty(c,"Track",{enumerable:!0,get:function(){return i.Track}});var j=a.r(87556);Object.defineProperty(c,"Page",{enumerable:!0,get:function(){return j.Page}});var k=a.r(37090);Object.defineProperty(c,"Screen",{enumerable:!0,get:function(){return k.Screen}});var l=a.r(80353);Object.defineProperty(c,"Delete",{enumerable:!0,get:function(){return l.Delete}}),c.default=d(d({},e.Facade),{Alias:f.Alias,Group:g.Group,Identify:h.Identify,Track:i.Track,Page:j.Page,Screen:k.Screen,Delete:l.Delete})},31537,1065,96102,2395,94260,46816,a=>{"use strict";for(var b,c=a.i(52100),d=256,e=[];d--;)e[d]=(d+256).toString(16).substring(1);function f(){var a,c=0,f="";if(!b||d+16>256){for(b=Array(c=256);c--;)b[c]=256*Math.random()|0;c=d=0}for(;c<16;c++)a=b[d+c],6==c?f+=e[15&a|64]:8==c?f+=e[63&a|128]:f+=e[a],1&c&&c>1&&c<11&&(f+="-");return d++,f}function g(a,b,c){b.split&&(b=b.split("."));for(var d,e,f=0,g=b.length,h=a;f<g&&"__proto__"!=(e=""+b[f++])&&"constructor"!==e&&"prototype"!==e;)h=h[e]=f===g?c:typeof(d=h[e])==typeof b?d:0*b[f]!=0||~(""+b[f]).indexOf(".")?{}:[]}a.s(["v4",()=>f],1065),a.s(["dset",()=>g],96102);var h=function(){function a(){this._logs=[]}return a.prototype.log=function(a,b,c){var d=new Date;this._logs.push({level:a,message:b,time:d,extras:c})},Object.defineProperty(a.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),a.prototype.flush=function(){if(this.logs.length>1){var a=this._logs.reduce(function(a,b){var d,e,f,g=(0,c.__assign)((0,c.__assign)({},b),{json:JSON.stringify(b.extras,null," "),extras:b.extras});delete g.time;var h=null!=(f=null==(e=b.time)?void 0:e.toISOString())?f:"";return a[h]&&(h="".concat(h,"-").concat(Math.random())),(0,c.__assign)((0,c.__assign)({},a),((d={})[h]=g,d))},{});console.table?console.table(a):console.log(a)}else this.logs.forEach(function(a){var b=a.level,c=a.message,d=a.extras;"info"===b||"debug"===b?console.log(c,null!=d?d:""):console[b](c,null!=d?d:"")});this._logs=[]},a}(),i=function(){function a(){this.metrics=[]}return a.prototype.increment=function(a,b,c){void 0===b&&(b=1),this.metrics.push({metric:a,value:b,tags:null!=c?c:[],type:"counter",timestamp:Date.now()})},a.prototype.gauge=function(a,b,c){this.metrics.push({metric:a,value:b,tags:null!=c?c:[],type:"gauge",timestamp:Date.now()})},a.prototype.flush=function(){var a=this.metrics.map(function(a){return(0,c.__assign)((0,c.__assign)({},a),{tags:a.tags.join(",")})});console.table?console.table(a):console.log(a),this.metrics=[]},a.prototype.serialize=function(){return this.metrics.map(function(a){return{m:a.metric,v:a.value,t:a.tags,k:({gauge:"g",counter:"c"})[a.type],e:a.timestamp}})},a}(),j=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,c.__extends)(b,a),b.prototype.gauge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},b.prototype.increment=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},b.prototype.flush=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},b.prototype.serialize=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return[]},b}(i);a.s(["CoreStats",()=>i,"NullStats",()=>j],2395);var k=function(a){var b,c,d;this.retry=null==(b=a.retry)||b,this.type=null!=(c=a.type)?c:"plugin Error",this.reason=null!=(d=a.reason)?d:""},l=function(){function a(a,b,c,d){void 0===b&&(b=f()),void 0===c&&(c=new j),void 0===d&&(d=new h),this.attempts=0,this.event=a,this._id=b,this.logger=d,this.stats=c}return a.system=function(){},a.prototype.isSame=function(a){return a.id===this.id},a.prototype.cancel=function(a){if(a)throw a;throw new k({reason:"Context Cancel"})},a.prototype.log=function(a,b,c){this.logger.log(a,b,c)},Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),a.prototype.updateEvent=function(a,b){var c;if("integrations"===a.split(".")[0]){var d=a.split(".")[1];if((null==(c=this.event.integrations)?void 0:c[d])===!1)return this.event}return g(this.event,a,b),this.event},a.prototype.failedDelivery=function(){return this._failedDelivery},a.prototype.setFailedDelivery=function(a){this._failedDelivery=a},a.prototype.logs=function(){return this.logger.logs},a.prototype.flush=function(){this.logger.flush(),this.stats.flush()},a.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},a}();a.s(["ContextCancelation",()=>k,"CoreContext",()=>l],94260);var m=a.i(5237);function n(a,b){var c=new m.Facade(a,b);return"track"===a.type&&(c=new m.Track(a,b)),"identify"===a.type&&(c=new m.Identify(a,b)),"page"===a.type&&(c=new m.Page(a,b)),"alias"===a.type&&(c=new m.Alias(a,b)),"group"===a.type&&(c=new m.Group(a,b)),"screen"===a.type&&(c=new m.Screen(a,b)),Object.defineProperty(c,"obj",{value:a,writable:!0}),c}function o(a,b,d){return(0,c.__awaiter)(this,void 0,void 0,function(){var e,f,g,h,i;return(0,c.__generator)(this,function(j){switch(j.label){case 0:e=n(b,{clone:!0,traverse:!1}).rawEvent(),f=0,g=d,j.label=1;case 1:if(!(f<g.length))return[3,4];return h=g[f],[4,function(b,d){return(0,c.__awaiter)(this,void 0,void 0,function(){var e,f,g;return(0,c.__generator)(this,function(h){switch(h.label){case 0:return e=!1,f=null,[4,d({payload:n(b,{clone:!0,traverse:!1}),integration:a,next:function(a){e=!0,null===a&&(f=null),a&&(f=a.obj)}})];case 1:return h.sent(),e||null===f||(f.integrations=(0,c.__assign)((0,c.__assign)({},b.integrations),((g={})[a]=!1,g))),[2,f]}})})}(e,h)];case 2:if(null===(i=j.sent()))return[2,null];e=i,j.label=3;case 3:return f++,[3,1];case 4:return[2,e]}})})}function p(a,b){function d(d){return(0,c.__awaiter)(this,void 0,void 0,function(){var e;return(0,c.__generator)(this,function(c){switch(c.label){case 0:return e=!1,[4,a({payload:n(d.event,{clone:!0,traverse:!1}),integrations:null!=b?b:{},next:function(a){e=!0,a&&(d.event=a.obj)}})];case 1:if(c.sent(),!e)throw new k({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,d]}})})}return{name:"Source Middleware ".concat(a.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(a){return Promise.resolve(a)},track:d,page:d,screen:d,identify:d,alias:d,group:d}}a.s(["toFacade",()=>n],46816),a.s(["applyDestinationMiddleware",()=>o,"sourceMiddlewarePlugin",()=>p],31537)}];

//# sourceMappingURL=node_modules_394d03df._.js.map