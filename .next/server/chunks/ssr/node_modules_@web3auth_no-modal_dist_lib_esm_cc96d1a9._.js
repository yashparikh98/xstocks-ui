module.exports=[54176,a=>{"use strict";var b,c,d=a.i(95851),e=a.i(41415),f=a.i(52100);function g(){return"undefined"!=typeof process&&process.env?process.env:{}}var h=a.i(71542),i=a.i(59550);function j(a,b,c,d){var e,f=[a,b,c,d],g=(0,i.isPlainObject)(a)?a.event:a;if(!g||!(0,i.isString)(g))throw Error("Event missing");var h=(0,i.isPlainObject)(a)?null!=(e=a.properties)?e:{}:(0,i.isPlainObject)(b)?b:{},j={};return(0,i.isFunction)(c)||(j=null!=c?c:{}),(0,i.isPlainObject)(a)&&!(0,i.isFunction)(b)&&(j=null!=b?b:{}),[g,h,j,f.find(i.isFunction)]}function k(a,b,c,d,e){var f,g,h=null,j=null,k=[a,b,c,d,e],l=k.filter(i.isString);1===l.length?(j=(0,i.isString)(k[1])?k[1]:l[0],h=null):2===l.length&&("string"==typeof k[0]&&(h=k[0]),"string"==typeof k[1]&&(j=k[1]));var m=k.find(i.isFunction),n=k.filter(i.isPlainObject);return 1===n.length?(0,i.isPlainObject)(k[2])?(g={},f=k[2]):(0,i.isPlainObject)(k[3])?(f={},g=k[3]):(f=n[0],g={}):2===n.length&&(f=n[0],g=n[1]),[h,j,null!=f?f:f={},null!=g?g:g={},m]}var l=function(a){return function(){for(var b,c,d,e=[],f=0;f<arguments.length;f++)e[f]=arguments[f];for(var g={},h=["callback","options","traits","id"],j=0;j<e.length;j++){var k=e[j],l=h.pop();if("id"===l){if((0,i.isString)(k)||(0,i.isNumber)(k)){g.id=k.toString();continue}if(null==k)continue;l=h.pop()}if(("traits"===l||"options"===l)&&(null==k||(0,i.isPlainObject)(k))&&(g[l]=k),(0,i.isFunction)(k)){g.callback=k;break}}return[null!=(b=g.id)?b:a.id(),null!=(c=g.traits)?c:{},null!=(d=g.options)?d:{},g.callback]}};function m(a,b,c,d){(0,i.isNumber)(a)&&(a=a.toString()),(0,i.isNumber)(b)&&(b=b.toString());var e=[a,b,c,d],f=e.filter(i.isString),g=f[0],h=void 0===g?a:g,j=f[1],k=e.filter(i.isPlainObject)[0];return[h,void 0===j?null:j,void 0===k?{}:k,e.find(i.isFunction)]}var n=a.i(54729),o=a.i(9791),p=a.i(59781),q=a.i(82767),r=a.i(1065),s=function(a,b,c,d,e,f){return{__t:"bpc",c:b,p:d,u:a,s:c,t:e,r:f}},t=Object.keys(s("","","","","","")),u=function(a){var b=a.indexOf("#");return -1===b?a:a.slice(0,b)},v=function(a){try{return new URL(a).pathname}catch(b){return"/"===a[0]?a:"/"+a}},w=function(a){var b=a.c,c=a.p,d=a.s,e=a.u,f=a.r,g=a.t,h=b?v(b):c,i=b?b.indexOf("?")>-1?b:b+d:u(e);return{path:h,referrer:f,search:d,title:g,url:i}},x=function(){var a=document.querySelector("link[rel='canonical']");return s(location.href,a&&a.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},y=function(a,b){void 0===b&&(b=w(x()));var c,d,e,g=a.context;"page"===a.type&&(e=a.properties&&(c=a.properties,d=Object.keys(b),Object.assign.apply(Object,(0,f.__spreadArray)([{}],d.map(function(a){var b;if(c&&Object.prototype.hasOwnProperty.call(c,a))return(b={})[a]=c[a],b}),!1))),a.properties=(0,f.__assign)((0,f.__assign)((0,f.__assign)({},b),a.properties),a.name?{name:a.name}:{})),g.page=(0,f.__assign)((0,f.__assign)((0,f.__assign)({},b),e),g.page)},z=a.i(96102),A=function(a){function b(b,c){var d=a.call(this,"".concat(b," ").concat(c))||this;return d.field=b,d}return(0,f.__extends)(b,a),b}(Error),B="is not a string",C="is not an object",D=function(a){var b,c;this.settings=a,this.createMessageId=a.createMessageId,this.onEventMethodCall=null!=(b=a.onEventMethodCall)?b:function(){},this.onFinishedEvent=null!=(c=a.onFinishedEvent)?c:function(){}},E=function(a){function b(b){var c=a.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat((0,r.v4)())},onEventMethodCall:function(a){var b=a.options;c.maybeUpdateAnonId(b)},onFinishedEvent:function(a){return c.addIdentity(a),a}})||this;return c.user=b,c}return(0,f.__extends)(b,a),b.prototype.maybeUpdateAnonId=function(a){(null==a?void 0:a.anonymousId)&&this.user.anonymousId(a.anonymousId)},b.prototype.addIdentity=function(a){this.user.id()&&(a.userId=this.user.id()),this.user.anonymousId()&&(a.anonymousId=this.user.anonymousId())},b.prototype.track=function(b,c,d,e,f){var g=a.prototype.track.call(this,b,c,d,e);return y(g,f),g},b.prototype.page=function(b,c,d,e,f,g){var h=a.prototype.page.call(this,b,c,d,e,f);return y(h,g),h},b.prototype.screen=function(b,c,d,e,f,g){var h=a.prototype.screen.call(this,b,c,d,e,f);return y(h,g),h},b.prototype.identify=function(b,c,d,e,f){var g=a.prototype.identify.call(this,b,c,d,e);return y(g,f),g},b.prototype.group=function(b,c,d,e,f){var g=a.prototype.group.call(this,b,c,d,e);return y(g,f),g},b.prototype.alias=function(b,c,d,e,f){var g=a.prototype.alias.call(this,b,c,d,e);return y(g,f),g},b}(function(){function a(a){this.settings=new D(a)}return a.prototype.track=function(a,b,c,d){return this.settings.onEventMethodCall({type:"track",options:c}),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),{event:a,type:"track",properties:null!=b?b:{},options:(0,f.__assign)({},c),integrations:(0,f.__assign)({},d)}))},a.prototype.page=function(a,b,c,d,e){this.settings.onEventMethodCall({type:"page",options:d});var g,h={type:"page",properties:(0,f.__assign)({},c),options:(0,f.__assign)({},d),integrations:(0,f.__assign)({},e)};return null!==a&&(h.category=a,h.properties=null!=(g=h.properties)?g:{},h.properties.category=a),null!==b&&(h.name=b),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),h))},a.prototype.screen=function(a,b,c,d,e){this.settings.onEventMethodCall({type:"screen",options:d});var g={type:"screen",properties:(0,f.__assign)({},c),options:(0,f.__assign)({},d),integrations:(0,f.__assign)({},e)};return null!==a&&(g.category=a),null!==b&&(g.name=b),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),g))},a.prototype.identify=function(a,b,c,d){return this.settings.onEventMethodCall({type:"identify",options:c}),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),{type:"identify",userId:a,traits:null!=b?b:{},options:(0,f.__assign)({},c),integrations:d}))},a.prototype.group=function(a,b,c,d){return this.settings.onEventMethodCall({type:"group",options:c}),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),{type:"group",traits:null!=b?b:{},options:(0,f.__assign)({},c),integrations:(0,f.__assign)({},d),groupId:a}))},a.prototype.alias=function(a,b,c,d){this.settings.onEventMethodCall({type:"alias",options:c});var e={userId:a,type:"alias",options:(0,f.__assign)({},c),integrations:(0,f.__assign)({},d)};return(null!==b&&(e.previousId=b),void 0===a)?this.normalize((0,f.__assign)((0,f.__assign)({},e),this.baseEvent())):this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),e))},a.prototype.baseEvent=function(){return{integrations:{},options:{}}},a.prototype.context=function(a){var b,c=["userId","anonymousId","timestamp","messageId"];delete a.integrations;var d=Object.keys(a),e=null!=(b=a.context)?b:{},f={};return d.forEach(function(b){"context"!==b&&(c.includes(b)?(0,z.dset)(f,b,a[b]):(0,z.dset)(e,b,a[b]))}),[e,f]},a.prototype.normalize=function(a){var b,c,d,e=Object.keys(null!=(c=a.integrations)?c:{}).reduce(function(b,c){var d,e;return(0,f.__assign)((0,f.__assign)({},b),((d={})[c]=!!(null==(e=a.integrations)?void 0:e[c]),d))},{});b=a.options||{},a.options=Object.keys(b).filter(function(a){return function(a,b){return void 0!==b}(a,b[a])}).reduce(function(a,c){return a[c]=b[c],a},{});var g=(0,f.__assign)((0,f.__assign)({},e),null==(d=a.options)?void 0:d.integrations),h=a.options?this.context(a.options):[],j=h[0],k=h[1],l=a.options,m=(0,f.__rest)(a,["options"]),n=(0,f.__assign)((0,f.__assign)((0,f.__assign)((0,f.__assign)({timestamp:new Date},m),{context:j,integrations:g}),k),{messageId:l.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(n),!function(a){if(!(0,i.exists)(a))throw new A("Event","is nil");if("object"!=typeof a)throw new A("Event",C);if(!(0,i.isString)(a.type))throw new A(".type",B);if(!(0,i.isString)(a.messageId))throw new A(".messageId",B);if("track"===a.type){if(!(0,i.isString)(a.event))throw new A(".event",B);if(!(0,i.isPlainObject)(a.properties))throw new A(".properties",C)}["group","identify"].includes(a.type)&&function(a){if(!(0,i.isPlainObject)(a.traits))throw new A(".traits",C)}(a)}(n),n},a}()),F=function(a){return"addMiddleware"in a&&"destination"===a.type},G=a.i(68926),H=a.i(26393),I=a.i(94260),J=function(){var a,b,c=0;return{done:function(){return a},run:function(d){var e=d();return"object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then&&(1==++c&&(a=new Promise(function(a){return b=a})),e.finally(function(){return 0==--c&&b()})),e}}},K=a.i(457),L=function(a){function b(b){return a.call(this,"string"==typeof b?new G.PersistedPriorityQueue(4,b):b)||this}return(0,f.__extends)(b,a),b.prototype.flush=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(b){return(0,n.isOffline)()?[2,[]]:[2,a.prototype.flush.call(this)]})})},b}(function(a){function b(b){var c=a.call(this)||this;return c.criticalTasks=J(),c.plugins=[],c.failedInitializations=[],c.flushing=!1,c.queue=b,c.queue.on(H.ON_REMOVE_FROM_FUTURE,function(){c.scheduleFlush(0)}),c}return(0,f.__extends)(b,a),b.prototype.register=function(a,b,c){return(0,f.__awaiter)(this,void 0,void 0,function(){var d,e,g=this;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(this.plugins.push(b),d=function(c){g.failedInitializations.push(b.name),g.emit("initialization_failure",b),console.warn(b.name,c),a.log("warn","Failed to load destination",{plugin:b.name,error:c}),g.plugins=g.plugins.filter(function(a){return a!==b})},"destination"!==b.type||"Segment.io"===b.name)return[3,1];return b.load(a,c).catch(d),[3,4];case 1:return f.trys.push([1,3,,4]),[4,b.load(a,c)];case 2:return f.sent(),[3,4];case 3:return e=f.sent(),d(e),[3,4];case 4:return[2]}})})},b.prototype.deregister=function(a,b,c){return(0,f.__awaiter)(this,void 0,void 0,function(){var d;return(0,f.__generator)(this,function(e){switch(e.label){case 0:if(e.trys.push([0,3,,4]),!b.unload)return[3,2];return[4,Promise.resolve(b.unload(a,c))];case 1:e.sent(),e.label=2;case 2:return this.plugins=this.plugins.filter(function(a){return a.name!==b.name}),[3,4];case 3:return d=e.sent(),a.log("warn","Failed to unload destination",{plugin:b.name,error:d}),[3,4];case 4:return[2]}})})},b.prototype.dispatch=function(a){return(0,f.__awaiter)(this,void 0,void 0,function(){var b;return(0,f.__generator)(this,function(c){return a.log("debug","Dispatching"),a.stats.increment("message_dispatched"),this.queue.push(a),b=this.subscribeToDelivery(a),this.scheduleFlush(0),[2,b]})})},b.prototype.subscribeToDelivery=function(a){return(0,f.__awaiter)(this,void 0,void 0,function(){var b=this;return(0,f.__generator)(this,function(c){return[2,new Promise(function(c){var d=function(e,f){e.isSame(a)&&(b.off("flush",d),c(e))};b.on("flush",d)})]})})},b.prototype.dispatchSingle=function(a){return(0,f.__awaiter)(this,void 0,void 0,function(){var b=this;return(0,f.__generator)(this,function(c){return a.log("debug","Dispatching"),a.stats.increment("message_dispatched"),this.queue.updateAttempts(a),a.attempts=1,[2,this.deliver(a).catch(function(c){return b.enqueuRetry(c,a)?b.subscribeToDelivery(a):(a.setFailedDelivery({reason:c}),a)})]})})},b.prototype.isEmpty=function(){return 0===this.queue.length},b.prototype.scheduleFlush=function(a){var b=this;void 0===a&&(a=500),this.flushing||(this.flushing=!0,setTimeout(function(){b.flush().then(function(){setTimeout(function(){b.flushing=!1,b.queue.length&&b.scheduleFlush(0)},0)})},a))},b.prototype.deliver=function(a){return(0,f.__awaiter)(this,void 0,void 0,function(){var b,c,d,e;return(0,f.__generator)(this,function(f){switch(f.label){case 0:return[4,this.criticalTasks.done()];case 1:f.sent(),b=Date.now(),f.label=2;case 2:return f.trys.push([2,4,,5]),[4,this.flushOne(a)];case 3:return a=f.sent(),c=Date.now()-b,this.emit("delivery_success",a),a.stats.gauge("delivered",c),a.log("debug","Delivered",a.event),[2,a];case 4:throw e=d=f.sent(),a.log("error","Failed to deliver",e),this.emit("delivery_failure",a,e),a.stats.increment("delivery_failed"),d;case 5:return[2]}})})},b.prototype.enqueuRetry=function(a,b){return!!(!(a instanceof I.ContextCancelation)||a.retry)&&this.queue.pushWithBackoff(b)},b.prototype.flush=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){var a,b;return(0,f.__generator)(this,function(c){switch(c.label){case 0:if(0===this.queue.length||!(a=this.queue.pop()))return[2,[]];a.attempts=this.queue.getAttempts(a),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.deliver(a)];case 2:return a=c.sent(),this.emit("flush",a,!0),[3,4];case 3:return b=c.sent(),this.enqueuRetry(b,a)||(a.setFailedDelivery({reason:b}),this.emit("flush",a,!1)),[2,[]];case 4:return[2,[a]]}})})},b.prototype.isReady=function(){return!0},b.prototype.availableExtensions=function(a){var b,c,d=(b="type",c={},this.plugins.filter(function(b){if("destination"!==b.type&&"Segment.io"!==b.name)return!0;var c,d,e,f=void 0;return null==(c=b.alternativeNames)||c.forEach(function(b){void 0!==a[b]&&(f=a[b])}),null!=(e=null!=(d=a[b.name])?d:f)?e:!1!==("Segment.io"===b.name||a.All)}).forEach(function(a){var d,e=void 0;if("string"==typeof b){var g=a[b];e="string"!=typeof g?JSON.stringify(g):g}else b instanceof Function&&(e=b(a));void 0!==e&&(c[e]=(0,f.__spreadArray)((0,f.__spreadArray)([],null!=(d=c[e])?d:[],!0),[a],!1))}),c),e=d.before,g=d.enrichment,h=d.destination,i=d.after;return{before:void 0===e?[]:e,enrichment:void 0===g?[]:g,destinations:void 0===h?[]:h,after:void 0===i?[]:i}},b.prototype.flushOne=function(a){var b,c;return(0,f.__awaiter)(this,void 0,void 0,function(){var d,e,g,h,i,j,k,l,m,n,o,p,q;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(!this.isReady())throw Error("Not ready");a.attempts>1&&this.emit("delivery_retry",a),e=(d=this.availableExtensions(null!=(b=a.event.integrations)?b:{})).before,g=d.enrichment,h=0,i=e,f.label=1;case 1:if(!(h<i.length))return[3,4];return j=i[h],[4,(0,K.ensure)(a,j)];case 2:(k=f.sent())instanceof I.CoreContext&&(a=k),this.emit("message_enriched",a,j),f.label=3;case 3:return h++,[3,1];case 4:l=0,m=g,f.label=5;case 5:if(!(l<m.length))return[3,8];return n=m[l],[4,(0,K.attempt)(a,n)];case 6:(k=f.sent())instanceof I.CoreContext&&(a=k),this.emit("message_enriched",a,n),f.label=7;case 7:return l++,[3,5];case 8:return p=(o=this.availableExtensions(null!=(c=a.event.integrations)?c:{})).destinations,q=o.after,[4,new Promise(function(b,c){setTimeout(function(){Promise.all(p.map(function(b){return(0,K.attempt)(a,b)})).then(b).catch(c)},0)})];case 9:return f.sent(),a.stats.increment("message_delivered"),this.emit("message_delivered",a),[4,Promise.all(q.map(function(b){return(0,K.attempt)(a,b)}))];case 10:return f.sent(),[2,a]}})})},b}(q.Emitter));function M(a){for(var b=a.constructor.prototype,c=0,d=Object.getOwnPropertyNames(b);c<d.length;c++){var e=d[c];if("constructor"!==e){var f=Object.getOwnPropertyDescriptor(a.constructor.prototype,e);f&&"function"==typeof f.value&&(a[e]=a[e].bind(a))}}return a}var N=function(a,b,c,d){console.warn("".concat(a.constructor.name,": Can't ").concat(b,' key "').concat(c,'" | Err: ').concat(d))},O=function(){function a(a){this.stores=a}return a.prototype.get=function(a){for(var b=null,c=0,d=this.stores;c<d.length;c++){var e=d[c];try{if(null!=(b=e.get(a)))return b}catch(b){N(e,"get",a,b)}}return null},a.prototype.set=function(a,b){this.stores.forEach(function(c){try{c.set(a,b)}catch(b){N(c,"set",a,b)}})},a.prototype.clear=function(a){this.stores.forEach(function(b){try{b.remove(a)}catch(c){N(b,"remove",a,c)}})},a.prototype.getAndSync=function(a){var b=this.get(a),c="number"==typeof b?b.toString():b;return this.set(a,c),c},a}(),P=function(){function a(){this.cache={}}return a.prototype.get=function(a){var b;return null!=(b=this.cache[a])?b:null},a.prototype.set=function(a,b){this.cache[a]=b},a.prototype.remove=function(a){delete this.cache[a]},a}(),Q={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function R(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}var S=function a(b,c){function d(a,d,e){if("undefined"!=typeof document){"number"==typeof(e=R({},c,e)).expires&&(e.expires=new Date(Date.now()+864e5*e.expires)),e.expires&&(e.expires=e.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var f="";for(var g in e)e[g]&&(f+="; "+g,!0!==e[g]&&(f+="="+e[g].split(";")[0]));return document.cookie=a+"="+b.write(d,a)+f}}return Object.create({set:d,get:function(a){if("undefined"!=typeof document&&(!arguments.length||a)){for(var c=document.cookie?document.cookie.split("; "):[],d={},e=0;e<c.length;e++){var f=c[e].split("="),g=f.slice(1).join("=");try{var h=decodeURIComponent(f[0]);if(d[h]=b.read(g,h),a===h)break}catch(a){}}return a?d[a]:d}},remove:function(a,b){d(a,"",R({},b,{expires:-1}))},withAttributes:function(b){return a(this.converter,R({},this.attributes,b))},withConverter:function(b){return a(R({},this.converter,b),this.attributes)}},{attributes:{value:Object.freeze(c)},converter:{value:Object.freeze(b)}})}({read:function(a){return'"'===a[0]&&(a=a.slice(1,-1)),a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(a){return encodeURIComponent(a).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function T(a){var b=function(a){try{return new URL(a)}catch(a){return}}(a);if(b)for(var c=function(a){var b=a.hostname.split("."),c=b[b.length-1],d=[];if(4===b.length&&parseInt(c,10)>0||b.length<=1)return d;for(var e=b.length-2;e>=0;--e)d.push(b.slice(e).join("."));return d}(b),d=0;d<c.length;++d){var e="__tld__",f=c[d],g={domain:"."+f};try{if(S.set(e,"1",g),S.get(e))return S.remove(e,g),f}catch(a){return}}}var U=function(){function a(b){void 0===b&&(b=a.defaults),this.options=(0,f.__assign)((0,f.__assign)({},a.defaults),b)}return Object.defineProperty(a,"defaults",{get:function(){return{maxage:365,domain:T(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),a.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},a.prototype.get=function(a){var b;try{var c=S.get(a);if(null==c)return null;try{return null!=(b=JSON.parse(c))?b:null}catch(a){return null!=c?c:null}}catch(a){return null}},a.prototype.set=function(a,b){"string"==typeof b?S.set(a,b,this.opts()):null===b?S.remove(a,this.opts()):S.set(a,JSON.stringify(b),this.opts())},a.prototype.remove=function(a){return S.remove(a,this.opts())},a}(),V=function(){function a(){}return a.prototype.localStorageWarning=function(a,b){console.warn("Unable to access ".concat(a,", localStorage may be ").concat(b))},a.prototype.get=function(a){var b;try{var c=localStorage.getItem(a);if(null===c)return null;try{return null!=(b=JSON.parse(c))?b:null}catch(a){return null!=c?c:null}}catch(b){return this.localStorageWarning(a,"unavailable"),null}},a.prototype.set=function(a,b){try{localStorage.setItem(a,JSON.stringify(b))}catch(b){this.localStorageWarning(a,"full")}},a.prototype.remove=function(a){try{return localStorage.removeItem(a)}catch(b){this.localStorageWarning(a,"unavailable")}},a}();function W(a){return a&&a.stores&&Array.isArray(a.stores)&&a.stores.every(function(a){return Object.values(Q).includes(a)})}function X(a){return a.map(function(a){var b,c;switch("object"==typeof a&&void 0!==a.name?(b=a.name,c=a.settings):b=a,b){case Q.Cookie:return new U(c);case Q.LocalStorage:return new V;case Q.Memory:return new P;default:throw Error("Unknown Store Type: ".concat(a))}})}function Y(a,b){return a.map(function(a){return b&&a===Q.Cookie?{name:a,settings:b}:a})}var Z={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},$=function(){function a(a,b){void 0===a&&(a=Z);var c,d,e,g,h=this;this.options={},this.id=function(a){if(h.options.disable)return null;var b=h.identityStore.getAndSync(h.idKey);void 0!==a&&(h.identityStore.set(h.idKey,a),a!==b&&null!==b&&null!==a&&h.anonymousId(null));var c=h.identityStore.getAndSync(h.idKey);if(c)return c;var d=h.legacyUserStore.get(Z.cookie.oldKey);return d?"object"==typeof d?d.id:d:null},this.anonymousId=function(a){var b,c;if(h.options.disable)return null;if(void 0===a){var d=null!=(b=h.identityStore.getAndSync(h.anonKey))?b:null==(c=h.legacySIO())?void 0:c[0];if(d)return d}return null===a?h.identityStore.set(h.anonKey,null):h.identityStore.set(h.anonKey,null!=a?a:(0,r.v4)()),h.identityStore.getAndSync(h.anonKey)},this.traits=function(a){var b;if(!h.options.disable)return null===a&&(a={}),a&&h.traitsStore.set(h.traitsKey,null!=a?a:{}),null!=(b=h.traitsStore.get(h.traitsKey))?b:{}},this.options=(0,f.__assign)((0,f.__assign)({},Z),a),this.cookieOptions=b,this.idKey=null!=(d=null==(c=a.cookie)?void 0:c.key)?d:Z.cookie.key,this.traitsKey=null!=(g=null==(e=a.localStorage)?void 0:e.key)?g:Z.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,b),this.legacyUserStore=this.createStorage(this.options,b,function(a){return a===Q.Cookie}),this.traitsStore=this.createStorage(this.options,b,function(a){return a!==Q.Cookie});var i=this.legacyUserStore.get(Z.cookie.oldKey);i&&"object"==typeof i&&(i.id&&this.id(i.id),i.traits&&this.traits(i.traits)),M(this)}return a.prototype.legacySIO=function(){var a=this.legacyUserStore.get("_sio");if(!a)return null;var b=a.split("----");return[b[0],b[1]]},a.prototype.identify=function(a,b){if(!this.options.disable){b=null!=b?b:{};var c=this.id();(null===c||c===a)&&(b=(0,f.__assign)((0,f.__assign)({},this.traits()),b)),a&&this.id(a),this.traits(b)}},a.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},a.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},a.prototype.load=function(){return new a(this.options,this.cookieOptions)},a.prototype.save=function(){return!0},a.prototype.createStorage=function(a,b,c){var d=[Q.LocalStorage,Q.Cookie,Q.Memory];return a.disable?new O([]):a.persist?(void 0!==a.storage&&null!==a.storage&&W(a.storage)&&(d=a.storage.stores),a.localStorageFallbackDisabled&&(d=d.filter(function(a){return a!==Q.LocalStorage})),c&&(d=d.filter(c)),new O(X(Y(d,b)))):new O([new P])},a.defaults=Z,a}(),_={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},aa=function(a){function b(b,c){void 0===b&&(b=_);var d=a.call(this,(0,f.__assign)((0,f.__assign)({},_),b),c)||this;return d.anonymousId=function(a){},M(d),d}return(0,f.__extends)(b,a),b}($),ab=a.i(56359),ac=a.i(43799),ad=a.i(55555),ae=a.i(48239),af=function(a,b,c){c.getAndRemove(a).forEach(function(a){an(b,a).catch(console.error)})},ag=af.bind(void 0,"on"),ah=af.bind(void 0,"setAnonymousId"),ai=function(a,b){Object.keys(b.calls).forEach(function(c){b.getAndRemove(c).forEach(function(b){setTimeout(function(){an(a,b).catch(console.error)},0)})})},aj=function(a){if(ak(a))return w(a.pop())},ak=function(a){var b=a[a.length-1];if("object"!==Object.prototype.toString.call(b).slice(8,-1).toLowerCase()||"bpc"!==b.__t)return!1;for(var c in b)if(!t.includes(c))return!1;return!0},al=function(a,b,c,d){void 0===c&&(c=function(){}),void 0===d&&(d=console.error),this.method=a,this.resolve=c,this.reject=d,this.called=!1,this.args=b},am=function(){function a(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this._callMap={},this.add.apply(this,a)}return Object.defineProperty(a.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(a){this._callMap=a},enumerable:!1,configurable:!0}),a.prototype.get=function(a){var b;return null!=(b=this.calls[a])?b:[]},a.prototype.getAndRemove=function(a){var b=this.get(a);return this.calls[a]=[],b},a.prototype.add=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b.forEach(function(b){["track","screen","alias","group","page","identify"].includes(b.method)&&!ak(b.args)&&(b.args=(0,f.__spreadArray)((0,f.__spreadArray)([],b.args,!0),[x()],!1)),a.calls[b.method]?a.calls[b.method].push(b):a.calls[b.method]=[b]})},a.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},a.prototype.toArray=function(){var a;return(a=[]).concat.apply(a,Object.values(this.calls))},a.prototype._pushSnippetWindowBuffer=function(){if("npm"!==(0,ae.getVersionType)()){var a=(0,ad.getGlobalAnalytics)();if(Array.isArray(a)){var b=a.splice(0,a.length).map(function(a){return new al(a[0],a.slice(1))});this.add.apply(this,b)}}},a}();function an(a,b){return(0,f.__awaiter)(this,void 0,void 0,function(){var c,d;return(0,f.__generator)(this,function(e){switch(e.label){case 0:var f;if(e.trys.push([0,3,,4]),b.called)return[2,void 0];if(b.called=!0,!("object"==typeof(f=c=a[b.method].apply(a,b.args))&&null!==f&&"then"in f&&"function"==typeof f.then))return[3,2];return[4,c];case 1:e.sent(),e.label=2;case 2:return b.resolve(c),[3,4];case 3:return d=e.sent(),b.reject(d),[3,4];case 4:return[2]}})})}var ao=function(){function a(a){var b=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=ab.version,this._preInitBuffer=new am,this._promise=a(this._preInitBuffer),this._promise.then(function(a){var c=a[0],d=a[1];b.instance=c,b.ctx=d}).catch(function(){})}return a.prototype.then=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(a=this._promise).then.apply(a,b)},a.prototype.catch=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(a=this._promise).catch.apply(a,b)},a.prototype.finally=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(a=this._promise).finally.apply(a,b)},a.prototype._createMethod=function(a){var b=this;return function(){for(var c,d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];return b.instance?Promise.resolve((c=b.instance)[a].apply(c,d)):new Promise(function(c,e){b._preInitBuffer.add(new al(a,d,c,e))})}},a.prototype._createChainableMethod=function(a){var b=this;return function(){for(var c,d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];return b.instance?(c=b.instance)[a].apply(c,d):b._preInitBuffer.add(new al(a,d)),b}},a}(),ap=a.i(46816),aq=a.i(48727),ar=function(a){var b=!1;window.addEventListener("pagehide",function(){b||a(b=!0)}),document.addEventListener("visibilitychange",function(){if("hidden"==document.visibilityState){if(b)return;b=!0}else b=!1;a(b)})},as=function(a){function b(b,c){var d=a.call(this,b)||this;return d.retryTimeout=c,d.name="RateLimitError",d}return(0,f.__extends)(b,a),b}(Error),at=function(a){return(0,f.__assign)({"Content-Type":"text/plain"},"function"==typeof a?a():a)};function au(a){return(encodeURI(JSON.stringify(a)).split(/%..|./).length-1)/1024}var av=a.i(53761);function aw(a,b,c,d){var e=this;a||setTimeout(function(){return(0,f.__awaiter)(e,void 0,void 0,function(){var a,e;return(0,f.__generator)(this,function(g){switch(g.label){case 0:return a=!0,[4,function(a,b){return(0,f.__awaiter)(this,void 0,void 0,function(){var c,d=this;return(0,f.__generator)(this,function(e){switch(e.label){case 0:if(c=[],(0,n.isOffline)())return[2,b];return[4,(0,av.pWhile)(function(){return b.length>0&&!(0,n.isOffline)()},function(){return(0,f.__awaiter)(d,void 0,void 0,function(){var d;return(0,f.__generator)(this,function(e){switch(e.label){case 0:if(!(d=b.pop()))return[2];return[4,(0,K.attempt)(d,a)];case 1:return e.sent()instanceof o.Context||c.push(d),[2]}})})})];case 1:return e.sent(),c.map(function(a){return b.pushWithBackoff(a)}),[2,b]}})})}(c,b)];case 1:return e=g.sent(),a=!1,b.todo>0&&d(a,e,c,d),[2]}})})},5e3*Math.random())}var ax=a.i(39254),ay=function(a){return"Segment.io"===a.name},az="This is being deprecated and will be not be available in future releases of Analytics JS",aA=(0,ac.getGlobal)(),aB=null==aA?void 0:aA.analytics,aC=function(){function a(a,b){var c;this.timeout=300,this._getSegmentPluginMetadata=function(){var a;return null==(a=b.plugins.find(ay))?void 0:a.metadata},this.writeKey=a.writeKey,this.cdnSettings=null!=(c=a.cdnSettings)?c:{integrations:{"Segment.io":{apiKey:""}}},this.cdnURL=a.cdnURL}return Object.defineProperty(a.prototype,"apiHost",{get:function(){var a,b;return null==(b=null==(a=this._getSegmentPluginMetadata)?void 0:a.call(this))?void 0:b.apiHost},enumerable:!1,configurable:!0}),a}();function aD(){console.warn(az)}var aE=function(b){function c(a,c,d,e,g){var h,i,j,k,l,m,n=this;(n=b.call(this)||this)._debug=!1,n.initialized=!1,n.user=function(){return n._user},n.init=n.initialize.bind(n),n.log=aD,n.addIntegrationMiddleware=aD,n.listeners=aD,n.addEventListener=aD,n.removeAllListeners=aD,n.removeListener=aD,n.removeEventListener=aD,n.hasListeners=aD,n.add=aD,n.addIntegration=aD;var o=null==c?void 0:c.cookie,p=null!=(l=null==c?void 0:c.disableClientPersistence)&&l;n.queue=null!=d?d:(h="".concat(a.writeKey,":event-queue"),void 0===(i=null==c?void 0:c.retryQueue)&&(i=!1),void 0===(j=p)&&(j=!1),k=i?10:1,new L(j?new H.PriorityQueue(k,[]):new G.PersistedPriorityQueue(k,h))),n.settings=new aC(a,n.queue);var q=null==c?void 0:c.storage;return n._universalStorage=n.createStore(p,q,o),n._user=null!=e?e:new $((0,f.__assign)({persist:!p,storage:null==c?void 0:c.storage},null==c?void 0:c.user),o).load(),n._group=null!=g?g:new aa((0,f.__assign)({persist:!p,storage:null==c?void 0:c.storage},null==c?void 0:c.group),o).load(),n.eventFactory=new E(n._user),n.integrations=null!=(m=null==c?void 0:c.integrations)?m:{},n.options=null!=c?c:{},M(n),n}return(0,f.__extends)(c,b),c.prototype.createStore=function(a,b,c){return new O(a?[new P]:b&&W(b)?X(Y(b.stores,c)):X([Q.LocalStorage,{name:Q.Cookie,settings:c},Q.Memory]))},Object.defineProperty(c.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),c.prototype.track=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,f.__awaiter)(this,void 0,void 0,function(){var b,c,d,e,g,h,i,k=this;return(0,f.__generator)(this,function(f){return b=aj(a),d=(c=j.apply(void 0,a))[0],e=c[1],g=c[2],h=c[3],i=this.eventFactory.track(d,e,g,this.integrations,b),[2,this._dispatch(i,h).then(function(a){return k.emit("track",d,a.event.properties,a.event.options),a})]})})},c.prototype.page=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,f.__awaiter)(this,void 0,void 0,function(){var b,c,d,e,g,h,i,j,l=this;return(0,f.__generator)(this,function(f){return b=aj(a),d=(c=k.apply(void 0,a))[0],e=c[1],g=c[2],h=c[3],i=c[4],j=this.eventFactory.page(d,e,g,h,this.integrations,b),[2,this._dispatch(j,i).then(function(a){return l.emit("page",d,e,a.event.properties,a.event.options),a})]})})},c.prototype.identify=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,f.__awaiter)(this,void 0,void 0,function(){var b,c,d,e,g,h,i,j=this;return(0,f.__generator)(this,function(f){return b=aj(a),d=(c=l(this._user).apply(void 0,a))[0],e=c[1],g=c[2],h=c[3],this._user.identify(d,e),i=this.eventFactory.identify(this._user.id(),this._user.traits(),g,this.integrations,b),[2,this._dispatch(i,h).then(function(a){return j.emit("identify",a.event.userId,a.event.traits,a.event.options),a})]})})},c.prototype.group=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=aj(b);if(0===b.length)return this._group;var e=l(this._group).apply(void 0,b),f=e[0],g=e[1],h=e[2],i=e[3];this._group.identify(f,g);var j=this._group.id(),k=this._group.traits(),m=this.eventFactory.group(j,k,h,this.integrations,d);return this._dispatch(m,i).then(function(b){return a.emit("group",b.event.groupId,b.event.traits,b.event.options),b})},c.prototype.alias=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,f.__awaiter)(this,void 0,void 0,function(){var b,c,d,e,g,h,i,j=this;return(0,f.__generator)(this,function(f){return b=aj(a),d=(c=m.apply(void 0,a))[0],e=c[1],g=c[2],h=c[3],i=this.eventFactory.alias(d,e,g,this.integrations,b),[2,this._dispatch(i,h).then(function(a){return j.emit("alias",d,e,a.event.options),a})]})})},c.prototype.screen=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,f.__awaiter)(this,void 0,void 0,function(){var b,c,d,e,g,h,i,j,l=this;return(0,f.__generator)(this,function(f){return b=aj(a),d=(c=k.apply(void 0,a))[0],e=c[1],g=c[2],h=c[3],i=c[4],j=this.eventFactory.screen(d,e,g,h,this.integrations,b),[2,this._dispatch(j,i).then(function(a){return l.emit("screen",d,e,a.event.properties,a.event.options),a})]})})},c.prototype.trackClick=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(0,f.__awaiter)(this,void 0,void 0,function(){var c;return(0,f.__generator)(this,function(d){switch(d.label){case 0:return[4,a.A(58386)];case 1:return[2,(c=d.sent().link).call.apply(c,(0,f.__spreadArray)([this],b,!1))]}})})},c.prototype.trackLink=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(0,f.__awaiter)(this,void 0,void 0,function(){var c;return(0,f.__generator)(this,function(d){switch(d.label){case 0:return[4,a.A(58386)];case 1:return[2,(c=d.sent().link).call.apply(c,(0,f.__spreadArray)([this],b,!1))]}})})},c.prototype.trackSubmit=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(0,f.__awaiter)(this,void 0,void 0,function(){var c;return(0,f.__generator)(this,function(d){switch(d.label){case 0:return[4,a.A(58386)];case 1:return[2,(c=d.sent().form).call.apply(c,(0,f.__spreadArray)([this],b,!1))]}})})},c.prototype.trackForm=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(0,f.__awaiter)(this,void 0,void 0,function(){var c;return(0,f.__generator)(this,function(d){switch(d.label){case 0:return[4,a.A(58386)];case 1:return[2,(c=d.sent().form).call.apply(c,(0,f.__spreadArray)([this],b,!1))]}})})},c.prototype.register=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,f.__awaiter)(this,void 0,void 0,function(){var b,c=this;return(0,f.__generator)(this,function(d){switch(d.label){case 0:return b=o.Context.system(),[4,Promise.all(a.map(function(a){return c.queue.register(b,a,c)}))];case 1:return d.sent(),[2,b]}})})},c.prototype.deregister=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,f.__awaiter)(this,void 0,void 0,function(){var b,c=this;return(0,f.__generator)(this,function(d){switch(d.label){case 0:return b=o.Context.system(),[4,Promise.all(a.map(function(a){var d=c.queue.plugins.find(function(b){return b.name===a});if(d)return c.queue.deregister(b,d,c);b.log("warn","plugin ".concat(a," not found"))}))];case 1:return d.sent(),[2,b]}})})},c.prototype.debug=function(a){return!1===a&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=a,this},c.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},c.prototype.timeout=function(a){this.settings.timeout=a},c.prototype._dispatch=function(a,b){return(0,f.__awaiter)(this,void 0,void 0,function(){var c;return(0,f.__generator)(this,function(d){return((c=new o.Context(a)).stats.increment("analytics_js.invoke",1,[a.type]),(0,n.isOffline)()&&!this.options.retryQueue)?[2,c]:[2,function(a,b,c,d){return(0,f.__awaiter)(this,void 0,void 0,function(){var e,g;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(c.emit("dispatch_start",a),e=Date.now(),!b.isEmpty())return[3,2];return[4,b.dispatchSingle(a)];case 1:return g=f.sent(),[3,4];case 2:return[4,b.dispatch(a)];case 3:g=f.sent(),f.label=4;case 4:var h,i;if(!(null==d?void 0:d.callback))return[3,6];return[4,(0,p.invokeCallback)(g,d.callback,(h=e,Math.max((null!=(i=d.timeout)?i:300)-(Date.now()-h),0)))];case 5:g=f.sent(),f.label=6;case 6:return(null==d?void 0:d.debug)&&g.flush(),[2,g]}})})}(c,this.queue,this,{callback:b,debug:this._debug,timeout:this.settings.timeout})]})})},c.prototype.addSourceMiddleware=function(b){return(0,f.__awaiter)(this,void 0,void 0,function(){var c=this;return(0,f.__generator)(this,function(d){switch(d.label){case 0:return[4,this.queue.criticalTasks.run(function(){return(0,f.__awaiter)(c,void 0,void 0,function(){var c,d,e;return(0,f.__generator)(this,function(f){switch(f.label){case 0:return[4,a.A(47782)];case 1:return c=f.sent().sourceMiddlewarePlugin,d={},this.queue.plugins.forEach(function(a){if("destination"===a.type)return d[a.name]=!0}),e=c(b,d),[4,this.register(e)];case 2:return f.sent(),[2]}})})})];case 1:return d.sent(),[2,this]}})})},c.prototype.addDestinationMiddleware=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return this.queue.plugins.filter(F).forEach(function(c){("*"===a||c.name.toLowerCase()===a.toLowerCase())&&c.addMiddleware.apply(c,b)}),Promise.resolve(this)},c.prototype.setAnonymousId=function(a){return this._user.anonymousId(a)},c.prototype.queryString=function(b){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(c){switch(c.label){case 0:if(!1===this.options.useQueryString)return[2,[]];return[4,a.A(55366)];case 1:return[2,(0,c.sent().queryString)(this,b)]}})})},c.prototype.use=function(a){return a(this),this},c.prototype.ready=function(a){return void 0===a&&(a=function(a){return a}),(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(b){return[2,Promise.all(this.queue.plugins.map(function(a){return a.ready?a.ready():Promise.resolve()})).then(function(b){return a(b),b})]})})},c.prototype.noConflict=function(){return console.warn(az),(0,ad.setGlobalAnalytics)(null!=aB?aB:this),this},c.prototype.normalize=function(a){return console.warn(az),this.eventFactory.normalize(a)},Object.defineProperty(c.prototype,"failedInitializations",{get:function(){return console.warn(az),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"VERSION",{get:function(){return ab.version},enumerable:!1,configurable:!0}),c.prototype.initialize=function(a,b){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(a){return console.warn(az),[2,Promise.resolve(this)]})})},c.prototype.pageview=function(a){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(b){switch(b.label){case 0:return console.warn(az),[4,this.page({path:a})];case 1:return b.sent(),[2,this]}})})},Object.defineProperty(c.prototype,"plugins",{get:function(){var a;return console.warn(az),null!=(a=this._plugins)?a:{}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"Integrations",{get:function(){return console.warn(az),this.queue.plugins.filter(function(a){return"destination"===a.type}).reduce(function(a,b){var c="".concat(b.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),d=window[c];if(!d)return a;var e=d.Integration;return e?a[b.name]=e:a[b.name]=d,a},{})},enumerable:!1,configurable:!0}),c.prototype.push=function(a){var b=a.shift();(!b||this[b])&&this[b].apply(this,a)},c}(q.Emitter),aF=function(a){function b(){var b=a.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return b.initialized=!0,b}return(0,f.__extends)(b,a),b}(aE),aG=a.i(65450),aH=a.i(90283),aI=a.i(92253),aJ=function(a){try{var b=new URLSearchParams;return Object.entries(a).forEach(function(a){var c=a[0],d=a[1];Array.isArray(d)?d.forEach(function(a){return b.append(c,a)}):b.append(c,d)}),b.toString()}catch(a){return""}},aK=new function(){var a=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(b,c){return(0,f.__awaiter)(a,void 0,void 0,function(){var a;return(0,f.__generator)(this,function(b){switch(b.label){case 0:this.instance=c,b.label=1;case 1:return b.trys.push([1,3,,4]),a=this,[4,function(a){return(0,f.__awaiter)(this,void 0,void 0,function(){var b;return(0,f.__generator)(this,function(c){return(b=navigator.userAgentData)?a?[2,b.getHighEntropyValues(a).catch(function(){return b.toJSON()})]:[2,b.toJSON()]:[2,void 0]})})}(this.instance.options.highEntropyValuesClientHints)];case 2:return a.userAgentData=b.sent(),[3,4];case 3:return b.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(c){var d,e,g,h,i,j,k=c.event.context,l=k.page.search||"",m="object"==typeof l?aJ(l):l;k.userAgent=navigator.userAgent,k.userAgentData=a.userAgentData;var n=navigator.userLanguage||navigator.language;void 0===k.locale&&void 0!==n&&(k.locale=n),null!=k.library||(k.library={name:"analytics.js",version:"".concat("web"===(0,ae.getVersionType)()?"next":"npm:next","-").concat(ab.version)}),m&&!k.campaign&&((d=m).startsWith("?")&&(d=d.substring(1)),k.campaign=(d=d.replace(/\?/g,"&")).split("&").reduce(function(a,b){var c=b.split("="),d=c[0],e=c[1];if(d.includes("utm_")&&d.length>4){var f=d.slice(4);"campaign"===f&&(f="name"),a[f]=(0,aI.gracefulDecodeURIComponent)(void 0===e?"":e)}return a},{}));var o=function(){var a=S.get("_ga");if(a&&a.startsWith("amp"))return a}();o&&(k.amp={id:o}),h=(g=new O(null!=(j=a.instance.options.disableClientPersistence)&&j?[]:[new U(function(){if(b)return b;var a=T(window.location.href);return b={expires:31536e6,secure:!1,path:"/"},a&&(b.domain=a),b}())])).get("s:context.referrer"),(i=null!=(e=function(a){var b={btid:"dataxu",urid:"millennial-media"};a.startsWith("?")&&(a=a.substring(1));for(var c=(a=a.replace(/\?/g,"&")).split("&"),d=0;d<c.length;d++){var e=c[d].split("="),f=e[0],g=e[1];if(b[f])return{id:g,type:b[f]}}}(m))?e:h)&&(k&&(k.referrer=(0,f.__assign)((0,f.__assign)({},k.referrer),i)),g.set("s:context.referrer",i));try{k.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(a){}return c},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich},aL=a.i(73582),aM=a.i(31537),aN=a.i(2103),aO=function(){function a(a,b){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=(0,aH.createDeferred)(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=b,this.name=a,this.type=b.type,this.alternativeNames.push(b.name)}return a.prototype.addMiddleware=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];"destination"===this.type&&(a=this.middleware).push.apply(a,b)},a.prototype.transform=function(a){return(0,f.__awaiter)(this,void 0,void 0,function(){var b;return(0,f.__generator)(this,function(c){switch(c.label){case 0:return[4,(0,aM.applyDestinationMiddleware)(this.name,a.event,this.middleware)];case 1:return null===(b=c.sent())&&a.cancel(new I.ContextCancelation({retry:!1,reason:"dropped by destination middleware"})),[2,new o.Context(b)]}})})},a.prototype._createMethod=function(a){var b=this;return function(c){return(0,f.__awaiter)(b,void 0,void 0,function(){var b,d;return(0,f.__generator)(this,function(e){switch(e.label){case 0:if(!this.action[a])return[2,c];if(b=c,"destination"!==this.type)return[3,2];return[4,this.transform(c)];case 1:b=e.sent(),e.label=2;case 2:return e.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!e.sent())throw Error("Something prevented the destination from getting ready");return(0,aN.recordIntegrationMetric)(c,{integrationName:this.action.name,methodName:a,type:"action"}),[4,this.action[a](b)];case 4:return e.sent(),[3,6];case 5:throw d=e.sent(),(0,aN.recordIntegrationMetric)(c,{integrationName:this.action.name,methodName:a,type:"action",didError:!0}),d;case 6:return[2,c]}})})}},a.prototype.isLoaded=function(){return this.action.isLoaded()},a.prototype.ready=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return a.sent(),[2,!0];case 2:return a.sent(),[2,!1];case 3:return[2]}})})},a.prototype.load=function(a,b){return(0,f.__awaiter)(this,void 0,void 0,function(){var c,d,e,g;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];f.label=1;case 1:return f.trys.push([1,3,,4]),(0,aN.recordIntegrationMetric)(a,{integrationName:this.action.name,methodName:"load",type:"action"}),c=this.action.load(a,b),e=(d=this.loadPromise).resolve,[4,c];case 2:return e.apply(d,[f.sent()]),[2,c];case 3:throw g=f.sent(),(0,aN.recordIntegrationMetric)(a,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(g),g;case 4:return[2]}})})},a.prototype.unload=function(a,b){var c,d;return null==(d=(c=this.action).unload)?void 0:d.call(c,a,b)},a}(),aP=(0,ac.getGlobal)(),aQ=null!=(c=aP.__SEGMENT_INSPECTOR__)?c:aP.__SEGMENT_INSPECTOR__={},aR=function(a){var b;return null==(b=aQ.attach)?void 0:b.call(aQ,a)},aS=a.i(33701),aT=function(){var a,b,c=null!=(a=window.location.hash)?a:"",d=null!=(b=window.location.search)?b:"";return d.length?d:c.replace(/(?=#).*(?=\?)/,"")},aU=function(b){function c(){var c=this,d=(0,aH.createDeferred)(),e=d.promise,i=d.resolve;return(c=b.call(this,function(b){return e.then(function(c){return function(b,c,d){var e,i,j,k,l,m,p,q,r;return void 0===c&&(c={}),(0,f.__awaiter)(this,void 0,void 0,function(){var s,t,u,v,w,x,y,z,A,B;return(0,f.__generator)(this,function(C){switch(C.label){case 0:if(!0===c.disable)return[2,[new aF,o.Context.system()]];if(c.globalAnalyticsKey&&(0,ad.setGlobalAnalyticsKey)(c.globalAnalyticsKey),b.cdnURL&&(0,h.setGlobalCDNUrl)(b.cdnURL),c.initialPageview&&d.add(new al("page",[])),s=aT(),t=null!=(e=b.cdnURL)?e:(0,h.getCDN)(),null==(i=b.cdnSettings))return[3,1];return v=i,[3,3];case 1:var D,E;return[4,(D=b.writeKey,E=t,(0,aq.fetch)("".concat(E,"/v1/projects/").concat(D,"/settings")).then(function(a){return a.ok?a.json():a.text().then(function(a){throw Error(a)})}).catch(function(a){throw console.error(a.message),a}))];case 2:v=C.sent(),C.label=3;case 3:if(u=v,c.updateCDNSettings&&(u=c.updateCDNSettings(u)),"function"!=typeof c.disable)return[3,5];return[4,c.disable(u)];case 4:if(C.sent())return[2,[new aF,o.Context.system()]];C.label=5;case 5:return w=null==(k=null==(j=u.integrations["Segment.io"])?void 0:j.retryQueue)||k,c=(0,f.__assign)({retryQueue:w},c),aR(x=new aE((0,f.__assign)((0,f.__assign)({},b),{cdnSettings:u,cdnURL:t}),c)),y=null!=(l=b.plugins)?l:[],z=null!=(m=b.classicIntegrations)?m:[],A=null==(p=c.integrations)?void 0:p["Segment.io"],aS.Stats.initRemoteMetrics((0,f.__assign)((0,f.__assign)({},u.metrics),{host:null!=(q=null==A?void 0:A.apiHost)?q:null==(r=u.metrics)?void 0:r.host,protocol:null==A?void 0:A.protocol})),[4,function(b,c,d,e,i,j,k){var l,m,p;return void 0===i&&(i=[]),(0,f.__awaiter)(this,void 0,void 0,function(){var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=this;return(0,f.__generator)(this,function(F){var I,J,K;switch(F.label){case 0:if(ah(d,k),ag(d,k),q=null==i?void 0:i.filter(function(a){return"object"==typeof a}),r=null==i?void 0:i.filter(function(a){return"function"==typeof a&&"string"==typeof a.pluginName}),"test"===g().NODE_ENV||!((null!=(K=null==(J=null==(I=c.middlewareSettings)?void 0:I.routingRules)?void 0:J.length)?K:0)>0))return[3,2];return[4,a.A(63499).then(function(a){return a.tsubMiddleware(c.middlewareSettings.routingRules)})];case 1:return t=F.sent(),[3,3];case 2:t=void 0,F.label=3;case 3:if(s=t,("test"===g().NODE_ENV||!(Object.keys(c.integrations).length>1))&&!(j.length>0))return[3,5];return[4,a.A(5299).then(function(a){return a.ajsDestinations(b,c,d.integrations,e,s,j)})];case 4:return v=F.sent(),[3,6];case 5:v=[],F.label=6;case 6:if(u=v,!c.legacyVideoPluginsEnabled)return[3,8];return[4,a.A(24222).then(function(a){return a.loadLegacyVideoPlugins(d)})];case 7:F.sent(),F.label=8;case 8:if(!(null==(l=e.plan)?void 0:l.track))return[3,10];return[4,a.A(27510).then(function(a){var b;return a.schemaFilter(null==(b=e.plan)?void 0:b.track,c)})];case 9:return x=F.sent(),[3,11];case 10:x=void 0,F.label=11;case 11:return w=x,y=(0,aG.mergedOptions)(c,e),[4,(function(a,b,c,d,e,g){var i,j,k;return(0,f.__awaiter)(this,void 0,void 0,function(){var l,m,n=this;return(0,f.__generator)(this,function(o){switch(o.label){case 0:return l=[],m=null!=(j=null==(i=a.middlewareSettings)?void 0:i.routingRules)?j:[],[4,Promise.all((null!=(k=a.remotePlugins)?k:[]).map(function(a){return(0,f.__awaiter)(n,void 0,void 0,function(){var i,j,k,n,o,p;return(0,f.__generator)(this,function(q){switch(q.label){case 0:var r,s;if(r=b[a.creationName],s=b[a.name],!1===b.All&&!r&&!s||!1===r||!1===s||0)return[2];q.label=1;case 1:if(q.trys.push([1,6,,7]),j=null==g?void 0:g.find(function(b){return b.pluginName===a.name}))return[3,3];return[4,function(a,b){return(0,f.__awaiter)(this,void 0,void 0,function(){var c,d,e,g,i,j;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(f.trys.push([0,9,,10]),c=RegExp("https://cdn.segment.(com|build)"),d=(0,h.getCDN)(),!b)return[3,6];g=(e=a.url.split("/"))[e.length-2],i=a.url.replace(g,btoa(g).replace(/=/g,"")),f.label=1;case 1:return f.trys.push([1,3,,5]),[4,(0,aL.loadScript)(i.replace(c,d))];case 2:case 4:return f.sent(),[3,5];case 3:return f.sent(),[4,(0,aL.loadScript)(a.url.replace(c,d))];case 5:return[3,8];case 6:return[4,(0,aL.loadScript)(a.url.replace(c,d))];case 7:f.sent(),f.label=8;case 8:if("function"==typeof window[a.libraryName])return[2,window[a.libraryName]];return[3,10];case 9:throw j=f.sent(),console.error("Failed to create PluginFactory",a),j;case 10:return[2]}})})}(a,null==d?void 0:d.obfuscate)];case 2:j=q.sent(),q.label=3;case 3:if(!(i=j))return[3,5];return k=c[a.name],[4,i((0,f.__assign)((0,f.__assign)({},a.settings),k))];case 4:!function(a){if(!Array.isArray(a))throw Error("Not a valid list of plugins");var b=["load","isLoaded","name","version","type"];a.forEach(function(a){b.forEach(function(b){var c;if(void 0===a[b])throw Error("Plugin: ".concat(null!=(c=a.name)?c:"unknown"," missing required function ").concat(b))})})}(o=Array.isArray(n=q.sent())?n:[n]),p=m.filter(function(b){return b.destinationName===a.creationName}),o.forEach(function(b){var c=new aO(a.creationName,b);p.length&&e&&c.addMiddleware(e),l.push(c)}),q.label=5;case 5:return[3,7];case 6:return console.warn("Failed to load Remote Plugin",q.sent()),[3,7];case 7:return[2]}})})}))];case 1:return o.sent(),[2,l.filter(Boolean)]}})})})(c,d.integrations,y,e,s,r).catch(function(){return[]})];case 12:if(z=F.sent(),A=(0,f.__spreadArray)((0,f.__spreadArray)([aK],u,!0),z,!0),w&&A.push(w),(null==(m=e.integrations)?void 0:m.All)===!1&&!e.integrations["Segment.io"]||e.integrations&&!1===e.integrations["Segment.io"])return[3,14];return C=(B=A).push,[4,function(a,b,c){window.addEventListener("pagehide",function(){j.push.apply(j,Array.from(k)),k.clear()});var d,e,g,h,i=null!=(e=null==b?void 0:b.apiKey)?e:"",j=a.options.disableClientPersistence?new H.PriorityQueue(a.queue.queue.maxAttempts,[]):new G.PersistedPriorityQueue(a.queue.queue.maxAttempts,"".concat(i,":dest-Segment.io")),k=new Set,l=null!=(g=null==b?void 0:b.apiHost)?g:ax.SEGMENT_API_HOST,m=null!=(h=null==b?void 0:b.protocol)?h:"https",p="".concat(m,"://").concat(l),q=null==b?void 0:b.deliveryStrategy,r=q&&"strategy"in q&&"batching"===q.strategy?function(a,b){var c,d,e,g=[],h=!1,i=null!=(c=null==b?void 0:b.size)?c:10,j=null!=(d=null==b?void 0:b.timeout)?d:5e3,k=0;function l(c){if(0!==c.length){var d,e=null==(d=c[0])?void 0:d.writeKey,g=c.map(function(a){return a.sentAt,(0,f.__rest)(a,["sentAt"])});return(0,aq.fetch)("https://".concat(a,"/b"),{credentials:null==b?void 0:b.credentials,keepalive:(null==b?void 0:b.keepalive)||h,headers:at(null==b?void 0:b.headers),method:"post",body:JSON.stringify({writeKey:e,batch:g,sentAt:new Date().toISOString()}),priority:null==b?void 0:b.priority}).then(function(a){var b;if(a.status>=500)throw Error("Bad response from server: ".concat(a.status));if(429===a.status){var c=null==(b=a.headers)?void 0:b.get("x-ratelimit-reset"),d="string"==typeof c?1e3*parseInt(c):j;throw new as("Rate limit exceeded: ".concat(a.status),d)}})}}function m(a){var c;return void 0===a&&(a=1),(0,f.__awaiter)(this,void 0,void 0,function(){var d;return(0,f.__generator)(this,function(e){return g.length?(d=g,g=[],[2,null==(c=l(d))?void 0:c.catch(function(c){var e;o.Context.system().log("error","Error sending batch",c),a<=(null!=(e=null==b?void 0:b.maxRetries)?e:10)&&("RateLimitError"===c.name&&(k=c.retryTimeout),g.push.apply(g,d),g.map(function(b){"_metadata"in b&&(b._metadata=(0,f.__assign)((0,f.__assign)({},b._metadata),{retryCount:a}))}),n(a+1))})]):[2]})})}function n(a){void 0===a&&(a=1),e||(e=setTimeout(function(){e=void 0,m(a).catch(console.error)},k||j),k=0)}return ar(function(a){if((h=a)&&g.length){var b,c;Promise.all((b=[],c=0,g.forEach(function(a){au(b[c])>=64&&c++,b[c]?b[c].push(a):b[c]=[a]}),b).map(l)).catch(console.error)}}),{dispatch:function(a,c){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(a){return g.push(c),[2,g.length>=i||au(g)>=450||(null==b?void 0:b.keepalive)&&au(g)>=54||h?m():n()]})})}}}(l,q.config):(d=null==q?void 0:q.config,{dispatch:function(a,b){return(0,aq.fetch)(a,{credentials:null==d?void 0:d.credentials,keepalive:null==d?void 0:d.keepalive,headers:at(null==d?void 0:d.headers),method:"post",body:JSON.stringify(b),priority:null==d?void 0:d.priority}).then(function(a){var b;if(a.status>=500)throw Error("Bad response from server: ".concat(a.status));if(429===a.status){var c=null==(b=a.headers)?void 0:b.get("x-ratelimit-reset"),d=c?1e3*parseInt(c):5e3;throw new as("Rate limit exceeded: ".concat(a.status),d)}})}});function s(d){return(0,f.__awaiter)(this,void 0,void 0,function(){var e,g;return(0,f.__generator)(this,function(h){var i,l,m,o,q,s;return(0,n.isOffline)()?(j.push(d),aw(!1,j,t,aw),[2,d]):(k.add(d),e=d.event.type.charAt(0),g=(0,ap.toFacade)(d.event).json(),"track"===d.event.type&&delete g.traits,"alias"===d.event.type&&(i=g,s=a.user(),i.previousId=null!=(o=null!=(m=null!=(l=i.previousId)?l:i.from)?m:s.id())?o:s.anonymousId(),i.userId=null!=(q=i.userId)?q:i.to,delete i.from,delete i.to,g=i),j.getAttempts(d)>=j.maxAttempts)?(k.delete(d),[2,d]):[2,r.dispatch("".concat(p,"/").concat(e),function(a,b,c,d,e){var g,h=a.user();delete b.options,b.writeKey=null==c?void 0:c.apiKey,b.userId=b.userId||h.id(),b.anonymousId=b.anonymousId||h.anonymousId(),b.sentAt=new Date;var i=a.queue.failedInitializations||[];i.length>0&&(b._metadata={failedInitializations:i}),null!=e&&(e.attempts>1&&(b._metadata=(0,f.__assign)((0,f.__assign)({},b._metadata),{retryCount:e.attempts})),e.attempts++);var j=[],k=[];for(var l in d){var m=d[l];"Segment.io"===l&&j.push(l),"bundled"===m.bundlingStatus&&j.push(l),"unbundled"===m.bundlingStatus&&k.push(l)}for(var n=0,o=(null==c?void 0:c.unbundledIntegrations)||[];n<o.length;n++){var p=o[n];k.includes(p)||k.push(p)}var q=null!=(g=null==c?void 0:c.maybeBundledConfigIds)?g:{},r=[];return j.sort().forEach(function(a){var b;(null!=(b=q[a])?b:[]).forEach(function(a){r.push(a)})}),(null==c?void 0:c.addBundledMetadata)!==!1&&(b._metadata=(0,f.__assign)((0,f.__assign)({},b._metadata),{bundled:j.sort(),unbundled:k.sort(),bundledIds:r})),b}(a,g,b,c,d)).then(function(){return d}).catch(function(a){if(d.log("error","Error sending event",a),"RateLimitError"===a.name){var b=a.retryTimeout;j.pushWithBackoff(d,b)}else j.pushWithBackoff(d);return aw(!1,j,t,aw),d}).finally(function(){k.delete(d)})]})})}var t={metadata:{writeKey:i,apiHost:l,protocol:m},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:s,identify:s,page:s,alias:s,group:s,screen:s};return j.todo&&aw(!1,j,t,aw),t}(d,y["Segment.io"],c.integrations)];case 13:C.apply(B,[F.sent()]),F.label=14;case 14:return[4,d.register.apply(d,(0,f.__spreadArray)((0,f.__spreadArray)([],A,!1),q,!1))];case 15:return D=F.sent(),[4,(0,f.__awaiter)(void 0,void 0,void 0,function(){var a,b;return(0,f.__generator)(this,function(c){switch(c.label){case 0:a=0,b=k.getAndRemove("register"),c.label=1;case 1:if(!(a<b.length))return[3,4];return[4,an(d,b[a]).catch(console.error)];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})];case 16:if(F.sent(),!Object.entries(null!=(p=c.enabledMiddleware)?p:{}).some(function(a){return a[1]}))return[3,18];return[4,a.A(45309).then(function(a){var b=a.remoteMiddlewares;return(0,f.__awaiter)(E,void 0,void 0,function(){return(0,f.__generator)(this,function(a){switch(a.label){case 0:return[4,b(D,c,e.obfuscate)];case 1:return[2,Promise.all(a.sent().map(function(a){return d.addSourceMiddleware(a)}))]}})})})];case 17:F.sent(),F.label=18;case 18:return[4,(0,f.__awaiter)(void 0,void 0,void 0,function(){var a,b;return(0,f.__generator)(this,function(c){switch(c.label){case 0:a=0,b=k.getAndRemove("addSourceMiddleware"),c.label=1;case 1:if(!(a<b.length))return[3,4];return[4,an(d,b[a]).catch(console.error)];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})];case 19:return F.sent(),[2,D]}})})}(b.writeKey,u,x,c,y,z,d)];case 6:return B=C.sent(),x.initialized=!0,x.emit("initialize",b,c),[4,function(a,b,c){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(d){switch(d.label){case 0:var e,g;return[4,(e=a,g=b,(0,f.__awaiter)(void 0,void 0,void 0,function(){return(0,f.__generator)(this,function(a){switch(a.label){case 0:if(!g.includes("ajs_"))return[3,2];return[4,e.queryString(g).catch(console.error)];case 1:a.sent(),a.label=2;case 2:return[2]}})}))];case 1:return d.sent(),ai(a,c),[2]}})})}(x,s,d)];case 7:return C.sent(),[2,[x,B]]}})})}(c[0],c[1],b)})})||this)._resolveLoadStart=function(a,b){return i([a,b])},c}return(0,f.__extends)(c,b),c.prototype.load=function(a,b){return void 0===b&&(b={}),this._resolveLoadStart(a,b),this},c.load=function(a,b){return void 0===b&&(b={}),new c().load(a,b)},c.standalone=function(a,b){return c.load({writeKey:a},b).then(function(a){return a[0]})},c}(ao),aV=a.i(72568);class aW{constructor(){(0,e.default)(this,"segment",void 0),(0,e.default)(this,"globalProperties",{}),(0,e.default)(this,"enabled",!0)}init(){if(!this.isSkipped()){if(this.segment)throw Error("Analytics already initialized");this.segment=new aU,this.segment.load({writeKey:"f6LbNqCeVRf512ggdME4b6CyflhF1tsX"},{user:{cookie:{key:"web3auth_ajs_user_id"},localStorage:{key:"web3auth_ajs_user_traits"}},globalAnalyticsKey:"web3auth_analytics"}).then(()=>(aV.log.debug("Analytics initialized"),!0)).catch(a=>{aV.log.error("Failed to initialize Analytics",a)})}}enable(){this.enabled=!0}disable(){this.enabled=!1}setGlobalProperties(a){this.globalProperties=(0,d.default)((0,d.default)({},this.globalProperties),a)}async identify(a,b){if(this.enabled&&!this.isSkipped())try{return this.getSegment().identify(a,(0,d.default)({},b))}catch(b){aV.log.error(`Failed to identify user ${a} in analytics`,b)}}async track(a,b){if(this.enabled&&!this.isSkipped())try{return this.getSegment().track(a,(0,d.default)((0,d.default)({},b),this.globalProperties))}catch(b){aV.log.error(`Failed to track event ${a}`,b)}}getSegment(){if(!this.segment)throw aV.log.error("Analytics not initialized. Call Analytics.init() first."),Error("Analytics not initialized. Call Analytics.init() first.");return this.segment}isSkipped(){let a=window.location.origin;return!!(a.startsWith("http://")||a.includes("localhost"))}}let aX={SDK_INITIALIZATION_COMPLETED:"SDK Initialization Completed",SDK_INITIALIZATION_FAILED:"SDK Initialization Failed",CONNECTION_STARTED:"Connection Started",CONNECTION_COMPLETED:"Connection Completed",CONNECTION_FAILED:"Connection Failed",IDENTITY_TOKEN_STARTED:"Identity Token Started",IDENTITY_TOKEN_COMPLETED:"Identity Token Completed",IDENTITY_TOKEN_FAILED:"Identity Token Failed",MFA_ENABLEMENT_STARTED:"MFA Enablement Started",MFA_ENABLEMENT_COMPLETED:"MFA Enablement Completed",MFA_ENABLEMENT_FAILED:"MFA Enablement Failed",MFA_MANAGEMENT_SELECTED:"MFA Management Selected",MFA_MANAGEMENT_FAILED:"MFA Management Failed",LOGIN_MODAL_OPENED:"Login Modal Opened",LOGIN_MODAL_CLOSED:"Login Modal Closed",SOCIAL_LOGIN_SELECTED:"Social Login Selected",EXTERNAL_WALLET_SELECTED:"External Wallet Selected",EXTERNAL_WALLET_LIST_EXPANDED:"External Wallet List Expanded",WALLET_UI_CLICKED:"Wallet UI Clicked",WALLET_CONNECT_SCANNER_CLICKED:"Wallet Connect Scanner Clicked",WALLET_FUNDING_CLICKED:"Wallet Funding Clicked",WALLET_CHECKOUT_CLICKED:"Wallet Checkout Clicked",WALLET_RECEIVE_CLICKED:"Wallet Receive Clicked",WALLET_SWAP_CLICKED:"Wallet Swap Clicked"},aY={REACT_HOOKS:"React Hooks",VUE_COMPOSABLES:"Vue Composables",NATIVE_SDK:"Native SDK"},aZ={WEB_NO_MODAL:"Web NoModal",WEB_MODAL:"Web Modal"};a.s(["ANALYTICS_EVENTS",()=>aX,"ANALYTICS_INTEGRATION_TYPE",()=>aY,"ANALYTICS_SDK_TYPE",()=>aZ,"Analytics",()=>aW],54176)},98549,a=>{"use strict";var b=a.i(67364);let c=a=>{let{document:b}=a,c=b.querySelector('head > meta[property="og:site_name"]');if(c)return c.content;let d=b.querySelector('head > meta[name="title"]');return d?d.content:b.title&&b.title.length>0?b.title:a.location.hostname};function d(a){return new Promise((b,c)=>{try{let c=document.createElement("img");c.onload=()=>b(!0),c.onerror=()=>b(!1),c.src=a}catch(a){c(a)}})}async function e(a){let{document:b}=a,c=b.querySelector('head > link[rel="shortcut icon"]');if(c&&await d(c.href)||(c=Array.from(b.querySelectorAll('head > link[rel="icon"]')).find(a=>!!a.href)||null)&&await d(c.href))return c.href}function f(a){let[c,d]=a.split(".");return{header:JSON.parse((0,b.safeatob)(c)),payload:JSON.parse((0,b.safeatob)(d))}}a.s(["getSiteIcon",()=>e,"getSiteName",()=>c,"parseToken",()=>f])}];

//# sourceMappingURL=node_modules_%40web3auth_no-modal_dist_lib_esm_cc96d1a9._.js.map