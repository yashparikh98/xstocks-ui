module.exports=[97894,(a,b,c)=>{b.exports=function a(b,c){if(b&&c)return a(b)(c);if("function"!=typeof b)throw TypeError("need wrapper function");return Object.keys(b).forEach(function(a){d[a]=b[a]}),d;function d(){for(var a=Array(arguments.length),c=0;c<a.length;c++)a[c]=arguments[c];var d=b.apply(this,a),e=a[a.length-1];return"function"==typeof d&&d!==e&&Object.keys(e).forEach(function(a){d[a]=e[a]}),d}}},45713,(a,b,c)=>{var d=a.r(97894);function e(a){var b=function(){return b.called?b.value:(b.called=!0,b.value=a.apply(this,arguments))};return b.called=!1,b}function f(a){var b=function(){if(b.called)throw Error(b.onceError);return b.called=!0,b.value=a.apply(this,arguments)};return b.onceError=(a.name||"Function wrapped with `once`")+" shouldn't be called more than once",b.called=!1,b}b.exports=d(e),b.exports.strict=d(f),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return f(this)},configurable:!0})})},75444,(a,b,c)=>{var d=a.r(45713),e=function(){},f=a.g.Bare?queueMicrotask:process.nextTick.bind(process),g=function(a,b,c){if("function"==typeof b)return g(a,null,b);b||(b={}),c=d(c||e);var h=a._writableState,i=a._readableState,j=b.readable||!1!==b.readable&&a.readable,k=b.writable||!1!==b.writable&&a.writable,l=!1,m=function(){a.writable||n()},n=function(){k=!1,j||c.call(a)},o=function(){j=!1,k||c.call(a)},p=function(b){c.call(a,b?Error("exited with error code: "+b):null)},q=function(b){c.call(a,b)},r=function(){f(s)},s=function(){if(!l&&(j&&!(i&&i.ended&&!i.destroyed)||k&&!(h&&h.ended&&!h.destroyed)))return c.call(a,Error("premature close"))},t=function(){a.req.on("finish",n)};return a.setHeader&&"function"==typeof a.abort?(a.on("complete",n),a.on("abort",r),a.req?t():a.on("request",t)):k&&!h&&(a.on("end",m),a.on("close",m)),a.stdio&&Array.isArray(a.stdio)&&3===a.stdio.length&&a.on("exit",p),a.on("end",o),a.on("finish",n),!1!==b.error&&a.on("error",q),a.on("close",r),function(){l=!0,a.removeListener("complete",n),a.removeListener("abort",r),a.removeListener("request",t),a.req&&a.req.removeListener("finish",n),a.removeListener("end",m),a.removeListener("close",m),a.removeListener("finish",n),a.removeListener("exit",p),a.removeListener("end",o),a.removeListener("error",q),a.removeListener("close",r)}};b.exports=g},41162,(a,b,c)=>{var d,e=a.r(45713),f=a.r(75444);try{d=a.r(22734)}catch(a){}var g=function(){},h="undefined"!=typeof process&&/^v?\.0/.test(process.version),i=function(a){return"function"==typeof a},j=function(a,b,c,j){j=e(j);var k=!1;a.on("close",function(){k=!0}),f(a,{readable:b,writable:c},function(a){if(a)return j(a);k=!0,j()});var l=!1;return function(b){if(!k&&!l){if(l=!0,h&&d&&(a instanceof(d.ReadStream||g)||a instanceof(d.WriteStream||g))&&i(a.close))return a.close(g);if(a.setHeader&&i(a.abort))return a.abort();if(i(a.destroy))return a.destroy();j(b||Error("stream was destroyed"))}}},k=function(a){a()},l=function(a,b){return a.pipe(b)};b.exports=function(){var a,b=Array.prototype.slice.call(arguments),c=i(b[b.length-1]||g)&&b.pop()||g;if(Array.isArray(b[0])&&(b=b[0]),b.length<2)throw Error("pump requires two streams per minimum");var d=b.map(function(e,f){var g=f<b.length-1;return j(e,g,f>0,function(b){a||(a=b),b&&d.forEach(k),g||(d.forEach(k),c(a))})});return b.reduce(l)}},94939,(a,b,c)=>{"use strict";b.exports=function a(b,c){if(b===c)return!0;if(b&&c&&"object"==typeof b&&"object"==typeof c){if(b.constructor!==c.constructor)return!1;if(Array.isArray(b)){if((d=b.length)!=c.length)return!1;for(e=d;0!=e--;)if(!a(b[e],c[e]))return!1;return!0}if(b.constructor===RegExp)return b.source===c.source&&b.flags===c.flags;if(b.valueOf!==Object.prototype.valueOf)return b.valueOf()===c.valueOf();if(b.toString!==Object.prototype.toString)return b.toString()===c.toString();if((d=(f=Object.keys(b)).length)!==Object.keys(c).length)return!1;for(e=d;0!=e--;)if(!Object.prototype.hasOwnProperty.call(c,f[e]))return!1;for(e=d;0!=e--;){var d,e,f,g=f[e];if(!a(b[g],c[g]))return!1}return!0}return b!=b&&c!=c}},18548,a=>{"use strict";let b,c;a.s([],31480),a.i(31480);var d,e,f=a.i(59353),g=a.i(95851),h=a.i(41415),i=a.i(16148),j=a.i(77832),k=a.i(57162);let l=BigInt(0),m=BigInt(1);function n(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name}function o(a){if(!n(a))throw Error("Uint8Array expected")}function p(a,b){if("boolean"!=typeof b)throw Error(a+" boolean expected, got "+b)}function q(a){let b=a.toString(16);return 1&b.length?"0"+b:b}function r(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);return""===a?l:BigInt("0x"+a)}let s="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,t=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function u(a){if(o(a),s)return a.toHex();let b="";for(let c=0;c<a.length;c++)b+=t[a[c]];return b}function v(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:void 0}function w(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(s)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=v(a.charCodeAt(e)),f=v(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}function x(a){return r(u(a))}function y(a){return o(a),r(u(Uint8Array.from(a).reverse()))}function z(a,b){return w(a.toString(16).padStart(2*b,"0"))}function A(a,b){return z(a,b).reverse()}function B(a,b,c){let d;if("string"==typeof b)try{d=w(b)}catch(b){throw Error(a+" must be hex string or Uint8Array, cause: "+b)}else if(n(b))d=Uint8Array.from(b);else throw Error(a+" must be hex string or Uint8Array");let e=d.length;if("number"==typeof c&&e!==c)throw Error(a+" of length "+c+" expected, got "+e);return d}function C(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];o(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c}let D=a=>"bigint"==typeof a&&l<=a;function E(a,b,c){return D(a)&&D(b)&&D(c)&&b<=a&&a<c}function F(a,b,c,d){if(!E(b,c,d))throw Error("expected valid "+a+": "+c+" <= n < "+d+", got "+b)}let G=a=>(m<<BigInt(a))-m,H=a=>new Uint8Array(a),I={bigint:a=>"bigint"==typeof a,function:a=>"function"==typeof a,boolean:a=>"boolean"==typeof a,string:a=>"string"==typeof a,stringOrUint8Array:a=>"string"==typeof a||n(a),isSafeInteger:a=>Number.isSafeInteger(a),array:a=>Array.isArray(a),field:(a,b)=>b.Fp.isValid(a),hash:a=>"function"==typeof a&&Number.isSafeInteger(a.outputLen)};function J(a,b,c={}){let d=(b,c,d)=>{let e=I[c];if("function"!=typeof e)throw Error("invalid validator function");let f=a[b];if((!d||void 0!==f)&&!e(f,a))throw Error("param "+String(b)+" is invalid. Expected "+c+", got "+f)};for(let[a,c]of Object.entries(b))d(a,c,!1);for(let[a,b]of Object.entries(c))d(a,b,!0);return a}function K(a){let b=new WeakMap;return(c,...d)=>{let e=b.get(c);if(void 0!==e)return e;let f=a(c,...d);return b.set(c,f),f}}let L=BigInt(0),M=BigInt(1),N=BigInt(2),O=BigInt(3),P=BigInt(4),Q=BigInt(5),R=BigInt(8);function S(a,b){let c=a%b;return c>=L?c:b+c}function T(a,b,c){let d=a;for(;b-- >L;)d*=d,d%=c;return d}function U(a,b){if(a===L)throw Error("invert: expected non-zero number");if(b<=L)throw Error("invert: expected positive modulus, got "+b);let c=S(a,b),d=b,e=L,f=M,g=M,h=L;for(;c!==L;){let a=d/c,b=d%c,i=e-g*a,j=f-h*a;d=c,c=b,e=g,f=h,g=i,h=j}if(d!==M)throw Error("invert: does not exist");return S(e,b)}let V=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function W(a){return J(a,V.reduce((a,b)=>(a[b]="function",a),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function X(a,b,c=!1){let d=Array(b.length).fill(c?a.ZERO:void 0),e=b.reduce((b,c,e)=>a.is0(c)?b:(d[e]=b,a.mul(b,c)),a.ONE),f=a.inv(e);return b.reduceRight((b,c,e)=>a.is0(c)?b:(d[e]=a.mul(b,d[e]),a.mul(b,c)),f),d}function Y(a,b){let c=function(a,b){let c=(a.ORDER-M)/N,d=a.pow(b,c),e=a.eql(d,a.ONE),f=a.eql(d,a.ZERO),g=a.eql(d,a.neg(a.ONE));if(!e&&!f&&!g)throw Error("Cannot find square root: probably non-prime P");return e?1:f?0:-1}(a,b);return 0===c||1===c}function Z(a,b){void 0!==b&&(0,j.anumber)(b);let c=void 0!==b?b:a.toString(2).length,d=Math.ceil(c/8);return{nBitLength:c,nByteLength:d}}function $(a,b,c=!1,d={}){let e;if(a<=L)throw Error("invalid field: expected ORDER > 0, got "+a);let{nBitLength:f,nByteLength:g}=Z(a,b);if(g>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let h=Object.freeze({ORDER:a,isLE:c,BITS:f,BYTES:g,MASK:G(f),ZERO:L,ONE:M,create:b=>S(b,a),isValid:b=>{if("bigint"!=typeof b)throw Error("invalid field element: expected bigint, got "+typeof b);return L<=b&&b<a},is0:a=>a===L,isOdd:a=>(a&M)===M,neg:b=>S(-b,a),eql:(a,b)=>a===b,sqr:b=>S(b*b,a),add:(b,c)=>S(b+c,a),sub:(b,c)=>S(b-c,a),mul:(b,c)=>S(b*c,a),pow:(a,b)=>(function(a,b,c){if(c<L)throw Error("invalid exponent, negatives unsupported");if(c===L)return a.ONE;if(c===M)return b;let d=a.ONE,e=b;for(;c>L;)c&M&&(d=a.mul(d,e)),e=a.sqr(e),c>>=M;return d})(h,a,b),div:(b,c)=>S(b*U(c,a),a),sqrN:a=>a*a,addN:(a,b)=>a+b,subN:(a,b)=>a-b,mulN:(a,b)=>a*b,inv:b=>U(b,a),sqrt:d.sqrt||(b=>(e||(e=a%P===O?function(b,c){let d=b.pow(c,(a+M)/P);if(!b.eql(b.sqr(d),c))throw Error("Cannot find square root");return d}:a%R===Q?function(b,c){let d=b.mul(c,N),e=b.pow(d,(a-Q)/R),f=b.mul(c,e),g=b.mul(b.mul(f,N),e),h=b.mul(f,b.sub(g,b.ONE));if(!b.eql(b.sqr(h),c))throw Error("Cannot find square root");return h}:function(a){let b=a-M,c=0;for(;b%N===L;)b/=N,c++;let d=N,e=$(a);for(;d<a&&Y(e,d);)if(d++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===c){let b=(a+M)/P;return function(a,c){let d=a.pow(c,b);if(!a.eql(a.sqr(d),c))throw Error("Cannot find square root");return d}}let f=(b+M)/N;return function(a,e){if(!Y(a,e))throw Error("Cannot find square root");let g=c,h=a.pow(a.mul(a.ONE,d),b),i=a.pow(e,f),j=a.pow(e,b);for(;!a.eql(j,a.ONE);){if(a.eql(j,a.ZERO))return a.ZERO;let b=1;for(let c=a.sqr(j);b<g&&!a.eql(c,a.ONE);b++)c=a.sqr(c);let c=a.pow(h,M<<BigInt(g-b-1));h=a.sqr(c),i=a.mul(i,c),j=a.mul(j,h),g=b}return i}}(a)),e(h,b))),toBytes:a=>c?A(a,g):z(a,g),fromBytes:a=>{if(a.length!==g)throw Error("Field.fromBytes: expected "+g+" bytes, got "+a.length);return c?y(a):x(a)},invertBatch:a=>X(h,a),cmov:(a,b,c)=>c?b:a});return Object.freeze(h)}function _(a){if("bigint"!=typeof a)throw Error("field order must be bigint");return Math.ceil(a.toString(2).length/8)}function aa(a){let b=_(a);return b+Math.ceil(b/2)}let ab=BigInt(0),ac=BigInt(1);function ad(a,b){let c=b.negate();return a?c:b}function ae(a,b){if(!Number.isSafeInteger(a)||a<=0||a>b)throw Error("invalid window size, expected [1.."+b+"], got W="+a)}function af(a,b){ae(a,b);let c=Math.ceil(b/a)+1,d=2**(a-1),e=2**a;return{windows:c,windowSize:d,mask:G(a),maxNumber:e,shiftBy:BigInt(a)}}function ag(a,b,c){let{windowSize:d,mask:e,maxNumber:f,shiftBy:g}=c,h=Number(a&e),i=a>>g;h>d&&(h-=f,i+=ac);let j=b*d,k=j+Math.abs(h)-1,l=0===h;return{nextN:i,offset:k,isZero:l,isNeg:h<0,isNegF:b%2!=0,offsetF:j}}let ah=new WeakMap,ai=new WeakMap;function aj(a){return ai.get(a)||1}function ak(a){return W(a.Fp),J(a,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Z(a.n,a.nBitLength),...a,...{p:a.Fp.ORDER}})}function al(a){void 0!==a.lowS&&p("lowS",a.lowS),void 0!==a.prehash&&p("prehash",a.prehash)}let am={Err:class extends Error{constructor(a=""){super(a)}},_tlv:{encode:(a,b)=>{let{Err:c}=am;if(a<0||a>256)throw new c("tlv.encode: wrong tag");if(1&b.length)throw new c("tlv.encode: unpadded data");let d=b.length/2,e=q(d);if(e.length/2&128)throw new c("tlv.encode: long form length too big");let f=d>127?q(e.length/2|128):"";return q(a)+f+e+b},decode(a,b){let{Err:c}=am,d=0;if(a<0||a>256)throw new c("tlv.encode: wrong tag");if(b.length<2||b[d++]!==a)throw new c("tlv.decode: wrong tlv");let e=b[d++],f=0;if(128&e){let a=127&e;if(!a)throw new c("tlv.decode(long): indefinite length not supported");if(a>4)throw new c("tlv.decode(long): byte length is too big");let g=b.subarray(d,d+a);if(g.length!==a)throw new c("tlv.decode: length bytes not complete");if(0===g[0])throw new c("tlv.decode(long): zero leftmost byte");for(let a of g)f=f<<8|a;if(d+=a,f<128)throw new c("tlv.decode(long): not minimal encoding")}else f=e;let g=b.subarray(d,d+f);if(g.length!==f)throw new c("tlv.decode: wrong value length");return{v:g,l:b.subarray(d+f)}}},_int:{encode(a){let{Err:b}=am;if(a<an)throw new b("integer: negative integers are not allowed");let c=q(a);if(8&Number.parseInt(c[0],16)&&(c="00"+c),1&c.length)throw new b("unexpected DER parsing assertion: unpadded hex");return c},decode(a){let{Err:b}=am;if(128&a[0])throw new b("invalid signature integer: negative");if(0===a[0]&&!(128&a[1]))throw new b("invalid signature integer: unnecessary leading zero");return x(a)}},toSig(a){let{Err:b,_int:c,_tlv:d}=am,e=B("signature",a),{v:f,l:g}=d.decode(48,e);if(g.length)throw new b("invalid signature: left bytes after parsing");let{v:h,l:i}=d.decode(2,f),{v:j,l:k}=d.decode(2,i);if(k.length)throw new b("invalid signature: left bytes after parsing");return{r:c.decode(h),s:c.decode(j)}},hexFromSig(a){let{_tlv:b,_int:c}=am,d=b.encode(2,c.encode(a.r)),e=b.encode(2,c.encode(a.s));return b.encode(48,d+e)}},an=BigInt(0),ao=BigInt(1),ap=BigInt(2),aq=BigInt(3),ar=BigInt(4),as=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),at=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),au=BigInt(1),av=BigInt(2),aw=(a,b)=>(a+b/av)/b,ax=$(as,void 0,void 0,{sqrt:function(a){let b=BigInt(3),c=BigInt(6),d=BigInt(11),e=BigInt(22),f=BigInt(23),g=BigInt(44),h=BigInt(88),i=a*a*a%as,j=i*i*a%as,k=T(j,b,as)*j%as,l=T(k,b,as)*j%as,m=T(l,av,as)*i%as,n=T(m,d,as)*m%as,o=T(n,e,as)*n%as,p=T(o,g,as)*o%as,q=T(p,h,as)*p%as,r=T(q,g,as)*o%as,s=T(r,b,as)*j%as,t=T(s,f,as)*n%as,u=T(t,c,as)*i%as,v=T(u,av,as);if(!ax.eql(ax.sqr(v),a))throw Error("Cannot find square root");return v}}),ay=(d={a:BigInt(0),b:BigInt(7),Fp:ax,n:at,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:a=>{let b=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),c=-au*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),d=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),e=BigInt("0x100000000000000000000000000000000"),f=aw(b*a,at),g=aw(-c*a,at),h=S(a-f*b-g*d,at),i=S(-f*c-g*b,at),j=h>e,k=i>e;if(j&&(h=at-h),k&&(i=at-i),h>e||i>e)throw Error("splitScalar: Endomorphism failed, k="+a);return{k1neg:j,k1:h,k2neg:k,k2:i}}}},e=i.sha256,{...(b=a=>(function(a){let b,c=(J(b=ak(a),{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...b})),{Fp:d,n:e}=c,f=d.BYTES+1,g=2*d.BYTES+1;function h(a){return S(a,e)}let{ProjectivePoint:i,normPrivateKeyToScalar:j,weierstrassEquation:k,isWithinCurveOrder:o}=function(a){var b;let c=function(a){let b=ak(a);J(b,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:c,Fp:d,a:e}=b;if(c){if(!d.eql(e,d.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof c||"bigint"!=typeof c.beta||"function"!=typeof c.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...b})}(a),{Fp:d}=c,e=$(c.n,c.nBitLength),f=c.toBytes||((a,b,c)=>{let e=b.toAffine();return C(Uint8Array.from([4]),d.toBytes(e.x),d.toBytes(e.y))}),g=c.fromBytes||(a=>{let b=a.subarray(1);return{x:d.fromBytes(b.subarray(0,d.BYTES)),y:d.fromBytes(b.subarray(d.BYTES,2*d.BYTES))}});function h(a){let{a:b,b:e}=c,f=d.sqr(a),g=d.mul(f,a);return d.add(d.add(g,d.mul(a,b)),e)}if(!d.eql(d.sqr(c.Gy),h(c.Gx)))throw Error("bad generator point: equation left != right");function i(a){let b,{allowedPrivateKeyLengths:d,nByteLength:e,wrapPrivateKey:f,n:g}=c;if(d&&"bigint"!=typeof a){if(n(a)&&(a=u(a)),"string"!=typeof a||!d.includes(a.length))throw Error("invalid private key");a=a.padStart(2*e,"0")}try{b="bigint"==typeof a?a:x(B("private key",a,e))}catch(b){throw Error("invalid private key, expected hex or "+e+" bytes, got "+typeof a)}return f&&(b=S(b,g)),F("private key",b,ao,g),b}function j(a){if(!(a instanceof q))throw Error("ProjectivePoint expected")}let k=K((a,b)=>{let{px:c,py:e,pz:f}=a;if(d.eql(f,d.ONE))return{x:c,y:e};let g=a.is0();null==b&&(b=g?d.ONE:d.inv(f));let h=d.mul(c,b),i=d.mul(e,b),j=d.mul(f,b);if(g)return{x:d.ZERO,y:d.ZERO};if(!d.eql(j,d.ONE))throw Error("invZ was invalid");return{x:h,y:i}}),o=K(a=>{if(a.is0()){if(c.allowInfinityPoint&&!d.is0(a.py))return;throw Error("bad point: ZERO")}let{x:b,y:e}=a.toAffine();if(!d.isValid(b)||!d.isValid(e))throw Error("bad point: x or y not FE");let f=d.sqr(e),g=h(b);if(!d.eql(f,g))throw Error("bad point: equation left != right");if(!a.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class q{constructor(a,b,c){if(null==a||!d.isValid(a))throw Error("x required");if(null==b||!d.isValid(b)||d.is0(b))throw Error("y required");if(null==c||!d.isValid(c))throw Error("z required");this.px=a,this.py=b,this.pz=c,Object.freeze(this)}static fromAffine(a){let{x:b,y:c}=a||{};if(!a||!d.isValid(b)||!d.isValid(c))throw Error("invalid affine point");if(a instanceof q)throw Error("projective point not allowed");let e=a=>d.eql(a,d.ZERO);return e(b)&&e(c)?q.ZERO:new q(b,c,d.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(a){let b=X(d,a.map(a=>a.pz));return a.map((a,c)=>a.toAffine(b[c])).map(q.fromAffine)}static fromHex(a){let b=q.fromAffine(g(B("pointHex",a)));return b.assertValidity(),b}static fromPrivateKey(a){return q.BASE.multiply(i(a))}static msm(a,b){return function(a,b,c,d){if(!Array.isArray(c))throw Error("array expected");c.forEach((b,c)=>{if(!(b instanceof a))throw Error("invalid point at index "+c)});if(!Array.isArray(d))throw Error("array of scalars expected");if(d.forEach((a,c)=>{if(!b.isValid(a))throw Error("invalid scalar at index "+c)}),c.length!==d.length)throw Error("arrays of points and scalars must have equal length");let e=a.ZERO,f=function(a){let b;for(b=0;a>l;a>>=m,b+=1);return b}(BigInt(c.length)),g=f>12?f-3:f>4?f-2:f?2:1,h=G(g),i=Array(Number(h)+1).fill(e),j=Math.floor((b.BITS-1)/g)*g,k=e;for(let a=j;a>=0;a-=g){i.fill(e);for(let b=0;b<d.length;b++){let e=Number(d[b]>>BigInt(a)&h);i[e]=i[e].add(c[b])}let b=e;for(let a=i.length-1,c=e;a>0;a--)c=c.add(i[a]),b=b.add(c);if(k=k.add(b),0!==a)for(let a=0;a<g;a++)k=k.double()}return k}(q,e,a,b)}_setWindowSize(a){s.setWindowSize(this,a)}assertValidity(){o(this)}hasEvenY(){let{y:a}=this.toAffine();if(d.isOdd)return!d.isOdd(a);throw Error("Field doesn't support isOdd")}equals(a){j(a);let{px:b,py:c,pz:e}=this,{px:f,py:g,pz:h}=a,i=d.eql(d.mul(b,h),d.mul(f,e)),k=d.eql(d.mul(c,h),d.mul(g,e));return i&&k}negate(){return new q(this.px,d.neg(this.py),this.pz)}double(){let{a,b}=c,e=d.mul(b,aq),{px:f,py:g,pz:h}=this,i=d.ZERO,j=d.ZERO,k=d.ZERO,l=d.mul(f,f),m=d.mul(g,g),n=d.mul(h,h),o=d.mul(f,g);return o=d.add(o,o),k=d.mul(f,h),k=d.add(k,k),i=d.mul(a,k),j=d.mul(e,n),j=d.add(i,j),i=d.sub(m,j),j=d.add(m,j),j=d.mul(i,j),i=d.mul(o,i),k=d.mul(e,k),n=d.mul(a,n),o=d.sub(l,n),o=d.mul(a,o),o=d.add(o,k),k=d.add(l,l),l=d.add(k,l),l=d.add(l,n),l=d.mul(l,o),j=d.add(j,l),n=d.mul(g,h),n=d.add(n,n),l=d.mul(n,o),i=d.sub(i,l),k=d.mul(n,m),k=d.add(k,k),new q(i,j,k=d.add(k,k))}add(a){j(a);let{px:b,py:e,pz:f}=this,{px:g,py:h,pz:i}=a,k=d.ZERO,l=d.ZERO,m=d.ZERO,n=c.a,o=d.mul(c.b,aq),p=d.mul(b,g),r=d.mul(e,h),s=d.mul(f,i),t=d.add(b,e),u=d.add(g,h);t=d.mul(t,u),u=d.add(p,r),t=d.sub(t,u),u=d.add(b,f);let v=d.add(g,i);return u=d.mul(u,v),v=d.add(p,s),u=d.sub(u,v),v=d.add(e,f),k=d.add(h,i),v=d.mul(v,k),k=d.add(r,s),v=d.sub(v,k),m=d.mul(n,u),k=d.mul(o,s),m=d.add(k,m),k=d.sub(r,m),m=d.add(r,m),l=d.mul(k,m),r=d.add(p,p),r=d.add(r,p),s=d.mul(n,s),u=d.mul(o,u),r=d.add(r,s),s=d.sub(p,s),s=d.mul(n,s),u=d.add(u,s),p=d.mul(r,u),l=d.add(l,p),p=d.mul(v,u),k=d.mul(t,k),k=d.sub(k,p),p=d.mul(t,r),m=d.mul(v,m),new q(k,l,m=d.add(m,p))}subtract(a){return this.add(a.negate())}is0(){return this.equals(q.ZERO)}wNAF(a){return s.wNAFCached(this,a,q.normalizeZ)}multiplyUnsafe(a){let{endo:b,n:e}=c;F("scalar",a,an,e);let f=q.ZERO;if(a===an)return f;if(this.is0()||a===ao)return this;if(!b||s.hasPrecomputes(this))return s.wNAFCachedUnsafe(this,a,q.normalizeZ);let{k1neg:g,k1:h,k2neg:i,k2:j}=b.splitScalar(a),k=f,l=f,m=this;for(;h>an||j>an;)h&ao&&(k=k.add(m)),j&ao&&(l=l.add(m)),m=m.double(),h>>=ao,j>>=ao;return g&&(k=k.negate()),i&&(l=l.negate()),l=new q(d.mul(l.px,b.beta),l.py,l.pz),k.add(l)}multiply(a){let b,e,{endo:f,n:g}=c;if(F("scalar",a,ao,g),f){let{k1neg:c,k1:g,k2neg:h,k2:i}=f.splitScalar(a),{p:j,f:k}=this.wNAF(g),{p:l,f:m}=this.wNAF(i);j=s.constTimeNegate(c,j),l=s.constTimeNegate(h,l),l=new q(d.mul(l.px,f.beta),l.py,l.pz),b=j.add(l),e=k.add(m)}else{let{p:c,f:d}=this.wNAF(a);b=c,e=d}return q.normalizeZ([b,e])[0]}multiplyAndAddUnsafe(a,b,c){let d=q.BASE,e=(a,b)=>b!==an&&b!==ao&&a.equals(d)?a.multiply(b):a.multiplyUnsafe(b),f=e(this,b).add(e(a,c));return f.is0()?void 0:f}toAffine(a){return k(this,a)}isTorsionFree(){let{h:a,isTorsionFree:b}=c;if(a===ao)return!0;if(b)return b(q,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:a,clearCofactor:b}=c;return a===ao?this:b?b(q,this):this.multiplyUnsafe(c.h)}toRawBytes(a=!0){return p("isCompressed",a),this.assertValidity(),f(q,this,a)}toHex(a=!0){return p("isCompressed",a),u(this.toRawBytes(a))}}q.BASE=new q(c.Gx,c.Gy,d.ONE),q.ZERO=new q(d.ZERO,d.ONE,d.ZERO);let r=c.nBitLength,s=(b=c.endo?Math.ceil(r/2):r,{constTimeNegate:ad,hasPrecomputes:a=>1!==aj(a),unsafeLadder(a,b,c=q.ZERO){let d=a;for(;b>ab;)b&ac&&(c=c.add(d)),d=d.double(),b>>=ac;return c},precomputeWindow(a,c){let{windows:d,windowSize:e}=af(c,b),f=[],g=a,h=g;for(let a=0;a<d;a++){h=g,f.push(h);for(let a=1;a<e;a++)h=h.add(g),f.push(h);g=h.double()}return f},wNAF(a,c,d){let e=q.ZERO,f=q.BASE,g=af(a,b);for(let a=0;a<g.windows;a++){let{nextN:b,offset:h,isZero:i,isNeg:j,isNegF:k,offsetF:l}=ag(d,a,g);d=b,i?f=f.add(ad(k,c[l])):e=e.add(ad(j,c[h]))}return{p:e,f}},wNAFUnsafe(a,c,d,e=q.ZERO){let f=af(a,b);for(let a=0;a<f.windows&&d!==ab;a++){let{nextN:b,offset:g,isZero:h,isNeg:i}=ag(d,a,f);if(d=b,!h){let a=c[g];e=e.add(i?a.negate():a)}}return e},getPrecomputes(a,b,c){let d=ah.get(b);return d||(d=this.precomputeWindow(b,a),1!==a&&ah.set(b,c(d))),d},wNAFCached(a,b,c){let d=aj(a);return this.wNAF(d,this.getPrecomputes(d,a,c),b)},wNAFCachedUnsafe(a,b,c,d){let e=aj(a);return 1===e?this.unsafeLadder(a,b,d):this.wNAFUnsafe(e,this.getPrecomputes(e,a,c),b,d)},setWindowSize(a,c){ae(c,b),ai.set(a,c),ah.delete(a)}});return{CURVE:c,ProjectivePoint:q,normPrivateKeyToScalar:i,weierstrassEquation:h,isWithinCurveOrder:function(a){return E(a,ao,c.n)}}}({...c,toBytes(a,b,c){let e=b.toAffine(),f=d.toBytes(e.x);return(p("isCompressed",c),c)?C(Uint8Array.from([b.hasEvenY()?2:3]),f):C(Uint8Array.from([4]),f,d.toBytes(e.y))},fromBytes(a){let b=a.length,c=a[0],e=a.subarray(1);if(b===f&&(2===c||3===c)){let a,b=x(e);if(!E(b,ao,d.ORDER))throw Error("Point is not on curve");let f=k(b);try{a=d.sqrt(f)}catch(a){throw Error("Point is not on curve"+(a instanceof Error?": "+a.message:""))}return(1&c)==1!=((a&ao)===ao)&&(a=d.neg(a)),{x:b,y:a}}if(b===g&&4===c)return{x:d.fromBytes(e.subarray(0,d.BYTES)),y:d.fromBytes(e.subarray(d.BYTES,2*d.BYTES))};throw Error("invalid Point, expected length of "+f+", or uncompressed "+g+", got "+b)}}),q=a=>u(z(a,c.nByteLength)),r=(a,b,c)=>x(a.slice(b,c));class s{constructor(a,b,c){F("r",a,ao,e),F("s",b,ao,e),this.r=a,this.s=b,null!=c&&(this.recovery=c),Object.freeze(this)}static fromCompact(a){let b=c.nByteLength;return new s(r(a=B("compactSignature",a,2*b),0,b),r(a,b,2*b))}static fromDER(a){let{r:b,s:c}=am.toSig(B("DER",a));return new s(b,c)}assertValidity(){}addRecoveryBit(a){return new s(this.r,this.s,a)}recoverPublicKey(a){let{r:b,s:f,recovery:g}=this,j=D(B("msgHash",a));if(null==g||![0,1,2,3].includes(g))throw Error("recovery id invalid");let k=2===g||3===g?b+c.n:b;if(k>=d.ORDER)throw Error("recovery id 2 or 3 invalid");let l=(1&g)==0?"02":"03",m=i.fromHex(l+q(k)),n=U(k,e),o=h(-j*n),p=h(f*n),r=i.BASE.multiplyAndAddUnsafe(m,o,p);if(!r)throw Error("point at infinify");return r.assertValidity(),r}hasHighS(){return this.s>e>>ao}normalizeS(){return this.hasHighS()?new s(this.r,h(-this.s),this.recovery):this}toDERRawBytes(){return w(this.toDERHex())}toDERHex(){return am.hexFromSig(this)}toCompactRawBytes(){return w(this.toCompactHex())}toCompactHex(){return q(this.r)+q(this.s)}}function t(a){let b=n(a),c="string"==typeof a,d=(b||c)&&a.length;return b?d===f||d===g:c?d===2*f||d===2*g:a instanceof i}let v=c.bits2int||function(a){if(a.length>8192)throw Error("input is too large");let b=x(a),d=8*a.length-c.nBitLength;return d>0?b>>BigInt(d):b},D=c.bits2int_modN||function(a){return h(v(a))},I=G(c.nBitLength);function L(a){return F("num < 2^"+c.nBitLength,a,an,I),z(a,c.nByteLength)}let N={lowS:c.lowS,prehash:!1},O={lowS:c.lowS,prehash:!1};return i.BASE._setWindowSize(8),{CURVE:c,getPublicKey:function(a,b=!0){return i.fromPrivateKey(a).toRawBytes(b)},getSharedSecret:function(a,b,c=!0){if(t(a))throw Error("first arg must be private key");if(!t(b))throw Error("second arg must be public key");return i.fromHex(b).multiply(j(a)).toRawBytes(c)},sign:function(a,b,f=N){let{seed:g,k2sig:k}=function(a,b,f=N){if(["recovered","canonical"].some(a=>a in f))throw Error("sign() legacy options not supported");let{hash:g,randomBytes:k}=c,{lowS:l,prehash:m,extraEntropy:n}=f;null==l&&(l=!0),a=B("msgHash",a),al(f),m&&(a=B("prehashed msgHash",g(a)));let p=D(a),q=j(b),r=[L(q),L(p)];if(null!=n&&!1!==n){let a=!0===n?k(d.BYTES):n;r.push(B("extraEntropy",a))}return{seed:C(...r),k2sig:function(a){var b;let c=v(a);if(!o(c))return;let d=U(c,e),f=i.BASE.multiply(c).toAffine(),g=h(f.x);if(g===an)return;let j=h(d*h(p+g*q));if(j===an)return;let k=2*(f.x!==g)|Number(f.y&ao),m=j;return l&&j>e>>ao&&(m=(b=j)>e>>ao?h(-b):b,k^=1),new s(g,m,k)}}}(a,b,f);return(function(a,b,c){if("number"!=typeof a||a<2)throw Error("hashLen must be a number");if("number"!=typeof b||b<2)throw Error("qByteLen must be a number");if("function"!=typeof c)throw Error("hmacFn must be a function");let d=H(a),e=H(a),f=0,g=()=>{d.fill(1),e.fill(0),f=0},h=(...a)=>c(e,d,...a),i=(a=H(0))=>{let b;if(e=h((b=[0],Uint8Array.from(b)),a),d=h(),0!==a.length){let b;e=h((b=[1],Uint8Array.from(b)),a),d=h()}},j=()=>{if(f++>=1e3)throw Error("drbg: tried 1000 values");let a=0,c=[];for(;a<b;){let b=(d=h()).slice();c.push(b),a+=d.length}return C(...c)};return(a,b)=>{let c;for(g(),i(a);!(c=b(j()));)i();return g(),c}})(c.hash.outputLen,c.nByteLength,c.hmac)(g,k)},verify:function(a,b,d,f=O){let g,j;b=B("msgHash",b),d=B("publicKey",d);let{lowS:k,prehash:l,format:m}=f;if(al(f),"strict"in f)throw Error("options.strict was renamed to lowS");if(void 0!==m&&"compact"!==m&&"der"!==m)throw Error("format must be compact or der");let o="string"==typeof a||n(a),p=!o&&!m&&"object"==typeof a&&null!==a&&"bigint"==typeof a.r&&"bigint"==typeof a.s;if(!o&&!p)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(p&&(j=new s(a.r,a.s)),o){try{"compact"!==m&&(j=s.fromDER(a))}catch(a){if(!(a instanceof am.Err))throw a}j||"der"===m||(j=s.fromCompact(a))}g=i.fromHex(d)}catch(a){return!1}if(!j||k&&j.hasHighS())return!1;l&&(b=c.hash(b));let{r:q,s:r}=j,t=D(b),u=U(r,e),v=h(t*u),w=h(q*u),x=i.BASE.multiplyAndAddUnsafe(g,v,w)?.toAffine();return!!x&&h(x.x)===q},ProjectivePoint:i,Signature:s,utils:{isValidPrivateKey(a){try{return j(a),!0}catch(a){return!1}},normPrivateKeyToScalar:j,randomPrivateKey:()=>{let a=aa(c.n);return function(a,b,c=!1){let d=a.length,e=_(b),f=aa(b);if(d<16||d<f||d>1024)throw Error("expected "+f+"-1024 bytes of input, got "+d);let g=S(c?y(a):x(a),b-M)+M;return c?A(g,e):z(g,e)}(c.randomBytes(a),c.n)},precompute:(a=8,b=i.BASE)=>(b._setWindowSize(a),b.multiply(BigInt(3)),b)}}})({...d,...{hash:a,hmac:(b,...c)=>(0,k.hmac)(a,b,(0,j.concatBytes)(...c)),randomBytes:j.randomBytes}}))(e),create:b}),az=(BigInt(0),{});ay.ProjectivePoint;let aA=(c=[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(a=>a.map(a=>BigInt(a))).map(a=>Array.from(a).reverse()),(a,b)=>{let[d,e,f,g]=c.map(b=>b.reduce((b,c)=>ax.add(ax.mul(b,a),c))),[h,i]=X(ax,[e,g],!0);return a=ax.mul(d,h),b=ax.mul(b,ax.mul(f,i)),{x:a,y:b}}),aB=function(a,b){if(W(a),!a.isValid(b.A)||!a.isValid(b.B)||!a.isValid(b.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let c=function(a,b){let c=a.ORDER,d=an;for(let a=c-ao;a%ap===an;a/=ap)d+=ao;let e=d,f=ap<<e-ao-ao,g=f*ap,h=(c-ao)/g,i=(h-ao)/ap,j=g-ao,k=a.pow(b,h),l=a.pow(b,(h+ao)/ap),m=(b,c)=>{let d=k,g=a.pow(c,j),h=a.sqr(g);h=a.mul(h,c);let m=a.mul(b,h);m=a.pow(m,i),m=a.mul(m,g),g=a.mul(m,c),h=a.mul(m,b);let n=a.mul(h,g);m=a.pow(n,f);let o=a.eql(m,a.ONE);g=a.mul(h,l),m=a.mul(n,d),h=a.cmov(g,h,o),n=a.cmov(m,n,o);for(let b=e;b>ao;b--){let c=b-ap;c=ap<<c-ao;let e=a.pow(n,c),f=a.eql(e,a.ONE);g=a.mul(h,d),d=a.mul(d,d),e=a.mul(n,d),h=a.cmov(g,h,f),n=a.cmov(e,n,f)}return{isValid:o,value:h}};if(a.ORDER%ar===aq){let c=(a.ORDER-aq)/ar,d=a.sqrt(a.neg(b));m=(b,e)=>{let f=a.sqr(e),g=a.mul(b,e);f=a.mul(f,g);let h=a.pow(f,c);h=a.mul(h,g);let i=a.mul(h,d),j=a.mul(a.sqr(h),e),k=a.eql(j,b),l=a.cmov(i,h,k);return{isValid:k,value:l}}}return m}(a,b.Z);if(!a.isOdd)throw Error("Fp.isOdd is not implemented!");return d=>{let e,f,g,h,i,j,k,l;e=a.sqr(d),e=a.mul(e,b.Z),f=a.sqr(e),f=a.add(f,e),g=a.add(f,a.ONE),g=a.mul(g,b.B),h=a.cmov(b.Z,a.neg(f),!a.eql(f,a.ZERO)),h=a.mul(h,b.A),f=a.sqr(g),j=a.sqr(h),i=a.mul(j,b.A),f=a.add(f,i),f=a.mul(f,g),j=a.mul(j,h),i=a.mul(j,b.B),f=a.add(f,i),k=a.mul(e,g);let{isValid:m,value:n}=c(f,j);l=a.mul(e,d),l=a.mul(l,n),k=a.cmov(k,g,m),l=a.cmov(l,n,m);let o=a.isOdd(d)===a.isOdd(l);l=a.cmov(a.neg(l),l,o);let p=X(a,[h],!0)[0];return{x:k=a.mul(k,p),y:l}}}(ax,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:ax.create(BigInt("-11"))});!function(a,b,c){if("function"!=typeof b)throw Error("mapToCurve() must be defined")}(ay.ProjectivePoint,a=>{let{x:b,y:c}=aB(ax.create(a[0]));return aA(b,c)},(ax.ORDER,i.sha256));var aC=a.i(56415);function aD(a){let b=a.startsWith("0x")?a.substring(2):a;return(0,j.hexToBytes)(b)}function aE(a){return b=>((0,aC.abytes)(b),a(b))}let aF=aE(i.sha256);a.s(["addHexPrefix",()=>a7,"bigInt64ToBytes",()=>bm,"bigIntMax",()=>bb,"bigIntMin",()=>bc,"bigIntToAddressBytes",()=>be,"bigIntToBytes",()=>aY,"bigIntToHex",()=>ba,"bigIntToUnpaddedBytes",()=>bd,"bitsToBytes",()=>bp,"bytesToBigInt",()=>aU,"bytesToBigInt64",()=>bk,"bytesToBits",()=>bo,"bytesToHex",()=>aS,"bytesToInt",()=>aV,"bytesToInt32",()=>bj,"bytesToUnprefixedHex",()=>aP,"compareBytes",()=>bg,"concatBytes",()=>bi,"equalsBits",()=>bs,"fromSigned",()=>a5,"hexToBigInt",()=>bn,"hexToBytes",()=>aQ,"int32ToBytes",()=>bl,"intToBytes",()=>aX,"intToHex",()=>aW,"intToUnpaddedBytes",()=>bf,"matchingBitsLength",()=>br,"matchingBytesLength",()=>bq,"randomBytes",()=>bh,"setLengthLeft",()=>a$,"setLengthRight",()=>a_,"short",()=>a8,"toBytes",()=>a4,"toUnsigned",()=>a6,"unpadArray",()=>a2,"unpadBytes",()=>a1,"unpadHex",()=>a3,"unprefixedHexToBytes",()=>aR,"validateNoLeadingZeroes",()=>a9],56897);class aG extends Error{constructor(a,b,c){super(b??a.code),this.type=a,void 0!==c&&(this.stack=c)}getMetadata(){return this.type}toObject(){return{type:this.getMetadata(),message:this.message??"",stack:this.stack??"",className:this.constructor.name}}}function aH(a,b){return new aG({code:"ETHEREUMJS_DEFAULT_ERROR_CODE"},a,b)}Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function aI(a,b){return"string"==typeof a&&!!a.match(/^0x[0-9A-Fa-f]*$/)&&(void 0===b||!(b>0)||a.length===2+2*b)}let aJ=a=>{if("string"!=typeof a)throw aH(`[stripHexPrefix] input must be type 'string', received ${typeof a}`);return aI(a)?a.slice(2):a};function aK(a){let b=a;if("string"!=typeof b)throw aH(`[padToEven] value must be type 'string', received ${typeof b}`);return b.length%2&&(b=`0${b}`),b}let aL=function(a){if(!aI(a))throw aH(`This method only supports 0x-prefixed hex strings but input was: ${a}`)},aM=function(a){if(!(a instanceof Uint8Array))throw aH(`This method only supports Uint8Array but input was: ${a}`)},aN=function(a){if(!Array.isArray(a))throw aH(`This method only supports number arrays but input was: ${a}`)},aO=BigInt(0),aP=j.bytesToHex,aQ=a=>{if(!a.startsWith("0x"))throw aH("input string must be 0x prefixed");return aD(aK(aJ(a)))},aR=a=>{if(a.startsWith("0x"))throw aH("input string cannot be 0x prefixed");return aD(aK(a))},aS=a=>{let b=aP(a);return`0x${b}`},aT=[];for(let a=0;a<=65535;a++)aT[a]=BigInt(a);let aU=(a,b=!1)=>{b&&a.reverse();let c=aS(a);return"0x"===c?aO:4===c.length?aT[a[0]]:6===c.length?aT[256*a[0]+a[1]]:BigInt(c)},aV=a=>{let b=Number(aU(a));if(!Number.isSafeInteger(b))throw aH("Number exceeds 53 bits");return b},aW=a=>{if(!Number.isSafeInteger(a)||a<0)throw aH(`Received an invalid integer type: ${a}`);return`0x${a.toString(16)}`},aX=a=>aQ(aW(a)),aY=(a,b=!1)=>{let c=aQ(`0x${aK(a.toString(16))}`);return b?c.reverse():c},aZ=(a,b,c)=>c?a.length<b?new Uint8Array([...a,...new Uint8Array(b-a.length)]):a.subarray(0,b):a.length<b?new Uint8Array([...new Uint8Array(b-a.length),...a]):a.subarray(-b),a$=(a,b)=>(aM(a),aZ(a,b,!1)),a_=(a,b)=>(aM(a),aZ(a,b,!0)),a0=a=>{let b=a[0];for(;a.length>0&&"0"===b.toString();)b=(a=a.slice(1))[0];return a},a1=a=>(aM(a),a0(a)),a2=a=>(aN(a),a0(a)),a3=a=>(aL(a),`0x${a0(aJ(a))}`),a4=a=>{if(null==a)return new Uint8Array;if(Array.isArray(a)||a instanceof Uint8Array)return Uint8Array.from(a);if("string"==typeof a){if(!aI(a))throw aH(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${a}`);return aQ(a)}if("number"==typeof a)return aX(a);if("bigint"==typeof a){if(a<aO)throw aH(`Cannot convert negative bigint to Uint8Array. Given: ${a}`);let b=a.toString(16);return b.length%2&&(b="0"+b),aR(b)}if(void 0!==a.toBytes)return a.toBytes();throw aH("invalid type")},a5=a=>BigInt.asIntN(256,aU(a)),a6=a=>aY(BigInt.asUintN(256,a)),a7=a=>"string"!=typeof a||aI(a)?a:`0x${a}`,a8=(a,b=50)=>{let c=a instanceof Uint8Array?aS(a):a,d="0x"===c.slice(0,2)?b+2:b;return c.length<=d?c:c.slice(0,d)+"â€¦"},a9=a=>{for(let[b,c]of Object.entries(a))if(void 0!==c&&c.length>0&&0===c[0])throw aH(`${b} cannot have leading zeroes, received: ${aS(c)}`)},ba=a=>`0x${a.toString(16)}`,bb=(...a)=>a.reduce((a,b)=>b>a?b:a),bc=(...a)=>a.reduce((a,b)=>b<a?b:a),bd=a=>a1(aY(a)),be=(a,b=!0)=>{let c=aY(a);if(b&&c.length>20)throw Error(`Invalid address bytes length=${c.length} strict=${b}`);return a$(c,20)},bf=a=>a1(aX(a)),bg=(a,b)=>{let c=aU(a),d=aU(b);return c>d?1:c<d?-1:0},bh=a=>(0,j.randomBytes)(a),bi=(...a)=>{if(1===a.length)return a[0];let b=new Uint8Array(a.reduce((a,b)=>a+b.length,0));for(let c=0,d=0;c<a.length;c++){let e=a[c];b.set(e,d),d+=e.length}return b};function bj(a,b=!1){return a.length<4&&(a=aZ(a,4,b)),new DataView(a.buffer,a.byteOffset,a.byteLength).getUint32(0,b)}function bk(a,b=!1){return a.length<8&&(a=aZ(a,8,b)),new DataView(a.buffer,a.byteOffset,a.byteLength).getBigUint64(0,b)}function bl(a,b=!1){let c=new ArrayBuffer(4);return new DataView(c).setUint32(0,a,b),new Uint8Array(c)}function bm(a,b=!1){let c=new ArrayBuffer(8);return new DataView(c).setBigUint64(0,a,b),new Uint8Array(c)}function bn(a){return aU(aQ(aI(a)?a:`0x${a}`))}function bo(a,b){let c=[];for(let d=0;d<(b??8*a.length);d++){let b=Math.floor(d/8),e=7-d%8;c.push(a[b]>>e&1)}return c}function bp(a){let b=new Uint8Array(Math.ceil(a.length/8));for(let c=0;c<a.length;c++){let d=Math.floor(c/8),e=7-c%8;b[d]|=a[c]<<e}return b}function bq(a,b){let c=0,d=Math.min(a.length,b.length);for(let e=0;e<d;e++)if(a[e]===b[e])c++;else break;return c}function br(a,b){let c=0,d=Math.min(a.length,b.length);for(let e=0;e<d;e++)if(a[e]===b[e])c++;else break;return c}function bs(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}BigInt("0xffffffffffffffff"),BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),ay.CURVE.n,ay.CURVE.n,BigInt(2),BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),aQ("0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"),aQ("0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347"),aQ("0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421"),aF(new Uint8Array),Uint8Array.from([128]),BigInt(-1),BigInt(0),BigInt(1),BigInt(2),BigInt(3),BigInt(7),BigInt(8),BigInt(27),BigInt(28),BigInt(31),BigInt(32),BigInt(64),BigInt(128),BigInt(255),BigInt(256),BigInt(96),BigInt(100),BigInt(160),BigInt(224),BigInt(7922816251426434e13),BigInt(1461501637330903e33),BigInt(2695994666715064e52),BigInt(1e9),BigInt(1e18);var bt=a.i(93953);aE(bt.keccak_224),aE(bt.keccak_256).create=bt.keccak_256.create,aE(bt.keccak_384),aE(bt.keccak_512),new Uint8Array(0),aQ("0x05");aX(0),aX(1),BigInt(256),BigInt(31),a.i(56897),a.i(44026).default,a.i(36603);let bu=()=>Math.random().toString(36).slice(2);function bv({width:a,height:b}){let c=void 0!==window.screenLeft?window.screenLeft:window.screenX,d=void 0!==window.screenTop?window.screenTop:window.screenY,e=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,f=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,g=Math.abs((e-a)/2/1+c),h=Math.abs((f-b)/2/1+d);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${b/1},width=${a/1},top=${h},left=${g}`}let bw={POPUP:"popup",MODAL:"modal",AUTO_APPROVE:"auto-approve",DEFAULT:"default"},bx={height:660,width:375},by={height:700,width:1200},bz={height:700,width:450},bA="light";var bB=a.i(19432),bC=a.i(27699);function bD(a,b,c){try{Reflect.apply(a,b,c)}catch(a){setTimeout(()=>{throw a})}}class bE extends bC.EventEmitter{emit(a,...b){let c="error"===a,d=this._events;if(void 0!==d)c=c&&void 0===d.error;else if(!c)return!1;if(c){let a;if(b.length>0&&([a]=b),a instanceof Error)throw a;let c=Error(`Unhandled error.${a?` (${a.message})`:""}`);throw c.context=a,c}let e=d[a];if(void 0===e)return!1;if("function"==typeof e)bD(e,this,b);else{let a=e.length,c=function(a){let b=a.length,c=Array(b);for(let d=0;d<b;d+=1)c[d]=a[d];return c}(e);for(let d=0;d<a;d+=1)bD(c[d],this,b)}return!0}}var bF=a.i(57266);class bG extends Error{constructor({code:a,message:b,data:c}){if(!Number.isInteger(a))throw Error("code must be an integer");if(!b||"string"!=typeof b)throw Error("message must be string");super(b),(0,h.default)(this,"code",void 0),(0,h.default)(this,"data",void 0),this.code=a,void 0!==c&&(this.data=c)}toString(){return(0,bF.default)({code:this.code,message:this.message,data:this.data,stack:this.stack})}}let bH=(a,b,c=!0)=>(d,e)=>{d||e.error?b(d||e.error):!c||Array.isArray(e)?a(e):a(e.result)};var bI=bB;function bJ(){}class bK extends bI.Duplex{constructor({name:a,target:b,targetWindow:c=window,targetOrigin:d="*"}){if(super({objectMode:!0}),(0,h.default)(this,"_init",void 0),(0,h.default)(this,"_haveSyn",void 0),(0,h.default)(this,"_name",void 0),(0,h.default)(this,"_target",void 0),(0,h.default)(this,"_targetWindow",void 0),(0,h.default)(this,"_targetOrigin",void 0),(0,h.default)(this,"_onMessage",void 0),(0,h.default)(this,"_synIntervalId",void 0),!a||!b)throw Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=a,this._target=b,this._targetWindow=c,this._targetOrigin=d,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write("BRK",null,bJ),this._haveSyn=!1,this._init=!1}_handShake(){this._write("SYN",null,bJ),this.cork()}_onData(a){if(this._init)if("BRK"===a)this._break();else try{this.push(a)}catch(a){this.emit("error",a)}else"SYN"===a?(this._haveSyn=!0,this._write("ACK",null,bJ)):"ACK"===a&&(this._init=!0,this._haveSyn||this._write("ACK",null,bJ),this.uncork())}_postMessage(a){let b=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:a},b)}onMessage(a){let b=a.data;("*"===this._targetOrigin||a.origin===this._targetOrigin)&&a.source===this._targetWindow&&"object"==typeof b&&b.target===this._name&&b.data&&this._onData(b.data)}_read(){}_write(a,b,c){this._postMessage(a),c()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}let bL=-32600,bM=-32603,bN={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};var bO=function(a,b){if(null==a)throw TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(a),b)};let bP=bM;function bQ(a){return Number.isInteger(a)}function bR(a){return"string"==typeof a&&a.length>0}function bS(a){return!!a&&"object"==typeof a&&!Array.isArray(a)}function bT(a){return!!a&&!!bQ(a.code)&&!!bR(a.message)&&(!a.stack||!!bR(a.stack))}function bU(a,b="Unspecified error message. This is a bug, please report it."){if(bQ(a)){let b=a.toString();if(bO(bN,b))return bN[b].message;if(a>=-32099&&a<=-32e3)return"Unspecified server error."}return b}let bV={code:bP,message:bU(bP)};function bW(a){try{JSON.parse(JSON.stringify(a,(a,b)=>{if("__proto__"===a||"constructor"===a||"function"==typeof b||"symbol"==typeof b)throw Error("Not valid json");return b}),(a,b)=>{if("__proto__"!==a&&"constructor"!==a)return b})}catch{return!1}return!0}function bX(a){return Object.getOwnPropertyNames(a).reduce((b,c)=>{let d=a[c];return bW(d)&&(b[c]=d),b},{})}function bY(a){return Array.isArray(a)?a.map(a=>bW(a)?a:bS(a)?bX(a):null):bS(a)?bX(a):bW(a)?a:null}function bZ(a,{fallbackError:b=bV,shouldIncludeStack:c=!0}={}){if(!bT(b))throw Error("Must provide fallback error with integer number code and string message.");let d=function(a,b){if(a&&"object"==typeof a&&"serialize"in a&&"function"==typeof a.serialize)return a.serialize();if(bT(a))return a;let c=bY(a);return(0,g.default)((0,g.default)({},b),{},{data:{cause:c}})}(a,b);return c||delete d.stack,d}var b$=function(a,b){if(null==a)throw TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(a),b)};function b_(a,b){if("[Circular]"!==b)return b}class b0 extends Error{constructor(a,b,c){if(!Number.isInteger(a))throw Error('"code" must be an integer.');if(!b||"string"!=typeof b)throw Error('"message" must be a non-empty string.');!function(a){return bS(a)&&bO(a,"cause")&&bS(a.cause)}(c)?(super(b),(0,h.default)(this,"cause",void 0),(0,h.default)(this,"code",void 0),(0,h.default)(this,"data",void 0)):(super(b,{cause:c.cause}),(0,h.default)(this,"cause",void 0),(0,h.default)(this,"code",void 0),(0,h.default)(this,"data",void 0),b$(this,"cause")||Object.assign(this,{cause:c.cause})),void 0!==c&&(this.data=c),this.code=a,this.cause=null==c?void 0:c.cause}serialize(){let a={code:this.code,message:this.message};return void 0!==this.data&&(a.data=this.data,function(a){if("object"!=typeof a||null===a)return!1;try{let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}catch{return!1}}(this.data)&&(a.data.cause=bY(this.data.cause))),this.stack&&(a.stack=this.stack),a}toString(){return(0,bF.default)(this.serialize(),{replacer:b_,space:2})}}class b1 extends b0{constructor(a,b,c){if(!function(a){return Number.isInteger(a)&&a>=1e3&&a<=4999}(a))throw Error('"code" must be an integer such that: 1000 <= code <= 4999');super(a,b,c)}}var b2=a.i(44002),b3=a.i(75444),b4=a.i(45713),b5=a.i(41162),b6=bB,b7=bB;class b8 extends b7.Duplex{constructor({parent:a,name:b}){super({objectMode:!0}),(0,h.default)(this,"_parent",void 0),(0,h.default)(this,"_name",void 0),this._parent=a,this._name=b}_read(){}_write(a,b,c){this._parent.push({name:this._name,data:a}),c()}}let b9=Symbol("IGNORE_SUBSTREAM");class ca extends b6.Duplex{constructor(a={}){super((0,g.default)((0,g.default)({},a),{},{objectMode:!0})),(0,h.default)(this,"_substreams",void 0),(0,h.default)(this,"getStream",void 0),this._substreams={}}createStream(a){var b,c;let d;if(!a)throw Error("ObjectMultiplex - name must not be empty");if(this._substreams[a])throw Error(`ObjectMultiplex - Substream for name "${a}" already exists`);let e=new b8({parent:this,name:a});return this._substreams[a]=e,b=this,c=a=>e.destroy(a||void 0),d=(0,b4.default)(c),(0,b3.default)(b,{readable:!1},d),(0,b3.default)(b,{writable:!1},d),e}ignoreStream(a){if(!a)throw Error("ObjectMultiplex - name must not be empty");if(this._substreams[a])throw Error(`ObjectMultiplex - Substream for name "${a}" already exists`);this._substreams[a]=b9}_read(){}_write(a,b,c){let{name:d,data:e}=a;if(!d)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${a}"`),c();let f=this._substreams[d];return f?f!==b9&&f.push(e):window.console.warn(`ObjectMultiplex - orphaned data for stream "${d}"`),c()}}let cb=b2.default.getLogger("auth");function cc(a){let{message:b="",code:c=-32603,stack:d="Stack trace is not available.",data:e=""}=a,f=parseInt((null==c?void 0:c.toString())||"-32603");return{message:b||(null==a?void 0:a.toString())||bU(f),code:f,stack:d,data:e||b||(null==a?void 0:a.toString())}}cb.setLevel("error");class cd extends bE{constructor(){super(),(0,h.default)(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(a,b,c){let d=[],e=null,f=!1;for(let g of c)if([e,f]=await cd._runMiddleware(a,b,g,d),f)break;return[e,f,d.reverse()]}static _runMiddleware(a,b,c,d){return new Promise(e=>{let f=a=>{let c=a||b.error;c&&("object"==typeof c&&!1===Object.keys(c).includes("stack")&&(c.stack="Stack trace is not available."),cb.error(c),b.error=bZ(c,{shouldIncludeStack:!0,fallbackError:cc(c)})),e([c,!0])};try{c(a,b,a=>{b.error?f(b.error):(a&&("function"!=typeof a&&f(new bG({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),d.push(a)),e([null,!1]))},f)}catch(a){f(a)}})}static async _runReturnHandlers(a){for(let b of a)await new Promise((a,c)=>{b(b=>b?c(b):a())})}static _checkForCompletion(a,b,c){if(!("result"in b)&&!("error"in b))throw new bG({code:-32603,message:"Response has no error or result for request"});if(!c)throw new bG({code:-32603,message:"Nothing ended request"})}push(a){this._middleware.push(a)}handle(a,b){if(b&&"function"!=typeof b)throw Error('"callback" must be a function if provided.');return Array.isArray(a)?b?this._handleBatch(a,b):this._handleBatch(a):b?this._handle(a,b):this._promiseHandle(a)}asMiddleware(){return async(a,b,c,d)=>{try{let[e,f,g]=await cd._runAllMiddleware(a,b,this._middleware);if(f)return await cd._runReturnHandlers(g),d(e);return c(async a=>{try{await cd._runReturnHandlers(g)}catch(b){return a(b)}return a()})}catch(a){return d(a)}}}async _handleBatch(a,b){try{let c=await Promise.all(a.map(this._promiseHandle.bind(this)));if(b)return b(null,c);return c}catch(a){if(b)return b(a);throw a}}_promiseHandle(a){return new Promise((b,c)=>{this._handle(a,(a,d)=>{a&&void 0===d?c(a):b(d)}).catch(c)})}async _handle(a,b){if(!a||Array.isArray(a)||"object"!=typeof a){let a=new bG({code:-32603,message:"request must be plain object"});return b(a,{id:void 0,jsonrpc:"2.0",error:a})}if("string"!=typeof a.method){let c=new bG({code:-32603,message:"method must be string"});return b(c,{id:a.id,jsonrpc:"2.0",error:c})}let c=(0,g.default)({},a),d={id:c.id,jsonrpc:c.jsonrpc},e=null;try{await this._processRequest(c,d)}catch(a){e=a}return e&&(delete d.result,d.error||("object"==typeof e&&!1===Object.keys(e).includes("stack")&&(e.stack="Stack trace is not available."),cb.error(e),d.error=bZ(e,{shouldIncludeStack:!0,fallbackError:cc(e)}))),b(e,d)}async _processRequest(a,b){let[c,d,e]=await cd._runAllMiddleware(a,b,this._middleware);if(cd._checkForCompletion(a,b,d),await cd._runReturnHandlers(e),c)throw c}}let ce=a=>(function(a,b){let[c,d]=function(a){if(a){if("string"==typeof a)return[a];else if("object"==typeof a&&!Array.isArray(a)){let{message:b,data:c}=a;if(b&&"string"!=typeof b)throw Error("Must specify string message.");return[null!=b?b:void 0,c]}}return[]}(b);return new b0(a,null!=c?c:bU(a),d)})(bL,a);function cf(a){return null!==a&&"object"==typeof a&&"function"==typeof a.pipe}var cg=()=>"Web3Auth: Lost connection to Web3Auth.",ch=()=>"Web3Auth: Disconnected from iframe. Page reload required.",ci=()=>"Must provide a Node.js-style duplex stream.",cj=()=>"Expected a single, non-array, object argument.",ck=()=>"'args.method' must be a non-empty string.",cl=()=>"'args.params' must be an object or array if provided.",cm=a=>`Web3Auth: Connected to chain with ID "${a}".`,cn=b2.default.getLogger("ws-embed");let co=["eth_subscription"];class cp extends bE{constructor(a,{maxEventListeners:b=100,jsonRpcStreamName:c="provider"}){var d;if(super(),(0,h.default)(this,"rpcEngine",void 0),(0,h.default)(this,"jsonRpcConnectionEvents",void 0),(0,h.default)(this,"isWeb3Auth",void 0),(0,h.default)(this,"state",void 0),!function(a){var b;return cf(a)&&!1!==a.writable&&"function"==typeof a._write&&"object"==typeof a._writableState&&cf(b=a)&&!1!==b.readable&&"function"==typeof b._read&&"object"==typeof b._readableState}(a))throw Error(ci());this.isWeb3Auth=!0,this.setMaxListeners(b),this.handleConnect=this.handleConnect.bind(this),this.handleDisconnect=this.handleDisconnect.bind(this),this.handleStreamDisconnect=this.handleStreamDisconnect.bind(this),this.rpcRequest=this.rpcRequest.bind(this),this.initializeState=this.initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this),this.send=this.send.bind(this);const e=new ca;(0,b5.default)(a,e,a,this.handleStreamDisconnect.bind(this,"Web3Auth")),e.ignoreStream("phishing");const f=function(){let a={},b=new bE,c=new bB.Duplex({objectMode:!0,read:function(){return!1},write:function(c,d,e){let f;try{if(c.id){let b=a[c.id];if(!b)throw Error(`StreamMiddleware - Unknown response id "${c.id}"`);delete a[c.id],Object.assign(b.res,c),setTimeout(b.end)}else b.emit("notification",c)}catch(a){f=a}e(f)}});return{events:b,middleware:(b,d,e,f)=>{c.push(b),a[b.id]={req:b,res:d,next:e,end:f}},stream:c}}();(0,b5.default)(f.stream,e.createStream(c),f.stream,this.handleStreamDisconnect.bind(this,"Web3Auth RpcProvider"));const i=new cd;i.push((a,b,c,d)=>{let e=a.id,f=Math.random().toString(36).slice(2);a.id=f,b.id=f,c(c=>{a.id=e,b.id=e,c()})}),i.push((a,b,c)=>{"string"==typeof a.method&&a.method||(b.error=ce({message:"The request 'method' must be a non-empty string.",data:(0,g.default)((0,g.default)({},a||{}),{},{cause:"The request 'method' must be a non-empty string."})})),c(a=>{let{error:c}=b;return c&&cn.error(`Ws-Embed - RPC Error: ${c.message}`,c),a()})}),i.push((d={origin:location.origin},function(a,b,c){c(c=>{b.error&&b2.default.warn("Error in RPC response:\n",b),a.isTorusInternal||(b2.default.info(`RPC (${d.origin}):`,a,"->",b),c())})})),i.push(f.middleware),this.rpcEngine=i,this.jsonRpcConnectionEvents=f.events}async request(a){if(!a||"object"!=typeof a||Array.isArray(a))throw ce({message:cj(),data:(0,g.default)((0,g.default)({},a||{}),{},{cause:cj()})});let{method:b,params:c}=a;if("string"!=typeof b||0===b.length)throw ce({message:ck(),data:(0,g.default)((0,g.default)({},a||{}),{},{cause:cj()})});if(void 0!==c&&!Array.isArray(c)&&("object"!=typeof c||null===c))throw ce({message:cl(),data:(0,g.default)((0,g.default)({},a||{}),{},{cause:cj()})});return new Promise((a,d)=>{this.rpcRequest({method:b,params:c},bH(a,d))})}send(a,b){this.rpcRequest(a,b)}sendAsync(a){return new Promise((b,c)=>{this.rpcRequest(a,bH(b,c))})}handleStreamDisconnect(a,b){let c;c=`Web3Auth: Lost connection to "${a}".`,null!=b&&b.stack&&(c+=`
${b.stack}`),cn.warn(c),this&&this.listenerCount("error")>0&&this.emit("error",c),this.handleDisconnect(!1,b?b.message:void 0)}}let cq={PRODUCTION:"production",STAGING:"staging",DEVELOPMENT:"development",TESTING:"testing"},cr={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"};class cs extends bE{constructor({url:a,target:b,features:c,timeout:d=3e4}){super(),(0,h.default)(this,"url",void 0),(0,h.default)(this,"target",void 0),(0,h.default)(this,"features",void 0),(0,h.default)(this,"window",void 0),(0,h.default)(this,"windowTimer",void 0),(0,h.default)(this,"iClosedWindow",void 0),(0,h.default)(this,"timeout",void 0),this.url=a,this.target=b||"_blank",this.features=c||bv(by),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=d,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),void 0===this.window&&clearInterval(this.windowTimer)},500))}open(){var a;this.window=window.open(this.url.href,this.target,this.features),null!=(a=this.window)&&a.focus&&this.window.focus()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(a){a?window.location.replace(this.url.href):window.location.href=this.url.href}}class ct extends cp{constructor(a,{maxEventListeners:b=100,jsonRpcStreamName:c="provider"},d){super(a,{maxEventListeners:b,jsonRpcStreamName:c}),(0,h.default)(this,"tryWindowHandle",void 0),(0,h.default)(this,"windowRefs",void 0),(0,h.default)(this,"iframeUrl",void 0),(0,h.default)(this,"iframeId",void 0),this.state=(0,g.default)((0,g.default)({},ct.defaultState),d),this.iframeUrl="",this.iframeId="",this.windowRefs=new Map,this.on("connect",()=>{this.state.isConnected=!0});const e=a=>{let{method:b,params:c}=a;if("iframe_status"===b){let{isFullScreen:a,rid:b}=c;this.displayIframe({isFull:a,rid:b},!0)}else if("close_window"===b)this.handleCloseWindow(c);else if("user_logged_in"===b){let{currentAuthConnection:a}=c;this.state.isLoggedIn=!0,this.state.currentAuthConnection=a}else if("user_logged_out"===b)this.state.isLoggedIn=!1,this.state.currentAuthConnection=null,this.displayIframe({isFull:!1},!0);else if("toggle_widget_button"===b){let{show:a}=c;this.state.widgetVisibility=a,this.displayIframe()}else if("allow_wallet_service"===b){let{allow:a}=c;this.state.allowWalletService=a}};this.jsonRpcConnectionEvents.on("notification",e)}get isLoggedIn(){return this.state.isLoggedIn}get isIFrameFullScreen(){return this.state.isIFrameFullScreen}get allowWalletService(){return this.state.allowWalletService}isConnected(){return this.state.isConnected}async initializeState(a){try{let{torusUrl:b,torusIframeId:c}=a;this.iframeUrl=b,this.iframeId=c;let{currentAuthConnection:d,isLoggedIn:e}=await this.request({method:"get_provider_state",params:[]});e&&this.handleConnect(d,e)}catch(a){cn.error("Web3Auth: Failed to get initial state. Please report this bug.",a)}finally{cn.info("initialized communication state"),this.state.initialized=!0}}displayIframe({isFull:a=!1,rid:b=""}={},c=!1){let d={};if(a)d.display="block",d.width="100%",d.height="100%",d.top="0px",d.right="0px",d.left="0px",d.bottom="0px";else switch(d.display=this.state.widgetVisibility?"block":"none",d.height=this.state.widgetVisibility?"70px":"0px",d.width=this.state.widgetVisibility?"70px":"0px",this.state.buttonPosition){case cr.TOP_LEFT:d.top="0px",d.left="0px",d.right="auto",d.bottom="auto";break;case cr.TOP_RIGHT:d.top="0px",d.right="0px",d.left="auto",d.bottom="auto";break;case cr.BOTTOM_RIGHT:d.bottom="0px",d.right="0px",d.top="auto",d.left="auto";break;case cr.BOTTOM_LEFT:default:d.bottom="0px",d.left="0px",d.top="auto",d.right="auto"}Object.assign(document.getElementById(this.iframeId).style,d),this.state.isIFrameFullScreen=a,c||this.request({method:"iframe_status",params:{isIFrameFullScreen:a,rid:b}})}async handleWindow(a,{url:b,target:c,features:d,timeout:e}={}){let f=new URL(b||`${this.iframeUrl}/redirect?windowId=${a}&sessionNamespace=${window.location.hostname}`),g=new cs({url:f,target:c,features:d,timeout:e});if(g.open(),!g.window){this.displayIframe({isFull:!0}),this.request({method:"window_blocked",params:{windowId:a,finalUrl:f.href}});return}this.windowRefs.set(a,g),g.once("close",()=>{this.windowRefs.delete(a),this.request({method:"closed_window",params:{windowId:a}})})}rpcRequest(a,b){Array.isArray(a)||a.jsonrpc||(a.jsonrpc="2.0"),this.rpcEngine.handle(a,b)}handleConnect(a,b){this.state.isConnected||(this.state.isConnected=!0,this.emit("connect",{currentAuthConnection:a,isLoggedIn:b}),cn.debug(cm(a)))}handleDisconnect(a,b){if(this.state.isConnected||!this.state.isPermanentlyDisconnected&&!a){let c;this.state.isConnected=!1,a?(c=new b1(1013,b||cg()),cn.debug(c)):(c=new b1(1011,b||ch()),cn.error(c),this.state.currentAuthConnection=null,this.state.isLoggedIn=!1,this.state.widgetVisibility=!1,this.state.isIFrameFullScreen=!1,this.state.isPermanentlyDisconnected=!0),this.emit("disconnect",c)}}handleCloseWindow(a){let{windowId:b}=a;this.windowRefs.has(b)&&(this.windowRefs.get(b).close(),this.windowRefs.delete(b))}}(0,h.default)(ct,"defaultState",{buttonPosition:"bottom-left",currentAuthConnection:null,isIFrameFullScreen:!1,widgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1,hasEmittedConnection:!1,allowWalletService:!1});var cu=a.i(94939);class cv extends cp{constructor(a,{maxEventListeners:b=100,jsonRpcStreamName:c="provider"}){super(a,{maxEventListeners:b,jsonRpcStreamName:c}),(0,h.default)(this,"chainId",void 0),(0,h.default)(this,"selectedAddress",void 0),(0,h.default)(this,"tryWindowHandle",void 0),this.state=(0,g.default)({},cv.defaultState),this.selectedAddress=null,this.chainId=null,this.handleAccountsChanged=this.handleAccountsChanged.bind(this),this.handleChainChanged=this.handleChainChanged.bind(this),this.handleUnlockStateChanged=this.handleUnlockStateChanged.bind(this),this.on("connect",()=>{this.state.isConnected=!0});const d=a=>{let{method:b,params:c}=a;"wallet_accounts_changed"===b?this.handleAccountsChanged(c):"wallet_unlock_state_changed"===b?this.handleUnlockStateChanged(c):"wallet_chain_changed"===b?this.handleChainChanged(c):co.includes(b)&&(this.emit("data",a),this.emit("notification",c.result),this.emit("message",{type:b,data:c}))};this.jsonRpcConnectionEvents.on("notification",d)}isConnected(){return this.state.isConnected}async initializeState(){try{let{accounts:a,chainId:b,isUnlocked:c}=await this.request({method:"wallet_get_provider_state",params:[]});this.emit("connect",{chainId:b}),this.handleChainChanged({chainId:b}),this.handleUnlockStateChanged({accounts:a,isUnlocked:c}),this.handleAccountsChanged(a)}catch(a){cn.error("WsEmbed: Failed to get initial state. Please report this bug.",a)}finally{cn.info("initialized provider state"),this.state.initialized=!0}}rpcRequest(a,b,c=!1){let d=b;if(!Array.isArray(a)){if(a.jsonrpc||(a.jsonrpc="2.0"),[f.EVM_METHOD_TYPES.GET_ACCOUNTS,f.EVM_METHOD_TYPES.ETH_REQUEST_ACCOUNTS,f.SOLANA_METHOD_TYPES.SOLANA_REQUEST_ACCOUNTS,f.SOLANA_METHOD_TYPES.GET_ACCOUNTS].includes(a.method))d=(d,e)=>{this.handleAccountsChanged(e.result||[],"eth_accounts"===a.method,c),b(d,e)};else if("wallet_getProviderState"===a.method)return void this.rpcEngine.handle(a,d)}this.tryWindowHandle(a,d)}handleConnect(a){this.state.isConnected||(this.state.isConnected=!0,this.emit("connect",{chainId:a}),cn.debug(cm(a)))}handleDisconnect(a,b){if(this.state.isConnected||!this.state.isPermanentlyDisconnected&&!a){let c;this.state.isConnected=!1,a?(c=new b1(1013,b||cg()),cn.debug(c)):(c=new b1(1011,b||ch()),cn.error(c),this.chainId=null,this.state.accounts=null,this.selectedAddress=null,this.state.isUnlocked=!1,this.state.isPermanentlyDisconnected=!0),this.emit("disconnect",c)}}handleAccountsChanged(a,b=!1,c=!1){let d=a;for(let b of(Array.isArray(d)||(cn.error("WsEmbed: Received non-array accounts parameter. Please report this bug.",d),d=[]),a))if("string"!=typeof b){cn.error("WsEmbed: Received non-string account. Please report this bug.",a),d=[];break}(0,cu.default)(this.state.accounts,d)||(b&&Array.isArray(this.state.accounts)&&this.state.accounts.length>0&&!c&&cn.error('WsEmbed: "eth_accounts" unexpectedly updated accounts. Please report this bug.',d),this.state.accounts=d,this.emit("accountsChanged",d)),this.selectedAddress!==d[0]&&(this.selectedAddress=d[0]||null)}handleChainChanged({chainId:a}={}){a?"loading"===a?this.handleDisconnect(!0):(this.handleConnect(a),a!==this.chainId&&(this.chainId=a,this.state.initialized&&this.emit("chainChanged",this.chainId))):cn.error("WsEmbed: Received invalid network parameters. Please report this bug.",{chainId:a})}handleUnlockStateChanged({accounts:a,isUnlocked:b}={}){"boolean"!=typeof b?cn.error("WsEmbed: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:b}):b!==this.state.isUnlocked&&(this.state.isUnlocked=b,this.handleAccountsChanged(a||[]))}}function cw(a){return new Promise((b,c)=>{try{let c=document.createElement("img");c.onload=()=>b(!0),c.onerror=()=>b(!1),c.src=a}catch(a){c(a)}})}async function cx(a){try{let{document:b}=a,c=b.querySelector('head > link[rel="shortcut icon"]');if(c&&await cw(c.href)||(c=Array.from(b.querySelectorAll('head > link[rel="icon"]')).find(a=>!!a.href))&&await cw(c.href))return c.href;return""}catch{return""}}(0,h.default)(cv,"defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});let cy=async()=>({name:(a=>{let{document:b}=a,c=b.querySelector('head > meta[property="og:site_name"]');if(c)return c.content;let d=b.querySelector('head > meta[name="title"]');return d?d.content:b.title&&b.title.length>0?b.title:a.location.hostname})(window),icon:await cx(window)}),cz=`v${"5.3.0".split(".")[0]}`,cA={[cq.TESTING]:{url:"https://develop-wallet.web3auth.io",logLevel:"debug"},[cq.DEVELOPMENT]:{url:"http://localhost:4050",logLevel:"debug"},[cq.STAGING]:{url:`https://staging-wallet.web3auth.io/${cz}`,logLevel:"debug"},[cq.PRODUCTION]:{url:`https://wallet.web3auth.io/${cz}`,logLevel:"error"}};!async function(){try{if("undefined"==typeof document)return;let a=document.createElement("link"),{url:b}=cA.production;a.href=`${b}/frame`,a.crossOrigin="anonymous",a.type="text/html",a.rel="prefetch",a.relList&&a.relList.supports&&a.relList.supports("prefetch")&&document.head.appendChild(a)}catch(a){cn.warn(a)}}();let cB=new Set([f.SOLANA_METHOD_TYPES.SEND_TRANSACTION,f.SOLANA_METHOD_TYPES.SIGN_MESSAGE,f.SOLANA_METHOD_TYPES.SIGN_TRANSACTION,f.SOLANA_METHOD_TYPES.SIGN_ALL_TRANSACTIONS,f.EVM_METHOD_TYPES.ETH_SIGN,f.EVM_METHOD_TYPES.ETH_SIGN_TYPED_DATA_V4,f.EVM_METHOD_TYPES.PERSONAL_SIGN,f.EVM_METHOD_TYPES.ETH_TRANSACTION,f.EVM_METHOD_TYPES.ADD_CHAIN,f.EVM_METHOD_TYPES.SWITCH_CHAIN,"wallet_switchChain"]);class cC{constructor({modalZIndex:a=99999,web3AuthClientId:b,web3AuthNetwork:c}){(0,h.default)(this,"isInitialized",void 0),(0,h.default)(this,"modalZIndex",void 0),(0,h.default)(this,"provider",void 0),(0,h.default)(this,"communicationProvider",void 0),(0,h.default)(this,"buttonPosition",void 0),(0,h.default)(this,"web3AuthClientId",void 0),(0,h.default)(this,"web3AuthNetwork",void 0),(0,h.default)(this,"isPluginMode",void 0),(0,h.default)(this,"confirmationStrategy",void 0),(0,h.default)(this,"buildEnv",void 0),(0,h.default)(this,"embedNonce",bu()),this.isInitialized=!1,this.modalZIndex=a,this.web3AuthClientId=b,this.web3AuthNetwork=c}get isLoggedIn(){var a;return(null==(a=this.communicationProvider)?void 0:a.isLoggedIn)||!1}get getBuildEnv(){return this.buildEnv}async init({buildEnv:a=cq.PRODUCTION,enableLogging:b=!1,chains:c,chainId:d,walletUrls:e,whiteLabel:f,confirmationStrategy:h=bw.DEFAULT,accountAbstractionConfig:i,enableKeyExport:j=!1}){var k;let l;if(this.isInitialized)throw Error("Already initialized");this.buildEnv=a,this.confirmationStrategy=h;let{url:m,logLevel:n}=e&&e[a]?(0,g.default)((0,g.default)({},cA[a]),e[a]):cA[a];cn.info(m,"url loaded"),cn.setDefaultLevel(n),b?cn.enableAll():cn.disableAll();let o=new URL(m);o.pathname.endsWith("/")?o.pathname+="frame":o.pathname+="/frame";let p=new URLSearchParams;p.append("origin",window.location.origin),p.append("nonce",this.embedNonce),o.hash=p.toString();let q=this.getTheme((null==f?void 0:f.mode)||bA),r=(k=`<iframe
        id="walletIframe-${this.embedNonce}"
        class="walletIframe-${this.embedNonce}"
        sandbox="allow-popups allow-scripts allow-same-origin allow-forms allow-modals allow-downloads"
        src="${o.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()};
        color-scheme: ${q}"
        allow="clipboard-write"
      ></iframe>`,(l=window.document.createElement("template")).innerHTML=k.trim(),l.content.firstChild);this.buttonPosition=(null==f?void 0:f.buttonPosition)||cr.BOTTOM_LEFT;let s=await cy();return new Promise((a,e)=>{try{window.document.body.appendChild(r);let e=async g=>{if(g.origin!==o.origin)return;let{message:k,nonce:l}=g.data||{};"setup_complete"===k&&l===this.embedNonce&&(window.removeEventListener("message",e),r.contentWindow.postMessage({chains:c,chainId:d,dappMetadata:s,enableLogging:b,web3AuthClientId:this.web3AuthClientId,web3AuthNetwork:this.web3AuthNetwork,whiteLabel:f,confirmationStrategy:h,accountAbstractionConfig:i,enableKeyExport:j},o.origin),await this.setupWeb3({torusUrl:m,walletIframe:r}),this.isInitialized=!0,a())};window.addEventListener("message",e)}catch(a){e(a)}})}async login(a={}){if(!this.isInitialized)throw Error("Call init() first");let b=this.communicationProvider.isIFrameFullScreen;try{a.authConnection||b||this.communicationProvider.displayIframe({isFull:!0});let c=await new Promise((b,c)=>{let d=Object.values(f.SOLANA_CHAIN_IDS).includes(this.provider.chainId)?f.SOLANA_METHOD_TYPES.SOLANA_REQUEST_ACCOUNTS:f.EVM_METHOD_TYPES.ETH_REQUEST_ACCOUNTS;this.provider.rpcRequest({method:d,params:[a.authConnection,a.login_hint]},bH(b,c))});if(cn.info("check: res",c),Array.isArray(c)&&c.length>0)return this.confirmationStrategy===bw.AUTO_APPROVE&&cn.warn("Confirmation strategy auto approve is not allowed on Embed Mode, using Default instead."),c;throw Error("Login failed")}catch(a){throw cn.error("login failed",a),a}finally{b||this.communicationProvider.displayIframe({isFull:!1})}}async loginWithSessionId(a){if(!this.isInitialized)throw Error("Call init() first");if(!a.sessionId)throw Error("sessionId is required");try{let b=await this.communicationProvider.request({method:"login_with_session_id",params:[a.sessionId,a.sessionNamespace||""]});if(cn.info("check: res",b),b.success)return this.isPluginMode=!0,this.confirmationStrategy===bw.POPUP&&cn.warn("Confirmation strategy popup is not allowed on Plugin Mode, using Default instead."),b.success;throw Error("Login failed")}catch(a){throw cn.error("login with session id failed",a),a}}async logout(){if(!this.communicationProvider.isLoggedIn)throw Error("Not logged in");await this.communicationProvider.request({method:"logout",params:[]})}async cleanUp(){var a;null!=(a=this.communicationProvider)&&a.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){let a=window.document.getElementById(`walletIframe-${this.embedNonce}`);(a instanceof Element||a instanceof Document)&&a.remove(),this.isInitialized=!1}async getUserInfo(){return await this.communicationProvider.request({method:"user_info",params:[]})}async showWalletConnectScanner(a){let b=!a||a.show;this.communicationProvider.displayIframe({isFull:b});try{await this.communicationProvider.request({method:"show_wallet_connect",params:a})}catch{this.communicationProvider.displayIframe({isFull:!1})}}async showWalletUi(a){let b=!a||a.show;this.communicationProvider.displayIframe({isFull:b});try{await this.communicationProvider.request({method:"show_wallet_ui",params:a})}catch{this.communicationProvider.displayIframe({isFull:!1})}}async showFunding(a){let b=!a||a.show;this.communicationProvider.displayIframe({isFull:b});try{await this.communicationProvider.request({method:"show_funding",params:a})}catch{this.communicationProvider.displayIframe({isFull:!1})}}async showCheckout(a){let b=!a||a.show;this.communicationProvider.displayIframe({isFull:b});try{await this.communicationProvider.request({method:"show_checkout",params:a})}catch{this.communicationProvider.displayIframe({isFull:!1})}}async showReceive(a){let b=!a||a.show;this.communicationProvider.displayIframe({isFull:b});try{await this.communicationProvider.request({method:"show_receive",params:a})}catch{this.communicationProvider.displayIframe({isFull:!1})}}async showSwap(a){let b=!a||a.show;this.communicationProvider.displayIframe({isFull:b});try{await this.communicationProvider.request({method:"show_swap",params:a})}catch{this.communicationProvider.displayIframe({isFull:!1})}}getConfirmationStrategyFinal(a){let b=this.confirmationStrategy;return!Array.isArray(a)&&cB.has(a.method)&&this.confirmationStrategy!==bw.MODAL&&!this.isPluginMode&&(b=bw.POPUP),b}getTheme(a){return a===bA?"light":"dark"===a||window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}async setupWeb3(a){cn.info("setupWeb3 running");let b=new bK({name:"embed_torus",target:"iframe_torus",targetWindow:a.walletIframe.contentWindow,targetOrigin:new URL(a.torusUrl).origin}),c=new bK({name:"embed_communication",target:"iframe_communication",targetWindow:a.walletIframe.contentWindow,targetOrigin:new URL(a.torusUrl).origin}),d=new cv(b,{}),e=new ct(c,{},{buttonPosition:this.buttonPosition});d.tryWindowHandle=(a,b)=>{let c=this.getConfirmationStrategyFinal(a),{allowWalletService:f}=e;if(c===bw.POPUP&&f){let b=bu();e.handleWindow(b,{target:"_blank",features:bv(bz),timeout:500}),a.windowId=b}d.rpcEngine.handle(a,b)},e.tryWindowHandle=(a,b)=>{let c=this.getConfirmationStrategyFinal(a),{allowWalletService:d}=e;if(c===bw.POPUP&&d){let b=bu();e.handleWindow(b,{target:"_blank",features:bv(bx),timeout:500}),a.params.windowId=b}e.rpcEngine.handle(a,b)};let h=a=>{let b=d[a],c=this;d[a]=function(a,d){let{method:e,params:g=[]}=a;if(e===f.EVM_METHOD_TYPES.ETH_REQUEST_ACCOUNTS||e===f.SOLANA_METHOD_TYPES.SOLANA_REQUEST_ACCOUNTS){if(!d)return c.login({authConnection:g[0]});c.login({authConnection:g[0]}).then(a=>d(null,a)).catch(a=>d(a))}return b.apply(this,[a,d])}};h("request"),h("sendAsync"),h("send");let i=new Proxy(d,{deleteProperty:()=>!0}),j=new Proxy(e,{deleteProperty:()=>!0});this.provider=i,this.communicationProvider=j,cn.info("test setupWeb3 "),await Promise.all([d.initializeState(),e.initializeState((0,g.default)((0,g.default)({},a),{},{torusIframeId:a.walletIframe.id}))]),cn.debug("WsEmbed - injected provider")}}a.s(["BUTTON_POSITION",()=>cr,"CONFIRMATION_STRATEGY",()=>bw,"EVM_METHOD_TYPES",()=>f.EVM_METHOD_TYPES,"SOLANA_CHAIN_IDS",()=>f.SOLANA_CHAIN_IDS,"SOLANA_METHOD_TYPES",()=>f.SOLANA_METHOD_TYPES,"TorusInPageProvider",()=>cv,"WS_EMBED_BUILD_ENV",()=>cq,"default",()=>cC],18548)}];

//# sourceMappingURL=node_modules_983bceb4._.js.map