module.exports=[37047,(a,b,c)=>{"use strict";self,b.exports=function(){var a={2870:function(a,b,c){var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.Store=b.matches=b.transform=void 0;var e=c(4303);Object.defineProperty(b,"transform",{enumerable:!0,get:function(){return d(e).default}});var f=c(2370);Object.defineProperty(b,"matches",{enumerable:!0,get:function(){return d(f).default}});var g=c(1444);Object.defineProperty(b,"Store",{enumerable:!0,get:function(){return d(g).default}})},2370:function(a,b,c){var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0});var e=d(c(7843));function f(a,b){return Array.isArray(a)?a:"object"==typeof a?a.value:(0,e.default)(b,a)}function g(a){return!!Array.isArray(a)&&(("lowercase"===a[0]||"length"===a[0]||"typeof"===a[0])&&2===a.length||("contains"===a[0]||"match"===a[0])&&3===a.length)}function h(a,b){for(var c,d,e={t:"",ok:!1,err:!1};a.length>0;){if(0===b.length)return e;switch(a[0]){case"[":var f=b[0];b=b.slice(1);var g=!0;(a=a.slice(1)).length>0&&"^"===a[0]&&(g=!1,a=a.slice(1));for(var h=!1,j=0;;){if(a.length>0&&"]"===a[0]&&j>0){a=a.slice(1);break}var k,l="";if(k=(c=i(a)).char,a=c.newChunk,c.err||(l=k,"-"===a[0]&&(l=(d=i(a.slice(1))).char,a=d.newChunk,d.err)))return e;k<=f&&f<=l&&(h=!0),j++}if(h!==g)return e;break;case"?":b=b.slice(1),a=a.slice(1);break;case"\\":if(0===(a=a.slice(1)).length)return e.err=!0,e;default:if(a[0]!==b[0])return e;b=b.slice(1),a=a.slice(1)}}return e.t=b,e.ok=!0,e.err=!1,e}function i(a){var b={char:"",newChunk:"",err:!1};return 0===a.length||"-"===a[0]||"]"===a[0]||"\\"===a[0]&&0===(a=a.slice(1)).length?b.err=!0:(b.char=a[0],b.newChunk=a.slice(1),0===b.newChunk.length&&(b.err=!0)),b}b.default=function(a,b){if(!b)throw Error("No matcher supplied!");switch(b.type){case"all":return!0;case"fql":var c=b.ir;if(!c)return!1;try{c=JSON.parse(c)}catch(a){throw Error('Failed to JSON.parse FQL intermediate representation "'.concat(c,'": ').concat(a))}var d=function a(b,c){if(!Array.isArray(b))return!0===f(b,c);var d,e,i,j,k,l,m,n=b[0];switch(n){case"!":return!a(b[1],c);case"or":for(var o=1;o<b.length;o++)if(a(b[o],c))return!0;return!1;case"and":for(o=1;o<b.length;o++)if(!a(b[o],c))return!1;return!0;case"=":case"!=":var p=f(b[1],c),q=f(b[2],c);switch(g(p)&&(p=a(p,c)),g(q)&&(q=a(q,c)),"object"==typeof p&&"object"==typeof q&&(p=JSON.stringify(p),q=JSON.stringify(q)),n){case"=":return p===q;case"!=":return p!==q;default:throw Error("Invalid operator in compareItems: ".concat(n))}case"<=":case"<":case">":case">=":var r=f(b[1],c),s=f(b[2],c);if(g(r)&&(r=a(r,c)),g(s)&&(s=a(s,c)),"number"!=typeof r||"number"!=typeof s)return!1;switch(n){case"<=":return r<=s;case">=":return r>=s;case"<":return r<s;case">":return r>s;default:throw Error("Invalid operator in compareNumbers: ".concat(n))}case"in":return d=f(b[1],c),e=f(b[2],c),void 0!==e.find(function(a){return f(a,c)===d});case"contains":return l=f(b[1],c),m=f(b[2],c),"string"==typeof l&&"string"==typeof m&&-1!==l.indexOf(m);case"match":return j=f(b[1],c),k=f(b[2],c),"string"==typeof j&&"string"==typeof k&&function(a,b){var c,d;a:for(;a.length>0;){if(e=(c=function(a){for(var b={star:!1,chunk:"",pattern:""};a.length>0&&"*"===a[0];)a=a.slice(1),b.star=!0;var c,d=!1;a:for(c=0;c<a.length;c++)switch(a[c]){case"\\":c+1<a.length&&c++;break;case"[":d=!0;break;case"]":d=!1;break;case"*":if(!d)break a}return b.chunk=a.slice(0,c),b.pattern=a.slice(c),b}(a)).star,f=c.chunk,a=c.pattern,e&&""===f)return!0;var e,f,g=h(f,b),i=g.t,j=g.ok,k=g.err;if(k)return!1;if(!j||!(0===i.length||a.length>0)){if(e)for(var l=0;l<b.length;l++){if(i=(d=h(f,b.slice(l+1))).t,j=d.ok,k=d.err,j){if(0===a.length&&i.length>0)continue;b=i;continue a}if(k)break}return!1}b=i}return 0===b.length}(k,j);case"lowercase":var t=f(b[1],c);return"string"!=typeof t?null:t.toLowerCase();case"typeof":return typeof f(b[1],c);case"length":return null===(i=f(b[1],c))?0:Array.isArray(i)||"string"==typeof i?i.length:NaN;default:throw Error("FQL IR could not evaluate for token: ".concat(n))}}(c,a);return"boolean"==typeof d&&d;default:throw Error("Matcher of type ".concat(b.type," unsupported."))}}},1444:function(a,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(){function a(a){this.rules=[],this.rules=a||[]}return a.prototype.getRulesByDestinationName=function(a){for(var b=[],c=0,d=this.rules;c<d.length;c++){var e=d[c];e.destinationName!==a&&void 0!==e.destinationName||b.push(e)}return b},a}()},4303:function(a,b,c){var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0});var e=d(c(374)),f=d(c(7843)),g=d(c(5500)),h=c(9014),i=c(4966);function j(a,b,c){Object.entries(b).forEach(function(b){var d=b[0],e=b[1],g=function(a){"object"==typeof a&&null!==a&&c(a,e)},h=""===d?a:(0,f.default)(a,d);Array.isArray(h)?h.forEach(g):g(h)})}function k(a,b){for(var c=0;c<8;c++)for(var d=a[c],e=128;e>=1;e/=2)d-e>=0?(d-=e,b.push(1)):b.push(0)}b.default=function(a,b){for(var c=0;c<b.length;c++){var d,l,m=b[c];switch(m.type){case"drop":return null;case"drop_properties":j(a,m.config.drop,function(a,b){b.forEach(function(b){return delete a[b]})});break;case"allow_properties":j(a,m.config.allow,function(a,b){Object.keys(a).forEach(function(c){b.includes(c)||delete a[c]})});break;case"sample_event":if(d=a,!((l=m.config).sample.percent<=0)&&(l.sample.percent>=1||(l.sample.path?function(a,b){var c=(0,f.default)(a,b.sample.path),d=(0,e.default)(JSON.stringify(c)),h=-64,i=[];k(d.slice(0,8),i);for(var j=0,l=0;l<64&&1!==i[l];l++)j++;if(0!==j){var m=[];k(d.slice(9,16),m),h-=j,i.splice(0,j),m.splice(64-j),i=i.concat(m)}return i[63]=+(0===i[63]),(0,g.default)(parseInt(i.join(""),2),h)<b.sample.percent}(d,l):Math.random()<=l.sample.percent)))break;return null;case"map_properties":!function(a,b){var c=JSON.parse(JSON.stringify(a));for(var d in b.map)if(b.map.hasOwnProperty(d)){var e=b.map[d],g=d.split("."),j=void 0;if(g.length>1?(g.pop(),j=(0,f.default)(c,g.join("."))):j=a,"object"==typeof j){if(e.copy){var k=(0,f.default)(c,e.copy);void 0!==k&&(0,h.dset)(a,d,k)}else if(e.move){var l=(0,f.default)(c,e.move);void 0!==l&&(0,h.dset)(a,d,l),(0,i.unset)(a,e.move)}else e.hasOwnProperty("set")&&(0,h.dset)(a,d,e.set);if(e.to_string){var m=(0,f.default)(a,d);if("string"==typeof m||"object"==typeof m&&null!==m)continue;void 0!==m?(0,h.dset)(a,d,JSON.stringify(m)):(0,h.dset)(a,d,"undefined")}}}}(a,m.config);break;case"hash_properties":break;default:throw Error('Transformer of type "'.concat(m.type,'" is unsupported.'))}}return a}},4966:function(a,b,c){var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.unset=void 0;var e=d(c(7843));b.unset=function(a,b){if((0,e.default)(a,b)){for(var c=b.split("."),d=c.pop();c.length&&"\\"===c[c.length-1].slice(-1);)d=c.pop().slice(0,-1)+"."+d;for(;c.length;)a=a[b=c.shift()];return delete a[d]}return!0}},9014:function(a,b){b.dset=function(a,b,c){b.split&&(b=b.split("."));for(var d,e,f=0,g=b.length,h=a;f<g&&"__proto__"!==(e=b[f++])&&"constructor"!==e&&"prototype"!==e;)h=h[e]=f===g?c:typeof(d=h[e])==typeof b?d:0*b[f]!=0||~(""+b[f]).indexOf(".")?{}:[]}},3304:function(a){a.exports="function"==typeof Float64Array?Float64Array:void 0},7382:function(a,b,c){var d=c(5569),e=c(3304),f=c(8482);a.exports=d()?e:f},8482:function(a){a.exports=function(){throw Error("not implemented")}},6322:function(a,b,c){var d=c(2508),e=c(5679),f=c(882);a.exports=d()?e:f},882:function(a){a.exports=function(){throw Error("not implemented")}},5679:function(a){a.exports="function"==typeof Uint16Array?Uint16Array:void 0},4773:function(a,b,c){var d=c(9773),e=c(3004),f=c(3078);a.exports=d()?e:f},3078:function(a){a.exports=function(){throw Error("not implemented")}},3004:function(a){a.exports="function"==typeof Uint32Array?Uint32Array:void 0},7980:function(a,b,c){var d=c(8114),e=c(6737),f=c(3357);a.exports=d()?e:f},3357:function(a){a.exports=function(){throw Error("not implemented")}},6737:function(a){a.exports="function"==typeof Uint8Array?Uint8Array:void 0},2684:function(a){a.exports="function"==typeof Float64Array?Float64Array:null},5569:function(a,b,c){a.exports=c(3876)},3876:function(a,b,c){var d=c(1448),e=c(2684);a.exports=function(){var a,b;if("function"!=typeof e)return!1;try{b=new e([1,3.14,-3.14,NaN]),a=d(b)&&1===b[0]&&3.14===b[1]&&-3.14===b[2]&&b[3]!=b[3]}catch(b){a=!1}return a}},9048:function(a,b,c){a.exports=c(3763)},3763:function(a){var b=Object.prototype.hasOwnProperty;a.exports=function(a,c){return null!=a&&b.call(a,c)}},7009:function(a,b,c){a.exports=c(6784)},6784:function(a){a.exports=function(){return"function"==typeof Symbol&&"symbol"==typeof Symbol("foo")}},3123:function(a,b,c){a.exports=c(8481)},8481:function(a,b,c){var d=c(7009)();a.exports=function(){return d&&"symbol"==typeof Symbol.toStringTag}},2508:function(a,b,c){a.exports=c(3403)},3403:function(a,b,c){var d=c(768),e=c(9668),f=c(187);a.exports=function(){var a,b;if("function"!=typeof f)return!1;try{b=new f(b=[1,3.14,-3.14,e+1,e+2]),a=d(b)&&1===b[0]&&3===b[1]&&b[2]===e-2&&0===b[3]&&1===b[4]}catch(b){a=!1}return a}},187:function(a){a.exports="function"==typeof Uint16Array?Uint16Array:null},9773:function(a,b,c){a.exports=c(2822)},2822:function(a,b,c){var d=c(2744),e=c(3899),f=c(746);a.exports=function(){var a,b;if("function"!=typeof f)return!1;try{b=new f(b=[1,3.14,-3.14,e+1,e+2]),a=d(b)&&1===b[0]&&3===b[1]&&b[2]===e-2&&0===b[3]&&1===b[4]}catch(b){a=!1}return a}},746:function(a){a.exports="function"==typeof Uint32Array?Uint32Array:null},8114:function(a,b,c){a.exports=c(8066)},8066:function(a,b,c){var d=c(8279),e=c(3443),f=c(2731);a.exports=function(){var a,b;if("function"!=typeof f)return!1;try{b=new f(b=[1,3.14,-3.14,e+1,e+2]),a=d(b)&&1===b[0]&&3===b[1]&&b[2]===e-2&&0===b[3]&&1===b[4]}catch(b){a=!1}return a}},2731:function(a){a.exports="function"==typeof Uint8Array?Uint8Array:null},1448:function(a,b,c){a.exports=c(1453)},1453:function(a,b,c){var d=c(6208),e="function"==typeof Float64Array;a.exports=function(a){return e&&a instanceof Float64Array||"[object Float64Array]"===d(a)}},9331:function(a,b,c){var d=c(7980);a.exports={uint16:c(6322),uint8:d}},5902:function(a,b,c){a.exports=c(4106)},4106:function(a,b,c){var d,e=c(9331);(d=new e.uint16(1))[0]=4660,a.exports=52===new e.uint8(d.buffer)[0]},768:function(a,b,c){a.exports=c(3823)},3823:function(a,b,c){var d=c(6208),e="function"==typeof Uint16Array;a.exports=function(a){return e&&a instanceof Uint16Array||"[object Uint16Array]"===d(a)}},2744:function(a,b,c){a.exports=c(2326)},2326:function(a,b,c){var d=c(6208),e="function"==typeof Uint32Array;a.exports=function(a){return e&&a instanceof Uint32Array||"[object Uint32Array]"===d(a)}},8279:function(a,b,c){a.exports=c(208)},208:function(a,b,c){var d=c(6208),e="function"==typeof Uint8Array;a.exports=function(a){return e&&a instanceof Uint8Array||"[object Uint8Array]"===d(a)}},6315:function(a){a.exports=1023},1686:function(a){a.exports=0x7fffffff},3105:function(a){a.exports=0x7ff00000},3449:function(a){a.exports=0x80000000},6988:function(a){a.exports=-1023},9777:function(a){a.exports=1023},3690:function(a){a.exports=-1074},2918:function(a,b,c){a.exports=c(4772).NEGATIVE_INFINITY},4165:function(a){a.exports=1/0},6488:function(a){a.exports=22250738585072014e-324},9668:function(a){a.exports=65535},3899:function(a){a.exports=0xffffffff},3443:function(a){a.exports=255},7011:function(a,b,c){a.exports=c(812)},812:function(a,b,c){var d=c(4165),e=c(2918);a.exports=function(a){return a===d||a===e}},1883:function(a,b,c){a.exports=c(1797)},1797:function(a){a.exports=function(a){return a!=a}},513:function(a,b,c){a.exports=c(5760)},5760:function(a){a.exports=function(a){return Math.abs(a)}},5848:function(a,b,c){a.exports=c(677)},677:function(a,b,c){var d=c(3449),e=c(1686),f=c(7838),g=c(1921),h=c(2490),i=[0,0];a.exports=function(a,b){var c;return f.assign(a,i,1,0),h(c=i[0]&e|g(b)&d,i[1])}},5500:function(a,b,c){a.exports=c(8397)},8397:function(a,b,c){var d=c(4165),e=c(2918),f=c(6315),g=c(9777),h=c(6988),i=c(3690),j=c(1883),k=c(7011),l=c(5848),m=c(4948),n=c(8478),o=c(7838),p=c(2490),q=[0,0],r=[0,0];a.exports=function(a,b){var c;return 0===a||j(a)||k(a)?a:(m(q,a),b+=q[1],(b+=n(a=q[0]))<i?l(0,a):b>g?a<0?e:d:(b<=h?(b+=52,c=2220446049250313e-31):c=1,o(r,a),c*p(0x800fffff&r[0]|b+f<<20,r[1])))}},4772:function(a,b,c){a.exports=c(7548)},7548:function(a){a.exports=Number},8478:function(a,b,c){a.exports=c(4500)},4500:function(a,b,c){var d=c(1921),e=c(3105),f=c(6315);a.exports=function(a){var b=d(a);return(b=(b&e)>>>20)-f|0}},2490:function(a,b,c){a.exports=c(9639)},4445:function(a,b,c){var d,e;!0===c(5902)?(d=1,e=0):(d=0,e=1),a.exports={HIGH:d,LOW:e}},9639:function(a,b,c){var d=c(4773),e=c(7382),f=c(4445),g=new e(1),h=new d(g.buffer),i=f.HIGH,j=f.LOW;a.exports=function(a,b){return h[i]=a,h[j]=b,g[0]}},5646:function(a,b,c){a.exports=+(!0===c(5902))},1921:function(a,b,c){a.exports=c(6285)},6285:function(a,b,c){var d=c(4773),e=c(7382),f=c(5646),g=new e(1),h=new d(g.buffer);a.exports=function(a){return g[0]=a,h[f]}},9024:function(a,b,c){var d=c(6488),e=c(7011),f=c(1883),g=c(513);a.exports=function(a,b,c,h){return f(a)||e(a)?(b[h]=a,b[h+c]=0):0!==a&&g(a)<d?(b[h]=0x10000000000000*a,b[h+c]=-52):(b[h]=a,b[h+c]=0),b}},4948:function(a,b,c){var d=c(7576),e=c(9422);d(e,"assign",c(9024)),a.exports=e},9422:function(a,b,c){var d=c(9024);a.exports=function(a){return d(a,[0,0],1,0)}},5239:function(a,b,c){var d=c(4773),e=c(7382),f=c(5782),g=new e(1),h=new d(g.buffer),i=f.HIGH,j=f.LOW;a.exports=function(a,b,c,d){return g[0]=a,b[d]=h[i],b[d+c]=h[j],b}},7838:function(a,b,c){var d=c(7576),e=c(4010);d(e,"assign",c(5239)),a.exports=e},5782:function(a,b,c){var d,e;!0===c(5902)?(d=1,e=0):(d=0,e=1),a.exports={HIGH:d,LOW:e}},4010:function(a,b,c){var d=c(5239);a.exports=function(a){return d(a,[0,0],1,0)}},7576:function(a,b,c){a.exports=c(7063)},7063:function(a,b,c){var d=c(6691);a.exports=function(a,b,c){d(a,b,{configurable:!1,enumerable:!1,writable:!1,value:c})}},2073:function(a){a.exports=Object.defineProperty},1680:function(a){a.exports="function"==typeof Object.defineProperty?Object.defineProperty:null},1471:function(a,b,c){var d=c(1680);a.exports=function(){try{return d({},"x",{}),!0}catch(a){return!1}}},6691:function(a,b,c){var d=c(1471),e=c(2073),f=c(1309);a.exports=d()?e:f},1309:function(a){var b=Object.prototype,c=b.toString,d=b.__defineGetter__,e=b.__defineSetter__,f=b.__lookupGetter__,g=b.__lookupSetter__;a.exports=function(a,h,i){var j,k,l,m;if("object"!=typeof a||null===a||"[object Array]"===c.call(a))throw TypeError("invalid argument. First argument must be an object. Value: `"+a+"`.");if("object"!=typeof i||null===i||"[object Array]"===c.call(i))throw TypeError("invalid argument. Property descriptor must be an object. Value: `"+i+"`.");if((k="value"in i)&&(f.call(a,h)||g.call(a,h)?(j=a.__proto__,a.__proto__=b,delete a[h],a[h]=i.value,a.__proto__=j):a[h]=i.value),l="get"in i,m="set"in i,k&&(l||m))throw Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return l&&d&&d.call(a,h,i.get),m&&e&&e.call(a,h,i.set),a}},6208:function(a,b,c){var d=c(3123),e=c(7407),f=c(4210);a.exports=d()?f:e},7407:function(a,b,c){var d=c(173);a.exports=function(a){return d.call(a)}},4210:function(a,b,c){var d=c(9048),e=c(1403),f=c(173);a.exports=function(a){var b,c,g;if(null==a)return f.call(a);c=a[e],b=d(a,e);try{a[e]=void 0}catch(b){return f.call(a)}return g=f.call(a),b?a[e]=c:delete a[e],g}},173:function(a){a.exports=Object.prototype.toString},1403:function(a){a.exports="function"==typeof Symbol?Symbol.toStringTag:""},7843:function(a){a.exports=function(a,b,c,d,e){for(b=b.split?b.split("."):b,d=0;d<b.length;d++)a=a?a[b[d]]:e;return a===e?c:a}},374:function(a,b,c){c.r(b),c.d(b,{default:function(){return f}});for(var d=[],e=0;e<64;)d[e]=0|0x100000000*Math.sin(++e%Math.PI);function f(a){var b,c,f,g=[b=0x67452301,c=0xefcdab89,~b,~c],h=[],i=unescape(encodeURI(a))+"Â€",j=i.length;for(a=--j/4+2|15,h[--a]=8*j;~j;)h[j>>2]|=i.charCodeAt(j)<<8*j--;for(e=i=0;e<a;e+=16){for(j=g;i<64;j=[f=j[3],b+((f=j[0]+[b&c|~b&f,f&b|~f&c,b^c^f,c^(b|~f)][j=i>>4]+d[i]+~~h[e|15&[i,5*i+1,3*i+5,7*i][j]])<<(j=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*j+i++%4])|f>>>-j),b,c])b=0|j[1],c=j[2];for(i=4;i;)g[--i]+=j[i]}for(a="";i<32;)a+=(g[i>>3]>>4*(1^i++)&15).toString(16);return a}}},b={};function c(d){var e=b[d];if(void 0!==e)return e.exports;var f=b[d]={exports:{}};return a[d].call(f.exports,f,f.exports,c),f.exports}return c.d=function(a,b){for(var d in b)c.o(b,d)&&!c.o(a,d)&&Object.defineProperty(a,d,{enumerable:!0,get:b[d]})},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c(2870)}()},84789,a=>{"use strict";var b=a.i(37047),c=function(a){return function(c){var d=c.payload,e=c.integration,f=c.next;new b.Store(a).getRulesByDestinationName(e).forEach(function(a){for(var c=a.matchers,e=a.transformers,g=0;g<c.length;g++)if(b.matches(d.obj,c[g])&&(d.obj=b.transform(d.obj,e[g]),null===d.obj))return f(null)}),f(d)}};a.s(["tsubMiddleware",()=>c])}];

//# sourceMappingURL=node_modules_%40segment_analytics-next_dist_pkg_b8d44175._.js.map