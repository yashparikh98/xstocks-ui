'use strict';

var web3_js = require('@solana/web3.js');
var noModal = require('@web3auth/no-modal');
var react = require('react');
var useChain = require('../../hooks/useChain.js');
require('@babel/runtime/helpers/objectSpread2');
require('@babel/runtime/helpers/defineProperty');
require('@web3auth/auth');
require('deepmerge');
require('../../../config.js');
require('../../../ui/config.js');
require('../../../ui/interfaces.js');
require('react/jsx-runtime');
require('../../../ui/css/index.css.js');
require('bowser');
require('react-dom/client');
require('@toruslabs/http-helpers');
require('clsx');
require('tailwind-merge');
require('react-i18next');
require('../../../ui/context/RootContext.js');
require('../../../ui/localeImport.js');
require('classnames');
require('react-qrcode-logo');
require('../../../ui/components/Login/Login.js');
var useWeb3Auth = require('../../hooks/useWeb3Auth.js');

const useSolanaWallet = () => {
  const {
    provider,
    web3Auth
  } = useWeb3Auth.useWeb3Auth();
  const {
    chainNamespace
  } = useChain.useChain();
  const [accounts, setAccounts] = react.useState(null);
  const solanaWallet = react.useMemo(() => {
    if (!provider) return null;
    if (chainNamespace !== noModal.CHAIN_NAMESPACES.SOLANA) return null;
    return new noModal.SolanaWallet(provider);
  }, [provider, chainNamespace]);
  const connection = react.useMemo(() => {
    if (!web3Auth || !provider || chainNamespace !== noModal.CHAIN_NAMESPACES.SOLANA) return null;
    return new web3_js.Connection(web3Auth.currentChain.rpcTarget);
  }, [web3Auth, provider, chainNamespace]);
  react.useEffect(() => {
    const init = async () => {
      if (chainNamespace !== noModal.CHAIN_NAMESPACES.SOLANA) {
        setAccounts(null);
        return;
      }
      if (!solanaWallet) return;
      const accounts = await solanaWallet.getAccounts();
      if ((accounts === null || accounts === void 0 ? void 0 : accounts.length) > 0) {
        setAccounts(accounts);
      }
    };
    if (solanaWallet) init();
  }, [solanaWallet, chainNamespace]);
  return {
    solanaWallet,
    accounts,
    connection
  };
};

exports.useSolanaWallet = useSolanaWallet;
